(()=>{var e={38(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h,forward:()=>c,init:()=>u,inverse:()=>d,names:()=>p,phi1z:()=>f});var i=n(9576),o=n(7572),a=n(4181),s=n(3357),l=n(384);function u(){Math.abs(this.lat1+this.lat2)<l.H0||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,i.A)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,o.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,i.A)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,o.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,o.A)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>l.H0?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function c(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=(0,o.A)(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,l=this.ns0*(0,a.A)(t-this.long0,this.over),u=s*Math.sin(l)+this.x0,c=this.rh-s*Math.cos(l)+this.y0;return e.x=u,e.y=c,e}function d(e){var t,n,i,o,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),o=0,0!==t&&(o=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),e.x=(0,a.A)(o/this.ns0+this.long0,this.over),e.y=s,e}function f(e,t){var n,i,o,a,u,c=(0,s.A)(.5*t);if(e<l.H0)return c;for(var d=e*e,f=1;f<=25;f++)if(n=Math.sin(c),i=Math.cos(c),c+=u=.5*(a=1-(o=e*n)*o)*a/i*(t/(1-d)-n/a+.5/e*Math.log((1-o)/(1+o))),1e-7>=Math.abs(u))return c;return null}var p=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];let h={init:u,forward:c,inverse:d,names:p,phi1z:f}},80(e,t,n){e.exports=n(4312)},121(e){e.exports=function(e,t,n){var i,o,a,s,l,u,c,d,f,p,h,m,g=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*y+t[12],e[13]=t[1]*g+t[5]*v+t[9]*y+t[13],e[14]=t[2]*g+t[6]*v+t[10]*y+t[14],e[15]=t[3]*g+t[7]*v+t[11]*y+t[15]):(i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=t[9],h=t[10],m=t[11],e[0]=i,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=u,e[6]=c,e[7]=d,e[8]=f,e[9]=p,e[10]=h,e[11]=m,e[12]=i*g+l*v+f*y+t[12],e[13]=o*g+u*v+p*y+t[13],e[14]=a*g+c*v+h*y+t[14],e[15]=s*g+d*v+m*y+t[15]),e}},163(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c,forward:()=>s,init:()=>a,inverse:()=>l,names:()=>u});var i=n(4181),o=n(384);function a(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0}function s(e){for(var t=e.x,n=e.y,a=(0,i.A)(t-this.long0,this.over),s=n,l=Math.PI*Math.sin(n);;){var u=-(s+Math.sin(s)-l)/(1+Math.cos(s));if(s+=u,Math.abs(u)<o.H0)break}s/=2,Math.PI/2-Math.abs(n)<o.H0&&(a=0);var c=.900316316158*this.a*a*Math.cos(s)+this.x0,d=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=c,e.y=d,e}function l(e){e.x-=this.x0,e.y-=this.y0,Math.abs(t=e.y/(1.4142135623731*this.a))>.999999999999&&(t=.999999999999);var t,n=Math.asin(t),o=(0,i.A)(this.long0+e.x/(.900316316158*this.a*Math.cos(n)),this.over);o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),Math.abs(t=(2*n+Math.sin(2*n))/Math.PI)>1&&(t=1);var a=Math.asin(t);return e.x=o,e.y=a,e}var u=["Mollweide","moll"];let c={init:a,forward:s,inverse:l,names:u}},220(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},231(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h,forward:()=>d,init:()=>c,inverse:()=>f,names:()=>p});var i=n(7099),o=n(4181),a=n(6245),s=n(384),l=n(4384);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){var e,t,n,a,c,d,f,p,h,m,g,v,y=0,b=0,x=0,w=0,A=0,C=0,S=0;this.no_off=(e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t="object"===u(this.projName)?Object.keys(this.projName)[0]:this.projName,"no_uoff"in this||"no_off"in this||-1!==e.indexOf(t)||-1!==e.indexOf((0,l.Cx)(t))),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),_&&(S=this.alpha),T&&(y=this.rectified_grid_angle),_||T)b=this.longc;else if(x=this.long1,A=this.lat1,w=this.long2,1e-7>=Math.abs(A-(C=this.lat2))||(n=Math.abs(A))<=1e-7||1e-7>=Math.abs(n-s.sK)||1e-7>=Math.abs(Math.abs(this.lat0)-s.sK)||1e-7>=Math.abs(Math.abs(C)-s.sK))throw Error();var O=1-this.es;(a=Math.sqrt(O),Math.abs(this.lat0)>s.H0?(m=Math.sin(this.lat0),c=Math.cos(this.lat0),n=1-this.es*m*m,this.B=c*c,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*a/n,(f=(d=this.B*a/(c*Math.sqrt(n)))*d-1)<=0?f=0:(f=Math.sqrt(f),this.lat0<0&&(f=-f)),this.E=f+=d,this.E*=Math.pow((0,i.A)(this.e,this.lat0,m),this.B)):(this.B=1/a,this.A=this.k0,this.E=d=f=1),_||T)?(_?(v=Math.asin(Math.sin(S)/d),T||(y=S)):S=Math.asin(d*Math.sin(v=y)),this.lam0=b-Math.asin(.5*(f-1/f)*Math.tan(v))/this.B):(p=Math.pow((0,i.A)(this.e,A,Math.sin(A)),this.B),h=Math.pow((0,i.A)(this.e,C,Math.sin(C)),this.B),f=this.E/p,g=((g=this.E*this.E)-h*p)/(g+h*p),(n=x-w)<-Math.PI?w-=s.JM:n>Math.PI&&(w+=s.JM),this.lam0=(0,o.A)(.5*(x+w)-Math.atan(g*Math.tan(.5*this.B*(x-w))/((h-p)/(h+p)))/this.B,this.over),y=S=Math.asin(d*Math.sin(v=Math.atan(2*Math.sin(this.B*(0,o.A)(x-this.lam0,this.over))/(f-1/f))))),this.singam=Math.sin(v),this.cosgam=Math.cos(v),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(d*d-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),f=.5*v,this.v_pole_n=this.ArB*Math.log(Math.tan(s.Vj-f)),this.v_pole_s=this.ArB*Math.log(Math.tan(s.Vj+f))}function d(e){var t,n,o,a,l,u,c,d,f={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-s.sK)>s.H0){if(u=1/(l=this.E/Math.pow((0,i.A)(this.e,e.y,Math.sin(e.y)),this.B)),t=.5*(l-u),n=.5*(l+u),a=Math.sin(this.B*e.x),Math.abs(Math.abs(o=(t*this.singam-a*this.cosgam)/n)-1)<s.H0)throw Error();d=.5*this.ArB*Math.log((1-o)/(1+o)),c=1e-7>Math.abs(u=Math.cos(this.B*e.x))?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+a*this.singam,u)}else d=e.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*e.y;return this.no_rot?(f.x=c,f.y=d):(c-=this.u_0,f.x=d*this.cosrot+c*this.sinrot,f.y=c*this.cosrot-d*this.sinrot),f.x=this.a*f.x+this.x0,f.y=this.a*f.y+this.y0,f}function f(e){var t,n,i,o,l,u,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),o=.5*((i=Math.exp(-this.BrA*n))-1/i),Math.abs(Math.abs(u=((l=Math.sin(this.BrA*t))*this.cosgam+o*this.singam)/(.5*(i+1/i)))-1)<s.H0)c.x=0,c.y=u<0?-s.sK:s.sK;else{if(c.y=this.E/Math.sqrt((1+u)/(1-u)),c.y=(0,a.A)(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw Error();c.x=-this.rB*Math.atan2(o*this.cosgam-l*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var p=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];let h={init:c,forward:d,inverse:f,names:p}},278(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=n[0]*i+n[4]*o+n[8]*a+n[12]*s,e[1]=n[1]*i+n[5]*o+n[9]*a+n[13]*s,e[2]=n[2]*i+n[6]*o+n[10]*a+n[14]*s,e[3]=n[3]*i+n[7]*o+n[11]*a+n[15]*s,e}},293(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return e[0]=s*d-l*c,e[1]=o*c-i*d,e[2]=i*l-o*s,e[3]=l*u-a*d,e[4]=n*d-o*u,e[5]=o*a-n*l,e[6]=a*c-s*u,e[7]=i*u-n*c,e[8]=n*s-i*a,e}},303(e,t,n){n(4099).GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},304(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],h=e[12],m=e[13],g=e[14],v=e[15];return(t*s-n*a)*(f*v-p*g)-(t*l-i*a)*(d*v-p*m)+(t*u-o*a)*(d*g-f*m)+(n*l-i*s)*(c*v-p*h)-(n*u-o*s)*(c*g-f*h)+(i*u-o*l)*(c*m-d*h)}},366(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},368(e){e.exports=function(e,t,n){var i=n[0],o=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},384(e,t,n){"use strict";n.d(t,{A1:()=>l,DF:()=>A,G9:()=>a,H0:()=>v,JM:()=>w,Q1:()=>m,Vj:()=>x,Y$:()=>o,_3:()=>f,a8:()=>i,bA:()=>h,bv:()=>u,dX:()=>b,ej:()=>g,gS:()=>d,sK:()=>p,xK:()=>s,zp:()=>c,zq:()=>y});var i=1,o=2,a=3,s=4,l=5,u=6378137,c=6356752.314,d=.0066943799901413165,f=484813681109536e-20,p=Math.PI/2,h=.16666666666666666,m=.04722222222222222,g=.022156084656084655,v=1e-10,y=.017453292519943295,b=57.29577951308232,x=Math.PI/4,w=2*Math.PI,A=3.14159265359},397(e,t,n){var i=n(8899),o=n(5933).registerAnnotation,a=n(8452),s=n(4341),l=n(8795).annotation,u=n(8795).state,c=n(8795).continuousVerticesActions,d=n(8795).continuousVerticesProcessAction,f=function(e){"use strict";if(!(this instanceof f))return new f(e);(e=s.deepMerge({},this.constructor.defaults,{style:{line:function(e){return Array(t.options("vertices").length).fill(e)},position:function(e,n){return t.options("vertices")[n]}},createStyle:{line:function(e){return Array(t.options("vertices").length).fill(e)},position:function(e,n){return t.options("vertices")[n]}}},e)).vertices=e.vertices||e.coordinates||[],delete e.coordinates,l.call(this,"line",e);var t=this,n=this.actions,i=this.processEditAction;this.features=function(){var e,n=t.options(),i=t.state();return i===u.create?e=[{line:{line:n.vertices,style:t.styleForState(i)}}]:(e=[{line:{line:n.vertices,style:t.styleForState(i)}}],i===u.edit&&t._addEditHandles(e,n.vertices,void 0,!t.style("closed"))),e},this._coordinates=function(e){return e&&t.options("vertices",e),t.options("vertices")},this.mouseMove=function(e){if(t.state()===u.create){var n=t.options("vertices");if(n.length)return n[n.length-1]=e.mapgcs,!0}},this.mouseClick=function(e){var n=t.layer();if(t.state()===u.create&&n){var i,o=!!e.buttonsDown.right;if(e.buttonsDown.left||e.buttonsDown.right){var a=t.options("vertices");if(!e.buttonsDown.right||a.length)return(e.handled=!0,e.buttonsDown.left&&(a.length?a.length>=2&&n.displayDistance(a[a.length-2],null,e.map,"display")<=n.options("adjacentPointProximity")?(i=!0,t._lastClick&&e.time-t._lastClick<n.options("dblClickTime")&&(o=!0)):a.length>=2&&n.displayDistance(a[0],null,e.map,"display")<=n.options("finalPointProximity")?o="close":a[a.length-1]=e.mapgcs:a.push(e.mapgcs),o||i||a.push(e.mapgcs),t._lastClick=e.time,t._lastClickVertexCount=a.length),o)?a.length<3?"remove":(a.pop(),t.options("style").closed="close"===o,t.state(u.done),"done"):!i}}},this.actions=function(e){return c(t,n,e,"line",arguments)},this.processAction=function(e){return d(t,e,"line")},this._geojsonCoordinates=function(e){var n=t.coordinates(e);if(n&&!(n.length<2)&&t.state()!==u.create){for(var i=[],o=0;o<n.length;o+=1)i.push([n[o].x,n[o].y]);return i}},this._geojsonGeometryType=function(){return"LineString"},this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this.processEditAction=function(e){return"vertex"===t._editHandle.handle.type?t._processEditActionVertex(e,!0):i.apply(t,arguments)},this.mouseClickEdit=function(e){var n,i=t.layer(),o=t._editHandle;if(t.state()===u.edit&&i&&e.buttonsDown.left&&o&&o.handle.selected&&"edge"===o.handle.type&&t.options("style").closed&&(e.handled=!0,t._lastClick&&e.time-t._lastClick<i.options("dblClickTime")&&(n=!0),t._lastClick=e.time,n)){var a=o.handle.index,s=t._coordinates(),l=s.slice(a+1).concat(s.slice(0,a+1));return t._coordinates(l),t.options("style").closed=!1,o.handle.index=void 0,!0}}};i(f,l),f.defaults=Object.assign({},l.defaults,{style:{strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},allowBooleanOperations:["annotation-cut"]});var p={};p[a.capabilities.basic]=[u.create],o("line",f,p),e.exports=f},409(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},412(e,t,n){var i=n(4099),o=n(8899);i.renderWindow=function(e){"use strict";if(!(this instanceof i.renderWindow))return new i.renderWindow(e);i.graphicsObject.call(this);var t=this,n=0,o=0,a=400,s=400,l=null,u=[],c=null;return this.windowSize=function(){return[a,s]},this.windowPosition=function(){return[n,o]},this.renderers=function(){return u},this.activeRenderer=function(){return l},this.addRenderer=function(e){return!1===t.hasRenderer(e)&&(u.push(e),e.setRenderWindow(t),null===l&&(l=e),0!==e.layer()&&e.camera().setClearMask(i.GL.DepthBufferBit),t.modified(),!0)},this.hasRenderer=function(e){var t;for(t=0;t<u.length;t+=1)if(e===u[t])return!0;return!1},this.positionAndResize=function(e,i,l,c){var d;for(d=0,n=e,o=i,a=l,s=c;d<u.length;d+=1)u[d].positionAndResize(n,o,a,s);t.modified()},this._setup=function(t){c=null;try{var i;for(i=0,c=e.getContext("webgl")||e.getContext("experimental-webgl");i<u.length;i+=1)(u[i].width()>a||0===u[i].width()||u[i].height()>s||0===u[i].height())&&u[i].resize(n,o,a,s);return!0}catch(e){}return c||console.warn("[ERROR] Unable to initialize WebGL. Your browser may not support it."),!1},this.context=function(){return c},this._cleanup=function(e){var n;for(n=0;n<u.length;n+=1)u[n]._cleanup(e);i.clearCachedShaders(e?e.m_context:null),t.modified()},this.render=function(){var e;for(u.sort(function(e,t){return e.layer()-t.layer()}),e=0;e<u.length;e+=1)u[e].render()},t},o(i.renderWindow,i.graphicsObject)},416(e){e.exports=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+i*i+o*o+a*a)}},435(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*l-i*s,x=n*u-o*s,w=n*c-a*s,A=i*u-o*l,C=i*c-a*l,S=o*c-a*u,_=d*g-f*m,T=d*v-p*m,O=d*y-h*m,P=f*v-p*g,M=f*y-h*g,E=p*y-h*v,D=b*E-x*M+w*P+A*O-C*T+S*_;return D?(D=1/D,e[0]=(l*E-u*M+c*P)*D,e[1]=(o*M-i*E-a*P)*D,e[2]=(g*S-v*C+y*A)*D,e[3]=(p*C-f*S-h*A)*D,e[4]=(u*O-s*E-c*T)*D,e[5]=(n*E-o*O+a*T)*D,e[6]=(v*w-m*S-y*x)*D,e[7]=(d*S-p*w+h*x)*D,e[8]=(s*M-l*O+c*_)*D,e[9]=(i*O-n*M-a*_)*D,e[10]=(m*C-g*w+y*b)*D,e[11]=(f*w-d*C-h*b)*D,e[12]=(l*T-s*P-u*_)*D,e[13]=(n*P-i*T+o*_)*D,e[14]=(g*x-m*A-v*b)*D,e[15]=(d*A-f*x+p*b)*D,e):null}},452(e,t,n){var i,o=n(8899),a=n(5933).registerRenderer,s=n(3757),l=function(e){"use strict";if(!(this instanceof l))return new l(e);e=e||{},s.call(this,e);var t,i=n(4692),o=n(6194),a=n(8315),u=n(4341),c=n(4128),d=this,f=null,p=null,h=!1,m=this._init,g=this._exit;return this.contextRenderer=function(){return f},this.api=function(){return l.apiname},this._init=function(){if(d.initialized())return d;m.call(d);var t=e.canvas||i(document.createElement("canvas"));if(t.addClass("webgl-canvas"),i(d.layer().node().get(0)).append(t),window.overrideContextAttributes){var n=t.get(0),a=n.getContext;n.getContext=function(e,t){if(t=t||{},window.overrideContextAttributes)for(var i in window.overrideContextAttributes)window.overrideContextAttributes.hasOwnProperty(i)&&(t[i]=window.overrideContextAttributes[i]);return a.call(n,e,t)}}(p=o.viewer(t.get(0),e.options)).init(),(f=p.renderWindow().activeRenderer()).setResetScene(!1),t.get(0).addEventListener("webglcontextlost",function(e){return e.preventDefault()},!1),t.get(0).addEventListener("webglcontextrestored",function(){return p.renderWindow()._init()},!1),p.renderWindow().renderers().length>0&&f.setLayer(p.renderWindow().renderers().length),d.canvas(t);var s=d.layer().map().size();return d._resize(0,0,s.width,s.height),d},this._resize=function(e,t,n,i){var o=p.renderWindow();return(e!==o.windowPosition[0]||t!==o.windowPosition[1]||n!==d.width()||i!==d.height())&&(d._setWidthHeight(n,i),d.canvas().attr("width",n),d.canvas().attr("height",i),o.positionAndResize(e,t,n,i),h=!0,d._render()),d},this._render=function(){return d.layer().map().scheduleAnimationFrame(d._renderFrame,!0),d},this._renderFrame=function(){p&&(h&&(h=!1,d._updateRendererCamera()),p.render())},this._glContext=function(){return p&&p.renderWindow()?p.renderWindow().context():o.GL},this._exit=function(){if(d.layer().map().scheduleAnimationFrame(d._renderFrame,"remove"),d.canvas().remove(),p){var e=new o.renderState;e.m_renderer=p,e.m_context=d._glContext(),p.exit(e);var t=d._glContext();t!==o.GL&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext&&t.getExtension("WEBGL_lose_context").loseContext()}o.clearCachedShaders(o.GL),p=null,g()},this._updateRendererCamera=function(){var e=p.renderWindow(),n=d.layer().map(),i=n.camera(),o=n.rotation()||0,s=i.view,l=i.projectionMatrix;if(l[15])l=a.copy(u.mat4AsArray(),l),l=a.scale(l,l,[1,1,-.5]),l=a.translate(l,l,[0,0,i.clipbounds.far]);else{var c=i.clipbounds.near,f=i.clipbounds.far;l=a.copy(u.mat4AsArray(),l),l=a.scale(l,l,[1/c,1/c,-1/f])}var h=Math.PI/2,m=o%h,g=1e-5>Math.min(Math.abs(m),Math.abs(m-h));e.renderers().forEach(function(e){var o=e.camera();if(!(u.compareArrays(s,o.viewMatrix())&&u.compareArrays(l,o.projectionMatrix()))||t!==n.zoom()){t=n.zoom(),o.setViewMatrix(s,!0),o.setProjectionMatrix(l);var a=i.viewport;l[1]||l[2]||l[3]||l[4]||l[6]||l[7]||l[8]||l[9]||l[11]||1!==l[15]||!g||a.left&&a.left%1||a.top&&a.top%1||parseFloat(t.toFixed(6))!==parseFloat(t.toFixed(0))?o.viewAlignment=function(){return null}:o.viewAlignment=function(){var e={roundx:2/a.width,roundy:2/a.height};return e.dx=a.width%2?.5*e.roundx:0,e.dy=a.height%2?.5*e.roundy:0,e}}})},d.layer().geoOn(c.pan,function(e){h=!0}),d.layer().geoOn(c.parallelprojection,function(e){var t=d.contextRenderer(),n=d.layer();if(e.geo&&e.geo._triggeredBy!==n){if(!t||!t.camera())return void console.log("Parallel projection event triggered on unconnected VGL renderer.");t.camera().setEnableParallelProjection(e.parallelProjection),h=!0}}),this};l.apiname="webgl",o(l,s),a("webgl",l),a("vgl",l),l.supported=function(){if(void 0===i){var e,t;try{(t=(e=document.createElement("canvas")).getContext("webgl")||e.getContext("experimental-webgl")).getSupportedExtensions().indexOf("WEBGL_debug_renderer_info")>=0&&(l._unmaskedRenderer=t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)),l._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),l._maxPointSize=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1],i=!0}catch(e){console.warn("No webGL support"),i=!1}e=void 0,t=void 0}return i},l.fallback=function(){return null},e.exports=l},503(e){e.exports=function(e,t,n,i,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e}},535(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>l,init:()=>s,inverse:()=>u,names:()=>c});var i=n(4181),o=n(384),a=n(3357);function s(){this.R=this.a}function l(e){var t,n,s=e.x,l=e.y,u=(0,i.A)(s-this.long0,this.over);Math.abs(l)<=o.H0&&(t=this.x0+this.R*u,n=this.y0);var c=(0,a.A)(2*Math.abs(l/Math.PI));(Math.abs(u)<=o.H0||Math.abs(Math.abs(l)-o.sK)<=o.H0)&&(t=this.x0,n=l>=0?this.y0+Math.PI*this.R*Math.tan(.5*c):this.y0+-(Math.PI*this.R*Math.tan(.5*c)));var d=.5*Math.abs(Math.PI/u-u/Math.PI),f=d*d,p=Math.sin(c),h=Math.cos(c),m=h/(p+h-1),g=m*(2/p-1),v=g*g,y=Math.PI*this.R*(d*(m-v)+Math.sqrt(f*(m-v)*(m-v)-(v+f)*(m*m-v)))/(v+f);u<0&&(y=-y),t=this.x0+y;var b=f+m;return y=Math.PI*this.R*(g*b-d*Math.sqrt((v+f)*(f+1)-b*b))/(v+f),n=l>=0?this.y0+y:this.y0-y,e.x=t,e.y=n,e}function u(e){var t,n,a,s,l,u,c,d,f,p,h,m;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,s=(n=e.x/p)*n+(a=e.y/p)*a,u=(l=-Math.abs(a)*(1+s))-2*a*a+n*n,c=-2*l+1+2*a*a+s*s,m=a*a/c+(2*u*u*u/c/c/c-9*l*u/c/c)/27,f=2*Math.sqrt(-(d=(l-u*u/3/c)/c)/3),Math.abs(p=3*m/d/f)>1&&(p=p>=0?1:-1),h=Math.acos(p)/3,t=e.y>=0?(-f*Math.cos(h+Math.PI/3)-u/3/c)*Math.PI:-(-f*Math.cos(h+Math.PI/3)-u/3/c)*Math.PI,e.x=Math.abs(n)<o.H0?this.long0:(0,i.A)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-a*a)+s*s))/2/n,this.over),e.y=t,e}var c=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];let d={init:s,forward:l,inverse:u,names:c}},540(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},551(e,t,n){var i=n(8899),o=n(8525),a=n(4897),s=function(e){"use strict";if(!(this instanceof s))return new s(e);if(a.call(this),!((e=e||{}).layer instanceof o))throw Error("fileReader must be given a feature layer");var t=e.layer;return this.layer=function(){return t},this.canRead=function(e){return!1},this.read=function(e,t,n){var i=new Promise(function(e,n){throw t&&t(!1),Error("The default file reader always fails")});return this.addPromise(i),i},this._getString=function(e,t,n){var i;(i=new FileReader,n&&(i.onprogress=n),i.onloadend=function(){t(i.error||i.result)},i).readAsText(e)},this};i(s,a),e.exports=s},565(e,t,n){"use strict";n.r(t),n.d(t,{EQUIT:()=>u,N_POLE:()=>l,OBLIQ:()=>c,S_POLE:()=>s,default:()=>m,forward:()=>f,init:()=>d,inverse:()=>p,names:()=>h});var i=n(384),o=n(7572),a=n(4181),s=1,l=2,u=3,c=4;function d(){var e,t,n,a,d=Math.abs(this.lat0);if(Math.abs(d-i.sK)<i.H0?this.mode=this.lat0<0?s:l:Math.abs(d)<i.H0?this.mode=u:this.mode=c,this.es>0){switch(this.qp=(0,o.A)(this.e,1),this.mmf=.5/(1-this.es),this.apa=(e=this.es,(n=[])[0]=.3333333333333333*e,t=e*e,n[0]+=.17222222222222222*t,n[1]=.06388888888888888*t,t*=e,n[0]+=.10257936507936508*t,n[1]+=.0664021164021164*t,n[2]=.016415012942191543*t,n),this.mode){case l:case s:this.dd=1;break;case u:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case c:this.rq=Math.sqrt(.5*this.qp),a=Math.sin(this.lat0),this.sinb1=(0,o.A)(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===c&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function f(e){var t,n,s,l,u,c,d,f,p,h,m=e.x,g=e.y;if(m=(0,a.A)(m-this.long0,this.over),this.sphere){if(u=Math.sin(g),h=Math.cos(g),s=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*s:1+this.sinph0*u+this.cosph0*h*s)<=i.H0)return null;t=(n=Math.sqrt(2/n))*h*Math.sin(m),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*h*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(g+this.lat0)<i.H0)return null;n=i.Vj-.5*g,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(m),n*=s}}else{switch(d=0,f=0,p=0,s=Math.cos(m),l=Math.sin(m),u=Math.sin(g),c=(0,o.A)(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sqrt(1-(d=c/this.qp)*d)),this.mode){case this.OBLIQ:p=1+this.sinb1*d+this.cosb1*f*s;break;case this.EQUIT:p=1+f*s;break;case this.N_POLE:p=i.sK+g,c=this.qp-c;break;case this.S_POLE:p=g-i.sK,c=this.qp+c}if(Math.abs(p)<i.H0)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*d-this.sinb1*f*s):(p=Math.sqrt(2/(1+f*s)))*d*this.ymf,t=this.xmf*p*f*l;break;case this.N_POLE:case this.S_POLE:c>=0?(t=(p=Math.sqrt(c))*l,n=s*(this.mode===this.S_POLE?p:-p)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function p(e){e.x-=this.x0,e.y-=this.y0;var t,n,o,s=e.x/this.a,l=e.y/this.a;if(this.sphere){var u,c,d,f,p,h,m,g,v=0,y=0;if((c=.5*(g=Math.sqrt(s*s+l*l)))>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(c),v=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(g)<=i.H0?0:Math.asin(l*y/g),s*=y,l=v*g;break;case this.OBLIQ:c=Math.abs(g)<=i.H0?this.lat0:Math.asin(v*this.sinph0+l*y*this.cosph0/g),s*=y*this.cosph0,l=(v-Math.sin(c)*this.sinph0)*g;break;case this.N_POLE:l=-l,c=i.sK-c;break;case this.S_POLE:c-=i.sK}u=0===l&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(s,l)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s/=this.dd,l*=this.dd,(h=Math.sqrt(s*s+l*l))<i.H0)return e.x=this.long0,e.y=this.lat0,e;d=Math.cos(f=2*Math.asin(.5*h/this.rq)),s*=f=Math.sin(f),this.mode===this.OBLIQ?(m=d*this.sinb1+l*f*this.cosb1/h,p=this.qp*m,l=h*this.cosb1*d-l*this.sinb1*f):(m=l*f/h,p=this.qp*m,l=h*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(p=s*s+l*l))return e.x=this.long0,e.y=this.lat0,e;m=1-p/this.qp,this.mode===this.S_POLE&&(m=-m)}u=Math.atan2(s,l),t=Math.asin(m),n=this.apa,o=t+t,c=t+n[0]*Math.sin(o)+n[1]*Math.sin(o+o)+n[2]*Math.sin(o+o+o)}return e.x=(0,a.A)(this.long0+u,this.over),e.y=c,e}var h=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];let m={init:d,forward:f,inverse:p,names:h,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}},597(e){e.exports=function(e,t,n,i,o){var a=1/Math.tan(t/2),s=1/(i-o);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+i)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*i*s,e[15]=0,e}},605(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>l,init:()=>s,inverse:()=>u,names:()=>c});var i=n(9985),o=n(4181),a=n(2736);function s(){i.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function l(e){var t,n,a,s;return e.x=(0,o.A)(e.x-this.long0,this.over),i.default.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),a=Math.cos(e.x),e.x=(s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*a))*n*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*n*a),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function u(e){var t,n,s,l,u;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,u=(0,a.A)(e.x,e.y)){var c=2*Math.atan2(u,this.R2);t=Math.sin(c),l=Math.asin((n=Math.cos(c))*this.sinc0+e.y*t*this.cosc0/u),s=Math.atan2(e.x*t,u*this.cosc0*n-e.y*this.sinc0*t)}else l=this.phic0,s=0;return e.x=s,e.y=l,i.default.inverse.apply(this,[e]),e.x=(0,o.A)(e.x+this.long0,this.over),e}var c=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];let d={init:s,forward:l,inverse:u,names:c}},641(e,t,n){"use strict";function i(e,t,n,i,o){return e*o-t*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)}n.d(t,{A:()=>i})},664(e){e.exports="geo_svg_rescale"},726(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9439),s={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:1,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:6,refY:6,markerHeight:8,markerWidth:8,orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:0,refY:5,markerHeight:6,markerWidth:6,orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:10,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}},l=function(e){"use strict";if(!(this instanceof l))return new l(e);var t=n(9966),i=n(6732),o=n(2184).d3;e=e||{},a.call(this,e),t.call(this);var u=this,c=this._exit,d=this._update,f=i(),p={};function h(e,t,n){return u._svgid()+"_marker_"+t+"_"+n}function m(e,t,n,i,a){var l=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid()).data(e.length?[1]:[]);l.enter().append("g").attr("id",u._svgid).attr("class","marker-group"),l.exit().remove();var c=e.reduce(function(e,t,n){var o=s[a(t,n)],l=s[i(t,n)];return o&&e.push({data:t,dataIndex:n,head:!0}),l&&e.push({data:t,dataIndex:n,head:!1}),e},[]),d=(l=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid())).selectAll("marker.geo-vector-marker").data(c),f=u.renderer();d.enter().append("marker").each(function(e){var t=o.select(this),n=e.head?s[a(e.data,e.dataIndex)]:s[i(e.data,e.dataIndex)];Object.keys(n.attrs).forEach(function(e){t.attr(e,n.attrs[e])})}).attr("id",function(e){return h(e.data,e.dataIndex,e.head?"head":"tail")}).style("stroke",function(e){return f._convertColor(t)(e.data,e.dataIndex)}).style("fill",function(e){return f._convertColor(t)(e.data,e.dataIndex)}).style("opacity",function(e){return n(e.data,e.dataIndex)}).append("path").attr("d",function(e){return e.head?s[a(e.data,e.dataIndex)].path:s[i(e.data,e.dataIndex)].path}),d.exit().remove()}return this._build=function(){var e=u.data(),t=u.style.get(),n=u.renderer(),i=u.origin(),o=u.delta(),a=[],s=u.style("scale"),l=0;function c(){return s/n.scaleFactor()}return d.call(u),e||(e=[]),a=e.map(function(e,t){var n=u.featureGcsToDisplay(i(e,t)),a=o(e,t);return l=Math.max(l,a.x*a.x+a.y*a.y),{x1:n.x,y1:n.y,dx:a.x,dy:-a.y}}),l=Math.sqrt(l),s||(s=75/(l||1)),p.id=u._svgid(),p.data=e,p.append="line",p.attributes={x1:function(e,t){return a[t].x1},y1:function(e,t){return a[t].y1},x2:function(e,t){return a[t].x1+c()*a[t].dx},y2:function(e,t){return a[t].y1+c()*a[t].dy},"marker-start":function(e,t){return"url(#"+h(e,t,"tail")+")"},"marker-end":function(e,t){return"url(#"+h(e,t,"head")+")"}},p.style={stroke:function(){return!0},strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,originStyle:t.originStyle,endStyle:t.endStyle},p.classes=["svgVectorFeature"],p.visible=u.visible,m(e,t.strokeColor,t.strokeOpacity,t.originStyle,t.endStyle),u.renderer()._drawFeatures(p),f.modified(),u.updateTime().modified(),u},this._update=function(){return d.call(u),u.timestamp()>=f.timestamp()?u._build():m(p.data,p.style.strokeColor,p.style.strokeOpacity,p.style.originStyle,p.style.endStyle),u},this._exit=function(){c.call(u),p={},m([],null,null,null,null)},this._init(e),this};l.markerConfigs=s,i(l,a),o("svg","vector",l),e.exports=l},727(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".color-legend-container{display:none;padding:10px;border:1.5px solid #000;border-radius:3px;transition:250ms background linear;background-color:rgba(255,255,255,0.75)}.color-legend-container:hover{background-color:#fff}.color-legend-container .geojs-color-legends .geojs-color-legend{margin-bottom:10px}.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title{text-align:center}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg{display:block}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line{fill:none;stroke:#000;stroke-width:.7}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text{font-size:12px}.color-legend-container .color-legend-popup{position:absolute;background:#fff;height:22px;font-size:14px;border:solid 1px #000;padding:0 5px;pointer-events:none;white-space:nowrap;z-index:100000;opacity:0}","",{version:3,sources:["webpack://./src/ui/colorLegendWidget.styl"],names:[],mappings:"AAAA,wBACE,YAAQ,CACR,YAAQ,CACR,uBAAO,CACP,iBAAc,CACd,kCAAW,CACX,uCAAiB,CAEjB,8BACE,qBAAiB,CAIjB,iEACE,kBAAc,CAEd,8EACE,iBAAW,CAEb,yEACE,aAAQ,CAGN,mLACE,SAAK,CACL,WAAO,CACP,eAAa,CACf,sFACE,cAAU,CAEpB,4CACE,iBAAS,CACT,eAAW,CACX,WAAO,CACP,cAAU,CACV,qBAAO,CACP,aAAQ,CACR,mBAAe,CACf,kBAAY,CACZ,cAAQ,CACR,SAAQ",sourcesContent:[".color-legend-container\n  display none\n  padding 10px\n  border 1.5px solid black\n  border-radius 3px\n  transition 250ms background linear\n  background-color rgba(255, 255, 255, 0.75)\n\n  &:hover\n    background-color rgba(255, 255, 255, 1)\n\n  .geojs-color-legends\n\n    .geojs-color-legend\n      margin-bottom 10px\n\n      .geojs-title\n        text-align center\n\n      svg.svg\n        display block\n\n        .axis.x\n          path.domain, line\n            fill none\n            stroke black\n            stroke-width 0.7\n          text\n            font-size 12px\n\n  .color-legend-popup\n    position absolute\n    background white\n    height 22px\n    font-size 14px\n    border solid 1px black\n    padding 0 5px\n    pointer-events none\n    white-space nowrap\n    z-index 100000\n    opacity 0\n"],sourceRoot:""}]);let l=s},728(e,t,n){e.exports=n(6936)},767(e){e.exports={}},795(e,t,n){!function(e){"use strict";function t(t){return function(n,i){for(var o=i.line,a=n.getLine(o),s=[],l=0;l<t.length;l++){var u=function(t){for(var s,l=i.ch,u=0;;){var c=l<=0?-1:a.lastIndexOf(t[0],l-1);if(-1==c){if(1==u)break;u=1,l=a.length;continue}if(1==u&&c<i.ch)break;if(s=n.getTokenTypeAt(e.Pos(o,c+1)),!/^(comment|string)/.test(s))return{ch:c+1,tokenType:s,pair:t};l=c-1}}(t[l]);u&&s.push(u)}s.sort(function(e,t){return e.ch-t.ch});for(var l=0;l<s.length;l++){var c=function(t){var i,a,s=1,l=n.lastLine(),u=t.ch;e:for(var c=o;c<=l;++c)for(var d=n.getLine(c),f=c==o?u:0;;){var p=d.indexOf(t.pair[0],f),h=d.indexOf(t.pair[1],f);if(p<0&&(p=d.length),h<0&&(h=d.length),(f=Math.min(p,h))==d.length)break;if(n.getTokenTypeAt(e.Pos(c,f+1))==t.tokenType){if(f==p)++s;else if(!--s){i=c,a=f;break e}}++f}return null==i||o==i?null:{from:e.Pos(o,u),to:e.Pos(i,a)}}(s[l]);if(c)return c}return null}}e.registerHelper("fold","brace",t([["{","}"],["[","]"]])),e.registerHelper("fold","brace-paren",t([["{","}"],["[","]"],["(",")"]])),e.registerHelper("fold","import",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var o=n,a=Math.min(t.lastLine(),n+10);o<=a;++o){var s=t.getLine(o).indexOf(";");if(-1!=s)return{startCh:i.end,end:e.Pos(o,s)}}}var o,a=n.line,s=i(a);if(!s||i(a-1)||(o=i(a-2))&&o.end.line==a-1)return null;for(var l=s.end;;){var u=i(l.line+1);if(null==u)break;l=u.end}return{from:t.clipPos(e.Pos(a,s.startCh+1)),to:l}}),e.registerHelper("fold","include",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8))return i.start+8}var o=n.line,a=i(o);if(null==a||null!=i(o-1))return null;for(var s=o;null!=i(s+1);)++s;return{from:e.Pos(o,a+1),to:t.clipPos(e.Pos(s))}})}(n(5885))},830(e,t,n){var i=n(4692),o=n(8899),a=n(2923),s=function(e){"use strict";if(!(this instanceof s))return new s(e);if(void 0===(e=e||{}).node||null===e.node)return console.warn("map creation requires a node"),this;a.call(this,e);var t,o,l,u,c,d=n(8301),f=n(5204),p=n(4341),h=n(5933),m=n(4128),g=n(6001),v=n(7668),y=this,b=this._exit,x=i(e.node),w=e.width||x.width()||512,A=e.height||x.height()||512,C=void 0===e.gcs?"EPSG:3857":e.gcs,S=void 0===e.ingcs?"EPSG:4326":e.ingcs,_={x:0,y:0},T=void 0===e.zoom?4:e.zoom,O=e.rotation?e.rotation:0,P=null,M=null,E={min:0,max:16,origMin:0},D=null,I=null,k=!!e.discreteZoom,N="function"==typeof e.allowRotation?e.allowRotation:void 0===e.allowRotation||!!e.allowRotation,R=e.maxBounds||{},B=e.camera||d(),L=e.animationQueue||[],F=void 0===e.autoResize||e.autoResize,V=e.autoshareRenderer,j=((R.left||0)+(R.right||0))/2,G=((R.bottom||0)+(R.top||0))/2;function U(){var e;void 0!==document.hidden?e="hidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),y.geoTrigger(document[e]?m.hidden:m.unhidden)}function z(e){var t;void 0!==document.hidden?t="visibilitychange":void 0!==document.msHidden?t="msvisibilitychange":void 0!==document.webkitHidden&&(t="webkitvisibilitychange"),document.removeEventListener(t,U),!1!==e&&document.addEventListener(t,U)}function W(e,t){var n=e.zIndex(),i=t.zIndex();if(n!==i)return n-i;var o=e.node()[0],a=t.node()[0],s=o&&o.parentNode,l=a&&a.parentNode;if(s&&l&&s===l){var u=Array.from(s.children),c=u.indexOf(o),d=u.indexOf(a);if(c>=0&&d>=0)return c-d}return s?-1:+!!l}function H(e,t,n,i,o){e.globalAlpha=t,o&&(e.globalCompositeOperation=o);var a=n.css("transform");a&&"matrix("===a.substr(0,7)?e.setTransform.apply(e,a.substr(7,a.length-8).split(",").map(parseFloat)):e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0),e.globalCompositeOperation="source-over"}function q(){for(var e=L.splice(0,L.length),t=1;t<e.length;t+=1)try{e[t].apply(y,arguments)}catch(e){console.error(e)}}function K(e,t,n){var i=t.width/2,o=t.height/2,a=Math.sin(n),s=Math.cos(n),l={},u={},c={},d={};return l.x=e.x+-i*s- -o*a,l.y=e.y+-i*a+-o*s,u.x=e.x+i*s- -o*a,u.y=e.y+i*a+-o*s,c.x=e.x+-i*s-o*a,c.y=e.y+-i*a+o*s,d.x=e.x+i*s-o*a,d.y=e.y+i*a+o*s,{left:Math.min(l.x,u.x,c.x,d.x),right:Math.max(l.x,u.x,c.x,d.x),bottom:Math.min(l.y,u.y,c.y,d.y),top:Math.max(l.y,u.y,c.y,d.y)}}function X(e,n){void 0===n&&(n=O),i=e,(o=n)&&(i=K({x:(i.left+i.right)/2,y:(i.top+i.bottom)/2},{width:Math.abs(i.left-i.right),height:Math.abs(i.top-i.bottom)},o));var i,o,a,s,l,u,c,d=((u=Math.abs(((a=e=i).right-a.left)/(a.top-a.bottom)))>(c=w/A)?(s=1,l=u/c):(l=1,s=c/u),{x:s,y:l});return d.y>d.x?-Math.log2(Math.abs(e.right-e.left)*d.x/(w*t)):-Math.log2(Math.abs(e.top-e.bottom)*d.y/(A*t))}function Y(){u?E.min=Math.max(E.origMin,X(R)):E.min=E.origMin}function Z(e,t,n){if(!N)return 0;if(t||"function"!=typeof N||(e=N(e)),!n){var i=2*Math.PI;1e-5>Math.min(Math.abs(e=e%i+(e>=0?0:i)),Math.abs(e-i))&&(e=0)}return e}function J(e,t,n,i){if(!o&&!l)return e;var a,s,u=R;if(t){u=Object.assign({},R);var c,d,f=Math.abs(e.right-e.left),p=Math.abs(e.top-e.bottom),h=Math.abs(Math.sin(t)),m=Math.abs(Math.cos(t));if(e.width&&e.height)c=e.width,d=e.height;else if(5e-4>Math.abs(h-m))if(w&&A){var g=Math.abs(w/A);d=(c=Math.max(f,p)/Math.pow(1+Math.pow(g,2),.5))*g}else c=f*m,d=p*h;else c=(m*f-h*p)/(m*m-h*h),d=(m*p-h*f)/(m*m-h*h);var v=f-Math.max(m*c,h*d),y=p-Math.max(m*d,h*c);u.left-=v,u.right+=v,u.top+=y,u.bottom-=y}return i&&(u={left:u.left-(e.right-e.left)/2,right:u.right+(e.right-e.left)/2,top:u.top-(e.bottom-e.top)/2,bottom:u.bottom+(e.bottom-e.top)/2}),o&&(e.right-e.left>u.right-u.left?a=u.left-(e.right-e.left-(u.right-u.left))/2-e.left:e.left<u.left?a=u.left-e.left:e.right>u.right&&(a=u.right-e.right),a&&(!n||n.x*a>0)&&(n&&Math.abs(a)>Math.abs(n.x*n.unit)&&(a=Math.abs(n.x*n.unit)*a/Math.abs(a)),e={left:e.left+=a,right:e.right+=a,top:e.top,bottom:e.bottom})),l&&(e.top-e.bottom>u.top-u.bottom?s=u.bottom-(e.top-e.bottom-(u.top-u.bottom))/2-e.bottom:e.top>u.top?s=u.top-e.top:e.bottom<u.bottom&&(s=u.bottom-e.bottom),s&&(!n||-n.y*s>0)&&(n&&Math.abs(s)>Math.abs(n.y*n.unit)&&(s=Math.abs(n.y*n.unit)*s/Math.abs(s)),e={top:e.top+=s,bottom:e.bottom+=s,left:e.left,right:e.right})),e}function Q(e,t){if(B.rotation=t||0,e.width&&e.height&&t){var n=(e.left+e.right)/2,i=(e.top+e.bottom)/2;B.viewFromCenterSizeRotation({x:n,y:i},e,t)}else B.bounds=e;_={x:(B.bounds.left+B.bounds.right)/2,y:(B.bounds.top+B.bounds.bottom)/2}}function $(){y.size({width:x.width(),height:x.height()})}return R.left=f.transformCoordinates(R.gcs||S,C,{x:void 0!==R.left?R.left:-180,y:G}).x,R.right=f.transformCoordinates(R.gcs||S,C,{x:void 0!==R.right?R.right:180,y:G}).x,R.top=void 0!==R.top?f.transformCoordinates(R.gcs||S,C,{x:j,y:R.top}).y:R.right,R.bottom=void 0!==R.bottom?f.transformCoordinates(R.gcs||S,C,{x:j,y:R.bottom}).y:R.left,t=e.unitsPerPixel||(R.right-R.left)/256,B.viewport={width:w,height:A,left:x.offset().left,top:x.offset().top},e.center=p.normalizeCoordinates(e.center),o=void 0!==e.clampBoundsX&&e.clampBoundsX,l=void 0===e.clampBoundsY||e.clampBoundsY,u=void 0===e.clampZoom||e.clampZoom,this.unitsPerPixel=function(e,n){return(e=e||0,n)?(t=Math.pow(2,e)*n,y.draw(),y):Math.pow(2,-e)*t},this.animationQueue=function(e){if(void 0===e)return L;if(e!==L){if(L.length){e.length&&e[0]!==L[0]&&window.cancelAnimationFrame(L[0]);for(var t=+!!e.length;t<L.length;t+=1)e.push(L[t])}L=e}return y},this.autoResize=function(e){return void 0===e?F:(e!==F&&(i(window).off("resize",$),(F=e)&&i(window).on("resize",$)),y)},this.clampBoundsX=function(e){return void 0===e?o:(e!==o&&(o=!!e,y.pan({x:0,y:0})),y)},this.clampBoundsY=function(e){return void 0===e?l:(e!==l&&(l=!!e,y.pan({x:0,y:0})),y)},this.clampZoom=function(e){return void 0===e?u:(e!==u&&(u=!!e,Y(),y.zoom(T)),y)},this.allowRotation=function(e){return void 0===e?N:("function"!=typeof e&&(e=!!e),e!==N&&(N=e,y.rotation(O)),y)},this.origin=function(){return Object.assign({},c)},this.camera=function(){return B},this.gcs=function(e){if(void 0===e)return C;if(e!==C){var t=y.center(void 0,void 0);C=e,Y();var n=y._fix_zoom(T);n!==T&&y.zoom(n),y.center(t,void 0)}return y},this.ingcs=function(e){return void 0===e?S:(S=e,y)},this.node=function(){return x},this.zoom=function(e,t,n,i,o){if(void 0===e)return T;var a,s,l=t&&(t.mapgcs||t.geo)&&t.map;if(l&&(i=!0),(e=y._fix_zoom(e,n))===T)return y;if(T=e,s=y.boundsFromZoomAndCenter(e,_,O,null,n,i),y.modified(),Q(s,O),a={zoomLevel:T,screenPosition:t?t.map:void 0},o&&"pan"!==o||y.geoTrigger(m.zoom,a),l){var u=y.gcsToDisplay(t.mapgcs||t.geo,t.mapgcs?null:void 0);y.pan({x:t.map.x-u.x,y:t.map.y-u.y},n,!0,o)}else y.pan({x:0,y:0},n,i,o);return y},this.zoomAndCenter=function(e,t,n,i,o,a){return this.zoom(e,void 0,i,o,a||"pan"),this.center(t,n,i,o,a),this},this.pan=function(e,t,n,i){var o={screenDelta:e};if(e.x||e.y){var a=y.unitsPerPixel(T),s=Math.sin(O),l=Math.cos(O);B.pan({x:(e.x*l- -e.y*s)*a,y:(e.x*s+-e.y*l)*a})}var u=B.bounds;if((u=J(u,O,"limited"===n?{x:e.x,y:e.y,unit:a}:void 0,!0===n))!==B.bounds){var c=y.gcsToDisplay({x:B.bounds.left,y:B.bounds.top},null);Q(u=y.boundsFromZoomAndCenter(T,{x:(u.left+u.right)/2,y:(u.top+u.bottom)/2},O,null,t,!0),O);var d=y.gcsToDisplay({x:B.bounds.left,y:B.bounds.top},null);o.screenDelta.x+=d.x-c.x,o.screenDelta.y+=d.y-c.y}return _=B.displayToWorld({x:w/2,y:A/2}),i||y.geoTrigger(m.pan,o),y.modified(),y},this.rotation=function(e,t,n){if(void 0===e)return O;var i=t&&t.geo&&t.map;if((e=Z(e,n))===O)return y;O=e;var o=y.boundsFromZoomAndCenter(T,_,O,null,n,!0);y.modified(),Q(o,O);var a={rotation:O,screenPosition:t?t.map:void 0};if(y.geoTrigger(m.rotate,a),i){var s=y.gcsToDisplay(t.geo);y.pan({x:t.map.x-s.x,y:t.map.y-s.y},void 0,!0)}else y.pan({x:0,y:0},void 0,!0);return Y(),y.zoom(T,void 0,n),y},this.center=function(e,t,n,i,o){var a;return void 0===e?a=Object.assign({},y.worldToGcs(_,t)):(a=y.gcsToWorld(e,t),Q(y.boundsFromZoomAndCenter(T,a,O,null,n,i),O),y.modified(),o||y.geoTrigger(m.pan,{screenDelta:{x:0,y:0}}),y)},this.createLayer=function(e,t){t=t||{},void 0!==y.autoshareRenderer()&&(t=Object.assign({autoshareRenderer:y.autoshareRenderer()},t));var n=h.createLayer(e,y,t);return n&&(y.addChild(n),y.children().forEach(function(e){e instanceof v&&e.moveToTop()}),n._update(),y.modified(),y.geoTrigger(m.layerAdd,{target:y,layer:n})),n},this.deleteLayer=function(e){return null!=e&&(e._exit(),y.removeChild(e),y.modified(),y.geoTrigger(m.layerRemove,{target:y,layer:e})),e},this.size=function(e){if(void 0===e)return{width:w,height:A};var t=y.center();w=e.width||w,A=e.height||A,Y();var n=y._fix_zoom(T);return n!==T&&y.zoom(n),y.camera().viewport={width:w,height:A,left:x.offset().left,top:x.offset().top},y.center(t),y.geoTrigger(m.resize,{target:y,width:w,height:A}),y.modified(),y},this.rotatedSize=function(){if(!this.rotation())return{width:w,height:A};var e=K({x:0,y:0},{width:w,height:A},y.rotation());return{width:Math.abs(e.right-e.left),height:Math.abs(e.top-e.bottom)}},this.gcsToWorld=function(e,t){return Array.isArray(e)?e.map(function(e){return y.gcsToWorld(e,t)}):((t=null===t?C:void 0===t?S:t)!==C&&(e=f.transformCoordinates(t,C,e)),c.x||c.y||c.z?e=f.affineForward({origin:c},[e])[0]:"z"in e||(e={x:e.x,y:e.y,z:0}),e)},this.worldToGcs=function(e,t){return Array.isArray(e)?e.map(function(e){return y.worldToGcs(e,t)}):(c.x||c.y||c.z?e=f.affineInverse({origin:c},[e])[0]:"z"in e||(e={x:e.x,y:e.y,z:0}),(t=null===t?C:void 0===t?S:t)!==C&&(e=f.transformCoordinates(C,t,e)),e)},this.gcsToDisplay=function(e,t){return e=y.gcsToWorld(e,t),y.worldToDisplay(e)},this.worldToDisplay=function(e){return Array.isArray(e)?e.map(function(e){return B.worldToDisplay(e)}):B.worldToDisplay(e)},this.displayToGcs=function(e,t){return e=y.displayToWorld(e),y.worldToGcs(e,t)},this.displayToWorld=function(e){return Array.isArray(e)?e.map(function(e){return B.displayToWorld(e)}):B.displayToWorld(e)},this.draw=function(){var e,t=y.children();for(y.geoTrigger(m.draw,{target:y}),y._update(),e=0;e<t.length;e+=1)t[e].draw();return y.geoTrigger(m.drawEnd,{target:y}),y},this.fileReader=function(e,t){return void 0===e?P:("string"==typeof e?((t=t||{}).layer||(t.layer=y.createLayer("feature",Object.assign({},t))),t.renderer=t.layer.renderer().api(),P=h.createFileReader(e,t)):P=e,y)},this._init=function(e){if(null==x)throw Error("Map require DIV node");return x.data("data-geojs-map")&&i.isFunction(x.data("data-geojs-map").exit)&&x.data("data-geojs-map").exit(),x.addClass("geojs-map"),x.data("data-geojs-map",y),z(),y},this._update=function(e){var t,n=y.children();for(t=0;t<n.length;t+=1)n[t]._update(e);return y},this.exit=function(){z(!1);var e,t=y.children();for(e=t.length-1;e>=0;e-=1)t[e]._exit(),y.removeChild(t[e]);y.interactor()&&(y.interactor().destroy(),y.interactor(null)),L=[],y.node().data("data-geojs-map",null),y.node().off(".geo"),y.node().empty(),i(window).off("resize",$),b()},this.interactor=function(e){return void 0===e?M:(M&&M!==e&&M.destroy(),(M=e)&&(x.attr("tabindex")||x.attr("tabindex",0),M.map(y)),y)},this.zoomRange=function(e,t){return void 0===e?Object.assign({},E):(void 0!==e.max&&(E.max=e.max),void 0!==e.min&&(E.min=E.origMin=e.min),Y(),t||y.zoom(T),y)},this.transition=function(e,t,n){if(void 0===e)return D;if(D){var o=p.deepMerge({},D.end);return o.center&&C!==S&&(o.center=f.transformCoordinates(C,S,o.center)),I=Object.assign({},o||{},I||{},e),y}var a=y.unitsPerPixel(0);function s(e){return Math.pow(2,-(e+1))*a*A}var l={center:void 0,zoom:y.zoom(),rotation:y.rotation(),duration:1e3,ease:function(e){return e},interp:function(e,t){return function(n){var o=[];return i.each(e,function(i){var a;o.push((a=e[i],a+(t[i]-a)*n))}),o}},done:null,zCoord:!0};function u(t){var n=D.done,i=I;if(!0===D.cancel){y.geoTrigger(m.transitioncancel,e),n&&n({cancel:!0,source:D.cancelSource,transition:D}),D=null,I&&(i=I,I=null,y.transition(i,void 0,t));return}if(D.start.time||(D.start.time=t,D.end.time=t+e.duration),D.time=t-D.start.time,t>=D.end.time||i){if(!i){if(D.end.center){var o=T!==y._fix_zoom(D.end.zoom)||!1===e.endClamp;y.center(D.end.center,null,o,o)}y.zoom(D.end.zoom,D.zoomOrigin,!1===e.endClamp,!1===e.endClamp),y.rotation(Z(D.end.rotation))}y.geoTrigger(m.transitionend,e),n&&n({next:!!i}),D=null,I&&(i=I,I=null,y.transition(i,void 0,t));return}var s=D.ease((t-D.start.time)/e.duration),l=D.interp(s);D.zCoord&&(l[2]=-Math.log2(l[2]/a/A)-1),y._fix_zoom(l[2],!0)===T?y.center({x:l[0],y:l[1]},null,!0,!0):(_=y.gcsToWorld({x:l[0],y:l[1]},null),y.zoom(l[2],D.zoomOrigin,!0,!0)),y.rotation(l[3],void 0,!0),y.scheduleAnimationFrame(u)}return e.center&&(t=null===t?C:void 0===t?S:t,(e=p.deepMerge({},e)).center=p.normalizeCoordinates(e.center),t!==C&&(e.center=f.transformCoordinates(t,C,e.center))),e=p.deepMerge({},l,e),(D={start:{center:y.center(void 0,null),zoom:y.zoom(),rotation:y.rotation()},end:{center:e.center,zoom:y._fix_zoom(e.zoom),rotation:Z(e.rotation,void 0,!0)},ease:e.ease,zCoord:e.zCoord,done:e.done,duration:e.duration,zoomOrigin:e.zoomOrigin,endClamp:e.endClamp}).interp=e.interp([D.start.center.x,D.start.center.y,e.zCoord?s(D.start.zoom):D.start.zoom,D.start.rotation],[D.end.center?D.end.center.x:D.start.center.x,D.end.center?D.end.center.y:D.start.center.y,e.zCoord?s(D.end.zoom):D.end.zoom,D.end.rotation]),y.geoTrigger(m.transitionstart,e),m.cancelNavigation?(D=null,y.geoTrigger(m.transitionend,e)):m.cancelAnimation?(e.duration=0,u(0)):n?u(n):y.scheduleAnimationFrame(u),y},this.transitionCancel=function(e){return!!D&&(!0!==D.cancel||!!I)&&(D.cancel=!0,D.cancelSource=e||D.cancelSource||"",I=null,!0)},this.bounds=function(e,t){var n;if(t=null===t?C:void 0===t?S:t,void 0!==e){if(t!==C){var i=f.transformCoordinates(t,C,[{x:e.left,y:e.top},{x:e.right,y:e.bottom}]);e={left:i[0].x,top:i[0].y,right:i[1].x,bottom:i[1].y}}e=J(e,O),n=y.zoomAndCenterFromBounds(e,O,null),y.zoom(n.zoom,void 0,void 0,void 0,"pan"),y.center(n.center,null)}return y.boundsFromZoomAndCenter(T,_,O,t,!0,!0)},this.maxBounds=function(e,t){if(t=null===t?C:void 0===t?S:t,void 0===e)return{left:f.transformCoordinates(C,t,{x:R.left,y:0}).x,right:f.transformCoordinates(C,t,{x:R.right,y:0}).x,bottom:f.transformCoordinates(C,t,{x:0,y:R.bottom}).y,top:f.transformCoordinates(C,t,{x:0,y:R.top}).y};var n=((e.left||0)+(e.right||0))/2,i=((e.bottom||0)+(e.top||0))/2;return void 0!==e.left&&(R.left=f.transformCoordinates(t,C,{x:e.left,y:i}).x),void 0!==e.right&&(R.right=f.transformCoordinates(t,C,{x:e.right,y:i}).x),void 0!==e.bottom&&(R.bottom=f.transformCoordinates(t,C,{x:n,y:e.bottom}).y),void 0!==e.top&&(R.top=f.transformCoordinates(t,C,{x:n,y:e.top}).y),Y(),y.zoom(T),y.pan({x:0,y:0}),y},this.corners=function(e){return[y.displayToGcs({x:0,y:0},e),y.displayToGcs({x:w,y:0},e),y.displayToGcs({x:w,y:A},e),y.displayToGcs({x:0,y:A},e)]},this.zoomAndCenterFromBounds=function(e,t,n){var i,o;if((n=null===n?C:void 0===n?S:n)!==C){var a=f.transformCoordinates(n,C,[{x:e.left,y:e.top},{x:e.right,y:e.bottom}]);e={left:a[0].x,top:a[0].y,right:a[1].x,bottom:a[1].y}}if(e.left>=e.right||e.bottom>=e.top)throw Error("Invalid bounds provided");return o=y._fix_zoom(X(e,t)),i={x:((e=J(e,t)).left+e.right)/2-c.x,y:(e.top+e.bottom)/2-c.y},n!==C&&(i=f.transformCoordinates(C,n,i)),{zoom:o,center:i}},this.boundsFromZoomAndCenter=function(e,t,n,i,o,a){var s,l,u,d,p,h;if(i=null===i?C:void 0===i?S:i,e=y._fix_zoom(e,o),h=y.unitsPerPixel(e),t=y.gcsToWorld(t,null),s=w*h,l=A*h,u=s/2,d=l/2,n?(t.x+=c.x,t.y+=c.y,(p=K(t,{width:s,height:l},n)).width=s,p.height=l,p=J(p,n,void 0,a)):p=J(p={left:t.x-u+c.x,right:t.x+u+c.x,bottom:t.y-d+c.y,top:t.y+d+c.y},0,void 0,a),i!==C){var m=f.transformCoordinates(C,i,[[p.left,p.top],[p.right,p.bottom]]);p={left:m[0][0],top:m[0][1],right:m[1][0],bottom:m[1][1]}}return p.width=s,p.height=l,p},this.discreteZoom=function(e){return void 0===e?k:(k!==(e=!!e)&&((k=e)&&y.zoom(Math.round(y.zoom())),y.interactor()&&y.interactor().options({discreteZoom:k})),y)},this.layers=this.children,this.sortedLayers=function(){return y.children().sort(W)},this.listSceneObjects=function(e){var t=[];return(e=e||y.sortedLayers()).forEach(function(e){if(0>t.indexOf(e)&&(t.push(e),e.children)){var n=e.children();n.length&&(t=t.concat(y.listSceneObjects(n)))}}),t},this.updateAttribution=function(){y.node().find(".geo-attribution").remove();var e=i("<div/>").addClass("geo-attribution").on("mousedown",function(e){e.stopPropagation()});return y.children().forEach(function(t){var n=t.attribution();n&&i("<span/>").addClass("geo-attribution-layer").html(n).appendTo(e)}),i("span",e).length&&e.appendTo(y.node()),y},this.screenshot=function(e,t,n,o){if(!e||Array.isArray(e)||e.renderer||(t=t||e.type,n=n||e.encoderOptions,o=o||e,e=e.layers),(o=o||{}).wait){var a,s=Object.assign({},o,{wait:!1});a=i.Deferred();var l=function(){window.requestAnimationFrame(function(){a.resolve()})};return"idle"===o.wait?y.onIdle(l):l(),a.then(function(){return y.screenshot(e,t,n,s)})}a=i.when(),e?Array.isArray(e)||(e=[e]):(e=y.layers(),(null===o.attribution||void 0===o.attribution)&&(o.attribution=!0)),e=(e=e.filter(function(e){return y.layers().indexOf(e)>=0&&e.opacity()>0&&(!e.visible||e.visible())})).sort(W);var u=document.createElement("canvas");u.width=w,u.height=A;var c=u.getContext("2d");if(!1!==o.background&&null!==o.background){var d=o.background;void 0===o.background&&(c.fillStyle="white",c.fillRect(0,0,u.width,u.height),y.node().parents().get().reverse().forEach(function(e){(d=window.getComputedStyle(e).backgroundColor)&&"transparent"!==d&&(c.fillStyle=d,c.fillRect(0,0,u.width,u.height))}),d=window.getComputedStyle(y.node()[0]).backgroundColor),d&&"transparent"!==d&&(c.fillStyle=d,c.fillRect(0,0,u.width,u.height))}return e.forEach(function(e){var t=e.opacity();e.node().children("canvas").each(function(){var n=i(this);a=a.then(function(){e.renderer()&&"webgl"===e.renderer().api()&&e.renderer()._renderFrame(),H(c,t,n,n[0],e.node().css("mix-blend-mode"))})}),!e.node().children().not("canvas").length&&e.node().children().length||e.renderer()&&"webgl"===e.renderer().api()||(a=a.then(function(){return p.htmlToImage(e.node(),1).done(function(t){H(c,1,i([]),t,e.node().css("mix-blend-mode"))})}))}),o.attribution&&y.node().find(".geo-attribution").each(function(){var e=i(this);a=a.then(function(){return p.htmlToImage(e,1).done(function(e){H(c,1,i([]),e)})})}),o.html&&i(o.html).each(function(){var e=i(this);a=a.then(function(){return p.htmlToImage(e,1).done(function(t){H(c,1,i([]),t,e.css("mix-blend-mode"))})})}),a=a.then(function(){var e=u;if("canvas"!==t)try{u=u.toDataURL(t,n)}catch(e){console.warn("Failed to convert screenshot to output",e);var o=i.Deferred();return o.reject(),o}return y.geoTrigger(m.screenshot.ready,{canvas:e,screenshot:u}),u})},this.scheduleAnimationFrame=function(e,t){L.length||L.push(window.requestAnimationFrame(q));var n=L.indexOf(e,1);if(!(n>=0)||t&&(L.splice(n,1),"remove"!==t))return L.push(e),L[0]},this._fix_zoom=function(e,t){return e=Math.round(1e6*e)/1e6,e=Math.max(Math.min(E.max,e),E.min),k&&!t&&(e=Math.round(e))<E.min&&(e=Math.ceil(E.min)),e},this.autoshareRenderer=function(e){return void 0===e?V:(V=null===e?void 0:e,y)},this._version=n(8648),this._geo=n(2980),this._init(e),this.node().on("dragover.geo",function(e){var t=e.originalEvent;y.fileReader()&&(t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy")}).on("drop.geo",function(e){var t,n,i=e.originalEvent,o=y.fileReader();function a(){y.draw()}if(o)for(i.stopPropagation(),i.preventDefault(),t=0;t<i.dataTransfer.files.length;t+=1)n=i.dataTransfer.files[t],o.canRead(n)&&o.read(n,a)}),c={x:0,y:0},this.zoomRange(e,!0),T=this._fix_zoom(T),O=Z(O),this.center(Object.assign({},e.center||_),void 0),null!==e.interactor&&this.interactor(e.interactor||g({discreteZoom:k})),F&&i(window).on("resize",$),y.geoOn([m.layerAdd,m.layerRemove],y.updateAttribution),this};s.create=function(e){"use strict";var t=s(e),i=n(4837);return t&&t.zoom?(e.data=e.data||[],e.layers=e.layers||[],e.layers.forEach(function(n){n.data=n.data||e.data,n.layer=i.create(t,n)}),t):(console.warn("Could not create map."),null)},o(s,a),e.exports=s},838(e,t,n){var i=n(8899),o=n(5665),a=function(e){"use strict";if(!(this instanceof a))return new a(e);var t=n(4341),i=n(9956);e=e||{},o.call(this,e);var s=this,l=this._init;return this._createContours=function(){return i.createColoredMesh(s,!1)},this.contour=s.mesh,this._init=function(e){l.call(s,e);var n=Object.assign({},{opacity:1,value:function(e,n){return t.isNonNullFinite(e)?e:s.position()(e,n).z},position:function(e){return e||{x:0,y:0}},origin:function(e){return e.length>=3?[e[0],e[1],0]:[0,0,0]}},void 0===e.style?{}:e.style);s.style(n),s.contour(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},e.mesh||{},e.contour||{})),(e.mesh||e.contour)&&s.dataTime().modified()},this._init(e),this};i(a,o),e.exports=a},875(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(4762),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},878(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9971),s=n(4341),l=function(e){"use strict";if(!(this instanceof l))return new l(e);a.call(this,e),n(6062).call(this);var t,i=n(4692),o=this,u=this._exit,c=this._init,d=this._update;return this._build=function(){o.position()&&((t=o._generateQuads()).imgQuads&&t.imgQuads.sort(function(e,t){return e.pos[2]-t.pos[2]}),o.buildTime().modified())},this._checkQuadUpdate=function(e,t){o.layer().map().scheduleAnimationFrame(o._checkIfChanged)},this._checkIfChanged=function(){if(t&&t.vidQuads&&t.vidQuads.length){var e=!1,n=!1;i.each(t.vidQuads,function(t,i){i.video&&void 0!==i.video.HAVE_CURRENT_DATA&&(!i.video.seeking&&i.video.readyState>=i.video.HAVE_CURRENT_DATA&&(e=!0),(!i.video.paused||i.video.seeking)&&(n=!0))}),e&&o.renderer()&&o.renderer()._render(),n&&o.layer().map().scheduleAnimationFrame(o._checkIfChanged)}},this._renderColorQuads=function(e,n){if(t.clrQuads&&t.clrQuads.length){var o=e.globalAlpha,a=o;i.each(t.clrQuads,function(t,i){var o=n.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),l=n.gcsToDisplay({x:i.pos[3],y:i.pos[4]},null),u=n.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),c=n.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null);i.opacity!==a&&(e.globalAlpha=a=i.opacity),e.fillStyle=s.convertColorToHex(i.color,!0),e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(l.x,l.y),e.lineTo(c.x,c.y),e.lineTo(u.x,u.y),e.closePath(),e.fill()}),a!==o&&(e.globalAlpha=o)}},this._renderImageAndVideoQuads=function(e,n){if(t.imgQuads&&t.imgQuads.length||t.vidQuads&&t.vidQuads.length){var a=e.globalAlpha,l=a,u=o.nearestPixel();void 0!==u&&(!0!==u&&s.isNonNullFinite(u)&&(u=o.layer().map().zoom()>=u),e.imageSmoothingEnabled=!u),o._hookRenderImageQuads&&o._hookRenderImageQuads(t.imgQuads),i.each([t.imgQuads,t.vidQuads],function(t,o){o&&i.each(o,function(t,i){if(i.image)a=(o=i.image).width,s=o.height;else if(i.video&&(a=(o=i.video).videoWidth,s=o.videoHeight,o.seeking))return;if(o&&a&&s&&!(i.opacity<=0)){var o,a,s,u=n.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),c=n.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),d=n.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null),f=Math.min(a,i.crop&&i.crop.x||a),p=Math.min(s,i.crop&&i.crop.y||s);if(e.setTransform((d.x-c.x)/f,(d.y-c.y)/f,(u.x-c.x)/p,(u.y-c.y)/p,c.x,c.y),i.opacity!==l&&(e.globalAlpha=l=i.opacity),i.crop){var h=Math.max(0,i.crop.left||0),m=Math.max(0,i.crop.top||0),g=Math.min(a,i.crop.right||a),v=Math.min(s,i.crop.bottom||s);a&&s&&f>0&&p>0&&g>h&&v>m&&e.drawImage(o,h,m,g-h,v-m,0,0,f,p)}else e.drawImage(o,0,0)}})}),l!==a&&(e.globalAlpha=a),e.setTransform(1,0,0,1,0,0),e.imageSmoothingEnabled=!0}},this._delayRender=function(){var e=!1;return t&&t.vidQuads&&t.vidQuads.length&&i.each(t.vidQuads,function(t,n){n.video&&void 0!==n.video.HAVE_CURRENT_DATA&&(e|=n.video.seeking&&n.delayRenderWhenSeeking)}),e},this._renderOnCanvas=function(e,n){t&&(o._renderImageAndVideoQuads(e,n),o._renderColorQuads(e,n))},this._update=function(){d.call(o),(o.buildTime().timestamp()<=o.dataTime().timestamp()||o.updateTime().timestamp()<o.timestamp())&&o._build(),o.updateTime().modified(),o.layer().map().scheduleAnimationFrame(o._checkIfChanged)},this._init=function(){c.call(o,e)},this._exit=function(){u.call(o)},o._init(e),this};i(l,a);var u={};u[a.capabilities.color]=!0,u[a.capabilities.image]=!0,u[a.capabilities.imageCrop]=!0,u[a.capabilities.imageFixedScale]=!0,u[a.capabilities.imageFull]=!1,u[a.capabilities.canvas]=!0,u[a.capabilities.video]=!0,u[a.capabilities.texture]=!1,o("canvas","quad",l,u),e.exports=l},1053(e,t,n){n(4128).svg={rescale:n(664)},e.exports={graphFeature:n(4991),lineFeature:n(3157),object:n(9966),pathFeature:n(9646),pointFeature:n(7841),quadFeature:n(5118),renderer:n(2184),tileLayer:n(2540),trackFeature:n(6446),uniqueID:n(3619),vectorFeature:n(726)}},1064(e,t,n){"use strict";function i(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}n.d(t,{A:()=>i})},1101(e){e.exports=function(e,t,n,i,o,a,s){var l=1/(t-n),u=1/(i-o),c=1/(a-s);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*l,e[13]=(o+i)*u,e[14]=(s+a)*c,e[15]=1,e}},1113(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1114(e,t,n){"use strict";function i(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+.01068115234375*e))),t[1]=e*(.75-e*(.046875+e*(.01953125+.01068115234375*e)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t}n.d(t,{A:()=>i})},1120(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>f,forward:()=>u,init:()=>l,inverse:()=>c,names:()=>d});var i=n(4181),o=n(7572),a=n(9576),s=n(384);function l(){this.sphere||(this.k0=(0,a.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function u(e){var t,n,a=e.x,s=e.y,l=(0,i.A)(a-this.long0,this.over);if(this.sphere)t=this.x0+this.a*l*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var u=(0,o.A)(this.e,Math.sin(s));t=this.x0+this.a*this.k0*l,n=this.y0+this.a*u*.5/this.k0}return e.x=t,e.y=n,e}function c(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=(0,i.A)(this.long0+e.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=function(e,t){if(1e-6>Math.abs(Math.abs(t)-(1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e)))))if(t<0)return -1*s.sK;else return s.sK;for(var n,i,o,a,l=Math.asin(.5*t),u=0;u<30;u++)if(i=Math.sin(l),o=Math.cos(l),l+=n=Math.pow(1-(a=e*i)*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),1e-10>=Math.abs(n))return l;return NaN}(this.e,2*e.y*this.k0/this.a),t=(0,i.A)(this.long0+e.x/(this.a*this.k0),this.over)),e.x=t,e.y=n,e}var d=["cea"];let f={init:l,forward:u,inverse:c,names:d}},1144(e,t,n){e.exports=n(8051)},1216(e){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},1229(e){e.exports=function(e,t,n,i){var o=t[0],a=t[1],s=t[2];return e[0]=o+i*(n[0]-o),e[1]=a+i*(n[1]-a),e[2]=s+i*(n[2]-s),e}},1263(e){e.exports=function(e,t,n,i){var o=n[1],a=n[2],s=t[1]-o,l=t[2]-a,u=Math.sin(i),c=Math.cos(i);return e[0]=t[0],e[1]=o+s*c-l*u,e[2]=a+s*u+l*c,e}},1274(e,t,n){!function(e){"use strict";e.defineOption("foldGutter",!1,function(t,i,o){var a;o&&o!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",u),t.off("changes",d),t.off("viewportChange",f),t.off("fold",p),t.off("unfold",p),t.off("swapDoc",d),t.off("optionChange",c)),i&&(t.state.foldGutter=new n((!0===(a=i)&&(a={}),null==a.gutter&&(a.gutter="CodeMirror-foldgutter"),null==a.indicatorOpen&&(a.indicatorOpen="CodeMirror-foldgutter-open"),null==a.indicatorFolded&&(a.indicatorFolded="CodeMirror-foldgutter-folded"),a)),l(t),t.on("gutterClick",u),t.on("changes",d),t.on("viewportChange",f),t.on("fold",p),t.on("unfold",p),t.on("swapDoc",d),t.on("optionChange",c))});var t=e.Pos;function n(e){this.options=e,this.from=this.to=0}function i(e,n){for(var i=e.findMarks(t(n,0),t(n+1,0)),o=0;o<i.length;++o)if(i[o].__isFold){var a=i[o].find(-1);if(a&&a.line===n)return i[o]}}function o(e){if("string"!=typeof e)return e.cloneNode(!0);var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}function a(e,n,a){var l=e.state.foldGutter.options,u=n-1,c=e.foldOption(l,"minFoldSize"),d=e.foldOption(l,"rangeFinder"),f="string"==typeof l.indicatorFolded&&s(l.indicatorFolded),p="string"==typeof l.indicatorOpen&&s(l.indicatorOpen);e.eachLine(n,a,function(n){++u;var a=null,s=n.gutterMarkers;if(s&&(s=s[l.gutter]),i(e,u)){if(f&&s&&f.test(s.className))return;a=o(l.indicatorFolded)}else{var h=t(u,0),m=d&&d(e,h);if(m&&m.to.line-m.from.line>=c){if(p&&s&&p.test(s.className))return;a=o(l.indicatorOpen)}}(a||s)&&e.setGutterMarker(n,l.gutter,a)})}function s(e){return RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){a(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function u(e,n,o){var a=e.state.foldGutter;if(a){var s=a.options;if(o==s.gutter){var l=i(e,n);l?l.clear():e.foldCode(t(n,0),s)}}}function c(e,t){"mode"==t&&d(e)}function d(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){l(e)},n.foldOnChangeTimeSpan||600)}}function f(e){var t=e.state.foldGutter;if(t){var n=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?l(e):e.operation(function(){n.from<t.from&&(a(e,n.from,t.from),t.from=n.from),n.to>t.to&&(a(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}}function p(e,t){var n=e.state.foldGutter;if(n){var i=t.line;i>=n.from&&i<n.to&&a(e,i,i+1)}}}(n(5885),n(8948))},1316(e,t,n){var i=n(6496),o=n(7229);e.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),i(e,e),o(e,e,t),e}},1354(e){"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n))));return[t].concat(["/*# ".concat("sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i)," */")]).join("\n")}return[t].join("\n")}},1357(e,t,n){e.exports={canvasRenderer:n(9754),heatmapFeature:n(2935),isolineFeature:n(6174),lineFeature:n(7941),pixelmapFeature:n(5269),quadFeature:n(878),textFeature:n(9846),tileLayer:n(5663),trackFeature:n(7742)}},1374(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},1380(e){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},1386(e,t,n){var i=n(8899),o=n(6732),a=n(6194),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.texture.call(this);var t,n=o(),i=e.maxWidth||4096,l=new Uint8Array([0,0,0,0]),u=this;return this.setup=function(e){var t=u.textureUnit();if(t>=0&&t<=31)e.m_context.activeTexture(a.GL.TEXTURE0+t);else throw Error("[error] Texture unit "+t+" is not supported");e.m_context.deleteTexture(u.m_textureHandle),u.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(a.GL.TEXTURE_2D,u.m_textureHandle),e.m_context.texParameteri(a.GL.TEXTURE_2D,a.GL.TEXTURE_MIN_FILTER,a.GL.NEAREST),e.m_context.texParameteri(a.GL.TEXTURE_2D,a.GL.TEXTURE_MAG_FILTER,a.GL.NEAREST),e.m_context.texParameteri(a.GL.TEXTURE_2D,a.GL.TEXTURE_WRAP_S,a.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(a.GL.TEXTURE_2D,a.GL.TEXTURE_WRAP_T,a.GL.CLAMP_TO_EDGE),e.m_context.pixelStorei(a.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(a.GL.UNPACK_FLIP_Y_WEBGL,!0),e.m_context.texImage2D(a.GL.TEXTURE_2D,0,a.GL.RGBA,u.width,u.height,0,a.GL.RGBA,a.GL.UNSIGNED_BYTE,l),e.m_context.bindTexture(a.GL.TEXTURE_2D,null),n.modified()},this.colorTable=function(e){return void 0===e?t:(t=e,e.length<4&&(e=[0,0,0,0]),u.width=Math.min(i,e.length/4),u.height=Math.ceil(e.length/4/i),e instanceof Uint8Array&&e.length===u.width*u.height*4?l=e:(e.length<u.width*u.height*4&&(e=e.concat(Array(u.width*u.height*4-e.length).fill(0))),l=new Uint8Array(e)),u.modified(),u)},this.maxWidth=function(){return i},this.colorTable(e.colorTable||[]),this};i(s,a.texture),e.exports=s},1413(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>ed});var i=n(5341),o=n(384),a=n(2516),s=n(4181);function l(e){return e===o.a8||e===o.Y$}function u(e,t,n){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},a={x:NaN,y:NaN},l=[];e:for(var u=0;u<e.grids.length;u++){var d=e.grids[u];if(l.push(d.name),d.isNull){a=i;break}if(null===d.grid){if(d.mandatory)return console.log("Unable to find mandatory grid '"+d.name+"'"),-1;continue}for(var f=d.grid.subgrids,p=0,h=f.length;p<h;p++){var m=f[p],g=(Math.abs(m.del[1])+Math.abs(m.del[0]))/1e4,v=m.ll[0]-g,y=m.ll[1]-g,b=m.ll[0]+(m.lim[0]-1)*m.del[0]+g,x=m.ll[1]+(m.lim[1]-1)*m.del[1]+g;if(!(y>i.y)&&!(v>i.x)&&!(x<i.y)&&!(b<i.x)&&!isNaN((a=function(e,t,n){var i={x:NaN,y:NaN};if(isNaN(e.x))return i;var o={x:e.x,y:e.y};o.x-=n.ll[0],o.y-=n.ll[1],o.x=(0,s.A)(o.x-Math.PI)+Math.PI;var a=c(o,n);if(t){if(isNaN(a.x))return i;a.x=o.x-a.x,a.y=o.y-a.y;var l,u,d=9;do{if(isNaN((u=c(a,n)).x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:o.x-(u.x+a.x),y:o.y-(u.y+a.y)},a.x+=l.x,a.y+=l.y}while(d--&&Math.abs(l.x)>1e-12&&Math.abs(l.y)>1e-12);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=(0,s.A)(a.x+n.ll[0]),i.y=a.y+n.ll[1]}else isNaN(a.x)||(i.x=e.x+a.x,i.y=e.y+a.y);return i}(i,t,m)).x))break e}}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*o.dX+" "+i.y*o.dX+" tried: '"+l+"'"),-1):(n.x=-a.x,n.y=a.y,0)}function c(e,t){var n,i={x:e.x/t.del[0],y:e.y/t.del[1]},o={x:Math.floor(i.x),y:Math.floor(i.y)},a={x:i.x-o.x,y:i.y-o.y},s={x:NaN,y:NaN};if(o.x<0||o.x>=t.lim[0]||o.y<0||o.y>=t.lim[1])return s;n=o.y*t.lim[0]+o.x;var l={x:t.cvs[n][0],y:t.cvs[n][1]};n++;var u={x:t.cvs[n][0],y:t.cvs[n][1]};n+=t.lim[0];var c={x:t.cvs[n][0],y:t.cvs[n][1]};n--;var d={x:t.cvs[n][0],y:t.cvs[n][1]},f=a.x*a.y,p=a.x*(1-a.y),h=(1-a.x)*(1-a.y),m=(1-a.x)*a.y;return s.x=h*l.x+p*u.x+m*d.x+f*c.x,s.y=h*l.y+p*u.y+m*d.y+f*c.y,s}function d(e,t,n){var i,o,a,s=n.x,l=n.y,u=n.z||0,c={};for(a=0;a<3;a++)if(!t||2!==a||void 0!==n.z)switch(0===a?(i=s,o=-1!=="ew".indexOf(e.axis[a])?"x":"y"):1===a?(i=l,o=-1!=="ns".indexOf(e.axis[a])?"y":"x"):(i=u,o="z"),e.axis[a]){case"e":case"n":c[o]=i;break;case"w":case"s":c[o]=-i;break;case"u":void 0!==n[o]&&(c.z=i);break;case"d":void 0!==n[o]&&(c.z=-i);break;default:return null}return c}function f(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function p(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw TypeError("coordinates must be finite numbers")}function h(e,t,n,s){var c,m,g,v=void 0!==(n=Array.isArray(n)?f(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(p((c=n).x),p(c.y),e.datum&&t.datum&&(((m=e).datum.datum_type===o.a8||m.datum.datum_type===o.Y$||m.datum.datum_type===o.G9)&&"WGS84"!==t.datumCode||(t.datum.datum_type===o.a8||t.datum.datum_type===o.Y$||t.datum.datum_type===o.G9)&&"WGS84"!==m.datumCode)&&(n=h(e,g=new i.A("WGS84"),n,s),e=g),s&&"enu"!==e.axis&&(n=d(e,!1,n)),"longlat"===e.projName)n={x:n.x*o.zq,y:n.y*o.zq,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=function(e,t,n){if((0,a.OI)(e,t)||e.datum_type===o.A1||t.datum_type===o.A1)return n;var i=e.a,s=e.es;if(e.datum_type===o.G9){if(0!==u(e,!1,n))return;i=o.bv,s=o.gS}var c=t.a,d=t.b,f=t.es;if(t.datum_type===o.G9&&(c=o.bv,d=o.zp,f=o.gS),s===f&&i===c&&!l(e.datum_type)&&!l(t.datum_type)||(n=(0,a.jX)(n,s,i),l(e.datum_type)&&(n=(0,a.mj)(n,e.datum_type,e.datum_params)),l(t.datum_type)&&(n=(0,a.Fs)(n,t.datum_type,t.datum_params)),n=(0,a.Rw)(n,f,c,d),t.datum_type!==o.G9||0===u(t,!0,n)))return n}(e.datum,t.datum,n))return(t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),"longlat"===t.projName?n={x:n.x*o.dX,y:n.y*o.dX,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),s&&"enu"!==t.axis)?d(t,!0,n):(n&&!v&&delete n.z,n)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=(0,i.A)("WGS84");function v(e,t,n,i){var o,a,s;if(Array.isArray(n))return(o=h(e,t,n,i)||{x:NaN,y:NaN},n.length>2)?(void 0===e.name||"geocent"!==e.name)&&(void 0===t.name||"geocent"!==t.name)?[o.x,o.y].concat(n.slice(2)):"number"==typeof o.z?[o.x,o.y,o.z].concat(n.slice(3)):[o.x,o.y,n[2]].concat(n.slice(3)):[o.x,o.y];return a=h(e,t,n,i),2===(s=Object.keys(n)).length||s.forEach(function(i){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;a[i]=n[i]}),a}function y(e){return e instanceof i.A?e:"object"===m(e)&&"oProj"in e?e.oProj:(0,i.A)(e)}var b="AJSAJS",x="AFAFAF";function w(e,t){var n,i,o,a,s,l,u,c,d,f,p,h,m,g,v;return t=t||5,n=function(e){var t,n,i,o,a,s,l,u,c=e.lat,d=e.lon,f=C(c),p=C(d);u=Math.floor((d+180)/6)+1,180===d&&(u=60),c>=56&&c<64&&d>=3&&d<12&&(u=32),c>=72&&c<84&&(d>=0&&d<9?u=31:d>=9&&d<21?u=33:d>=21&&d<33?u=35:d>=33&&d<42&&(u=37)),l=C((u-1)*6-180+3),i=6378137/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),o=Math.tan(f)*Math.tan(f),a=.006739496752268451*Math.cos(f)*Math.cos(f);var h=.9996*i*((s=Math.cos(f)*(p-l))+(1-o+a)*s*s*s/6+(5-18*o+o*o+72*a-.39089081163157013)*s*s*s*s*s/120)+5e5,m=.9996*(6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3418046101696858e-24*Math.sin(6*f))+i*Math.tan(f)*(s*s/2+(5-o+9*a+4*a*a)*s*s*s*s/24+(61-58*o+o*o+600*a-2.2240339282485886)*s*s*s*s*s*s/720));return c<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(h),zoneNumber:u,zoneLetter:(n="Z",84>=(t=c)&&t>=72?n="X":72>t&&t>=64?n="W":64>t&&t>=56?n="V":56>t&&t>=48?n="U":48>t&&t>=40?n="T":40>t&&t>=32?n="S":32>t&&t>=24?n="R":24>t&&t>=16?n="Q":16>t&&t>=8?n="P":8>t&&t>=0?n="N":0>t&&t>=-8?n="M":-8>t&&t>=-16?n="L":-16>t&&t>=-24?n="K":-24>t&&t>=-32?n="J":-32>t&&t>=-40?n="H":-40>t&&t>=-48?n="G":-48>t&&t>=-56?n="F":-56>t&&t>=-64?n="E":-64>t&&t>=-72?n="D":-72>t&&t>=-80&&(n="C"),n)}}({lat:e[1],lon:e[0]}),i=t,o="00000"+n.easting,a="00000"+n.northing,n.zoneNumber+n.zoneLetter+(s=n.easting,l=n.northing,u=n.zoneNumber,c=Math.floor(s/1e5),d=Math.floor(l/1e5)%20,f=T(u)-1,p=b.charCodeAt(f),h=x.charCodeAt(f),m=p+c-1,g=h+d,v=!1,m>90&&(m=m-90+65-1,v=!0),(73===m||p<73&&m>73||(m>73||p<73)&&v)&&m++,(79===m||p<79&&m>79||(m>79||p<79)&&v)&&73==++m&&m++,m>90&&(m=m-90+65-1),g>86?(g=g-86+65-1,v=!0):v=!1,(73===g||h<73&&g>73||(g>73||h<73)&&v)&&g++,(79===g||h<79&&g>79||(g>79||h<79)&&v)&&73==++g&&g++,g>86&&(g=g-86+65-1),String.fromCharCode(m)+String.fromCharCode(g))+o.substr(o.length-5,i)+a.substr(a.length-5,i)}function A(e){var t=_(O(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function C(e){return Math.PI/180*e}function S(e){return e/Math.PI*180}function _(e){var t,n,i,o,a,s,l,u,c=e.northing,d=e.easting,f=e.zoneLetter,p=e.zoneNumber;if(p<0||p>60)return null;var h=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=c;f<"N"&&(m-=1e7),t=6378137/Math.sqrt(1-.00669438*Math.sin(l=(s=m/.9996/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*s)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*s)+151*h*h*h/96*Math.sin(6*s))*Math.sin(l)),n=Math.tan(l)*Math.tan(l),i=.006739496752268451*Math.cos(l)*Math.cos(l),o=6335439.32722994/Math.pow(1-.00669438*Math.sin(l)*Math.sin(l),1.5),a=(d-5e5)/(.9996*t);var g=l-t*Math.tan(l)/o*(a*a/2-(5+3*n+10*i-4*i*i-.06065547077041606)*a*a*a*a/24+(61+90*n+298*i+45*n*n-1.6983531815716497-3*i*i)*a*a*a*a*a*a/720);g=S(g);var v=(a-(1+2*n+i)*a*a*a/6+(5-2*i+28*n-3*i*i+.05391597401814761+24*n*n)*a*a*a*a*a/120)/Math.cos(l);if(v=(p-1)*6-180+3+S(v),e.accuracy){var y=_({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});u={top:y.lat,right:y.lon,bottom:g,left:v}}else u={lat:g,lon:v};return u}function T(e){var t=e%6;return 0===t&&(t=6),t}function O(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n,i=e.length,o=null,a="",s=0;!/[A-Z]/.test(t=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;a+=t,s++}var l=parseInt(a,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+e;var u=e.charAt(s++);if(u<="A"||"B"===u||"Y"===u||u>="Z"||"I"===u||"O"===u)throw"MGRSPoint zone letter "+u+" not handled: "+e;o=e.substring(s,s+=2);for(var c=T(l),d=function(e,t){for(var n=b.charCodeAt(t-1),i=1e5,o=!1;n!==e.charCodeAt(0);){if(73==++n&&n++,79===n&&n++,n>90){if(o)throw"Bad character: "+e;n=65,o=!0}i+=1e5}return i}(o.charAt(0),c),f=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=x.charCodeAt(t-1),i=0,o=!1;n!==e.charCodeAt(0);){if(73==++n&&n++,79===n&&n++,n>86){if(o)throw"Bad character: "+e;n=65,o=!0}i+=1e5}return i}(o.charAt(1),c);f<function(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}(u);)f+=2e6;var p=i-s;if(p%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h=p/2,m=0,g=0;return h>0&&(n=1e5/Math.pow(10,h),m=parseFloat(e.substring(s,s+h))*n,g=parseFloat(e.substring(s+h))*n),{easting:m+d,northing:g+f,zoneLetter:u,zoneNumber:l,accuracy:n}}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,n){if(!(this instanceof M))return new M(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===P(e))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var i=e.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}M.fromMGRS=function(e){return new M(A(e))},M.prototype.toMGRS=function(e){return w([this.x,this.y],e)};var E=n(9130),D=n(2945),I=n(7350),k=n(1498),N=n(2196),R=n(605),B=n(9204),L=n(7560),F=n(231),V=n(9385),j=n(4319),G=n(4165),U=n(565),z=n(38),W=n(3546),H=n(1120),q=n(1492),K=n(2013),X=n(9699),Y=n(4273),Z=n(3234),J=n(163),Q=n(7092),$=n(535),ee=n(5926),et=n(1929),en=n(5670),er=n(5947),ei=n(3768),eo=n(1587),ea=n(9121),es=n(6717),el=n(6265),eu=n(3012),ec=Object.assign(function(e,t,n){var i,o,a,s=!1;return(void 0===t?(o=y(e),i=g,s=!0):(void 0!==t.x||Array.isArray(t))&&(n=t,o=y(e),i=g,s=!0),i||(i=y(e)),o||(o=y(t)),n)?v(i,o,n):(a={forward:function(e,t){return v(i,o,e,t)},inverse:function(e,t){return v(o,i,e,t)}},s&&(a.oProj=o),a)},{defaultDatum:"WGS84",Proj:i.A,WGS84:new i.A("WGS84"),Point:M,toPoint:f,defs:E.A,nadgrid:D.A,transform:h,mgrs:{forward:w,inverse:function(e){var t=_(O(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:A},version:"__VERSION__"});ec.Proj.projections.add(I.default),ec.Proj.projections.add(k.default),ec.Proj.projections.add(N.default),ec.Proj.projections.add(R.default),ec.Proj.projections.add(B.default),ec.Proj.projections.add(L.default),ec.Proj.projections.add(F.default),ec.Proj.projections.add(V.default),ec.Proj.projections.add(j.default),ec.Proj.projections.add(G.default),ec.Proj.projections.add(U.default),ec.Proj.projections.add(z.default),ec.Proj.projections.add(W.default),ec.Proj.projections.add(H.default),ec.Proj.projections.add(q.default),ec.Proj.projections.add(K.default),ec.Proj.projections.add(X.default),ec.Proj.projections.add(Y.default),ec.Proj.projections.add(Z.default),ec.Proj.projections.add(J.default),ec.Proj.projections.add(Q.default),ec.Proj.projections.add($.default),ec.Proj.projections.add(ee.default),ec.Proj.projections.add(et.default),ec.Proj.projections.add(en.default),ec.Proj.projections.add(er.default),ec.Proj.projections.add(ei.default),ec.Proj.projections.add(eo.default),ec.Proj.projections.add(ea.default),ec.Proj.projections.add(es.default),ec.Proj.projections.add(el.default),ec.Proj.projections.add(eu.default);let ed=ec},1492(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c,forward:()=>s,init:()=>a,inverse:()=>l,names:()=>u});var i=n(4181),o=n(5949);function a(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function s(e){var t=e.x,n=e.y,a=(0,i.A)(t-this.long0,this.over),s=(0,o.A)(n-this.lat0);return e.x=this.x0+this.a*a*this.rc,e.y=this.y0+this.a*s,e}function l(e){var t=e.x,n=e.y;return e.x=(0,i.A)(this.long0+(t-this.x0)/(this.a*this.rc),this.over),e.y=(0,o.A)(this.lat0+(n-this.y0)/this.a),e}var u=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];let c={init:a,forward:s,inverse:l,names:u}},1498(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>m,forward:()=>f,init:()=>d,inverse:()=>p,names:()=>h});var i=n(7350),o=n(6622),a=n(2736);function s(e,t){for(var n,i=2*Math.cos(2*t),o=e.length-1,a=e[o],s=0;--o>=0;)n=-s+i*a+e[o],s=a,a=n;return t+n*Math.sin(2*t)}var l=n(8089);function u(e,t,n){for(var i,a,s=Math.sin(t),u=Math.cos(t),c=(0,o.A)(n),d=(0,l.A)(n),f=2*u*d,p=-2*s*c,h=e.length-1,m=e[h],g=0,v=0,y=0;--h>=0;)i=v,a=g,m=-i+f*(v=m)-p*(g=y)+e[h],y=-a+p*v+f*g;return[(f=s*d)*m-(p=u*c)*y,f*y+p*m]}var c=n(4181);function d(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+-2854/675*t))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+4642/4725*t))))),n*=t,this.cgb[1]=n*(7/3+t*(-1.6+t*(-227/45+t*(2704/315+2323/945*t)))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+-1522/945*t)))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+73814/2835*t))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+-12686/2835*t))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+-399572/14175*t)),this.cbg[3]=n*(1237/630+t*(-2.4+-24832/14175*t)),n*=t,this.cgb[4]=n*(4174/315+-144838/6237*t),this.cbg[4]=n*(-734/315+109598/31185*t),n*=t,this.cgb[5]=601676/22275*n,this.cbg[5]=444337/155925*n,n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+-96199/604800*t))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+7891/37800*t))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+1118711/3870720*t)))),this.gtu[1]=n*(13/48+t*(-.6+t*(557/1440+t*(281/630+-1983433/1935360*t)))),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+-5569/90720*t))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+167603/181440*t))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+830251/7257600*t)),this.gtu[3]=n*(49561/161280+t*(-179/168+6601661/7257600*t)),n*=t,this.utg[4]=n*(-4583/161280+108847/3991680*t),this.gtu[4]=n*(34729/80640+-3418889/1995840*t),n*=t,this.utg[5]=-0x13b12f5/0x26115000*n,this.gtu[5]=.6650675310896665*n;var o=s(this.cbg,this.lat0);this.Zb=-this.Qn*(o+function(e,t){for(var n,i=2*Math.cos(t),o=e.length-1,a=e[o],s=0;--o>=0;)n=-s+i*a+e[o],s=a,a=n;return Math.sin(t)*n}(this.gtu,2*o))}function f(e){var t,n,i,o,l,d,f,p=(0,c.A)(e.x-this.long0,this.over),h=e.y,m=Math.sin(h=s(this.cbg,h)),g=Math.cos(h),v=Math.sin(p),y=Math.cos(p);h=Math.atan2(m,y*g),n=0==(l=(o=1+(i=(n=Math.abs(t=Math.tan(p=Math.atan2(v*g,(0,a.A)(m,g*y)))))*(1+n/((0,a.A)(1,n)+1))))-1)?i:i*Math.log(o)/l,p=t<0?-n:n;var b=u(this.gtu,2*h,2*p);return h+=b[0],2.623395162778>=Math.abs(p+=b[1])?(d=this.a*(this.Qn*p)+this.x0,f=this.a*(this.Qn*h+this.Zb)+this.y0):(d=1/0,f=1/0),e.x=d,e.y=f,e}function p(e){var t,n,i=(e.x-this.x0)*(1/this.a),l=(e.y-this.y0)*(1/this.a);if(l=(l-this.Zb)/this.Qn,2.623395162778>=Math.abs(i/=this.Qn)){var d=u(this.utg,2*l,2*i);l+=d[0],i+=d[1],i=Math.atan((0,o.A)(i));var f=Math.sin(l),p=Math.cos(l),h=Math.sin(i),m=Math.cos(i);l=Math.atan2(f*m,(0,a.A)(h,m*p)),i=Math.atan2(h,m*p),t=(0,c.A)(i+this.long0,this.over),n=s(this.cgb,l)}else t=1/0,n=1/0;return e.x=t,e.y=n,e}var h=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];let m={init:d,forward:f,inverse:p,names:h}},1536(e,t,n){e.exports=function(e,t,n,o,a,s){var l,u;for(t||(t=3),n||(n=0),u=o?Math.min(o*t+n,e.length):e.length,l=n;l<u;l+=t)i[0]=e[l],i[1]=e[l+1],i[2]=e[l+2],a(i,i,s),e[l]=i[0],e[l+1]=i[1],e[l+2]=i[2];return e};var i=n(1216)()},1561(e,t,n){!function(e){"use strict";var t="CodeMirror-lint-markers";function n(e){e.parentNode&&e.parentNode.removeChild(e)}function i(t,i,o,a){var s=function(t,n,i){var o=document.createElement("div");function a(t){if(!o.parentNode)return e.off(document,"mousemove",a);var n=Math.max(0,t.clientY-o.offsetHeight-5),i=Math.max(0,Math.min(t.clientX+5,o.ownerDocument.defaultView.innerWidth-o.offsetWidth));o.style.top=n+"px",o.style.left=i+"px"}return o.className="CodeMirror-lint-tooltip cm-s-"+t.options.theme,o.appendChild(i.cloneNode(!0)),t.state.lint.options.selfContain?t.getWrapperElement().appendChild(o):document.body.appendChild(o),e.on(document,"mousemove",a),a(n),null!=o.style.opacity&&(o.style.opacity=1),o}(t,i,o);function l(){if(e.off(a,"mouseout",l),s){var t;(t=s).parentNode&&(null==t.style.opacity&&n(t),t.style.opacity=0,setTimeout(function(){n(t)},600)),s=null}}var u=setInterval(function(){if(s)for(var e=a;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){l();break}}if(!s)return clearInterval(u)},400);e.on(a,"mouseout",l)}function o(e,t,n){for(var o in this.marked=[],t instanceof Function&&(t={getAnnotations:t}),t&&!0!==t||(t={}),this.options={},this.linterOptions=t.options||{},a)this.options[o]=a[o];for(var o in t)a.hasOwnProperty(o)?null!=t[o]&&(this.options[o]=t[o]):t.options||(this.linterOptions[o]=t[o]);this.timeout=null,this.hasGutter=n,this.onMouseOver=function(t){!function(e,t){var n=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var o=n.getBoundingClientRect(),a=(o.left+o.right)/2,s=(o.top+o.bottom)/2,u=e.findMarksAt(e.coordsChar({left:a,top:s},"client")),c=[],d=0;d<u.length;++d){var f=u[d].__annotation;f&&c.push(f)}c.length&&function(e,t,n){for(var o=n.target||n.srcElement,a=document.createDocumentFragment(),s=0;s<t.length;s++){var u=t[s];a.appendChild(l(u))}i(e,n,a,o)}(e,c,t)}}(e,t)},this.waitingFor=0}var a={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function s(e){var n,i=e.state.lint;i.hasGutter&&e.clearGutter(t),i.options.highlightLines&&(n=e).eachLine(function(e){var t=e.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(e.wrapClass);t&&n.removeLineClass(e,"wrap",t[0])});for(var o=0;o<i.marked.length;++o)i.marked[o].clear();i.marked.length=0}function l(e){var t=e.severity;t||(t="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message CodeMirror-lint-message-"+t,void 0!==e.messageHTML?n.innerHTML=e.messageHTML:n.appendChild(document.createTextNode(e.message)),n}function u(t){var n=t.state.lint;if(n){var i=n.options,o=i.getAnnotations||t.getHelper(e.Pos(0,0),"lint");if(o)if(i.async||o.async){var a=t.state.lint,s=++a.waitingFor;function l(){s=-1,t.off("change",l)}t.on("change",l),o(t.getValue(),function(n,i){t.off("change",l),a.waitingFor==s&&(i&&n instanceof e&&(n=i),t.operation(function(){c(t,n)}))},a.linterOptions,t)}else{var u=o(t.getValue(),n.linterOptions,t);if(!u)return;u.then?u.then(function(e){t.operation(function(){c(t,e)})}):t.operation(function(){c(t,u)})}}}function c(n,o){var a=n.state.lint;if(a){var u=a.options;s(n);for(var c=function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],o=i.from.line;(t[o]||(t[o]=[])).push(i)}return t}(o),d=0;d<c.length;++d){var f=c[d];if(f){for(var p=null,h=a.hasGutter&&document.createDocumentFragment(),m=0;m<f.length;++m){var g,v,y=f[m],b=y.severity;b||(b="error"),g=p,v=b,p="error"==g?g:v,u.formatAnnotation&&(y=u.formatAnnotation(y)),a.hasGutter&&h.appendChild(l(y)),y.to&&a.marked.push(n.markText(y.from,y.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+b,__annotation:y}))}a.hasGutter&&n.setGutterMarker(d,t,function(t,n,o,a,s){var l=document.createElement("div"),u=l;return l.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+o,a&&((u=l.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!=s&&e.on(u,"mouseover",function(e){i(t,e,n,u)}),l}(n,h,p,f.length>1,u.tooltips)),u.highlightLines&&n.addLineClass(d,"wrap","CodeMirror-lint-line-"+p)}}u.onUpdateLinting&&u.onUpdateLinting(o,c,n)}}function d(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){u(e)},t.options.delay))}e.defineOption("lint",!1,function(n,i,a){if(a&&a!=e.Init&&(s(n),!1!==n.state.lint.options.lintOnChange&&n.off("change",d),e.off(n.getWrapperElement(),"mouseover",n.state.lint.onMouseOver),clearTimeout(n.state.lint.timeout),delete n.state.lint),i){for(var l=n.getOption("gutters"),c=!1,f=0;f<l.length;++f)l[f]==t&&(c=!0);var p=n.state.lint=new o(n,i,c);p.options.lintOnChange&&n.on("change",d),!1!=p.options.tooltips&&"gutter"!=p.options.tooltips&&e.on(n.getWrapperElement(),"mouseover",p.onMouseOver),u(n)}}),e.defineExtension("performLint",function(){u(this)})}(n(5885))},1587(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>l,init:()=>s,inverse:()=>u,names:()=>c});var i=n(384),o=n(2736),a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function s(){if(Object.keys(a).forEach((function(e){if(void 0===this[e])this[e]=a[e].def;else if(a[e].num&&isNaN(this[e]))throw Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);else a[e].num&&(this[e]=parseFloat(this[e]));a[e].degrees&&(this[e]=this[e]*i.zq)}).bind(this)),Math.abs(Math.abs(this.lat0)-i.sK)<i.H0?this.mode=1*!!(this.lat0<0):Math.abs(this.lat0)<i.H0?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function l(e){e.x-=this.long0;var t,n,i,o,a=Math.sin(e.y),s=Math.cos(e.y),l=Math.cos(e.x);switch(this.mode){case 3:n=this.sinph0*a+this.cosph0*s*l;break;case 2:n=s*l;break;case 1:n=-a;break;case 0:n=a}switch(t=(n=this.pn1/(this.p-n))*s*Math.sin(e.x),this.mode){case 3:n*=this.cosph0*a-this.sinph0*s*l;break;case 2:n*=a;break;case 0:n*=-(s*l);break;case 1:n*=s*l}return o=1/((i=n*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-n*this.sg)*this.cw*o,n=i*o,e.x=t*this.a,e.y=n*this.a,e}function u(e){e.x/=this.a,e.y/=this.a;var t,n,a,s,l,u={x:e.x,y:e.y};a=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*a,n=this.pn1*e.y*this.cw*a,e.x=t*this.cg+n*this.sg,e.y=n*this.cg-t*this.sg;var c=(0,o.A)(e.x,e.y);if(Math.abs(c)<i.H0)u.x=0,u.y=e.y;else{switch(l=1-c*c*this.pfact,s=Math.sqrt(1-(l=(this.p-Math.sqrt(l))/(this.pn1/c+c/this.pn1))*l),this.mode){case 3:u.y=Math.asin(s*this.sinph0+e.y*l*this.cosph0/c),e.y=(s-this.sinph0*Math.sin(u.y))*c,e.x*=l*this.cosph0;break;case 2:u.y=Math.asin(e.y*l/c),e.y=s*c,e.x*=l;break;case 0:u.y=Math.asin(s),e.y=-e.y;break;case 1:u.y=-Math.asin(s)}u.x=Math.atan2(e.x,e.y)}return e.x=u.x+this.long0,e.y=u.y,e}var c=["Tilted_Perspective","tpers"];let d={init:s,forward:l,inverse:u,names:c}},1589(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},1642(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2],o=e[3];return t*t+n*n+i*i+o*o}},1666(e){e.exports=function(e,t,n,i){var o=t[0],a=t[1],s=t[2],l=t[3];return e[0]=o+i*(n[0]-o),e[1]=a+i*(n[1]-a),e[2]=s+i*(n[2]-s),e[3]=l+i*(n[3]-l),e}},1694(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}},1708(e){e.exports="/* markerFeature sprite vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * radiusVar;\n}\n"},1785(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}},1904(e){e.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},1906(e){e.exports="/* markerFeature square/triangle fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec2 unitVar;  // distinct for square/triangle\n\nvoid main() {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  if (markerFeatureFragment(vec3(unitVar, 0.0)) == 0.0)\n    discard;\n}\n"},1929(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>l,init:()=>s,inverse:()=>u,names:()=>c});var i=n(4181),o=n(3357),a=n(384);function s(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function l(e){var t,n,o,s,l,u,c,d=e.x,f=e.y;return o=(0,i.A)(d-this.long0,this.over),t=Math.sin(f),n=Math.cos(f),s=Math.cos(o),((l=this.sin_p14*t+this.cos_p14*n*s)>0||Math.abs(l)<=a.H0)&&(u=this.a*n*Math.sin(o),c=this.y0+this.a*(this.cos_p14*t-this.sin_p14*n*s)),e.x=u,e.y=c,e}function u(e){var t,n,s,l,u,c;return(e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.sin(n=(0,o.A)(t/this.a)),l=Math.cos(n),u=this.long0,Math.abs(t)<=a.H0)?c=this.lat0:(c=(0,o.A)(l*this.sin_p14+e.y*s*this.cos_p14/t),Math.abs(Math.abs(this.lat0)-a.sK)<=a.H0)?u=this.lat0>=0?(0,i.A)(this.long0+Math.atan2(e.x,-e.y),this.over):(0,i.A)(this.long0-Math.atan2(-e.x,e.y),this.over):u=(0,i.A)(this.long0+Math.atan2(e.x*s,t*this.cos_p14*l-e.y*this.sin_p14*s),this.over),e.x=u,e.y=c,e}var c=["ortho"];let d={init:s,forward:l,inverse:u,names:c}},1944(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}},1954(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII="},2013(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>v,forward:()=>h,init:()=>p,inverse:()=>m,names:()=>g});var i=n(6549),o=n(3690),a=n(3987),s=n(7216),l=n(4181),u=n(5949),c=n(641),d=n(384),f=n(7649);function p(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.A)(this.es),this.e1=(0,o.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.ml0=this.a*(0,c.A)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function h(e){var t,n,i,o=e.x,a=e.y,s=(0,l.A)(o-this.long0,this.over);if(i=s*Math.sin(a),this.sphere)Math.abs(a)<=d.H0?(t=this.a*s,n=-1*this.a*this.lat0):(t=this.a*Math.sin(i)/Math.tan(a),n=this.a*((0,u.A)(a-this.lat0)+(1-Math.cos(i))/Math.tan(a)));else if(Math.abs(a)<=d.H0)t=this.a*s,n=-1*this.ml0;else{var p=(0,f.A)(this.a,this.e,Math.sin(a))/Math.tan(a);t=p*Math.sin(i),n=this.a*(0,c.A)(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+p*(1-Math.cos(i))}return e.x=t+this.x0,e.y=n+this.y0,e}function m(e){var t,n,i,o,a,s,u,f,p,h,m,g,v,y,b;if(i=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=d.H0)t=(0,l.A)(i/this.a+this.long0,this.over),n=0;else{for(a=20,s=this.lat0+o/this.a,u=i*i/this.a/this.a+s*s,f=s;a;--a)if(h=Math.tan(f),p=-1*(s*(f*h+1)-f-.5*(f*f+u)*h)/((f-s)/h-1),f+=p,Math.abs(p)<=d.H0){n=f;break}t=(0,l.A)(this.long0+Math.asin(i*Math.tan(f)/this.a)/Math.sin(n),this.over)}else if(Math.abs(o+this.ml0)<=d.H0)n=0,t=(0,l.A)(this.long0+i/this.a,this.over);else{for(a=20,s=(this.ml0+o)/this.a,u=i*i/this.a/this.a+s*s,f=s;a;--a)if(m=Math.sqrt(1-(b=this.e*Math.sin(f))*b)*Math.tan(f),g=this.a*(0,c.A)(this.e0,this.e1,this.e2,this.e3,f),v=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),p=(s*(m*(y=g/this.a)+1)-y-.5*m*(y*y+u))/(this.es*Math.sin(2*f)*(y*y+u-2*s*y)/(4*m)+(s-y)*(m*v-2/Math.sin(2*f))-v),f-=p,Math.abs(p)<=d.H0){n=f;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=(0,l.A)(this.long0+Math.asin(i*m/this.a)/Math.sin(n),this.over)}return e.x=t,e.y=n,e}var g=["Polyconic","American_Polyconic","poly"];let v={init:p,forward:h,inverse:m,names:g}},2029(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},2071(e,t,n){var i=n(8899),o=n(4341),a=n(5933).registerAnnotation,s=n(9558),l=n(8795).annotation,u=n(8795).state,c=function(e){"use strict";if(!(this instanceof c))return new c(e);(e=o.deepMerge({},this.constructor.defaults,e)).position=e.position||(e.coordinates?e.coordinates[0]:void 0),delete e.coordinates,l.call(this,"point",e);var t=this;this.features=function(){var e,n,i,a=t.options(),s=t.state();return s===u.create?e=[]:(n=t.styleForState(s),(a.style.scaled||0===a.style.scaled)&&(!0===a.style.scaled&&(a.style.scaled=t.layer().map().zoom()),n=Object.assign({},n,{radius:function(){var e=a.style.radius,n=t.layer().map().zoom();return o.isFunction(e)&&(e=e.apply(t,arguments)),e*=Math.pow(2,n-a.style.scaled)}}),i=!0),e=[{point:{x:a.position.x,y:a.position.y,style:n,scaleOnZoom:i}}],s===u.edit&&t._addEditHandles(e,[a.position],{edge:!1,center:!1,resize:!1,rotate:!1})),e},this._coordinates=function(e){return(e&&e.length>=1&&t.options("position",e[0]),t.state()===u.create)?[]:[t.options("position")]},this._coordinateOption="position",this.mouseClick=function(e){if(t.state()===u.create&&e.buttonsDown.left)return e.handled=!0,t.options("position",e.mapgcs),t.state(u.done),"done"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(e){var n=t.coordinates(e);if(n&&t.state()!==u.create&&!(n.length<1)&&void 0!==n[0])return[n[0].x,n[0].y]},this._geojsonGeometryType=function(){return"Point"}};i(c,l),c.defaults=Object.assign({},l.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}});var d={};d[s.capabilities.feature]=!0,a("point",c,d),e.exports=c},2154(e,t,n){!function(e){"use strict";e.registerHelper("lint","json",function(t){var n=[];if(!window.jsonlint)return window.console&&window.console.error("Error: window.jsonlint not defined, CodeMirror JSON linting cannot run."),n;var i=window.jsonlint.parser||window.jsonlint;i.parseError=function(t,i){var o=i.loc;n.push({from:e.Pos(o.first_line-1,o.first_column),to:e.Pos(o.last_line-1,o.last_column),message:t})};try{i.parse(t)}catch(e){}return n})}(n(5885))},2165(e){e.exports=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}},2170(e){e.exports="/* polygonFeature fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec4 polyFillColorVar;\nvarying vec3 patternPosVar;\n\nvoid main () {\n\n  float used = 0.0;\n  if (fillColorVar.a != 0.0 || strokeColorVar.a != 0.0)\n    used = markerFeatureFragment(patternPosVar);\n  if (used != 1.0)\n    gl_FragColor = polyFillColorVar * (1.0 - used) + gl_FragColor * used;\n}\n"},2184(e,t,n){var i=n(8899),o=n(5933).registerRenderer,a=n(3757),s=function(e){"use strict";var t=s.d3,i=n(9966),o=n(4341),l=n(4128),u=n(664);if(!(this instanceof s))return new s(e);a.call(this,e);var c=this._exit;i.call(this,e),e=e||{};var d=this,f=null,p={},h=null,m=null,g=1,v={dx:0,dy:0,rx:0,ry:0,rotation:0},y={},b={},x=null,w=null;function A(e){return e?x.select(".group-"+e):x.select(".group-"+d._svgid())}function C(){var e=d.layer().map(),t=e.size().width,n=e.size().height;if(!t||!n)throw Error("Map layer has size 0");d._setWidthHeight(t,n),m=Math.pow(t*t+n*n,.5),h={upperLeft:e.displayToGcs({x:0,y:0},null),lowerRight:e.displayToGcs({x:t,y:n},null),center:e.displayToGcs({x:t/2,y:n/2},null)}}return this._convertColor=function(e,n){return e=o.ensureFunction(e),n=n||function(){return!0},function(){var i="none";return n.apply(d,arguments)&&(i=e.apply(d,arguments),i.hasOwnProperty("r")&&i.hasOwnProperty("g")&&i.hasOwnProperty("b")&&(i=t.rgb(255*i.r,255*i.g,255*i.b))),i}},this._convertScale=function(e){return e=o.ensureFunction(e),function(){return e.apply(d,arguments)/g}},this._setTransform=function(){if(h||C(),f){var e,t,n,i,o,a,s=d.layer().map(),l=s.gcsToDisplay(h.upperLeft,null),u=s.gcsToDisplay(h.lowerRight,null),c=s.gcsToDisplay(h.center,null),p=A();n=Math.sqrt(Math.pow(u.y-l.y,2)+Math.pow(u.x-l.x,2))/m,i=s.rotation(),o=-d.width()/2,a=-d.height()/2,e=n*o+c.x,t=n*a+c.y,i||(e=Math.round(e),t=Math.round(t));var y="matrix("+[n,0,0,n,e,t].join()+")";i&&(y+=" rotate("+[180*i/Math.PI,-o,-a].join()+")"),p.attr("transform",y),g=n,v.dx=e,v.dy=t,v.rx=o,v.ry=a,v.rotation=i}},this.baseToLocal=function(e){if(e={x:(e.x-v.dx)/g,y:(e.y-v.dy)/g},v.rotation){var t=Math.sin(-v.rotation),n=Math.cos(-v.rotation),i=e.x+v.rx,o=e.y+v.ry;e={x:i*n-o*t-v.rx,y:i*t+o*n-v.ry}}return e},this.localToBase=function(e){if(v.rotation){var t=Math.sin(v.rotation),n=Math.cos(v.rotation),i=e.x+v.rx,o=e.y+v.ry;e={x:i*n-o*t-v.rx,y:i*t+o*n-v.ry}}return{x:e.x*g+v.dx,y:e.y*g+v.dy}},this._init=function(e){if(!d.canvas()){e.widget=e.widget||!1,(x="d3Parent"in e?t.select(e.d3Parent).append("svg"):t.select(d.layer().node().get(0)).append("svg")).attr("display","block");var n,i=(w=x.append("defs")).append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");i.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut"),i.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut"),i.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut"),i.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal"),e.widget||(n=e.canvas||x.append("g")),(i=w.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%")).append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic"),f=d.layer().sticky(),x.attr("class",d._svgid()),x.attr("width",d.layer().node().width()),x.attr("height",d.layer().node().height()),e.widget?d.canvas(x):(n.attr("class","group-"+d._svgid()),d.canvas(n))}return d._setTransform(),d},this.api=function(){return s.apiname},this.scaleFactor=function(){return g},this._resize=function(e,t,n,i){return h||C(),x.attr("width",n),x.attr("height",i),d._setTransform(),d._setWidthHeight(n,i),d.layer().geoTrigger(u,{scale:g},!0),d},this._exit=function(){p={},d.canvas().remove(),x.remove(),x=void 0,w.remove(),w=void 0,y={},b={},c()},this._definitions=function(){return w},this._drawFeatures=function(e){return p[e.id]={data:e.data,index:e.dataIndex,style:e.style,visible:e.visible,attributes:e.attributes,classes:e.classes,append:e.append,onlyRenderNew:e.onlyRenderNew,sortByZ:e.sortByZ,parentId:e.parentId},d.__render(e.id,e.parentId)},this.__render=function(e,t){var n;if(void 0===e){for(n in p)p.hasOwnProperty(n)&&d.__render(n);return d}return t?d._renderFeature(e,t):(y[e]=!0,d.layer().map().scheduleAnimationFrame(d._renderFrame)),d},this._scheduleUpdate=function(){d.layer().map().scheduleAnimationFrame(d._renderFrame)},this._renderFrame=function(){for(e in b)d.select(e).remove(),w.selectAll("."+e).remove();b={};var e,t=y;for(e in y={},t)t.hasOwnProperty(e)&&d._renderFeature(e);for(e in p)p.hasOwnProperty(e)&&void 0===t[e]&&d.select(e).attr("visibility",!p[e].visible||p[e].visible()?"visible":"hidden")},this._renderFeature=function(e,t){if(!p[e])return d;d.select(e).remove();var n,i,o=p[e].data,a=p[e].index,s=p[e].style,l=p[e].visible,u=p[e].attributes,c=p[e].classes,f=p[e].append,h=d.select(e,t).data(o,a);i=h.enter().append(f),h.exit().remove();for(n in u)u.hasOwnProperty(n)&&i.attr(n,u[n]);return i.attr("class",c.concat([e]).join(" ")),!function(e,t){var n,i,o;function a(){return t.fill.apply(d,arguments)?null:"none"}function s(){return t.stroke.apply(d,arguments)?null:"none"}for(n in t)t.hasOwnProperty(n)&&(o=null,i=null,"strokeColor"===n?(i="stroke",o=d._convertColor(t[n],t.stroke)):"stroke"===n&&t[n]&&!t.hasOwnProperty("strokeColor")?(i="stroke",o=s):"strokeWidth"===n?(i="stroke-width",o=d._convertScale(t[n])):"strokeOpacity"===n?(i="stroke-opacity",o=t[n]):"fillColor"===n?(i="fill",o=d._convertColor(t[n],t.fill)):"fill"!==n||t.hasOwnProperty("fillColor")?"fillOpacity"===n?(i="fill-opacity",o=t[n]):"lineCap"===n?(i="stroke-linecap",o=t[n]):"lineJoin"===n?(i="stroke-linejoin",o=t[n]):"miterLimit"===n&&(i="stroke-miterlimit",o=t[n]):(i="fill",o=a),i&&e.style(i,o))}(i,s),l&&i.attr("visibility",l()?"visible":"hidden"),i.size()&&p[e].sortByZ&&h.sort(function(e,t){return(e.zIndex||0)-(t.zIndex||0)}),d},this.select=function(e,t){return A(t).selectAll("."+e)},this._removeFeature=function(e){return b[e]=!0,d.layer().map().scheduleAnimationFrame(d._renderFrame),delete p[e],y[e]&&delete y[e],d},this.draw=function(){},this.layer().geoOn(l.pan,d._setTransform),this.layer().geoOn(l.rotate,d._setTransform),this.layer().geoOn(l.zoom,function(){d._setTransform(),d.__render(),d.layer().geoTrigger(u,{scale:g},!0)}),this.layer().geoOn(l.resize,function(e){d._resize(e.x,e.y,e.width,e.height)}),this._init(e),this};s.apiname="svg",i(s,a),o("svg",s),o("d3",s),s.supported=function(){delete s.d3;try{s.d3=n(9365),s.d3&&s.d3.rgb||(s.d3=void 0)}catch(e){}return void 0!==s.d3},s.fallback=function(){return null},s.supported(),e.exports=s},2193(e){e.exports=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}},2196(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c,dependsOn:()=>s,init:()=>l,names:()=>u});var i=n(4181),o=n(1498),a=n(384),s="etmerc";function l(){var e=function(e,t){if(void 0===e){if((e=Math.floor(((0,i.A)(t)+Math.PI)*30/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*a.zq,this.x0=5e5,this.y0=1e7*!!this.utmSouth,this.k0=.9996,o.default.init.apply(this),this.forward=o.default.forward,this.inverse=o.default.inverse}var u=["Universal Transverse Mercator System","utm"];let c={init:l,names:u,dependsOn:s}},2227(e,t,n){var i=n(8899),o=n(9186),a=function(e){"use strict";if(!(this instanceof a))return new a(e);e=e||{},o.call(this,e);var t=this,n=this._init;return this.featureType="text",this.position=function(e){return void 0===e?t.style("position"):(e!==t.style("position")&&(t.style("position",e),t.dataTime().modified(),t.modified()),t)},this.text=function(e){return void 0===e?t.style("text"):(e!==t.style("text")&&(t.style("text",e),t.dataTime().modified(),t.modified()),t)},this._init=function(e){e=e||{},n.call(t,e);var i=Object.assign({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:!1,textScaled:!1,position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e},text:function(e){return e.text}},void 0===e.style?{}:e.style);void 0!==e.position&&(i.position=e.position),void 0!==e.text&&(i.text=e.text),t.style(i),i.position&&t.position(i.position),i.text&&t.text(i.text),t.dataTime().modified()},this._init(e),t};a.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"],a.create=function(e,t){return(t=t||{}).type="text",o.create(e,t)},a.capabilities={feature:"text"},i(a,o),e.exports=a},2271(e){var t,n,i,o,a,s,l=(t={},n=function(){"use strict";var e,t,n,i,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},a=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},s=function(i){return i&&i!==t&&a("Expected '"+i+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},l=function(){var e,n="";for("-"===t&&(n="-",s("-"));t>="0"&&t<="9";)n+=t,s();if("."===t)for(n+=".";s()&&t>="0"&&t<="9";)n+=t;if("e"===t||"E"===t)for(n+=t,s(),("-"===t||"+"===t)&&(n+=t,s());t>="0"&&t<="9";)n+=t,s();if(isFinite(e=+n))return e;a("Bad number")},u=function(){var e,n,i,l="";if('"'===t)for(;s();){if('"'===t)return s(),l;if("\\"===t)if(s(),"u"===t){for(n=0,i=0;n<4&&isFinite(e=parseInt(s(),16));n+=1)i=16*i+e;l+=String.fromCharCode(i)}else if("string"==typeof o[t])l+=o[t];else break;else l+=t}a("Bad string")},c=function(){for(;t&&t<=" ";)s()},d=function(){switch(t){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}a("Unexpected '"+t+"'")},f=function(){var e=[];if("["===t){if(s("["),c(),"]"===t)return s("]"),e;for(;t;){if(e.push(i()),c(),"]"===t)return s("]"),e;s(","),c()}}a("Bad array")},p=function(){var e,n={};if("{"===t){if(s("{"),c(),"}"===t)return s("}"),n;for(;t;){if(e=u(),c(),s(":"),Object.hasOwnProperty.call(n,e)&&a("Duplicate key '"+e+"'"),n[e]=i(),c(),"}"===t)return s("}"),n;s(","),c()}}a("Bad object")};return i=function(){switch(c(),t){case"{":return p();case"[":return f();case'"':return u();case"-":return l();default:return t>="0"&&t<="9"?l():d()}},function(o,s){var l;return n=o,e=0,t=" ",l=i(),c(),t&&a("Syntax error"),"function"==typeof s?function e(t,n){var i,o,a=t[n];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(void 0!==(o=e(a,i))?a[i]=o:delete a[i]);return s.call(t,n,a)}({"":l},""):l}}(),"object"==typeof!1&&(!1).exports&&((!1).exports=n),s=((i={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,i,o,a,s){var l=a.length-1;switch(o){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=a[l-1];case 13:this.$={};break;case 14:case 19:this.$=a[l-1];break;case 15:this.$=[a[l-2],a[l]];break;case 16:this.$={},this.$[a[l][0]]=a[l][1];break;case 17:this.$=a[l-2],a[l-2][a[l][0]]=a[l][1];break;case 18:this.$=[];break;case 20:this.$=[a[l]];break;case 21:this.$=a[l-2],a[l-2].push(a[l])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e,t){throw Error(e)},parse:function(e){var t=this,n=[0],i=[null],o=[],a=this.table,s="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;function f(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}o.push(d),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,h,m,g,v,y,b,x,w,A={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==p&&(p=f()),g=a[m]&&a[m][p]),void 0===g||!g.length||!g[0]){if(!c){for(y in w=[],a[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");var C="";C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+this.terminals_[p]+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:d,expected:w})}if(3==c){if(1==p)throw Error(C||"Parsing halted.");u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,p=f()}for(;!("2"in a[m]);){;if(0==m)throw Error(C||"Parsing halted.");n.length=n.length-2,i.length=i.length-1,o.length=o.length-1,m=n[n.length-1]}h=p,p=2,g=a[m=n[n.length-1]]&&a[m][2],c=3}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),p=null,h?(p=h,h=null):(u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],A.$=i[i.length-b],A._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},void 0!==(v=this.performAction.call(A,s,u,l,this.yy,g[1],i,o)))return v;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),i.push(A.$),o.push(A._$),x=a[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}}).lexer=((o={EOF:1,parseError:function(e,t){if(this.yy.parseError)this.yy.parseError(e,t);else throw Error(e)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o,a=this._currentRules(),s=0;s<a.length&&(!(n=this._input.match(this.rules[a[s]]))||t&&!(n[0].length>t[0].length)||(t=n,i=s,this.options.flex));s++);return t?((o=t[0].match(/\n.*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e)?e:void 0:""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}}).options={},o.performAction=function(e,t,n,i){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},o.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],o.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},o),a=i).parse,a.parse=function(e){var t=s.call(a,e),i=void 0===n?(!0)("./doug-json-parse"):n;try{i(e)}catch(t){if(/Duplicate key|Bad string|Unexpected/.test(t.message)){var o=e.substring(0,t.at).split("\n"),l=o.length,u=o[l-1].length-1;throw this.parseError(t.message,{line:l,col:u,message:t.message.replace(/./,function(e){return e.toLowerCase()})}),SyntaxError(t.message+" on line "+l)}}return t},void 0!==t&&(t.parser=a,t.parse=function(){return a.parse.apply(a,arguments)},t.main=function(e){if(!e[1])throw Error("Usage: "+e[0]+" FILE");if("u">typeof process)var n=(!0)("fs").readFileSync((!0)("path").join(process.cwd(),e[1]),"utf8");else var n=(!0)("file").path((!0)("file").cwd()).join(e[1]).read({charset:"utf-8"});return t.parser.parse(n)},!1===(!0).main&&t.main("u">typeof process?process.argv.slice(1):(!0)("system").args)),t);e.exports&&(e.exports=l)},2286(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},2421(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},2437(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.texture=function(){"use strict";if(!(this instanceof i.texture))return new i.texture;i.materialAttribute.call(this,i.materialAttributeType.Texture),this.m_width=0,this.m_height=0,this.m_depth=0,this.m_textureHandle=null,this.m_textureUnit=0,this.m_pixelFormat=i.GL.RGBA,this.m_pixelDataType=i.GL.UNSIGNED_BYTE,this.m_internalFormat=i.GL.RGBA,this.m_nearestPixel=!1,this.m_image=null,this.m_texture=null;var e=a(),t=this;function n(e){if(t.m_textureUnit>=0&&t.m_textureUnit<32)e.m_context.activeTexture(i.GL.TEXTURE0+t.m_textureUnit);else throw"[error] Texture unit "+t.m_textureUnit+" is not supported"}return this.setup=function(t){n(t),t.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=t.m_context.createTexture(),t.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?i.GL.NEAREST:i.GL.LINEAR),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?i.GL.NEAREST:i.GL.LINEAR),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_S,i.GL.CLAMP_TO_EDGE),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_T,i.GL.CLAMP_TO_EDGE),null!==this.m_image?(t.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),t.m_context.pixelStorei(i.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),this.computeInternalFormatUsingImage(),t.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)):null!==this.m_texture?(t.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),t.m_context.pixelStorei(i.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),t.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_texture.width,this.m_texture.height,0,this.m_pixelFormat,this.m_pixelDataType,this.m_texture.data)):t.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null),t.m_context.bindTexture(i.GL.TEXTURE_2D,null),e.modified()},this.bind=function(t){this.getMTime()>e.getMTime()&&this.setup(t),n(t),t.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle)},this.undoBind=function(e){e.m_context.bindTexture(i.GL.TEXTURE_2D,null)},this.image=function(){return this.m_image},this.texture=function(){return this.m_texture},this.setImage=function(e){return null!==e&&(this.m_image=e,this.updateDimensions(),this.modified(),!0)},this.setTexture=function(e){return null!==e&&(this.m_texture=e,"Luminance"===e.type?(this.m_internalFormat=i.GL.LUMINANCE,this.m_pixelFormat=i.GL.LUMINANCE):"LuminanceAlpha"===e.type?(this.m_internalFormat=i.GL.LUMINANCE_ALPHA,this.m_pixelFormat=i.GL.LUMINANCE_ALPHA):(this.m_internalFormat=i.GL.RGBA,this.m_pixelFormat=i.GL.RGBA),this.updateDimensions(),this.modified(),!0)},this.nearestPixel=function(){return this.m_nearestPixel},this.setNearestPixel=function(e){return(e=!!e)!==this.m_nearestPixel&&(this.m_nearestPixel=e,this.modified(),!0)},this.textureUnit=function(){return this.m_textureUnit},this.setTextureUnit=function(e){return this.m_textureUnit!==e&&(this.m_textureUnit=e,this.modified(),!0)},this.computeInternalFormatUsingImage=function(){this.m_internalFormat=i.GL.RGBA,this.m_pixelFormat=i.GL.RGBA,this.m_pixelDataType=i.GL.UNSIGNED_BYTE},this.updateDimensions=function(){null!==this.m_image&&(this.m_width=this.m_image.width,this.m_height=this.m_image.height,this.m_depth=0),null!==this.m_texture&&(this.m_width=this.m_texture.width,this.m_height=this.m_texture.height,this.m_depth=0)},this.textureHandle=function(){return this.m_textureHandle},this},o(i.texture,i.materialAttribute),i.lookupTable=function(){"use strict";if(!(this instanceof i.lookupTable))return new i.lookupTable;i.texture.call(this);var e=a();return this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map(function(e){return 255*e}),this.setup=function(t){0===this.textureUnit()?t.m_context.activeTexture(i.GL.TEXTURE0):1===this.textureUnit()&&t.m_context.activeTexture(i.GL.TEXTURE1),t.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=t.m_context.createTexture(),t.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,i.GL.LINEAR),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,i.GL.LINEAR),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_S,i.GL.CLAMP_TO_EDGE),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_T,i.GL.CLAMP_TO_EDGE),t.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),this.m_width=this.m_colorTable.length/4,this.m_height=1,this.m_depth=0,t.m_context.texImage2D(i.GL.TEXTURE_2D,0,i.GL.RGBA,this.m_width,this.m_height,this.m_depth,i.GL.RGBA,i.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable)),t.m_context.bindTexture(i.GL.TEXTURE_2D,null),e.modified()},this.colorTable=function(){return this.m_colorTable},this.setColorTable=function(e){return this.m_colorTable!==e&&(this.m_colorTable=e,this.modified(),!0)},this},o(i.lookupTable,i.texture)},2473(e,t,n){e.exports=n(5053)},2488(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2],c=n[3],d=c*i+l*a-u*o,f=c*o+u*i-s*a,p=c*a+s*o-l*i,h=-s*i-l*o-u*a;return e[0]=d*c+-(h*s)+-(f*u)- -(p*l),e[1]=f*c+-(h*l)+-(p*s)- -(d*u),e[2]=p*c+-(h*u)+-(d*l)- -(f*s),e[3]=t[3],e}},2499(e){e.exports="/* polygonPatternFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform float pixelWidth;\nuniform float aspect;\nuniform float zoom;\nuniform float rotationUniform;\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec4 patternFillColor;\nattribute vec4 patternStrokeColor;\n/* Symbol props are strokeWidth, radius, symbol + flags, symbolValue */\nattribute vec4 patternSymbolProps;\n/* Position props are rotation, spacing, origin x, origin y */\nattribute vec4 patternPositionProps;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 polyFillColorVar;\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\nvarying vec3 patternPosVar;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void)\n{\n  polyFillColorVar = vec4(fillColor, fillOpacity);\n  /* This is _nearly_ the same as what is in markerFeatureVS.glsl, but the\n   * attributes are named differently. */\n  radiusVar = patternSymbolProps.y;\n  strokeWidthVar = patternSymbolProps.x;\n  int scaleMode = int(mod(patternSymbolProps.z, 4.0));\n  float strokeOffset = mod(floor(patternSymbolProps.z / 16.0), 4.0) - 1.0;\n  if (radiusVar < 0.0 || (patternFillColor.a < 0.0 && patternStrokeColor.a < 0.0)) {\n    radiusVar = 0.0;\n  } else {\n    radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n    if (scaleMode == 1) { // fill\n      radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n    } else if (scaleMode == 2) { // stroke\n      radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n      strokeWidthVar *= exp2(zoom);\n    } else if (scaleMode == 3) { // all\n      radiusVar *= exp2(zoom);\n      strokeWidthVar *= exp2(zoom);\n    }\n  }\n  fillColorVar = patternFillColor;\n  strokeColorVar = patternStrokeColor;\n  symbolVar = patternSymbolProps.z;\n  symbolValueVar = patternSymbolProps.w;\n  rotationVar = patternPositionProps.x;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  /* This is distinct for polygonPattern */\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos / clipPos.w;\n  }\n  if (radiusVar > 0.0) {\n    vec4 origPos = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    if (origPos.w != 0.0)\n      origPos = origPos / origPos.w;\n    patternPosVar.x = (clipPos.x - origPos.x) / pixelWidth;\n    patternPosVar.y = -(clipPos.y - origPos.y) / pixelWidth / aspect;\n    float spacing = patternPositionProps.y;\n    if (scaleMode == 0) {\n      patternPosVar.x -= patternPositionProps.z;\n      patternPosVar.y -= patternPositionProps.w;\n    } else {\n      spacing = spacing * exp2(zoom);\n      patternPosVar.x -= patternPositionProps.z * exp2(zoom);\n      patternPosVar.y -= patternPositionProps.w * exp2(zoom);\n    }\n    if (rotationUniform != 0.0) {\n      float cosR = cos(rotationUniform);\n      float sinR = sin(rotationUniform);\n      patternPosVar.xy = vec2(cosR * patternPosVar.x + sinR * patternPosVar.y, sinR * patternPosVar.x - cosR * patternPosVar.y);\n    }\n    patternPosVar.z = spacing;\n  }\n  gl_Position = clipPos;\n}\n"},2516(e,t,n){"use strict";n.d(t,{Fs:()=>u,OI:()=>o,Rw:()=>s,jX:()=>a,mj:()=>l});var i=n(384);function o(e,t){return!(e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===i.a8?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==i.Y$||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}function a(e,t,n){var o,a,s,l=e.x,u=e.y,c=e.z?e.z:0;if(u<-i.sK&&u>-1.001*i.sK)u=-i.sK;else if(u>i.sK&&u<1.001*i.sK)u=i.sK;else if(u<-i.sK)return{x:-1/0,y:-1/0,z:e.z};else if(u>i.sK)return{x:1/0,y:1/0,z:e.z};return l>Math.PI&&(l-=2*Math.PI),a=Math.sin(u),s=Math.cos(u),{x:((o=n/Math.sqrt(1-a*a*t))+c)*s*Math.cos(l),y:(o+c)*s*Math.sin(l),z:(o*(1-t)+c)*a}}function s(e,t,n,o){var a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w=1e-12*1e-12,A=e.x,C=e.y,S=e.z?e.z:0;if(a=Math.sqrt(A*A+C*C),s=Math.sqrt(A*A+C*C+S*S),a/n<1e-12){if(b=0,s/n<1e-12)return i.sK,x=-o,{x:e.x,y:e.y,z:e.z}}else b=Math.atan2(C,A);l=S/s,c=1/Math.sqrt(1-t*(2-t)*(u=a/s)*u),p=u*(1-t)*c,h=l*c,y=0;do y++,f=n/Math.sqrt(1-t*h*h),x=a*p+S*h-f*(1-t*h*h),c=1/Math.sqrt(1-(d=t*f/(f+x))*(2-d)*u*u),m=u*(1-d)*c,v=(g=l*c)*p-m*h,p=m,h=g;while(v*v>w&&y<30);return{x:b,y:Math.atan(g/Math.abs(m)),z:x}}function l(e,t,n){if(t===i.a8)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===i.Y$){var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],d=n[6];return{x:d*(e.x-c*e.y+u*e.z)+o,y:d*(c*e.x+e.y-l*e.z)+a,z:d*(-u*e.x+l*e.y+e.z)+s}}}function u(e,t,n){if(t===i.a8)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===i.Y$){var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],d=n[6],f=(e.x-o)/d,p=(e.y-a)/d,h=(e.z-s)/d;return{x:f+c*p-u*h,y:-c*f+p+l*h,z:u*f-l*p+h}}}},2540(e,t,n){var i=n(5933).registerLayerAdjustment,o=function(){"use strict";var e,t=this,n=this._init,i=this._exit,o=this._update,a=0,s=[];this._drawTile=function(n){if(e){var i=t._tileBounds(n),o=n.index.level||0,l=t._tileOffset(o),u={};u.ul=t.fromLocal(t.fromLevel({x:i.left-l.x,y:i.top-l.y},o),0),u.ll=t.fromLocal(t.fromLevel({x:i.left-l.x,y:i.bottom-l.y},o),0),u.ur=t.fromLocal(t.fromLevel({x:i.right-l.x,y:i.top-l.y},o),0),u.lr=t.fromLocal(t.fromLevel({x:i.right-l.x,y:i.bottom-l.y},o),0),u.ul.z=u.ll.z=u.ur.z=u.lr.z=o,u.id=a+=1,n.quadId=u.id,u.image=n.image,u.reference=n.toString(),s.push(u),e.data(s),e._update(),t.draw()}},this._remove=function(n){if(void 0!==n.quadId&&e){for(var i=0;i<s.length;i+=1)if(s[i].id===n.quadId){s.splice(i,1);break}e.data(s),e._update(),t.draw()}},this._update=function(n){return o.call(t,n),t._addBaseQuadToTiles(e,s),t},this._exit=function(){t.deleteFeature(e),e=null,s=[],i.apply(t,arguments)},this._init=function(){n.apply(t,arguments),(e=t.createFeature("quad",{previewColor:t._options.previewColor,previewImage:t._options.previewImage})).geoTrigger=void 0,e.gcs(t._options.gcs||t.map().gcs()),e.data(s),e._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};i("svg","tile",o),e.exports=o},2573(e,t,n){e.exports=function(e,t){var n=i(e[0],e[1],e[2]),s=i(t[0],t[1],t[2]);o(n,n),o(s,s);var l=a(n,s);return l>1?0:Math.acos(l)};var i=n(3198),o=n(1785),a=n(409)},2584(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){var o;return(o=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(o)?o:o+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(8899),u=n(5933).registerFileReader,c=n(551),d=function(e){"use strict";if(!(this instanceof d))return new d(e);var t=n(4692),i=n(4341).convertColor,o=n(7252),l=n(5204),u=this,f=a(a({},e),{},{pointStyle:a({fill:!0,fillColor:"#ff7800",fillOpacity:.8,stroke:!0,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},e.pointStyle),lineStyle:a({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",uniformLine:!0,closed:!1},e.lineStyle),polygonStyle:a({fill:!0,fillColor:"#b0de5c",fillOpacity:.8,stroke:!0,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1,uniformPolygon:!0,pattern:void 0},e.polygonStyle)});c.call(this,f),this.canRead=function(e){if(e instanceof File||e instanceof Blob)return!!("application/json"===e.type||e.name&&e.name.match(/\.json$/));if("string"==typeof e){try{JSON.parse(e)}catch(e){return!1}return!0}try{if(Array.isArray(u._featureArray(e)))return!0}catch(e){}return!1},this._readObject=function(e,n,i){var o;function a(e){try{o=JSON.parse(e),n(o)}catch(i){o||t.ajax({type:"GET",url:e,dataType:"text"}).done(function(e){try{o=JSON.parse(e),n(o)}catch(e){o||n(!1)}}).fail(function(){n(!1)})}}e instanceof File||e instanceof Blob?u._getString(e,a,i):"string"==typeof e?a(e):n(e)},this._featureArray=function(e){var t,n=[];switch(e.type){case"FeatureCollection":t=e.features;break;case"Feature":t=[e];break;case"GeometryCollection":t=e.geometries.map(function(e){return{type:"Feature",geometry:e,properties:{}}});break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":t=[{type:"Feature",geometry:e,properties:{}}];break;default:throw Error("Invalid json type")}return t.forEach(function(e){Array.prototype.push.apply(n,u._feature(e))}),n=n.filter(function(e){return e.geometry&&e.geometry.coordinates&&e.geometry.coordinates.length})},this._feature=function(e){if("Feature"!==e.type)throw Error("Invalid feature object");switch(e.geometry.type){case"Point":case"LineString":case"Polygon":return[e];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.geometry.coordinates.map(function(t){return{type:"Feature",geometry:{type:e.geometry.type.replace("Multi",""),coordinates:t},properties:e.properties}});default:throw Error("Invalid geometry type")}},this._position=function(e){return{x:e[0],y:e[1],z:e[2]||0}},this._style=function(e,t){var n=e.toLowerCase().match(/color$/);return n&&(t=i(t)),function(o,a,s,l){var u;return void 0!==(u=void 0!==s&&s.properties?s.properties:o.properties)&&u.hasOwnProperty(e)?n?i(u[e]):u[e]:t}},this.read=function(e,t,n){var i=new Promise(function(i,c){function d(e){return"Polygon"===e.geometry.type&&1===e.geometry.coordinates.length&&5===e.geometry.coordinates[0].length&&("ellipse"===(e.properties||{}).annotationType||"circle"===(e.properties||{}).annotationType)}u._readObject(e,function(e){if(!1===e){t&&t(e),c(Error("Failed to parse GeoJSON"));return}var n,p,h=[];try{n=u._featureArray(e)}catch(e){c(e);return}var m=n.filter(function(e){return"Point"===e.geometry.type});m.length&&(p=u.layer().createFeature("point"))&&(p.data(m).position(function(e){return u._position(e.geometry.coordinates)}).style([{}].concat(Object.keys(f.pointStyle)).reduce(function(e,t){return a(s({},t,m.some(function(e){return e.properties&&void 0!==e.properties[t]})?u._style(t,f.pointStyle[t]):f.pointStyle[t]),e)})),h.push(p));var g=n.filter(function(e){return"LineString"===e.geometry.type});g.length&&(p=u.layer().createFeature("line"))&&(p.data(g).line(function(e){return e.geometry.coordinates}).position(u._position).style([{}].concat(Object.keys(f.lineStyle)).reduce(function(e,t){return a(s({},t,g.some(function(e){return e.properties&&void 0!==e.properties[t]})?u._style(t,f.lineStyle[t]):f.lineStyle[t]),e)})),h.push(p));var v=n.filter(function(e){return"Polygon"===e.geometry.type&&!d(e)});v.length&&(p=u.layer().createFeature("polygon"))&&(p.data(v).polygon(function(e,t){return{outer:e.geometry.coordinates[0],inner:e.geometry.coordinates.slice(1)}}).position(u._position).style([{}].concat(Object.keys(f.polygonStyle)).reduce(function(e,t){return a(s({},t,v.some(function(e){return e.properties&&void 0!==e.properties[t]})?u._style(t,f.polygonStyle[t]):f.polygonStyle[t]),e)})),h.push(p));var y=n.filter(d);y.length&&(p=u.layer().createFeature("marker"))&&(y.forEach(function(e){var t=u.layer().map(),n=l.transformCoordinates(t.ingcs(),t.gcs(),e.geometry.coordinates[0]),i=Math.pow(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2),.5),o=Math.pow(Math.pow(n[0][0]-n[3][0],2)+Math.pow(n[0][1]-n[3][1],2),.5),a=Math.max(i,o)/2/t.unitsPerPixel(0),s=-Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]);e._props={pos:l.transformCoordinates(t.gcs(),t.ingcs(),{x:(n[0][0]+n[1][0]+n[2][0]+n[3][0])/4,y:(n[0][1]+n[1][1]+n[2][1]+n[3][1])/4}),radius:a,aspect:i?o/i:1e20,rotation:s}}),p.data(y).position(function(e){return e._props.pos}).style([{}].concat(Object.keys(f.polygonStyle)).reduce(function(e,t){return a(s(s(s(s(s(s(s(s({},t,y.some(function(e){return e.properties&&void 0!==e.properties[t]})?u._style(t,f.polygonStyle[t]):f.polygonStyle[t]),"radius",function(e){return e._props.radius}),"radiusIncludesStroke",!1),"symbolValue",function(e){return e._props.aspect}),"rotation",function(e){return e._props.rotation}),"strokeOffset",0),"rotateWithMap",!0),"scaleWithZoom",o.scaleMode.fill),e)})),h.push(p)),t&&t(h),i(h)},n)});return u.addPromise(i),i}};l(d,c),u("geojsonReader",d),u("jsonReader",d),e.exports=d},2603(e,t,n){var i=n(8899),o=n(6601),a=n(5933),s=n(9971),l=n(9812),u=n(4341),c=function(e){var t=n(9341);if(!(this instanceof c))return new c(e);(e=e||{}).data&&(i=e.data,delete e.data),e=u.deepMerge({},this.constructor.defaults,e),o.call(this,e);var i,a,s=this._init,l=this;return this._getTile=function(e,n){var i=n||e;return t({index:e,size:{x:l._options.tileWidth,y:l._options.tileHeight},queue:l._queue,overlap:l._options.tileOverlap,scale:l._options.tileScale,url:l._options.url.call(l,i.x,i.y,Math.max(i.level||0,Math.min(0,l._options.minLevel||0)),l._options.subdomains),crossDomain:l._options.crossDomain})},this._init=function(){s.apply(l,arguments),l.nearestPixel(!0,!0);var t={quadFeature:l.features()[0]};e.style&&(t.style=e.style),e.color&&(t.color=e.color),a=l.createFeature("pixelmap",t),i&&a.data(i),l.style=a.style,l.data=a.data,l.indexModified=a.indexModified;var n=l.dataTime().modified;return l.dataTime().modified=function(){return a.dataTime().modified(),n()},["modified","geoOn","geoOff","geoOnce"].forEach(function(e){var t=l[e];l[e]=function(){return Array.isArray(arguments[0])||a[e].apply(this,arguments),t.apply(this,arguments)}}),l},l};c.defaults=Object.assign({},o.defaults,{features:[s.capabilities.image,l.capabilities.lookup],tileOffset:function(e){var t=256*Math.pow(2,e-1);return{x:t,y:t}},url:""}),i(c,o),a.registerLayer("pixelmap",c,[s.capabilities.image]),e.exports=c},2617(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2],c=n[3],d=l*a-u*o,f=u*i-s*a,p=s*o-l*i;return d*=2,f*=2,p*=2,e[0]=i+c*d+l*p-u*f,e[1]=o+c*f+u*d-s*p,e[2]=a+c*p+s*f-l*d,e}},2633(e){e.exports=function(e,t,n,i){var o=new Float32Array(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o}},2646(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},2703(e,t,n){function i(e,t,n){this._group=e,this._zoom=t,this._points=[],this._clusters=[],this._count=0,this._parent=null,this._coord=null;var i=this;(n||[]).forEach(function(e){i._add(e)})}function o(e){var t,o,a=n(7306);for(this._opts=Object.assign({maxZoom:18,radius:5},e),this._clusters={},this._points={},t=this._opts.maxZoom;t>=0;t-=1)o=this._opts.radius*Math.pow(2,-t),this._clusters[t]=new a(o),this._points[t]=new a(o);this._topClusterLevel=new i(this,-1)}i.prototype._add=function(e){var t=1;e instanceof i?(this._clusters.push(e),t=e._count):this._points.push(e),e._parent=this,this._increment(t)},i.prototype._increment=function(e){this._coord=null,this._count+=e,this._parent&&this._parent._increment(e)},i.prototype.count=function(){return this._count},i.prototype.each=function(e){var t;for(t=0;t<this._points.length;t+=1)e.call(this,this._points[t],this._zoom);for(t=0;t<this._clusters.length;t+=1)this._clusters[t].each.call(this._clusters[t],e)},i.prototype.coords=function(){if(this._coord)return this._coord;var e,t={x:0,y:0};for(e=0;e<this._points.length;e+=1)t.x+=this._points[e].x,t.y+=this._points[e].y;for(e=0;e<this._clusters.length;e+=1)t.x+=this._clusters[e].coords().x*this._clusters[e].count(),t.y+=this._clusters[e].coords().y*this._clusters[e].count();return this._coord={x:t.x/this.count(),y:t.y/this.count()},this._coord},o.prototype.addPoint=function(e){var t,n,o,a,s,l;for(t=this._opts.maxZoom;t>=0;t-=1){if(n=this._clusters[t].getNearObject(e))return void n._add(e);if(n=this._points[t].getNearObject(e)){if(o=n._parent){for(l=o._points.length-1;l>=0;l-=1)if(o._points[l]===n){o._points.splice(l,1),o._increment(-1);break}}for(a=new i(this,t,[n,e]),this._clusters[t].addObject(a,a.coords()),s=a,l=t-1;l>o._zoom;l-=1)s=new i(this,l,[s]),this._clusters[l].addObject(s,s.coords());for(o._add(s),l=t;l>=0&&this._points[l].removeObject(n,n);l-=1);return}this._points[t].addObject(e,e)}this._topClusterLevel._add(e)},o.prototype.points=function(e){return e=Math.min(Math.max(Math.floor(e),0),this._opts.maxZoom-1),this._points[Math.floor(e)].contents()},o.prototype.clusters=function(e){return e=Math.min(Math.max(Math.floor(e),0),this._opts.maxZoom-1),this._clusters[Math.floor(e)].contents()},e.exports=o},2736(e,t,n){"use strict";function i(e,t){var n=Math.max(e=Math.abs(e),t=Math.abs(t)),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}n.d(t,{A:()=>i})},2811(e){e.exports=function(e,t){var n=2*Math.random()*Math.PI,i=2*Math.random()-1,o=Math.sqrt(1-i*i)*(t=t||1);return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=i*t,e}},2819(e,t,n){function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var a=n(7449),s=a.PolyBool,l=a.GeometryEpsilon,u=new s,c=n(830),d=n(6500),f={"+":"union","|":"union",add:"union","-":"difference",sub:"difference",subtract:"difference",minus:"difference","*":"intersect","&":"intersect",mul:"intersect",multiply:"intersect",intersection:"intersect",x:"xor","^":"xor"};function p(e,t,n){e="select"+e.charAt(0).toUpperCase()+e.slice(1);for(var i=new s(new l(t));n.length>1;){for(var o=[],a=Math.ceil(n.length/2),u=0;u<a;u+=1){var c=n[u];if(u+a<n.length){var d=n[u+a];try{c=i.combine(c,d)}catch(e){c=i.segments(i.polygon(c)),d=i.segments(i.polygon(d));for(var f=20;f>=6;f-=1){var p=new s(new l(Math.pow(.1,f)));try{c=p.combine(c,d);break}catch(e){}}}c=i[e](c)}o.push(c)}n=o}return n}function h(e,t,n){if(t=t||{},e.toPolygonList){if(t.style=e,!(e=e.toPolygonList(n)).length)return t.min=t.max=[0,0],t.epsilon=1e-10,e}else{if(t.style="",e.outer?(t.style="-outer",e=[[e.outer].concat(i(e.inner||[]))]):e.length&&e[0].outer&&(t.style="-outer-list",e=e.map(function(e){return[e.outer].concat(i(e.inner||[]))})),!e.length)return t.style="flat-listlist"+t.style,t.min=t.max=[0,0],t.epsilon=1e-10,e;void 0!==e[0].x?(t.style="object",e=[[e.map(function(e){return[e.x,e.y]})]]):void 0!==e[0][0].x?(t.style="object-list"+t.style,e=[e.map(function(e){return e.map(function(e){return[e.x,e.y]})})]):void 0===e[0][0][0]?(t.style="flat",e=[[e]]):void 0!==e[0][0][0].x?(t.style="object-listlist"+t.style,e=e.map(function(e){return e.map(function(e){return e.map(function(e){return[e.x,e.y]})})})):void 0===e[0][0][0][0]?(t.style="flat-list",e=[e]):t.style="flat-listlist"+t.style}return t.min=[e[0][0][0][0],e[0][0][0][1]],t.max=[e[0][0][0][0],e[0][0][0][1]],e.forEach(function(e){return e.forEach(function(e){return e.forEach(function(e){e[0]<t.min[0]&&(t.min[0]=e[0]),e[0]>t.max[0]&&(t.max[0]=e[0]),e[1]<t.min[1]&&(t.min[1]=e[1]),e[1]>t.max[1]&&(t.max[1]=e[1])})})}),t.epsilon=1e-10*Math.max(Math.max(t.max[0],t.max[1]),Math.max(Math.abs(t.min[0]),Math.abs(t.min[1]))),e}function m(e,t,n){return t.style.fromPolygonList?t.style.fromPolygonList(e,n):(t.style.includes("object")&&(e=e.map(function(e){return e.map(function(e){return e.map(function(e){return{x:e[0],y:e[1]}})})})),t.style.includes("outer")&&(e=[e.map(function(e){return{outer:e[0],inner:e.slice(1)}})]),t.style.endsWith("listlist")||(e=t.style.endsWith("list")?e[0]:e[0][0]),e)}function g(e){return function(t,i,o){var a,s,l,g,v,y,b,x,w,A,C,S,_,T,O,P,M,E,D,I,k,N,R;return a=e,s=t,l=i,g=o,v=n(5204),a=f[a]||a,s.poly1&&(s=(g=s).poly1,l=g.poly2),y=(g=g||{}).ingcs||(g.map?g.map.ingcs():s.gcs?s.gcs():s.layer&&s.layer().gcs?s.layer().gcs():s.layer?s.layer().map().ingcs():s.map instanceof c?s.map().ingcs():void 0),b=g.ingcs||(g.map?g.map.ingcs():l.gcs?l.gcs():l.layer&&l.layer().gcs?l.layer().gcs():l.layer?l.layer().map().ingcs():l.map instanceof c?l.map().ingcs():y),x=g.gcs||(g.map?g.map.gcs():s.layer?s.layer().map().gcs():s.map instanceof c?s.map().gcs():void 0),A={},s=h(s,w={},g),l=h(l,A,g),w.epsilon=g.epsilon1||w.epsilon,A.epsilon=g.epsilon2||w.epsilon,y&&x&&y!==x&&(s=s.map(function(e){return e.map(function(e){return v.transformCoordinates(y,x,e)})})),b&&x&&b!==x&&(l=l.map(function(e){return e.map(function(e){return v.transformCoordinates(b,x,e)})})),C=s.map(function(e){return u.segments({regions:e})}),S=l.map(function(e){return u.segments({regions:e})}),C=p(g.innerOperation||"union",w.epsilon,C),S=p(g.innerOperation||"union",A.epsilon,S),_=C,C[0]&&S[0]?(C[0].inverted=!1,S[0].inverted=!1,_=p(a,Math.max(w.epsilon,A.epsilon),[C[0],S[0]])):S[0]&&(_=S),T=function(e){var t=[],n=[],i=[],o=[];e.forEach(function(e){return u.polygon(e).regions.forEach(function(e){var t=e.map(function(e){return{x:e[0],y:e[1]}});t.length<3||(o.push([]),n.forEach(function(e,i){d.pointInPolygon(t[0],e)?o[n.length].push(i):d.pointInPolygon(e[0],t)&&o[i].push(n.length)}),i.push(e),n.push(t))})});for(var a=Array(i.length),s=0;s<i.length;){for(var l=0;l<i.length;l+=1)void 0!==a[l]||o[l].length||(a[l]=t.length,t.push([i[l].reverse()]),s+=1);for(var c=0;c<i.length;c+=1)void 0===a[c]&&1===o[c].length&&void 0!==a[o[c][0]]&&(t[a[o[c][0]]].push(i[c]),a[c]=a[o[c][0]],s+=1);for(var f=0;f<i.length;f+=1)o[f]=o[f].filter(function(e){return void 0===a[e]})}return t.length?t:[[]]}(_),g.correspond&&(O=s,P=l,M=T,E=g.correspond,D={},I=[],M.forEach(function(e,t){return e.forEach(function(e){return e.forEach(function(e){var n="_"+e[0]+"_"+e[1];D[n]?-1===D[n].indexOf(t)&&D[n].push(t):D[n]=[t],I.length<=t&&I.push(0),I[t]+=1})})}),["poly1","poly2"].forEach(function(e){var t="poly1"===e?O:P,n="poly1"===e?"exact1":"exact2";E[e]=Array(t.length),E[n]=Array(t.length),t.forEach(function(t,i){var o={},a=0;t.forEach(function(e){return e.forEach(function(e){var t="_"+e[0]+"_"+e[1];D[t]?D[t].forEach(function(e){o[e]=(o[e]||0)+1}):a+=1})}),Object.keys(o).forEach(function(s){o[s]!==I[+s]||a||t.length!==M[+s].length||(E[n][i]||(E[n][i]=[]),E[n][i].push(+s)),o[s]>=2&&(E[e][i]||(E[e][i]=[]),E[e][i].push(+s))})})})),y&&x&&y!==x&&(T=T.map(function(e){return e.map(function(e){return v.transformCoordinates(x,y,e)})})),k={style:g.style||(N=T,(R=w.style).fromPolygonList?R:N.length>1?R.includes("outer")?R+(R.endsWith("list")?"":"-list"):R.endsWith("listlist")?R:R+(R.endsWith("list")?"list":"-listlist"):1===N.length&&N[0].length>1?R.includes("outer")||R.endsWith("list")?R:R+"-list":R)},m(T,k,g)}}e.exports={union:g("union"),intersect:g("intersect"),difference:g("difference"),xor:g("xor"),toPolygonList:h,fromPolygonList:m}},2822(e){e.exports=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},2864(e){e.exports=1e-6},2866(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(5232),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e);var t=this,n=null,i=this._exit,o=this.draw,l=this._update;return this.draw=function(){if(t._update(),n)for(var e=0;e<n.length;e+=1)n[e].draw();return o(),t},this._build=function(){return t.buildTime().modified(),n=t.createChoropleth()},this._update=function(){l.call(t),(t.dataTime().timestamp()>=t.buildTime().timestamp()||t.updateTime().timestamp()<=t.timestamp())&&(t._wipePolygons(),t._build()),t.updateTime().modified()},this._wipePolygons=function(){n&&n.map(function(e){return e._exit()}),n=null},this._exit=function(){t._wipePolygons(),i()},this._init(e),this};i(s,a),o("webgl","choropleth",s),e.exports=s},2885(e,t,n){"use strict";n.d(t,{A:()=>w});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a),l=n(4417),u=n.n(l),c=new URL(n(3158),n.b),d=new URL(n(5245),n.b),f=new URL(n(8546),n.b),p=new URL(n(9803),n.b),h=new URL(n(9463),n.b),m=s()(o()),g=u()(c),v=u()(d),y=u()(f),b=u()(p),x=u()(h);m.push([e.id,`.geojs-map{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.geojs-map .geo-attribution{position:absolute;right:0;bottom:0;padding-right:5px;cursor:auto;font:11px/1.5 "Helvetica Neue",Arial,Helvetica,sans-serif;z-index:1001;background:rgba(255,255,255,0.7);clear:both;display:block;pointer-events:auto}.geojs-map .geo-attribution .geo-attribution-layer{padding-left:5px}.geojs-map .canvas-canvas{display:block;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.geojs-map .webgl-canvas{display:block}.geojs-map .geojs-layer{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}.geojs-map .geojs-layer.active:not(.hidden) > *{pointer-events:auto}.geojs-map .geojs-layer.hidden{display:none}.geojs-map .geojs-layer.hidden[renderer="webgl"]{display:inherit}.geojs-map .geo-tile-layer{-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;line-height:0;font-size:0}.geojs-map.annotation-input{cursor:crosshair}.geojs-map.annotation-input.annotation-intersect{cursor:url(${g}) 12 12,crosshair}.geojs-map.annotation-input.annotation-difference{cursor:url(${v}) 12 12,crosshair}.geojs-map.annotation-input.annotation-union{cursor:url(${y}) 12 12,crosshair}.geojs-map.annotation-input.annotation-xor{cursor:url(${b}) 12 12,crosshair}.geojs-map.annotation-input.annotation-cut{cursor:url(${x}) 12 12,crosshair}.geojs-map.annotation-cursor{cursor:crosshair}.geojs-map.annotation-cursor.annotation-intersect{cursor:url(${g}) 12 12,crosshair}.geojs-map.annotation-cursor.annotation-difference{cursor:url(${v}) 12 12,crosshair}.geojs-map.annotation-cursor.annotation-union{cursor:url(${y}) 12 12,crosshair}.geojs-map.annotation-cursor.annotation-xor{cursor:url(${b}) 12 12,crosshair}.geojs-map.highlight-focus:after{content:"";display:block;position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;left:0;top:0;right:0;bottom:0;border:3px solid Highlight;opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 0s;-moz-transition:opacity 0s;-o-transition:opacity 0s;-ms-transition:opacity 0s;transition:opacity 0s;visibility:hidden}.geojs-map.highlight-focus:focus:after{visibility:visible;-webkit-transition:opacity 2.5s ease-in;-moz-transition:opacity 2.5s ease-in;-o-transition:opacity 2.5s ease-in;-ms-transition:opacity 2.5s ease-in;transition:opacity 2.5s ease-in;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.geo-tile-container{position:absolute}.geo-tile-container.crop{overflow:hidden}`,"",{version:3,sources:["webpack://./src/main.styl","webpack://./node_modules/nib/lib/nib/vendor.styl","webpack://./node_modules/nib/lib/nib/overflow.styl","webpack://./node_modules/nib/lib/nib/flex.styl","webpack://./node_modules/nib/lib/nib/border.styl"],names:[],mappings:"AAEA,WACE,iBAAS,CCwCO,wBAAG,CAAH,qBAAG,CAAH,oBAAG,CARN,gBAAG,CChBd,eAAU,CFZZ,4BACE,iBAAS,CACT,OAAM,CACN,QAAO,CACP,iBAAc,CC4ed,WAAO,CD1eP,yDAA8B,CAC9B,YAAQ,CC6dR,gCAAW,CD3dX,UAAM,CGMN,aAAS,CHJT,mBAAe,CAEf,mDACE,gBAAa,CAEjB,0BGDE,aAAS,CFqBK,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDThB,yBGJE,aAAS,CHOX,wBACE,iBAAS,CACT,UAAM,CACN,WAAO,CACP,MAAK,CACL,KAAI,CACJ,mBAAe,CAEb,gDACE,mBAAe,CACnB,+BGjBA,YAAS,CHmBT,iDGnBA,eAAS,CHsBX,2BCDgB,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDWd,aAAY,CACZ,WAAU,CAEZ,4BCscE,gBAAO,CDpcP,iDCocA,8DAAO,CDlcP,kDCkcA,8DAAO,CDhcP,6CCgcA,8DAAO,CD9bP,2CC8bA,8DAAO,CD5bP,2CC4bA,8DAAO,CDzbT,6BCybE,gBAAO,CDvbP,kDCubA,8DAAO,CDrbP,mDCqbA,8DAAO,CDnbP,8CCmbA,8DAAO,CDjbP,4CCibA,8DAAO,CD7aP,iCACE,UAAQ,CGrDV,aAAS,CHuDP,iBAAS,CClCG,6BAAG,CAAH,0BAAG,CARN,qBAAG,CD4CZ,MAAK,CACL,KAAI,CACJ,OAAM,CACN,QAAO,CIzET,0BAAQ,CH4PV,SAAS,CAQH,eAAY,CACZ,WAAQ,CArOE,6BAAG,CAAH,0BAAG,CAAH,wBAAG,CAAH,yBAAG,CARN,qBAAG,CDuDZ,iBAAW,CACb,uCACE,kBAAW,CCjDC,uCAAG,CAAH,oCAAG,CAAH,kCAAG,CAAH,mCAAG,CARN,+BAAG,CAoOhB,SAAS,CAWH,+DAAyE,CACzE,uBAAiC,CDnLzC,oBACE,iBAAS,CACT,yBE7EE,eAAU",sourcesContent:['@import \'~nib/index.styl\'\n\n.geojs-map\n  position relative\n  user-select none\n  overflow hidden\n\n  .geo-attribution\n    position absolute\n    right 0\n    bottom 0\n    padding-right 5px\n    cursor auto\n    font 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif\n    z-index 1001\n    background rgba(255,255,255,0.7)\n    clear both\n    display block\n    pointer-events auto\n\n    .geo-attribution-layer\n      padding-left 5px\n\n  .canvas-canvas\n    display block\n    transform-origin 0px 0px\n  .webgl-canvas\n    display block\n\n  .geojs-layer\n    position absolute\n    width 100%\n    height 100%\n    left 0\n    top 0\n    pointer-events none\n    &.active:not(.hidden)\n      > *\n        pointer-events auto\n    &.hidden\n      display none\n    &.hidden[renderer="webgl"]\n      display inherit\n\n  .geo-tile-layer\n    transform-origin 0px 0px\n    line-height 0\n    font-size 0\n\n  &.annotation-input\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n    &.annotation-cut\n      cursor embedurl("./css/cursor-crosshair-cut.svg") 12 12,crosshair\n\n  &.annotation-cursor\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n\n  &.highlight-focus\n    &:after\n      content ""\n      display block\n      position absolute\n      box-sizing border-box\n      left 0px\n      top 0px\n      right 0px\n      bottom 0px\n      // Highlight is technically a css2 color.  We may need to specify it\n      // explicitly.  #3B66A6 seems close\n      border 3px solid Highlight\n      opacity 1\n      transition opacity 0s\n      visibility hidden\n    &:focus:after\n      visibility visible\n      transition opacity 2.5s ease-in\n      opacity 0\n\n.geo-tile-container\n  position absolute\n  &.crop\n    overflow hidden\n',"use('../nodes/vendor-helpers.js')\n@import 'config'\n\n/*\n * Alias \"nowrap\" as \"no-wrap\".\n */\n\nno-wrap = unquote('nowrap')\n\n/*\n * Helper to find out if a given value is a width\n */\n\nis-width(val)\n  if auto == val\n    return true\n  else if val && 'unit' == type(val)\n    // Stylus does not short circuit so we need to perform this as a distinct\n    // operation to prevent errors\n    return '' != unit(val)\n  return false\n\n/*\n * Vendor support for the given prop / arguments, optionally specifying the\n * only prefixes to utilize, or those which should be ignored.\n */\n\nvendor(prop, args, only = null, ignore = null, vendor-property = true)\n  need_normalize = !vendor-property or prop in ('transition' 'transition-property' 'border-image' 'border-image-slice')\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore)\n      if official == prefix\n        if need_normalize\n          {prop}: normalize(prop,('%s' % args))\n        else\n          {prop}: args\n      else\n        newprop = prop\n        newprop = '-' + prefix + '-' + prop if vendor-property\n\n        if need_normalize\n          {newprop}: normalize(prop,('%s' % args),prefix)\n        else\n          {newprop}: args\n/*\n * Vendorize the given value.\n */\n\nvendor-value(arg, only = null, ignore = null)\n  prop = current-property[0]\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore) or official == prefix\n      add-property(prop, '-%s-%s' % (prefix arg))\n  arg\n\n/*\n * Vendor \"box-shadow\" support.\n */\n\nbox-shadow()\n  vendor('box-shadow', arguments, only: webkit official)\n\n/*\n * Vendor \"user-select\" support.\n */\n\nuser-select()\n  vendor('user-select', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"column-count\" support.\n */\n\ncolumn-count()\n  vendor('column-count', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-gap\" support.\n */\n\ncolumn-gap()\n  vendor('column-gap', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule\" support.\n */\n\ncolumn-rule()\n  vendor('column-rule', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-color\" support.\n */\n\ncolumn-rule-color()\n  vendor('column-rule-color', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-width\" support.\n */\n\ncolumn-rule-width()\n  vendor('column-rule-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-style\" support.\n */\n\ncolumn-rule-style()\n  vendor('column-rule-style', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-width\" support.\n */\n\ncolumn-width()\n  vendor('column-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-span\" support.\n */\n\ncolumn-span()\n  vendor('column-span', arguments, only: webkit official)\n\n/*\n * Vendor \"column-fill\" support.\n */\n\ncolumn-fill()\n  vendor('column-fill', arguments, only: moz official)\n\n/*\n * Legacy syntax support for background-clip and background-origin\n */\n\nlegacy-bg-values(property, args)\n  legacy_args = ()\n  importance = unquote('')\n  for subargs in args\n    for arg in subargs\n      if arg in (border-box padding-box content-box)\n        arg = unquote('border')  if arg == border-box\n        arg = unquote('padding') if arg == padding-box\n        arg = unquote('content') if arg == content-box\n      if arg != '!important'\n        push(legacy_args,arg)\n      else\n        importance = !important\n  vendor(property, unquote(join(', ',legacy_args)) importance, only: moz webkit)\n\n/*\n * Vendor \"background-clip\" support.\n */\n\nbackground-clip()\n  if arguments[0] == text\n    vendor('background-clip', arguments, only: webkit)\n  else\n    legacy-bg-values('background-clip', arguments)\n    background-clip: arguments\n\n/*\n * Vendor \"background-origin\" support.\n */\n\nbackground-origin()\n  legacy-bg-values('background-origin', arguments)\n  background-origin: arguments\n\n/*\n * Vendor \"transform\" support.\n */\n\ntransform()\n  vendor('transform', arguments)\n\n/*\n * Vendor \"transform-origin\" support.\n */\ntransform-origin()\n    vendor('transform-origin', arguments)\n\n/*\n * Vendor \"transform-style\" support.\n */\n\ntransform-style()\n  vendor('transform-style', arguments)\n\n/*\n * Vendor \"border-image\" support.\n */\n\nborder-image()\n  vendor('border-image', arguments, only: webkit moz o official)\n\n/*\n * Vendor \"transition\" support.\n */\n\ntransition()\n  vendor('transition', arguments)\n\n/*\n * Vendor \"transition-property\" support.\n */\n\ntransition-property()\n  vendor('transition-property', arguments)\n\n/*\n * Vendor \"transition-duration\" support.\n */\n\ntransition-duration()\n  vendor('transition-duration', arguments)\n\n/*\n * Vendor \"transition-timing-function\" support.\n */\n\ntransition-timing-function()\n  vendor('transition-timing-function', arguments)\n\n/*\n * Vendor \"transition-delay\" support.\n */\n\ntransition-delay()\n  vendor('transition-delay', arguments)\n\n/*\n * Vendor \"backface-visibility\" support.\n */\n\nbackface-visibility()\n  vendor('backface-visibility', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"perspective\" support.\n */\n\nperspective()\n  if mixin\n    vendor('perspective', arguments, only: webkit moz ms official)\n  else\n    'perspective(%s)' % arguments\n\n/*\n * Vendor \"perspective-origin\" support.\n */\n\nperspective-origin()\n  vendor('perspective-origin', arguments, only: webkit moz ms official)\n\n/*\n * Opacity with conditional IE support.\n */\n\nopacity(n, args...)\n  opacity: n args\n  if support-for-ie\n    if n == inherit or n == initial\n      -ms-filter: n args\n      filter: n args\n    else\n      val = round(n * 100)\n      if val == 100\n        -ms-filter: none args\n        filter: none args\n      else\n        -ms-filter: '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=%s)\"' % val args\n        filter: 'alpha(opacity=%s)' % val args\n\n/*\n * Vendor \"text-size-adjust\"\n */\n\ntext-size-adjust()\n  vendor('text-size-adjust', arguments)\n\n/*\n * Alias the \"white-space\" property.\n */\n\nwhitespace()\n  white-space: arguments\n\n/*\n * Vendor \"box-sizing\" support.\n */\n\nbox-sizing()\n  vendor('box-sizing', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-orient\" support.\n */\n\nbox-orient()\n  vendor('box-orient', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-flex-group\" support.\n */\n\nbox-flex-group()\n  vendor('box-flex-group', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-ordinal-group\" support.\n */\n\nbox-ordinal-group()\n  vendor('box-ordinal-group', arguments, only: webkit moz ms official)\n\n\n/*\n * Vendor \"box-align\" support.\n */\n\nbox-align()\n  vendor('box-align', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-pack\" support.\n */\n\nbox-pack()\n  vendor('box-pack', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-direction\" support.\n */\n\nbox-direction()\n  vendor('box-direction', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"animation\" support.\n */\n\nanimation()\n  vendor('animation', arguments)\n\n\n/*\n * Vendor \"animation-name\" support.\n */\n\nanimation-name()\n  vendor('animation-name', arguments)\n\n/*\n * Vendor \"animation-duration\" support.\n */\n\nanimation-duration()\n  vendor('animation-duration', arguments)\n\n/*\n * Vendor \"animation-delay\" support.\n */\n\nanimation-delay()\n  vendor('animation-delay', arguments)\n\n/*\n * Vendor \"animation-direction\" support.\n */\n\nanimation-direction()\n  vendor('animation-direction', arguments)\n\n/*\n * Vendor \"animation-iteration-count\" support.\n */\n\nanimation-iteration-count()\n  vendor('animation-iteration-count', arguments)\n\n/*\n * Vendor \"animation-timing-function\" support.\n */\n\nanimation-timing-function()\n  vendor('animation-timing-function', arguments)\n\n/*\n * Vendor \"animation-play-state\" support.\n */\n\nanimation-play-state()\n  vendor('animation-play-state', arguments)\n\n/*\n * Vendor \"animation-fill-mode\" support.\n */\n\nanimation-fill-mode()\n  vendor('animation-fill-mode', arguments)\n\n/*\n * Vendor \"hyphens\" support.\n */\n\nhyphens()\n  vendor('hyphens', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"appearance\" support.\n */\n\nappearance()\n  vendor('appearance', arguments, only: webkit moz official)\n\n/*\n * Vendor \"tab-size\" support.\n */\n\ntab-size()\n  vendor('tab-size', arguments, only: moz o official)\n\n/*\n * Vendor \"overflow-scrolling\" support.\n */\n\noverflow-scrolling()\n  vendor('overflow-scrolling', arguments, only: webkit official)\n\n/*\n * Vendor \"text-overflow\" support, , -o- for opera 9.* - 10.*\n */\n\ntext-overflow()\n  vendor('text-overflow', arguments, only: official o)\n\n/*\n * Vendor \"text-size-adjust\" support.\n */\ntext-size-adjust()\n  vendor('text-size-adjust', arguments, only: official webkit ms)\n\n/*\n * Vendor \"font-smoothing\" support, webkit only.\n */\nfont-smoothing()\n  vendor('font-smoothing', arguments, only: webkit)\n\n\n/**\n * Vendor input-placeholder/placeholder support.\n *\n * Examples:\n *    // Default syntax\n *    body\n *      placeholder(color #333, font-weight normal)\n *\n *    // The comma is important\n *    .placeholder-red\n *      placeholder(color red,)\n *\n *    // We can pass a function\n *    green-placeholder()\n *      color green\n *    .placeholder-green\n *      placeholder(green-placeholder)\n *\n *    // We can pass a hash\n *    textarea\n *      placeholder((font-style italic) (font-weight bold) (padding '4px 10px'))\n */\nplaceholder()\n  for v in ':-webkit-input' '-moz' ':-moz' '-ms-input'\n    &:{v}-placeholder\n      for pair in arguments\n        if typeof(pair) == 'function'\n          pair()\n        else if pair is not null && pair[0] is not null\n          {pair[0]}: type(pair[1]) == 'string' ? s(pair[1]) : pair[1]\ninput-placeholder = placeholder\n\n/*\n * Vendor background support (gradients).\n */\n\nbackground()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background', arguments, vendor-property: false)\n  else\n    background arguments\n\nbackground-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background-image', arguments, vendor-property: false)\n  else\n    background-image arguments\n\ncursor()\n  if match('-gradient\\(', ''+arguments)\n    vendor('cursor', arguments, vendor-property: false)\n  else\n    cursor arguments\n\nlist-style()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style', arguments, vendor-property: false)\n  else\n    list-style arguments\n\nlist-style-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style-image', arguments, vendor-property: false)\n  else\n    list-style-image arguments\n","/*\n * Overflow utility. Maps to regular overflow, and adds an ellipsis value.\n *\n * Synopsis:\n *\n *   overflow: <type>\n *\n * Examples:\n *\n *     overflow: auto\n *     overflow: hidden\n *     overflow: ellipsis\n *\n */\n\noverflow()\n  if arguments[0] == ellipsis\n    ellipsis()\n  else\n    overflow: arguments\n","/*\n * Vendor \"display: flex\" support with fallback to obsolete versions.\n */\n\nflex-version ?= box flex\n\n//\n// 1. Display values\n//    - http://www.w3.org/TR/css3-flexbox/#flex-containers\n//\ndisplay(type, args...)\n  if flex == type || inline-flex == type\n    if box in flex-version\n      if flex == type\n        display: -ms-flexbox args\n        display: vendor-value(box args, only: moz webkit)\n      else\n        display: -ms-inline-flexbox args\n        display: vendor-value(inline-box args, only: moz webkit)\n    if flex in flex-version\n      display: vendor-value(arguments, only: webkit official) // overwrites old webkit\n  else\n    display: arguments\n\n/*\n * New syntax for browsers like Google Chrome.\n * Plus a translation to the old syntax, if possible.\n */\n\n\n//\n// 5. Ordering and Orientation\n//    - http://www.w3.org/TR/css3-flexbox/#ordering-and-orientation\n//\n-flex-obsolete-direction(direction)\n  if box in flex-version\n    if row-reverse == direction || column-reverse == direction\n      vendor('box-direction', reverse, ignore: ms official)\n\n    if row == direction || row-reverse == direction\n      vendor('box-orient', horizontal, ignore: ms official)\n    else if column == direction || column-reverse == direction\n      vendor('box-orient', vertical, ignore: ms official)\n\n-flex-obsolete-wrap(value)\n  if box in flex-version\n    // WARN: wrap-reverse does not have a box equivalent. This will render in different manners\n    //    on box vs. flex values.\n    if 'wrap' == value || wrap-reverse == value\n      vendor('box-lines', multiple, ignore: ms official)\n    else if nowrap == value\n      vendor('box-lines', single, ignore: ms official)\n\nflex-direction(direction)\n  // obsolete\n  -flex-obsolete-direction(direction)\n\n  // new\n  if flex in flex-version\n    vendor('flex-direction', arguments, only: webkit ms official)\n\nflex-wrap(value)\n  // obsolete\n  -flex-obsolete-wrap(value)\n\n  if flex in flex-version\n    vendor('flex-wrap', arguments, only: webkit ms official)\n\nflex-flow()\n  // obsolete\n  -flex-obsolete-direction(arguments[0])\n  -flex-obsolete-direction(arguments[1])\n  -flex-obsolete-wrap(arguments[0])\n  -flex-obsolete-wrap(arguments[1])\n\n  // new\n  if flex in flex-version\n    vendor('flex-flow', arguments, only: webkit ms official)\n\n\norder()\n  // obsolete\n  if box in flex-version\n    vendor('box-ordinal-group', arguments, ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-order', arguments, only: ms)\n    vendor('order', arguments, only: webkit official)\n\n\n//\n// 7. Flexibility\n//    - http://www.w3.org/TR/css3-flexbox/#flexibility\n//\nflex-grow(growth)\n  // obsolete\n  if box in flex-version\n    vendor('box-flex', growth)\n\n  // new\n  if flex in flex-version\n    vendor('flex-grow', arguments, only: webkit official)\n\nflex-basis()\n  if flex in flex-version\n    vendor('flex-basis', arguments, only: webkit official)\n\nflex-shrink()\n  if flex in flex-version\n    vendor('flex-shrink', arguments, only: webkit official)\n\nflex(growth)\n\n  // obsolete\n  if box in flex-version\n    shrink = 1\n\n    if none == growth || initial == growth\n      // Well known values\n      shrink = 0 if none == growth\n      growth = 0\n    else if is-width(growth) == true\n      // Basis is defined as the first parameter\n      growth = arguments[1] || 0\n      shrink = arguments[2] if 3 <= length(arguments)\n    else if arguments[1] && is-width(arguments[1]) == false\n      // Growth is first and shrink is second\n      shrink = arguments[1]\n\n    // Since we can't make the distinction between growing and shrinking in the box model, take\n    // the one that provides the most flexibility.\n    vendor('box-flex', max(growth, shrink), ignore: ms)\n\n  // new\n  if flex in flex-version\n    vendor('flex', arguments, only: webkit ms official)\n\n\n// converts the justification alignment\n-convert-justify(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else if space-around == align\n    return distribute\n  else if space-between == align\n    return justify\n  else\n    return align\n\n//\n// 8. Alignment\n//    - http://www.w3.org/TR/css3-flexbox/#alignment\n//\njustify-content(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-pack', -convert-justify(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-pack', -convert-justify(align), only: ms)\n    vendor('justify-content', align, only: webkit official)\n\nalign-content(align)\n  // WARN: Obsolete spec does not allow for adjustment here\n  if flex in flex-version\n    vendor('flex-line-pack', -convert-justify(align), only: ms)\n    vendor('align-content', align, only: webkit official)\n\n// converts alignment from 'flex' to normal value\n-convert-alignment(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else\n    return align\n\nalign-items(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-align', -convert-alignment(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-align', -convert-alignment(align), only: ms)\n    vendor('align-items', arguments, only: webkit official)\n\nalign-self(align)\n  // WARN: Obsolete spec does not allow for overriding alignment on individual items.\n  if flex in flex-version\n    vendor('align-self', align, only: webkit official)\n    vendor('flex-item-align', -convert-alignment(align), only: ms)\n","/*\n * border: <color>\n * border: ...\n */\n\nborder(color, args...)\n  if color is a 'color'\n    border: 1px solid color args\n  else\n    border: arguments\n"],sourceRoot:""}]);let w=m},2923(e,t,n){var i=n(8899),o=n(4897),a=function(e){"use strict";if(!(this instanceof a))return new a;o.call(this,e);var t=this,n=null,i=[],s=this._exit,l=this.geoTrigger,u=this.addPromise,c=this.removePromise;return this.addPromise=function(e){return n&&n.addPromise(e),u(e),t},this.removePromise=function(e){return n&&n.removePromise(e),c(e),t},this.parent=function(e){return void 0===e?n:(n=e,t)},this.addChild=function(e){return Array.isArray(e)?e.forEach(t.addChild):(e.parent(t),i.push(e)),t},this.removeChild=function(e){return Array.isArray(e)?e.forEach(t.removeChild):i=i.filter(function(t){return t!==e}),t},this.children=function(){return i.slice()},this.draw=function(e){return t.children().forEach(function(t){t.draw(e)}),t},this.geoTrigger=function(e,o,a){var s;return s=(o=o||{}).geo||{},o.geo=s,s.stopPropagation||(!a&&n&&s._triggeredBy!==n?(s._triggeredBy=t,n.geoTrigger(e,o)):(l.call(t,e,o),s.stopPropagation||i.forEach(function(n){n.geoTrigger&&(s._triggeredBy=t,n.geoTrigger(e,o))}))),t},this._exit=function(){i=[],n=null,s()},this};i(a,o),e.exports=a},2935(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(4504),s=n(6732),l=n(4341),u=function(e){"use strict";if(!(this instanceof u))return new u(e);a.call(this,e),n(6062).call(this);var t,i,o,c,d,f,p=n(4128),h=this,m=this._init,g=this._update,v=s();return this._computeGradient=function(){var e,t,n,i,o;if(o=h.style("color"),!h._grad||h._gradColors!==o){for(t in i=(n=(e=document.createElement("canvas")).getContext("2d")).createLinearGradient(0,0,0,256),e.width=1,e.height=256,o)i.addColorStop(t,l.convertColorToRGBA(o[t]));n.fillStyle=i,n.fillRect(0,0,1,256),h._grad=n.getImageData(0,0,1,256).data,h._gradColors=o}return h},this._createCircle=function(){var e,t,n,i,o,a,s;if(n=h.style("radius"),o=h.style("blurRadius"),a=h.style("gaussian"),(s=h.style("scaleWithZoom"))&&(n*=s=Math.pow(2,this.layer().map().zoom()),o*=s),!h._circle||h._circle.gaussian!==a||h._circle.radius!==n||h._circle.blurRadius!==o){if(t=(e=h._circle=document.createElement("canvas")).getContext("2d"),e.width=e.height=2*(i=o+n),a){var l=t.createRadialGradient(i,i,0,i,i,i);l.addColorStop(0,"rgba(255,255,255,1)"),l.addColorStop(.1,"rgba(255,255,255,0.946)"),l.addColorStop(.2,"rgba(255,255,255,0.801)"),l.addColorStop(.3,"rgba(255,255,255,0.607)"),l.addColorStop(.4,"rgba(255,255,255,0.411)"),l.addColorStop(.5,"rgba(255,255,255,0.249)"),l.addColorStop(.6,"rgba(255,255,255,0.135)"),l.addColorStop(.7,"rgba(255,255,255,0.066)"),l.addColorStop(.8,"rgba(255,255,255,0.029)"),l.addColorStop(.9,"rgba(255,255,255,0.011)"),l.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=l,t.fillRect(0,0,2*i,2*i)}else t.shadowOffsetX=t.shadowOffsetY=2*i,t.shadowBlur=o,t.shadowColor="black",t.beginPath(),t.arc(-i,-i,n,0,2*Math.PI,!0),t.closePath(),t.fill();e.radius=n,e.blurRadius=o,e.gaussian=a,h._circle=e}return h},this._colorize=function(e,n){var a,s,l,u=new Uint32Array(n.buffer),c=e.length;for(t&&t.length===c||(i=new Uint8ClampedArray(t=new ArrayBuffer(c)),o=new Uint32Array(t)),a=3,l=0;a<c;a+=4,l+=1)(s=e[a])&&(o[l]=u[s]);e.set(i)},this._renderPoints=function(e,t,n,i){var o,a,s,l=h.gcsPosition(),u=h.intensity(),c=h.minIntensity(),d=h.maxIntensity()-c||1;for(o=n.length-1;o>=0;o-=1)a=t.worldToDisplay(l[o]),(s=(u(n[o],o)-c)/d)<=0||(e.globalAlpha=s<.01?.01:s>1?1:s,e.drawImage(h._circle,a.x-i,a.y-i))},this._renderBinnedData=function(e,t,n,i,o){var a,s,l,u,c,d,f,p,m=h.gcsPosition(),g=h.intensity(),v=h.minIntensity(),y=h.maxIntensity()-v||1,b=t.size(),x=[],w=Math.ceil(i/o),A=Math.ceil(b.width/o)+2*w+2,C=Math.ceil(b.height/o)+2*w+2,S=n.length;for(a=0;a<S;a+=1){if(!(isNaN((s=t.worldToDisplay(m[a])).x)||isNaN(s.y)))void 0===f&&(f=(s.x%o+o)%o,p=(s.y%o+o)%o),!((u=Math.floor((s.x-f)/o)+w+1)<0||u>=A||(c=Math.floor((s.y-p)/o)+w+1)<0||c>=C)&&((l=(g(n[a],a)-v)/y)<=0||(l>1&&(l=1),x[c]=x[c]||[],u*=4,(d=x[c])[u]?(d[u]+=l,d[u+1]+=(1-d[u+1])*l,d[u+2]+=s.x*l,d[u+3]+=s.y*l):(d[u]=d[u+1]=l,d[u+2]=s.x*l,d[u+3]=s.y*l)))}for(c=x.length-1;c>=0;c-=1)if(d=x[c])for(u=d.length-4;u>=0;u-=4)d[u]&&(e.globalAlpha=(l=d[u+1])<.01?.01:l>1?1:l,e.drawImage(h._circle,d[u+2]/d[u]-i,d[u+3]/d[u]-i))},this._renderOnCanvas=function(e,t){if(v.timestamp()<h.buildTime().timestamp()){var n,i,o=Date.now(),a=h.data()||[],s=h.style("radius")+h.style("blurRadius"),l=h.binned(),u=h.layer(),p=t.size();h.style("scaleWithZoom")&&(s*=Math.pow(2,t.zoom())),(!0===l||"auto"===l)&&(l=Math.max(Math.floor(s/8),Math.max(1.5,Math.min(3,s/2.5))),"auto"===h.binned()&&Math.ceil((p.width+2*s)/l)*Math.ceil((p.height+2*s)/l)>=a.length&&(l=0)),(l<1||isNaN(l))&&(l=!1),h._binned=l,e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,p.width,p.height),d="",s>.5&&s<8192&&(t.scheduleAnimationFrame(h._setTransform,!1),u.canvas().css({transform:""}),h._createCircle(),h._computeGradient(),l?h._renderBinnedData(e,t,a,s,l):h._renderPoints(e,t,a,s),n=u.canvas()[0],i=e.getImageData(0,0,n.width,n.height),h._colorize(i.data,h._grad),e.putImageData(i,0,0)),c={zoom:t.zoom(),gcsOrigin:t.displayToGcs({x:0,y:0},null),rotation:t.rotation(),lastScale:void 0,lastOrigin:{x:0,y:0},lastRotation:void 0},v.modified(),u.renderer().clearCanvas(!1),f=Date.now()-o}return h},this._init=function(){return m.call(h,e),h.geoOn(p.pan,h._animatePan),h},this._update=function(){return g.call(h),(h.buildTime().timestamp()<=h.dataTime().timestamp()||h.updateTime().timestamp()<h.timestamp())&&h._build(),h.updateTime().modified(),h},this._setTransform=function(){h.layer()&&h.layer().canvas()&&h.layer().canvas()[0]&&(h.layer().canvas()[0].style.transform=d)},this._animatePan=function(){if(c){var e=h.layer().map(),t=Math.pow(2,e.zoom()-c.zoom),n=e.gcsToDisplay(c.gcsOrigin,null),i=e.rotation();if(c.lastScale!==t||c.lastOrigin.x!==n.x||c.lastOrigin.y!==n.y||c.lastRotation!==i){var o=" translate("+n.x+"px,"+n.y+"px) scale("+t+") rotate("+(i-c.rotation)*180/Math.PI+"deg)";if(e.scheduleAnimationFrame(h._setTransform),d=o,c.lastScale=t,c.lastOrigin.x=n.x,c.lastOrigin.y=n.y,c.lastRotation=i,c.timeout&&(window.clearTimeout(c.timeout),c.timeout=void 0),1!==parseFloat(t.toFixed(4))||0!==parseFloat((i-c.rotation).toFixed(4))||0!==parseFloat(n.x.toFixed(1))||0!==parseFloat(n.y.toFixed(1))){var a=h.updateDelay();a=a<0&&f?f-Math.floor(1e3/60*a):f?2*f:100,c.timeout=window.setTimeout(function(){c.timeout=void 0,h.buildTime().modified(),h.layer().draw()},h.updateDelay())}}}},h._init(e),this};i(u,a),o("canvas","heatmap",u),e.exports=u},2945(e,t,n){"use strict";function i(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function l(n,i,a,s){var l=Object.create((i&&i.prototype instanceof c?i:c).prototype);return o(l,"_invoke",function(n,i,o){var a,s,l,c=0,d=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return a=t,s=0,l=e,p.n=n,u}};function h(n,i){for(s=n,l=i,t=0;!f&&c&&!o&&t<d.length;t++){var o,a=d[t],h=p.p,m=a[2];n>3?(o=m===i)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=h&&((o=n<2&&h<a[1])?(s=0,p.v=i,p.n=a[1]):h<m&&(o=n<3||a[0]>i||i>m)&&(a[4]=n,a[5]=i,p.n=m,s=0))}if(o||n>1)return u;throw f=!0,i}return function(o,d,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===d&&h(d,m),s=d,l=m;(t=s<2?e:l)||!f;){a||(s?s<3?(s>1&&(p.n=-1),h(s,l)):p.n=l:p.v=l);try{if(c=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(f=p.n<0)?l:n.call(i,p))!==u)break}catch(t){a=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(n,a,s),!0),l}var u={};function c(){}function d(){}function f(){}t=Object.getPrototypeOf;var p=f.prototype=c.prototype=Object.create([][a]?t(t([][a]())):(o(t={},a,function(){return this}),t));function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=f,o(p,"constructor",f),o(f,"constructor",d),d.displayName="GeneratorFunction",o(f,s,"GeneratorFunction"),o(p),o(p,s,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(i=function(){return{w:l,m:h}})()}function o(e,t,n,i){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(o=function(e,t,n,i){function s(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(s("next",0),s("throw",1),s("return",2))})(e,t,n,i)}function a(e,t,n,i,o,a,s){try{var l=e[a](s),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(i,o)}n.d(t,{A:()=>l,f:()=>c});var s={};function l(e,t,n){var i,o,a,l,c,d,f,m,g,v,y,b,x;return t instanceof ArrayBuffer?(i=e,o=t,l=!0,void 0!==(a=n)&&!1===a.includeErrorFields&&(l=!1),v=11!==(d=(c=g=new DataView(o)).getInt32(8,!1))&&(11!==(d=c.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0),y=(f=g,m=v,{nFields:f.getInt32(8,m),nSubgridFields:f.getInt32(24,m),nSubgrids:f.getInt32(40,m),shiftType:h(f,56,64).trim(),fromSemiMajorAxis:f.getFloat64(120,m),fromSemiMinorAxis:f.getFloat64(136,m),toSemiMajorAxis:f.getFloat64(152,m),toSemiMinorAxis:f.getFloat64(168,m)}),b=function(e,t,n,i){for(var o=176,a=[],s=0;s<t.nSubgrids;s++){var l,u,c,d=(l=e,u=o,c=n,{name:h(l,u+8,u+16).trim(),parent:h(l,u+24,u+24+8).trim(),lowerLatitude:l.getFloat64(u+72,c),upperLatitude:l.getFloat64(u+88,c),lowerLongitude:l.getFloat64(u+104,c),upperLongitude:l.getFloat64(u+120,c),latitudeInterval:l.getFloat64(u+136,c),longitudeInterval:l.getFloat64(u+152,c),gridNodeCount:l.getInt32(u+168,c)}),f=function(e,t,n,i,o){var a=t+176,s=16;!1===o&&(s=8);for(var l=[],u=0;u<n.gridNodeCount;u++){var c={latitudeShift:e.getFloat32(a+u*s,i),longitudeShift:e.getFloat32(a+u*s+4,i)};!1!==o&&(c.latitudeAccuracy=e.getFloat32(a+u*s+8,i),c.longitudeAccuracy=e.getFloat32(a+u*s+12,i)),l.push(c)}return l}(e,o,d,n,i),m=Math.round(1+(d.upperLongitude-d.lowerLongitude)/d.longitudeInterval),g=Math.round(1+(d.upperLatitude-d.lowerLatitude)/d.latitudeInterval);a.push({ll:[p(d.lowerLongitude),p(d.lowerLatitude)],del:[p(d.longitudeInterval),p(d.latitudeInterval)],lim:[m,g],count:d.gridNodeCount,cvs:f.map(function(e){return[p(e.longitudeShift),p(e.latitudeShift)]})});var v=16;!1===i&&(v=8),o+=176+d.gridNodeCount*v}return a}(g,y,v,l),x={header:y,subgrids:b},s[i]=x,x):{ready:function(e,t){return u.apply(this,arguments)}(e,t)}}function u(){var e;return e=i().m(function e(t,n){var o,a,l,u,c,d,h,m,g,v,y,b,x,w,A,C,S;return i().w(function(e){for(;;)switch(e.n){case 0:return o=[],e.n=1,n.getImageCount();case 1:l=(a=e.v)-1;case 2:if(!(l>=0)){e.n=6;break}return e.n=3,n.getImage(l);case 3:return u=e.v,e.n=4,u.readRasters();case 4:for(c=e.v,d=[u.getWidth(),u.getHeight()],h=u.getBoundingBox().map(f),m=[u.fileDirectory.ModelPixelScale[0],u.fileDirectory.ModelPixelScale[1]].map(f),g=h[0]+(d[0]-1)*m[0],v=h[3]-(d[1]-1)*m[1],y=c[0],b=c[1],x=[],w=d[1]-1;w>=0;w--)for(A=d[0]-1;A>=0;A--)C=w*d[0]+A,x.push([-p(b[C]),p(y[C])]);o.push({del:m,lim:d,ll:[-g,v],cvs:x});case 5:l--,e.n=2;break;case 6:return S={header:{nSubgrids:a},subgrids:o},s[t]=S,e.a(2,S)}},e)}),(u=function(){var t=this,n=arguments;return new Promise(function(i,o){var s=e.apply(t,n);function l(e){a(s,i,o,l,u,"next",e)}function u(e){a(s,i,o,l,u,"throw",e)}l(void 0)})}).apply(this,arguments)}function c(e){return void 0===e?null:e.split(",").map(d)}function d(e){if(0===e.length)return null;var t="@"===e[0];return(t&&(e=e.slice(1)),"null"===e)?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:s[e]||null,isNull:!1}}function f(e){return e*Math.PI/180}function p(e){return e/3600*Math.PI/180}function h(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}},2946(e,t,n){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var a=n(8899),s=n(8525),l=n(3508),u=n(4128),c=n(5933),d=n(5204),f=n(4692),p=n(6411),h=n(2227),m=n(397),g=function(e){"use strict";if(!(this instanceof g))return new g(e);s.call(this,e);var t,o,a,v,y=n(6001),b=n(6732),x=n(4341),w=this,A=this._init,C=this._exit,S=this.draw,_=this._update,T=b(),O=null,P=[],M={},E=[],D={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}},I={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};return h.usedStyles.forEach(function(e){D[e]={option:"labelStyle",dataType:I[e]||"text",keys:[e,"label"+e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+e.replace(/([A-Z])/g,"-$1").toLowerCase()]}}),t=x.deepMerge({},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointCollinearity:Math.PI/180,continuousCloseProximity:10,finalPointProximity:10,showLabels:!0,clickToEdit:!1},e),this._processAction=function(e){var t;if(e.state&&e.state.actionRecord&&e.state.actionRecord.owner===l.actionOwner&&w.currentAnnotation)switch(w.mode()){case w.modes.edit:t=w.currentAnnotation.processEditAction(e),w.currentAnnotation&&w.currentAnnotation._editHandle&&w.currentAnnotation._editHandle.handle&&(w.geoTrigger(u.annotation.edit_action,{annotation:w.currentAnnotation,handle:w.currentAnnotation._editHandle?w.currentAnnotation._editHandle.handle:void 0,action:e.event}),e.event===u.actionup&&w._selectEditHandle({data:w.currentAnnotation._editHandle.handle},w.currentAnnotation._editHandle.handle.selected));break;case w.modes.cursor:w.currentAnnotation._cursorHandleMousemove(e.mouse),t=w.currentAnnotation.processAction(e),w.geoTrigger(u.annotation.cursor_action,{annotation:w.currentAnnotation,operation:w.currentBooleanOperation(),evt:e});break;default:t=w.currentAnnotation.processAction(e)}w._updateFromEvent(t)},this.currentBooleanOperation=function(){var e;return w._currentBooleanClass&&(e=w._currentBooleanClass.split("-")[1]),e},this._handleBooleanOperation=function(){var e=w.currentBooleanOperation();if(e&&w.currentAnnotation&&(w.currentAnnotation.toPolygonList||"cut"===e&&w.currentAnnotation instanceof m)){var t=w.currentAnnotation;if(w.removeAnnotation(w.currentAnnotation,!1),w.annotations().length||"difference"!==e&&"intersect"!==e){var n={annotation:t,operation:e};w.geoTrigger(u.annotation.boolean,n),!1!==n.cancel&&("cut"!==e?x.polyops[e](w,t.toPolygonList(),{correspond:{},keepAnnotations:"exact",style:w}):w.cutOperation(t))}}},this._extendLine=function(e,t,n){var i,o=t[0]-e[0],a=t[1]-e[1];if(!o&&!a)return e;var s=((o>0?n.min.x:n.max.x)-e[0])/(o||1);if(s<0){var l=e[1]+s*a;l>=n.min.y&&l<=n.max.y&&(i=[o>0?n.min.x:n.max.x,l])}if((s=((a>0?n.min.y:n.max.y)-e[1])/(a||1))<0){var u=e[0]+s*o;u>=n.min.x&&u<=n.max.x&&(!i||s<(n.min.x-e[0])/o)&&(i=[u,a>0?n.min.y:n.max.y])}return i},this._cutLineToPoly=function(e){for(var t,n=e.coordinates(null).map(function(e){return[e.x,e.y]}),i=0;i<n.length;i+=1){var o=n[i][0],a=n[i][1];i||(t={min:{x:o,y:a},max:{x:o,y:a}}),o<t.min.x&&(t.min.x=o),a<t.min.y&&(t.min.y=a),o>t.max.x&&(t.max.x=o),a>t.max.y&&(t.max.y=a)}for(var s=w.toPolygonList(),l=0;l<s.length;l+=1)for(var u=0;u<s[l].length;u+=1)for(var c=0;c<s[l][u].length;c+=1){var d=s[l][u][c][0],f=s[l][u][c][1];d<t.min.x&&(t.min.x=d),f<t.min.y&&(t.min.y=f),d>t.max.x&&(t.max.x=d),f>t.max.y&&(t.max.y=f)}if(w.annotations().forEach(function(e){if(e instanceof m)for(var n=e.coordinates(null),i=0;i<n.length;i+=1){var o=n[i].x,a=n[i].y;o<t.min.x&&(t.min.x=o),a<t.min.y&&(t.min.y=a),o>t.max.x&&(t.max.x=o),a>t.max.y&&(t.max.y=a)}}),void 0===t||t.min.x===t.max.x||t.min.y===t.max.y)return[];t={min:{x:t.min.x-(t.max.x-t.min.x)*.01,y:t.min.y-(t.max.y-t.min.y)*.01},max:{x:t.max.x+(t.max.x-t.min.x)*.01,y:t.max.y+(t.max.y-t.min.y)*.01}},n[0]=w._extendLine(n[0],n[1],t),n[n.length-1]=w._extendLine(n[n.length-1],n[n.length-2],t);for(var p=n.slice(),h=[[t.min.x,t.min.y],[t.max.x,t.min.y],[t.max.x,t.max.y],[t.min.x,t.max.y]],g=p.length-1,v=p[g][0]===t.min.x?0:p[g][1]===t.min.y?1:p[g][0]===t.max.x?2:3,y=p[0][0]===t.min.x?0:p[0][1]===t.min.y?1:p[0][0]===t.max.x?2:3,b=v;b%4!==y;b+=1)p.push(h[b%4]);return[[p]]},this.cutOperation=function(e){var t,n=e instanceof m?this._cutLineToPoly(e):e.toPolygonList(),o=w.annotations(),a={poly2:n,correspond:{},keepAnnotations:"exact",style:{fromPolygonList:function(e,n){t=e}}};a.poly1=w.toPolygonList(a),x.polyops.difference(a),x.polyops.intersect(w,n,{correspond:{},keepAnnotations:"exact",style:w});var s=(a.annotationIndices||{})[w.id()],l=a.correspond.poly1,u=a.correspond.exact1;t.forEach(function(e,t){for(var n,a={vertices:1===(e=e.map(function(e){return e.map(function(e){return{x:e[0],y:e[1]}})})).length?e[0]:{outer:e[0],inner:e.slice(1)}},d=0;d<l.length;d+=1)if(n=function(){if(l[d]&&l[d].indexOf(t)>=0){var e=o[s[d]];return u[d]&&u[d].indexOf(t)>=0?w.addAnnotation(e,w.map().gcs(),!1):(["name","description","label"].forEach(function(t){e[t](void 0,!0)&&(a[t]=e[t](void 0,!0))}),Object.entries(e.options()).forEach(function(e){var t=i(e,2),n=t[0],o=t[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(a[n]=o)}),w.addAnnotation(c.createAnnotation("polygon",a),w.map().gcs(),!1)),{v:void 0}}}())return n.v;w.addAnnotation(c.createAnnotation("polygon",a),w.map().gcs(),!1)})},this._updateFromEvent=function(e){switch(e){case"remove":w.removeAnnotation(w.currentAnnotation,!1),w.mode(null);break;case"done":w._handleBooleanOperation(),w.mode(null)}e&&(w.modified(),w.draw())},this._handleMouseMoveModifiers=function(e){var t=w.currentAnnotation.options("allowBooleanOperations");if(w.mode()!==w.modes.edit&&t&&(w.currentAnnotation._coordinates().length<2||w.mode()===w.modes.cursor)&&e.modifiers){var n=(e.modifiers.shift?"s":"")+(e.modifiers.ctrl?"c":"")+(e.modifiers.meta||e.modifiers.alt?"a":"");if(""===n&&!w._currentBooleanClass)return;var i=Object.keys(w._booleanClasses).find(function(e){return w._booleanClasses[e].includes(n)&&(!0===t||t.includes(e))});if(w._currentBooleanClass===i)return;w._currentBooleanClass=i;var o=w.map().node();Object.keys(w._booleanClasses).forEach(function(e){o.toggleClass(e,i===e)})}},this._handleMouseMove=function(e){w.mode()&&w.currentAnnotation&&(w._handleMouseMoveModifiers(e),w.currentAnnotation.mouseMove(e)&&(w.modified(),w.draw()))},this._selectEditHandle=function(e,t){if(e.data&&e.data.editHandle){if(f.each(E[l._editHandleFeatureLevel],function(e,t){t.feature.modified()}),w.currentAnnotation.selectEditHandle(e.data,t),w.draw(),w.map().node().toggleClass("annotation-input",!!t),w.map().interactor().removeAction(void 0,void 0,l.actionOwner),t){var n=w.currentAnnotation.actions(l.state.edit);f.each(n,function(e,t){w.map().interactor().addAction(t)})}return w}},this._handleMouseOn=function(e){e.data&&e.data.annotation&&(w.mode()===w.modes.edit&&w.currentAnnotation?w._selectEditHandle(e,!0):!w.mode()&&!w.currentAnnotation&&w.options("clickToEdit")&&(e.data.annotation.state(l.state.highlight),w.modified(),w.draw()))},this._handleMouseOff=function(e){if(e.data&&e.data.annotation){if(w.mode()===w.modes.edit&&e.data.editHandle&&e.data.selected)return void w._selectEditHandle(e,!1);e.data.annotation.state()===l.state.highlight&&(e.data.annotation.state(l.state.done),w.modified(),w.draw())}},this._handleMouseClick=function(e){var t,n=!1;if(w.mode()===w.modes.edit){if(w.map().interactor().hasAction(void 0,void 0,l.actionOwner)){t=w.currentAnnotation.mouseClickEdit(e),w._updateFromEvent(t);return}w.mode(null),w.draw(),f.each(E,function(e,t){f.each(t,function(e,t){t.feature._clearSelectedFeatures()})}),n=!0}else if(w.mode()&&w.currentAnnotation)w._handleMouseMoveModifiers(e),t=w.currentAnnotation.mouseClick(e),w._updateFromEvent(t),n=!w.mode(),w.mode()===w.modes.cursor&&w.geoTrigger(u.annotation.cursor_click,{annotation:w.currentAnnotation,operation:w.currentBooleanOperation(),evt:e});else if(!w.mode()&&!w.currentAnnotation&&w.options("clickToEdit")){var i=w.annotations().filter(function(e){return e.state()===l.state.highlight});if(1!==i.length)return;w.mode(w.modes.edit,i[0]),w.draw(),n=!0}n&&w.map().interactor().retriggerMouseMove()},this.options=function(e,n){return void 0===e?t:"string"==typeof e&&void 0===n?t[e]:(void 0===n?t=x.deepMerge(t,e):t[e]=n,w.modified(),w)},this.displayDistance=function(e,t,n,i){var o=w.map();return"display"!==t&&(t=null===t?o.gcs():void 0===t?o.ingcs():t,e=o.gcsToDisplay(e,t)),"display"!==i&&(i=null===i?o.gcs():void 0===i?o.ingcs():i,n=o.gcsToDisplay(n,i)),Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))},this.addAnnotation=function(e,t,n,i){if(void 0===M[e.id()]){for(;w.annotationById(e.id());)e.newId();!1!==i&&w.geoTrigger(u.annotation.add_before,{annotation:e}),P.push(e),M[e.id()]=e,e.layer(w);var o=w.map();(t=null===t?o.gcs():void 0===t?o.ingcs():t)!==o.gcs()&&e._convertCoordinates(t,o.gcs()),!1!==n&&(w.modified(),w.draw()),!1!==i&&w.geoTrigger(u.annotation.add,{annotation:e})}return w},this.addMultipleAnnotations=function(e,t,n){var i=[];w.geoTrigger(u.annotation.add_before,{annotations:e});for(var o=0;o<e.length;o+=1){var a=e[o];void 0===M[a.id()]&&(this.addAnnotation(a,t,n,!1),i.push(a))}return i.length&&w.geoTrigger(u.annotation.add,{annotations:i}),w},this.removeAnnotation=function(e,t,n,i){return!!e.id&&void 0!==M[e.id()]&&(n=P.indexOf(e),e===w.currentAnnotation&&(w.currentAnnotation=null),void 0!==M[e.id()]&&delete M[e.id()],e._exit(),P.splice(n,1),!1!==t&&(w.modified(),w.draw()),!1!==i&&w.geoTrigger(u.annotation.remove,{annotation:e}),!0)},this.removeAllAnnotations=function(e,t,n){for(var i,o=0,a=P.length-1;a>=0;a-=1)i=P[a],e&&i.state()===l.state.create||(w.removeAnnotation(i,!1,a,n),o+=1);return o&&!1!==t&&(w.modified(),w.draw()),o},this.annotations=function(){return P.slice()},this.annotationById=function(e){return null!=e&&(e*=1),M[e]},this.modes={edit:"edit",cursor:"cursor"},this._booleanClasses={"annotation-union":["s"],"annotation-intersect":["sc"],"annotation-difference":["c"],"annotation-xor":["sa"],"annotation-cut":["c","ca"]},this.mode=function(e,t,n,i){if(void 0===e)return O;if(e!==O||(e===w.modes.edit||e===w.modes.cursor)&&t!==w.editAnnotation||e!==w.modes.edit&&e!==w.modes.cursor&&e&&!w.currentAnnotation){var o,a,s,d,h=w.map().node(),m=O;if(O=e,h.toggleClass("annotation-input",!!(O&&O!==w.modes.edit&&O!==w.modes.cursor)),O&&O!==w.modes.edit||(Object.keys(w._booleanClasses).forEach(function(e){return h.toggleClass(e,!1)}),w._currentBooleanClass=void 0),v||(v=p(h[0])),O?v.bind("esc",function(){w.mode(null,void 0,void 0,"escape")}):v.unbind("esc"),w.currentAnnotation){switch(o=w.currentAnnotation.state(),a=w.currentAnnotation._copyOfCoordinates(),w.currentAnnotation.state()){case l.state.create:w.removeAnnotation(w.currentAnnotation);break;case l.state.edit:w.currentAnnotation.state(l.state.done),w.modified(),w.draw();break;case l.state.cursor:w.currentAnnotation.state(l.state.done),w.modified(),w.draw(),w.map().node().toggleClass("annotation-cursor",!1)}w.currentAnnotation=null}O===w.modes.edit?(w.currentAnnotation=t,w.currentAnnotation.state(l.state.edit),w.modified()):O===w.modes.cursor?(w.currentAnnotation=t,w.currentAnnotation.state(l.state.cursor),w.modified(),w.map().node().toggleClass("annotation-cursor",!0),d=w.currentAnnotation.actions(l.state.cursor)):c.registries.annotations[O]&&(s=c.registries.annotations[O].func),w.map().interactor().removeAction(void 0,void 0,l.actionOwner),s&&(n=Object.assign({},n||{},{state:l.state.create,layer:w}),w.currentAnnotation=s(n),w.addAnnotation(w.currentAnnotation,null),d=w.currentAnnotation.actions(l.state.create)),d&&f.each(d,function(e,t){w.map().interactor().addAction(t)}),w.geoTrigger(u.annotation.mode,{mode:O,oldMode:m,oldState:o,oldCoordinates:a,reason:i}),(m===w.modes.edit||m===w.modes.cursor)&&w.modified()}return w},this.geojson=function(e,t,i,o){if(void 0!==e){var a=c.createFileReader("geojsonReader",{layer:w,lineStyle:n(397).defaults.style,pointStyle:n(2071).defaults.style,polygonStyle:n(3183).defaults.style});if(!a.canRead(e))return;return!0===t&&w.removeAllAnnotations(!0,!1),"update"===t&&f.each(w.annotations(),function(e,t){t.options("updated",!1)}),a.read(e,function(e){f.each(e.slice(),function(e,t){w._geojsonFeatureToAnnotation(t,i),w.deleteFeature(t)})}),"update"===t&&f.each(w.annotations(),function(e,t){!1===t.options("updated")&&t.state()===l.state.done&&w.removeAnnotation(t,!1)}),w.modified(),w.draw(),P.length}e=null;var s=[];return f.each(P,function(e,t){var n=t.geojson(i,o);n&&s.push(n)}),s.length&&(e={type:"FeatureCollection",features:s}),e},this._geojsonFeatureToAnnotation=function(e,t){var n=e.data(),i=c.listAnnotations(),o=w.map();t=null===t?o.gcs():void 0===t?o.ingcs():t,f.each(n,function(n,a){var s,p,h,m,g=(a.properties||{}).annotationType||e.featureType,v=Object.assign({},a.properties||{});if(i.includes(g)){switch(v.style=v.style||{},v.labelStyle=v.labelStyle||{},delete v.annotationType,e.featureType){case"line":if(!(s=e.line()(a,n))||s.length<2)return;s=s.slice();break;case"polygon":if(!(s=e.polygon()(a,n))||!s.outer||s.outer.length<3||(s={outer:s.outer.slice(),inner:(s.inner||[]).map(function(e){return e.slice()})}).outer[s.outer.length-1][0]===s.outer[0][0]&&s.outer[s.outer.length-1][1]===s.outer[0][1]&&(s.outer.splice(s.outer.length-1,1),s.outer.length<3))return;s.inner.forEach(function(e){e.length>3&&e[e.length-1][0]===e[0][0]&&e[e.length-1][1]===e[0][1]&&e.splice(e.length-1,1)}),s.inner&&s.inner.length||(s=s.outer);break;case"marker":s=a.geometry.coordinates[0].slice(0,4);break;case"point":s=[e.position()(a,n)]}p=a.crs&&"name"===a.crs.type&&a.crs.properties&&"proj4"===a.crs.properties.type&&a.crs.properties.name?a.crs.properties.name:t,[s.outer||s].concat(s.inner||[]).forEach(function(e){for(h=0;h<e.length;h+=1)e[h]=x.normalizeCoordinates(e[h]);if(p!==o.gcs()){var t=d.transformCoordinates(p,o.gcs(),e);for(h=0;h<e.length;h+=1)e[h]=t[h]}}),v.coordinates=s,f.each(D,function(t,i){var o;f.each(i.keys,function(e,t){void 0===o&&(o=w.validateAttribute(v[t],i.dataType))}),void 0===o&&(o=w.validateAttribute(e.style.get(t)(a,n),i.dataType)),void 0!==o&&(v[i.option||"style"][t]=o)}),f.each(D,function(e,t){f.each(t.keys,function(e,t){delete v[t]})}),void 0!==v.annotationId&&(m=w.annotationById(v.annotationId))&&delete v.annotationId,m&&m.type()===g&&m.state()===l.state.done&&!1===m.options("updated")?(delete v.state,delete v.layer,v.updated=!0,m.options(v),w.geoTrigger(u.annotation.update,{annotation:m})):(v.state=l.state.done,v.layer=w,v.updated="new",w.addAnnotation(c.createAnnotation(g,v),null))}})},this.validateAttribute=function(e,t){var n;if(null!=e){switch(t){case"angle":if(""===e)break;if(!(n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+e).toLowerCase()))||!isFinite(n[1]))return;var i="grad"===n[2]?Math.PI/200:"deg"===n[2]?Math.PI/180:"turn"===n[2]?2*Math.PI:1;e=n[1]*i;break;case"boolean":e=!!e&&0>["false","no","off"].indexOf((""+e).toLowerCase());break;case"booleanOrNumber":if(!e&&0!==e&&""!==e||["true","false","off","on","no","yes"].indexOf((""+e).toLowerCase())>=0)e=!!e&&0>["false","no","off"].indexOf((""+e).toLowerCase());else{if(!x.isNonNullFinite(e))return;e*=1}break;case"coordinate2":if(""===e)break;if(e&&x.isNonNullFinite(e.x)&&x.isNonNullFinite(e.y)){e.x=+e.x,e.y=+e.y;break}try{e=JSON.parse(e)}catch(e){}if(e&&x.isNonNullFinite(e.x)&&x.isNonNullFinite(e.y)){e.x=+e.x,e.y=+e.y;break}if(Array.isArray(e)&&x.isNonNullFinite(e[0])&&x.isNonNullFinite(e[1])){e={x:+e[0],y:+e[1]};break}if(!(n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+e))||!isFinite(n[1])||!isFinite(n[2]))return;e={x:+n[1],y:+n[2]};break;case"color":if(void 0===(e=x.convertColor(e))||void 0===e.r)return;break;case"number":if(!x.isNonNullFinite(e))return;e*=1;break;case"numberOrBlank":if(""===e)break;if(!x.isNonNullFinite(e))return;e*=1;break;case"opacity":if(""===e||isNaN(e*=1)||e<0||e>1)return;break;case"positive":if(!isFinite(e*=1)||e<=0)return;break;case"text":e=""+e}return e}},this._update=function(){if(w.timestamp()>T.timestamp()){var e=w.options("showLabels")?[]:null,t=w.options("clickToEdit")||w.mode()===w.modes.edit;f.each(E,function(e,t){f.each(t,function(e,t){t.data=[],delete t.feature.scaleOnZoom})}),f.each(P,function(n,i){var o=i.features();if(e){var a=i.labelRecord();a&&e.push(a)}f.each(o,function(e,n){void 0===E[e]&&(E[e]={}),f.each(n,function(n,o){if(E[e][n])(a=E[e][n].feature).selectionAPI()!==!!t&&(a.selectionAPI(t),t?(a.geoOn(u.feature.mouseon,w._handleMouseOn),a.geoOn(u.feature.mouseoff,w._handleMouseOff)):(a.geoOff(u.feature.mouseon,w._handleMouseOn),a.geoOff(u.feature.mouseoff,w._handleMouseOff)));else{var a=w.createFeature(n,{gcs:w.map().gcs(),selectionAPI:t});if(!a){var s="error_feature_"+n;w[s]||(console.warn("Cannot create a "+n+" feature for annotations."),w[s]=!0);return}t&&(a.geoOn(u.feature.mouseon,w._handleMouseOn),a.geoOn(u.feature.mouseoff,w._handleMouseOff));var l={};f.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","radiusIncludesStroke","rotateWithMap","rotation","scaleWithZoom","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","symbolValue","uniformPolygon"],function(e,t){var n;void 0!==a.style()[t]&&(n=a.style.get(t)),l[t]=function(e,i,o,a){var s=e&&e.style?e.style:e&&e[2]&&e[2].style?e[2].style:o.style,l=s?s[t]:e;return x.isFunction(l)&&(l=l(e,i,o,a)),void 0===l&&n&&(l=n(e,i,o,a)),l}}),a.style(l),E[e][n]={feature:a,style:l,data:[]}}var c=o.data||o;Array.isArray(c)||(c=[c]),c.forEach(function(t){t.annotation=i,E[e][n].data.push(t),o.scaleOnZoom&&(E[e][n].feature.scaleOnZoom=!0)})})})}),f.each(E,function(e,t){f.each(t,function(e,t){t.feature.data(t.data)})}),w._updateLabels(e),T.modified()}return _.call(w,arguments),w},this._updateLabels=function(e){if(!e||!e.length)return w._removeLabelFeature(),w;if(!o){if(!(c.registries.features[w.rendererName()]||{}).text){var t=c.rendererForFeatures(["text"]);a=c.createLayer("feature",w.map(),{renderer:t}),w.addChild(a),a._update(),w.geoTrigger(u.layerAdd,{target:w,layer:a})}var n={};h.usedStyles.forEach(function(e){n[e]=function(t,n){return t.style&&void 0!==t.style[e]?t.style[e]:(w.options("defaultLabelStyle")||{})[e]}}),o=(a||w).createFeature("text",{style:n,gcs:w.map().gcs(),position:function(e){return e.position}})}return o.data(e),w},this._handleZoom=function(){var e,t=w.features();for(e=0;e<t.length;e+=1)t[e].scaleOnZoom&&t[e].modified()},this._removeLabelFeature=function(){return a&&(a._exit(),w.removeChild(a),w.geoTrigger(u.layerRemove,{target:w,layer:a}),a=o=null),o&&(w.removeFeature(o),o=null),w},this.draw=function(){return w._update(),S.call(w),w},this.toPolygonList=function(e){var t=[],n=[];return(e=e||{}).annotationIndices||(e.annotationIndices={}),e.annotationIndices[w.id()]=n,P.forEach(function(i,o){i.toPolygonList&&(i.toPolygonList(e).forEach(function(e){return t.push(e)}),n.push(o))}),t},this.fromPolygonList=function(e,t){if(!e||!e.length)return w;var n,o,a,s=t.keepAnnotations,l={},u={},d=(t.annotationIndices||{})[w.id()];d&&t.correspond&&t.correspond.poly1&&d.length===t.correspond.poly1.length&&(n=t.correspond.poly1,o=t.correspond.exact1,a=w.annotations()),"all"!==s&&"none"!==s&&a&&a.forEach(function(e,t){0>d.indexOf(t)&&(l[e.id()]=!0)});var f=[];e.forEach(function(e,t){var c={vertices:1===(e=e.map(function(e){return e.map(function(e){return{x:e[0],y:e[1]}})})).length?e[0]:{outer:e[0],inner:e.slice(1)}};if(n){for(var p,h=0;h<n.length&&0!==(p=function(){if(n[h]&&n[h].indexOf(t)>=0){var e=a[d[h]];return"all"!==s&&"none"!==s&&o&&o[h]&&o[h].indexOf(t)>=0?(l[e.id()]=!0,{v:void 0}):("all"!==s&&void 0===u[e.id()]&&(c.annotationId=e.id(),u[e.id()]=!0),["name","description","label"].forEach(function(t){e[t](void 0,!0)&&(c[t]=e[t](void 0,!0))}),Object.entries(e.options()).forEach(function(e){var t=i(e,2),n=t[0],o=t[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(c[n]=o)}),0)}}());h+=1)if(p)return p.v}f.push(c)});var p=!1;return"all"!==s&&a&&a.filter(function(e){return void 0===l[e.id()]}).forEach(function(e){w.removeAnnotation(e,!1),p=!0}),f.forEach(function(e){w.addAnnotation(c.createAnnotation("polygon",e),w.map().gcs(),!1),p=!0}),p&&(w.modified(),w.draw()),w},this._init=function(){return A.call(w),w.map().interactor()||w.map().interactor(y({actions:[]})),w.geoOn(u.actionselection,w._processAction),w.geoOn(u.actionmove,w._processAction),w.geoOn(u.actionup,w._processAction),w.geoOn(u.mouseclick,w._handleMouseClick),w.geoOn(u.mousemove,w._handleMouseMove),w.geoOn(u.zoom,w._handleZoom),w},this._exit=function(){return v&&v.reset(),w._removeLabelFeature(),C.call(w),P=[],M={},E=[],w},w};a(g,s),c.registerLayer("annotation",g),e.exports=g},2957(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9971),s=n(6732),l=n(4341),u=0x1000000,c=function(e){"use strict";if(!(this instanceof c))return new c(e);a.call(this,e);var t=n(4692),i=n(6194),o=n(4727),d=n(5776),f=n(3853),p=n(3790),h=n(9343);o.call(this);var m,g,v,y,b,x,w,A=this,C=this._exit,S=this._update,_={},T=s(),O=s();function P(e){var t=new i.mapper({dynamicDraw:!0});return t.s_modified=t.modified,t.g_timestamp=s(),t.timestamp=t.g_timestamp.timestamp,t.modified=function(){return t.s_modified(),t.g_timestamp.modified(),t},t.s_render=t.render,t.render=e,t}return this.actors=function(){var e=[];return g&&e.push(g),v&&e.push(v),e},this._build=function(){var e,t,n,o,a,s,l,u,c;A.position()&&((w=A._generateQuads()).imgQuads.length&&!g&&(A.visible(!1),e=P(A._renderImageQuads),(g=new i.actor).setMapper(e),t=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),n.addVertexAttribute(new i.vertexAttribute("textureCoord"),i.vertexAttributeKeys.TextureCoordinate),m=new i.modelViewOriginUniform("modelViewMatrix",w.origin),n.addUniform(m),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),n.addUniform(new i.floatUniform("zOffset",0)),(c=new i.uniform(i.GL.INT,"sampler2d")).set(0),n.addUniform(c),u=A.renderer()._glContext(),(a=new i.uniform(u.FLOAT_VEC2,"crop")).set([1,1]),n.addUniform(a),(s=new i.uniform(u.FLOAT_VEC4,"cropsource")).set([0,0,0,0]),n.addUniform(s),n.addShader(i.getCachedShader(u.VERTEX_SHADER,u,f)),n.addShader(i.getCachedShader(u.FRAGMENT_SHADER,u,d)),A._hookBuild&&A._hookBuild(n),t.addAttribute(n),t.addAttribute(new i.blend),l=new i.geometryData,y=void 0,(o=new i.sourceDataT2fv).pushBack([0,0,1,0,0,1,1,1]),l.addSource(o),e.setGeometryData(l),g.setMaterial(t),A.renderer().contextRenderer().addActor(g),A.visible(!0)),w.clrQuads.length&&!v&&(A.visible(!1),e=P(A._renderColorQuads),(v=new i.actor).setMapper(e),t=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),x=new i.modelViewOriginUniform("modelViewMatrix",w.origin),n.addUniform(x),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),n.addUniform(new i.floatUniform("zOffset",0)),u=A.renderer()._glContext(),n.addUniform(new i.uniform(u.FLOAT_VEC3,"vertexColor")),n.addShader(i.getCachedShader(u.VERTEX_SHADER,u,h)),n.addShader(i.getCachedShader(u.FRAGMENT_SHADER,u,p)),t.addAttribute(n),t.addAttribute(new i.blend),l=new i.geometryData,b=void 0,e.setGeometryData(l),v.setMaterial(t),A.renderer().contextRenderer().addActor(v),A.visible(!0)),m&&m.setOrigin(w.origin),x&&x.setOrigin(w.origin),A._updateTextures(),A.buildTime().modified())},this._updateTextures=function(){t.each(w.imgQuads,function(e,t){var n=t.imageTexture||t.image;if(n){if(n._texture){t.texture=n._texture;return}var o=new i.texture;t.imageTexture?o.setTexture(n):o.setImage(n);var a=A.nearestPixel();void 0!==a&&!0!==a&&l.isNonNullFinite(a)&&(a=A.layer().map().zoom()>=a),a&&o.setNearestPixel(!0),t.texture=n._texture=o}})},this._renderColorQuads=function(e){if(w.clrQuads.length){(this.timestamp()>O.timestamp()||A.dataTime().timestamp()>O.timestamp()||e.m_contextChanged||!b||12*w.clrQuads.length>b.length)&&(n=e.m_context,o=!1,w.clrQuads.length&&(b&&!(b.length<12*w.clrQuads.length)&&_.clrQuadsPosition||(_.clrQuadsPosition&&n.deleteBuffer(_.clrQuadsPosition),_.clrQuadsPosition=n.createBuffer(),b=new Float32Array(12*Math.max(128,2*w.clrQuads.length)),o=!0),t.each(w.clrQuads,function(e,t){for(var n=0;n<12;n+=1)b[12*e+n]=t.pos[n]-w.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,_.clrQuadsPosition),o?n.bufferData(n.ARRAY_BUFFER,b,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,b)),O.modified()),this.s_render(e,!0);var n,o,a,s,l,u=e.m_context;u.bindBuffer(u.ARRAY_BUFFER,_.clrQuadsPosition),t.each(w.clrQuads,function(t,n){n.opacity!==a&&(a=n.opacity,u.uniform1fv(e.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([a]))),(n.zOffset||0)!==s&&(s=n.zOffset||0,u.uniform1fv(e.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([s]))),l&&l.r===n.color.r&&l.g===n.color.g&&l.b===n.color.b||(l=n.color,u.uniform3fv(e.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([l.r,l.g,l.b]))),u.bindBuffer(u.ARRAY_BUFFER,_.clrQuadsPosition),u.vertexAttribPointer(i.vertexAttributeKeys.Position,3,u.FLOAT,!1,12,12*t*4),u.enableVertexAttribArray(i.vertexAttributeKeys.Position),u.drawArrays(u.TRIANGLE_STRIP,0,4)}),u.bindBuffer(u.ARRAY_BUFFER,null),this.undoBindVertexData(e)}},this._renderImageQuads=function(e){if(w.imgQuads.length){(this.timestamp()>T.timestamp()||A.dataTime().timestamp()>T.timestamp()||e.m_contextChanged||!y||12*w.imgQuads.length>y.length)&&(n=e.m_context,o=!1,w.imgQuads.length&&(y&&!(y.length<12*w.imgQuads.length)&&_.imgQuadsPosition||(_.imgQuadsPosition&&n.deleteBuffer(_.imgQuadsPosition),_.imgQuadsPosition=n.createBuffer(),y=new Float32Array(12*Math.max(128,2*w.imgQuads.length)),o=!0),t.each(w.imgQuads,function(e,t){for(var n=0;n<12;n+=1)y[12*e+n]=t.pos[n]-w.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,_.imgQuadsPosition),o?n.bufferData(n.ARRAY_BUFFER,y,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,y)),T.modified()),this.s_render(e,!0);var n,o,a,s,c,d,f,p,h,m,g=e.m_context,v={x:1,y:1},b={x0:0,y0:0,x1:1,y1:1},x=A.nearestPixel();void 0!==x&&(!0!==x&&l.isNonNullFinite(x)&&(x=A.layer().map().zoom()>=x),w.imgQuads.forEach(function(t){if((t.image||t.imageTexture)&&t.texture&&t.texture.nearestPixel()!==x&&t.texture.textureHandle()){e.m_context.bindTexture(i.GL.TEXTURE_2D,t.texture.textureHandle()),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,x?i.GL.NEAREST:i.GL.LINEAR),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,x?i.GL.NEAREST:i.GL.LINEAR),e.m_context.bindTexture(i.GL.TEXTURE_2D,null);var n=t.texture.modified;t.texture.modified=function(){},t.texture.setNearestPixel(x),t.texture.modified=n}})),A._hookRenderImageQuads&&A._hookRenderImageQuads(e,w.imgQuads),g.bindBuffer(g.ARRAY_BUFFER,_.imgQuadsPosition),t.each(w.imgQuads,function(t,n){(n.image||n.imageTexture)&&(n.texture.bind(e),n.image&&(f=n.image.width,p=n.image.height),n.imageTexture&&(f=n.imageTexture.width,p=n.imageTexture.height),(n.image||n.imageTexture)&&f*p>u&&(u=f*p,g.getError()===g.OUT_OF_MEMORY&&console.log("Insufficient GPU memory for texture")),n.opacity!==a&&(a=n.opacity,g.uniform1fv(e.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([a]))),(n.zOffset||0)!==s&&(s=n.zOffset||0,g.uniform1fv(e.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([s]))),c=n.crop||{x:1,y:1},v&&c.x===v.x&&c.y===v.y||(v=c,g.uniform2fv(e.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([void 0===v.x?1:v.x,void 0===v.y?1:v.y]))),d=n.crop||{left:0,top:0,right:f,bottom:p},b&&d.left===b.left&&d.top===b.top&&d.right===b.right&&d.bottom===b.bottom&&h===f&&m===p||(b=d,h=f,m=p,g.uniform4fv(e.m_material.shaderProgram().uniformLocation("cropsource"),new Float32Array([b.left/f,b.top/p,b.right/f,b.bottom/p]))),g.bindBuffer(g.ARRAY_BUFFER,_.imgQuadsPosition),g.vertexAttribPointer(i.vertexAttributeKeys.Position,3,g.FLOAT,!1,12,12*t*4),g.enableVertexAttribArray(i.vertexAttributeKeys.Position),g.drawArrays(g.TRIANGLE_STRIP,0,4),n.texture.undoBind(e))}),g.bindBuffer(g.ARRAY_BUFFER,null),this.undoBindVertexData(e)}},this._update=function(){S.call(A),(A.buildTime().timestamp()<=A.dataTime().timestamp()||A.updateTime().timestamp()<A.timestamp())&&A._build(),v&&(v.setVisible(A.visible()),v.material().setBinNumber(A.bin())),g&&(g.setVisible(A.visible()),g.material().setBinNumber(A.bin())),A.updateTime().modified()},this._cleanup=function(){g&&(A.renderer().contextRenderer().removeActor(g),g=null),v&&(A.renderer().contextRenderer().removeActor(v),v=null),y=void 0,b=void 0,_&&Object.keys(_).forEach(function(e){delete _[e]}),w&&w.imgQuads&&(w.imgQuads.forEach(function(e){e.texture&&(delete e.texture,e.image&&e.image._texture&&delete e.image._texture),e.imageTexture&&delete e.imageTexture._texture}),A._updateTextures()),A.modified()},this.setShader=function(e,t){switch(e){case"image_vertex":f=t;break;case"image_fragment":d=t;break;case"color_vertex":h=t;break;case"color_fragment":p=t;break;default:return}return A},this._exit=function(){A._cleanup(),C.call(A)},A._init(e),this};i(c,a);var d={};d[a.capabilities.color]=!0,d[a.capabilities.image]=!0,d[a.capabilities.imageCrop]=!0,d[a.capabilities.imageFixedScale]=!1,d[a.capabilities.imageFull]=!0,d[a.capabilities.canvas]=!1,d[a.capabilities.video]=!1,d[a.capabilities.texture]=!0,o("webgl","quad",c,d),e.exports=c},2977(e,t,n){var i=n(4099),o=n(8899);i.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4},i.materialAttribute=function(e){return this instanceof i.materialAttribute?(i.graphicsObject.call(this),this.type=function(){return e},this.enabled=function(){return!0},this.bindVertexData=function(e,t){return!1},this.undoBindVertexData=function(e,t){return!1},this):new i.materialAttribute(e)},o(i.materialAttribute,i.graphicsObject)},2980(e,t,n){var i=n(4692),o=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;i.htmlPrefilter=function(e){return e.replace(o,"<$1></$2>")},n(8736),e.exports=Object.assign({annotationLayer:n(2946),camera:n(8301),choroplethFeature:n(5232),contourFeature:n(838),domRenderer:n(5679),event:n(4128),feature:n(9186),featureLayer:n(8525),fetchQueue:n(3273),fileReader:n(551),geo_action:n(8336),graphFeature:n(6900),heatmapFeature:n(4504),imageTile:n(9341),isolineFeature:n(9481),geojsonReader:n(2584),gridFeature:n(5446),layer:n(4837),lineFeature:n(8452),map:n(830),mapInteractor:n(6001),markerFeature:n(7252),meshFeature:n(5665),object:n(4897),osmLayer:n(4812),pathFeature:n(7019),pointFeature:n(9558),polygonFeature:n(7150),quadFeature:n(9971),pixelmapFeature:n(9812),pixelmapLayer:n(2603),renderer:n(3757),sceneObject:n(2923),textFeature:n(2227),tile:n(6966),tileCache:n(7286),tileLayer:n(6601),timestamp:n(6732),trackFeature:n(6465),transform:n(5204),typedef:n(767),vectorFeature:n(9439),inherit:n(8899),version:n(8648),sha:n(8770),annotation:n(3508),util:n(4341),jQuery:i,canvas:n(1357),svg:n(1053),vtkjs:n(4603),webgl:n(3066),gui:n(5915),vgl:n(6194)},n(5933)),window&&!window.$&&(window.$=i),window&&!window.jQuery&&(window.jQuery=i),window&&!window.geojsMap&&(window.geojsMap=function(){var e=i(".geojs-map").map(function(e,t){return i(t).data("data-geojs-map")});return 0===e.length?void 0:1===e.length?e[0]:e})},3012(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y,forward:()=>m,init:()=>h,inverse:()=>g,names:()=>v});var i=n(4181),o=n(384),a=n(5341),s=n(8044);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={forward:function(e,t){var n=t.x,a=t.y,s=Math.cos(n+=e.long0),l=Math.sin(a),u=Math.cos(a);t.x=(0,i.A)(Math.atan2(u*Math.sin(n),e.sphip*u*s+e.cphip*l)+e.lamp),t.y=Math.asin(e.sphip*l-e.cphip*u*s);var c=e.obliqueProjection.forward(t);return e.isIdentity&&(c.x*=o.dX,c.y*=o.dX),c},inverse:function(e,t){e.isIdentity&&(t.x*=o.zq,t.y*=o.zq);var n=e.obliqueProjection.inverse(t),a=n.x,s=n.y;if(a<Number.MAX_VALUE){var l=Math.cos(a-=e.lamp),u=Math.sin(s),c=Math.cos(s);t.x=Math.atan2(c*Math.sin(a),e.sphip*c*l-e.cphip*u),t.y=Math.asin(e.sphip*u+e.cphip*c*l)}return t.x=(0,i.A)(t.x+e.long0),t}},f={forward:function(e,t){var n=t.x,a=t.y;n+=e.long0;var s=Math.cos(a),l=Math.cos(n);t.x=(0,i.A)(Math.atan2(s*Math.sin(n),Math.sin(a))+e.lamp),t.y=Math.asin(-1*s*l);var u=e.obliqueProjection.forward(t);return e.isIdentity&&(u.x*=o.dX,u.y*=o.dX),u},inverse:function(e,t){e.isIdentity&&(t.x*=o.zq,t.y*=o.zq);var n=e.obliqueProjection.inverse(t),a=n.x,s=n.y;if(a<Number.MAX_VALUE){var l=Math.cos(s);t.x=Math.atan2(l*Math.sin(a-=e.lamp),-1*Math.sin(s)),t.y=Math.asin(l*Math.cos(a))}return t.x=(0,i.A)(t.x+e.long0),t}},p={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function h(){var e,t=this;if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=s.names.includes(this.o_proj),!this.o_proj)throw Error("Missing parameter: o_proj");if("ob_tran"===this.o_proj)throw Error("Invalid value for o_proj: "+this.o_proj);var n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),i=(0,a.A)(n);if(!i)throw Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);i.long0=0,this.obliqueProjection=i;for(var u=Object.keys(p),h=0;h<u.length;h++){var m=p[u[h]],g=Object.entries(m);if(g.some(function(e){return void 0!==t[l(e,1)[0]]})){e=m;for(var v=0;v<g.length;v++){var y=l(g[v],2),b=y[0],x=y[1],w=function(e){if("undefined"!==c(t[e])){var n=parseFloat(t[e])*o.zq;if(isNaN(n))throw Error("Invalid value for "+e+": "+t[e]);return n}}(b);if(void 0===w)throw Error("Missing parameter: "+b+".");this[x]=w}break}}if(!e)throw Error("No valid parameters provided for ob_tran projection.");var A=function(e,t){var n,i;if(t===p.ROTATE){var a=e.oLongC,s=e.oLatC,l=e.oAlpha;if(Math.abs(Math.abs(s)-o.sK)<=o.H0)throw Error("Invalid value for o_lat_c: "+e.o_lat_c+" should be < 90\xb0");i=a+Math.atan2(-1*Math.cos(l),-1*Math.sin(l)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(l))}else if(t===p.NEW_POLE)i=e.oLongP,n=e.oLatP;else{var u=e.oLong1,c=e.oLat1,d=e.oLong2,f=e.oLat2,h=Math.abs(c);if(Math.abs(c)>o.sK-o.H0)throw Error("Invalid value for o_lat_1: "+e.o_lat_1+" should be < 90\xb0");if(Math.abs(f)>o.sK-o.H0)throw Error("Invalid value for o_lat_2: "+e.o_lat_2+" should be < 90\xb0");if(Math.abs(c-f)<o.H0)throw Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(h<o.H0)throw Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan(-1*Math.cos((i=Math.atan2(Math.cos(c)*Math.sin(f)*Math.cos(u)-Math.sin(c)*Math.cos(f)*Math.cos(d),Math.sin(c)*Math.cos(f)*Math.sin(d)-Math.cos(c)*Math.sin(f)*Math.sin(u)))-u)/Math.tan(c))}return{lamp:i,phip:n}}(this,e),C=A.lamp,S=A.phip;this.lamp=C,Math.abs(S)>o.H0?(this.cphip=Math.cos(S),this.sphip=Math.sin(S),this.projectionType=d):this.projectionType=f}function m(e){return this.projectionType.forward(this,e)}function g(e){return this.projectionType.inverse(this,e)}var v=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];let y={init:h,forward:m,inverse:g,names:v}},3020(e){e.exports="/* polygonFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\n\nvoid main () {\n  gl_FragColor = fillColorVar;\n}\n"},3066(e,t,n){e.exports={choroplethFeature:n(2866),contourFeature:n(6224),gridFeature:n(4008),isolineFeature:n(4715),layer:n(6195),lineFeature:n(9594),lookupTable2D:n(1386),markerFeature:n(5530),meshColored:n(8743),pixelmapFeature:n(8342),pointFeature:n(4932),polygonFeature:n(9084),quadFeature:n(2957),tileLayer:n(5055),trackFeature:n(5443),webglRenderer:n(452)}},3145(e){e.exports=function(e,t,n,i){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+l),c=2/(o+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((s-l)*u*.5),e[9]=(o-a)*c*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}},3153(e){e.exports="/* markerFeature sprite fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main(void) {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  // for sprites, convert the position to [-radius,radius],[-radius,radius]\n  vec2 pos = (gl_PointCoord.xy - 0.5) * 2.0 * radiusVar;\n  if (markerFeatureFragment(vec3(pos, 0.0)) == 0.0)\n    discard;\n}\n"},3157(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(8452),s=function(e){"use strict";if(!(this instanceof s))return new s(e);var t=n(2184).d3,i=n(9966),o=n(6732),l=n(4341);e=e||{},a.call(this,e),i.call(this);var u=this,c=this._init,d=o(),f=0,p=this._update;return this._init=function(e){return c.call(u,e),u},this._build=function(){var e,n,i=u.data()||[],o=u.style(),a=u.renderer(),s=u.position();for(p.call(u),o.fill=function(){return!1},i.forEach(function(n,i){var c,d,f=u.line()(n,i),p={};for(d in o)o.hasOwnProperty(d)&&(p[d]=function(e){return l.isFunction(e)?function(){return e(f[0],0,n,i)}:e}(o[d]));e=t.line().x(function(e){return u.featureGcsToDisplay(e).x}).y(function(e){return u.featureGcsToDisplay(e).y}).curve(u.style.get("closed")(n,i)&&f.length>2?t.curveLinearClosed:t.curveLinear),c={data:[f.map(function(e,t){return s(e,t,n,i)})],append:"path",attributes:{d:e},id:u._svgid()+i,classes:["svgLineFeature","svgSubLine-"+i],visible:u.visible,style:p},a._drawFeatures(c)}),n=i.length;n<f;n+=1)a._removeFeature(u._svgid()+n);return f=i.length,d.modified(),u.updateTime().modified(),u},this._update=function(){return p.call(u),u.timestamp()>=d.timestamp()&&u._build(),u},this._init(e),this};i(s,a);var l={};l[a.capabilities.basic]=!0,l[a.capabilities.multicolor]=!1,o("svg","line",s,l),e.exports=s},3158(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwzMmwwLC00YTQsNCwwLDAsMSw4LDBsMCw0bC0yLDBsMCwtNGEyLDIsMCwwLDAsLTQsMGwwLDR6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},3183(e,t,n){var i=n(8899),o=n(5933).registerAnnotation,a=n(8452),s=n(7150),l=n(4341),u=n(8795).annotation,c=n(8795).state,d=n(8795).continuousVerticesActions,f=n(8795).continuousVerticesProcessAction,p=function(e){"use strict";if(!(this instanceof p))return new p(e);var t=this;(e=l.deepMerge({style:{polygon:function(e){return e.polygon}},createStyle:{line:function(e){var n=t._coordinates();return Array((n.outer||n).length).fill(e)},position:function(e,n){return void 0!==e.x?e:t.options("vertices")[n]}},cursorStyle:{position:l.identityFunction}},this.constructor.defaults,e)).vertices=e.vertices||e.coordinates||[],delete e.coordinates,u.call(this,"polygon",e);var n=this.actions,i=this.state;this.features=function(){var e,n=t.options(),i=t.state(),o=t.styleForState(i);return i===c.create?(e=[],n.vertices&&(n.vertices.outer||n.vertices.length>=3)&&(e[1]={polygon:{polygon:n.vertices,style:o}}),n.vertices&&n.vertices.length>=2&&(e[2]={line:{line:n.vertices,style:o}})):(e=[{polygon:{polygon:n.vertices,style:o}}],i===c.edit&&t._addEditHandles(e,n.vertices)),e},this.toPolygonList=function(e){var n=t._coordinates();if(n.outer){var i=[[n.outer.map(function(e){return[e.x,e.y]})]];return(n.inner||[]).forEach(function(e){return i[0].push(e.map(function(e){return[e.x,e.y]}))}),i}return n.length<3||!n.map?[]:[[n.map(function(e){return[e.x,e.y]})]]},this._coordinates=function(e){return e&&t.options("vertices",e),t.options("vertices")},this.mouseMove=function(e){if(t.state()===c.create){var n=t.options("vertices");if(n.length)return n[n.length-1]=e.mapgcs,!0}},this.mouseClick=function(e){var n=t.layer();if(t.state()===c.create&&n){var i,o=!!e.buttonsDown.right;if(e.buttonsDown.left||e.buttonsDown.right){var a=t.options("vertices");if(!e.buttonsDown.right||a.length)return(e.handled=!0,e.buttonsDown.left&&(a.length?a.length>=2&&n.displayDistance(a[a.length-2],null,e.map,"display")<=n.options("adjacentPointProximity")?(i=!0,t._lastClick&&e.time-t._lastClick<n.options("dblClickTime")&&(o=!0)):a.length>=2&&n.displayDistance(a[0],null,e.map,"display")<=n.options("finalPointProximity")?o=!0:a[a.length-1]=e.mapgcs:a.push(e.mapgcs),o||i||a.push(e.mapgcs),t._lastClick=e.time,t._lastClickVertexCount=a.length),o)?a.length<4?"remove":(a.pop(),t.state(c.done),"done"):!i}}},this.actions=function(e){return d(t,n,e,"polygon",arguments)},this.state=function(e){var n=i();if(e&&e!==n&&(n===c.create||n===c.edit)&&e===c.done){for(var o=l.polyops.union(t.options("vertices"),[],{style:"object-listlist-outer-list"}),a=!0;o.length>1&&a;){a=!1;for(var s=0;!a&&s<o[0].outer.length;s+=1)for(var u=o[0].outer[s],d=1;!a&&d<o.length;d+=1)for(var f=0;!a&&f<o[d].outer.length;f+=1){var p=o[d].outer[f];u.x===p.x&&u.y===p.y&&(o[0].inner=o[0].inner.concat(o[d].inner),o[0].outer=o[0].outer.slice(0,s).concat(o[d].outer.slice(f)).concat(o[d].outer.slice(0,f)).concat(o[0].outer.slice(s)),o.splice(d,1),a=!0)}}1===o.length&&t.options("vertices",o[0].inner.length?o[0]:o[0].outer)}return i(e)},this.processAction=function(e){return f(t,e,"polygon")},this._geojsonCoordinates=function(e){var n=t.coordinates(e);if(n&&(n.outer||!(n.length<3))&&t.state()!==c.create){var i=[];return n.outer?((i=[n.outer.map(function(e){return[e.x,e.y]})])[0].push(i[0][0].slice()),(n.inner||[]).forEach(function(e){var t=e.map(function(e){return[e.x,e.y]});t.push(t[0].slice()),i.push(t)})):(i=[n.map(function(e){return[e.x,e.y]})])[0].push(i[0][0].slice()),i}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};i(p,u),p.defaults=Object.assign({},u.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:!1,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!1,strokeColor:{r:0,g:0,b:1}},cursorStyle:{closed:!0,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var h={};h[s.capabilities.feature]=!0,h[a.capabilities.basic]=[c.create],o("polygon",p,h),e.exports=p},3198(e){e.exports=function(e,t,n){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i}},3234(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>m,forward:()=>f,init:()=>d,inverse:()=>p,names:()=>h});var i=n(4181),o=n(5949),a=n(1114),s=n(1064),l=n(4568),u=n(384),c=n(3357);function d(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,a.A)(this.es)}function f(e){var t,n,o=e.x,a=e.y;if(o=(0,i.A)(o-this.long0,this.over),this.sphere){if(this.m)for(var l=this.n*Math.sin(a),c=20;c;--c){var d=(this.m*a+Math.sin(a)-l)/(this.m+Math.cos(a));if(a-=d,Math.abs(d)<u.H0)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;t=this.a*this.C_x*o*(this.m+Math.cos(a)),n=this.a*this.C_y*a}else{var f=Math.sin(a),p=Math.cos(a);n=this.a*(0,s.A)(a,f,p,this.en),t=this.a*o*p/Math.sqrt(1-this.es*f*f)}return e.x=t,e.y=n,e}function p(e){var t,n,a,s;return e.x-=this.x0,a=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,a/=this.C_x*(this.m+Math.cos(t)),this.m?t=(0,c.A)((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=(0,c.A)(Math.sin(t)/this.n)),a=(0,i.A)(a+this.long0,this.over),t=(0,o.A)(t)):(s=Math.abs(t=(0,l.A)(e.y/this.a,this.es,this.en)))<u.sK?(s=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),a=(0,i.A)(n,this.over)):s-u.H0<u.sK&&(a=this.long0),e.x=a,e.y=t,e}var h=["Sinusoidal","sinu"];let m={init:d,forward:f,inverse:p,names:h}},3237(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.mapper=function(e){"use strict";if(!(this instanceof i.mapper))return new i.mapper(e);i.boundingObject.call(this);var t=[0,1,1],n=null,o=[],s={},l=void 0!==(e=e||{}).dynamicDraw&&e.dynamicDraw,u=a(),c=null,d=this;return this.deleteVertexBufferObjects=function(e){var t,n=c;if(e&&(n=e.m_context),n)for(t=0;t<o.length;t+=1)n.deleteBuffer(o[t])},this._cleanup=function(e){var t;d.deleteVertexBufferObjects(e),t=0,s={},o=[],d.modified()},this.computeBounds=function(){if(null==n)return void this.resetBounds();var e=this.computeBoundsTimestamp(),t=this.boundsDirtyTimestamp(),i=null;t.getMTime()>e.getMTime()&&(i=n.bounds(),this.setBounds(i[0],i[1],i[2],i[3],i[4],i[5]),e.modified())},this.color=function(){return t},this.geometryData=function(){return n},this.setGeometryData=function(e){n!==e&&(n=e,this.modified(),this.boundsDirtyTimestamp().modified())},this.updateSourceBuffer=function(e,t,a){if(a&&(c=a.m_context),!c)return!1;for(var s=-1,l=0;l<n.numberOfSources();l+=1)if(n.source(l).name()===e){s=l;break}return!(s<0)&&!(s>=o.length)&&(t||(t=n.source(l).dataToFloat32Array()),c.bindBuffer(i.GL.ARRAY_BUFFER,o[s]),t instanceof Float32Array?c.bufferSubData(i.GL.ARRAY_BUFFER,0,t):c.bufferSubData(i.GL.ARRAY_BUFFER,0,new Float32Array(t)),!0)},this.getSourceBuffer=function(e){var t=n.sourceByName(e);return t?t.dataToFloat32Array():new Float32Array},this.render=function(e,t){(this.getMTime()>u.getMTime()||e.m_contextChanged)&&(d.deleteVertexBufferObjects(e),s={},o=[],function(e){if(n){e&&(c=e.m_context);var t,a,d,f,p,h,m,g=n.numberOfSources(),v=null;for(t=0;t<g;t+=1){for(v=c.createBuffer(),c.bindBuffer(i.GL.ARRAY_BUFFER,v),(m=n.source(t).data())instanceof Float32Array||(m=new Float32Array(m)),c.bufferData(i.GL.ARRAY_BUFFER,m,l?i.GL.DYNAMIC_DRAW:i.GL.STATIC_DRAW),f=n.source(t).keys(),p=[],a=0;a<f.length;a+=1)p.push(f[a]);s[t]=p,o[t]=v}for(d=0,h=n.numberOfPrimitives();d<h;d+=1)v=c.createBuffer(),c.bindBuffer(i.GL.ARRAY_BUFFER,v),c.bufferData(i.GL.ARRAY_BUFFER,n.primitive(d).indices(),i.GL.STATIC_DRAW),o[t]=v,t+=1;u.modified()}}(e)),(c=e.m_context).vertexAttrib3fv(i.vertexAttributeKeys.Color,this.color());var a,f=0,p=0,h=null,m=null;for(a in s)if(s.hasOwnProperty(a)){for(c.bindBuffer(i.GL.ARRAY_BUFFER,o[f]),p=0;p<s[a].length;p+=1)e.m_material.bindVertexData(e,s[a][p]);f+=1}for(p=0,h=n.numberOfPrimitives();p<h;p+=1,f+=1)if((m=n.primitive(p)).numberOfIndices()){switch(c.bindBuffer(i.GL.ARRAY_BUFFER,o[f]),m.primitiveType()){case i.GL.POINTS:c.drawArrays(i.GL.POINTS,0,m.numberOfIndices());break;case i.GL.LINES:c.drawArrays(i.GL.LINES,0,m.numberOfIndices());break;case i.GL.LINE_STRIP:c.drawArrays(i.GL.LINE_STRIP,0,m.numberOfIndices());break;case i.GL.TRIANGLES:c.drawArrays(i.GL.TRIANGLES,0,m.numberOfIndices());break;case i.GL.TRIANGLE_STRIP:c.drawArrays(i.GL.TRIANGLE_STRIP,0,m.numberOfIndices())}c.bindBuffer(i.GL.ARRAY_BUFFER,null)}t||this.undoBindVertexData(e)},this.undoBindVertexData=function(e){var t,n;for(t in s)if(s.hasOwnProperty(t))for(n=0;n<s[t].length;n+=1)e.m_material.undoBindVertexData(e,s[t][n])},this},o(i.mapper,i.boundingObject)},3273(e,t,n){var i=n(4692),o=function(e){if(!(this instanceof o))return new o(e);e=e||{},this._size=e.size||6,this._initialSize=e.initialSize||0,this._track=e.track||600,this._initialTrack=this._track,this._needed=e.needed||null,this._batch=!1;var t=this,n=1;return Object.defineProperty(this,"size",{get:function(){return t._size},set:function(e){t._size=e,t._initialSize>1&&e<t._initialSize&&(t._initialSize=e),t.next_item()}}),Object.defineProperty(this,"initialSize",{get:function(){return t._initialSize},set:function(e){t._initialSize=e,t.next_item()}}),Object.defineProperty(this,"track",{get:function(){return t._track},set:function(e){t._track=e}}),Object.defineProperty(this,"initialTrack",{get:function(){return t._initialTrack},set:function(e){t._initialTrack=e}}),Object.defineProperty(this,"length",{get:function(){return t._queue.length}}),Object.defineProperty(this,"processing",{get:function(){return t._processing}}),this.clear=function(){return t._queue=[],t._processing=0,t},this.add=function(e,n,o){if(e.__fetchQueue){var a=t._queue.indexOf(e);if(a>=0)return t._addToQueue(e,o,a),e}var s=i.Deferred(),l=i.Deferred();return s.done(function(){i.when(n.call(e)).always(l.resolve)}).fail(l.resolve),e.__fetchQueue=s,t._addToQueue(e,o),i.when(s,l).always(function(){t._processing>0&&(t._processing-=1),t._initialSize=0,t.next_item()}).promise(e),t.next_item(),e},this._addToQueue=function(e,n,i){var o=n?t._queue.length-1:0;if(e.__fetchQueue._batch=t._batch,!n&&t._batch)for(o=0;o<t._queue.length-(void 0!==i)&&t._queue[o].__fetchQueue._batch===t._batch;o+=1);if(void 0===i)n?t._queue.push(e):o?t._queue.splice(o,0,e):t._queue.unshift(e);else if(i!==o){for(var a=i<o?1:-1,s=i;s!==o;s+=a)t._queue[s]=t._queue[s+a];t._queue[o]=e}},this.get=function(e){return t._queue.indexOf(e)},this.remove=function(e){var n=t._queue.indexOf(e);return n>=0&&(t._queue.splice(n,1),!0)},this.batch=function(e){return void 0===e?t._batch:(e?(t._batch=n,n+=1):t._batch=!1,t)},this.next_item=function(){if(!t._innextitem){if(t._innextitem=!0,t._queue.length>t._track&&t._needed){for(var e=t._queue.length-1;e>=0;e-=1)if(!t._needed(t._queue[e])){var n=t._queue.splice(e,1)[0];t._processing+=1,n.__fetchQueue.reject(),delete n.__fetchQueue}}for(;t._processing<(t._initialSize||t._size)&&t._queue.length;){var i=t._queue.shift();i.__fetchQueue&&(t._processing+=1,!t._needed||t._needed(i)?i.__fetchQueue.resolve():i.__fetchQueue.reject(),delete i.__fetchQueue)}t._innextitem=!1}},this.clear(),this};e.exports=o},3324(e,t,n){var i=n(8899),o=n(5933).registerRenderer,a=n(3757),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e);var t=n(8315),i=n(4128),o=s.vtkjs.Rendering.Misc.vtkGenericRenderWindow,l=this,u=this._init,c=o.newInstance({background:[0,0,0,0]});c.setContainer(l.layer().node().get(0)),c.getInteractor().unbindEvents(),c.resize();var d=c.getRenderer(),f=c.getRenderWindow();return this.contextRenderer=function(){return d},this.api=function(){return s.apiname},this._init=function(){if(l.initialized())return l;u.call(l);var e=l.layer().map(),t=e.size();return l._resize(0,0,t.width,t.height),e.camera().clipbounds={near:-e.unitsPerPixel(),far:e.unitsPerPixel()},l},this._resize=function(e,t,n,i){return l._setWidthHeight(n,i),c.resize(),l._render(),l},this._render=function(){return l.layer().map().scheduleAnimationFrame(l._renderFrame,!0),l},this._renderFrame=function(){var e,t=l.layer().features();for(e=0;e<t.length;e+=1)t[e].visible()&&t[e]._update();l._updateRendererCamera(),f.render()},this._exit=function(){},this._updateRendererCamera=function(){var e=l.layer().map().camera(),n=e.view,i=e.projectionMatrix,o=t.create();t.copy(o,n);var a=t.create();t.copy(a,i),l.contextRenderer().getActiveCamera().setViewMatrix(o),l.contextRenderer().getActiveCamera().setProjectionMatrix(a)},l.layer().geoOn(i.pan,function(e){l._render()}),l.layer().geoOn(i.parallelprojection,function(e){}),this};s.apiname="vtkjs",i(s,a),o("vtkjs",s),s.supported=function(){delete s.vtkjs;try{s.vtkjs=n(9166)}catch(e){}return(!s.vtkjs||!s.vtkjs.Rendering)&&window.vtk&&window.vtk.Rendering&&(s.vtkjs=window.vtk),s.vtkjs&&s.vtkjs.Rendering||(s.vtkjs=void 0),void 0!==s.vtkjs},s.fallback=function(){return null},s.supported(),e.exports=s},3341(e,t,n){var i=n(2184).d3,o=n(6207),a=n(8899),s=n(5933).registerWidget,l=n(4341),u=n(3619);n(3518);var c=function(e){"use strict";if(!(this instanceof c))return new c(e);o.call(this,e);var t=this,n=[],a=e.width||300,s=e.ticks||6,f=this._init;return this._init=function(){f();var n=t.canvas();i.select(n).attr("class","color-legend-container"),t.popup=i.select(n).append("div").attr("class","color-legend-popup"),e.categories&&t.categories(e.categories)},this._draw=function(){if(i.select(t.canvas()).selectAll("div.geojs-color-legends").remove(),!n.length)return void i.select(t.canvas()).style("display","none");i.select(t.canvas()).style("display","block");var e=i.select(t.canvas()).append("div").attr("class","geojs-color-legends"),o=a;n.forEach(function(n,i){var a=e.append("div").attr("class","geojs-color-legend");a.append("div").attr("class","geojs-title").text(n.name);var s=a.append("svg").attr("class","svg").attr("width",o).attr("height","40px").attr("viewBox","-20 0 "+o+" 40");"discrete"===n.type?t._drawDiscrete(s,o-40,n):"continuous"===n.type&&t._drawContinous(s,o-40,n)})},this.categories=function(e){return void 0===e?n:(n=t._prepareCategories(e),t._draw(),t)},this.addCategories=function(e){return n=n.concat(t._prepareCategories(e)),t._draw(),t},this.removeCategories=function(e){return n=n.filter(function(t){return -1===e.indexOf(t)}),t._draw(),t},this._prepareCategories=function(e){return e.forEach(function(e){e.color=e.colors.map(function(e){return l.convertColorToHex(e,!0)})}),e},this._drawDiscrete=function(e,n,o){function a(e){var t=Math.ceil(e.domain().length/s),n=e.domain().filter(function(e,n){return n%t==0});return i.axisBottom(e).tickFormat(i.format(".2s")).tickValues(n)}if(-1===["linear","log","sqrt","pow","quantile","ordinal"].indexOf(o.scale))throw Error("unsupported scale");if("ordinal"===o.scale){f=i.scaleOrdinal().domain(o.domain).range(o.colors),t._renderDiscreteColors(e,o.domain,f,n,function(e){return e});var u,c,f,p,h,m,g=i.scaleBand().domain(o.domain).rangeRound([0,n]),v=Math.ceil(o.domain.length/s),y=o.domain.filter(function(e,t){return t%v==0});p=i.axisBottom(g).tickValues(y)}else if("quantile"===o.scale){u=[0,o.colors.length],h=l.range(0,o.colors.length-1),c=i.scaleQuantile().domain(o.domain).range(h),f=i.scaleQuantize().domain(u).range(o.colors),t._renderDiscreteColors(e,h,f,n,function(e){return c.invertExtent(e).join(" - ")});var b=[c.invertExtent(0)[0]];b=b.concat(h.map(function(e){return c.invertExtent(e)[1]})),p=a(g=i.scalePoint().domain(b).range([0,n]))}else if(-1!==["linear","log","sqrt","pow"].indexOf(o.scale)){u=[0,o.colors.length],c=i["scale"+o.scale.charAt(0).toUpperCase()+o.scale.slice(1)]().domain(o.domain).range(u).nice(),f=i.scaleQuantize().domain(u).range(o.colors),h=l.range(0,o.colors.length-1);var x=Math.max.apply(null,o.domain.map(function(e){return d(e)}));t._renderDiscreteColors(e,h,f,n,function(e){return t._popupFormatter(c.invert(e),x)+" - "+t._popupFormatter(c.invert(e+1),x)}),(m=h.slice()).push(o.colors.length),p=a(g=i.scalePoint().domain(m.map(function(e){return c.invert(e)})).range([0,n]))}o.endAxisLabelOnly&&p.tickValues([g.domain()[0],g.domain()[g.domain().length-1]]),t._renderAxis(e,p)},this._renderDiscreteColors=function(e,n,i,o,a){e.selectAll("rect").data(n).enter().append("rect").attr("width",o/n.length).attr("height","20px").attr("fill",function(e){return i(e)}).attr("transform",function(e,t){return"translate("+t*o/n.length+" ,0)"}).on("mousemove",function(e,n){t._showPopup(e,a(n))}).on("mouseout",t._hidePopup)},this._drawContinous=function(e,n,o){if(-1===["linear","log","sqrt","pow"].indexOf(o.scale))throw Error("unsupported scale");var a,l,c,f=[0];for(c=1;c<o.domain.length-1;c++)f.push(n/(o.domain.length-1)*c);f.push(n),a=i["scale"+o.scale.charAt(0).toUpperCase()+o.scale.slice(1)]().domain(o.domain).range(f).nice(),"log"===o.scale&&o.base&&a.base(o.base),"pow"===o.scale&&o.exponent&&a.exponent(o.exponent);var p=u(),h=Math.max.apply(null,o.domain.map(function(e){return d(e)})),m=e.append("defs").append("linearGradient").attr("id","gradient"+p);for(m.append("stop").attr("offset","0%").attr("stop-color",o.colors[0]),c=1;c<o.colors.length-1;c++)m.append("stop").attr("offset",(100/(o.colors.length-1)*c).toFixed(6)+"%").attr("stop-color",o.colors[c]);m.append("stop").attr("offset","100%").attr("stop-color",o.colors[o.colors.length-1]),e.append("rect").attr("fill","url(#gradient"+p+")").attr("width",n).attr("height","20px").on("mousemove",function(e){var n=a.invert(i.pointer(e)[0]),o=t._popupFormatter(n,h);t._showPopup(e,o)}).on("mouseout",t._hidePopup),l=i.axisBottom(a).ticks(s,".2s"),o.endAxisLabelOnly&&l.tickValues([o.domain[0],o.domain[o.domain.length-1]]),t._renderAxis(e,l)},this._renderAxis=function(e,t){e.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(t)},this._popupFormatter=function(e,t){return t=Math.min(t=Math.min(t,d(e=parseFloat(e.toFixed(8)))),Math.max(3,7-Math.trunc(e).toString().length)),i.format("."+t+"f")(e)},this.width=function(e){return void 0===e?a:(e!==a&&(a=e,t._prepareCategories(n),t._draw()),t)},this.ticks=function(e){return void 0===e?s:(e!==s&&(s=e,t._prepareCategories(n),t._draw()),t)},this._showPopup=function(e,n){var o=i.pointer(e,t.canvas());t.popup.text(n);var a=t.canvas().clientWidth,s=t.popup.node().clientWidth;t.popup.style("left",o[0]-(o[0]+s-a>-10?s:0)+"px").style("top",o[1]-22+"px").transition().duration(200).style("opacity",1)},this._hidePopup=function(){t.popup.transition().duration(200).style("opacity",0)},this};function d(e){if(!isFinite(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;){if(!isFinite(e*t))return 0;t*=10,n++}return n}a(c,o),s("dom","colorLegend",c),e.exports=c},3344(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.primitive=function(){"use strict";if(!(this instanceof i.primitive))return new i.primitive;var e=0,t=0,n=null;return this.indices=function(){return n},this.numberOfIndices=function(){return n.length},this.primitiveType=function(){return e},this.setPrimitiveType=function(t){e=t},this.indicesValueType=function(){return t},this.setIndicesValueType=function(e){t=e},this.setIndices=function(e){n=new Uint16Array(e)},this},i.triangles=function(){return this instanceof i.triangles?(i.primitive.call(this),this.setPrimitiveType(i.GL.TRIANGLES),this.setIndicesValueType(i.GL.UNSIGNED_SHORT),this):new i.triangles},o(i.triangles,i.primitive),i.points=function(){return this instanceof i.points?(i.primitive.call(this),this.setPrimitiveType(i.GL.POINTS),this.setIndicesValueType(i.GL.UNSIGNED_SHORT),this):new i.points},o(i.points,i.primitive),i.sourceData=function(e){"use strict";if(!(this instanceof i.sourceData))return new i.sourceData(e);var t={},n=[],o=(e=e||{}).name||"Source "+new Date().toISOString(),a=function(){this.m_numberOfComponents=0,this.m_dataType=0,this.m_dataTypeSize=0,this.m_normalized=!1,this.m_stride=0,this.m_offset=0};return this.data=function(){return n},this.getData=function(){return this.data()},this.dataToFloat32Array=function(){return n instanceof Float32Array||(n=new Float32Array(n)),n},this.setData=function(e){e instanceof Array||e instanceof Float32Array?n=e instanceof Float32Array?e:e.slice(0):console.log("[error] Requires array")},this.addAttribute=function(e,n,i,o,s,l,u){if(!t.hasOwnProperty(e)){var c=new a;c.m_dataType=n,c.m_dataTypeSize=i,c.m_offset=o,c.m_stride=s,c.m_numberOfComponents=l,c.m_normalized=u,t[e]=c}},this.hasKey=function(e){return t.hasOwnProperty(e)},this.keys=function(){return Object.keys(t)},this.attributeNumberOfComponents=function(e){return t.hasOwnProperty(e)?t[e].m_numberOfComponents:0},this.normalized=function(e){return!!t.hasOwnProperty(e)&&t[e].m_normalized},this.attributeDataType=function(e){if(t.hasOwnProperty(e))return t[e].m_dataType},this.attributeOffset=function(e){return t.hasOwnProperty(e)?t[e].m_offset:0},this.attributeStride=function(e){return t.hasOwnProperty(e)?t[e].m_stride:0},this.pushBack=function(e){},this.insert=function(e){var t;if(!n.length&&e.length&&e instanceof Float32Array){n=e;return}if(n.slice||!n.length&&e.slice||(n=Array.prototype.slice.call(n)),e.length)if(!n.length&&e.slice)n=e.slice(0);else for(t=0;t<e.length;t+=1)n[n.length]=e[t];else n[n.length]=e},this.name=function(){return o},this},i.sourceDataAnyfv=function(e,t,n){return this instanceof i.sourceDataAnyfv?(i.sourceData.call(this,n),this.addAttribute(t,i.GL.FLOAT,4,0,4*e,e,!1),this.pushBack=function(e){this.insert(e)},this):new i.sourceDataAnyfv(e,t,n)},o(i.sourceDataAnyfv,i.sourceData),i.sourceDataP3fv=function(e){return this instanceof i.sourceDataP3fv?(i.sourceData.call(this,e),this.addAttribute(i.vertexAttributeKeys.Position,i.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(e){this.insert(e)},this):new i.sourceDataP3fv(e)},o(i.sourceDataP3fv,i.sourceData),i.sourceDataT2fv=function(e){return this instanceof i.sourceDataT2fv?(i.sourceData.call(this,e),this.addAttribute(i.vertexAttributeKeys.TextureCoordinate,i.GL.FLOAT,4,0,8,2,!1),this.pushBack=function(e){this.insert(e)},this):new i.sourceDataT2fv(e)},o(i.sourceDataT2fv,i.sourceData),i.geometryData=function(){"use strict";if(!(this instanceof i.geometryData))return new i.geometryData;i.data.call(this);var e=[],t=[],n=[0,0,0,0,0,0],o=a(),s=a();return this.type=function(){return i.data.geometry},this.name=function(){return""},this.addSource=function(e){return -1===t.indexOf(e)&&(t.push(e),e.hasKey(i.vertexAttributeKeys.Position)&&s.modified(),!0)},this.source=function(e){return e<t.length?t[e]:0},this.sourceByName=function(e){for(var n=0;n<t.length;n+=1)if(t[n].name()===e)return t[n];return 0},this.numberOfSources=function(){return t.length},this.sourceData=function(e){var n;for(n=0;n<t.length;n+=1)if(t[n].hasKey(e))return t[n];return null},this.addPrimitive=function(t){return e.push(t),!0},this.primitive=function(t){return t<e.length?e[t]:null},this.numberOfPrimitives=function(){return e.length},this.bounds=function(){return s.getMTime()>o.getMTime()&&this.computeBounds(),n},this.boundsDirty=function(e){return e&&s.modified(),s.getMTime()>o.getMTime()},this.setBounds=function(e,t,i,a,s,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=a,n[4]=s,n[5]=l,o.modified(),!0},this},o(i.geometryData,i.data)},3357(e,t,n){"use strict";function i(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}n.d(t,{A:()=>i})},3366(e,t,n){var i=n(4099),o=n(8899);i.graphicsObject=function(e){return this instanceof i.graphicsObject?(i.object.call(this),this._setup=function(e){return!1},this._cleanup=function(e){return!1},this):new i.graphicsObject},o(i.graphicsObject,i.object)},3376(e){e.exports="/* contourFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float value;\nattribute float opacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main(void)\n{\n  /* Don't use z values */\n  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);\n  if (scrPos.w != 0.0) {\n    scrPos = scrPos / scrPos.w;\n  }\n  valueVar = value;\n  opacityVar = opacity;\n  gl_Position = scrPos;\n}\n"},3385(e,t,n){"use strict";function i(e){return e<0?-1:1}n.d(t,{A:()=>i})},3401(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},3419(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(6e3),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},3457(e){e.exports="/* polygonFeature vertex shader */\n\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\n\nvoid main(void)\n{\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos/clipPos.w;\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  gl_Position = clipPos;\n}\n"},3479(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".geojs-scale-widget-bar{stroke:#000}.geojs-scale-widget-text{font-weight:bold;font-size:16px;font-family:serif}","",{version:3,sources:["webpack://./src/ui/scaleWidget.styl"],names:[],mappings:"AAAA,wBACE,WAAO,CACT,yBACE,gBAAY,CACZ,cAAU,CACV,iBAAY",sourcesContent:[".geojs-scale-widget-bar\n  stroke black\n.geojs-scale-widget-text\n  font-weight bold\n  font-size 16px\n  font-family serif\n"],sourceRoot:""}]);let l=s},3508(e,t,n){var i=n(8795);e.exports={state:i.state,actionOwner:i.actionOwner,annotation:i.annotation,_editHandleFeatureLevel:i._editHandleFeatureLevel,defaultEditHandleStyle:i.defaultEditHandleStyle,constrainAspectRatio:i.constrainAspectRatio,baseAnnotation:i,circleAnnotation:n(9375),ellipseAnnotation:n(5463),lineAnnotation:n(397),pointAnnotation:n(2071),polygonAnnotation:n(3183),rectangleAnnotation:n(5264),squareAnnotation:n(7784)}},3518(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(727),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},3532(e,t,n){e.exports={hammerjs:n(3599)}},3544(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},3546(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>l,init:()=>s,inverse:()=>u,names:()=>c});var i=n(4181),o=n(3357),a=n(384);function s(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function l(e){var t,n,o,s,l,u,c,d=e.x,f=e.y;return o=(0,i.A)(d-this.long0,this.over),t=Math.sin(f),n=Math.cos(f),s=Math.cos(o),(l=this.sin_p14*t+this.cos_p14*n*s)>0||Math.abs(l)<=a.H0?(u=this.x0+this.a*n*Math.sin(o)/l,c=this.y0+this.a*(this.cos_p14*t-this.sin_p14*n*s)/l):(u=this.x0+this.infinity_dist*n*Math.sin(o),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*s)),e.x=u,e.y=c,e}function u(e){var t,n,a,s,l,u;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.sin(s=Math.atan2(t,this.rc)),a=Math.cos(s),u=(0,o.A)(a*this.sin_p14+e.y*n*this.cos_p14/t),l=Math.atan2(e.x*n,t*this.cos_p14*a-e.y*this.sin_p14*n),l=(0,i.A)(this.long0+l,this.over)):(u=this.phic0,l=0),e.x=l,e.y=u,e}var c=["gnom"];let d={init:s,forward:l,inverse:u,names:c}},3594(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2];return e[0]=o*u-a*l,e[1]=a*s-i*u,e[2]=i*l-o*s,e}},3599(e){e.exports=function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i,o,a="function"!=typeof Object.assign?function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign,s=["","webkit","Moz","MS","ms","o"],l="u"<typeof document?{style:{}}:document.createElement("div"),u=Math.round,c=Math.abs,d=Date.now;function f(e,t){for(var n,i,o=t[0].toUpperCase()+t.slice(1),a=0;a<s.length;){if((i=(n=s[a])?n+o:t)in e)return i;a++}}o="u"<typeof window?{}:window;var p=f(l.style,"touchAction"),h=void 0!==p,m="compute",g="auto",v="manipulation",y="none",b="pan-x",x="pan-y",w=function(){if(!h)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){return e[n]=!t||o.CSS.supports("touch-action",n)}),e}(),A="ontouchstart"in o,C=void 0!==f(o,"PointerEvent"),S=A&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_="touch",T="mouse",O=["x","y"],P=["clientX","clientY"];function M(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function E(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function D(e,t){return e.indexOf(t)>-1}var I=function(){function e(e,t){this.manager=e,this.set(t)}var t=e.prototype;return t.set=function(e){e===m&&(e=this.compute()),h&&this.manager.element.style&&w[e]&&(this.manager.element.style[p]=e),this.actions=e.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var e=[];M(this.manager.recognizers,function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))});var t=e.join(" ");if(D(t,y))return y;var n=D(t,b),i=D(t,x);return n&&i?y:n||i?n?b:x:D(t,v)?v:g},t.preventDefaults=function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,o=D(i,y)&&!w[y],a=D(i,x)&&!w[x],s=D(i,b)&&!w[b];if(o){var l=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(l&&u&&c)return}if((!s||!a)&&(o||a&&6&n||s&&24&n))return this.preventSrc(t)},t.preventSrc=function(e){this.manager.session.prevented=!0,e.preventDefault()},e}();function k(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function N(e){var t=e.length;if(1===t)return{x:u(e[0].clientX),y:u(e[0].clientY)};for(var n=0,i=0,o=0;o<t;)n+=e[o].clientX,i+=e[o].clientY,o++;return{x:u(n/t),y:u(i/t)}}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:N(t),deltaX:e.deltaX,deltaY:e.deltaY}}function B(e,t,n){n||(n=O);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(i*i+o*o)}function L(e,t,n){n||(n=O);var i=t[n[0]]-e[n[0]];return 180*Math.atan2(t[n[1]]-e[n[1]],i)/Math.PI}function F(e,t){return e===t?1:c(e)>=c(t)?e<0?2:4:t<0?8:16}function V(e,t,n){return{x:t/e||0,y:n/e||0}}function j(e,t,n){var i,o,a,s,l,u,f,p,h,m,g,v,y,b,x,w,A,C=n.pointers.length,S=n.changedPointers.length,_=1&t&&C-S==0,T=12&t&&C-S==0;n.isFirst=!!_,n.isFinal=!!T,_&&(e.session={}),n.eventType=t,o=e.session,s=(a=n.pointers).length,o.firstInput||(o.firstInput=R(n)),s>1&&!o.firstMultiple?o.firstMultiple=R(n):1===s&&(o.firstMultiple=!1),l=o.firstInput,f=(u=o.firstMultiple)?u.center:l.center,p=n.center=N(a),n.timeStamp=d(),n.deltaTime=n.timeStamp-l.timeStamp,n.angle=L(f,p),n.distance=B(f,p),h=n.center,m=o.offsetDelta||{},g=o.prevDelta||{},v=o.prevInput||{},(1===n.eventType||4===v.eventType)&&(g=o.prevDelta={x:v.deltaX||0,y:v.deltaY||0},m=o.offsetDelta={x:h.x,y:h.y}),n.deltaX=g.x+(h.x-m.x),n.deltaY=g.y+(h.y-m.y),n.offsetDirection=F(n.deltaX,n.deltaY),y=V(n.deltaTime,n.deltaX,n.deltaY),n.overallVelocityX=y.x,n.overallVelocityY=y.y,n.overallVelocity=c(y.x)>c(y.y)?y.x:y.y,n.scale=u?(b=u.pointers,B(a[0],a[1],P)/B(b[0],b[1],P)):1,n.rotation=u?(x=u.pointers,L(a[1],a[0],P)+L(x[1],x[0],P)):0,n.maxPointers=o.prevInput?n.pointers.length>o.prevInput.maxPointers?n.pointers.length:o.prevInput.maxPointers:n.pointers.length,function(e,t){var n,i,o,a,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(8!==t.eventType&&(l>25||void 0===s.velocity)){var u=t.deltaX-s.deltaX,d=t.deltaY-s.deltaY,f=V(l,u,d);i=f.x,o=f.y,n=c(f.x)>c(f.y)?f.x:f.y,a=F(u,d),e.lastInterval=t}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=o,t.direction=a}(o,n),w=e.element,k(i=(A=n.srcEvent).composedPath?A.composedPath()[0]:A.path?A.path[0]:A.target,w)&&(w=i),n.target=w,e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function G(e){return e.trim().split(/\s+/g)}function U(e,t,n){M(G(t),function(t){e.addEventListener(t,n,!1)})}function z(e,t,n){M(G(t),function(t){e.removeEventListener(t,n,!1)})}function W(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||window}var H=function(){function e(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}var t=e.prototype;return t.handler=function(){},t.init=function(){this.evEl&&U(this.element,this.evEl,this.domHandler),this.evTarget&&U(this.target,this.evTarget,this.domHandler),this.evWin&&U(W(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&z(this.element,this.evEl,this.domHandler),this.evTarget&&z(this.target,this.evTarget,this.domHandler),this.evWin&&z(W(this.element),this.evWin,this.domHandler)},e}();function q(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return -1}var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},X={2:_,3:"pen",4:T,5:"kinect"},Y="pointerdown",Z="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Y="MSPointerDown",Z="MSPointerMove MSPointerUp MSPointerCancel");var J=function(e){function n(){var t,i=n.prototype;return i.evEl=Y,i.evWin=Z,t=e.apply(this,arguments)||this,t.store=t.manager.session.pointerEvents=[],t}return t(n,e),n.prototype.handler=function(e){var t=this.store,n=!1,i=K[e.type.toLowerCase().replace("ms","")],o=X[e.pointerType]||e.pointerType,a=o===_,s=q(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),!(s<0)&&(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))},n}(H);function Q(e){return Array.prototype.slice.call(e,0)}function $(e,t,n){for(var i=[],o=[],a=0;a<e.length;){var s=t?e[a][t]:e[a];0>q(o,s)&&i.push(e[a]),o[a]=s,a++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}var ee={touchstart:1,touchmove:2,touchend:4,touchcancel:8},et=function(e){function n(){var t;return n.prototype.evTarget="touchstart touchmove touchend touchcancel",t=e.apply(this,arguments)||this,t.targetIds={},t}return t(n,e),n.prototype.handler=function(e){var t=ee[e.type],n=en.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:_,srcEvent:e})},n}(H);function en(e,t){var n,i,o=Q(e.touches),a=this.targetIds;if(3&t&&1===o.length)return a[o[0].identifier]=!0,[o,o];var s=Q(e.changedTouches),l=[],u=this.target;if(i=o.filter(function(e){return k(e.target,u)}),1===t)for(n=0;n<i.length;)a[i[n].identifier]=!0,n++;for(n=0;n<s.length;)a[s[n].identifier]&&l.push(s[n]),12&t&&delete a[s[n].identifier],n++;if(l.length)return[$(i.concat(l),"identifier",!0),l]}var er={mousedown:1,mousemove:2,mouseup:4},ei=function(e){function n(){var t,i=n.prototype;return i.evEl="mousedown",i.evWin="mousemove mouseup",t=e.apply(this,arguments)||this,t.pressed=!1,t}return t(n,e),n.prototype.handler=function(e){var t=er[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:T,srcEvent:e}))},n}(H);function eo(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n),setTimeout(function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)},2500)}}function ea(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,eo.call(this,t)):12&e&&eo.call(this,t)}function es(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],a=Math.abs(t-o.x),s=Math.abs(n-o.y);if(a<=25&&s<=25)return!0}return!1}var el=function(e){function i(t,i){var o;return(o=e.call(this,t,i)||this).handler=function(e,t,i){var a=i.pointerType===_,s=i.pointerType===T;if(!s||!i.sourceCapabilities||!i.sourceCapabilities.firesTouchEvents){if(a)ea.call(n(n(o)),t,i);else if(s&&es.call(n(n(o)),i))return;o.callback(e,t,i)}},o.touch=new et(o.manager,o.handler),o.mouse=new ei(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}return t(i,e),i.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},i}(H);function eu(e,t,n){return!!Array.isArray(e)&&(M(e,n[t],n),!0)}var ec=1;function ed(e,t){var n=t.manager;return n?n.get(e):e}function ef(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}var ep=function(){function t(t){void 0===t&&(t={}),this.options=e({enable:!0},t),this.id=ec++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var n=t.prototype;return n.set=function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(e){if(eu(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ed(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},n.dropRecognizeWith=function(e){return eu(e,"dropRecognizeWith",this)||(e=ed(e,this),delete this.simultaneous[e.id]),this},n.requireFailure=function(e){if(eu(e,"requireFailure",this))return this;var t=this.requireFail;return -1===q(t,e=ed(e,this))&&(t.push(e),e.requireFailure(this)),this},n.dropRequireFailure=function(e){if(eu(e,"dropRequireFailure",this))return this;e=ed(e,this);var t=q(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(e){return!!this.simultaneous[e.id]},n.emit=function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+ef(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+ef(n))},n.tryEmit=function(e){if(this.canEmit())return this.emit(e);this.state=32},n.canEmit=function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},n.recognize=function(e){var t=a({},e);if(!E(this.options.enable,[this,t])){this.reset(),this.state=32;return}56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},n.process=function(e){},n.getTouchAction=function(){},n.reset=function(){},t}(),eh=function(n){function i(t){var i;return void 0===t&&(t={}),(i=n.call(this,e({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}t(i,n);var o=i.prototype;return o.getTouchAction=function(){return[v]},o.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,o=e.distance<n.threshold,a=e.deltaTime<n.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(o&&a&&i){if(4!==e.eventType)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<n.interval,l=!this.pCenter||B(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,l&&s?this.count+=1:this.count=1,this._input=e,0==this.count%n.taps)if(!this.hasRequireFailures())return 8;else return this._timer=setTimeout(function(){t.state=8,t.tryEmit()},n.interval),2}return 32},o.failTimeout=function(){var e=this;return this._timer=setTimeout(function(){e.state=32},this.options.interval),32},o.reset=function(){clearTimeout(this._timer)},o.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},i}(ep),em=function(n){function i(t){return void 0===t&&(t={}),n.call(this,e({pointers:1},t))||this}t(i,n);var o=i.prototype;return o.attrTest=function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},o.process=function(e){var t=this.state,n=e.eventType,i=6&t,o=this.attrTest(e);return i&&(8&n||!o)?16|t:i||o?4&n?8|t:2&t?4|t:2:32},i}(ep);function eg(e){return 16===e?"down":8===e?"up":2===e?"left":4===e?"right":""}var ev=function(n){function i(t){var i;return void 0===t&&(t={}),(i=n.call(this,e({event:"pan",threshold:10,pointers:1,direction:30},t))||this).pX=null,i.pY=null,i}t(i,n);var o=i.prototype;return o.getTouchAction=function(){var e=this.options.direction,t=[];return 6&e&&t.push(x),24&e&&t.push(b),t},o.directionTest=function(e){var t=this.options,n=!0,i=e.distance,o=e.direction,a=e.deltaX,s=e.deltaY;return o&t.direction||(6&t.direction?(o=0===a?1:a<0?2:4,n=a!==this.pX,i=Math.abs(e.deltaX)):(o=0===s?1:s<0?8:16,n=s!==this.pY,i=Math.abs(e.deltaY))),e.direction=o,n&&i>t.threshold&&o&t.direction},o.attrTest=function(e){return em.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},o.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=eg(e.direction);t&&(e.additionalEvent=this.options.event+t),n.prototype.emit.call(this,e)},i}(em),ey=function(n){function i(t){return void 0===t&&(t={}),n.call(this,e({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},t))||this}t(i,n);var o=i.prototype;return o.getTouchAction=function(){return ev.prototype.getTouchAction.call(this)},o.attrTest=function(e){var t,i=this.options.direction;return 30&i?t=e.overallVelocity:6&i?t=e.overallVelocityX:24&i&&(t=e.overallVelocityY),n.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&c(t)>this.options.velocity&&4&e.eventType},o.emit=function(e){var t=eg(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)},i}(em),eb=function(n){function i(t){return void 0===t&&(t={}),n.call(this,e({event:"pinch",threshold:0,pointers:2},t))||this}t(i,n);var o=i.prototype;return o.getTouchAction=function(){return[y]},o.attrTest=function(e){return n.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},o.emit=function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}n.prototype.emit.call(this,e)},i}(em),ex=function(n){function i(t){return void 0===t&&(t={}),n.call(this,e({event:"rotate",threshold:0,pointers:2},t))||this}t(i,n);var o=i.prototype;return o.getTouchAction=function(){return[y]},o.attrTest=function(e){return n.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},i}(em),ew=function(n){function i(t){var i;return void 0===t&&(t={}),(i=n.call(this,e({event:"press",pointers:1,time:251,threshold:9},t))||this)._timer=null,i._input=null,i}t(i,n);var o=i.prototype;return o.getTouchAction=function(){return[g]},o.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,o=e.distance<n.threshold,a=e.deltaTime>n.time;if(this._input=e,o&&i&&(!(12&e.eventType)||a)){if(1&e.eventType)this.reset(),this._timer=setTimeout(function(){t.state=8,t.tryEmit()},n.time);else if(4&e.eventType)return 8}else this.reset();return 32},o.reset=function(){clearTimeout(this._timer)},o.emit=function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))},i}(ep),eA={domEvents:!1,touchAction:m,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},eC=[[ex,{enable:!1}],[eb,{enable:!1},["rotate"]],[ey,{direction:6}],[ev,{direction:6},["swipe"]],[eh],[eh,{event:"doubletap",taps:2},["tap"]],[ew]];function eS(e,t){var n,i=e.element;i.style&&(M(e.options.cssProps,function(o,a){n=f(i.style,a),t?(e.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}var e_=function(){function e(e,t){var n,i=this;this.options=a({},eA,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this.options.inputClass)?n:C?J:S?et:A?el:ei)(this,j),this.touchAction=new I(this,this.options.touchAction),eS(this,!0),M(this.options.recognizers,function(e){var t=i.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}var t=e.prototype;return t.set=function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},t.stop=function(e){this.session.stopped=e?2:1},t.recognize=function(e){var t,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(e);var i=this.recognizers,o=n.curRecognizer;(!o||o&&8&o.state)&&(n.curRecognizer=null,o=null);for(var a=0;a<i.length;)t=i[a],2!==n.stopped&&(!o||t===o||t.canRecognizeWith(o))?t.recognize(e):t.reset(),!o&&14&t.state&&(n.curRecognizer=t,o=t),a++}},t.get=function(e){if(e instanceof ep)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null},t.add=function(e){if(eu(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},t.remove=function(e){if(eu(e,"remove",this))return this;var t=this.get(e);if(e){var n=this.recognizers,i=q(n,t);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},t.on=function(e,t){if(void 0===e||void 0===t)return this;var n=this.handlers;return M(G(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},t.off=function(e,t){if(void 0===e)return this;var n=this.handlers;return M(G(e),function(e){t?n[e]&&n[e].splice(q(n[e],t),1):delete n[e]}),this},t.emit=function(e,t){this.options.domEvents&&((n=document.createEvent("Event")).initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n));var n,i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](t),o++}},t.destroy=function(){this.element&&eS(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),eT={touchstart:1,touchmove:2,touchend:4,touchcancel:8},eO=function(e){function n(){var t,i=n.prototype;return i.evTarget="touchstart",i.evWin="touchstart touchmove touchend touchcancel",t=e.apply(this,arguments)||this,t.started=!1,t}return t(n,e),n.prototype.handler=function(e){var t=eT[e.type];if(1===t&&(this.started=!0),this.started){var n=eP.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:_,srcEvent:e})}},n}(H);function eP(e,t){var n=Q(e.touches),i=Q(e.changedTouches);return 12&t&&(n=$(n.concat(i),"identifier",!0)),[n,i]}function eM(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,i,n),e.apply(this,arguments)}}var eE=eM(function(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;)(!n||n&&void 0===e[i[o]])&&(e[i[o]]=t[i[o]]),o++;return e},"extend","Use `assign`."),eD=eM(function(e,t){return eE(e,t,!0)},"merge","Use `assign`.");function eI(e,t){return function(){return e.apply(t,arguments)}}return(i=function(t,n){return void 0===n&&(n={}),new e_(t,e({recognizers:eC.concat()},n))}).VERSION="2.0.17-rc",i.DIRECTION_ALL=30,i.DIRECTION_DOWN=16,i.DIRECTION_LEFT=2,i.DIRECTION_RIGHT=4,i.DIRECTION_UP=8,i.DIRECTION_HORIZONTAL=6,i.DIRECTION_VERTICAL=24,i.DIRECTION_NONE=1,i.DIRECTION_DOWN=16,i.INPUT_START=1,i.INPUT_MOVE=2,i.INPUT_END=4,i.INPUT_CANCEL=8,i.STATE_POSSIBLE=1,i.STATE_BEGAN=2,i.STATE_CHANGED=4,i.STATE_ENDED=8,i.STATE_RECOGNIZED=8,i.STATE_CANCELLED=16,i.STATE_FAILED=32,i.Manager=e_,i.Input=H,i.TouchAction=I,i.TouchInput=et,i.MouseInput=ei,i.PointerEventInput=J,i.TouchMouseInput=el,i.SingleTouchInput=eO,i.Recognizer=ep,i.AttrRecognizer=em,i.Tap=eh,i.Pan=ev,i.Swipe=ey,i.Pinch=eb,i.Rotate=ex,i.Press=ew,i.on=U,i.off=z,i.each=M,i.merge=eD,i.extend=eE,i.bindFn=eI,i.assign=a,i.inherit=function(e,t,n){var i,o=t.prototype;(i=e.prototype=Object.create(o)).constructor=e,i._super=o,n&&a(i,n)},i.bindFn=eI,i.prefixed=f,i.toArray=Q,i.inArray=q,i.uniqueArray=$,i.splitStr=G,i.boolOrFn=E,i.hasParent=k,i.addEventListeners=U,i.removeEventListeners=z,i.defaults=a({},eA,{preset:eC}),i}()},3604(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="},3618(e){e.exports=function(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}},3619(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";e.exports=function(){var e,n=[];for(e=0,n.length=8;e<8;e+=1)n[e]=t.charAt(Math.floor(Math.random()*t.length));return n.join("")}},3636(e,t,n){e.exports=n(220)},3640(e){e.exports="/* pixelmapFeature fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform sampler2D lutSampler;\nuniform int lutWidth;\nuniform int lutHeight;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  // to add anti-aliasing, we would need to know the current pixel size\n  // (probably computed in the vertex shader) and then sample the base image at\n  // multiple points, then average the output color.\n  highp vec4 lutValue = texture2D(sampler2d, iTextureCoord);\n  highp vec2 lutCoord;\n  lutCoord.s = (\n    mod(\n      // add 0.5 to handle float imprecision\n      floor(lutValue.r * 255.0 + 0.5) +\n      floor(lutValue.g * 255.0 + 0.5) * 256.0,\n      float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutWidth);\n  // Our image is top-down, so invert the coordinate\n  lutCoord.t = 1.0 - (\n    floor(\n      (\n        // add 0.5 to handle float imprecision\n        floor(lutValue.r * 255.0 + 0.5) +\n        floor(lutValue.g * 255.0 + 0.5) * 256.0 +\n        floor(lutValue.b * 255.0 + 0.5) * 256.0 * 256.0\n        // We may want an option to use the alpha channel to allow more indices\n      ) / float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutHeight);\n  if (lutCoord.t < 0.0) {\n    discard;\n  }\n  mediump vec4 color = texture2D(lutSampler, lutCoord);\n\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},3690(e,t,n){"use strict";function i(e){return .375*e*(1+.25*e*(1+.46875*e))}n.d(t,{A:()=>i})},3757(e,t,n){var i=n(8899),o=n(4897),a=function(e){"use strict";if(!(this instanceof a))return new a(e);o.call(this);var t=this,n=0,i=0,s=void 0===(e=e||{}).layer?null:e.layer,l=void 0===e.canvas?null:e.canvas,u=!1;return this.layer=function(){return s},this.canvas=function(e){return void 0===e?l:(l=e,t.modified(),t)},this.map=function(){return s?s.map():null},this.initialized=function(e){return void 0===e?u:(u=e,t)},this.api=function(){throw Error("Should be implemented by derived classes")},this.width=function(){return n},this.height=function(){return i},this._setWidthHeight=function(e,o){return n=e,i=o,t},this._init=function(){return t},this._resize=function(e,n,i,o){return t._setWidthHeight(i,o),t},this._render=function(){return t},this};i(a,o),e.exports=a},3768(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>u,forward:()=>a,init:()=>o,inverse:()=>s,names:()=>l});var i=n(2516);function o(){this.name="geocent"}function a(e){return(0,i.jX)(e,this.es,this.a)}function s(e){return(0,i.Rw)(e,this.es,this.a,this.b)}var l=["Geocentric","geocentric","geocent","Geocent"];let u={init:o,forward:a,inverse:s,names:l}},3790(e){e.exports="/* quadFeature Color fragment shader */\n\nvarying mediump vec3 iVertexColor;\nuniform mediump float opacity;\n\nvoid main(void) {\n  gl_FragColor = vec4(iVertexColor, opacity);\n}\n"},3807(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,c=n*s,d=i*s,f=i*l,p=o*s,h=o*l,m=o*u,g=a*s,v=a*l,y=a*u;return e[0]=1-f-m,e[3]=d-y,e[6]=p+v,e[1]=d+y,e[4]=1-c-m,e[7]=h-g,e[2]=p-v,e[5]=h+g,e[8]=1-c-f,e}},3851(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},3853(e){e.exports="/* quadFeature Image vertex shader */\n\nattribute vec3 vertexPosition;\nattribute vec2 textureCoord;\nuniform float zOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying highp vec2 iTextureCoord;\nuniform highp vec4 cropsource;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  if (cropsource.p > cropsource.s && cropsource.q > cropsource.t && (cropsource.p < 1.0 || cropsource.s > 0.0 || cropsource.q < 1.0 || cropsource.t > 0.0)) {\n    iTextureCoord.s = textureCoord.s * (cropsource.p - cropsource.s) + cropsource.s;\n    iTextureCoord.t = textureCoord.t * (cropsource.q - cropsource.t) + cropsource.t;\n  } else {\n    iTextureCoord = textureCoord;\n  }\n}\n"},3863(e){e.exports=function(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},3900(e){e.exports=function(e,t){if(e===t){var n=t[1],i=t[2],o=t[3],a=t[6],s=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=o,e[13]=s,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},3928(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[3]*i+n[7]*o+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*i+n[4]*o+n[8]*a+n[12])/s,e[1]=(n[1]*i+n[5]*o+n[9]*a+n[13])/s,e[2]=(n[2]*i+n[6]*o+n[10]*a+n[14])/s,e}},3941(e){var t=function(e,t,n,i,o){var a,s=0;return"boolean"!=typeof t&&(o=i,i=n,n=t,t=void 0),"function"!=typeof i&&(o=i,i=function(){}),function(){var l=this,u=new Date-s,c=arguments;function d(){s=+new Date,n.apply(l,c)}i.apply(l,c),o&&!a&&d(),a&&clearTimeout(a),void 0===o&&u>e?d():!0!==t&&(a=setTimeout(o?function(){a=void 0}:d,void 0===o?e-u:e))}};e.exports={throttle:t,debounce:function(e,n,i,o){return"boolean"!=typeof n&&(o=i,i=n,n=!1),t(e,!1,i,o=o||function(){},!!n)}}},3987(e,t,n){"use strict";function i(e){return .05859375*e*e*(1+.75*e)}n.d(t,{A:()=>i})},4008(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(5446),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e),n(8743).call(this,e);var t=this;return this._build=function(){t.actors()[0]&&t.renderer().contextRenderer().removeActor(t.actors()[0]),t.createGLMeshColored(t._createGrids()),t.renderer().contextRenderer().addActor(t.actors()[0]),t.buildTime().modified()},this._init(e),this};i(s,a),o("webgl","grid",s),e.exports=s},4018(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},4099(e){e.exports={}},4101(e){e.exports=function(e,t,n){var i=n[0],o=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},4128(e){var t={};t.layerAdd="geo_layerAdd",t.layerRemove="geo_layerRemove",t.layerMove="geo_layerMove",t.zoom="geo_zoom",t.rotate="geo_rotate",t.pan="geo_pan",t.resize="geo_resize",t.draw="geo_draw",t.drawEnd="geo_drawEnd",t.unhidden="geo_unhidden",t.hidden="geo_hidden",t.mousemove="geo_mousemove",t.mouseclick="geo_mouseclick",t.mouseup="geo_mouseup",t.mousedown="geo_mousedown",t.brush="geo_brush",t.brushend="geo_brushend",t.brushstart="geo_brushstart",t.select="geo_select",t.zoomselect="geo_zoomselect",t.unzoomselect="geo_unzoomselect",t.actiondown="geo_actiondown",t.actionmove="geo_actionmove",t.actionup="geo_actionup",t.actionselection="geo_actionselection",t.actionwheel="geo_actionwheel",t.keyaction="geo_keyaction",t.transitionstart="geo_transitionstart",t.transitionend="geo_transitionend",t.transitioncancel="geo_transitioncancel",t.parallelprojection="geo_parallelprojection",t.feature={mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",mousedown:"geo_feature_mousedown",mouseup:"geo_feature_mouseup",brushend:"geo_feature_brushend",brush:"geo_feature_brush"},t.pixelmap={prepared:"geo_pixelmap_prepared"},t.screenshot={ready:"geo_screenshot_ready"},t.camera={},t.camera.view="geo_camera_view",t.camera.projection="geo_camera_projection",t.camera.viewport="geo_camera_viewport",t.annotation={},t.annotation.add="geo_annotation_add",t.annotation.add_before="geo_annotation_add_before",t.annotation.update="geo_annotation_update",t.annotation.coordinates="geo_annotation_coordinates",t.annotation.select_edit_handle="geo_annotation_select_edit_handle",t.annotation.edit_action="geo_annotation_edit_action",t.annotation.remove="geo_annotation_remove",t.annotation.state="geo_annotation_state",t.annotation.mode="geo_annotation_mode",t.annotation.boolean="geo_annotation_boolean",t.annotation.cursor_click="geo_annotation_cursor_click",t.annotation.cursor_action="geo_annotation_cursor_action",e.exports=t},4136(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}},4157(e,t,n){var i=n(4099),o=n(8899);i.material=function(){"use strict";if(!(this instanceof i.material))return new i.material;i.graphicsObject.call(this);var e=this,t=new i.shaderProgram,n=100,o={},a={};return this.binNumber=function(){return n},this.setBinNumber=function(t){n=t,e.modified()},this.exists=function(e){return e.type()===i.materialAttributeType.Texture?o.hasOwnProperty(e.textureUnit()):a.hasOwnProperty(e.type())},this.addAttribute=function(n){return!e.exists(n)&&(n.type()===i.materialAttributeType.Texture?o[n.textureUnit()]=n:(n.type()===i.materialAttributeType.ShaderProgram&&(t=n),a[n.type()]=n),e.modified(),!0)},this.shaderProgram=function(){return t},this._cleanup=function(n){for(var i in a)a.hasOwnProperty(i)&&a[i]._cleanup(n);for(i in o)o.hasOwnProperty(i)&&o[i]._cleanup(n);t._cleanup(n),e.modified()},this.bind=function(e){var n=null;for(n in t.bind(e),a)a.hasOwnProperty(n)&&a[n]!==t&&a[n].bind(e);for(n in o)o.hasOwnProperty(n)&&o[n].bind(e)},this.undoBind=function(e){var t=null;for(t in a)a.hasOwnProperty(t)&&a[t].undoBind(e);for(t in o)o.hasOwnProperty(t)&&o[t].undoBind(e)},this.bindVertexData=function(e,t){var n=null;for(n in a)a.hasOwnProperty(n)&&a[n].bindVertexData(e,t)},this.undoBindVertexData=function(e,t){var n=null;for(n in a)a.hasOwnProperty(n)&&a[n].undoBindVertexData(e,t)},e},i.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4},o(i.material,i.graphicsObject)},4160(e,t,n){"use strict";e.exports=function(){var e;if("object"==typeof globalThis)return globalThis;try{e=this||Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},4165(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y,forward:()=>m,init:()=>h,inverse:()=>g,names:()=>v});var i=n(641),o=n(6549),a=n(3690),s=n(3987),l=n(7216),u=n(7649),c=n(4181),d=n(5949),f=n(4484),p=n(384);function h(){this.sphere||(this.e0=(0,o.A)(this.es),this.e1=(0,a.A)(this.es),this.e2=(0,s.A)(this.es),this.e3=(0,l.A)(this.es),this.ml0=this.a*(0,i.A)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function m(e){var t,n,o=e.x,a=e.y;if(o=(0,c.A)(o-this.long0,this.over),this.sphere)t=this.a*Math.asin(Math.cos(a)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(a),Math.cos(o))-this.lat0);else{var s=Math.sin(a),l=Math.cos(a),d=(0,u.A)(this.a,this.e,s),f=Math.tan(a)*Math.tan(a),p=o*Math.cos(a),h=p*p,m=this.es*l*l/(1-this.es),g=this.a*(0,i.A)(this.e0,this.e1,this.e2,this.e3,a);t=d*p*(1-h*f*(1/6-(8-f+8*m)*h/120)),n=g-this.ml0+d*s/l*h*(.5+(5-f+6*m)*h/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function g(e){e.x-=this.x0,e.y-=this.y0;var t,n,i=e.x/this.a,o=e.y/this.a;if(this.sphere){var a=o+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(a))}else{var s=this.ml0/this.a+o,l=(0,f.A)(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-p.sK)<=p.H0)return e.x=this.long0,e.y=p.sK,o<0&&(e.y*=-1),e;var h=(0,u.A)(this.a,this.e,Math.sin(l)),m=h*h*h/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(l),2),v=i*this.a/h,y=v*v;t=l-h*Math.tan(l)/m*v*v*(.5-(1+3*g)*v*v/24),n=v*(1-y*(g/3+(1+3*g)*g*y/15))/Math.cos(l)}return e.x=(0,c.A)(n+this.long0,this.over),e.y=(0,d.A)(t),e}var v=["Cassini","Cassini_Soldner","cass"];let y={init:h,forward:m,inverse:g,names:v}},4181(e,t,n){"use strict";n.d(t,{A:()=>a});var i=n(384),o=n(3385);function a(e,t){return t||Math.abs(e)<=i.DF?e:e-(0,o.A)(e)*i.JM}},4200(e,t,n){var i=n(4099),o=n(8899);i.node=function(){"use strict";if(!(this instanceof i.node))return new i.node;i.boundingObject.call(this);var e=null,t=null,n=!0;return this.material=function(){return t},this.setMaterial=function(e){return e!==t&&(t=e,this.modified(),!0)},this.visible=function(){return n},this.setVisible=function(e){return e!==n&&(n=e,this.modified(),!0)},this.parent=function(){return e},this.setParent=function(t){return t!==e&&(null!==e&&e.removeChild(this),e=t,this.modified(),!0)},this.boundsModified=function(){this.boundsDirtyTimestamp().modified(),null!==e&&e.boundsModified()},this},o(i.node,i.boundingObject)},4226(e,t,n){e.exports={EPSILON:n(2864),create:n(1216),clone:n(6591),angle:n(2573),fromValues:n(3198),copy:n(1589),set:n(3618),equals:n(8817),exactEquals:n(4964),add:n(3401),subtract:n(220),sub:n(3636),multiply:n(6936),mul:n(728),divide:n(5053),div:n(2473),min:n(1374),max:n(9200),floor:n(1380),ceil:n(5421),round:n(5930),scale:n(3544),scaleAndAdd:n(4252),distance:n(8051),dist:n(1144),squaredDistance:n(4312),sqrDist:n(80),length:n(4136),len:n(9765),squaredLength:n(9059),sqrLen:n(4397),negate:n(5178),inverse:n(2286),normalize:n(1785),dot:n(409),cross:n(3594),lerp:n(1229),random:n(2811),transformMat4:n(3928),transformMat3:n(8317),transformQuat:n(2617),rotateX:n(1263),rotateY:n(8104),rotateZ:n(9137),forEach:n(1536)}},4251(e,t,n){var i=n(4099),o=n(8899),a=n(8315);i.renderState=function(){"use strict";this.m_context=null,this.m_modelViewMatrix=a.create(),this.m_normalMatrix=a.create(),this.m_projectionMatrix=null,this.m_material=null,this.m_mapper=null},i.renderer=function(e){"use strict";if(!(this instanceof i.renderer))return new i.renderer(e);i.graphicsObject.call(this),e=e||{};var t=this;return t.m_renderWindow=null,t.m_contextChanged=!1,t.m_sceneRoot=new i.groupNode,t.m_camera=new i.camera(e),t.m_nearClippingPlaneTolerance=null,t.m_x=0,t.m_y=0,t.m_width=0,t.m_height=0,t.m_resizable=!0,t.m_resetScene=!0,t.m_layer=0,t.m_renderPasses=null,t.m_resetClippingRange=!0,t.m_depthBits=null,t.m_camera.addChild(t.m_sceneRoot),this.width=function(){return t.m_width},this.height=function(){return t.m_height},this.layer=function(){return t.m_layer},this.setLayer=function(e){t.m_layer=e,t.modified()},this.renderWindow=function(){return t.m_renderWindow},this.setRenderWindow=function(e){t.m_renderWindow!==e&&(t.m_renderWindow&&t.m_renderWindow.removeRenderer(this),t.m_renderWindow=e,t.m_contextChanged=!0,t.modified())},this.camera=function(){return t.m_camera},this.render=function(){var e,n,o,s=null,l=[],u=a.create(),c=null;if((n=new i.renderState).m_renderer=t,n.m_context=t.renderWindow().context(),(!t.m_depthBits||t.m_contextChanged)&&(t.m_depthBits=n.m_context.getParameter(i.GL.DEPTH_BITS)),n.m_contextChanged=t.m_contextChanged,t.m_renderPasses)for(e=0;e<t.m_renderPasses.length;e+=1){if(t.m_renderPasses[e].render(n))return void t.m_renderPasses[e].remove(n);t.m_renderPasses[e].remove(n)}for(n.m_context.enable(i.GL.DEPTH_TEST),n.m_context.depthFunc(i.GL.LEQUAL),t.m_camera.clearMask()&i.GL.COLOR_BUFFER_BIT&&(c=t.m_camera.clearColor(),n.m_context.clearColor(c[0],c[1],c[2],c[3])),t.m_camera.clearMask()&i.GL.DEPTH_BUFFER_BIT&&n.m_context.clearDepth(t.m_camera.clearDepth()),n.m_context.clear(t.m_camera.clearMask()),n.m_context.viewport(t.m_x,t.m_y,t.m_width,t.m_height),(o=t.m_sceneRoot.children()).length>0&&t.m_resetScene&&(t.m_resetScene=!1),e=0;e<o.length;e+=1)(s=o[e]).computeBounds(),s.visible()&&s.material().binNumber()>=0&&l.push([s.material().binNumber(),s]);for(l.sort(function(e,t){return e[0]-t[0]}),e=0;e<l.length;e+=1){if((s=l[e][1]).referenceFrame()===i.boundingObject.ReferenceFrame.Relative){var d=t.m_camera.viewMatrix();d instanceof Array&&(n.m_modelViewMatrix=Array(16)),a.multiply(n.m_modelViewMatrix,d,s.matrix()),n.m_projectionMatrix=t.m_camera.projectionMatrix(),n.m_modelViewAlignment=t.m_camera.viewAlignment()}else n.m_modelViewMatrix=s.matrix(),n.m_modelViewAlignment=null,n.m_projectionMatrix=a.create(),a.ortho(n.m_projectionMatrix,0,t.m_width,0,t.m_height,-1,1);a.invert(u,n.m_modelViewMatrix),a.transpose(n.m_normalMatrix,u),n.m_material=s.material(),n.m_mapper=s.mapper(),n.m_material.bind(n),n.m_mapper.render(n),n.m_material.undoBind(n)}n.m_context.finish(),t.m_contextChanged=!1,t.m_lastRenderState=n},this.resize=function(e,n){e&&n&&t.positionAndResize(t.m_x,t.m_y,e,n)},this.positionAndResize=function(e,n,i,o){var a;if(e<0||n<0||i<=0||o<=0)return void console.log("[error] Invalid position and resize values",e,n,i,o);if(t.m_resizable&&(t.m_width=i,t.m_height=o,t.m_camera.setViewAspect(i/o),t.m_camera.setParallelExtents({width:i,height:o}),t.modified()),t.m_renderPasses)for(a=0;a<t.m_renderPasses.length;a+=1)t.m_renderPasses[a].resize(i,o),t.m_renderPasses[a].renderer().positionAndResize(e,n,i,o)},this.addActor=function(e){return e instanceof i.actor&&(t.m_sceneRoot.addChild(e),t.modified(),!0)},this.hasActor=function(e){return t.m_sceneRoot.hasChild(e)},this.removeActor=function(e){return -1!==t.m_sceneRoot.children().indexOf(e)&&(t.m_lastRenderState&&(e.mapper()&&e.mapper()._cleanup(t.m_lastRenderState),e.material()&&e.material()._cleanup(t.m_lastRenderState)),e.modified(),t.m_sceneRoot.removeChild(e),t.modified(),!0)},this.setResetScene=function(e){t.m_resetScene!==e&&(t.m_resetScene=e,t.modified())},this._cleanup=function(e){for(var n=t.m_sceneRoot.children(),i=0;i<n.length;i+=1){var o=n[i];o.material()._cleanup(e),o.mapper()._cleanup(e)}t.m_sceneRoot.removeChildren(),t.modified()},t},o(i.renderer,i.graphicsObject)},4252(e){e.exports=function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}},4273(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>u,forward:()=>a,init:()=>o,inverse:()=>s,names:()=>l});var i=n(4181);function o(){}function a(e){var t=e.x,n=e.y,o=(0,i.A)(t-this.long0,this.over),a=this.x0+this.a*o,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=a,e.y=s,e}function s(e){e.x-=this.x0,e.y-=this.y0;var t=(0,i.A)(this.long0+e.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var l=["Miller_Cylindrical","mill"];let u={init:o,forward:a,inverse:s,names:l}},4296(e){e.exports="/* pointFeature sprite vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * (radius + strokeWidthVar);\n}\n"},4312(e){e.exports=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return n*n+i*i+o*o}},4319(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>u,forward:()=>a,init:()=>o,inverse:()=>s,names:()=>l});var i=n(4181);function o(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function a(e){var t,n,o,a,s,l,u,c=e.x,d=e.y,f=(0,i.A)(c-this.long0,this.over);return t=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/t)-this.s45),o=-f*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),s=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(a)),l=this.n*s,e.y=(u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n))*Math.cos(l)/1,e.x=u*Math.sin(l)/1,this.czech||(e.y*=-1,e.x*=-1),e}function s(e){var t,n,i,o,a,s,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),n=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(t)),e.x=this.long0-n/this.alfa,s=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),1e-10>Math.abs(s-e.y)&&(l=1),s=e.y,c+=1;while(0===l&&c<15);return c>=15?null:e}var l=["Krovak","krovak"];let u={init:o,forward:a,inverse:s,names:l}},4334(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(384),o={};o.greenwich=0,o.lisbon=-9.131906111111,o.paris=2.337229166667,o.bogota=-74.080916666667,o.madrid=-3.687938888889,o.rome=12.452333333333,o.bern=7.439583333333,o.jakarta=106.807719444444,o.ferro=-17.666666666667,o.brussels=4.367975,o.stockholm=18.058277777778,o.athens=23.7163375,o.oslo=10.722916666667;let a={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var s=n(7535);function l(e){var t,n,l,u={},c=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e},{}),d={proj:"projName",datum:"datumCode",rf:function(e){u.rf=parseFloat(e)},lat_0:function(e){u.lat0=e*i.zq},lat_1:function(e){u.lat1=e*i.zq},lat_2:function(e){u.lat2=e*i.zq},lat_ts:function(e){u.lat_ts=e*i.zq},lon_0:function(e){u.long0=e*i.zq},lon_1:function(e){u.long1=e*i.zq},lon_2:function(e){u.long2=e*i.zq},alpha:function(e){u.alpha=parseFloat(e)*i.zq},gamma:function(e){u.rectified_grid_angle=parseFloat(e)*i.zq},lonc:function(e){u.longc=e*i.zq},x_0:function(e){u.x0=parseFloat(e)},y_0:function(e){u.y0=parseFloat(e)},k_0:function(e){u.k0=parseFloat(e)},k:function(e){u.k0=parseFloat(e)},a:function(e){u.a=parseFloat(e)},b:function(e){u.b=parseFloat(e)},r:function(e){u.a=u.b=parseFloat(e)},r_a:function(){u.R_A=!0},zone:function(e){u.zone=parseInt(e,10)},south:function(){u.utmSouth=!0},towgs84:function(e){u.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){u.to_meter=parseFloat(e)},units:function(e){u.units=e;var t=(0,s.A)(a,e);t&&(u.to_meter=t.to_meter)},from_greenwich:function(e){u.from_greenwich=e*i.zq},pm:function(e){u.from_greenwich=((0,s.A)(o,e)||parseFloat(e))*i.zq},nadgrids:function(e){"@null"===e?u.datumCode="none":u.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(u.axis=e)},approx:function(){u.approx=!0},over:function(){u.over=!0}};for(t in c)n=c[t],t in d?"function"==typeof(l=d[t])?l(n):u[l]=n:u[t]=n;return"string"==typeof u.datumCode&&"WGS84"!==u.datumCode&&(u.datumCode=u.datumCode.toLowerCase()),u.projStr=e,u}},4341(e,t,n){e.exports=Object.assign(n(6500),n(8874),n(3941),n(4810),{DistanceGrid:n(7306),ClusterGroup:n(2703),mesh:n(9956),polyops:n(2819)})},4384(e,t,n){"use strict";n.d(t,{Ay:()=>d,Cx:()=>c});var i=n(7314),o=n(8044),a=[i.default,o.default],s={},l=[];function u(e,t){var n=l.length;return e.names?(l[n]=e,e.names.forEach(function(e){s[e.toLowerCase()]=n}),this):(console.log(t),!0)}function c(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}let d={start:function(){a.forEach(u)},add:u,get:function(e){if(!e)return!1;var t=e.toLowerCase();if(void 0!==s[t]&&l[s[t]]||(t=c(t))in s&&l[s[t]])return l[s[t]]}}},4397(e,t,n){e.exports=n(9059)},4417(e){"use strict";e.exports=function(e,t){return(t||(t={}),e&&(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes))?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e}},4484(e,t,n){"use strict";function i(e,t,n,i,o){a=e/t;for(var a,s,l=0;l<15;l++)if(s=(e-(t*a-n*Math.sin(2*a)+i*Math.sin(4*a)-o*Math.sin(6*a)))/(t-2*n*Math.cos(2*a)+4*i*Math.cos(4*a)-6*o*Math.cos(6*a)),a+=s,1e-10>=Math.abs(s))return a;return NaN}n.d(t,{A:()=>i})},4504(e,t,n){var i=n(8899),o=n(9186),a=n(5204),s=n(4341),l=function(e){"use strict";if(!(this instanceof l))return new l(e);e=e||{},o.call(this,e);var t,n,i,u,c,d,f,p=this,h=this._init;return this.featureType="heatmap",t=e.position||s.identityFunction,n=e.intensity||function(e){return 1},i=void 0!==e.maxIntensity?e.maxIntensity:null,u=void 0!==e.minIntensity?e.minIntensity:null,d=void 0!==e.binned?e.binned:"auto",c=e.updateDelay||0===e.updateDelay?parseInt(e.updateDelay,10):-1,this.maxIntensity=function(e){return void 0===e?i:(i=e,p.dataTime().modified(),p.modified(),p)},this.minIntensity=function(e){return void 0===e?u:(u=e,p.dataTime().modified(),p.modified(),p)},this.updateDelay=function(e){return void 0===e?c:(c=parseInt(e,10),p)},this.binned=function(e){return void 0===e?d:("true"===e?e=!0:"false"===e?e=!1:"auto"!==e&&!0!==e&&!1!==e&&((e=parseInt(e,10))<=0||isNaN(e))&&(e=!1),d=e,p.dataTime().modified(),p.modified(),p)},this.position=function(e){return void 0===e?t:(t=e,p.dataTime().modified(),p.modified(),p)},this.gcsPosition=function(){return p._update(),f},this.intensity=function(e){return void 0===e?n:(n=e,p.dataTime().modified(),p.modified(),p)},this._init=function(e){h.call(p,e);var n=Object.assign({},{radius:10,blurRadius:10,gaussian:!0,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}},scaleWithZoom:!1},void 0===e.style?{}:e.style);p.style(n),t&&p.dataTime().modified()},this._build=function(){var e=p.data(),t=null,n=[],o=null==i,s=null==u;return e.forEach(function(e,a){n.push(p.position()(e,a)),(o||s)&&(t=p.intensity()(e,a),null==i&&(i=t),null==u&&(u=t),o&&t>i&&(i=t),s&&t<u&&(u=t))}),s&&o&&u===i&&(u-=1),f=a.transformCoordinates(p.gcs(),p.layer().map().gcs(),n),p.buildTime().modified(),p},this._init(e),this};i(l,o),e.exports=l},4553(e){e.exports=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},4568(e,t,n){"use strict";n.d(t,{A:()=>a});var i=n(1064),o=n(384);function a(e,t,n){for(var a=1/(1-t),s=e,l=20;l;--l){var u=Math.sin(s),c=1-t*u*u;if(c=((0,i.A)(s,u,Math.cos(s),n)-e)*(c*Math.sqrt(c))*a,s-=c,Math.abs(c)<o.H0)break}return s}},4603(e,t,n){e.exports={pointFeature:n(5183),vtkjsRenderer:n(3324)}},4672(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},4692(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return n(e)}:n(t)}("u">typeof window?window:this,function(i,o){"use strict";var a,s=[],l=Object.getPrototypeOf,u=s.slice,c=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},d=s.push,f=s.indexOf,p={},h=p.toString,m=p.hasOwnProperty,g=m.toString,v=g.call(Object),y={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},w=i.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,n){var i,o,a=(n=n||w).createElement("script");if(a.text=e,t)for(i in A)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,o);n.head.appendChild(a).parentNode.removeChild(a)}function S(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[h.call(e)]||"object":typeof e}var _="3.7.1",T=/HTML$/i,O=function(e,t){return new O.fn.init(e,t)};function P(e){var t=!!e&&"length"in e&&e.length,n=S(e);return!(b(e)||x(e))&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}O.fn=O.prototype={jquery:_,constructor:O,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=O.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return O.each(this,e)},map:function(e){return this.pushStack(O.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(O.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(O.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:s.sort,splice:s.splice},O.extend=O.fn.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||b(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(c&&i&&(O.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[t],a=o&&!Array.isArray(n)?[]:o||O.isPlainObject(n)?n:{},o=!1,s[t]=O.extend(c,a,i)):void 0!==i&&(s[t]=i));return s},O.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!!e&&"[object Object]"===h.call(e)&&(!(t=l(e))||"function"==typeof(n=m.call(t,"constructor")&&t.constructor)&&g.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){C(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(P(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,o=e.nodeType;if(!o)for(;t=e[i++];)n+=O.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?O.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!T.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,a=e.length,s=!n;o<a;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,a=0,s=[];if(P(e))for(i=e.length;a<i;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return c(s)},guid:1,support:y}),"function"==typeof Symbol&&(O.fn[Symbol.iterator]=s[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var E=s.pop,D=s.sort,I=s.splice,k="[\\x20\\t\\r\\n\\f]",N=RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");O.contains=function(e,t){var n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function B(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}O.escapeSelector=function(e){return(e+"").replace(R,B)},!function(){var e,t,n,o,a,l,c,p,h,g,v=d,b=O.expando,x=0,A=0,C=et(),S=et(),_=et(),T=et(),P=function(e,t){return e===t&&(a=!0),0},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+k+"*("+B+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+k+"*\\]",F=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",V=RegExp(k+"+","g"),j=RegExp("^"+k+"*,"+k+"*"),G=RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),U=RegExp(k+"|>"),z=new RegExp(F),W=RegExp("^"+B+"$"),H={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),TAG:RegExp("^("+B+"|[*])"),ATTR:RegExp("^"+L),PSEUDO:RegExp("^"+F),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:RegExp("^(?:"+R+")$","i"),needsContext:RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),J=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){es()},$=ed(function(e){return!0===e.disabled&&M(e,"fieldset")},{dir:"parentNode",next:"legend"});try{v.apply(s=u.call(w.childNodes),w.childNodes),s[w.childNodes.length].nodeType}catch(e){v={apply:function(e,t){d.apply(e,u.call(t))},call:function(e){d.apply(e,u.call(arguments,1))}}}function ee(e,t,n,i){var o,a,s,u,c,d,f,m=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&(es(t),t=t||l,p)){if(11!==g&&(c=X.exec(e))){if(o=c[1]){if(9===g){if(!(s=t.getElementById(o)))return n;else if(s.id===o)return v.call(n,s),n}else if(m&&(s=m.getElementById(o))&&ee.contains(t,s)&&s.id===o)return v.call(n,s),n}else if(c[2])return v.apply(n,t.getElementsByTagName(e)),n;else if((o=c[3])&&t.getElementsByClassName)return v.apply(n,t.getElementsByClassName(o)),n}if(!T[e+" "]&&(!h||!h.test(e))){if(f=e,m=t,1===g&&(U.test(e)||G.test(e))){for((m=Y.test(e)&&ea(t.parentNode)||t)==t&&y.scope||((u=t.getAttribute("id"))?u=O.escapeSelector(u):t.setAttribute("id",u=b)),a=(d=eu(e)).length;a--;)d[a]=(u?"#"+u:":scope")+" "+ec(d[a]);f=d.join(",")}try{return v.apply(n,m.querySelectorAll(f)),n}catch(t){T(e,!0)}finally{u===b&&t.removeAttribute("id")}}}return em(e.replace(N,"$1"),t,n,i)}function et(){var e=[];function n(i,o){return e.push(i+" ")>t.cacheLength&&delete n[e.shift()],n[i+" "]=o}return n}function en(e){return e[b]=!0,e}function er(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ei(e){return function(t){if("form"in t){if(t.parentNode&&!1===t.disabled){if("label"in t)if("label"in t.parentNode)return t.parentNode.disabled===e;else return t.disabled===e;return t.isDisabled===e||!e!==t.isDisabled&&$(t)===e}return t.disabled===e}return"label"in t&&t.disabled===e}}function eo(e){return en(function(t){return t*=1,en(function(n,i){for(var o,a=e([],n.length,t),s=a.length;s--;)n[o=a[s]]&&(n[o]=!(i[o]=n[o]))})})}function ea(e){return e&&void 0!==e.getElementsByTagName&&e}function es(e){var n,i=e?e.ownerDocument||e:w;return i!=l&&9===i.nodeType&&i.documentElement&&(c=(l=i).documentElement,p=!O.isXMLDoc(l),g=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&w!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),y.getById=er(function(e){return c.appendChild(e).id=O.expando,!l.getElementsByName||!l.getElementsByName(O.expando).length}),y.disconnectedMatch=er(function(e){return g.call(e,"*")}),y.scope=er(function(){return l.querySelectorAll(":scope")}),y.cssHas=er(function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),y.getById?(t.filter.ID=function(e){var t=e.replace(Z,J);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Z,J);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n,i,o,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(o=t.getElementsByName(e),i=0;a=o[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&p)return t.getElementsByClassName(e)},h=[],er(function(e){var t;c.appendChild(e).innerHTML="<a id='"+b+"' href='' disabled='disabled'></a><select id='"+b+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+k+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+b+"-]").length||h.push("~="),e.querySelectorAll("a#"+b+"+*").length||h.push(".#.+[+~]"),e.querySelectorAll(":checked").length||h.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||h.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")}),y.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),P=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument==w&&ee.contains(w,e)?-1:t===l||t.ownerDocument==w&&ee.contains(w,t)?1:o?f.call(o,e)-f.call(o,t):0:4&n?-1:1}),l}for(e in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(es(e),p&&!T[t+" "]&&(!h||!h.test(t)))try{var n=g.call(e,t);if(n||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return ee(t,l,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=l&&es(e),O.contains(e,t)},ee.attr=function(e,n){(e.ownerDocument||e)!=l&&es(e);var i=t.attrHandle[n.toLowerCase()],o=i&&m.call(t.attrHandle,n.toLowerCase())?i(e,n,!p):void 0;return void 0!==o?o:e.getAttribute(n)},ee.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},O.uniqueSort=function(e){var t,n=[],i=0,s=0;if(a=!y.sortStable,o=!y.sortStable&&u.call(e,0),D.call(e,P),a){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)I.call(e,n[i],1)}return o=null,e},O.fn.uniqueSort=function(){return this.pushStack(O.uniqueSort(u.apply(this)))},(t=O.expr={cacheLength:50,createPseudo:en,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,J),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,J),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return H.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=eu(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,J).toLowerCase();return"*"===e?function(){return!0}:function(e){return M(e,t)}},CLASS:function(e){var t=C[e+" "];return t||(t=RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=ee.attr(i,e);return null==o?"!="===t:!t||((o+="","="===t)?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),l="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var c,d,f,p,h,m=a!==s?"nextSibling":"previousSibling",g=t.parentNode,v=l&&t.nodeName.toLowerCase(),y=!u&&!l,w=!1;if(g){if(a){for(;m;){for(f=t;f=f[m];)if(l?M(f,v):1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&y){for(w=(p=(c=(d=g[b]||(g[b]={}))[e]||[])[0]===x&&c[1])&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(w=p=0)||h.pop();)if(1===f.nodeType&&++w&&f===t){d[e]=[x,p,w];break}}else if(y&&(w=p=(c=(d=t[b]||(t[b]={}))[e]||[])[0]===x&&c[1]),!1===w)for(;(f=++p&&f&&f[m]||(w=p=0)||h.pop())&&(!((l?M(f,v):1===f.nodeType)&&++w)||(y&&((d=f[b]||(f[b]={}))[e]=[x,w]),f!==t)););return(w-=o)===i||w%i==0&&w/i>=0}}},PSEUDO:function(e,n){var i,o=t.pseudos[e]||t.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return o[b]?o(n):o.length>1?(i=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?en(function(e,t){for(var i,a=o(e,n),s=a.length;s--;)i=f.call(e,a[s]),e[i]=!(t[i]=a[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:en(function(e){var t=[],n=[],i=eh(e.replace(N,"$1"));return i[b]?en(function(e,t,n,o){for(var a,s=i(e,null,o,[]),l=e.length;l--;)(a=s[l])&&(e[l]=!(t[l]=a))}):function(e,o,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}}),has:en(function(e){return function(t){return ee(e,t).length>0}}),contains:en(function(e){return e=e.replace(Z,J),function(t){return(t.textContent||O.text(t)).indexOf(e)>-1}}),lang:en(function(e){return W.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(Z,J).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ei(!1),disabled:ei(!0),checked:function(e){return M(e,"input")&&!!e.checked||M(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){return M(e,"input")&&"button"===e.type||M(e,"button")},text:function(e){var t;return M(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:eo(function(){return[0]}),last:eo(function(e,t){return[t-1]}),eq:eo(function(e,t,n){return[n<0?n+t:n]}),even:eo(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:eo(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:eo(function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:eo(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=function(e){return function(t){return M(t,"input")&&t.type===e}}(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=function(e){return function(t){return(M(t,"input")||M(t,"button"))&&t.type===e}}(e);function el(){}function eu(e,n){var i,o,a,s,l,u,c,d=S[e+" "];if(d)return n?0:d.slice(0);for(l=e,u=[],c=t.preFilter;l;){for(s in(!i||(o=j.exec(l)))&&(o&&(l=l.slice(o[0].length)||l),u.push(a=[])),i=!1,(o=G.exec(l))&&(i=o.shift(),a.push({value:i,type:o[0].replace(N," ")}),l=l.slice(i.length)),t.filter)(o=H[s].exec(l))&&(!c[s]||(o=c[s](o)))&&(i=o.shift(),a.push({value:i,type:s,matches:o}),l=l.slice(i.length));if(!i)break}return n?l.length:l?ee.error(e):S(e,u).slice(0)}function ec(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ed(e,t,n){var i=t.dir,o=t.next,a=o||i,s=n&&"parentNode"===a,l=A++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,u){var c,d,f=[x,l];if(u){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(d=t[b]||(t[b]={}),o&&M(t,o))t=t[i]||t;else{if((c=d[a])&&c[0]===x&&c[1]===l)return f[2]=c[2];if(d[a]=f,f[2]=e(t,n,u))return!0}return!1}}function ef(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ep(e,t,n,i,o){for(var a,s=[],l=0,u=e.length,c=null!=t;l<u;l++)(a=e[l])&&(!n||n(a,i,o))&&(s.push(a),c&&t.push(l));return s}function eh(e,i){var o,a,s,u,c=[],d=[],h=_[e+" "];if(!h){for(i||(i=eu(e)),u=i.length;u--;)(h=function e(i){for(var o,a,s,l=i.length,u=t.relative[i[0].type],c=u||t.relative[" "],d=+!!u,p=ed(function(e){return e===o},c,!0),h=ed(function(e){return f.call(o,e)>-1},c,!0),m=[function(e,t,i){var a=!u&&(i||t!=n)||((o=t).nodeType?p(e,t,i):h(e,t,i));return o=null,a}];d<l;d++)if(a=t.relative[i[d].type])m=[ed(ef(m),a)];else{if((a=t.filter[i[d].type].apply(null,i[d].matches))[b]){for(s=++d;s<l&&!t.relative[i[s].type];s++);return function e(t,n,i,o,a,s){return o&&!o[b]&&(o=e(o)),a&&!a[b]&&(a=e(a,s)),en(function(e,s,l,u){var c,d,p,h,m=[],g=[],y=s.length,b=e||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ee(e,t[i],n);return n}(n||"*",l.nodeType?[l]:l,[]),x=t&&(e||!n)?ep(b,m,t,l,u):b;if(i?i(x,h=a||(e?t:y||o)?[]:s,l,u):h=x,o)for(c=ep(h,g),o(c,[],l,u),d=c.length;d--;)(p=c[d])&&(h[g[d]]=!(x[g[d]]=p));if(e){if(a||t){if(a){for(c=[],d=h.length;d--;)(p=h[d])&&c.push(x[d]=p);a(null,h=[],c,u)}for(d=h.length;d--;)(p=h[d])&&(c=a?f.call(e,p):m[d])>-1&&(e[c]=!(s[c]=p))}}else h=ep(h===s?h.splice(y,h.length):h),a?a(null,s,h,u):v.apply(s,h)})}(d>1&&ef(m),d>1&&ec(i.slice(0,d-1).concat({value:" "===i[d-2].type?"*":""})).replace(N,"$1"),a,d<s&&e(i.slice(d,s)),s<l&&e(i=i.slice(s)),s<l&&ec(i))}m.push(a)}return ef(m)}(i[u]))[b]?c.push(h):d.push(h);(h=_(e,(o=c.length>0,a=d.length>0,s=function(e,i,s,u,f){var h,m,g,y=0,b="0",w=e&&[],A=[],C=n,S=e||a&&t.find.TAG("*",f),_=x+=null==C?1:Math.random()||.1,T=S.length;for(f&&(n=i==l||i||f);b!==T&&null!=(h=S[b]);b++){if(a&&h){for(m=0,i||h.ownerDocument==l||(es(h),s=!p);g=d[m++];)if(g(h,i||l,s)){v.call(u,h);break}f&&(x=_)}o&&((h=!g&&h)&&y--,e&&w.push(h))}if(y+=b,o&&b!==y){for(m=0;g=c[m++];)g(w,A,i,s);if(e){if(y>0)for(;b--;)w[b]||A[b]||(A[b]=E.call(u));A=ep(A)}v.apply(u,A),f&&!e&&A.length>0&&y+c.length>1&&O.uniqueSort(u)}return f&&(x=_,n=C),w},o?en(s):s))).selector=e}return h}function em(e,n,i,o){var a,s,l,u,c,d="function"==typeof e&&e,f=!o&&eu(e=d.selector||e);if(i=i||[],1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(l=s[0]).type&&9===n.nodeType&&p&&t.relative[s[1].type]){if(!(n=(t.find.ID(l.matches[0].replace(Z,J),n)||[])[0]))return i;d&&(n=n.parentNode),e=e.slice(s.shift().value.length)}for(a=H.needsContext.test(e)?0:s.length;a--&&(l=s[a],!t.relative[u=l.type]);)if((c=t.find[u])&&(o=c(l.matches[0].replace(Z,J),Y.test(s[0].type)&&ea(n.parentNode)||n))){if(s.splice(a,1),!(e=o.length&&ec(s)))return v.apply(i,o),i;break}}return(d||eh(e,f))(o,n,!p,i,!n||Y.test(e)&&ea(n.parentNode)||n),i}el.prototype=t.filters=t.pseudos,t.setFilters=new el,y.sortStable=b.split("").sort(P).join("")===b,es(),y.sortDetached=er(function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))}),O.find=ee,O.expr[":"]=O.expr.pseudos,O.unique=O.uniqueSort,ee.compile=eh,ee.select=em,ee.setDocument=es,ee.tokenize=eu,ee.escape=O.escapeSelector,ee.getText=O.text,ee.isXML=O.isXMLDoc,ee.selectors=O.expr,ee.support=O.support,ee.uniqueSort=O.uniqueSort}();var L=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&O(e).is(n))break;i.push(e)}return i},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},V=O.expr.match.needsContext,j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function G(e,t,n){return b(t)?O.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?O.grep(e,function(e){return e===t!==n}):"string"!=typeof t?O.grep(e,function(e){return f.call(t,e)>-1!==n}):O.filter(t,e,n)}O.filter=function(e,t,n){var i=t[0];return(n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType)?O.find.matchesSelector(i,e)?[i]:[]:O.find.matches(e,O.grep(t,function(e){return 1===e.nodeType}))},O.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(O(e).filter(function(){for(t=0;t<i;t++)if(O.contains(o[t],this))return!0}));for(t=0,n=this.pushStack([]);t<i;t++)O.find(e,o[t],n);return i>1?O.uniqueSort(n):n},filter:function(e){return this.pushStack(G(this,e||[],!1))},not:function(e){return this.pushStack(G(this,e||[],!0))},is:function(e){return!!G(this,"string"==typeof e&&V.test(e)?O(e):e||[],!1).length}});var U,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(O.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||U,"string"==typeof e){if((i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e))&&(i[1]||!t))if(!i[1])return(o=w.getElementById(i[2]))&&(this[0]=o,this.length=1),this;else{if(t=t instanceof O?t[0]:t,O.merge(this,O.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),j.test(i[1])&&O.isPlainObject(t))for(i in t)b(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(O):O.makeArray(e,this)}).prototype=O.fn,U=O(w);var W=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function q(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}O.fn.extend({has:function(e){var t=O(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(O.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,a=[],s="string"!=typeof e&&O(e);if(!V.test(e)){for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&O.find.matchesSelector(n,e))){a.push(n);break}}return this.pushStack(a.length>1?O.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?f.call(O(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),O.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return L(e,"parentNode")},parentsUntil:function(e,t,n){return L(e,"parentNode",n)},next:function(e){return q(e,"nextSibling")},prev:function(e){return q(e,"previousSibling")},nextAll:function(e){return L(e,"nextSibling")},prevAll:function(e){return L(e,"previousSibling")},nextUntil:function(e,t,n){return L(e,"nextSibling",n)},prevUntil:function(e,t,n){return L(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&l(e.contentDocument)?e.contentDocument:(M(e,"template")&&(e=e.content||e),O.merge([],e.childNodes))}},function(e,t){O.fn[e]=function(n,i){var o=O.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=O.filter(i,o)),this.length>1&&(H[e]||O.uniqueSort(o),W.test(e)&&o.reverse()),this.pushStack(o)}});var K=/[^\x20\t\r\n\f]+/g;function X(e){return e}function Y(e){throw e}function Z(e,t,n,i){var o;try{e&&b(o=e.promise)?o.call(e).done(t).fail(n):e&&b(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}O.Callbacks=function(e){e="string"==typeof e?(t=e,n={},O.each(t.match(K)||[],function(e,t){n[t]=!0}),n):O.extend({},e);var t,n,i,o,a,s,l=[],u=[],c=-1,d=function(){for(s=s||e.once,a=i=!0;u.length;c=-1)for(o=u.shift();++c<l.length;)!1===l[c].apply(o[0],o[1])&&e.stopOnFalse&&(c=l.length,o=!1);e.memory||(o=!1),i=!1,s&&(l=o?[]:"")},f={add:function(){return l&&(o&&!i&&(c=l.length-1,u.push(o)),!function t(n){O.each(n,function(n,i){b(i)?e.unique&&f.has(i)||l.push(i):i&&i.length&&"string"!==S(i)&&t(i)})}(arguments),o&&!i&&d()),this},remove:function(){return O.each(arguments,function(e,t){for(var n;(n=O.inArray(t,l,n))>-1;)l.splice(n,1),n<=c&&c--}),this},has:function(e){return e?O.inArray(e,l)>-1:l.length>0},empty:function(){return l&&(l=[]),this},disable:function(){return s=u=[],l=o="",this},disabled:function(){return!l},lock:function(){return s=u=[],o||i||(l=o=""),this},locked:function(){return!!s},fireWith:function(e,t){return!s&&(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||d()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!a}};return f},O.extend({Deferred:function(e){var t=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return O.Deferred(function(n){O.each(t,function(t,i){var o=b(e[i[4]])&&e[i[4]];a[i[1]](function(){var e=o&&o.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){var a=0;function s(e,t,n,o){return function(){var l=this,u=arguments,c=function(){var i,c;if(!(e<a)){if((i=n.apply(l,u))===t.promise())throw TypeError("Thenable self-resolution");b(c=i&&("object"==typeof i||"function"==typeof i)&&i.then)?o?c.call(i,s(a,t,X,o),s(a,t,Y,o)):(a++,c.call(i,s(a,t,X,o),s(a,t,Y,o),s(a,t,X,t.notifyWith))):(n!==X&&(l=void 0,u=[i]),(o||t.resolveWith)(l,u))}},d=o?c:function(){try{c()}catch(i){O.Deferred.exceptionHook&&O.Deferred.exceptionHook(i,d.error),e+1>=a&&(n!==Y&&(l=void 0,u=[i]),t.rejectWith(l,u))}};e?d():(O.Deferred.getErrorHook?d.error=O.Deferred.getErrorHook():O.Deferred.getStackHook&&(d.error=O.Deferred.getStackHook()),i.setTimeout(d))}}return O.Deferred(function(i){t[0][3].add(s(0,i,b(o)?o:X,i.notifyWith)),t[1][3].add(s(0,i,b(e)?e:X)),t[2][3].add(s(0,i,b(n)?n:Y))}).promise()},promise:function(e){return null!=e?O.extend(e,o):o}},a={};return O.each(t,function(e,i){var s=i[2],l=i[5];o[i[1]]=s.add,l&&s.add(function(){n=l},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(i[3].fire),a[i[0]]=function(){return a[i[0]+"With"](this===a?void 0:this,arguments),this},a[i[0]+"With"]=s.fireWith}),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),o=u.call(arguments),a=O.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(i,o)}};if(t<=1&&(Z(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||b(o[n]&&o[n].then)))return a.then();for(;n--;)Z(o[n],s(n),a.reject);return a.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&J.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},O.readyException=function(e){i.setTimeout(function(){throw e})};var Q=O.Deferred();function $(){w.removeEventListener("DOMContentLoaded",$),i.removeEventListener("load",$),O.ready()}O.fn.ready=function(e){return Q.then(e).catch(function(e){O.readyException(e)}),this},O.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--O.readyWait:O.isReady)||(O.isReady=!0,!0!==e&&--O.readyWait>0||Q.resolveWith(w,[O]))}}),O.ready.then=Q.then,"complete"!==w.readyState&&("loading"===w.readyState||w.documentElement.doScroll)?(w.addEventListener("DOMContentLoaded",$),i.addEventListener("load",$)):i.setTimeout(O.ready);var ee=function(e,t,n,i,o,a,s){var l=0,u=e.length,c=null==n;if("object"===S(n))for(l in o=!0,n)ee(e,t,l,n[l],!0,a,s);else if(void 0!==i&&(o=!0,b(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(O(e),n)})),t))for(;l<u;l++)t(e[l],n,s?i:i.call(e[l],l,t(e[l],n)));return o?e:c?t.call(e):u?t(e[0],n):a},et=/^-ms-/,en=/-([a-z])/g;function er(e,t){return t.toUpperCase()}function ei(e){return e.replace(et,"ms-").replace(en,er)}var eo=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ea(){this.expando=O.expando+ea.uid++}ea.uid=1,ea.prototype={cache:function(e){var t=e[this.expando];return!t&&(t={},eo(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[ei(t)]=n;else for(i in t)o[ei(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ei(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t)for(n=(t=Array.isArray(t)?t.map(ei):((t=ei(t))in i)?[t]:t.match(K)||[]).length;n--;)delete i[t[n]];(void 0===t||O.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!O.isEmptyObject(t)}};var es=new ea,el=new ea,eu=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ec=/[A-Z]/g;function ed(e,t,n){var i,o;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(ec,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{o=n,n="true"===o||"false"!==o&&("null"===o?null:o===+o+""?+o:eu.test(o)?JSON.parse(o):o)}catch(e){}el.set(e,t,n)}else n=void 0;return n}O.extend({hasData:function(e){return el.hasData(e)||es.hasData(e)},data:function(e,t,n){return el.access(e,t,n)},removeData:function(e,t){el.remove(e,t)},_data:function(e,t,n){return es.access(e,t,n)},_removeData:function(e,t){es.remove(e,t)}}),O.fn.extend({data:function(e,t){var n,i,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=el.get(a),1===a.nodeType&&!es.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&ed(a,i=ei(i.slice(5)),o[i]);es.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){el.set(this,e)}):ee(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=el.get(a,e))||void 0!==(n=ed(a,e))?n:void 0;this.each(function(){el.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){el.remove(this,e)})}}),O.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=es.get(e,t),n&&(!i||Array.isArray(n)?i=es.access(e,t,O.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=O.queue(e,t),i=n.length,o=n.shift(),a=O._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,function(){O.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return es.get(e,n)||es.access(e,n,{empty:O.Callbacks("once memory").add(function(){es.remove(e,[t+"queue",n])})})}}),O.fn.extend({queue:function(e,t){var n=2;return("string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n)?O.queue(this[0],e):void 0===t?this:this.each(function(){var n=O.queue(this,e,t);O._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&O.dequeue(this,e)})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=O.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=es.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(l));return l(),o.promise(t)}});var ef=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ep=RegExp("^(?:([+-])=|)("+ef+")([a-z%]*)$","i"),eh=["Top","Right","Bottom","Left"],em=w.documentElement,eg=function(e){return O.contains(e.ownerDocument,e)},ev={composed:!0};em.getRootNode&&(eg=function(e){return O.contains(e.ownerDocument,e)||e.getRootNode(ev)===e.ownerDocument});var ey=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&eg(e)&&"none"===O.css(e,"display")};function eb(e,t,n,i){var o,a,s=20,l=i?function(){return i.cur()}:function(){return O.css(e,t,"")},u=l(),c=n&&n[3]||(O.cssNumber[t]?"":"px"),d=e.nodeType&&(O.cssNumber[t]||"px"!==c&&+u)&&ep.exec(O.css(e,t));if(d&&d[3]!==c){for(u/=2,c=c||d[3],d=+u||1;s--;)O.style(e,t,d+c),(1-a)*(1-(a=l()/u||.5))<=0&&(s=0),d/=a;d*=2,O.style(e,t,d+c),n=n||[]}return n&&(d=+d||+u||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=o)),o}var ex={};function ew(e,t){for(var n,i,o=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(n=i.style.display,t?("none"===n&&(o[a]=es.get(i,"display")||null,o[a]||(i.style.display="")),""===i.style.display&&ey(i)&&(o[a]=function(e){var t,n=e.ownerDocument,i=e.nodeName,o=ex[i];return o||(t=n.body.appendChild(n.createElement(i)),o=O.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ex[i]=o),o}(i))):"none"!==n&&(o[a]="none",es.set(i,"display",n)));for(a=0;a<s;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}O.fn.extend({show:function(){return ew(this,!0)},hide:function(){return ew(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ey(this)?O(this).show():O(this).hide()})}});var eA=/^(?:checkbox|radio)$/i,eC=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,eS=/^$|^module$|\/(?:java|ecma)script/i;e9=w.createDocumentFragment().appendChild(w.createElement("div")),(e7=w.createElement("input")).setAttribute("type","radio"),e7.setAttribute("checked","checked"),e7.setAttribute("name","t"),e9.appendChild(e7),y.checkClone=e9.cloneNode(!0).cloneNode(!0).lastChild.checked,e9.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!e9.cloneNode(!0).lastChild.defaultValue,e9.innerHTML="<option></option>",y.option=!!e9.lastChild;var e_={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function eT(e,t){var n;return(n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t))?O.merge([e],n):n}function eO(e,t){for(var n=0,i=e.length;n<i;n++)es.set(e[n],"globalEval",!t||es.get(t[n],"globalEval"))}e_.tbody=e_.tfoot=e_.colgroup=e_.caption=e_.thead,e_.th=e_.td,y.option||(e_.optgroup=e_.option=[1,"<select multiple='multiple'>","</select>"]);var eP=/<|&#?\w+;/;function eM(e,t,n,i,o){for(var a,s,l,u,c,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((a=e[p])||0===a)if("object"===S(a))O.merge(f,a.nodeType?[a]:a);else if(eP.test(a)){for(s=s||d.appendChild(t.createElement("div")),l=e_[(eC.exec(a)||["",""])[1].toLowerCase()]||e_._default,s.innerHTML=l[1]+O.htmlPrefilter(a)+l[2],c=l[0];c--;)s=s.lastChild;O.merge(f,s.childNodes),(s=d.firstChild).textContent=""}else f.push(t.createTextNode(a));for(d.textContent="",p=0;a=f[p++];){if(i&&O.inArray(a,i)>-1){o&&o.push(a);continue}if(u=eg(a),s=eT(d.appendChild(a),"script"),u&&eO(s),n)for(c=0;a=s[c++];)eS.test(a.type||"")&&n.push(a)}return d}var eE=/^([^.]*)(?:\.(.+)|)/;function eD(){return!0}function eI(){return!1}function ek(e,t,n,i,o,a){var s,l;if("object"==typeof t){for(l in"string"!=typeof n&&(i=i||n,n=void 0),t)ek(e,l,n,i,t[l],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=eI;else if(!o)return e;return 1===a&&(s=o,(o=function(e){return O().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=O.guid++)),e.each(function(){O.event.add(this,t,o,i,n)})}function eN(e,t,n){if(!n){void 0===es.get(e,t)&&O.event.add(e,t,eD);return}es.set(e,t,!1),O.event.add(e,t,{namespace:!1,handler:function(e){var n,i=es.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(O.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=u.call(arguments),es.set(this,t,i),this[t](),n=es.get(this,t),es.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(es.set(this,t,O.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=eD)}})}O.event={global:{},add:function(e,t,n,i,o){var a,s,l,u,c,d,f,p,h,m,g,v=es.get(e);if(eo(e))for(n.handler&&(n=(a=n).handler,o=a.selector),o&&O.find.matchesSelector(em,o),n.guid||(n.guid=O.guid++),(u=v.events)||(u=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(t){return O.event.triggered!==t.type?O.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(K)||[""]).length;c--;)h=g=(l=eE.exec(t[c])||[])[1],m=(l[2]||"").split(".").sort(),h&&(f=O.event.special[h]||{},h=(o?f.delegateType:f.bindType)||h,f=O.event.special[h]||{},d=O.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&O.expr.match.needsContext.test(o),namespace:m.join(".")},a),(p=u[h])||((p=u[h]=[]).delegateCount=0,(!f.setup||!1===f.setup.call(e,i,m,s))&&e.addEventListener&&e.addEventListener(h,s)),f.add&&(f.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),O.event.global[h]=!0)},remove:function(e,t,n,i,o){var a,s,l,u,c,d,f,p,h,m,g,v=es.hasData(e)&&es.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(K)||[""]).length;c--;){if(h=g=(l=eE.exec(t[c])||[])[1],m=(l[2]||"").split(".").sort(),!h){for(h in u)O.event.remove(e,h+t[c],n,i,!0);continue}for(f=O.event.special[h]||{},p=u[h=(i?f.delegateType:f.bindType)||h]||[],l=l[2]&&RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=p.length;a--;)d=p[a],(o||g===d.origType)&&(!n||n.guid===d.guid)&&(!l||l.test(d.namespace))&&(!i||i===d.selector||"**"===i&&d.selector)&&(p.splice(a,1),d.selector&&p.delegateCount--,f.remove&&f.remove.call(e,d));s&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,m,v.handle)||O.removeEvent(e,h,v.handle),delete u[h])}O.isEmptyObject(u)&&es.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,a,s,l=Array(arguments.length),u=O.event.fix(e),c=(es.get(this,"events")||Object.create(null))[u.type]||[],d=O.event.special[u.type]||{};for(t=1,l[0]=u;t<arguments.length;t++)l[t]=arguments[t];if(u.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,u)){for(s=O.event.handlers.call(this,u,c),t=0;(o=s[t++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!u.isImmediatePropagationStopped();)(!u.rnamespace||!1===a.namespace||u.rnamespace.test(a.namespace))&&(u.handleObj=a,u.data=a.data,void 0!==(i=((O.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(u.result=i)&&(u.preventDefault(),u.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,i,o,a,s,l=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1)){for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(n=0,a=[],s={};n<u;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?O(o,this).index(c)>-1:O.find(o,this,null,[c]).length),s[o]&&a.push(i);a.length&&l.push({elem:c,handlers:a})}}return c=this,u<t.length&&l.push({elem:c,handlers:t.slice(u)}),l},addProp:function(e,t){Object.defineProperty(O.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[O.expando]?e:new O.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return eA.test(t.type)&&t.click&&M(t,"input")&&eN(t,"click",!0),!1},trigger:function(e){var t=this||e;return eA.test(t.type)&&t.click&&M(t,"input")&&eN(t,"click"),!0},_default:function(e){var t=e.target;return eA.test(t.type)&&t.click&&M(t,"input")&&es.get(t,"click")||M(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},O.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},O.Event=function(e,t){if(!(this instanceof O.Event))return new O.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?eD:eI,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&O.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[O.expando]=!0},O.Event.prototype={constructor:O.Event,isDefaultPrevented:eI,isPropagationStopped:eI,isImmediatePropagationStopped:eI,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=eD,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=eD,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=eD,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},O.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},O.event.addProp),O.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(w.documentMode){var n=es.get(this,"handle"),i=O.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else O.event.simulate(t,e.target,O.event.fix(e))}O.event.special[e]={setup:function(){var i;if(eN(this,e,!0),!w.documentMode)return!1;(i=es.get(this,t))||this.addEventListener(t,n),es.set(this,t,(i||0)+1)},trigger:function(){return eN(this,e),!0},teardown:function(){var e;if(!w.documentMode)return!1;(e=es.get(this,t)-1)?es.set(this,t,e):(this.removeEventListener(t,n),es.remove(this,t))},_default:function(t){return es.get(t.target,e)},delegateType:t},O.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=w.documentMode?this:i,a=es.get(o,t);a||(w.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),es.set(o,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=w.documentMode?this:i,a=es.get(o,t)-1;a?es.set(o,t,a):(w.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),es.remove(o,t))}}}),O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){O.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return i&&(i===this||O.contains(this,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),O.fn.extend({on:function(e,t,n,i){return ek(this,e,t,n,i)},one:function(e,t,n,i){return ek(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,O(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=eI),this.each(function(){O.event.remove(this,e,n,t)})}});var eR=/<script|<style|<link/i,eB=/checked\s*(?:[^=]|=\s*.checked.)/i,eL=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function eF(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&O(e).children("tbody")[0]||e}function eV(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ej(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function eG(e,t){var n,i,o,a,s,l;if(1===t.nodeType){if(es.hasData(e)&&(l=es.get(e).events))for(o in es.remove(t,"handle events"),l)for(n=0,i=l[o].length;n<i;n++)O.event.add(t,o,l[o][n]);el.hasData(e)&&(a=el.access(e),s=O.extend({},a),el.set(t,s))}}function eU(e,t,n,i){t=c(t);var o,a,s,l,u,d,f=0,p=e.length,h=p-1,m=t[0],g=b(m);if(g||p>1&&"string"==typeof m&&!y.checkClone&&eB.test(m))return e.each(function(o){var a=e.eq(o);g&&(t[0]=m.call(this,o,a.html())),eU(a,t,n,i)});if(p&&(a=(o=eM(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=a),a||i)){for(l=(s=O.map(eT(o,"script"),eV)).length;f<p;f++)u=o,f!==h&&(u=O.clone(u,!0,!0),l&&O.merge(s,eT(u,"script"))),n.call(e[f],u,f);if(l)for(d=s[s.length-1].ownerDocument,O.map(s,ej),f=0;f<l;f++)u=s[f],eS.test(u.type||"")&&!es.access(u,"globalEval")&&O.contains(d,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?O._evalUrl&&!u.noModule&&O._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},d):C(u.textContent.replace(eL,""),u,d))}return e}function ez(e,t,n){for(var i,o=t?O.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||O.cleanData(eT(i)),i.parentNode&&(n&&eg(i)&&eO(eT(i,"script")),i.parentNode.removeChild(i));return e}O.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,a,s,l=e.cloneNode(!0),u=eg(e);if(!y.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!O.isXMLDoc(e))for(i=0,s=eT(l),o=(a=eT(e)).length;i<o;i++)!function(e,t){var n=t.nodeName.toLowerCase();"input"===n&&eA.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}(a[i],s[i]);if(t)if(n)for(i=0,a=a||eT(e),s=s||eT(l),o=a.length;i<o;i++)eG(a[i],s[i]);else eG(e,l);return(s=eT(l,"script")).length>0&&eO(s,!u&&eT(e,"script")),l},cleanData:function(e){for(var t,n,i,o=O.event.special,a=0;void 0!==(n=e[a]);a++)if(eo(n)){if(t=n[es.expando]){if(t.events)for(i in t.events)o[i]?O.event.remove(n,i):O.removeEvent(n,i,t.handle);n[es.expando]=void 0}n[el.expando]&&(n[el.expando]=void 0)}}}),O.fn.extend({detach:function(e){return ez(this,e,!0)},remove:function(e){return ez(this,e)},text:function(e){return ee(this,function(e){return void 0===e?O.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return eU(this,arguments,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&eF(this,e).appendChild(e)})},prepend:function(){return eU(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=eF(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return eU(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return eU(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(O.cleanData(eT(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return O.clone(this,e,t)})},html:function(e){return ee(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!eR.test(e)&&!e_[(eC.exec(e)||["",""])[1].toLowerCase()]){e=O.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(O.cleanData(eT(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return eU(this,arguments,function(t){var n=this.parentNode;0>O.inArray(this,e)&&(O.cleanData(eT(this)),n&&n.replaceChild(t,this))},e)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){O.fn[e]=function(e){for(var n,i=[],o=O(e),a=o.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),O(o[s])[t](n),d.apply(i,n.get());return this.pushStack(i)}});var eW=RegExp("^("+ef+")(?!px)[a-z%]+$","i"),eH=/^--/,eq=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},eK=function(e,t,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=a[o];return i},eX=RegExp(eh.join("|"),"i");function eY(e,t,n){var i,o,a,s,l=eH.test(t),u=e.style;return(n=n||eq(e))&&(s=n.getPropertyValue(t)||n[t],l&&s&&(s=s.replace(N,"$1")||void 0),""!==s||eg(e)||(s=O.style(e,t)),!y.pixelBoxStyles()&&eW.test(s)&&eX.test(t)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=s,s=n.width,u.width=i,u.minWidth=o,u.maxWidth=a)),void 0!==s?s+"":s}function eZ(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",em.appendChild(c).appendChild(d);var e=i.getComputedStyle(d);n="1%"!==e.top,u=12===t(e.marginLeft),d.style.right="60%",s=36===t(e.right),o=36===t(e.width),d.style.position="absolute",a=12===t(d.offsetWidth/3),em.removeChild(c),d=null}}function t(e){return Math.round(parseFloat(e))}var n,o,a,s,l,u,c=w.createElement("div"),d=w.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===d.style.backgroundClip,O.extend(y,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,n,o;return null==l&&(e=w.createElement("table"),t=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",em.appendChild(e).appendChild(t).appendChild(n),l=parseInt((o=i.getComputedStyle(t)).height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,em.removeChild(e)),l}}))}();var eJ=["Webkit","Moz","ms"],eQ=w.createElement("div").style,e$={};function e0(e){var t=O.cssProps[e]||e$[e];return t||(e in eQ?e:e$[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=eJ.length;n--;)if((e=eJ[n]+t)in eQ)return e}(e)||e)}var e1=/^(none|table(?!-c[ea]).+)/,e2={position:"absolute",visibility:"hidden",display:"block"},e3={letterSpacing:"0",fontWeight:"400"};function e4(e,t,n){var i=ep.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function e5(e,t,n,i,o,a){var s=+("width"===t),l=0,u=0,c=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=O.css(e,n+eh[s],!0,o)),i?("content"===n&&(u-=O.css(e,"padding"+eh[s],!0,o)),"margin"!==n&&(u-=O.css(e,"border"+eh[s]+"Width",!0,o))):(u+=O.css(e,"padding"+eh[s],!0,o),"padding"!==n?u+=O.css(e,"border"+eh[s]+"Width",!0,o):l+=O.css(e,"border"+eh[s]+"Width",!0,o));return!i&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-l-.5))||0),u+c}function e6(e,t,n){var i=eq(e),o=(!y.boxSizingReliable()||n)&&"border-box"===O.css(e,"boxSizing",!1,i),a=o,s=eY(e,t,i),l="offset"+t[0].toUpperCase()+t.slice(1);if(eW.test(s)){if(!n)return s;s="auto"}return(!y.boxSizingReliable()&&o||!y.reliableTrDimensions()&&M(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===O.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===O.css(e,"boxSizing",!1,i),(a=l in e)&&(s=e[l])),(s=parseFloat(s)||0)+e5(e,t,n||(o?"border":"content"),a,i,s)+"px"}function e8(e,t,n,i,o){return new e8.prototype.init(e,t,n,i,o)}O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=eY(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=ei(t),u=eH.test(t),c=e.style;if(u||(t=e0(l)),s=O.cssHooks[t]||O.cssHooks[l],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:c[t];if("string"==(a=typeof n)&&(o=ep.exec(n))&&o[1]&&(n=eb(e,t,o),a="number"),null!=n&&n==n)"number"!==a||u||(n+=o&&o[3]||(O.cssNumber[l]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(u?c.setProperty(t,n):c[t]=n)}},css:function(e,t,n,i){var o,a,s,l=ei(t);return(eH.test(t)||(t=e0(l)),(s=O.cssHooks[t]||O.cssHooks[l])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=eY(e,t,i)),"normal"===o&&t in e3&&(o=e3[t]),""===n||n)?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),O.each(["height","width"],function(e,t){O.cssHooks[t]={get:function(e,n,i){if(n)return!e1.test(O.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?e6(e,t,i):eK(e,e2,function(){return e6(e,t,i)})},set:function(e,n,i){var o,a=eq(e),s=!y.scrollboxSize()&&"absolute"===a.position,l=(s||i)&&"border-box"===O.css(e,"boxSizing",!1,a),u=i?e5(e,t,i,l,a):0;return l&&s&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-e5(e,t,"border",!1,a)-.5)),u&&(o=ep.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=O.css(e,t)),e4(e,n,u)}}}),O.cssHooks.marginLeft=eZ(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(eY(e,"marginLeft"))||e.getBoundingClientRect().left-eK(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),O.each({margin:"",padding:"",border:"Width"},function(e,t){O.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+eh[i]+t]=a[i]||a[i-2]||a[0];return o}},"margin"!==e&&(O.cssHooks[e+t].set=e4)}),O.fn.extend({css:function(e,t){return ee(this,function(e,t,n){var i,o,a={},s=0;if(Array.isArray(t)){for(i=eq(e),o=t.length;s<o;s++)a[t[s]]=O.css(e,t[s],!1,i);return a}return void 0!==n?O.style(e,t,n):O.css(e,t)},e,t,arguments.length>1)}}),O.Tween=e8,e8.prototype={constructor:e8,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||O.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(O.cssNumber[n]?"":"px")},cur:function(){var e=e8.propHooks[this.prop];return e&&e.get?e.get(this):e8.propHooks._default.get(this)},run:function(e){var t,n=e8.propHooks[this.prop];return this.options.duration?this.pos=t=O.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):e8.propHooks._default.set(this),this}},e8.prototype.init.prototype=e8.prototype,e8.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=O.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){O.fx.step[e.prop]?O.fx.step[e.prop](e):1===e.elem.nodeType&&(O.cssHooks[e.prop]||null!=e.elem.style[e0(e.prop)])?O.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},e8.propHooks.scrollTop=e8.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},O.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},O.fx=e8.prototype.init,O.fx.step={};var e9,e7,te,tt,tn=/^(?:toggle|show|hide)$/,tr=/queueHooks$/;function ti(){return i.setTimeout(function(){te=void 0}),te=Date.now()}function to(e,t){var n,i=0,o={height:e};for(t=+!!t;i<4;i+=2-t)o["margin"+(n=eh[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ta(e,t,n){for(var i,o=(ts.tweeners[t]||[]).concat(ts.tweeners["*"]),a=0,s=o.length;a<s;a++)if(i=o[a].call(n,t,e))return i}function ts(e,t,n){var i,o,a=0,s=ts.prefilters.length,l=O.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=te||ti(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),a=0,s=c.tweens.length;a<s;a++)c.tweens[a].run(i);return(l.notifyWith(e,[c,i,n]),i<1&&s)?n:(s||l.notifyWith(e,[c,1,0]),l.resolveWith(e,[c]),!1)},c=l.promise({elem:e,props:O.extend({},t),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},n),originalProperties:t,originalOptions:n,startTime:te||ti(),duration:n.duration,tweens:[],createTween:function(t,n){var i=O.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return t?(l.notifyWith(e,[c,1,0]),l.resolveWith(e,[c,t])):l.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var n,i,o,a,s;for(n in e)if(o=t[i=ei(n)],Array.isArray(a=e[n])&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=O.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=o);else t[i]=o}(d,c.opts.specialEasing);a<s;a++)if(i=ts.prefilters[a].call(c,e,d,c.opts))return b(i.stop)&&(O._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return O.map(d,ta,c),b(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),O.fx.timer(O.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}O.Animation=O.extend(ts,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return eb(n.elem,e,ep.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(K);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ts.tweeners[n]=ts.tweeners[n]||[],ts.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,a,s,l,u,c,d,f="width"in t||"height"in t,p=this,h={},m=e.style,g=e.nodeType&&ey(e),v=es.get(e,"fxshow");for(i in n.queue||(null==(s=O._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,O.queue(e,"fx").length||s.empty.fire()})})),t)if(o=t[i],tn.test(o)){if(delete t[i],a=a||"toggle"===o,o===(g?"hide":"show"))if("show"!==o||!v||void 0===v[i])continue;else g=!0;h[i]=v&&v[i]||O.style(e,i)}if(!(!(u=!O.isEmptyObject(t))&&O.isEmptyObject(h)))for(i in f&&1===e.nodeType&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],null==(c=v&&v.display)&&(c=es.get(e,"display")),"none"===(d=O.css(e,"display"))&&(c?d=c:(ew([e],!0),c=e.style.display||c,d=O.css(e,"display"),ew([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===O.css(e,"float")&&(u||(p.done(function(){m.display=c}),null==c&&(c="none"===(d=m.display)?"":d)),m.display="inline-block")),n.overflow&&(m.overflow="hidden",p.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]})),u=!1,h)u||(v?"hidden"in v&&(g=v.hidden):v=es.access(e,"fxshow",{display:c}),a&&(v.hidden=!g),g&&ew([e],!0),p.done(function(){for(i in g||ew([e]),es.remove(e,"fxshow"),h)O.style(e,i,h[i])})),u=ta(g?v[i]:0,i,p),i in v||(v[i]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ts.prefilters.unshift(e):ts.prefilters.push(e)}}),O.speed=function(e,t,n){var i=e&&"object"==typeof e?O.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return O.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in O.fx.speeds?i.duration=O.fx.speeds[i.duration]:i.duration=O.fx.speeds._default),(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){b(i.old)&&i.old.call(this),i.queue&&O.dequeue(this,i.queue)},i},O.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ey).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=O.isEmptyObject(e),a=O.speed(t,n,i),s=function(){var t=ts(this,O.extend({},e),a);(o||es.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=O.timers,s=es.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&tr.test(o)&&i(s[o]);for(o=a.length;o--;)a[o].elem===this&&(null==e||a[o].queue===e)&&(a[o].anim.stop(n),t=!1,a.splice(o,1));(t||!n)&&O.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=es.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=O.timers,s=i?i.length:0;for(n.finish=!0,O.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),O.each(["toggle","show","hide"],function(e,t){var n=O.fn[t];O.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(to(t,!0),e,i,o)}}),O.each({slideDown:to("show"),slideUp:to("hide"),slideToggle:to("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){O.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),O.timers=[],O.fx.tick=function(){var e,t=0,n=O.timers;for(te=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||O.fx.stop(),te=void 0},O.fx.timer=function(e){O.timers.push(e),O.fx.start()},O.fx.interval=13,O.fx.start=function(){tt||(tt=!0,function e(){tt&&(!1===w.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(e):i.setTimeout(e,O.fx.interval),O.fx.tick())}())},O.fx.stop=function(){tt=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(e,t){return e=O.fx&&O.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}})},tl=w.createElement("input"),tu=w.createElement("select").appendChild(w.createElement("option")),tl.type="checkbox",y.checkOn=""!==tl.value,y.optSelected=tu.selected,(tl=w.createElement("input")).value="t",tl.type="radio",y.radioValue="t"===tl.value;var tl,tu,tc,td=O.expr.attrHandle;O.fn.extend({attr:function(e,t){return ee(this,O.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})}}),O.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?O.prop(e,t,n):(1===a&&O.isXMLDoc(e)||(o=O.attrHooks[t.toLowerCase()]||(O.expr.match.bool.test(t)?tc:void 0)),void 0!==n)?null===n?void O.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=O.find.attr(e,t))?void 0:i},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(K);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),tc={set:function(e,t,n){return!1===t?O.removeAttr(e,n):e.setAttribute(n,n),n}},O.each(O.expr.match.bool.source.match(/\w+/g),function(e,t){var n=td[t]||O.find.attr;td[t]=function(e,t,i){var o,a,s=t.toLowerCase();return i||(a=td[s],td[s]=o,o=null!=n(e,t,i)?s:null,td[s]=a),o}});var tf=/^(?:input|select|textarea|button)$/i,tp=/^(?:a|area)$/i;function th(e){return(e.match(K)||[]).join(" ")}function tm(e){return e.getAttribute&&e.getAttribute("class")||""}function tg(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(K)||[]}O.fn.extend({prop:function(e,t){return ee(this,O.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[O.propFix[e]||e]})}}),O.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return(1===a&&O.isXMLDoc(e)||(t=O.propFix[t]||t,o=O.propHooks[t]),void 0!==n)?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=O.find.attr(e,"tabindex");return t?parseInt(t,10):tf.test(e.nodeName)||tp.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(O.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this}),O.fn.extend({addClass:function(e){var t,n,i,o,a,s;return b(e)?this.each(function(t){O(this).addClass(e.call(this,t,tm(this)))}):(t=tg(e)).length?this.each(function(){if(i=tm(this),n=1===this.nodeType&&" "+th(i)+" "){for(a=0;a<t.length;a++)o=t[a],0>n.indexOf(" "+o+" ")&&(n+=o+" ");i!==(s=th(n))&&this.setAttribute("class",s)}}):this},removeClass:function(e){var t,n,i,o,a,s;return b(e)?this.each(function(t){O(this).removeClass(e.call(this,t,tm(this)))}):arguments.length?(t=tg(e)).length?this.each(function(){if(i=tm(this),n=1===this.nodeType&&" "+th(i)+" "){for(a=0;a<t.length;a++)for(o=t[a];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(s=th(n))&&this.setAttribute("class",s)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,i,o,a,s=typeof e,l="string"===s||Array.isArray(e);return b(e)?this.each(function(n){O(this).toggleClass(e.call(this,n,tm(this),t),t)}):"boolean"==typeof t&&l?t?this.addClass(e):this.removeClass(e):(n=tg(e),this.each(function(){if(l)for(o=0,a=O(this);o<n.length;o++)i=n[o],a.hasClass(i)?a.removeClass(i):a.addClass(i);else(void 0===e||"boolean"===s)&&((i=tm(this))&&es.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":es.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+th(tm(n))+" ").indexOf(t)>-1)return!0;return!1}});var tv=/\r/g;O.fn.extend({val:function(e){var t,n,i,o=this[0];if(!arguments.length)return o?(t=O.valHooks[o.type]||O.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(tv,""):null==n?"":n:void 0;return i=b(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,O(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=O.map(o,function(e){return null==e?"":e+""})),(t=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})}}),O.extend({valHooks:{option:{get:function(e){var t=O.find.attr(e,"value");return null!=t?t:th(O.text(e))}},select:{get:function(e){var t,n,i,o=e.options,a=e.selectedIndex,s="select-one"===e.type,l=s?null:[],u=s?a+1:o.length;for(i=a<0?u:s?a:0;i<u;i++)if(((n=o[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(t=O(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,i,o=e.options,a=O.makeArray(t),s=o.length;s--;)((i=o[s]).selected=O.inArray(O.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=O.inArray(O(e).val(),t)>-1}},y.checkOn||(O.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ty=i.location,tb={guid:Date.now()},tx=/\?/;O.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=new i.DOMParser().parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],(!t||n)&&O.error("Invalid XML: "+(n?O.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var tw=/^(?:focusinfocus|focusoutblur)$/,tA=function(e){e.stopPropagation()};O.extend(O.event,{trigger:function(e,t,n,o){var a,s,l,u,c,d,f,p,h=[n||w],g=m.call(e,"type")?e.type:e,v=m.call(e,"namespace")?e.namespace.split("."):[];if((s=p=l=n=n||w,!(3===n.nodeType||8===n.nodeType||tw.test(g+O.event.triggered)))&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),c=0>g.indexOf(":")&&"on"+g,(e=e[O.expando]?e:new O.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:O.makeArray(t,[e]),f=O.event.special[g]||{},o||!f.trigger||!1!==f.trigger.apply(n,t))){if(!o&&!f.noBubble&&!x(n)){for(u=f.delegateType||g,tw.test(u+g)||(s=s.parentNode);s;s=s.parentNode)h.push(s),l=s;l===(n.ownerDocument||w)&&h.push(l.defaultView||l.parentWindow||i)}for(a=0;(s=h[a++])&&!e.isPropagationStopped();)p=s,e.type=a>1?u:f.bindType||g,(d=(es.get(s,"events")||Object.create(null))[e.type]&&es.get(s,"handle"))&&d.apply(s,t),(d=c&&s[c])&&d.apply&&eo(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,!o&&!e.isDefaultPrevented()&&(!f._default||!1===f._default.apply(h.pop(),t))&&eo(n)&&c&&b(n[g])&&!x(n)&&((l=n[c])&&(n[c]=null),O.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,tA),n[g](),e.isPropagationStopped()&&p.removeEventListener(g,tA),O.event.triggered=void 0,l&&(n[c]=l)),e.result}},simulate:function(e,t,n){var i=O.extend(new O.Event,n,{type:e,isSimulated:!0});O.event.trigger(i,null,t)}}),O.fn.extend({trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return O.event.trigger(e,t,n,!0)}});var tC=/\[\]$/,tS=/\r?\n/g,t_=/^(?:submit|button|image|reset|file)$/i,tT=/^(?:input|select|textarea|keygen)/i;O.param=function(e,t){var n,i=[],o=function(e,t){var n=b(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!O.isPlainObject(e))O.each(e,function(){o(this.name,this.value)});else for(n in e)!function e(t,n,i,o){var a;if(Array.isArray(n))O.each(n,function(n,a){i||tC.test(t)?o(t,a):e(t+"["+("object"==typeof a&&null!=a?n:"")+"]",a,i,o)});else if(i||"object"!==S(n))o(t,n);else for(a in n)e(t+"["+a+"]",n[a],i,o)}(n,e[n],t,o);return i.join("&")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=O.prop(this,"elements");return e?O.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!O(this).is(":disabled")&&tT.test(this.nodeName)&&!t_.test(e)&&(this.checked||!eA.test(e))}).map(function(e,t){var n=O(this).val();return null==n?null:Array.isArray(n)?O.map(n,function(e){return{name:t.name,value:e.replace(tS,"\r\n")}}):{name:t.name,value:n.replace(tS,"\r\n")}}).get()}});var tO=/%20/g,tP=/#.*$/,tM=/([?&])_=[^&]*/,tE=/^(.*?):[ \t]*([^\r\n]*)$/mg,tD=/^(?:GET|HEAD)$/,tI=/^\/\//,tk={},tN={},tR="*/".concat("*"),tB=w.createElement("a");function tL(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(K)||[];if(b(n))for(;i=a[o++];)"+"===i[0]?(e[i=i.slice(1)||"*"]=e[i]||[]).unshift(n):(e[i]=e[i]||[]).push(n)}}function tF(e,t,n,i){var o={},a=e===tN;function s(l){var u;return o[l]=!0,O.each(e[l]||[],function(e,l){var c=l(t,n,i);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),u}return s(t.dataTypes[0])||!o["*"]&&s("*")}function tV(e,t){var n,i,o=O.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&O.extend(!0,e,i),e}tB.href=ty.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ty.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ty.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tR,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?tV(tV(e,O.ajaxSettings),t):tV(O.ajaxSettings,e)},ajaxPrefilter:tL(tk),ajaxTransport:tL(tN),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,a,s,l,u,c,d,f,p,h=O.ajaxSetup({},t),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?O(m):O.event,v=O.Deferred(),y=O.Callbacks("once memory"),b=h.statusCode||{},x={},A={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=tE.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(x[e=A[e.toLowerCase()]=A[e.toLowerCase()]||e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),_(0,t),this}};if(v.promise(S),h.url=((e||h.url||ty.href)+"").replace(tI,ty.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(K)||[""],null==h.crossDomain){u=w.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=tB.protocol+"//"+tB.host!=u.protocol+"//"+u.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=O.param(h.data,h.traditional)),tF(tk,h,t,S),c)return S;for(f in(d=O.event&&h.global)&&0==O.active++&&O.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!tD.test(h.type),o=h.url.replace(tP,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(tO,"+")):(p=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(tx.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(tM,"$1"),p=(tx.test(o)?"&":"?")+"_="+tb.guid+++p),h.url=o+p),h.ifModified&&(O.lastModified[o]&&S.setRequestHeader("If-Modified-Since",O.lastModified[o]),O.etag[o]&&S.setRequestHeader("If-None-Match",O.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+tR+"; q=0.01":""):h.accepts["*"]),h.headers)S.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(m,S,h)||c))return S.abort();if(C="abort",y.add(h.complete),S.done(h.success),S.fail(h.error),n=tF(tN,h,t,S)){if(S.readyState=1,d&&g.trigger("ajaxSend",[S,h]),c)return S;h.async&&h.timeout>0&&(l=i.setTimeout(function(){S.abort("timeout")},h.timeout));try{c=!1,n.send(x,_)}catch(e){if(c)throw e;_(-1,e)}}else _(-1,"No Transport");function _(e,t,s,u){var f,p,x,w,A,C=t;!c&&(c=!0,l&&i.clearTimeout(l),n=void 0,a=u||"",S.readyState=4*(e>0),f=e>=200&&e<300||304===e,s&&(w=function(e,t,n){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i){for(o in l)if(l[o]&&l[o].test(i)){u.unshift(o);break}}if(u[0]in n)a=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}s||(s=o)}a=a||s}if(a)return a!==u[0]&&u.unshift(a),n[a]}(h,S,s)),!f&&O.inArray("script",h.dataTypes)>-1&&0>O.inArray("json",h.dataTypes)&&(h.converters["text script"]=function(){}),w=function(e,t,n,i){var o,a,s,l,u,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=d.shift()){if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(s=c[u+" "+a]||c["* "+a])){for(o in c)if((l=o.split(" "))[1]===a&&(s=c[u+" "+l[0]]||c["* "+l[0]])){!0===s?s=c[o]:!0!==c[o]&&(a=l[0],d.unshift(l[1]));break}}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+a}}}}return{state:"success",data:t}}(h,w,S,f),f?(h.ifModified&&((A=S.getResponseHeader("Last-Modified"))&&(O.lastModified[o]=A),(A=S.getResponseHeader("etag"))&&(O.etag[o]=A)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=w.state,p=w.data,f=!(x=w.error))):(x=C,(e||!C)&&(C="error",e<0&&(e=0))),S.status=e,S.statusText=(t||C)+"",f?v.resolveWith(m,[p,C,S]):v.rejectWith(m,[S,C,x]),S.statusCode(b),b=void 0,d&&g.trigger(f?"ajaxSuccess":"ajaxError",[S,h,f?p:x]),y.fireWith(m,[S,C]),d&&(g.trigger("ajaxComplete",[S,h]),--O.active||O.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return O.get(e,t,n,"json")},getScript:function(e,t){return O.get(e,void 0,t,"script")}}),O.each(["get","post"],function(e,t){O[t]=function(e,n,i,o){return b(n)&&(o=o||i,i=n,n=void 0),O.ajax(O.extend({url:e,type:t,dataType:o,data:n,success:i},O.isPlainObject(e)&&e))}}),O.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),O._evalUrl=function(e,t,n){return O.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){O.globalEval(e,t,n)}})},O.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=O(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return b(e)?this.each(function(t){O(this).wrapInner(e.call(this,t))}):this.each(function(){var t=O(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b(e);return this.each(function(n){O(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){O(this).replaceWith(this.childNodes)}),this}}),O.expr.pseudos.hidden=function(e){return!O.expr.pseudos.visible(e)},O.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},O.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var tj={0:200,1223:204},tG=O.ajaxSettings.xhr();y.cors=!!tG&&"withCredentials"in tG,y.ajax=tG=!!tG,O.ajaxTransport(function(e){var t,n;if(y.cors||tG&&!e.crossDomain)return{send:function(o,a){var s,l=e.xhr();if(l.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)l[s]=e.xhrFields[s];for(s in e.mimeType&&l.overrideMimeType&&l.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=n=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?a(0,"error"):a(l.status,l.statusText):a(tj[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=t(),n=l.onerror=l.ontimeout=t("error"),void 0!==l.onabort?l.onabort=n:l.onreadystatechange=function(){4===l.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{l.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),O.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return O.globalEval(e),e}}}),O.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),O.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(i,o){t=O("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){n&&n()}}}});var tU=[],tz=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tU.pop()||O.expando+"_"+tb.guid++;return this[e]=!0,e}}),O.ajaxPrefilter("json jsonp",function(e,t,n){var o,a,s,l=!1!==e.jsonp&&(tz.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tz.test(e.data)&&"data");if(l||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,l?e[l]=e[l].replace(tz,"$1"+o):!1!==e.jsonp&&(e.url+=(tx.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||O.error(o+" was not called"),s[0]},e.dataTypes[0]="json",a=i[o],i[o]=function(){s=arguments},n.always(function(){void 0===a?O(i).removeProp(o):i[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,tU.push(o)),s&&b(a)&&a(s[0]),s=a=void 0}),"script"}),(a=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",y.createHTMLDocument=2===a.childNodes.length,O.parseHTML=function(e,t,n){var i,o,a;return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((i=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(i)):t=w),o=j.exec(e),a=!n&&[],o)?[t.createElement(o[1])]:(o=eM([e],t,a),a&&a.length&&O(a).remove(),O.merge([],o.childNodes))},O.fn.load=function(e,t,n){var i,o,a,s=this,l=e.indexOf(" ");return l>-1&&(i=th(e.slice(l)),e=e.slice(0,l)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&O.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(i?O("<div>").append(O.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},O.expr.pseudos.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length},O.offset={setOffset:function(e,t,n){var i,o,a,s,l,u,c=O.css(e,"position"),d=O(e),f={};"static"===c&&(e.style.position="relative"),l=d.offset(),a=O.css(e,"top"),u=O.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1?(s=(i=d.position()).top,o=i.left):(s=parseFloat(a)||0,o=parseFloat(u)||0),b(t)&&(t=t.call(e,n,O.extend({},l))),null!=t.top&&(f.top=t.top-l.top+s),null!=t.left&&(f.left=t.left-l.left+o),"using"in t?t.using.call(e,f):d.css(f)}},O.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){O.offset.setOffset(this,e,t)});var t,n,i=this[0];if(i)return i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===O.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===O.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&(o=O(e).offset(),o.top+=O.css(e,"borderTopWidth",!0),o.left+=O.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-O.css(i,"marginTop",!0),left:t.left-o.left-O.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===O.css(e,"position");)e=e.offsetParent;return e||em})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;O.fn[e]=function(i){return ee(this,function(e,i,o){var a;if(x(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o},e,i,arguments.length)}}),O.each(["top","left"],function(e,t){O.cssHooks[t]=eZ(y.pixelPosition,function(e,n){if(n)return n=eY(e,t),eW.test(n)?O(e).position()[t]+"px":n})}),O.each({Height:"height",Width:"width"},function(e,t){O.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){O.fn[i]=function(o,a){var s=arguments.length&&(n||"boolean"!=typeof o),l=n||(!0===o||!0===a?"margin":"border");return ee(this,function(t,n,o){var a;return x(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?O.css(t,n,l):O.style(t,n,o,l)},t,s?o:void 0,s)}})}),O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){O.fn[t]=function(e){return this.on(t,e)}}),O.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),O.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){O.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var tW=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;O.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return i=u.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(u.call(arguments)))}).guid=e.guid=e.guid||O.guid++,o},O.holdReady=function(e){e?O.readyWait++:O.ready(!0)},O.isArray=Array.isArray,O.parseJSON=JSON.parse,O.nodeName=M,O.isFunction=b,O.isWindow=x,O.camelCase=ei,O.type=S,O.now=Date.now,O.isNumeric=function(e){var t=O.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},O.trim=function(e){return null==e?"":(e+"").replace(tW,"$1")},void 0===(n=(function(){return O}).apply(t,[]))||(e.exports=n);var tH=i.jQuery,tq=i.$;return O.noConflict=function(e){return i.$===O&&(i.$=tq),e&&i.jQuery===O&&(i.jQuery=tH),O},void 0===o&&(i.jQuery=i.$=O),O})},4715(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9481),s=function(e){return this instanceof s?(e=e||{},a.call(this,e),n(4727).call(this),this._init(e),this):new s(e)};i(s,a),o("webgl","isoline",s),e.exports=s},4727(e,t,n){var i=function(e){"use strict";if(!(this instanceof n(4897)))return new i(e);var t=this,o=this.draw;if(this.draw=function(){return t.ready&&(t._update({mayDelay:!0}),t.renderer()._render(),o()),t},this.bin){var a=this.bin;this.bin=function(e,n){if(void 0===e&&!n&&null===a(void 0,!0)){var i=t.layer&&t.layer(),o=i&&i.map&&i.map(),s=(o&&o.listSceneObjects()||[]).indexOf(t);if(s>=0)return s}return a.apply(t,arguments)}}return this};e.exports=i},4762(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,`/* BASICS */

.CodeMirror {
  /* Set height, width, borders, and global font properties here */
  font-family: monospace;
  height: 300px;
  color: black;
  direction: ltr;
}

/* PADDING */

.CodeMirror-lines {
  padding: 4px 0; /* Vertical padding around content */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  padding: 0 4px; /* Horizontal padding of content */
}

.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: white; /* The little square between H and V scrollbars */
}

/* GUTTER */

.CodeMirror-gutters {
  border-right: 1px solid #ddd;
  background-color: #f7f7f7;
  white-space: nowrap;
}
.CodeMirror-linenumbers {}
.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #999;
  white-space: nowrap;
}

.CodeMirror-guttermarker { color: black; }
.CodeMirror-guttermarker-subtle { color: #999; }

/* CURSOR */

.CodeMirror-cursor {
  border-left: 1px solid black;
  border-right: none;
  width: 0;
}
/* Shown when moving in bi-directional text */
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid silver;
}
.cm-fat-cursor .CodeMirror-cursor {
  width: auto;
  border: 0 !important;
  background: #7e7;
}
.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}
.cm-fat-cursor .CodeMirror-line::selection,
.cm-fat-cursor .CodeMirror-line > span::selection, 
.cm-fat-cursor .CodeMirror-line > span > span::selection { background: transparent; }
.cm-fat-cursor .CodeMirror-line::-moz-selection,
.cm-fat-cursor .CodeMirror-line > span::-moz-selection,
.cm-fat-cursor .CodeMirror-line > span > span::-moz-selection { background: transparent; }
.cm-fat-cursor { caret-color: transparent; }
@-moz-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@-webkit-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}

/* Can style cursor different in overwrite (non-insert) mode */
.CodeMirror-overwrite .CodeMirror-cursor {}

.cm-tab { display: inline-block; text-decoration: inherit; }

.CodeMirror-rulers {
  position: absolute;
  left: 0; right: 0; top: -50px; bottom: 0;
  overflow: hidden;
}
.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  top: 0; bottom: 0;
  position: absolute;
}

/* DEFAULT THEME */

.cm-s-default .cm-header {color: blue;}
.cm-s-default .cm-quote {color: #090;}
.cm-negative {color: #d44;}
.cm-positive {color: #292;}
.cm-header, .cm-strong {font-weight: bold;}
.cm-em {font-style: italic;}
.cm-link {text-decoration: underline;}
.cm-strikethrough {text-decoration: line-through;}

.cm-s-default .cm-keyword {color: #708;}
.cm-s-default .cm-atom {color: #219;}
.cm-s-default .cm-number {color: #164;}
.cm-s-default .cm-def {color: #00f;}
.cm-s-default .cm-variable,
.cm-s-default .cm-punctuation,
.cm-s-default .cm-property,
.cm-s-default .cm-operator {}
.cm-s-default .cm-variable-2 {color: #05a;}
.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}
.cm-s-default .cm-comment {color: #a50;}
.cm-s-default .cm-string {color: #a11;}
.cm-s-default .cm-string-2 {color: #f50;}
.cm-s-default .cm-meta {color: #555;}
.cm-s-default .cm-qualifier {color: #555;}
.cm-s-default .cm-builtin {color: #30a;}
.cm-s-default .cm-bracket {color: #997;}
.cm-s-default .cm-tag {color: #170;}
.cm-s-default .cm-attribute {color: #00c;}
.cm-s-default .cm-hr {color: #999;}
.cm-s-default .cm-link {color: #00c;}

.cm-s-default .cm-error {color: #f00;}
.cm-invalidchar {color: #f00;}

.CodeMirror-composing { border-bottom: 2px solid; }

/* Default styles for common addons */

div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}
div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}
.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }
.CodeMirror-activeline-background {background: #e8f2ff;}

/* STOP */

/* The rest of this file contains styles related to the mechanics of
   the editor. You probably shouldn't touch them. */

.CodeMirror {
  position: relative;
  overflow: hidden;
  background: white;
}

.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
  /* 50px is the magic margin used to hide the element's real scrollbars */
  /* See overflow: hidden in .CodeMirror */
  margin-bottom: -50px; margin-right: -50px;
  padding-bottom: 50px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
  z-index: 0;
}
.CodeMirror-sizer {
  position: relative;
  border-right: 50px solid transparent;
}

/* The fake, visible scrollbars. Used to force redraw during scrolling
   before actual scrolling happens, thus preventing shaking and
   flickering artifacts. */
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  position: absolute;
  z-index: 6;
  display: none;
  outline: none;
}
.CodeMirror-vscrollbar {
  right: 0; top: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.CodeMirror-hscrollbar {
  bottom: 0; left: 0;
  overflow-y: hidden;
  overflow-x: scroll;
}
.CodeMirror-scrollbar-filler {
  right: 0; bottom: 0;
}
.CodeMirror-gutter-filler {
  left: 0; bottom: 0;
}

.CodeMirror-gutters {
  position: absolute; left: 0; top: 0;
  min-height: 100%;
  z-index: 3;
}
.CodeMirror-gutter {
  white-space: normal;
  height: 100%;
  display: inline-block;
  vertical-align: top;
  margin-bottom: -50px;
}
.CodeMirror-gutter-wrapper {
  position: absolute;
  z-index: 4;
  background: none !important;
  border: none !important;
}
.CodeMirror-gutter-background {
  position: absolute;
  top: 0; bottom: 0;
  z-index: 4;
}
.CodeMirror-gutter-elt {
  position: absolute;
  cursor: default;
  z-index: 4;
}
.CodeMirror-gutter-wrapper ::selection { background-color: transparent }
.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }

.CodeMirror-lines {
  cursor: text;
  min-height: 1px; /* prevents collapsing before first draw */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  /* Reset some styles that the rest of the page might have set */
  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;
  border-width: 0;
  background: transparent;
  font-family: inherit;
  font-size: inherit;
  margin: 0;
  white-space: pre;
  word-wrap: normal;
  line-height: inherit;
  color: inherit;
  z-index: 2;
  position: relative;
  overflow: visible;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-variant-ligatures: contextual;
  font-variant-ligatures: contextual;
}
.CodeMirror-wrap pre.CodeMirror-line,
.CodeMirror-wrap pre.CodeMirror-line-like {
  word-wrap: break-word;
  white-space: pre-wrap;
  word-break: normal;
}

.CodeMirror-linebackground {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  z-index: 0;
}

.CodeMirror-linewidget {
  position: relative;
  z-index: 2;
  padding: 0.1px; /* Force widget margins to stay inside of the container */
}

.CodeMirror-widget {}

.CodeMirror-rtl pre { direction: rtl; }

.CodeMirror-code {
  outline: none;
}

/* Force content-box sizing for the elements where we expect it */
.CodeMirror-scroll,
.CodeMirror-sizer,
.CodeMirror-gutter,
.CodeMirror-gutters,
.CodeMirror-linenumber {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

.CodeMirror-measure {
  position: absolute;
  width: 100%;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}

.CodeMirror-cursor {
  position: absolute;
  pointer-events: none;
}
.CodeMirror-measure pre { position: static; }

div.CodeMirror-cursors {
  visibility: hidden;
  position: relative;
  z-index: 3;
}
div.CodeMirror-dragcursors {
  visibility: visible;
}

.CodeMirror-focused div.CodeMirror-cursors {
  visibility: visible;
}

.CodeMirror-selected { background: #d9d9d9; }
.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }
.CodeMirror-crosshair { cursor: crosshair; }
.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }
.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }

.cm-searching {
  background-color: #ffa;
  background-color: rgba(255, 255, 0, .4);
}

/* Used to force a border model for a node */
.cm-force-border { padding-right: .1px; }

@media print {
  /* Hide the cursor when printing */
  .CodeMirror div.CodeMirror-cursors {
    visibility: hidden;
  }
}

/* See issue #2901 */
.cm-tab-wrap-hack:after { content: ''; }

/* Help users use markselection to safely style text background */
span.CodeMirror-selectedtext { background: none; }
`,"",{version:3,sources:["webpack://./node_modules/codemirror/lib/codemirror.css"],names:[],mappings:"AAAA,WAAW;;AAEX;EACE,gEAAgE;EAChE,sBAAsB;EACtB,aAAa;EACb,YAAY;EACZ,cAAc;AAChB;;AAEA,YAAY;;AAEZ;EACE,cAAc,EAAE,oCAAoC;AACtD;AACA;;EAEE,cAAc,EAAE,kCAAkC;AACpD;;AAEA;EACE,uBAAuB,EAAE,iDAAiD;AAC5E;;AAEA,WAAW;;AAEX;EACE,4BAA4B;EAC5B,yBAAyB;EACzB,mBAAmB;AACrB;AACA,yBAAyB;AACzB;EACE,oBAAoB;EACpB,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;AACrB;;AAEA,2BAA2B,YAAY,EAAE;AACzC,kCAAkC,WAAW,EAAE;;AAE/C,WAAW;;AAEX;EACE,4BAA4B;EAC5B,kBAAkB;EAClB,QAAQ;AACV;AACA,6CAA6C;AAC7C;EACE,6BAA6B;AAC/B;AACA;EACE,WAAW;EACX,oBAAoB;EACpB,gBAAgB;AAClB;AACA;EACE,UAAU;AACZ;AACA;;2DAE2D,uBAAuB,EAAE;AACpF;;gEAEgE,uBAAuB,EAAE;AACzF,iBAAiB,wBAAwB,EAAE;AAC3C;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;AACA;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;AACA;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;;AAEA,8DAA8D;AAC9D,0CAA0C;;AAE1C,UAAU,qBAAqB,EAAE,wBAAwB,EAAE;;AAE3D;EACE,kBAAkB;EAClB,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS;EACxC,gBAAgB;AAClB;AACA;EACE,2BAA2B;EAC3B,MAAM,EAAE,SAAS;EACjB,kBAAkB;AACpB;;AAEA,kBAAkB;;AAElB,0BAA0B,WAAW,CAAC;AACtC,yBAAyB,WAAW,CAAC;AACrC,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,wBAAwB,iBAAiB,CAAC;AAC1C,QAAQ,kBAAkB,CAAC;AAC3B,UAAU,0BAA0B,CAAC;AACrC,mBAAmB,6BAA6B,CAAC;;AAEjD,2BAA2B,WAAW,CAAC;AACvC,wBAAwB,WAAW,CAAC;AACpC,0BAA0B,WAAW,CAAC;AACtC,uBAAuB,WAAW,CAAC;AACnC;;;4BAG4B;AAC5B,8BAA8B,WAAW,CAAC;AAC1C,sDAAsD,WAAW,CAAC;AAClE,2BAA2B,WAAW,CAAC;AACvC,0BAA0B,WAAW,CAAC;AACtC,4BAA4B,WAAW,CAAC;AACxC,wBAAwB,WAAW,CAAC;AACpC,6BAA6B,WAAW,CAAC;AACzC,2BAA2B,WAAW,CAAC;AACvC,2BAA2B,WAAW,CAAC;AACvC,uBAAuB,WAAW,CAAC;AACnC,6BAA6B,WAAW,CAAC;AACzC,sBAAsB,WAAW,CAAC;AAClC,wBAAwB,WAAW,CAAC;;AAEpC,yBAAyB,WAAW,CAAC;AACrC,iBAAiB,WAAW,CAAC;;AAE7B,wBAAwB,wBAAwB,EAAE;;AAElD,qCAAqC;;AAErC,gDAAgD,WAAW,CAAC;AAC5D,mDAAmD,WAAW,CAAC;AAC/D,0BAA0B,iCAAiC,EAAE;AAC7D,mCAAmC,mBAAmB,CAAC;;AAEvD,SAAS;;AAET;mDACmD;;AAEnD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,2BAA2B,EAAE,4CAA4C;EACzE,wEAAwE;EACxE,wCAAwC;EACxC,oBAAoB,EAAE,mBAAmB;EACzC,oBAAoB;EACpB,YAAY;EACZ,aAAa,EAAE,mDAAmD;EAClE,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;;0BAE0B;AAC1B;EACE,kBAAkB;EAClB,UAAU;EACV,aAAa;EACb,aAAa;AACf;AACA;EACE,QAAQ,EAAE,MAAM;EAChB,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,SAAS,EAAE,OAAO;EAClB,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,QAAQ,EAAE,SAAS;AACrB;AACA;EACE,OAAO,EAAE,SAAS;AACpB;;AAEA;EACE,kBAAkB,EAAE,OAAO,EAAE,MAAM;EACnC,gBAAgB;EAChB,UAAU;AACZ;AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,qBAAqB;EACrB,mBAAmB;EACnB,oBAAoB;AACtB;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,2BAA2B;EAC3B,uBAAuB;AACzB;AACA;EACE,kBAAkB;EAClB,MAAM,EAAE,SAAS;EACjB,UAAU;AACZ;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,UAAU;AACZ;AACA,yCAAyC,8BAA8B;AACvE,8CAA8C,8BAA8B;;AAE5E;EACE,YAAY;EACZ,eAAe,EAAE,0CAA0C;AAC7D;AACA;;EAEE,+DAA+D;EAC/D,qBAAqB,EAAE,wBAAwB,EAAE,gBAAgB;EACjE,eAAe;EACf,uBAAuB;EACvB,oBAAoB;EACpB,kBAAkB;EAClB,SAAS;EACT,gBAAgB;EAChB,iBAAiB;EACjB,oBAAoB;EACpB,cAAc;EACd,UAAU;EACV,kBAAkB;EAClB,iBAAiB;EACjB,wCAAwC;EACxC,0CAA0C;EAC1C,kCAAkC;AACpC;AACA;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS;EACpC,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,cAAc,EAAE,yDAAyD;AAC3E;;AAEA,oBAAoB;;AAEpB,sBAAsB,cAAc,EAAE;;AAEtC;EACE,aAAa;AACf;;AAEA,iEAAiE;AACjE;;;;;EAKE,4BAA4B;EAC5B,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;AACtB;AACA,0BAA0B,gBAAgB,EAAE;;AAE5C;EACE,kBAAkB;EAClB,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;AACrB;;AAEA,uBAAuB,mBAAmB,EAAE;AAC5C,2CAA2C,mBAAmB,EAAE;AAChE,wBAAwB,iBAAiB,EAAE;AAC3C,6GAA6G,mBAAmB,EAAE;AAClI,4HAA4H,mBAAmB,EAAE;;AAEjJ;EACE,sBAAsB;EACtB,uCAAuC;AACzC;;AAEA,4CAA4C;AAC5C,mBAAmB,mBAAmB,EAAE;;AAExC;EACE,kCAAkC;EAClC;IACE,kBAAkB;EACpB;AACF;;AAEA,oBAAoB;AACpB,0BAA0B,WAAW,EAAE;;AAEvC,iEAAiE;AACjE,+BAA+B,gBAAgB,EAAE",sourcesContent:["/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor .CodeMirror-line::selection,\n.cm-fat-cursor .CodeMirror-line > span::selection, \n.cm-fat-cursor .CodeMirror-line > span > span::selection { background: transparent; }\n.cm-fat-cursor .CodeMirror-line::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span > span::-moz-selection { background: transparent; }\n.cm-fat-cursor { caret-color: transparent; }\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n  z-index: 0;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n"],sourceRoot:""}]);let l=s},4771(e){e.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},4802(e,t,n){"use strict";n.d(t,{A:()=>i});let i={schemeGroups:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}},4810(e,t,n){var i,o,a=n(452);e.exports={},e.exports.mockWebglRenderer=function(e){"use strict";var t=n(6194);if(void 0===e&&(e=!0),t._mocked)throw Error("webgl renderer already mocked");var s={},l=function(e){s[e]=(s[e]||0)+1},u=function(e){return function(){l(e)}},c=0,d=function(e){return function(){return l(e),c+=1}},f={activeTexture:u("activeTexture"),attachShader:u("attachShader"),bindAttribLocation:u("bindAttribLocation"),bindBuffer:u("bindBuffer"),bindFramebuffer:u("bindFramebuffer"),bindTexture:u("bindTexture"),blendFuncSeparate:u("blendFuncSeparate"),bufferData:u("bufferData"),bufferSubData:u("bufferSubData"),checkFramebufferStatus:function(e){if(l("checkFramebufferStatus"),e===t.GL.FRAMEBUFFER)return t.GL.FRAMEBUFFER_COMPLETE},clear:u("clear"),clearColor:u("clearColor"),clearDepth:u("clearDepth"),compileShader:u("compileShader"),createBuffer:d("createBuffer"),createFramebuffer:u("createFramebuffer"),createProgram:d("createProgram"),createShader:d("createShader"),createTexture:d("createTexture"),deleteBuffer:u("deleteBuffer"),deleteProgram:u("deleteProgram"),deleteShader:u("deleteShader"),deleteTexture:u("deleteTexture"),detachShader:u("detachShader"),depthFunc:u("depthFunc"),disable:u("disable"),disableVertexAttribArray:u("disableVertexAttribArray"),drawArrays:u("drawArrays"),enable:u("enable"),enableVertexAttribArray:u("enableVertexAttribArray"),finish:u("finish"),getError:u("getError"),getExtension:d("getExtension"),getParameter:function(e){switch(l("getParameter"),e){case t.GL.ALIASED_POINT_SIZE_RANGE:return[1,64];case t.GL.DEPTH_BITS:return 16;case t.GL.MAX_TEXTURE_SIZE:return 4096}},getProgramParameter:function(e,n){if(l("getProgramParameter"),n===t.GL.LINK_STATUS)return!0},getShaderInfoLog:function(){return l("getShaderInfoLog"),"log"},getShaderParameter:function(e,n){if(l("getShaderParameter"),n===t.GL.COMPILE_STATUS)return!0},getSupportedExtensions:function(){return l("getSupportedExtensions"),[]},getUniformLocation:d("getUniformLocation"),isEnabled:function(e){if(l("isEnabled"),e===t.GL.BLEND)return!0},linkProgram:u("linkProgram"),pixelStorei:u("pixelStorei"),shaderSource:u("shaderSource"),texImage2D:u("texImage2D"),texParameteri:u("texParameteri"),uniform1iv:u("uniform1iv"),uniform1fv:u("uniform1fv"),uniform2fv:u("uniform2fv"),uniform3fv:u("uniform3fv"),uniform4fv:u("uniform4fv"),uniformMatrix3fv:u("uniformMatrix3fv"),uniformMatrix4fv:u("uniformMatrix4fv"),useProgram:u("useProgram"),vertexAttribPointer:u("vertexAttribPointer"),vertexAttrib3fv:u("vertexAttrib3fv"),viewport:u("viewport")};i=t.renderWindow;var p=function(){t.renderWindow=i;var e,n=new t.renderWindow;return t.renderWindow=p,n._setup=function(){var i,o=n.renderers(),a=n.windowSize(),s=n.windowPosition();for(i=0,e=Object.assign({},t.GL,f);i<o.length;i+=1)(o[i].width()>a[0]||0===o[i].width()||o[i].height()>a[1]||0===o[i].height())&&o[i].resize(s[0],s[1],a[0],a[1]);return!0},n.context=function(){return e},n};t.renderWindow=p,o=a.supported,a.supported=function(){return!!e},a._maxTextureSize=4096,a._maxPointSize=64,t._mocked=!0,t.mockCounts=function(){return s}},e.exports.restoreWebglRenderer=function(){var e=n(6194);e._mocked&&(e.renderWindow=i,a.supported=o,delete e._mocked,delete e.mockCounts)}},4812(e,t,n){var i=n(8899),o=n(6601),a=n(5933),s=n(9971),l=n(4341),u=function(e){var t=n(9341);if(!(this instanceof u))return new u(e);void 0!==(e=e||{}).mapOpacity&&void 0===e.opacity&&((e=Object.assign({},e)).opacity=e.mapOpacity),e=l.deepMerge({},this.constructor.defaults,u.tileSources[this.constructor.defaults.source]||{},u.tileSources[e.source]||{},{name:""},e),o.call(this,e);var i=this;this.mapOpacity=this.opacity,this._getTile=function(e,n){var o=n||e;return t({index:e,size:{x:i._options.tileWidth,y:i._options.tileHeight},queue:i._queue,overlap:i._options.tileOverlap,scale:i._options.tileScale,url:i._options.url.call(i,o.x,o.y,Math.max(o.level||0,Math.min(0,i._options.minLevel||0)),i._options.subdomains),crossDomain:i._options.crossDomain})},this.source=function(e){if(void 0===e){for(var t in u.tileSources)if(u.tileSources[t].url===i.url())return t;return}return u.tileSources[e]&&(i.url(u.tileSources[e].url),i.subdomains(u.tileSources[e].subdomains||"abc"),i.attribution(u.tileSources[e].attribution||""),i._options.maxLevel=u.tileSources[e].maxLevel||18,i._options.minLevel=u.tileSources[e].minLevel||0),i}};u.defaults=Object.assign({},o.defaults,{tileOffset:function(e){var t=256*Math.pow(2,e-1);return{x:t,y:t}},url:"",source:"osm"});var c='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',d='<a href="https://carto.com"> Carto</a> Contributors <a href="https://www.openstreetmap.org/"> OpenStreetMap</a>';u.tileSources={"dark-matter-with-labels":{url:" https://{s}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",attribution:d,name:"Carto Dark Matter With Labels",minLevel:0,maxLevel:18},"dark-matter-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/dark_nolabels/{z}/{x}/{y}.png",attribution:d,name:"Carto Dark Matter Without Labels",minLevel:0,maxLevel:18},"nationalmap-relief":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Shaded Relief",minLevel:0,maxLevel:16},"nationalmap-satellite":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite",minLevel:0,maxLevel:16},"nationalmap-satellite-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite and Topo",minLevel:0,maxLevel:16},"nationalmap-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Topo",minLevel:0,maxLevel:16},osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap",subdomains:"abc",minLevel:0,maxLevel:19},"positron-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png",attribution:d,name:"Carto Positron With Labels",minLevel:0,maxLevel:18},"positron-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_nolabels/{z}/{x}/{y}.png",attribution:d,name:"Carto Positron Without Labels",minLevel:0,maxLevel:18},"stamen-terrain":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",attribution:c,name:"Stamen Terrain",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-terrain-background":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",attribution:c,name:"Stamen Terrain Background",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-toner":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attribution:c,name:"Stamen Toner",subdomains:"abcd",minLevel:0,maxLevel:20},"stamen-toner-lite":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:c,name:"Stamen Toner Lite",subdomains:"abcd",minLevel:0,maxLevel:20},"voyager-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png",attribution:d,name:"Carto Voyager With Labels",minLevel:0,maxLevel:18},"voyager-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}.png",attribution:d,name:"Carto Voyager Without Labels",minLevel:0,maxLevel:18}},i(u,o),a.registerLayer("osm",u,[s.capabilities.image]),e.exports=u},4816(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=n[0],h=n[1],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],x=n[7],w=n[8];return e[0]=p*i+h*s+m*c,e[1]=p*o+h*l+m*d,e[2]=p*a+h*u+m*f,e[3]=g*i+v*s+y*c,e[4]=g*o+v*l+y*d,e[5]=g*a+v*u+y*f,e[6]=b*i+x*s+w*c,e[7]=b*o+x*l+w*d,e[8]=b*a+x*u+w*f,e}},4837(e,t,n){var i=n(8899),o=n(2923),a=n(9186),s=n(5933).checkRenderer,l=n(5933).rendererForFeatures,u=n(5933).rendererForAnnotations,c=function(e){"use strict";if(!(this instanceof c))return new c(e);e=e||{},o.call(this,e);var t,i=n(4692),a=n(6732),d=n(3757),f=n(5933).createRenderer,p=n(5933).adjustLayerForRenderer,h=n(4128),m=this,g=this._exit,v=void 0===e.id?c.newLayerId():e.id,y=void 0===e.name?"":e.name,b=void 0===e.map?null:e.map,x=null,w=void 0===e.canvas?null:e.canvas,A=e.renderer instanceof d?e.renderer:null,C=!1,S=void 0!==e.renderer?e.renderer instanceof d?e.renderer.api():e.renderer:e.annotations?u(e.annotations):l(e.features),_=void 0===e.autoshareRenderer||e.autoshareRenderer,T=a(),O=a(),P=void 0===e.sticky||e.sticky,M=void 0===e.active||e.active,E=void 0===e.opacity?1:e.opacity,D=e.attribution||null,I=void 0===e.visible||e.visible,k=void 0===e.selectionAPI||e.selectionAPI;if(S=s(S),!b)throw Error("Layers must be initialized on a map.");function N(){return(m.parent()||m.map()).children().filter(function(e){return e instanceof c})}if(this.rendererName=function(){return S},this.autoshareRenderer=function(){return _},this.zIndex=function(e,n){return void 0===e?t:(n||N().reverse().forEach(function(t){t!==m&&t.zIndex()===e&&t.zIndex(e+1)}),e!==t&&(t=e,x.css("z-index",t),m.geoTrigger(h.layerMove,{layer:m})),m)},this.moveUp=function(e){var t,n,i,o,a=null;for(void 0===e&&(e=1),o=1,e<0&&(o=-1,e=-e),t=N().sort(function(e,t){return o*(e.zIndex()-t.zIndex())}),n=0;n<t.length;n+=1)if(null===a)t[n]===m&&(a=n);else if(n-a<=e)i=m.zIndex(),m.zIndex(t[n].zIndex(),!0),t[n].zIndex(i,!0);else break;return m},this.moveDown=function(e){return void 0===e&&(e=1),m.moveUp(-e)},this.moveToTop=function(){return m.moveUp(N().length-1)},this.moveToBottom=function(){return m.moveDown(N().length-1)},this.sticky=function(){return P},this.active=function(e){return void 0===e?M:(M!==e&&(M=e,x.toggleClass("active",M)),m)},this.node=function(){return x},this.id=function(e){return void 0===e?v:(v=null===e?c.newLayerId():e,m.modified(),m)},this.name=function(e){return void 0===e?y:(y=e,x.attr("id",y),m.modified(),m)},this.map=function(){return b},this.renderer=function(){return A},this._renderer=function(e){return void 0===e?A:(A=e,m)},this.canvas=function(){return w},this._canvas=function(e){return void 0===e?w:(w=e,m)},this.dataTime=function(){return T},this.updateTime=function(){return O},this.initialized=function(e){return void 0!==e?(C=e,m):C},this.toLocal=function(e){return e},this.fromLocal=function(e){return e},this.attribution=function(e){return void 0!==e?(D=e,m.map().updateAttribution(),m):D},this.visible=function(e){return void 0===e?I:(I!==e&&(I=e,x.toggleClass("hidden",!I),m.modified()),m)},this.selectionAPI=function(e){return void 0===e?k:(k!==e&&(k=e),m)},this._init=function(t){if(C)return m;b.node().append(x);var n=Object.assign({},e);return delete n.map,A?m._canvas(A.canvas()):null===S?(m._renderer(null),m._canvas(x)):w?m._renderer(f(S,m,w,n)):(m._renderer(f(S,m,void 0,n)),m._canvas(A.canvas())),x.toggleClass("active",m.active()),C=!0,t||(m.geoOn(h.resize,function(e){m._update({event:e})}),m.geoOn(h.pan,function(e){m._update({event:e})}),m.geoOn(h.rotate,function(e){m._update({event:e})}),m.geoOn(h.zoom,function(e){m._update({event:e})})),m},this._exit=function(){m.geoOff(),A&&A._exit(),x.off(),x.remove(),e={},m._canvas(null),m._renderer(null),g()},this._update=function(e){return m},this.width=function(){return m.map().size().width},this.height=function(){return m.map().size().height},this.opacity=function(e){return void 0!==e?(E=e,x.css("opacity",E),m):E},(x=i(document.createElement("div"))).addClass("geojs-layer"),x.attr("renderer",S),y&&x.attr("id",y),m.opacity(E),m.visible(I),void 0===e.zIndex){var R=-1;N().forEach(function(e){void 0!==e.zIndex()&&(R=Math.max(R,e.zIndex()))}),e.zIndex=R+1}return m.zIndex(e.zIndex),p("all",m),m};c.newLayerId=function(){"use strict";var e=1;return function(){var t=e;return e+=1,t}}(),c.create=function(e,t){"use strict";if((t=t||{}).type=t.type||"feature",t.renderer=void 0===t.renderer?"webgl":t.renderer,t.renderer=s(t.renderer),!t.renderer)return console.warn("Invalid renderer"),null;var n=e.createLayer(t.type,t);return n?(t.features&&t.features.forEach(function(e){e.data=e.data||t.data,e.feature=a.create(n,e)}),n):(console.warn("Unable to create a layer"),null)},i(c,o),e.exports=c},4897(e,t,n){var i=n(8899),o=n(6732),a=0,s=function(){"use strict";if(!(this instanceof s))return new s;var e=n(4341),t=this,i=++a,l={},u=[],c=0;return this.onIdle=function(e){return c?u.push(e):e(),t},Object.defineProperty(this,"idle",{get:function(){return!c},configurable:!0}),Object.defineProperty(this,"_promises",{get:function(){return c},configurable:!0}),this.addPromise=function(e){function n(){e._geojsTracked&&e._geojsTracked[i]&&(c-=1,delete e._geojsTracked[i]),c||u.splice(0,u.length).forEach(function(e){e()})}return e._geojsTracked||(e._geojsTracked={}),e._geojsTracked[i]||(e._geojsTracked[i]=!0,c+=1),e.always?e.always(n):e.then(n,n),t},this.removePromise=function(e){return e._geojsTracked&&e._geojsTracked[i]&&(c-=1,delete e._geojsTracked[i],c||u.splice(0,u.length).forEach(function(e){e()})),t},this.geoOn=function(n,i){return Array.isArray(n)?n.forEach(function(e){t.geoOn(e,i)}):e.isFunction(i)?(l.hasOwnProperty(n)||(l[n]=[]),l[n].push(i)):console.warn("Handler for "+n+" is not a function",i,t),t},this.geoOnce=function(e,n){var i=function(o){t.geoOff(e,i),n.call(t,o)};return t.geoOn(e,i),i},this.geoIsOn=function(e,n){return Array.isArray(e)?e.some(function(e){return t.geoIsOn(e,n)}):(l[e]||[]).some(function(e){return e===n||void 0===n})},this.geoTrigger=function(e,n){return Array.isArray(e)?e.forEach(function(e){t.geoTrigger(e,n)}):((n=n||{}).event=e,l.hasOwnProperty(e)&&l[e].forEach(function(i){try{i.call(t,n)}catch(t){console.warn("Event handler for "+e+" threw an error",t)}})),t},this.geoOff=function(e,n){if(void 0===e&&(l={},u=[],c=0,i=++a),Array.isArray(e))return e.forEach(function(e){t.geoOff(e,n)}),t;if(n){if(Array.isArray(n))return n.forEach(function(n){t.geoOff(e,n)}),t}else l[e]=[];return l.hasOwnProperty(e)&&(l[e]=l[e].filter(function(e){return e!==n})),t},this._eventHandlers=function(){return l},this._exit=function(){t.geoOff()},o.call(this),this.modified(),this};i(s,o),e.exports=s},4912(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="},4932(e,t,n){var i=n(4692),o=n(8899),a=n(5933).registerFeature,s=n(9558),l=n(452),u=function(e){"use strict";if(!(this instanceof u))return new u(e);e=e||{},s.call(this,e);var t=n(6194),o=n(5204),a=n(4341),c=n(4727),d=n(7740),f=n(6278),p=n(6021),h=n(6791),m=n(4296);c.call(this);var g,v,y=this,b=this._exit,x=null,w=null,A=null,C=null,S=void 0!==e.dynamicDraw&&e.dynamicDraw,_=this._init,T=this._update,O=this.updateStyleFromArray;return d(y,e),this.actors=function(){return x?[x]:[]},this.updateStyleFromArray=function(e,t,n){var o,a,s={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};if("string"==typeof e){var l={};l[e]=t,e=l}return i.each(e,function(e,t){if(y.visible()&&x&&s[e]&&!o&&!y.clustering()){var n,i,l,u,c,d,f,p,h;if(h="bool"===s[e]?1:s[e],u=y.data().length,l=(i=x.mapper()).getSourceBuffer(e),n=y.verticesPerFeature(),l&&u&&u*n*h===l.length){switch(s[e]){case 1:for(d=0,p=0;d<u;d+=1)for(f=0,c=t[d];f<n;f+=1,p+=1)l[p]=c;break;case 3:for(d=0,p=0;d<u;d+=1)for(f=0,c=t[d];f<n;f+=1,p+=3)l[p]=c.r,l[p+1]=c.g,l[p+2]=c.b;break;case"bool":for(d=0,p=0;d<u;d+=1)for(f=0,c=+!!t[d];f<n;f+=1,p+=1)l[p]=c}i.updateSourceBuffer(e),a=!0}else o=!0}else o=!0;var m=y.modified;o||(y.modified=function(){}),O(e,t,!1),y.modified=m}),n&&(y.visible()&&o?y.draw():a&&y.renderer()._render()),y},this._init=function(n){var i,o,a,l=t.shaderProgram(),u=((i=new t.shader(t.GL.VERTEX_SHADER)).setShaderSource(y._primitiveShape===s.primitiveShapes.sprite?m:h),i),c=((o=new t.shader(t.GL.FRAGMENT_SHADER)).setShaderSource(y._primitiveShape===s.primitiveShapes.sprite?p:f),o),d=t.vertexAttribute("pos"),b=t.vertexAttribute("unit"),T=t.vertexAttribute("radius"),O=t.vertexAttribute("strokeWidth"),P=t.vertexAttribute("fillColor"),M=t.vertexAttribute("fill"),E=t.vertexAttribute("strokeColor"),D=t.vertexAttribute("stroke"),I=t.vertexAttribute("fillOpacity"),k=t.vertexAttribute("strokeOpacity"),N=new t.projectionUniform("projectionMatrix"),R=t.material(),B=t.blend(),L=t.geometryData(),F=t.sourceDataP3fv({name:"pos"}),V=t.sourceDataAnyfv(2,t.vertexAttributeKeysIndexed.One,{name:"unit"}),j=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Two,{name:"radius"}),G=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),U=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),z=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Five,{name:"fill"}),W=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),H=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),q=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),K=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"});g=new t.modelViewOriginUniform("modelViewMatrix",v),(a=y._primitiveShape===s.primitiveShapes.sprite?new t.points:new t.triangles).setIndices(new Uint16Array),A=new t.floatUniform("pixelWidth",2/y.renderer().width()),C=new t.floatUniform("aspect",y.renderer().width()/y.renderer().height()),n||_.call(y,e),w=t.mapper({dynamicDraw:S}),l.addVertexAttribute(d,t.vertexAttributeKeys.Position),y._primitiveShape!==s.primitiveShapes.sprite&&l.addVertexAttribute(b,t.vertexAttributeKeysIndexed.One),l.addVertexAttribute(T,t.vertexAttributeKeysIndexed.Two),l.addVertexAttribute(O,t.vertexAttributeKeysIndexed.Three),l.addVertexAttribute(P,t.vertexAttributeKeysIndexed.Four),l.addVertexAttribute(M,t.vertexAttributeKeysIndexed.Five),l.addVertexAttribute(E,t.vertexAttributeKeysIndexed.Six),l.addVertexAttribute(D,t.vertexAttributeKeysIndexed.Seven),l.addVertexAttribute(I,t.vertexAttributeKeysIndexed.Eight),l.addVertexAttribute(k,t.vertexAttributeKeysIndexed.Nine),l.addUniform(A),l.addUniform(C),l.addUniform(g),l.addUniform(N),l.addShader(c),l.addShader(u),R.addAttribute(l),R.addAttribute(B),(x=t.actor()).setMaterial(R),x.setMapper(w),L.addSource(F),L.addSource(V),L.addSource(j),L.addSource(G),L.addSource(U),L.addSource(z),L.addSource(W),L.addSource(H),L.addSource(q),L.addSource(K),L.addPrimitive(a),L.computeBounds=function(){L.setBounds(0,0,0,0,0,0)},w.setGeometryData(L)},this._build=function(){return!function e(t){var n,i,u,c,d,f,p,h,m,b,A,C,S,_,T,O,P,M,E,D,I,k,N,R,B,L,F,V,j,G,U,z,W,H,q,K,X=y.data().length,Y=y._pointPolygon(0,0,1,1),Z=Array(3*X),J=y.verticesPerFeature(),Q=y.data(),$=0,ee=w.geometryData();if(d=y.position(),b=y.style.get("radius"),S=y.style.get("stroke"),O=y.style.get("strokeWidth"),E=y.style.get("strokeOpacity"),k=y.style.get("strokeColor"),B=y.style.get("fill"),V=y.style.get("fillOpacity"),U=y.style.get("fillColor"),!t){for(n=K=0;n<X;n+=1,K+=3)c=d(Q[n],n),Z[K]=c.x,Z[K+1]=c.y,Z[K+2]=0;if(Z=o.transformCoordinates(y.gcs(),y.layer().map().gcs(),Z,3),(v=new Float32Array(y.style.get("origin")(Z)))[0]||v[1]||v[2])for(n=K=0;n<X;n+=1,K+=3)Z[K]-=v[0],Z[K+1]-=v[1],Z[K+2]-=v[2];g.setOrigin(v),u=a.getGeomBuffer(ee,"pos",J*X*3),f=a.getGeomBuffer(ee,"unit",J*X*2),(p=ee.primitive(0).indices())instanceof Uint16Array&&p.length===J*X||(p=new Uint16Array(J*X),ee.primitive(0).setIndices(p))}for(h=a.getGeomBuffer(ee,"radius",J*X),A=a.getGeomBuffer(ee,"stroke",J*X),_=a.getGeomBuffer(ee,"strokeWidth",J*X),P=a.getGeomBuffer(ee,"strokeOpacity",J*X),D=a.getGeomBuffer(ee,"strokeColor",J*X*3),N=a.getGeomBuffer(ee,"fill",J*X),L=a.getGeomBuffer(ee,"fillOpacity",J*X),j=a.getGeomBuffer(ee,"fillColor",J*X*3),n=W=H=q=K=0;n<X;n+=1,K+=3){if(z=Q[n],!t&&y._primitiveShape!==s.primitiveShapes.sprite)for(i=0;i<Y.length;i+=1,q+=1)f[q]=Y[i];for(m=b(z,n),C=+!!S(z,n),T=O(z,n),M=E(z,n),I=k(z,n),R=+!!B(z,n),F=V(z,n),G=U(z,n),y._primitiveShapeAuto&&(R&&F||C&&M)&&m+(C&&M?T:0)>$&&($=m+(C&&M?T:0)),i=0;i<J;i+=1,W+=1,H+=3)t||(u[H]=Z[K],u[H+1]=Z[K+1],u[H+2]=Z[K+2]),h[W]=m,A[W]=C,_[W]=T,P[W]=M,D[H]=I.r,D[H+1]=I.g,D[H+2]=I.b,N[W]=R,L[W]=F,j[H]=G.r,j[H+1]=G.g,j[H+2]=G.b}if(y._primitiveShapeAuto&&(y._primitiveShape===s.primitiveShapes.sprite&&$>l._maxPointSize||y._primitiveShape!==s.primitiveShapes.sprite&&$<=l._maxPointSize)){y._primitiveShape=$>l._maxPointSize?s.primitiveShapes.triangle:s.primitiveShapes.sprite,y.renderer().contextRenderer().removeActor(x),x=null,y._init(!0),e();return}t?(w.updateSourceBuffer("radius"),w.updateSourceBuffer("stroke"),w.updateSourceBuffer("strokeWidth"),w.updateSourceBuffer("strokeColor"),w.updateSourceBuffer("strokeOpacity"),w.updateSourceBuffer("fill"),w.updateSourceBuffer("fillColor"),w.updateSourceBuffer("fillOpacity")):(ee.boundsDirty(!0),w.modified(),w.boundsDirtyTimestamp().modified())}(y.dataTime().timestamp()<y.buildTime().timestamp()),y.renderer().contextRenderer().hasActor(x)||y.renderer().contextRenderer().addActor(x),y.buildTime().modified(),y},this._update=function(){return T.call(y),(y.dataTime().timestamp()>=y.buildTime().timestamp()||y.updateTime().timestamp()<y.timestamp())&&y._build(),A.set(2/y.renderer().width()),C.set(y.renderer().width()/y.renderer().height()),x.setVisible(y.visible()),x.material().setBinNumber(y.bin()),y.updateTime().modified(),y},this._exit=function(){y.renderer().contextRenderer().removeActor(x),x=null,b()},y._init(),this};o(u,s);var c={};c[s.capabilities.stroke]=!0,a("webgl","point",u,c),e.exports=u},4949(e){e.exports=function(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[0],s=t[1],l=t[2],u=t[3],c=t[8],d=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-c*i,e[1]=s*o-d*i,e[2]=l*o-f*i,e[3]=u*o-p*i,e[8]=a*i+c*o,e[9]=s*i+d*o,e[10]=l*i+f*o,e[11]=u*i+p*o,e}},4964(e){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},4991(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(6900),s=function(e){"use strict";var t=this;return this instanceof s?(a.call(this,e),this.select=function(){var e=t.renderer(),n={},i=t.nodeFeature(),o=t.linkFeatures();return n.nodes=e.select(i._svgid()),n.links=o.map(function(t){return e.select(t._svgid())}),n},this):new s(e)};i(s,a),o("svg","graph",s),e.exports=s},5053(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},5055(e,t,n){var i=n(5933).registerLayerAdjustment,o=n(6601),a=function(){"use strict";var e,t=n(4128),i=this,a=this._init,s=this._exit,l=this._update,u=this.visible,c=this.zIndex,d=0,f=[];this._drawTile=function(t){if(e){var n,a,s=i._tileBounds(t),l=t.index.level||0,u=i._tileOffset(l),c=i.tileCropFromBounds(t),p={},h=i.renderer().contextRenderer().m_depthBits;c&&(p.crop={x:c.x/i._options.tileWidth,y:c.y/i._options.tileHeight}),p.ul=i.fromLocal(i.fromLevel({x:s.left-u.x,y:s.top-u.y},l),0),p.ll=i.fromLocal(i.fromLevel({x:s.left-u.x,y:s.bottom-u.y},l),0),p.ur=i.fromLocal(i.fromLevel({x:s.right-u.x,y:s.top-u.y},l),0),p.lr=i.fromLocal(i.fromLevel({x:s.right-u.x,y:s.bottom-u.y},l),0),p.ul.z=p.ll.z=p.ur.z=p.lr.z=0,n=i._options.keepLower?i._options.maxLevel-l+1:1,(a=(a=i.map().listSceneObjects().filter(function(e){return e instanceof o})).slice(a.indexOf(i)+1)).forEach(function(e){n+=e._options.keepLower?e._options.maxLevel-e._options.minLevel+1:1}),p.zOffset=n*Math.pow(2,-h)*o._zOffsetMultiple,p.id=d+=1,t.quadId=p.id,p.image=t.image,f.push(p),e.data(f),e._update(),i.draw()}},this._remove=function(t){if(void 0!==t.quadId&&e){for(var n=0;n<f.length;n+=1)if(f[n].id===t.quadId){f.splice(n,1);break}e.data(f),e._update(),i.draw()}},this.visible=function(t){return void 0===t?u():(i.visible()!==t&&(u(t),e&&e.visible(e.visible(void 0,!0),!0)),i)},this.zIndex=function(e,t){return void 0!==e&&i._clearQuads(),c.apply(i,arguments)},this._clearQuads=function(n){!(n&&(!n.layer||!(n.layer instanceof o)||!n.layer.autoshareRenderer()||(n.event===t.layerAdd||n.event===t.layerRemove)&&i.map().layers().every(function(e){return e===n.layer||n.layer.zIndex()>e.zIndex()})))&&(i.clear(),e&&e.modified(),n&&i.draw())},this._update=function(t){return l.call(i,t),e&&e.nearestPixel&&e.nearestPixel(i.nearestPixel()),i._addBaseQuadToTiles(e,f),i},this._cleanup=function(){var e;if(i.cache&&i.cache._cache){for(var t in i.cache._cache)(e=i.cache._cache[t])._image&&e._image._texture&&delete e._image._texture;i.cache.clear()}i.clear()},this._exit=function(){var n=i.map();n.geoOff(t.layerAdd,i._clearQuads),n.geoOff(t.layerRemove,i._clearQuads),i._cleanup(),i.deleteFeature(e),e=null,f=[],s.apply(i,arguments)},this._init=function(){a.apply(i,arguments),(e=i.createFeature("quad",{previewColor:i._options.previewColor,previewImage:i._options.previewImage})).geoTrigger=void 0,e.gcs(i._options.gcs||i.map().gcs()),e.data(f),e._update();var n=i.map();n.geoOn(t.layerAdd,i._clearQuads),n.geoOn(t.layerRemove,i._clearQuads),i.geoOn(t.unhidden,function(){i.map().scheduleAnimationFrame(function(){i._clearQuads(),i.map().draw()})})},this._getSubLayer=function(){},this._updateSubLayers=void 0};o._zOffsetMultiple=2,i("webgl","tile",a),e.exports=a},5056(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5067(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2],o=e[3];return Math.sqrt(t*t+n*n+i*i+o*o)}},5072(e){"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],u=i.base?l[0]+i.base:l[0],c=o[u]||0,d="".concat(u," ").concat(c);o[u]=c+1;var f=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=function(e,t){var n=t.domAPI(t);return n.update(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap||t.supports!==e.supports||t.layer!==e.layer)&&n.update(e=t):n.remove()}}(p,i);i.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}e.exports=function(e,o){var a=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var l=n(a[s]);t[l].references--}for(var u=i(e,o),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=u}}},5103(e,t,n){var i=n(4099),o=n(6732);i.object=function(){"use strict";if(!(this instanceof i.object))return new i.object;var e=o();return e.modified(),this.modified=function(){e.modified()},this.getMTime=function(){return e.getMTime()},this}},5118(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9971),s=function(e){"use strict";if(!(this instanceof s))return new s(e);var t=n(4692),i=n(2184).d3,o=n(9966);a.call(this,e),o.call(this);var l,u=this,c=this._exit,d=this._init,f=this._update;return this._build=function(){if(this.position()){var e=u.renderer(),n=e.layer().map();l=u._generateQuads();var o=[];t.each(l.clrQuads,function(e,t){o.push({type:"clr",quad:t,zIndex:t.pos[2]})}),t.each(l.imgQuads,function(e,t){t.image&&o.push({type:"img",quad:t,zIndex:t.pos[2]})});var a={id:u._svgid(),data:o,dataIndex:function(e){return e.quad.quadId},append:function(e){var t=this.namespaceURI,n="clr"===e.type?"polygon":"image";return t?document.createElementNS(t,n):document.createElement(n)},attributes:{fill:function(e){if("clr"===e.type)return i.rgb(255*e.quad.color.r,255*e.quad.color.g,255*e.quad.color.b);1!==e.quad.opacity&&i.select(this).style("opacity",e.quad.opacity)},height:function(e){return"clr"===e.type?void 0:1},points:function(t){if("clr"===t.type&&!t.points){var i,o=[];for(i=0;i<t.quad.pos.length;i+=3){var a={x:t.quad.pos[i],y:t.quad.pos[i+1],z:t.quad.pos[i+2]};a=n.gcsToDisplay(a,null),a=e.baseToLocal(a),o.push(""+a.x+","+a.y)}t.points=o[0]+" "+o[1]+" "+o[3]+" "+o[2]}return"clr"===t.type?t.points:void 0},preserveAspectRatio:function(e){return"clr"===e.type?void 0:"none"},reference:function(e){return e.quad.reference},stroke:!1,transform:function(t){if("img"===t.type&&t.quad.image&&!t.svgTransform){var i,o,a,s,l=[],u=-1,c=t.quad.image.width,d=t.quad.image.height;for(a=0;a<t.quad.pos.length;a+=3){var f={x:t.quad.pos[a],y:t.quad.pos[a+1],z:t.quad.pos[a+2]};f=n.gcsToDisplay(f,null),f=e.baseToLocal(f),l.push(f)}for(a=0;a<4;a+=1)(i=Math.abs(l[(a+1)%4].x*(l[(a+2)%4].y-l[(a+3)%4].y)+l[(a+2)%4].x*(l[(a+3)%4].y-l[(a+1)%4].y)+l[(a+3)%4].x*(l[(a+1)%4].y-l[(a+2)%4].y))/2)>u&&(u=i,o=a);t.svgTransform=[3===o||2===o?l[1].x-l[0].x:l[3].x-l[2].x,3===o||2===o?l[1].y-l[0].y:l[3].y-l[2].y,0===o||2===o?l[1].x-l[3].x:l[0].x-l[2].x,0===o||2===o?l[1].y-l[3].y:l[0].y-l[2].y,2===o?l[3].x+l[0].x-l[1].x:l[2].x,2===o?l[3].y+l[0].y-l[1].y:l[2].y],1e-6>Math.abs(t.svgTransform[1]/c)&&1e-6>Math.abs(t.svgTransform[2]/d)&&(s=t.svgTransform[0]/c,t.svgTransform[4]=Math.round(t.svgTransform[4]/s)*s,s=t.svgTransform[3]/d,t.svgTransform[5]=Math.round(t.svgTransform[5]/s)*s)}return"img"===t.type&&t.quad.image?"matrix("+t.svgTransform.join(" ")+")":void 0},width:function(e){return"clr"===e.type?void 0:1},x:function(e){return"clr"===e.type?void 0:0},"xlink:href":function(e){return"clr"!==e.type&&e.quad.image?e.quad.image.src:void 0},y:function(e){return"clr"===e.type?void 0:0}},style:{fillOpacity:function(e){return"clr"===e.type?e.quad.opacity:void 0}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:!0,visible:u.visible,classes:["svgQuadFeature"]};e._drawFeatures(a),u.buildTime().modified()}},this._update=function(){return f.call(u),(u.buildTime().timestamp()<=u.dataTime().timestamp()||u.buildTime().timestamp()<u.timestamp())&&u._build(),u},this._init=function(){d.call(u,e)},this._exit=function(){c.call(u)},u._init(e),this};i(s,a);var l={};l[a.capabilities.color]=!0,l[a.capabilities.image]=!0,l[a.capabilities.imageCrop]=!1,l[a.capabilities.imageFixedScale]=!1,l[a.capabilities.imageFull]=!1,l[a.capabilities.canvas]=!1,l[a.capabilities.video]=!1,o("svg","quad",s,l),e.exports=s},5139(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"},5178(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},5183(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9558),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e);var t=n(5204),i=n(8084),o=n(3324).vtkjs,l=o.Rendering.Core.vtkActor,u=o.Common.Core.vtkDataArray,c=o.Rendering.Core.vtkGlyph3DMapper,d=o.Rendering.Core.vtkMapper,f=o.Common.DataModel.vtkPointSet,p=o.Filters.Sources.vtkSphereSource;i.call(this);var h,m,g,v,y,b=this,x=this._init,w=this._exit,A=this._update;return this._createPipeline=function(){m=f.newInstance(),(g=p.newInstance()).setThetaResolution(30),g.setPhiResolution(30);var e=c.newInstance({orient:!1,colorByArrayName:"color",scalarMode:d.ScalarMode.USE_POINT_FIELD_DATA,colorMode:d.ColorMode.DIRECT_SCALARS,scaling:!0,scaleArray:"diam",scaleMode:c.ScaleModes.SCALE_BY_MAGNITUDE});e.setInputData(m,0),e.setInputConnection(g.getOutputPort(),1),(h=l.newInstance()).setMapper(e),h.getProperty().setAmbient(1),b.renderer().contextRenderer().addActor(h)},this._init=function(){x.call(b,e),b.renderer().contextRenderer().setLayer(0),b._createPipeline()},this._build=function(){var e,n,i,o,a,s,l=b.data().length,c=Array(3*l),d=b.data(),f=b.position(),p=b.style.get("radius"),h=b.style.get("fill"),g=b.style.get("fillColor"),x=b.style.get("fillOpacity"),w=b.layer().map().unitsPerPixel(b.layer().map().zoom());for(y&&y.length===l||(y=new Float32Array(l)),v&&v.length===4*l||(v=new Uint8Array(4*l)),e=n=i=0;e<l;e+=1,n+=3,i+=4)o=f(d[e],e),c[n]=o.x,c[n+1]=o.y,c[n+2]=o.z||0,s=s||c[n+2],y[e]=p(d[e],e)*w*2,a=g(d[e],e),v[i]=255*a.r,v[i+1]=255*a.g,v[i+2]=255*a.b,v[i+3]=h(d[e],e)?255*x(d[e],e):0;if(c=t.transformCoordinates(b.gcs(),b.layer().map().gcs(),c,3),!s&&b.gcs()!==b.layer().map().gcs())for(e=n=0;e<l;e+=1,n+=3)c[n+2]=0;m.getPoints().setData(c,3),m.getPointData().addArray(u.newInstance({name:"color",values:v,numberOfComponents:4})),m.getPointData().addArray(u.newInstance({name:"diam",values:y})),b.buildTime().modified()},this._update=function(){if(A.call(b),b.dataTime().getMTime()>=b.buildTime().getMTime()||b.updateTime().getMTime()<b.getMTime())b._build();else{var e=b.data(),t=b.style.get("radius"),n=b.layer().map().unitsPerPixel(b.layer().map().zoom()),i=m.getPointData().getArray("diam"),o=i.getData().map(function(i,o){return t(e[o],o)*n*2});i.setData(o),m.modified()}b.updateTime().modified()},this._exit=function(){b.renderer().contextRenderer().removeActor(h),w()},b._init(),this};i(s,a);var l={};l[a.capabilities.stroke]=!1,o("vtkjs","point",s,l),e.exports=s},5204(e,t,n){var i=n(1413),o=n(4226),a=n(8315),s=n(4341);i=i.__esModule?i.default:i;var l=n(7429);l.keys().forEach(function(e){i.Proj.projections.add(l(e))});var u={},c=/^(.* |)\+axis=e(n|s)u(| .*)$/,d=/(^|\s)\+(s[1-3][1-3]|[xyz]off)=\S/,f=function(e){"use strict";if(!(this instanceof f))return(e=e||{}).source in u||(Object.keys(u).length>=10&&(u={}),u[e.source]={}),e.target in u[e.source]||(Object.keys(u[e.source]).length>=10&&(u[e.source]={}),u[e.source][e.target]=new f(e)),u[e.source][e.target];var t,n,l,c,p,h,m,g=this,v={s11:0,s12:4,s13:8,xoff:12,s21:1,s22:5,s23:9,yoff:13,s31:2,s32:6,s33:10,zoff:14};function y(e){if(!d.exec(e))return{proj:e};var t,n,i=s.mat4AsArray(),o=[];return e.split(/(\s+)/).forEach(function(e){var t=/^\+(s[1-3][1-3]|[xyz]off)=(.*)$/.exec(e);t?i[v[t[1]]]=parseFloat(t[2]):o.push(e)}),n={proj:o.join(" "),orig:e},(t=a.invert(s.mat4AsArray(),i))?(n.matrix=i,n.inverse=t):console.warn("Affine transform is not invertable and will not be used: "+e),n}function b(){var e=y(g.source()),n=y(g.target()),o=e.proj,a=n.proj;c=e.matrix,p=e.inverse,h=n.matrix,m=n.inverse,t=new i(o,a)}this.source=function(e){return void 0===e?n||"EPSG:4326":(n=e,b(),g)},this.target=function(e){return void 0===e?l||"EPSG:3857":(l=e,b(),g)},this._forward=function(e){if(c){var n=o.transformMat4(s.vec3AsArray(),[e.x,e.y,e.z||0],p);e={x:n[0],y:n[1],z:n[2]}}var i=t.forward(e,!0);if(i.z=e.z||0,h){var a=o.transformMat4(s.vec3AsArray(),[i.x,i.y,i.z],h);i={x:a[0],y:a[1],z:a[2]}}return i},this._inverse=function(e){if(h){var n=o.transformMat4(s.vec3AsArray(),[e.x,e.y,e.z||0],m);e={x:n[0],y:n[1],z:n[2]}}var i=t.inverse(e,!0);if(i.z=e.z||0,c){var a=o.transformMat4(s.vec3AsArray(),[i.x,i.y,i.z],c);i={x:a[0],y:a[1],z:a[2]}}return i},this.forward=function(e){return Array.isArray(e)?e.map(g._forward):g._forward(e)},this.inverse=function(e){return Array.isArray(e)?e.map(g._inverse):g._inverse(e)},e=e||{};try{this.source(e.source)}catch(t){console.error("Can't use transform source: "+e.source),this.source("EPSG:4326")}try{this.target(e.target)}catch(t){console.error("Can't use transform target: "+e.target),this.target("EPSG:3857")}return this};f.defs=i.defs,f.lookup=function(e){var t,o,a=n(4692),s=a.Deferred();return i.defs.hasOwnProperty(e)?s.resolve(i.defs[e]):2!==(o=e.split(":")).length||"EPSG"!==o[0].toUpperCase()?s.reject("Invalid projection code").promise():(t=o[1],a.ajax({url:"https://epsg.io/"+encodeURIComponent(t)+".proj4"}).done(function(t){var n=(t.results||[])[0];return n?(i.defs(e,n),a.when(i.defs[e])):s.reject(t).promise()}))},f.transformCoordinates=function(e,t,n,i){"use strict";if(e===t||Array.isArray(n)&&!n.length)return n;if(Array.isArray(n)&&n.length>=3&&3===i&&!s.isObject(n[0])&&!d.test(e)&&!d.test(t))return f.transformCoordinatesFlatArray3(e,t,n);if(Array.isArray(n)&&n.length&&s.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){var o=e.match(c),a=t.match(c);if(o&&a&&o[1]===a[1]&&o[3]===a[3])return"z"in n[0]?n.map(function(e){return{x:+e.x,y:-e.y,z:+e.z||0}}):n.map(function(e){return{x:+e.x,y:-e.y}})}var l,u=f({source:e,target:t});return s.isObject(n)&&"x"in n&&"y"in n?(l=u.forward({x:+n.x,y:+n.y,z:+n.z||0},!0),"z"in n)?l:{x:l.x,y:l.y}:Array.isArray(n)&&1===n.length&&s.isObject(n[0])&&"x"in n[0]&&"y"in n[0]?(l=u.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0},!0),"z"in n[0])?[l]:[{x:l.x,y:l.y}]:f.transformCoordinatesArray(u,n,i)},f.transformCoordinatesArray=function(e,t,n){var i,o,a,l,u,c,d,f,p,h={};function m(){if(Array.isArray(t[0]))if(2===t[0].length)l=function(e){return+t[e][0]},u=function(e){return+t[e][1]},d=function(e,t,n){f[e]=[t,n]};else if(3===t[0].length)l=function(e){return+t[e][0]},u=function(e){return+t[e][1]},c=function(e){return+t[e][2]},d=function(e,t,n,i){f[e]=[t,n,i]};else throw Error("Invalid coordinates. Requires two or three components per array");else if(2===t.length)a=2,l=function(e){return+t[e*a]},u=function(e){return+t[e*a+1]},d=function(e,t,n){f[e]=t,f[e+1]=n};else if(3===t.length)a=3,l=function(e){return+t[e*a]},u=function(e){return+t[e*a+1]},c=function(e){return+t[e*a+2]},d=function(e,t,n,i){f[e]=t,f[e+1]=n,f[e+2]=i};else if(n)if(2===n||3===n)a=n,l=function(e){return+t[e]},u=function(e){return+t[e+1]},2===n?d=function(e,t,n){f[e]=t,f[e+1]=n}:(c=function(e){return+t[e+2]},d=function(e,t,n,i){f[e]=t,f[e+1]=n,f[e+2]=i});else throw Error("Number of components should be two or three");else throw Error("Invalid coordinates")}if(c=function(){return 0},Array.isArray(t)){if((f=[]).length=t.length,o=t.length,!t.length)return f;Array.isArray(t[0])||s.isObject(t[0])?(a=1,Array.isArray(t[0])?m():s.isObject(t[0])&&function(){if(t[0]&&"x"in t[0]&&"y"in t[0])l=function(e){return+t[e].x},u=function(e){return+t[e].y},"z"in t[0]?(c=function(e){return+t[e].z},d=function(e,t,n,o){f[i]={x:t,y:n,z:o}}):d=function(e,t,n){f[e]={x:t,y:n}};else throw Error("Invalid coordinates")}()):m()}else throw Error("Coordinates are not valid");for(i=0;i<o;i+=a)h.x=l(i),h.y=u(i),h.z=c(i),p=e.forward(h,!0),d(i,p.x,p.y,p.z);return f},f.transformCoordinatesFlatArray3=function(e,t,n){"use strict";var o,a=e.match(c),s=t.match(c);if(a&&s&&a[1]===s[1]&&a[3]===s[3]){for(o=n.length-3+1;o>=0;o-=3)n[o]*=-1;return n}var l,u=i.Proj(e),d=i.Proj(t),f={},p=new i(u,d);for(o=n.length-3;o>=0;o-=3)f.x=+n[o],f.y=+n[o+1],f.z=+(n[o+2]||0),l=p.forward(f,!0),n[o]=l.x,n[o+1]=l.y,n[o+2]=void 0===l.z?f.z:l.z;return n},f.affineForward=function(e,t){"use strict";var n,i=e.origin,o=e.scale||{x:1,y:1,z:1};for(n=0;n<t.length;n+=1)t[n].x=(t[n].x-i.x)*o.x,t[n].y=(t[n].y-i.y)*o.y,t[n].z=((t[n].z||0)-(i.z||0))*o.z;return t},f.affineInverse=function(e,t){"use strict";var n,i=e.origin,o=e.scale||{x:1,y:1,z:1};for(n=0;n<t.length;n+=1)t[n].x=t[n].x/o.x+i.x,t[n].y=t[n].y/o.y+i.y,t[n].z=(t[n].z||0)/o.z+(i.z||0);return t},f.sphericalDistance=function(e,t,n,o,a){if(o=o||"EPSG:4326",a=a||i.WGS84,(n=n||o)!==o){var s=f.transformCoordinates(n,o,[e,t]);e=s[0],t=s[1]}var l=e.y*Math.PI/180,u=t.y*Math.PI/180,c=(t.x-e.x)*Math.PI/180,d=Math.sin(l),p=Math.cos(l),h=Math.sin(u),m=Math.cos(u),g=Math.atan2(Math.pow(Math.pow(m*Math.sin(c),2)+Math.pow(p*h-d*m*Math.cos(c),2),.5),d*h+p*m*Math.cos(c));return a.a*g},f.vincentyDistance=function(e,t,n,o,a,s){if(o=o||"EPSG:4326",a=a||i.WGS84,s=s||100,(n=n||o)!==o){var l=f.transformCoordinates(n,o,[e,t]);e=l[0],t=l[1]}var u,c,d,p,h,m,g,v,y,b,x,w=a.a,A=a.b||a.a*(1-(a.f||1/a.rf)),C=a.f||(a.rf?1/a.rf:1-A/w),S=e.y*Math.PI/180,_=t.y*Math.PI/180,T=((t.x-e.x)%360+360)%360*Math.PI/180,O=Math.atan((1-C)*Math.tan(S)),P=Math.atan((1-C)*Math.tan(_)),M=Math.sin(O),E=Math.cos(O),D=Math.sin(P),I=Math.cos(P),k=T,N=T+2*Math.PI;if(S===_&&!T)return{distance:0,alpha1:0,alpha2:0};for(x=s;x>0&&Math.abs(k-N)>1e-12;x-=1)d=Math.atan2(u=Math.pow(Math.pow(I*Math.sin(k),2)+Math.pow(E*D-M*I*Math.cos(k),2),.5),c=M*D+E*I*Math.cos(k)),m=c-((h=1-Math.pow(p=E*I*Math.sin(k)/u,2))?2*M*D/h:0),g=C/16*h*(4+C*(4-3*h)),N=k,k=T+(1-g)*C*p*(d+g*u*(m+g*c*(-1+2*Math.pow(m,2))));if(x)return y=1+(v=h*(w*w-A*A)/(A*A))/16384*(4096+v*(-768+v*(320-175*v))),{distance:A*y*(d-(b=v/1024*(256+v*(-128+v*(74-47*v))))*u*(m+b/4*(c*(-1+2*Math.pow(m,2))-b/6*m*(-3+4*u*u)*(-3+4*Math.pow(m,2))))),alpha1:Math.atan2(I*Math.sin(k),E*D-M*I*Math.cos(k)),alpha2:Math.atan2(E*Math.sin(k),-M*I+E*D*Math.cos(k))}},f.onlyInvertedY=function(e,t){var n=e.match(c),i=t.match(c);return n&&i&&n[1]===i[1]&&n[3]===i[3]},f.proj4=i,e.exports=f},5232(e,t,n){var i=n(8899),o=n(9186),a=function(e){"use strict";if(!(this instanceof a))return new a(e);e=e||{},o.call(this,e);var t=n(4341).ensureFunction;delete e.layer,delete e.renderer;var i=n(2184).d3,s=this,l=this._init,u=Object.assign({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:i.scaleQuantize(),geoId:function(e){return e.properties.GEO_ID},scalarId:function(e){return e.id},scalarValue:function(e){return e.value}},e);return this.featureType="choropleth",this.scalar=function(e,t){var n,o;return void 0===e?s.choropleth.get("scalar")()||[]:(n=s.choropleth.get("scalarId"),o=s.choropleth.get("scalarValue"),u.scalar=e,u.scalarAggregator=t||i.mean,u.scalar._dictionary=e.reduce(function(e,t){var i,a;return i=n(t),a=o(t),e[i]=e[i]?e[i].push(a):[a],e},{}),s.dataTime().modified(),s)},this.choropleth=function(e,t){return void 0===e?u:"string"==typeof e&&void 0===t?u[e]:(void 0===t?u=Object.assign({},u,e):u[e]=t,s.modified(),s)},this.choropleth.get=function(e){var n,i={};if(void 0===e){for(n in u)u.hasOwnProperty(n)&&(i[n]=s.choropleth.get(n));return i}return t(u[e])},this._featureToPolygons=function(e,t){var n=s.layer().createFeature("polygon",{});return"Polygon"===e.geometry.type?n.data([{type:"Polygon",coordinates:e.geometry.coordinates}]):"MultiPolygon"===e.geometry.type&&n.data(e.geometry.coordinates.map(function(e){return{type:"Polygon",coordinates:e}})),n.polygon(function(e){return{outer:e.coordinates[0],inner:e.coordinates[1]}}).position(function(e){return{x:e[0],y:e[1]}}).style({fillColor:t}),n},this._generateScale=function(e){var t=i.extent(s.scalar(),e||void 0);return s.choropleth().scale.domain(t).range(s.choropleth().colorRange),s},this.createChoropleth=function(){var e=s.choropleth,t=s.data(),n=s.scalar(),i=e.get("scalarValue"),o=e.get("geoId");return s._generateScale(i),t.map(function(t){var i=o(t),a=n._dictionary[i],l=e().scalarAggregator(a),u=s.choropleth().scale(l);return s._featureToPolygons(t,u)})},this._init=function(e){return l.call(s,e),u&&s.dataTime().modified(),s},this._init(e),this};i(a,o),e.exports=a},5237(e){e.exports=function(){"use strict";var e,t,n,i,o,a,s,l,u,c=navigator.userAgent,d=navigator.platform,f=/gecko\/\d/i.test(c),p=/MSIE \d/.test(c),h=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(c),m=/Edge\/(\d+)/.exec(c),g=p||h||m,v=g&&(p?document.documentMode||6:+(m||h)[1]),y=!m&&/WebKit\//.test(c),b=y&&/Qt\/\d+\.\d+/.test(c),x=!m&&/Chrome\/(\d+)/.exec(c),w=x&&+x[1],A=/Opera\//.test(c),C=/Apple Computer/.test(navigator.vendor),S=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(c),_=/PhantomJS/.test(c),T=C&&(/Mobile\/\w+/.test(c)||navigator.maxTouchPoints>2),O=/Android/.test(c),P=T||O||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(c),M=T||/Mac/.test(d),E=/\bCrOS\b/.test(c),D=/win/i.test(d),I=A&&c.match(/Version\/(\d*\.\d*)/);I&&(I=Number(I[1])),I&&I>=15&&(A=!1,y=!0);var k=M&&(b||A&&(null==I||I<12.11)),N=f||g&&v>=9;function R(e){return RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var B=function(e,t){var n=e.className,i=R(t).exec(n);if(i){var o=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(o?i[1]+o:"")}};function L(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function F(e,t){return L(e).appendChild(t)}function V(e,t,n,i){var o=document.createElement(e);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)o.appendChild(t[a]);return o}function j(e,t,n,i){var o=V(e,t,n,i);return o.setAttribute("role","presentation"),o}function G(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function U(e){var t,n=e.ownerDocument||e;try{t=e.activeElement}catch(e){t=n.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function z(e,t){var n=e.className;R(t).test(n)||(e.className+=(n?" ":"")+t)}function W(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!R(n[i]).test(t)&&(t+=" "+n[i]);return t}i=document.createRange?function(e,t,n,i){var o=document.createRange();return o.setEnd(i||e,n),o.setStart(e,t),o}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var H=function(e){e.select()};function q(e){return e.display.wrapper.ownerDocument}function K(e){return X(e.display.wrapper)}function X(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function Y(e){return q(e).defaultView}function Z(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function J(e,t,n){for(var i in t||(t={}),e)e.hasOwnProperty(i)&&(!1!==n||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function Q(e,t,n,i,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,s=o||0;;){var l=e.indexOf("	",a);if(l<0||l>=t)return s+(t-a);s+=l-a,s+=n-s%n,a=l+1}}T?H=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:g&&(H=function(e){try{e.select()}catch(e){}});var $=function(){this.id=null,this.f=null,this.time=0,this.handler=Z(this.onTimeout,this)};function ee(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return -1}$.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-new Date)},$.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var et={toString:function(){return"CodeMirror.Pass"}},en={scroll:!1},er={origin:"*mouse"},ei={origin:"+move"};function eo(e,t,n){for(var i=0,o=0;;){var a=e.indexOf("	",i);-1==a&&(a=e.length);var s=a-i;if(a==e.length||o+s>=t)return i+Math.min(s,t-o);if(o+=a-i,o+=n-o%n,i=a+1,o>=t)return i}}var ea=[""];function es(e){for(;ea.length<=e;)ea.push(el(ea)+" ");return ea[e]}function el(e){return e[e.length-1]}function eu(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function ec(){}function ed(e,t){var n;return Object.create?n=Object.create(e):(ec.prototype=e,n=new ec),t&&J(t,n),n}var ef=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ep(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||ef.test(e))}function eh(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ep(e))||t.test(e):ep(e)}function em(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var eg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ev(e){return e.charCodeAt(0)>=768&&eg.test(e)}function ey(e,t,n){for(;(n<0?t>0:t<e.length)&&ev(e.charAt(t));)t+=n;return t}function eb(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var o=(t+n)/2,a=i<0?Math.ceil(o):Math.floor(o);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}var ex=null;function ew(e,t,n){var i;ex=null;for(var o=0;o<e.length;++o){var a=e[o];if(a.from<t&&a.to>t)return o;a.to==t&&(a.from!=a.to&&"before"==n?i=o:ex=o),a.from==t&&(a.from!=a.to&&"before"!=n?i=o:ex=o)}return null!=i?i:ex}var eA=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,o=/[1n]/;function a(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,l){var u="ltr"==l?"L":"R";if(0==s.length||"ltr"==l&&!e.test(s))return!1;for(var c=s.length,d=[],f=0;f<c;++f)d.push(function(e){if(e<=247)return"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(e);if(1424<=e&&e<=1524)return"R";if(1536<=e&&e<=1785)return"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(e-1536);if(1774<=e&&e<=2220)return"r";if(8192<=e&&e<=8203)return"w";else if(8204==e)return"b";else return"L"}(s.charCodeAt(f)));for(var p=0,h=u;p<c;++p){var m=d[p];"m"==m?d[p]=h:h=m}for(var g=0,v=u;g<c;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":n.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var b=1,x=d[0];b<c-1;++b){var w=d[b];"+"==w&&"1"==x&&"1"==d[b+1]?d[b]="1":","==w&&x==d[b+1]&&("1"==x||"n"==x)&&(d[b]=x),x=w}for(var A=0;A<c;++A){var C=d[A];if(","==C)d[A]="N";else if("%"==C){var S=void 0;for(S=A+1;S<c&&"%"==d[S];++S);for(var _=A&&"!"==d[A-1]||S<c&&"1"==d[S]?"1":"N",T=A;T<S;++T)d[T]=_;A=S-1}}for(var O=0,P=u;O<c;++O){var M=d[O];"L"==P&&"1"==M?d[O]="L":n.test(M)&&(P=M)}for(var E=0;E<c;++E)if(t.test(d[E])){var D=void 0;for(D=E+1;D<c&&t.test(d[D]);++D);for(var I=(E?d[E-1]:u)=="L",k=I==((D<c?d[D]:u)=="L")?I?"L":"R":u,N=E;N<D;++N)d[N]=k;E=D-1}for(var R,B=[],L=0;L<c;)if(i.test(d[L])){var F=L;for(++L;L<c&&i.test(d[L]);++L);B.push(new a(0,F,L))}else{var V=L,j=B.length,G=+("rtl"==l);for(++L;L<c&&"L"!=d[L];++L);for(var U=V;U<L;)if(o.test(d[U])){V<U&&(B.splice(j,0,new a(1,V,U)),j+=G);var z=U;for(++U;U<L&&o.test(d[U]);++U);B.splice(j,0,new a(2,z,U)),j+=G,V=U}else++U;V<L&&B.splice(j,0,new a(1,V,L))}return"ltr"==l&&(1==B[0].level&&(R=s.match(/^\s+/))&&(B[0].from=R[0].length,B.unshift(new a(0,0,R[0].length))),1==el(B).level&&(R=s.match(/\s+$/))&&(el(B).to-=R[0].length,B.push(new a(0,c-R[0].length,c)))),"rtl"==l?B.reverse():B}}();function eC(e,t){var n=e.order;return null==n&&(n=e.order=eA(e.text,t)),n}var eS=[],e_=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||eS).concat(n)}};function eT(e,t){return e._handlers&&e._handlers[t]||eS}function eO(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,o=i&&i[t];if(o){var a=ee(o,n);a>-1&&(i[t]=o.slice(0,a).concat(o.slice(a+1)))}}}function eP(e,t){var n=eT(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function eM(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),eP(e,n||t.type,e,t),eR(t)||t.codemirrorIgnore}function eE(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==ee(n,t[i])&&n.push(t[i])}function eD(e,t){return eT(e,t).length>0}function eI(e){e.prototype.on=function(e,t){e_(this,e,t)},e.prototype.off=function(e,t){eO(this,e,t)}}function ek(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function eN(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function eR(e){return null!=e.defaultPrevented?e.defaultPrevented:!1==e.returnValue}function eB(e){ek(e),eN(e)}function eL(e){return e.target||e.srcElement}function eF(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),M&&e.ctrlKey&&1==t&&(t=3),t}var eV=function(){if(g&&v<9)return!1;var e=V("div");return"draggable"in e||"dragDrop"in e}(),ej=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var a=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),s=a.indexOf("\r");-1!=s?(n.push(a.slice(0,s)),t+=s+1):(n.push(a),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},eG=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!!t&&t.parentElement()==e&&0!=t.compareEndPoints("StartToEnd",t)},eU="oncopy"in(e=V("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),ez=null,eW={},eH={};function eq(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),eW[e]=t}function eK(e){if("string"==typeof e&&eH.hasOwnProperty(e))e=eH[e];else if(e&&"string"==typeof e.name&&eH.hasOwnProperty(e.name)){var t=eH[e.name];"string"==typeof t&&(t={name:t}),(e=ed(t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return eK("application/xml");else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return eK("application/json");return"string"==typeof e?{name:e}:e||{name:"null"}}function eX(e,t){var n=eW[(t=eK(t)).name];if(!n)return eX(e,"text/plain");var i=n(e,t);if(eY.hasOwnProperty(t.name)){var o=eY[t.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var eY={};function eZ(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function eJ(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function eQ(e,t,n){return!e.startState||e.startState(t,n)}var e$=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function e0(e,t){if((t-=e.first)<0||t>=e.size)throw Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var o=n.children[i],a=o.chunkSize();if(t<a){n=o;break}t-=a}return n.lines[t]}function e1(e,t,n){var i=[],o=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;o==n.line&&(a=a.slice(0,n.ch)),o==t.line&&(a=a.slice(t.ch)),i.push(a),++o}),i}function e2(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function e3(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function e4(e){if(null==e.parent)return null;for(var t=e.parent,n=ee(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var o=0;i.children[o]!=t;++o)n+=i.children[o].chunkSize();return n+t.first}function e5(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var o=e.children[i],a=o.height;if(t<a){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var l=e.lines[s].height;if(t<l)break;t-=l}return n+s}function e6(e,t){return t>=e.first&&t<e.first+e.size}function e8(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function e9(e,t,n){if(void 0===n&&(n=null),!(this instanceof e9))return new e9(e,t,n);this.line=e,this.ch=t,this.sticky=n}function e7(e,t){return e.line-t.line||e.ch-t.ch}function te(e,t){return e.sticky==t.sticky&&0==e7(e,t)}function tt(e){return e9(e.line,e.ch)}function tn(e,t){return 0>e7(e,t)?t:e}function tr(e,t){return 0>e7(e,t)?e:t}function ti(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function to(e,t){if(t.line<e.first)return e9(e.first,0);var n,i,o,a=e.first+e.size-1;return t.line>a?e9(a,e0(e,a).text.length):(n=t,i=e0(e,t.line).text.length,null==(o=n.ch)||o>i?e9(n.line,i):o<0?e9(n.line,0):n)}function ta(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=to(e,t[i]);return n}e$.prototype.eol=function(){return this.pos>=this.string.length},e$.prototype.sol=function(){return this.pos==this.lineStart},e$.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},e$.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},e$.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},e$.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},e$.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},e$.prototype.skipToEnd=function(){this.pos=this.string.length},e$.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},e$.prototype.backUp=function(e){this.pos-=e},e$.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Q(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},e$.prototype.indentation=function(){return Q(this.string,null,this.tabSize)-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},e$.prototype.match=function(e,t,n){if("string"==typeof e){var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0}else{var o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&!1!==t&&(this.pos+=o[0].length),o)}},e$.prototype.current=function(){return this.string.slice(this.start,this.pos)},e$.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},e$.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},e$.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ts=function(e,t){this.state=e,this.lookAhead=t},tl=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function tu(e,t,n,i){var o=[e.state.modeGen],a={};ty(e,t.text,e.doc.mode,n,function(e,t){return o.push(e,t)},a,i);for(var s=n.state,l=0;l<e.state.overlays.length;++l)!function(i){n.baseTokens=o;var l=e.state.overlays[i],u=1,c=0;n.state=!0,ty(e,t.text,l.mode,n,function(e,t){for(var n=u;c<e;){var i=o[u];i>e&&o.splice(u,1,e,o[u+1],i),u+=2,c=Math.min(e,i)}if(t)if(l.opaque)o.splice(n,u-n,e,"overlay "+t),u=n+2;else for(;n<u;n+=2){var a=o[n+1];o[n+1]=(a?a+" ":"")+"overlay "+t}},a),n.state=s,n.baseTokens=null,n.baseTokenPos=1}(l);return{styles:o,classes:a.bgClass||a.textClass?a:null}}function tc(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=td(e,e4(t)),o=t.text.length>e.options.maxHighlightLength&&eZ(e.doc.mode,i.state),a=tu(e,t,i);o&&(i.state=o),t.stateAfter=i.save(!o),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function td(e,t,n){var i=e.doc,o=e.display;if(!i.mode.startState)return new tl(i,!0,t);var a=function(e,t,n){for(var i,o,a=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>s;--l){if(l<=a.first)return a.first;var u=e0(a,l-1),c=u.stateAfter;if(c&&(!n||l+(c instanceof ts?c.lookAhead:0)<=a.modeFrontier))return l;var d=Q(u.text,null,e.options.tabSize);(null==o||i>d)&&(o=l-1,i=d)}return o}(e,t,n),s=a>i.first&&e0(i,a-1).stateAfter,l=s?tl.fromSaved(i,s,a):new tl(i,eQ(i.mode),a);return i.iter(a,t,function(n){tf(e,n.text,l);var i=l.line;n.stateAfter=i==t-1||i%5==0||i>=o.viewFrom&&i<o.viewTo?l.save():null,l.nextLine()}),n&&(i.modeFrontier=l.line),l}function tf(e,t,n,i){var o=e.doc.mode,a=new e$(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&tp(o,n.state);!a.eol();)th(o,a,n.state),a.start=a.pos}function tp(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=eJ(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function th(e,t,n,i){for(var o=0;o<10;o++){i&&(i[0]=eJ(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw Error("Mode "+e.name+" failed to advance stream.")}tl.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},tl.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},tl.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},tl.fromSaved=function(e,t,n){return t instanceof ts?new tl(e,eZ(e.mode,t.state),n,t.lookAhead):new tl(e,eZ(e.mode,t),n)},tl.prototype.save=function(e){var t=!1!==e?eZ(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ts(t,this.maxLookAhead):t};var tm=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function tg(e,t,n,i){var o,a=e.doc,s=a.mode;t=to(a,t);var l,u=e0(a,t.line),c=td(e,t.line,n),d=new e$(u.text,e.options.tabSize,c);for(i&&(l=[]);(i||d.pos<t.ch)&&!d.eol();)d.start=d.pos,o=th(s,d,c.state),i&&l.push(new tm(d,o,eZ(a.mode,c.state)));return i?l:new tm(d,o,c.state)}function tv(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function ty(e,t,n,i,o,a,s){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var u,c=0,d=null,f=new e$(t,e.options.tabSize,i),p=e.options.addModeClass&&[null];for(""==t&&tv(tp(n,i.state),a);!f.eol();){if(f.pos>e.options.maxHighlightLength?(l=!1,s&&tf(e,t,i,f.pos),f.pos=t.length,u=null):u=tv(th(n,f,i.state,p),a),p){var h=p[0].name;h&&(u="m-"+(u?h+" "+u:h))}if(!l||d!=u){for(;c<f.start;)o(c=Math.min(f.start,c+5e3),d);d=u}f.start=f.pos}for(;c<f.pos;){var m=Math.min(f.pos,c+5e3);o(m,d),c=m}}var tb=!1,tx=!1;function tw(e,t,n){this.marker=e,this.from=t,this.to=n}function tA(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function tC(e,t){if(t.full)return null;var n=e6(e,t.from.line)&&e0(e,t.from.line).markedSpans,i=e6(e,t.to.line)&&e0(e,t.to.line).markedSpans;if(!n&&!i)return null;var o=t.from.ch,a=t.to.ch,s=0==e7(t.from,t.to),l=function(e,t,n){var i;if(e)for(var o=0;o<e.length;++o){var a=e[o],s=a.marker;if(null==a.from||(s.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&"bookmark"==s.type&&(!n||!a.marker.insertLeft)){var l=null==a.to||(s.inclusiveRight?a.to>=t:a.to>t);(i||(i=[])).push(new tw(s,a.from,l?null:a.to))}}return i}(n,o,s),u=function(e,t,n){var i;if(e)for(var o=0;o<e.length;++o){var a=e[o],s=a.marker;if(null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==s.type&&(!n||a.marker.insertLeft)){var l=null==a.from||(s.inclusiveLeft?a.from<=t:a.from<t);(i||(i=[])).push(new tw(s,l?null:a.from-t,null==a.to?null:a.to-t))}}return i}(i,a,s),c=1==t.text.length,d=el(t.text).length+(c?o:0);if(l)for(var f=0;f<l.length;++f){var p=l[f];if(null==p.to){var h=tA(u,p.marker);h?c&&(p.to=null==h.to?null:h.to+d):p.to=o}}if(u)for(var m=0;m<u.length;++m){var g=u[m];null!=g.to&&(g.to+=d),null==g.from?!tA(l,g.marker)&&(g.from=d,c&&(l||(l=[])).push(g)):(g.from+=d,c&&(l||(l=[])).push(g))}l&&(l=tS(l)),u&&u!=l&&(u=tS(u));var v=[l];if(!c){var y,b=t.text.length-2;if(b>0&&l)for(var x=0;x<l.length;++x)null==l[x].to&&(y||(y=[])).push(new tw(l[x].marker,null,null));for(var w=0;w<b;++w)v.push(y);v.push(u)}return v}function tS(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function t_(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function tT(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function tO(e){return e.inclusiveLeft?-1:0}function tP(e){return+!!e.inclusiveRight}function tM(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),o=t.find(),a=e7(i.from,o.from)||tO(e)-tO(t);if(a)return-a;var s=e7(i.to,o.to)||tP(e)-tP(t);return s||t.id-e.id}function tE(e,t){var n,i=tx&&e.markedSpans;if(i)for(var o=void 0,a=0;a<i.length;++a)(o=i[a]).marker.collapsed&&(t?o.from:o.to)==null&&(!n||0>tM(n,o.marker))&&(n=o.marker);return n}function tD(e,t,n,i,o){var a=e0(e,t),s=tx&&a.markedSpans;if(s)for(var l=0;l<s.length;++l){var u=s[l];if(u.marker.collapsed){var c=u.marker.find(0),d=e7(c.from,n)||tO(u.marker)-tO(o),f=e7(c.to,i)||tP(u.marker)-tP(o);if((!(d>=0)||!(f<=0))&&(!(d<=0)||!(f>=0))&&(d<=0&&(u.marker.inclusiveRight&&o.inclusiveLeft?e7(c.to,n)>=0:e7(c.to,n)>0)||d>=0&&(u.marker.inclusiveRight&&o.inclusiveLeft?0>=e7(c.from,i):0>e7(c.from,i))))return!0}}}function tI(e){for(var t;t=tE(e,!0);)e=t.find(-1,!0).line;return e}function tk(e,t){var n=e0(e,t),i=tI(n);return n==i?t:e4(i)}function tN(e,t){if(t>e.lastLine())return t;var n,i=e0(e,t);if(!tR(e,i))return t;for(;n=tE(i,!1);)i=n.find(1,!0).line;return e4(i)+1}function tR(e,t){var n=tx&&t.markedSpans;if(n){for(var i=void 0,o=0;o<n.length;++o)if((i=n[o]).marker.collapsed&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&function e(t,n,i){if(null==i.to){var o=i.marker.find(1,!0);return e(t,o.line,tA(o.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==n.text.length)return!0;for(var a=void 0,s=0;s<n.markedSpans.length;++s)if((a=n.markedSpans[s]).marker.collapsed&&!a.marker.widgetNode&&a.from==i.to&&(null==a.to||a.to!=i.from)&&(a.marker.inclusiveLeft||i.marker.inclusiveRight)&&e(t,n,a))return!0}(e,t,i)))return!0}}function tB(e){e=tI(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;t+=o.height}for(var a=n.parent;a;a=(n=a).parent)for(var s=0;s<a.children.length;++s){var l=a.children[s];if(l==n)break;t+=l.height}return t}function tL(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=tE(i,!0);){var o=t.find(0,!0);i=o.from.line,n+=o.from.ch-o.to.ch}for(i=e;t=tE(i,!1);){var a=t.find(0,!0);n-=i.text.length-a.from.ch,n+=(i=a.to.line).text.length-a.to.ch}return n}function tF(e){var t=e.display,n=e.doc;t.maxLine=e0(n,n.first),t.maxLineLength=tL(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=tL(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var tV=function(e,t,n){this.text=e,tT(this,t),this.height=n?n(this):1};tV.prototype.lineNo=function(){return e4(this)},eI(tV);var tj={},tG={};function tU(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?tG:tj;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function tz(e,t){var n=j("span",null,null,y?"padding-right: .1px":null),s={pre:j("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var u=l?t.rest[l-1]:t.line,c=void 0;s.pos=0,s.addToken=tW,function(e){if(null!=a)return a;var t=F(e,document.createTextNode("AA")),n=i(t,0,1).getBoundingClientRect(),o=i(t,1,2).getBoundingClientRect();return L(e),!!n&&n.left!=n.right&&(a=o.right-n.right<3)}(e.display.measure)&&(c=eC(u,e.doc.direction))&&(s.addToken=function(e,t){return function(n,i,o,a,s,l,u){o=o?o+" cm-force-border":"cm-force-border";for(var c=n.pos,d=c+i.length;;){for(var f=void 0,p=0;p<t.length&&(!((f=t[p]).to>c)||!(f.from<=c));p++);if(f.to>=d)return e(n,i,o,a,s,l,u);e(n,i.slice(0,f.to-c),o,a,null,l,u),a=null,i=i.slice(f.to-c),c=f.to}}}(s.addToken,c)),s.map=[];var d=t!=e.display.externalMeasured&&e4(u);(function(e,t,n){var i=e.markedSpans,o=e.text,a=0;if(!i){for(var s=1;s<n.length;s+=2)t.addToken(t,o.slice(a,a=n[s]),tU(n[s+1],t.cm.options));return}for(var l,u,c,d,f,p,h,m=o.length,g=0,v=1,y="",b=0;;){if(b==g){c=d=f=u="",h=null,p=null,b=1/0;for(var x=[],w=void 0,A=0;A<i.length;++A){var C=i[A],S=C.marker;if("bookmark"==S.type&&C.from==g&&S.widgetNode)x.push(S);else if(C.from<=g&&(null==C.to||C.to>g||S.collapsed&&C.to==g&&C.from==g)){if(null!=C.to&&C.to!=g&&b>C.to&&(b=C.to,d=""),S.className&&(c+=" "+S.className),S.css&&(u=(u?u+";":"")+S.css),S.startStyle&&C.from==g&&(f+=" "+S.startStyle),S.endStyle&&C.to==b&&(w||(w=[])).push(S.endStyle,C.to),S.title&&((h||(h={})).title=S.title),S.attributes)for(var _ in S.attributes)(h||(h={}))[_]=S.attributes[_];S.collapsed&&(!p||0>tM(p.marker,S))&&(p=C)}else C.from>g&&b>C.from&&(b=C.from)}if(w)for(var T=0;T<w.length;T+=2)w[T+1]==b&&(d+=" "+w[T]);if(!p||p.from==g)for(var O=0;O<x.length;++O)tH(t,0,x[O]);if(p&&(p.from||0)==g){if(tH(t,(null==p.to?m+1:p.to)-g,p.marker,null==p.from),null==p.to)return;p.to==g&&(p=!1)}}if(g>=m)break;for(var P=Math.min(m,b);;){if(y){var M=g+y.length;if(!p){var E=M>P?y.slice(0,P-g):y;t.addToken(t,E,l?l+c:c,f,g+E.length==b?d:"",u,h)}if(M>=P){y=y.slice(P-g),g=P;break}g=M,f=""}y=o.slice(a,a=n[v++]),l=tU(n[v++],t.cm.options)}}})(u,s,tc(e,u,d)),u.styleClasses&&(u.styleClasses.bgClass&&(s.bgClass=W(u.styleClasses.bgClass,s.bgClass||"")),u.styleClasses.textClass&&(s.textClass=W(u.styleClasses.textClass,s.textClass||""))),0==s.map.length&&s.map.push(0,0,s.content.appendChild(function(e){if(null==o){var t=V("span","");F(e,V("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(o=t.offsetWidth<=1&&t.offsetHeight>2&&!(g&&v<8))}var n=o?V("span",""):V("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}(e.display.measure))),0==l?(t.measure.map=s.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(s.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(y){var f=s.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(s.content.className="cm-tab-wrap-hack")}return eP(e,"renderLine",e,t.line,s.pre),s.pre.className&&(s.textClass=W(s.pre.className,s.textClass||"")),s}function tW(e,t,n,i,o,a,s){if(t){var l,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",o=0;o<e.length;o++){var a=e.charAt(o);" "==a&&n&&(o==e.length-1||32==e.charCodeAt(o+1))&&(a="\xa0"),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,c=e.cm.state.specialChars,d=!1;if(c.test(t)){l=document.createDocumentFragment();for(var f=0;;){c.lastIndex=f;var p=c.exec(t),h=p?p.index-f:t.length-f;if(h){var m=document.createTextNode(u.slice(f,f+h));g&&v<9?l.appendChild(V("span",[m])):l.appendChild(m),e.map.push(e.pos,e.pos+h,m),e.col+=h,e.pos+=h}if(!p)break;f+=h+1;var y=void 0;if("	"==p[0]){var b=e.cm.options.tabSize,x=b-e.col%b;(y=l.appendChild(V("span",es(x),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","	"),e.col+=x}else"\r"==p[0]||"\n"==p[0]?(y=l.appendChild(V("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]):((y=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),g&&v<9?l.appendChild(V("span",[y])):l.appendChild(y)),e.col+=1;e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,l=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,l),g&&v<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||o||d||a||s){var w=n||"";i&&(w+=i),o&&(w+=o);var A=V("span",[l],w,a);if(s)for(var C in s)s.hasOwnProperty(C)&&"style"!=C&&"class"!=C&&A.setAttribute(C,s[C]);return e.content.appendChild(A)}e.content.appendChild(l)}}function tH(e,t,n,i){var o=!i&&n.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!i&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function tq(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=tE(e,!1);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?e4(el(this.rest))-n+1:1,this.node=this.text=null,this.hidden=tR(e,t)}function tK(e,t,n){for(var i,o=[],a=t;a<n;a=i){var s=new tq(e.doc,e0(e.doc,a),a);i=a+s.size,o.push(s)}return o}var tX=null,tY=null;function tZ(e,t){var n=eT(e,t);if(n.length){var i,o=Array.prototype.slice.call(arguments,2);tX?i=tX.delayedCallbacks:tY?i=tY:(i=tY=[],setTimeout(tJ,0));for(var a=function(e){i.push(function(){return n[e].apply(null,o)})},s=0;s<n.length;++s)a(s)}}function tJ(){var e=tY;tY=null;for(var t=0;t<e.length;++t)e[t]()}function tQ(e,t,n,i){for(var o=0;o<t.changes.length;o++){var a=t.changes[o];"text"==a?function(e,t){var n=t.text.className,i=t0(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,t1(e,t)):n&&(t.text.className=n)}(e,t):"gutter"==a?t2(e,t,n,i):"class"==a?t1(e,t):"widget"==a&&function(e,t,n){t.alignable&&(t.alignable=null);for(var i=R("CodeMirror-linewidget"),o=t.node.firstChild,a=void 0;o;o=a)a=o.nextSibling,i.test(o.className)&&t.node.removeChild(o);t3(e,t,n)}(e,t,i)}t.changes=null}function t$(e){return e.node==e.text&&(e.node=V("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),g&&v<8&&(e.node.style.zIndex=2)),e.node}function t0(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):tz(e,t)}function t1(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=t$(t);t.background=i.insertBefore(V("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}t.line.wrapClass?t$(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var o=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=o||""}function t2(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=t$(t);t.gutterBackground=V("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=t$(t),l=t.gutter=V("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(l.setAttribute("aria-hidden","true"),e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(V("div",e8(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var u=0;u<e.display.gutterSpecs.length;++u){var c=e.display.gutterSpecs[u].className,d=a.hasOwnProperty(c)&&a[c];d&&l.appendChild(V("div",[d],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function t3(e,t,n){if(t4(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)t4(e,t.rest[i],t,n,!1)}function t4(e,t,n,i,o){if(t.widgets)for(var a=t$(n),s=0,l=t.widgets;s<l.length;++s){var u=l[s],c=V("div",[u.node],"CodeMirror-linewidget"+(u.className?" "+u.className:""));u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),function(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(o-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}(u,c,n,i),e.display.input.setUneditable(c),o&&u.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),tZ(u,"redraw")}}function t5(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!G(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),F(t.display.measure,V("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function t6(e,t){for(var n=eL(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function t8(e){return e.lineSpace.offsetTop}function t9(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function t7(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=F(e.measure,V("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function ne(e){return 50-e.display.nativeBarWidth}function nt(e){return e.display.scroller.clientWidth-ne(e)-e.display.barWidth}function nn(e){return e.display.scroller.clientHeight-ne(e)-e.display.barHeight}function nr(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var o=0;o<e.rest.length;o++)if(e4(e.rest[o])>n)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}}function ni(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[nI(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function no(e,t){var n,i,o,a,s=e4(t),l=ni(e,s);l&&!l.text?l=null:l&&l.changes&&(tQ(e,l,s,nO(e)),e.curOp.forceUpdate=!0),l||(i=e4(n=tI(n=t)),(o=e.display.externalMeasured=new tq(e.doc,n,i)).lineN=i,a=o.built=tz(e,o),o.text=a.pre,F(e.display.lineMeasure,a.pre),l=o);var u=nr(l,t,s);return{line:t,view:l,rect:null,map:u.map,cache:u.cache,before:u.before,hasHeights:!1}}function na(e,t,n,o,a){t.before&&(n=-1);var s,l=n+(o||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var i=e.options.lineWrapping,o=i&&nt(e);if(!t.measure.heights||i&&t.measure.width!=o){var a=t.measure.heights=[];if(i){t.measure.width=o;for(var s=t.text.firstChild.getClientRects(),l=0;l<s.length-1;l++){var u=s[l],c=s[l+1];Math.abs(u.bottom-c.bottom)>2&&a.push((u.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,n,o){var a,s,l=nl(t.map,n,o),u=l.node,c=l.start,d=l.end,f=l.collapse;if(3==u.nodeType){for(var p=0;p<4;p++){for(;c&&ev(t.line.text.charAt(l.coverStart+c));)--c;for(;l.coverStart+d<l.coverEnd&&ev(t.line.text.charAt(l.coverStart+d));)++d;if((a=g&&v<9&&0==c&&d==l.coverEnd-l.coverStart?u.parentNode.getBoundingClientRect():function(e,t){var n=ns;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var o=e.length-1;o>=0&&(n=e[o]).left==n.right;o--);return n}(i(u,c,d).getClientRects(),o)).left||a.right||0==c)break;d=c,c-=1,f="right"}g&&v<11&&(a=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=ez)return ez;var t=F(e,V("span","x")),n=t.getBoundingClientRect(),o=i(t,0,1).getBoundingClientRect();return ez=Math.abs(n.left-o.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*o,bottom:t.bottom*o}}(e.display.measure,a))}else c>0&&(f=o="right"),a=e.options.lineWrapping&&(s=u.getClientRects()).length>1?s["right"==o?s.length-1:0]:u.getBoundingClientRect();if(g&&v<9&&!c&&(!a||!a.left&&!a.right)){var h=u.parentNode.getClientRects()[0];a=h?{left:h.left,right:h.left+nT(e.display),top:h.top,bottom:h.bottom}:ns}for(var m=a.top-t.rect.top,y=a.bottom-t.rect.top,b=(m+y)/2,x=t.view.measure.heights,w=0;w<x.length-1&&!(b<x[w]);w++);var A=w?x[w-1]:0,C=x[w],S={left:("right"==f?a.right:a.left)-t.rect.left,right:("left"==f?a.left:a.right)-t.rect.left,top:A,bottom:C};return a.left||a.right||(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=m,S.rbottom=y),S}(e,t,n,o)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:a?s.rtop:s.top,bottom:a?s.rbottom:s.bottom}}var ns={left:0,right:0,top:0,bottom:0};function nl(e,t,n){for(var i,o,a,s,l,u,c=0;c<e.length;c+=3)if(l=e[c],u=e[c+1],t<l?(o=0,a=1,s="left"):t<u?a=(o=t-l)+1:(c==e.length-3||t==u&&e[c+3]>t)&&(o=(a=u-l)-1,t>=u&&(s="right")),null!=o){if(i=e[c+2],l==u&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[(c-=3)+2],s="left";if("right"==n&&o==u-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:o,end:a,collapse:s,coverStart:l,coverEnd:u}}function nu(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function nc(e){e.display.externalMeasure=null,L(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)nu(e.display.view[t])}function nd(e){nc(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function nf(e){return x&&O?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function np(e){return x&&O?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function nh(e){var t=tI(e).widgets,n=0;if(t)for(var i=0;i<t.length;++i)t[i].above&&(n+=t5(t[i]));return n}function nm(e,t,n,i,o){if(!o){var a=nh(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var s=tB(t);if("local"==i?s+=t8(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var l=e.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==i?0:np(q(e)));var u=l.left+("window"==i?0:nf(q(e)));n.left+=u,n.right+=u}return n.top+=s,n.bottom+=s,n}function ng(e,t,n){if("div"==n)return t;var i=t.left,o=t.top;if("page"==n)i-=nf(q(e)),o-=np(q(e));else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,o+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function nv(e,t,n,i,o){var a,s;return i||(i=e0(e.doc,t.line)),nm(e,i,(a=i,s=t.ch,na(e,no(e,a),s,o)),n)}function ny(e,t,n,i,o,a){function s(t,s){var l=na(e,o,t,s?"right":"left",a);return s?l.left=l.right:l.right=l.left,nm(e,i,l,n)}i=i||e0(e.doc,t.line),o||(o=no(e,i));var l=eC(i,e.doc.direction),u=t.ch,c=t.sticky;if(u>=i.text.length?(u=i.text.length,c="before"):u<=0&&(u=0,c="after"),!l)return s("before"==c?u-1:u,"before"==c);function d(e,t,n){return s(n?e-1:e,1==l[t].level!=n)}var f=ew(l,u,c),p=ex,h=d(u,f,"before"==c);return null!=p&&(h.other=d(u,p,"before"!=c)),h}function nb(e,t){var n=0;t=to(e.doc,t),e.options.lineWrapping||(n=nT(e.display)*t.ch);var i=e0(e.doc,t.line),o=tB(i)+t8(e.display);return{left:n,right:n,top:o,bottom:o+i.height}}function nx(e,t,n,i,o){var a=e9(e,t,n);return a.xRel=o,i&&(a.outside=i),a}function nw(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return nx(i.first,0,null,-1,-1);var o=e5(i,n),a=i.first+i.size-1;if(o>a)return nx(i.first+i.size-1,e0(i,a).text.length,null,1,1);t<0&&(t=0);for(var s=e0(i,o);;){var l=function(e,t,n,i,o){o-=tB(t);var a=no(e,t),s=nh(t),l=0,u=t.text.length,c=!0,d=eC(t,e.doc.direction);if(d){var f=(e.options.lineWrapping?function(e,t,n,i,o,a,s){var l=nA(e,t,i,s),u=l.begin,c=l.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var d=null,f=null,p=0;p<o.length;p++){var h=o[p];if(!(h.from>=c)&&!(h.to<=u)){var m=na(e,i,1!=h.level?Math.min(c,h.to)-1:Math.max(u,h.from)).right,g=m<a?a-m+1e9:m-a;(!d||f>g)&&(d=h,f=g)}}return d||(d=o[o.length-1]),d.from<u&&(d={from:u,to:d.to,level:d.level}),d.to>c&&(d={from:d.from,to:c,level:d.level}),d}:function(e,t,n,i,o,a,s){var l=eb(function(l){var u=o[l],c=1!=u.level;return nS(ny(e,e9(n,c?u.to:u.from,c?"before":"after"),"line",t,i),a,s,!0)},0,o.length-1),u=o[l];if(l>0){var c=1!=u.level,d=ny(e,e9(n,c?u.from:u.to,c?"after":"before"),"line",t,i);nS(d,a,s,!0)&&d.top>s&&(u=o[l-1])}return u})(e,t,n,a,d,i,o);l=(c=1!=f.level)?f.from:f.to-1,u=c?f.to:f.from-1}var p,h,m=null,g=null,v=eb(function(t){var n=na(e,a,t);return n.top+=s,n.bottom+=s,!!nS(n,i,o,!1)&&(n.top<=o&&n.left<=i&&(m=t,g=n),!0)},l,u),y=!1;if(g){var b=i-g.left<g.right-i,x=b==c;v=m+ +!x,h=x?"after":"before",p=b?g.left:g.right}else{!c&&(v==u||v==l)&&v++,h=0==v?"after":v==t.text.length?"before":na(e,a,v-!!c).bottom+s<=o==c?"after":"before";var w=ny(e,e9(n,v,h),"line",t,a);p=w.left,y=o<w.top?-1:+(o>=w.bottom)}return nx(n,v=ey(t.text,v,1),h,y,i-p)}(e,s,o,t,n),u=function(e,t){var n,i=tx&&e.markedSpans;if(i)for(var o=0;o<i.length;++o){var a=i[o];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!n||0>tM(n,a.marker))&&(n=a.marker)}return n}(s,l.ch+ +(l.xRel>0||l.outside>0));if(!u)return l;var c=u.find(1);if(c.line==o)return c;s=e0(i,o=c.line)}}function nA(e,t,n,i){i-=nh(t);var o=t.text.length,a=eb(function(t){return na(e,n,t-1).bottom<=i},o,0);return o=eb(function(t){return na(e,n,t).top>i},a,o),{begin:a,end:o}}function nC(e,t,n,i){n||(n=no(e,t));var o=nm(e,t,na(e,n,i),"line").top;return nA(e,t,n,o)}function nS(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function n_(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==s){s=V("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)s.appendChild(document.createTextNode("x")),s.appendChild(V("br"));s.appendChild(document.createTextNode("x"))}F(e.measure,s);var n=s.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),L(e.measure),n||1}function nT(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=V("span","xxxxxxxxxx"),n=V("pre",[t],"CodeMirror-line-like");F(e.measure,n);var i=t.getBoundingClientRect(),o=(i.right-i.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function nO(e){for(var t=e.display,n={},i={},o=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s){var l=e.display.gutterSpecs[s].className;n[l]=a.offsetLeft+a.clientLeft+o,i[l]=a.clientWidth}return{fixedPos:nP(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function nP(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function nM(e){var t=n_(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/nT(e.display)-3);return function(o){if(tR(e.doc,o))return 0;var a=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(a+=o.widgets[s].height);return n?a+(Math.ceil(o.text.length/i)||1)*t:a+t}}function nE(e){var t=e.doc,n=nM(e);t.iter(function(e){var t=n(e);t!=e.height&&e3(e,t)})}function nD(e,t,n,i){var o=e.display;if(!n&&"true"==eL(t).getAttribute("cm-not-content"))return null;var a,s,l=o.lineSpace.getBoundingClientRect();try{a=t.clientX-l.left,s=t.clientY-l.top}catch(e){return null}var u,c=nw(e,a,s);if(i&&c.xRel>0&&(u=e0(e.doc,c.line).text).length==c.ch){var d=Q(u,u.length,e.options.tabSize)-u.length;c=e9(c.line,Math.max(0,Math.round((a-t7(e.display).left)/nT(e.display))-d))}return c}function nI(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function nk(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var o=e.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)tx&&tk(e.doc,t)<o.viewTo&&nR(e);else if(n<=o.viewFrom)tx&&tN(e.doc,n+i)>o.viewFrom?nR(e):(o.viewFrom+=i,o.viewTo+=i);else if(t<=o.viewFrom&&n>=o.viewTo)nR(e);else if(t<=o.viewFrom){var a=nB(e,n,n+i,1);a?(o.view=o.view.slice(a.index),o.viewFrom=a.lineN,o.viewTo+=i):nR(e)}else if(n>=o.viewTo){var s=nB(e,t,t,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):nR(e)}else{var l=nB(e,t,t,-1),u=nB(e,n,n+i,1);l&&u?(o.view=o.view.slice(0,l.index).concat(tK(e,l.lineN,u.lineN)).concat(o.view.slice(u.index)),o.viewTo+=i):nR(e)}var c=o.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(o.externalMeasured=null))}function nN(e,t,n){e.curOp.viewChanged=!0;var i=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(i.externalMeasured=null),!(t<i.viewFrom)&&!(t>=i.viewTo)){var a=i.view[nI(e,t)];if(null!=a.node){var s=a.changes||(a.changes=[]);-1==ee(s,n)&&s.push(n)}}}function nR(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function nB(e,t,n,i){var o,a=nI(e,t),s=e.display.view;if(!tx||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var l=e.display.viewFrom,u=0;u<a;u++)l+=s[u].size;if(l!=t){if(i>0){if(a==s.length-1)return null;o=l+s[a].size-t,a++}else o=l-t;t+=o,n+=o}for(;tk(e.doc,n)!=n;){if(a==(i<0?0:s.length-1))return null;n+=i*s[a-(i<0)].size,a+=i}return{index:a,lineN:n}}function nL(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var o=t[i];!o.hidden&&(!o.node||o.changes)&&++n}return n}function nF(e){e.display.input.showSelection(e.display.input.prepareSelection())}function nV(e,t){void 0===t&&(t=!0);var n=e.doc,i={},o=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var l=0;l<n.sel.ranges.length;l++)if(t||l!=n.sel.primIndex){var u=n.sel.ranges[l];if(!(u.from().line>=e.display.viewTo)&&!(u.to().line<e.display.viewFrom)){var c=u.empty();if(s){var d=s(e,u);d&&nj(e,d,o)}else(c||e.options.showCursorWhenSelecting)&&nj(e,u.head,o);c||function(e,t,n){var i=e.display,o=e.doc,a=document.createDocumentFragment(),s=t7(e.display),l=s.left,u=Math.max(i.sizerWidth,nt(e)-i.sizer.offsetLeft)-s.right,c="ltr"==o.direction;function d(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(V("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?u-e:n)+"px;\n                             height: "+(i-t)+"px"))}function f(t,n,i){var a,s,f=e0(o,t),p=f.text.length;function h(n,i){return nv(e,e9(t,n),"div",f,i)}function m(t,n,i){var o=nC(e,f,null,t),a="ltr"==n==("after"==i)?"left":"right";return h("after"==i?o.begin:o.end-(/\s/.test(f.text.charAt(o.end-1))?2:1),a)[a]}var g=eC(f,o.direction);return!function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var o=!1,a=0;a<e.length;++a){var s=e[a];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",a),o=!0)}o||i(t,n,"ltr")}(g,n||0,null==i?p:i,function(e,t,o,f){var v,y,b,x,w="ltr"==o,A=h(e,w?"left":"right"),C=h(t-1,w?"right":"left"),S=null==n&&0==e,_=null==i&&t==p,T=0==f,O=!g||f==g.length-1;if(C.top-A.top<=3){var P=(c?S:_)&&T,M=(c?_:S)&&O,E=P?l:(w?A:C).left,D=M?u:(w?C:A).right;d(E,A.top,D-E,A.bottom)}else w?(v=c&&S&&T?l:A.left,y=c?u:m(e,o,"before"),b=c?l:m(t,o,"after"),x=c&&_&&O?u:C.right):(v=c?m(e,o,"before"):l,y=!c&&S&&T?u:A.right,b=!c&&_&&O?l:C.left,x=c?m(t,o,"after"):u),d(v,A.top,y-v,A.bottom),A.bottom<C.top&&d(l,A.bottom,null,C.top),d(b,C.top,x-b,C.bottom);(!a||0>nG(A,a))&&(a=A),0>nG(C,a)&&(a=C),(!s||0>nG(A,s))&&(s=A),0>nG(C,s)&&(s=C)}),{start:a,end:s}}var p=t.from(),h=t.to();if(p.line==h.line)f(p.line,p.ch,h.ch);else{var m=e0(o,p.line),g=e0(o,h.line),v=tI(m)==tI(g),y=f(p.line,p.ch,v?m.text.length+1:null).end,b=f(h.line,v?0:null,h.ch).start;v&&(y.top<b.top-2?(d(y.right,y.top,null,y.bottom),d(l,b.top,b.left,b.bottom)):d(y.right,y.top,b.left-y.right,y.bottom)),y.bottom<b.top&&d(l,y.bottom,null,b.top)}n.appendChild(a)}(e,u,a)}}return i}function nj(e,t,n){var i=ny(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(V("div","\xa0","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=nv(e,t,"div",null,null),s=a.right-a.left;o.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var l=n.appendChild(V("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));l.style.display="",l.style.left=i.other.left+"px",l.style.top=i.other.top+"px",l.style.height=(i.other.bottom-i.other.top)*.85+"px"}}function nG(e,t){return e.top-t.top||e.left-t.left}function nU(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||nq(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function nz(e){!e.hasFocus()&&(e.display.input.focus(),e.state.focused||nH(e))}function nW(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&nq(e))},100)}function nH(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(eP(e,"focus",e,t),e.state.focused=!0,z(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),y&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),nU(e))}function nq(e,t){e.state.delayingBlurEvent||(e.state.focused&&(eP(e,"blur",e,t),e.state.focused=!1,B(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function nK(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),o=t.lineDiv.getBoundingClientRect().top,a=0,s=0;s<t.view.length;s++){var l=t.view[s],u=e.options.lineWrapping,c=void 0,d=0;if(!l.hidden){if(o+=l.line.height,g&&v<8){var f=l.node.offsetTop+l.node.offsetHeight;c=f-n,n=f}else{var p=l.node.getBoundingClientRect();c=p.bottom-p.top,!u&&l.text.firstChild&&(d=l.text.firstChild.getBoundingClientRect().right-p.left-1)}var h=l.line.height-c;if((h>.005||h<-.005)&&(o<i&&(a-=h),e3(l.line,c),nX(l.line),l.rest))for(var m=0;m<l.rest.length;m++)nX(l.rest[m]);if(d>e.display.sizerWidth){var y=Math.ceil(d/nT(e.display));y>e.display.maxLineLength&&(e.display.maxLineLength=y,e.display.maxLine=l.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function nX(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function nY(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-t8(e));var o=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=e5(t,i),s=e5(t,o);if(n&&n.ensure){var l=n.ensure.from.line,u=n.ensure.to.line;l<a?(a=l,s=e5(t,tB(e0(t,l))+e.wrapper.clientHeight)):Math.min(u,t.lastLine())>=s&&(a=e5(t,tB(e0(t,u))-e.wrapper.clientHeight),s=u)}return{from:a,to:Math.max(s,a+1)}}function nZ(e,t){var n=e.display,i=n_(e.display);t.top<0&&(t.top=0);var o=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=nn(e),s={};t.bottom-t.top>a&&(t.bottom=t.top+a);var l=e.doc.height+t9(n),u=t.top<i,c=t.bottom>l-i;if(t.top<o)s.scrollTop=u?0:t.top;else if(t.bottom>o+a){var d=Math.min(t.top,(c?l:t.bottom)-a);d!=o&&(s.scrollTop=d)}var f=e.options.fixedGutter?0:n.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-f,h=nt(e)-n.gutters.offsetWidth,m=t.right-t.left>h;return m&&(t.right=t.left+h),t.left<10?s.scrollLeft=0:t.left<p?s.scrollLeft=Math.max(0,t.left+f-10*!m):t.right>h+p-3&&(s.scrollLeft=t.right+10*!m-h),s}function nJ(e,t){null!=t&&(n0(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function nQ(e){n0(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function n$(e,t,n){(null!=t||null!=n)&&n0(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function n0(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=nb(e,t.from),i=nb(e,t.to);n1(e,n,i,t.margin)}}function n1(e,t,n,i){var o=nZ(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});n$(e,o.scrollLeft,o.scrollTop)}function n2(e,t){2>Math.abs(e.doc.scrollTop-t)||(f||rh(e,{top:t}),n3(e,t,!0),f&&rh(e),ru(e,100))}function n3(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function n4(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),((n?t!=e.doc.scrollLeft:!(2>Math.abs(e.doc.scrollLeft-t)))||i)&&(e.doc.scrollLeft=t,rv(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function n5(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+t9(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+ne(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var n6=function(e,t,n){this.cm=n;var i=this.vert=V("div",[V("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=V("div",[V("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=o.tabIndex=-1,e(i),e(o),e_(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),e_(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,g&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};n6.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var o=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},n6.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},n6.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},n6.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=M&&!S?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new $,this.disableVert=new $},n6.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="",t.set(1e3,function i(){var o=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1))!=e?e.style.visibility="hidden":t.set(1e3,i)})},n6.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var n8=function(){};function n9(e,t){t||(t=n5(e));var n=e.display.barWidth,i=e.display.barHeight;n7(e,t);for(var o=0;o<4&&n!=e.display.barWidth||i!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&nK(e),n7(e,n5(e)),n=e.display.barWidth,i=e.display.barHeight}function n7(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}n8.prototype.update=function(){return{bottom:0,right:0}},n8.prototype.setScrollLeft=function(){},n8.prototype.setScrollTop=function(){},n8.prototype.clear=function(){};var re={native:n6,null:n8};function rt(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&B(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new re[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),e_(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?n4(e,t):n2(e,t)},e),e.display.scrollbars.addClass&&z(e.display.wrapper,e.display.scrollbars.addClass)}var rn=0;function rr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++rn,markArrays:null},t=e.curOp,tX?tX.ops.push(t):t.ownsGroup=tX={ops:[t],delayedCallbacks:[]}}function ri(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{var i=n.delayedCallbacks,o=0;do{for(;o<i.length;o++)i[o].call(null);for(var a=0;a<n.ops.length;a++){var s=n.ops[a];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++].call(null,s.cm)}}while(o<i.length)}finally{tX=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t,n=e.ops,i=0;i<n.length;i++)!function(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ne(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=ne(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&tF(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new rd(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}(n[i]);for(var o=0;o<n.length;o++){(t=n[o]).updatedDisplay=t.mustUpdate&&rf(t.cm,t.update)}for(var a=0;a<n.length;a++)!function(e){var t,n,i=e.cm,o=i.display;e.updatedDisplay&&nK(i),e.barMeasure=n5(i),o.maxLineChanged&&!i.options.lineWrapping&&(e.adjustWidthTo=(t=o.maxLine,n=o.maxLine.text.length,na(i,no(i,t),n,void 0)).left+3,i.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(o.scroller.clientWidth,o.sizer.offsetLeft+e.adjustWidthTo+ne(i)+i.display.barWidth),e.maxScrollLeft=Math.max(0,o.sizer.offsetLeft+e.adjustWidthTo-nt(i))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=o.input.prepareSelection())}(n[a]);for(var s=0;s<n.length;s++)!function(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&n4(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==U(K(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&n9(t,e.barMeasure),e.updatedDisplay&&rg(t,e.barMeasure),e.selectionChanged&&nU(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&nz(e.cm)}(n[s]);for(var l=0;l<n.length;l++)!function(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&rp(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&n3(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&n4(t,e.scrollLeft,!0,!0),e.scrollToPos){var o=function(e,t,n,i){null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?e9(t.line,t.ch+1,"before"):t,t=t.ch?e9(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var o,a=0;a<5;a++){var s=!1,l=ny(e,t),u=n&&n!=t?ny(e,n):l,c=nZ(e,o={left:Math.min(l.left,u.left),top:Math.min(l.top,u.top)-i,right:Math.max(l.left,u.left),bottom:Math.max(l.bottom,u.bottom)+i}),d=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=c.scrollTop&&(n2(e,c.scrollTop),Math.abs(e.doc.scrollTop-d)>1&&(s=!0)),null!=c.scrollLeft&&(n4(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(s=!0)),!s)break}return o}(t,to(i,e.scrollToPos.from),to(i,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!eM(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null,a=n.wrapper.ownerDocument;if(t.top+i.top<0?o=!0:t.bottom+i.top>(a.defaultView.innerHeight||a.documentElement.clientHeight)&&(o=!1),null!=o&&!_){var s=V("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-t8(e.display))+"px;\n                         height: "+(t.bottom-t.top+ne(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(o),e.display.lineSpace.removeChild(s)}}}(t,o)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var l=0;l<a.length;++l)a[l].lines.length||eP(a[l],"hide");if(s)for(var u=0;u<s.length;++u)s[u].lines.length&&eP(s[u],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&eP(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}(n[l])}(e)})}function ro(e,t){if(e.curOp)return t();rr(e);try{return t()}finally{ri(e)}}function ra(e,t){return function(){if(e.curOp)return t.apply(e,arguments);rr(e);try{return t.apply(e,arguments)}finally{ri(e)}}}function rs(e){return function(){if(this.curOp)return e.apply(this,arguments);rr(this);try{return e.apply(this,arguments)}finally{ri(this)}}}function rl(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);rr(t);try{return e.apply(this,arguments)}finally{ri(t)}}}function ru(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Z(rc,e))}function rc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=td(e,t.highlightFrontier),o=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var s=a.styles,l=a.text.length>e.options.maxHighlightLength?eZ(t.mode,i.state):null,u=tu(e,a,i,!0);l&&(i.state=l),a.styles=u.styles;var c=a.styleClasses,d=u.classes;d?a.styleClasses=d:c&&(a.styleClasses=null);for(var f=!s||s.length!=a.styles.length||c!=d&&(!c||!d||c.bgClass!=d.bgClass||c.textClass!=d.textClass),p=0;!f&&p<s.length;++p)f=s[p]!=a.styles[p];f&&o.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&tf(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ru(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),o.length&&ro(e,function(){for(var t=0;t<o.length;t++)nN(e,o[t],"text")})}}var rd=function(e,t,n){var i=e.display;this.viewport=t,this.visible=nY(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=nt(e),this.force=n,this.dims=nO(e),this.events=[]};function rf(e,t){var n,i,o,a=e.display,s=e.doc;if(t.editorIsHidden)return nR(e),!1;if(!t.force&&t.visible.from>=a.viewFrom&&t.visible.to<=a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&0==nL(e))return!1;ry(e)&&(nR(e),t.dims=nO(e));var l=s.first+s.size,u=Math.max(t.visible.from-e.options.viewportMargin,s.first),c=Math.min(l,t.visible.to+e.options.viewportMargin);a.viewFrom<u&&u-a.viewFrom<20&&(u=Math.max(s.first,a.viewFrom)),a.viewTo>c&&a.viewTo-c<20&&(c=Math.min(l,a.viewTo)),tx&&(u=tk(e.doc,u),c=tN(e.doc,c));var d=u!=a.viewFrom||c!=a.viewTo||a.lastWrapHeight!=t.wrapperHeight||a.lastWrapWidth!=t.wrapperWidth;n=u,i=c,0==(o=e.display).view.length||n>=o.viewTo||i<=o.viewFrom?(o.view=tK(e,n,i),o.viewFrom=n):(o.viewFrom>n?o.view=tK(e,n,o.viewFrom).concat(o.view):o.viewFrom<n&&(o.view=o.view.slice(nI(e,n))),o.viewFrom=n,o.viewTo<i?o.view=o.view.concat(tK(e,o.viewTo,i)):o.viewTo>i&&(o.view=o.view.slice(0,nI(e,i)))),o.viewTo=i,a.viewOffset=tB(e0(e.doc,a.viewFrom)),e.display.mover.style.top=a.viewOffset+"px";var f=nL(e);if(!d&&0==f&&!t.force&&a.renderedView==a.view&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo))return!1;var p=function(e){if(e.hasFocus())return null;var t=U(K(e));if(!t||!G(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=Y(e).getSelection();i.anchorNode&&i.extend&&G(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);f>4&&(a.lineDiv.style.display="none"),function(e,t,n){var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function l(t){var n=t.nextSibling;return y&&M&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var u=i.view,c=i.viewFrom,d=0;d<u.length;d++){var f=u[d];if(f.hidden);else if(f.node&&f.node.parentNode==a){for(;s!=f.node;)s=l(s);var p=o&&null!=t&&t<=c&&f.lineNumber;f.changes&&(ee(f.changes,"gutter")>-1&&(p=!1),tQ(e,f,c,n)),p&&(L(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(e8(e.options,c)))),s=f.node.nextSibling}else{var h=function(e,t,n,i){var o=t0(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),t1(e,t),t2(e,t,n,i),t3(e,t,i),t.node}(e,f,c,n);a.insertBefore(h,s)}c+=f.size}for(;s;)s=l(s)}(e,a.updateLineNumbers,t.dims),f>4&&(a.lineDiv.style.display=""),a.renderedView=a.view;if(p&&p.activeElt&&p.activeElt!=U(X(p.activeElt))&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&G(document.body,p.anchorNode)&&G(document.body,p.focusNode))){var h=p.activeElt.ownerDocument,m=h.defaultView.getSelection(),g=h.createRange();g.setEnd(p.anchorNode,p.anchorOffset),g.collapse(!1),m.removeAllRanges(),m.addRange(g),m.extend(p.focusNode,p.focusOffset)}return L(a.cursorDiv),L(a.selectionDiv),a.gutters.style.height=a.sizer.style.minHeight=0,d&&(a.lastWrapHeight=t.wrapperHeight,a.lastWrapWidth=t.wrapperWidth,ru(e,400)),a.updateLineNumbers=null,!0}function rp(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=nt(e))i&&(t.visible=nY(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+t9(e.display)-nn(e),n.top)}),t.visible=nY(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!rf(e,t))break;nK(e);var o=n5(e);nF(e),n9(e,o),rg(e,o),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function rh(e,t){var n=new rd(e,t);if(rf(e,n)){nK(e),rp(e,n);var i=n5(e);nF(e),n9(e,i),rg(e,i),n.finish()}}function rm(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",tZ(e,"gutterChanged",e)}function rg(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+ne(e)+"px"}function rv(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=nP(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,a=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=a),n[s].gutterBackground&&(n[s].gutterBackground.style.left=a));var l=n[s].alignable;if(l)for(var u=0;u<l.length;u++)l[u].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+o+"px")}}function ry(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=e8(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(V("div",[V("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,s=o.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",rm(e.display),!0}return!1}function rb(e,t){for(var n=[],i=!1,o=0;o<e.length;o++){var a=e[o],s=null;if("string"!=typeof a&&(s=a.style,a=a.className),"CodeMirror-linenumbers"==a)if(!t)continue;else i=!0;n.push({className:a,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function rx(e){var t=e.gutters,n=e.gutterSpecs;L(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var o=n[i],a=o.className,s=o.style,l=t.appendChild(V("div",null,"CodeMirror-gutter "+a));s&&(l.style.cssText=s),"CodeMirror-linenumbers"==a&&(e.lineGutter=l,l.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",rm(e)}function rw(e){rx(e.display),nk(e),rv(e)}function rA(e,t,n,i){this.input=n,this.scrollbarFiller=V("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=V("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=j("div",null,"CodeMirror-code"),this.selectionDiv=V("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=V("div",null,"CodeMirror-cursors"),this.measure=V("div",null,"CodeMirror-measure"),this.lineMeasure=V("div",null,"CodeMirror-measure"),this.lineSpace=j("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var o=j("div",[this.lineSpace],"CodeMirror-lines");this.mover=V("div",[o],null,"position: relative"),this.sizer=V("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=V("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=V("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=V("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=V("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),x&&105===w&&(this.wrapper.style.clipPath="inset(0px)"),this.wrapper.setAttribute("translate","no"),g&&v<8&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),y||f&&P||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.viewFrom=this.viewTo=t.first,this.reportedViewFrom=this.reportedViewTo=t.first,this.view=[],this.renderedView=null,this.externalMeasured=null,this.viewOffset=0,this.lastWrapHeight=this.lastWrapWidth=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLine=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.selForContextMenu=null,this.activeTouch=null,this.gutterSpecs=rb(i.gutters,i.lineNumbers),rx(this),n.init(this)}rd.prototype.signal=function(e,t){eD(e,t)&&this.events.push(arguments)},rd.prototype.finish=function(){for(var e=0;e<this.events.length;e++)eP.apply(null,this.events[e])};var rC=0,rS=null;function r_(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function rT(e,t){x&&102==w&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var n=r_(t),i=n.x,o=n.y,a=rS;0===t.deltaMode&&(i=t.deltaX,o=t.deltaY,a=1);var s=e.display,l=s.scroller,u=l.scrollWidth>l.clientWidth,c=l.scrollHeight>l.clientHeight;if(i&&u||o&&c){if(o&&M&&y){e:for(var d=t.target,p=s.view;d!=l;d=d.parentNode)for(var h=0;h<p.length;h++)if(p[h].node==d){e.display.currentWheelTarget=d;break e}}if(i&&!f&&!A&&null!=a){o&&c&&n2(e,Math.max(0,l.scrollTop+o*a)),n4(e,Math.max(0,l.scrollLeft+i*a)),(!o||o&&c)&&ek(t),s.wheelStartX=null;return}if(o&&null!=a){var m=o*a,g=e.doc.scrollTop,v=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),rh(e,{top:g,bottom:v})}rC<20&&0!==t.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout(function(){if(null!=s.wheelStartX){var e=l.scrollLeft-s.wheelStartX,t=l.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(rS=(rS*rC+n)/(rC+1),++rC)}},200)):(s.wheelDX+=i,s.wheelDY+=o))}}g?rS=-.53:f?rS=15:x?rS=-.7:C&&(rS=-1/3);var rO=function(e,t){this.ranges=e,this.primIndex=t};rO.prototype.primary=function(){return this.ranges[this.primIndex]},rO.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!te(n.anchor,i.anchor)||!te(n.head,i.head))return!1}return!0},rO.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new rP(tt(this.ranges[t].anchor),tt(this.ranges[t].head));return new rO(e,this.primIndex)},rO.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},rO.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(e7(t,i.from())>=0&&0>=e7(e,i.to()))return n}return -1};var rP=function(e,t){this.anchor=e,this.head=t};function rM(e,t,n){var i=e&&e.options.selectionsMayTouch,o=t[n];t.sort(function(e,t){return e7(e.from(),t.from())}),n=ee(t,o);for(var a=1;a<t.length;a++){var s=t[a],l=t[a-1],u=e7(l.to(),s.from());if(i&&!s.empty()?u>0:u>=0){var c=tr(l.from(),s.from()),d=tn(l.to(),s.to()),f=l.empty()?s.from()==s.head:l.from()==l.head;a<=n&&--n,t.splice(--a,2,new rP(f?d:c,f?c:d))}}return new rO(t,n)}function rE(e,t){return new rO([new rP(e,t||e)],0)}function rD(e){return e.text?e9(e.from.line+e.text.length-1,el(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function rI(e,t){if(0>e7(e,t.from))return e;if(0>=e7(e,t.to))return rD(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=rD(t).ch-t.to.ch),e9(n,i)}function rk(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var o=e.sel.ranges[i];n.push(new rP(rI(o.anchor,t),rI(o.head,t)))}return rM(e.cm,n,e.sel.primIndex)}function rN(e,t,n){return e.line==t.line?e9(n.line,e.ch-t.ch+n.ch):e9(n.line+(e.line-t.line),e.ch)}function rR(e){e.doc.mode=eX(e.options,e.doc.modeOption),rB(e)}function rB(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ru(e,100),e.state.modeGen++,e.curOp&&nk(e)}function rL(e,t){return 0==t.from.ch&&0==t.to.ch&&""==el(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function rF(e,t,n,i){function o(e){return n?n[e]:null}function a(e,n,o){var a;e.text=n,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),t_(e),tT(e,o),(a=i?i(e):1)!=e.height&&e3(e,a),tZ(e,"change",e,t)}function s(e,t){for(var n=[],a=e;a<t;++a)n.push(new tV(c[a],o(a),i));return n}var l=t.from,u=t.to,c=t.text,d=e0(e,l.line),f=e0(e,u.line),p=el(c),h=o(c.length-1),m=u.line-l.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(rL(e,t)){var g=s(0,c.length-1);a(f,f.text,h),m&&e.remove(l.line,m),g.length&&e.insert(l.line,g)}else if(d==f)if(1==c.length)a(d,d.text.slice(0,l.ch)+p+d.text.slice(u.ch),h);else{var v=s(1,c.length-1);v.push(new tV(p+d.text.slice(u.ch),h,i)),a(d,d.text.slice(0,l.ch)+c[0],o(0)),e.insert(l.line+1,v)}else if(1==c.length)a(d,d.text.slice(0,l.ch)+c[0]+f.text.slice(u.ch),o(0)),e.remove(l.line+1,m);else{a(d,d.text.slice(0,l.ch)+c[0],o(0)),a(f,p+f.text.slice(u.ch),h);var y=s(1,c.length-1);m>1&&e.remove(l.line+1,m-1),e.insert(l.line+1,y)}tZ(e,"change",e,t)}function rV(e,t,n){!function e(i,o,a){if(i.linked)for(var s=0;s<i.linked.length;++s){var l=i.linked[s];if(l.doc!=o){var u=a&&l.sharedHist;(!n||u)&&(t(l.doc,u),e(l.doc,i,u))}}}(e,null,!0)}function rj(e,t){if(t.cm)throw Error("This document is already in use.");e.doc=t,t.cm=e,nE(e),rR(e),rG(e),e.options.direction=t.direction,e.options.lineWrapping||tF(e),e.options.mode=t.modeOption,nk(e)}function rG(e){("rtl"==e.doc.direction?z:B)(e.display.lineDiv,"CodeMirror-rtl")}function rU(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function rz(e,t){var n={from:tt(t.from),to:rD(t),text:e1(e,t.from,t.to)};return rK(e,n,t.from.line,t.to.line+1),rV(e,function(e){return rK(e,n,t.from.line,t.to.line+1)},!0),n}function rW(e){for(;e.length;)if(el(e).ranges)e.pop();else break}function rH(e,t,n,i){var o,a,s=e.history;s.undone.length=0;var l,u=+new Date;if((s.lastOp==i||s.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&s.lastModTime>u-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=s,l=s.lastOp==i?(rW(o.done),el(o.done)):o.done.length&&!el(o.done).ranges?el(o.done):o.done.length>1&&!o.done[o.done.length-2].ranges?(o.done.pop(),el(o.done)):void 0))a=el(l.changes),0==e7(t.from,t.to)&&0==e7(t.from,a.to)?a.to=rD(t):l.changes.push(rz(e,t));else{var c=el(s.done);for(c&&c.ranges||rq(e.sel,s.done),l={changes:[rz(e,t)],generation:s.generation},s.done.push(l);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(n),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=u,s.lastOp=s.lastSelOp=i,s.lastOrigin=s.lastSelOrigin=t.origin,a||eP(e,"historyAdded")}function rq(e,t){var n=el(t);n&&n.ranges&&n.equals(e)||t.push(e)}function rK(e,t,n,i){var o=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((o||(o=t["spans_"+e.id]={}))[a]=n.markedSpans),++a})}function rX(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],o=0;o<t.text.length;++o)i.push(function(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}(n[o]));return i}(e,t),i=tC(e,t);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var a=n[o],s=i[o];if(a&&s)t:for(var l=0;l<s.length;++l){for(var u=s[l],c=0;c<a.length;++c)if(a[c].marker==u.marker)continue t;a.push(u)}else s&&(n[o]=s)}return n}function rY(e,t,n){for(var i=[],o=0;o<e.length;++o){var a=e[o];if(a.ranges){i.push(n?rO.prototype.deepCopy.call(a):a);continue}var s=a.changes,l=[];i.push({changes:l});for(var u=0;u<s.length;++u){var c=s[u],d=void 0;if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(d=f.match(/^spans_(\d+)$/))&&ee(t,Number(d[1]))>-1&&(el(l)[f]=c[f],delete c[f])}}return i}function rZ(e,t,n,i){if(!i)return new rP(n||t,t);var o=e.anchor;if(n){var a=0>e7(t,o);a!=0>e7(n,o)?(o=t,t=n):a!=0>e7(t,n)&&(t=n)}return new rP(o,t)}function rJ(e,t,n,i,o){null==o&&(o=e.cm&&(e.cm.display.shift||e.extend)),r1(e,new rO([rZ(e.sel.primary(),t,n,o)],0),i)}function rQ(e,t,n){for(var i=[],o=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=rZ(e.sel.ranges[a],t[a],null,o);var s=rM(e.cm,i,e.sel.primIndex);r1(e,s,n)}function r$(e,t,n,i){var o=e.sel.ranges.slice(0);o[t]=n,r1(e,rM(e.cm,o,e.sel.primIndex),i)}rP.prototype.from=function(){return tr(this.anchor,this.head)},rP.prototype.to=function(){return tn(this.anchor,this.head)},rP.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function r0(e,t,n){var i=e.history.done,o=el(i);o&&o.ranges?(i[i.length-1]=t,r2(e,t,n)):r1(e,t,n)}function r1(e,t,n){r2(e,t,n),function(e,t,n,i){var o,a,s=e.history,l=i&&i.origin;n==s.lastSelOp||l&&s.lastSelOrigin==l&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==l||(o=el(s.done),"*"==(a=l.charAt(0))||"+"==a&&o.ranges.length==t.ranges.length&&o.somethingSelected()==t.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)))?s.done[s.done.length-1]=t:rq(t,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=l,s.lastSelOp=n,i&&!1!==i.clearRedo&&rW(s.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function r2(e,t,n){(eD(e,"beforeSelectionChange")||e.cm&&eD(e.cm,"beforeSelectionChange"))&&(o={ranges:(i=t).ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new rP(to(e,t[n].anchor),to(e,t[n].head))},origin:n&&n.origin},eP(e,"beforeSelectionChange",e,o),e.cm&&eP(e.cm,"beforeSelectionChange",e.cm,o),t=o.ranges!=i.ranges?rM(e.cm,o.ranges,o.ranges.length-1):i);var i,o,a=n&&n.bias||(0>e7(t.primary().head,e.sel.primary().head)?-1:1);r3(e,r5(e,t,a,!0)),!(n&&!1===n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&nQ(e.cm)}function r3(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,eE(e.cm)),tZ(e,"cursorActivity",e))}function r4(e){r3(e,r5(e,e.sel,null,!1))}function r5(e,t,n,i){for(var o,a=0;a<t.ranges.length;a++){var s=t.ranges[a],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],u=r8(e,s.anchor,l&&l.anchor,n,i),c=s.head==s.anchor?u:r8(e,s.head,l&&l.head,n,i);(o||u!=s.anchor||c!=s.head)&&(o||(o=t.ranges.slice(0,a)),o[a]=new rP(u,c))}return o?rM(e.cm,o,t.primIndex):t}function r6(e,t,n,i,o){var a=e0(e,t.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var l=a.markedSpans[s],u=l.marker,c="selectLeft"in u?!u.selectLeft:u.inclusiveLeft,d="selectRight"in u?!u.selectRight:u.inclusiveRight;if((null==l.from||(c?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(d?l.to>=t.ch:l.to>t.ch))){if(o&&(eP(u,"beforeCursorEnter"),u.explicitlyCleared))if(a.markedSpans){--s;continue}else break;if(!u.atomic)continue;if(n){var f=u.find(i<0?1:-1),p=void 0;if((i<0?d:c)&&(f=r9(e,f,-i,f&&f.line==t.line?a:null)),f&&f.line==t.line&&(p=e7(f,n))&&(i<0?p<0:p>0))return r6(e,f,t,i,o)}var h=u.find(i<0?-1:1);return(i<0?c:d)&&(h=r9(e,h,i,h.line==t.line?a:null)),h?r6(e,h,t,i,o):null}}return t}function r8(e,t,n,i,o){var a=i||1,s=r6(e,t,n,a,o)||!o&&r6(e,t,n,a,!0)||r6(e,t,n,-a,o)||!o&&r6(e,t,n,-a,!0);return s||(e.cantEdit=!0,e9(e.first,0))}function r9(e,t,n,i){if(n<0&&0==t.ch)if(t.line>e.first)return to(e,e9(t.line-1));else return null;return n>0&&t.ch==(i||e0(e,t.line)).text.length?t.line<e.first+e.size-1?e9(t.line+1,0):null:new e9(t.line,t.ch+n)}function r7(e){e.setSelection(e9(e.firstLine(),0),e9(e.lastLine()),en)}function ie(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return(n&&(i.update=function(t,n,o,a){t&&(i.from=to(e,t)),n&&(i.to=to(e,n)),o&&(i.text=o),void 0!==a&&(i.origin=a)}),eP(e,"beforeChange",e,i),e.cm&&eP(e.cm,"beforeChange",e.cm,i),i.canceled)?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function it(e,t,n){if(e.cm){if(!e.cm.curOp)return ra(e.cm,it)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(eD(e,"beforeChange")||e.cm&&eD(e.cm,"beforeChange"))||(t=ie(e,t,!0))){var i=tb&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!i||-1==ee(i,n))&&(i||(i=[])).push(n)}}),!i)return null;for(var o=[{from:t,to:n}],a=0;a<i.length;++a)for(var s=i[a],l=s.find(0),u=0;u<o.length;++u){var c=o[u];if(!(0>e7(c.to,l.from)||e7(c.from,l.to)>0)){var d=[u,1],f=e7(c.from,l.from),p=e7(c.to,l.to);!(f<0)&&(s.inclusiveLeft||f)||d.push({from:c.from,to:l.from}),!(p>0)&&(s.inclusiveRight||p)||d.push({from:l.to,to:c.to}),o.splice.apply(o,d),u+=d.length-3}}return o}(e,t.from,t.to);if(i)for(var o=i.length-1;o>=0;--o)ir(e,{from:i[o].from,to:i[o].to,text:o?[""]:t.text,origin:t.origin});else ir(e,t)}}function ir(e,t){if(1!=t.text.length||""!=t.text[0]||0!=e7(t.from,t.to)){var n=rk(e,t);rH(e,t,n,e.cm?e.cm.curOp.id:NaN),ia(e,t,n,tC(e,t));var i=[];rV(e,function(e,n){n||-1!=ee(i,e.history)||(ic(e.history,t),i.push(e.history)),ia(e,t,null,tC(e,t))})}}function ii(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var o,a=e.history,s=e.sel,l="undo"==t?a.done:a.undone,u="undo"==t?a.undone:a.done,c=0;c<l.length&&(o=l[c],n?!o.ranges||o.equals(e.sel):o.ranges);c++);if(c!=l.length){for(a.lastOrigin=a.lastSelOrigin=null;;)if((o=l.pop()).ranges){if(rq(o,u),n&&!o.equals(e.sel))return void r1(e,o,{clearRedo:!1});s=o}else if(i)return void l.push(o);else break;var d=[];rq(s,u),u.push({changes:d,generation:a.generation}),a.generation=o.generation||++a.maxGeneration;for(var f=eD(e,"beforeChange")||e.cm&&eD(e.cm,"beforeChange"),p=o.changes.length-1;p>=0;--p){var h=function(n){var i=o.changes[n];if(i.origin=t,f&&!ie(e,i,!1))return l.length=0,{};d.push(rz(e,i));var a=n?rk(e,i):el(l);ia(e,i,a,rX(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:rD(i)});var s=[];rV(e,function(e,t){t||-1!=ee(s,e.history)||(ic(e.history,i),s.push(e.history)),ia(e,i,null,rX(e,i))})}(p);if(h)return h.v}}}}function io(e,t){if(0!=t&&(e.first+=t,e.sel=new rO(eu(e.sel.ranges,function(e){return new rP(e9(e.anchor.line+t,e.anchor.ch),e9(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){nk(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)nN(e.cm,i,"gutter")}}function ia(e,t,n,i){if(e.cm&&!e.cm.curOp)return ra(e.cm,ia)(e,t,n,i);if(t.to.line<e.first)return void io(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);io(e,o),t={from:e9(e.first,0),to:e9(t.to.line+o,t.to.ch),text:[el(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:e9(a,e0(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=e1(e,t.from,t.to),n||(n=rk(e,t)),e.cm?function(e,t,n){var i=e.doc,o=e.display,a=t.from,s=t.to,l=!1,u=a.line;e.options.lineWrapping||(u=e4(tI(e0(i,a.line))),i.iter(u,s.line+1,function(e){if(e==o.maxLine)return l=!0,!0})),i.sel.contains(t.from,t.to)>-1&&eE(e),rF(i,t,n,nM(e)),!e.options.lineWrapping&&(i.iter(u,a.line+t.text.length,function(e){var t=tL(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var o=e0(e,i).stateAfter;if(o&&(!(o instanceof ts)||i+o.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,a.line),ru(e,400);var c=t.text.length-(s.line-a.line)-1;t.full?nk(e):a.line!=s.line||1!=t.text.length||rL(e.doc,t)?nk(e,a.line,s.line+1,c):nN(e,a.line,"text");var d=eD(e,"changes"),f=eD(e,"change");if(f||d){var p={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};f&&tZ(e,"change",e,p),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,i):rF(e,t,i),r2(e,n,en),e.cantEdit&&r8(e,e9(e.firstLine(),0))&&(e.cantEdit=!1)}}function is(e,t,n,i,o){var a;i||(i=n),0>e7(i,n)&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),it(e,{from:n,to:i,text:t,origin:o})}function il(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function iu(e,t,n,i){for(var o=0;o<e.length;++o){var a=e[o],s=!0;if(a.ranges){a.copied||((a=e[o]=a.deepCopy()).copied=!0);for(var l=0;l<a.ranges.length;l++)il(a.ranges[l].anchor,t,n,i),il(a.ranges[l].head,t,n,i);continue}for(var u=0;u<a.changes.length;++u){var c=a.changes[u];if(n<c.from.line)c.from=e9(c.from.line+i,c.from.ch),c.to=e9(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}function ic(e,t){var n=t.from.line,i=t.to.line,o=t.text.length-(i-n)-1;iu(e.done,n,i,o),iu(e.undone,n,i,o)}function id(e,t,n,i){var o=t,a=t;return("number"==typeof t?a=e0(e,ti(e,t)):o=e4(t),null==o)?null:(i(a,o)&&e.cm&&nN(e.cm,o,n),a)}function ip(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function ih(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}ip.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var o=this.lines[n];this.height-=o.height,o.parent=null,t_(o),tZ(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},ih.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,o==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ip))){var l=[];this.collapse(l),this.children=[new ip(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=this.children[i],a=o.chunkSize();if(e<=a){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,l=s;l<o.lines.length;){var u=new ip(o.lines.slice(l,l+=25));o.height-=u.height,this.children.splice(++i,0,u),u.parent=this}o.lines=o.lines.slice(0,s),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new ih(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=ee(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new ih(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var o=this.children[i],a=o.chunkSize();if(e<a){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var im=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function ig(e,t,n){tB(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&nJ(e,n)}im.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=e4(n);if(null!=i&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(n.widgets=null);var a=t5(this);e3(n,Math.max(0,n.height-a)),e&&(ro(e,function(){ig(e,n,-a),nN(e,i,"widget")}),tZ(e,"lineWidgetCleared",e,this,i))}},im.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var o=t5(this)-t;o&&(tR(this.doc,i)||e3(i,i.height+o),n&&ro(n,function(){n.curOp.forceUpdate=!0,ig(n,i,o),tZ(n,"lineWidgetChanged",n,e,e4(i))}))},eI(im);var iv=0,iy=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++iv};function ib(e,t,n,i,o){if(i&&i.shared){var a,s,l,u,c,d,f,p;return a=e,s=t,l=n,u=i,c=o,(u=J(u)).shared=!1,f=(d=[ib(a,s,l,u,c)])[0],p=u.widgetNode,rV(a,function(e){p&&(u.widgetNode=p.cloneNode(!0)),d.push(ib(e,to(e,s),to(e,l),u,c));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;f=el(d)}),new ix(d,f)}if(e.cm&&!e.cm.curOp)return ra(e.cm,ib)(e,t,n,i,o);var h=new iy(e,o),m=e7(t,n);if(i&&J(i,h,!1),m>0||0==m&&!1!==h.clearWhenEmpty)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=j("span",[h.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(tD(e,t.line,t,n,h)||t.line!=n.line&&tD(e,n.line,t,n,h))throw Error("Inserting collapsed marker partially overlapping an existing one");tx=!0}h.addToHistory&&rH(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var g,v=t.line,y=e.cm;if(e.iter(v,n.line+1,function(i){var o,a,s;y&&h.collapsed&&!y.options.lineWrapping&&tI(i)==y.display.maxLine&&(g=!0),h.collapsed&&v!=t.line&&e3(i,0),o=new tw(h,v==t.line?t.ch:null,v==n.line?n.ch:null),(s=(a=e.cm&&e.cm.curOp)&&window.WeakSet&&(a.markedSpans||(a.markedSpans=new WeakSet)))&&i.markedSpans&&s.has(i.markedSpans)?i.markedSpans.push(o):(i.markedSpans=i.markedSpans?i.markedSpans.concat([o]):[o],s&&s.add(i.markedSpans)),o.marker.attachLine(i),++v}),h.collapsed&&e.iter(t.line,n.line+1,function(t){tR(e,t)&&e3(t,0)}),h.clearOnEnter&&e_(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(tb=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),h.collapsed&&(h.id=++iv,h.atomic=!0),y){if(g&&(y.curOp.updateMaxLine=!0),h.collapsed)nk(y,t.line,n.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var b=t.line;b<=n.line;b++)nN(y,b,"text");h.atomic&&r4(y.doc),tZ(y,"markerAdded",y,h)}return h}iy.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&rr(e),eD(this,"clear")){var n=this.find();n&&tZ(this,"clear",n.from,n.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var s=this.lines[a],l=tA(s.markedSpans,this);e&&!this.collapsed?nN(e,e4(s),"text"):e&&(null!=l.to&&(o=e4(s)),null!=l.from&&(i=e4(s))),s.markedSpans=function(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}(s.markedSpans,l),null==l.from&&this.collapsed&&!tR(this.doc,s)&&e&&e3(s,n_(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=tI(this.lines[u]),d=tL(c);d>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=d,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&nk(e,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&r4(e.doc)),e&&tZ(e,"markerCleared",e,this,i,o),t&&ri(e),this.parent&&this.parent.clear()}},iy.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var a=this.lines[o],s=tA(a.markedSpans,this);if(null!=s.from&&(n=e9(t?a:e4(a),s.from),-1==e))return n;if(null!=s.to&&(i=e9(t?a:e4(a),s.to),1==e))return i}return n&&{from:n,to:i}},iy.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&ro(i,function(){var o=t.line,a=ni(i,e4(t.line));if(a&&(nu(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!tR(n.doc,o)&&null!=n.height){var s=n.height;n.height=null;var l=t5(n)-s;l&&e3(o,o.height+l)}tZ(i,"markerChanged",i,e)})},iy.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ee(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},iy.prototype.detachLine=function(e){if(this.lines.splice(ee(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},eI(iy);var ix=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function iw(e){return e.findMarks(e9(e.first,0),e.clipPos(e9(e.lastLine())),function(e){return e.parent})}ix.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();tZ(this,"clear")}},ix.prototype.find=function(e,t){return this.primary.find(e,t)},eI(ix);var iA=0,iC=function(e,t,n,i,o){if(!(this instanceof iC))return new iC(e,t,n,i,o);null==n&&(n=0),ih.call(this,[new ip([new tV("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=e9(n,0);this.sel=rE(a),this.history=new rU(null),this.id=++iA,this.modeOption=t,this.lineSep=i,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),rF(this,{from:a,to:a,text:e}),r1(this,rE(a),en)};iC.prototype=ed(ih.prototype,{constructor:iC,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=e2(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:rl(function(e){var t=e9(this.first,0),n=this.first+this.size-1;it(this,{from:t,to:e9(n,e0(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&n$(this.cm,0,0),r1(this,rE(t),en)}),replaceRange:function(e,t,n,i){t=to(this,t),n=n?to(this,n):t,is(this,e,t,n,i)},getRange:function(e,t,n){var i=e1(this,to(this,e),to(this,t));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(e6(this,e))return e0(this,e)},getLineNumber:function(e){return e4(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=e0(this,e)),tI(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return to(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:rl(function(e,t,n){var i;i=to(this,"number"==typeof e?e9(e,t||0):e),r1(this,rE(i,null),n)}),setSelection:rl(function(e,t,n){var i,o;i=to(this,e),o=to(this,t||e),r1(this,rE(i,o),n)}),extendSelection:rl(function(e,t,n){rJ(this,to(this,e),t&&to(this,t),n)}),extendSelections:rl(function(e,t){rQ(this,ta(this,e),t)}),extendSelectionsBy:rl(function(e,t){rQ(this,ta(this,eu(this.sel.ranges,e)),t)}),setSelections:rl(function(e,t,n){if(e.length){for(var i=[],o=0;o<e.length;o++)i[o]=new rP(to(this,e[o].anchor),to(this,e[o].head||e[o].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),r1(this,rM(this.cm,i,t),n)}}),addSelection:rl(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new rP(to(this,e),to(this,t||e))),r1(this,rM(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var o=e1(this,n[i].from(),n[i].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=e1(this,n[i].from(),n[i].to());!1!==e&&(o=o.join(e||this.lineSeparator())),t[i]=o}return t},replaceSelection:function(e,t,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:rl(function(e,t,n){for(var i=[],o=this.sel,a=0;a<o.ranges.length;a++){var s=o.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:n}}for(var l=t&&"end"!=t&&function(e,t,n){for(var i=[],o=e9(e.first,0),a=o,s=0;s<t.length;s++){var l=t[s],u=rN(l.from,o,a),c=rN(rD(l),o,a);if(o=l.to,a=c,"around"==n){var d=e.sel.ranges[s],f=0>e7(d.head,d.anchor);i[s]=new rP(f?c:u,f?u:c)}else i[s]=new rP(u,u)}return new rO(i,e.sel.primIndex)}(this,i,t),u=i.length-1;u>=0;u--)it(this,i[u]);l?r0(this,l):this.cm&&nQ(this.cm)}),undo:rl(function(){ii(this,"undo")}),redo:rl(function(){ii(this,"redo")}),undoSelection:rl(function(){ii(this,"undo",!0)}),redoSelection:rl(function(){ii(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)!e.done[i].ranges&&++t;for(var o=0;o<e.undone.length;o++)!e.undone[o].ranges&&++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new rU(this.history),rV(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:rY(this.history.done),undone:rY(this.history.undone)}},setHistory:function(e){var t=this.history=new rU(this.history);t.done=rY(e.done.slice(0),null,!0),t.undone=rY(e.undone.slice(0),null,!0)},setGutterMarker:rl(function(e,t,n){return id(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&em(i)&&(e.gutterMarkers=null),!0})}),clearGutter:rl(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&id(t,n,"gutter",function(){return n.gutterMarkers[e]=null,em(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!e6(this,e)||(t=e,!(e=e0(this,e))))return null}else if(null==(t=e4(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:rl(function(e,t,n){return id(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(R(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:rl(function(e,t,n){return id(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[i];if(!o)return!1;if(null==n)e[i]=null;else{var a=o.match(R(n));if(!a)return!1;var s=a.index+a[0].length;e[i]=o.slice(0,a.index)+(a.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:rl(function(e,t,n){var i,o,a;return i=this,o=new im(i,t,n),(a=i.cm)&&o.noHScroll&&(a.display.alignWidgets=!0),id(i,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length,Math.max(0,o.insertAt)),0,o),o.line=e,a&&!tR(i,e)){var n=tB(e)<i.scrollTop;e3(e,e.height+t5(o)),n&&nJ(a,o.height),a.curOp.forceUpdate=!0}return!0}),a&&tZ(a,"lineWidgetAdded",a,o,"number"==typeof e?e:e4(e)),o}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ib(this,to(this,e),to(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ib(this,e=to(this,e),e,n,"bookmark")},findMarksAt:function(e){e=to(this,e);var t=[],n=e0(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=to(this,e),t=to(this,t);var i=[],o=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var l=0;l<s.length;l++){var u=s[l];!(null!=u.to&&o==e.line&&e.ch>=u.to||null==u.from&&o!=e.line||null!=u.from&&o==t.line&&u.from>=t.ch)&&(!n||n(u.marker))&&i.push(u.marker.parent||u.marker)}++o}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(o){var a=o.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),to(this,e9(n,t))},indexFromPos:function(e){var t=(e=to(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new iC(e2(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new iC(e2(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],!function(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=i.find(),a=e.clipPos(o.from),s=e.clipPos(o.to);if(e7(a,s)){var l=ib(e,a,s,i.primary,i.primary.type);i.markers.push(l),l.parent=i}}}(i,iw(this)),i},unlinkDoc:function(e){if(e instanceof or&&(e=e.doc),this.linked){for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),function(e){for(var t=0;t<e.length;t++)!function(t){var n=e[t],i=[n.primary.doc];rV(n.primary.doc,function(e){return i.push(e)});for(var o=0;o<n.markers.length;o++){var a=n.markers[o];-1==ee(i,a.doc)&&(a.parent=null,n.markers.splice(o--,1))}}(t)}(iw(this));break}}if(e.history==this.history){var n=[e.id];rV(e,function(e){return n.push(e.id)},!0),e.history=new rU(null),e.history.done=rY(this.history.done,n),e.history.undone=rY(this.history.undone,n)}},iterLinkedDocs:function(e){rV(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ej(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:rl(function(e){if("rtl"!=e&&(e="ltr"),e!=this.direction){var t;this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&ro(t=this.cm,function(){rG(t),nk(t)})}})}),iC.prototype.eachLine=iC.prototype.iter;var iS=0;function i_(e){var t=this;if(iT(t),!(eM(t,e)||t6(t.display,e))){ek(e),g&&(iS=+new Date);var n=nD(t,e,!0),i=e.dataTransfer.files;if(!(!n||t.isReadOnly()))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,a=Array(o),s=0,l=function(){++s==o&&ra(t,function(){var e={from:n=to(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(e){return null!=e}).join(t.doc.lineSeparator())),origin:"paste"};it(t.doc,e),r0(t.doc,rE(to(t.doc,n),to(t.doc,rD(e))))})()},u=function(e,n){if(t.options.allowDropFileTypes&&-1==ee(t.options.allowDropFileTypes,e.type))return void l();var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(a[n]=e),l()},i.readAsText(e)},c=0;c<i.length;c++)u(i[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var d,f=e.dataTransfer.getData("Text");if(f){if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),r2(t.doc,rE(n,n)),d)for(var p=0;p<d.length;++p)is(t.doc,"",d[p].anchor,d[p].head,"drag");t.replaceSelection(f,"around","paste"),t.display.input.focus()}}catch(e){}}}}function iT(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function iO(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var o=t[i].CodeMirror;o&&n.push(o)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var iP=!1;function iM(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var iE={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},iD=0;iD<10;iD++)iE[iD+48]=iE[iD+96]=String(iD);for(var iI=65;iI<=90;iI++)iE[iI]=String.fromCharCode(iI);for(var ik=1;ik<=12;ik++)iE[ik+111]=iE[ik+63235]="F"+ik;var iN={};function iR(e){var t,n,i,o,a=e.split(/-(?!$)/);e=a[a.length-1];for(var s=0;s<a.length-1;s++){var l=a[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))i=!0;else throw Error("Unrecognized modifier name: "+l)}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function iB(e,t,n,i){var o=(t=ij(t)).call?t.call(e,i):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return iB(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var s=iB(e,t.fallthrough[a],n,i);if(s)return s}}}function iL(e){var t="string"==typeof e?e:iE[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function iF(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function iV(e,t){if(A&&34==e.keyCode&&e.char)return!1;var n=iE[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),iF(n,e,t))}function ij(e){return"string"==typeof e?iN[e]:e}function iG(e,t){for(var n=e.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var a=t(n[o]);i.length&&0>=e7(a.from,el(i).to);){var s=i.pop();if(0>e7(s.from,a.from)){a.from=s.from;break}}i.push(a)}ro(e,function(){for(var t=i.length-1;t>=0;t--)is(e.doc,"",i[t].from,i[t].to,"+delete");nQ(e)})}function iU(e,t,n){var i=ey(e.text,t+n,n);return i<0||i>e.text.length?null:i}function iz(e,t,n){var i=iU(e,t.ch,n);return null==i?null:new e9(t.line,i,n<0?"after":"before")}function iW(e,t,n,i,o){if(e){"rtl"==t.doc.direction&&(o=-o);var a=eC(n,t.doc.direction);if(a){var s,l=o<0?el(a):a[0],u=o<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==t.doc.direction){var c=no(t,n),d=na(t,c,s=o<0?n.text.length-1:0).top;s=eb(function(e){return na(t,c,e).top==d},o<0==(1==l.level)?l.from:l.to-1,s),"before"==u&&(s=iU(n,s,1))}else s=o<0?l.to:l.from;return new e9(i,s,u)}}return new e9(i,o<0?n.text.length:0,o<0?"before":"after")}iN.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},iN.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},iN.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},iN.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},iN.default=M?iN.macDefault:iN.pcDefault;var iH={selectAll:r7,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),en)},killLine:function(e){return iG(e,function(t){if(!t.empty())return{from:t.from(),to:t.to()};var n=e0(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:e9(t.head.line+1,0)}:{from:t.head,to:e9(t.head.line,n)}})},deleteLine:function(e){return iG(e,function(t){return{from:e9(t.from().line,0),to:to(e.doc,e9(t.to().line+1,0))}})},delLineLeft:function(e){return iG(e,function(e){return{from:e9(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return iG(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return iG(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(e9(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(e9(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return iq(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return iK(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){var n,i,o,a;return n=e,i=t.head.line,(a=function(e){for(var t;t=tE(e,!1);)e=t.find(1,!0).line;return e}(o=e0(n.doc,i)))!=o&&(i=e4(a)),iW(!0,n,o,i,-1)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ei)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ei)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?iK(e,t.head):i},ei)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,o=0;o<n.length;o++){var a=n[o].from(),s=Q(e.getLine(a.line),a.ch,i);t.push(es(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return ro(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var o=t[i].head,a=e0(e.doc,o.line).text;if(a){if(o.ch==a.length&&(o=new e9(o.line,o.ch-1)),o.ch>0)o=new e9(o.line,o.ch+1),e.replaceRange(a.charAt(o.ch-1)+a.charAt(o.ch-2),e9(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var s=e0(e.doc,o.line-1).text;s&&(o=new e9(o.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),e9(o.line-1,s.length-1),o,"+transpose"))}}n.push(new rP(o,o))}e.setSelections(n)})},newlineAndIndent:function(e){return ro(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);nQ(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function iq(e,t){var n=e0(e.doc,t),i=tI(n);return i!=n&&(t=e4(i)),iW(!0,e,i,t,1)}function iK(e,t){var n=iq(e,t.line),i=e0(e.doc,n.line),o=eC(i,e.doc.direction);if(!o||0==o[0].level){var a=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=a&&t.ch;return e9(n.line,s?0:a,n.sticky)}return n}function iX(e,t,n){if("string"==typeof t&&!(t=iH[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=et}finally{e.display.shift=i,e.state.suppressEdits=!1}return o}var iY=new $;function iZ(e,t,n,i){var o=e.state.keySeq;if(o){if(iL(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:iY.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),iJ(e,o+" "+t,n,i))return!0}return iJ(e,t,n,i)}function iJ(e,t,n,i){var o=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var o=iB(t,e.state.keyMaps[i],n,e);if(o)return o}return e.options.extraKeys&&iB(t,e.options.extraKeys,n,e)||iB(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&tZ(e,"keyHandled",e,t,n),("handled"==o||"multi"==o)&&(ek(n),nU(e)),!!o}function iQ(e,t){var n=iV(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?iZ(e,"Shift-"+n,t,function(t){return iX(e,t,!0)})||iZ(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return iX(e,t)}):iZ(e,n,t,function(t){return iX(e,t)}))}var i$=null;function i0(e){if((!e.target||e.target==this.display.input.getField())&&(this.curOp.focus=U(K(this)),!eM(this,e))){g&&v<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=iQ(this,e);A&&(i$=n?t:null,!n&&88==t&&!eU&&(M?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),f&&!M&&!n&&46==t&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(B(t,"CodeMirror-crosshair"),eO(document,"keyup",n),eO(document,"mouseover",n))}z(t,"CodeMirror-crosshair"),e_(document,"keyup",n),e_(document,"mouseover",n)}(this)}}function i1(e){16==e.keyCode&&(this.doc.sel.shift=!1),eM(this,e)}function i2(e){if(e.target&&e.target!=this.display.input.getField()||t6(this.display,e)||eM(this,e)||e.ctrlKey&&!e.altKey||M&&e.metaKey)return;var t,n=e.keyCode,i=e.charCode;if(A&&n==i$){i$=null,ek(e);return}if(!(A&&(!e.which||e.which<10)&&iQ(this,e))){var o=String.fromCharCode(null==i?n:i);"\b"!=o&&(t=this,iZ(t,"'"+o+"'",e,function(e){return iX(t,e,!0)})||this.display.input.onKeyPress(e))}}var i3=function(e,t,n){this.time=e,this.pos=t,this.button=n};function i4(e){var t,n=this.display;if(!(eM(this,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,t6(n,e)){y||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));return}if(!i8(this,e)){var i,o,a,s,c,d,f=nD(this,e),p=eF(e),h=f?(t=+new Date,u&&u.compare(t,f,p)?(l=u=null,"triple"):l&&l.compare(t,f,p)?(u=new i3(t,f,p),l=null,"double"):(l=new i3(t,f,p),u=null,"single")):"single";Y(this).focus(),1==p&&this.state.selectingText&&this.state.selectingText(e),f&&(i=this,o=p,a=f,s=h,c=e,d="Click","double"==s?d="Double"+d:"triple"==s&&(d="Triple"+d),iZ(i,iF(d=(1==o?"Left":2==o?"Middle":"Right")+d,c),c,function(e){if("string"==typeof e&&(e=iH[e]),!e)return!1;var t=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),t=e(i,a)!=et}finally{i.state.suppressEdits=!1}return t}))||(1==p?f?function(e,t,n,i){g?setTimeout(Z(nz,e),0):e.curOp.focus=U(K(e));var o,a,s,l,u,c,d,f,p,h,m,b,x=(null==(m=(h=e.getOption("configureMouse"))?h(e,n,i):{}).unit&&(m.unit=(E?i.shiftKey&&i.metaKey:i.altKey)?"rectangle":"single"==n?"char":"double"==n?"word":"line"),(null==m.extend||e.doc.extend)&&(m.extend=e.doc.extend||i.shiftKey),null==m.addNew&&(m.addNew=M?i.metaKey:i.ctrlKey),null==m.moveOnDrag&&(m.moveOnDrag=!(M?i.altKey:i.ctrlKey)),m),w=e.doc.sel;e.options.dragDrop&&eV&&!e.isReadOnly()&&"single"==n&&(b=w.contains(t))>-1&&(0>e7((b=w.ranges[b]).from(),t)||t.xRel>0)&&(e7(b.to(),t)>0||t.xRel<0)?(o=e,a=i,s=t,l=x,u=o.display,c=!1,d=ra(o,function(e){y&&(u.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:nW(o)),eO(u.wrapper.ownerDocument,"mouseup",d),eO(u.wrapper.ownerDocument,"mousemove",f),eO(u.scroller,"dragstart",p),eO(u.scroller,"drop",d),c||(ek(e),l.addNew||rJ(o.doc,s,null,null,l.extend),y&&!C||g&&9==v?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),f=function(e){c=c||Math.abs(a.clientX-e.clientX)+Math.abs(a.clientY-e.clientY)>=10},p=function(){return c=!0},y&&(u.scroller.draggable=!0),o.state.draggingText=d,d.copy=!l.moveOnDrag,e_(u.wrapper.ownerDocument,"mouseup",d),e_(u.wrapper.ownerDocument,"mousemove",f),e_(u.scroller,"dragstart",p),e_(u.scroller,"drop",d),o.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()):function(e,t,n,i){g&&nW(e);var o=e.display,a=e.doc;ek(t);var s,l,u=a.sel,c=u.ranges;if(i.addNew&&!i.extend?s=(l=a.sel.contains(n))>-1?c[l]:new rP(n,n):(s=a.sel.primary(),l=a.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new rP(n,n)),n=nD(e,t,!0,!0),l=-1;else{var d=i5(e,n,i.unit);s=i.extend?rZ(s,d.anchor,d.head,i.extend):d}i.addNew?-1==l?(l=c.length,r1(a,rM(e,c.concat([s]),l),{scroll:!1,origin:"*mouse"})):c.length>1&&c[l].empty()&&"char"==i.unit&&!i.extend?(r1(a,rM(e,c.slice(0,l).concat(c.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=a.sel):r$(a,l,s,er):(l=0,r1(a,new rO([s],0),er),u=a.sel);var f=n,p=o.wrapper.getBoundingClientRect(),h=0;function m(t){e.state.selectingText=!1,h=1/0,t&&(ek(t),o.input.focus()),eO(o.wrapper.ownerDocument,"mousemove",v),eO(o.wrapper.ownerDocument,"mouseup",y),a.history.lastSelOrigin=null}var v=ra(e,function(t){0!==t.buttons&&eF(t)?function t(c){var d=++h,m=nD(e,c,!0,"rectangle"==i.unit);if(m)if(0!=e7(m,f)){e.curOp.focus=U(K(e)),function(t){if(0!=e7(f,t))if(f=t,"rectangle"==i.unit){for(var o=[],c=e.options.tabSize,d=Q(e0(a,n.line).text,n.ch,c),p=Q(e0(a,t.line).text,t.ch,c),h=Math.min(d,p),m=Math.max(d,p),g=Math.min(n.line,t.line),v=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=v;g++){var y=e0(a,g).text,b=eo(y,h,c);h==m?o.push(new rP(e9(g,b),e9(g,b))):y.length>b&&o.push(new rP(e9(g,b),e9(g,eo(y,m,c))))}o.length||o.push(new rP(n,n)),r1(a,rM(e,u.ranges.slice(0,l).concat(o),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x,w=s,A=i5(e,t,i.unit),C=w.anchor;e7(A.anchor,C)>0?(x=A.head,C=tr(w.from(),A.anchor)):(x=A.anchor,C=tn(w.to(),A.head));var S=u.ranges.slice(0);S[l]=function(e,t){var n,i=t.anchor,o=t.head,a=e0(e.doc,i.line);if(0==e7(i,o)&&i.sticky==o.sticky)return t;var s=eC(a);if(!s)return t;var l=ew(s,i.ch,i.sticky),u=s[l];if(u.from!=i.ch&&u.to!=i.ch)return t;var c=l+ +(u.from==i.ch!=(1!=u.level));if(0==c||c==s.length)return t;if(o.line!=i.line)n=(o.line-i.line)*("ltr"==e.doc.direction?1:-1)>0;else{var d=ew(s,o.ch,o.sticky),f=d-l||(o.ch-i.ch)*(1==u.level?-1:1);n=d==c-1||d==c?f<0:f>0}var p=s[c+(n?-1:0)],h=n==(1==p.level),m=h?p.from:p.to,g=h?"after":"before";return i.ch==m&&i.sticky==g?t:new rP(new e9(i.line,m,g),o)}(e,new rP(to(a,C),x)),r1(a,rM(e,S,l),er)}}(m);var g=nY(o,a);(m.line>=g.to||m.line<g.from)&&setTimeout(ra(e,function(){h==d&&t(c)}),150)}else{var v=c.clientY<p.top?-20:20*(c.clientY>p.bottom);v&&setTimeout(ra(e,function(){h==d&&(o.scroller.scrollTop+=v,t(c))}),50)}}(t):m(t)}),y=ra(e,m);e.state.selectingText=y,e_(o.wrapper.ownerDocument,"mousemove",v),e_(o.wrapper.ownerDocument,"mouseup",y)}(e,i,t,x)}(this,f,h,e):eL(e)==n.scroller&&ek(e):2==p?(f&&rJ(this.doc,f),setTimeout(function(){return n.input.focus()},20)):3==p&&(N?this.display.input.onContextMenu(e):nW(this)))}}}function i5(e,t,n){if("char"==n)return new rP(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new rP(e9(t.line,0),to(e.doc,e9(t.line+1,0)));var i=n(e,t);return new rP(i.from,i.to)}function i6(e,t,n,i){if(t.touches)o=t.touches[0].clientX,a=t.touches[0].clientY;else try{o=t.clientX,a=t.clientY}catch(e){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&ek(t);var o,a,s=e.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!eD(e,n))return eR(t);a-=l.top-s.viewOffset;for(var u=0;u<e.display.gutterSpecs.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o){var d=e5(e.doc,a),f=e.display.gutterSpecs[u];return eP(e,n,e,d,f.className,t),eR(t)}}}function i8(e,t){return i6(e,t,"gutterClick",!0)}function i9(e,t){var n,i;t6(e.display,t)||(n=e,i=t,eD(n,"gutterContextMenu")&&i6(n,i,"gutterContextMenu",!1))||!eM(e,t,"contextmenu")&&(N||e.display.input.onContextMenu(t))}function i7(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nd(e)}i3.prototype.compare=function(e,t,n){return this.time+400>e&&0==e7(t,this.pos)&&n==this.button};var oe={toString:function(){return"CodeMirror.Init"}},ot={},on={};function or(e,t){var n,i=this;if(!(this instanceof or))return new or(e,t);this.options=t=t?J(t):{},J(ot,t,!1);var o=t.value;"string"==typeof o?o=new iC(o,t.mode,null,t.lineSeparator,t.direction):t.mode&&(o.modeOption=t.mode),this.doc=o;var a=new or.inputStyles[t.inputStyle](this),s=this.display=new rA(e,o,a,t);for(var l in s.wrapper.CodeMirror=this,i7(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),rt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new $,keySeq:null,specialChars:null},t.autofocus&&!P&&s.input.focus(),g&&v<11&&setTimeout(function(){return i.display.input.reset(!0)},20),function(e){var t=e.display;e_(t.scroller,"mousedown",ra(e,i4)),g&&v<11?e_(t.scroller,"dblclick",ra(e,function(t){if(!eM(e,t)){var n=nD(e,t);if(!(!n||i8(e,t)||t6(e.display,t))){ek(t);var i=e.findWordAt(n);rJ(e.doc,i.anchor,i.head)}}})):e_(t.scroller,"dblclick",function(t){return eM(e,t)||ek(t)}),e_(t.scroller,"contextmenu",function(t){return i9(e,t)}),e_(t.input.getField(),"contextmenu",function(n){t.scroller.contains(n.target)||i9(e,n)});var n,i={end:0};function o(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function a(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}e_(t.scroller,"touchstart",function(o){if(!eM(e,o)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(o)&&!i8(e,o)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==o.touches.length&&(t.activeTouch.left=o.touches[0].pageX,t.activeTouch.top=o.touches[0].pageY)}}),e_(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),e_(t.scroller,"touchend",function(n){var i=t.activeTouch;if(i&&!t6(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var s,l=e.coordsChar(t.activeTouch,"page");s=!i.prev||a(i,i.prev)?new rP(l,l):!i.prev.prev||a(i,i.prev.prev)?e.findWordAt(l):new rP(e9(l.line,0),to(e.doc,e9(l.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),ek(n)}o()}),e_(t.scroller,"touchcancel",o),e_(t.scroller,"scroll",function(){t.scroller.clientHeight&&(n2(e,t.scroller.scrollTop),n4(e,t.scroller.scrollLeft,!0),eP(e,"scroll",e))}),e_(t.scroller,"mousewheel",function(t){return rT(e,t)}),e_(t.scroller,"DOMMouseScroll",function(t){return rT(e,t)}),e_(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){eM(e,t)||eB(t)},over:function(t){if(!eM(e,t)){var n=e,i=t,o=nD(n,i);if(o){var a=document.createDocumentFragment();nj(n,o,a),n.display.dragCursor||(n.display.dragCursor=V("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),n.display.lineSpace.insertBefore(n.display.dragCursor,n.display.cursorDiv)),F(n.display.dragCursor,a)}eB(t)}},start:function(t){var n=e,i=t;if(g&&(!n.state.draggingText||new Date-iS<100))return void eB(i);if(!(eM(n,i)||t6(n.display,i))&&(i.dataTransfer.setData("Text",n.getSelection()),i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setDragImage&&!C)){var o=V("img",null,null,"position: fixed; left: 0; top: 0;");o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",A&&(o.width=o.height=1,n.display.wrapper.appendChild(o),o._top=o.offsetTop),i.dataTransfer.setDragImage(o,0,0),A&&o.parentNode.removeChild(o)}},drop:ra(e,i_),leave:function(t){eM(e,t)||iT(e)}};var s=t.input.getField();e_(s,"keyup",function(t){return i1.call(e,t)}),e_(s,"keydown",ra(e,i0)),e_(s,"keypress",ra(e,i2)),e_(s,"focus",function(t){return nH(e,t)}),e_(s,"blur",function(t){return nq(e,t)})}(this),iP||(e_(window,"resize",function(){null==n&&(n=setTimeout(function(){n=null,iO(iM)},100))}),e_(window,"blur",function(){return iO(nq)}),iP=!0),rr(this),this.curOp.forceUpdate=!0,rj(this,o),t.autofocus&&!P||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&nH(i)},20):nq(this),on)on.hasOwnProperty(l)&&on[l](this,t[l],oe);ry(this),t.finishInit&&t.finishInit(this);for(var u=0;u<oi.length;++u)oi[u](this);ri(this),y&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}or.defaults=ot,or.optionHandlers=on;var oi=[];function oo(e,t,n,i){var o,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?o=td(e,t).state:n="prev");var s=e.options.tabSize,l=e0(a,t),u=Q(l.text,null,s);l.stateAfter&&(l.stateAfter=null);var c,d=l.text.match(/^\s*/)[0];if(i||/\S/.test(l.text)){if("smart"==n&&((c=a.mode.indent(o,l.text.slice(d.length),l.text))==et||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?Q(e0(a,t-1).text,null,s):0:"add"==n?c=u+e.options.indentUnit:"subtract"==n?c=u-e.options.indentUnit:"number"==typeof n&&(c=u+n),c=Math.max(0,c);var f="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/s);h;--h)p+=s,f+="	";if(p<c&&(f+=es(c-p)),f!=d)return is(a,f,e9(t,0),e9(t,d.length),"+input"),l.stateAfter=null,!0;for(var m=0;m<a.sel.ranges.length;m++){var g=a.sel.ranges[m];if(g.head.line==t&&g.head.ch<d.length){var v=e9(t,d.length);r$(a,m,new rP(v,v));break}}}or.defineInitHook=function(e){return oi.push(e)};var oa=null;function os(e,t,n,i,o){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=new Date-200,l="paste"==o||e.state.pasteIncoming>s,u=ej(t),c=null;if(l&&i.ranges.length>1)if(oa&&oa.text.join("\n")==t){if(i.ranges.length%oa.text.length==0){c=[];for(var d=0;d<oa.text.length;d++)c.push(a.splitLines(oa.text[d]))}}else u.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=eu(u,function(e){return[e]}));for(var f=e.curOp.updateInput,p=i.ranges.length-1;p>=0;p--){var h=i.ranges[p],m=h.from(),g=h.to();h.empty()&&(n&&n>0?m=e9(m.line,m.ch-n):e.state.overwrite&&!l?g=e9(g.line,Math.min(e0(a,g.line).text.length,g.ch+el(u).length)):l&&oa&&oa.lineWise&&oa.text.join("\n")==u.join("\n")&&(m=g=e9(m.line,0)));var v={from:m,to:g,text:c?c[p%c.length]:u,origin:o||(l?"paste":e.state.cutIncoming>s?"cut":"+input")};it(e.doc,v),tZ(e,"inputRead",e,v)}t&&!l&&ou(e,t),nQ(e),e.curOp.updateInput<2&&(e.curOp.updateInput=f),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function ol(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&ro(t,function(){return os(t,n,0,null,"paste")}),!0}function ou(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100)&&(!i||n.ranges[i-1].head.line!=o.head.line)){var a=e.getModeAt(o.head),s=!1;if(a.electricChars){for(var l=0;l<a.electricChars.length;l++)if(t.indexOf(a.electricChars.charAt(l))>-1){s=oo(e,o.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(e0(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=oo(e,o.head.line,"smart"));s&&tZ(e,"electricInput",e,o.head.line)}}}function oc(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var o=e.doc.sel.ranges[i].head.line,a={anchor:e9(o,0),head:e9(o+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function od(e,t,n,i){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",i?"on":"off"),e.setAttribute("spellcheck",!!t)}function of(){var e=V("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=V("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return y?e.style.width="1000px":e.setAttribute("wrap","off"),T&&(e.style.border="1px solid black"),t}function op(e,t,n,i,o){var a=t,s=n,l=e0(e,t.line),u=o&&"rtl"==e.direction?-n:n;function c(a){if("codepoint"==i){var s,c,d=l.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(d))s=null;else{var f=n>0?d>=55296&&d<56320:d>=56320&&d<57343;s=new e9(t.line,Math.max(0,Math.min(l.text.length,t.ch+n*(f?2:1))),-n)}}else s=o?function(e,t,n,i){var o,a=eC(t,e.doc.direction);if(!a)return iz(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var s=ew(a,n.ch,n.sticky),l=a[s];if("ltr"==e.doc.direction&&l.level%2==0&&(i>0?l.to>n.ch:l.from<n.ch))return iz(t,n,i);var u=function(e,n){return iU(t,e instanceof e9?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(o=o||no(e,t),nC(e,t,o,n)):{begin:0,end:t.text.length}},d=c("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==l.level){var f=1==l.level==i<0,p=u(n,f?1:-1);if(null!=p&&(f?p<=l.to&&p<=d.end:p>=l.from&&p>=d.begin))return new e9(n.line,p,f?"before":"after")}var h=function(e,t,i){for(var o=function(e,t){return t?new e9(n.line,u(e,1),"before"):new e9(n.line,e,"after")};e>=0&&e<a.length;e+=t){var s=a[e],l=t>0==(1!=s.level),c=l?i.begin:u(i.end,-1);if(s.from<=c&&c<s.to||(c=l?s.from:u(s.to,-1),i.begin<=c&&c<i.end))return o(c,l)}},m=h(s+i,i,d);if(m)return m;var g=i>0?d.end:u(d.begin,-1);return null!=g&&!(i>0&&g==t.text.length)&&(m=h(i>0?0:a.length-1,i,c(g)))?m:null}(e.cm,l,t,n):iz(l,t,n);if(null==s){if(!(!a&&!((c=t.line+u)<e.first)&&!(c>=e.first+e.size)&&(t=new e9(c,t.ch,t.sticky),l=e0(e,c))))return!1;t=iW(o,e.cm,l,t.line,u)}else t=s;return!0}if("char"==i||"codepoint"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var d=null,f="group"==i,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(n<0)||c(!h);h=!1){var m=l.text.charAt(t.ch)||"\n",g=eh(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||h||g||(g="s"),d&&d!=g){n<0&&(n=1,c(),t.sticky="after");break}if(g&&(d=g),n>0&&!c(!h))break}var v=r8(e,t,a,s,!0);return te(a,v)&&(v.hitSide=!0),v}function oh(e,t,n,i){var o,a,s=e.doc,l=t.left;if("page"==i){var u=Math.max(Math.min(e.display.wrapper.clientHeight,Y(e).innerHeight||s(e).documentElement.clientHeight)-.5*n_(e.display),3);a=(n>0?t.bottom:t.top)+n*u}else"line"==i&&(a=n>0?t.bottom+3:t.top-3);for(;(o=nw(e,l,a)).outside;){if(n<0?a<=0:a>=s.height){o.hitSide=!0;break}a+=5*n}return o}var om=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new $,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function og(e,t){var n=ni(e,t.line);if(!n||n.hidden)return null;var i=e0(e.doc,t.line),o=nr(n,i,t.line),a=eC(i,e.doc.direction),s="left";a&&(s=ew(a,t.ch)%2?"right":"left");var l=nl(o.map,t.ch,s);return l.offset="right"==l.collapse?l.end:l.start,l}function ov(e,t){return t&&(e.bad=!0),e}function oy(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return ov(e.clipPos(e9(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var a=e.display.view[o];if(a.node==i)return function(e,t,n){var i=e.text.firstChild,o=!1;if(!t||!G(i,t))return ov(e9(e4(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?el(e.rest):e.line;return ov(e9(e4(a),a.text.length),o)}var s=3==t.nodeType?t:null,l=t;for(!s&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(s=t.firstChild,n&&(n=s.nodeValue.length));l.parentNode!=i;)l=l.parentNode;var u=e.measure,c=u.maps;function d(t,n,i){for(var o=-1;o<(c?c.length:0);o++)for(var a=o<0?u.map:c[o],s=0;s<a.length;s+=3){var l=a[s+2];if(l==t||l==n){var d=e4(o<0?e.line:e.rest[o]),f=a[s]+i;return(i<0||l!=t)&&(f=a[s+ +!!i]),e9(d,f)}}}var f=d(s,l,n);if(f)return ov(f,o);for(var p=l.nextSibling,h=s?s.nodeValue.length-n:0;p;p=p.nextSibling){if(f=d(p,p.firstChild,0))return ov(e9(f.line,f.ch-h),o);h+=p.textContent.length}for(var m=l.previousSibling,g=n;m;m=m.previousSibling){if(f=d(m,m.firstChild,-1))return ov(e9(f.line,f.ch+g),o);g+=m.textContent.length}}(a,t,n)}}om.prototype.init=function(e){var t=this,n=this,i=n.cm,o=n.div=e.lineDiv;function a(e){for(var t=e.target;t;t=t.parentNode){if(t==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(!(!a(e)||eM(i,e))){if(i.somethingSelected())oa={lineWise:!1,text:i.getSelections()},"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=oc(i);oa={lineWise:!0,text:t.text},"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,en),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var s=oa.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var l=of(),u=l.firstChild;od(u),i.display.lineSpace.insertBefore(l,i.display.lineSpace.firstChild),u.value=oa.text.join("\n");var c=U(X(o));H(u),setTimeout(function(){i.display.lineSpace.removeChild(l),c.focus(),c==o&&n.showPrimarySelection()},50)}}o.contentEditable=!0,od(o,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),e_(o,"paste",function(e){!(!a(e)||eM(i,e)||ol(e,i))&&v<=11&&setTimeout(ra(i,function(){return t.updateFromDOM()}),20)}),e_(o,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),e_(o,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),e_(o,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),e_(o,"touchstart",function(){return n.forceCompositionEnd()}),e_(o,"input",function(){t.composing||t.readFromDOMSoon()}),e_(o,"copy",s),e_(o,"cut",s)},om.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},om.prototype.prepareSelection=function(){var e=nV(this.cm,!1);return e.focus=U(X(this.div))==this.div,e},om.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},om.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},om.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),o=n.from(),a=n.to();if(t.display.viewTo==t.display.viewFrom||o.line>=t.display.viewTo||a.line<t.display.viewFrom)return void e.removeAllRanges();var s=oy(t,e.anchorNode,e.anchorOffset),l=oy(t,e.focusNode,e.focusOffset);if(!s||s.bad||!l||l.bad||0!=e7(tr(s,l),o)||0!=e7(tn(s,l),a)){var u=t.display.view,c=o.line>=t.display.viewFrom&&og(t,o)||{node:u[0].measure.map[2],offset:0},d=a.line<t.display.viewTo&&og(t,a);if(!d){var p=u[u.length-1].measure,h=p.maps?p.maps[p.maps.length-1]:p.map;d={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!c||!d)return void e.removeAllRanges();var m,g=e.rangeCount&&e.getRangeAt(0);try{m=i(c.node,c.offset,d.offset,d.node)}catch(e){}m&&(!f&&t.state.focused?(e.collapse(c.node,c.offset),m.collapsed||(e.removeAllRanges(),e.addRange(m))):(e.removeAllRanges(),e.addRange(m)),g&&null==e.anchorNode?e.addRange(g):f&&this.startGracePeriod()),this.rememberSelection()}},om.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},om.prototype.showMultipleSelections=function(e){F(this.cm.display.cursorDiv,e.cursors),F(this.cm.display.selectionDiv,e.selection)},om.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},om.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return G(this.div,t)},om.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&U(X(this.div))==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},om.prototype.blur=function(){this.div.blur()},om.prototype.getField=function(){return this.div},om.prototype.supportsTouch=function(){return!0},om.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):ro(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},om.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},om.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(O&&x&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var n=oy(t,e.anchorNode,e.anchorOffset),i=oy(t,e.focusNode,e.focusOffset);n&&i&&ro(t,function(){r1(t.doc,rE(n,i),en),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},om.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i,o,a=this.cm,s=a.display,l=a.doc.sel.primary(),u=l.from(),c=l.to();if(0==u.ch&&u.line>a.firstLine()&&(u=e9(u.line-1,e0(a.doc,u.line-1).length)),c.ch==e0(a.doc,c.line).text.length&&c.line<a.lastLine()&&(c=e9(c.line+1,0)),u.line<s.viewFrom||c.line>s.viewTo-1)return!1;u.line==s.viewFrom||0==(e=nI(a,u.line))?(t=e4(s.view[0].line),n=s.view[0].node):(t=e4(s.view[e].line),n=s.view[e-1].node.nextSibling);var d=nI(a,c.line);if(d==s.view.length-1?(i=s.viewTo-1,o=s.lineDiv.lastChild):(i=e4(s.view[d+1].line)-1,o=s.view[d+1].node.previousSibling),!n)return!1;for(var f=a.doc.splitLines(function(e,t,n,i,o){var a="",s=!1,l=e.doc.lineSeparator(),u=!1;function c(){s&&(a+=l,u&&(a+=l),s=u=!1)}function d(e){e&&(c(),a+=e)}for(;!function t(n){if(1==n.nodeType){var a=n.getAttribute("cm-text");if(a)return void d(a);var f,p=n.getAttribute("cm-marker");if(p){var h,m=e.findMarks(e9(i,0),e9(o+1,0),(h=+p,function(e){return e.id==h}));m.length&&(f=m[0].find(0))&&d(e1(e.doc,f.from,f.to).join(l));return}if("false"!=n.getAttribute("contenteditable")){var g=/^(pre|div|p|li|table|br)$/i.test(n.nodeName);if(/^br$/i.test(n.nodeName)||0!=n.textContent.length){g&&c();for(var v=0;v<n.childNodes.length;v++)t(n.childNodes[v]);/^(pre|p)$/i.test(n.nodeName)&&(u=!0),g&&(s=!0)}}}else 3==n.nodeType&&d(n.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}(t),t!=n;)t=t.nextSibling,u=!1;return a}(a,n,o,t,i)),p=e1(a.doc,e9(t,0),e9(i,e0(a.doc,i).text.length));f.length>1&&p.length>1;)if(el(f)==el(p))f.pop(),p.pop(),i--;else if(f[0]==p[0])f.shift(),p.shift(),t++;else break;for(var h=0,m=0,g=f[0],v=p[0],y=Math.min(g.length,v.length);h<y&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var b=el(f),x=el(p),w=Math.min(b.length-(1==f.length?h:0),x.length-(1==p.length?h:0));m<w&&b.charCodeAt(b.length-m-1)==x.charCodeAt(x.length-m-1);)++m;if(1==f.length&&1==p.length&&t==u.line)for(;h&&h>u.ch&&b.charCodeAt(b.length-m-1)==x.charCodeAt(x.length-m-1);)h--,m++;f[f.length-1]=b.slice(0,b.length-m).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var A=e9(t,h),C=e9(i,p.length?el(p).length-m:0);if(f.length>1||f[0]||e7(A,C))return is(a.doc,f,A,C,"+input"),!0},om.prototype.ensurePolled=function(){this.forceCompositionEnd()},om.prototype.reset=function(){this.forceCompositionEnd()},om.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},om.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(!e.composing.done)return;else e.composing=null;e.updateFromDOM()},80))},om.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&ro(this.cm,function(){return nk(e.cm)})},om.prototype.setUneditable=function(e){e.contentEditable="false"},om.prototype.onKeyPress=function(e){0!=e.charCode&&!this.composing&&(e.preventDefault(),this.cm.isReadOnly()||ra(this.cm,os)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},om.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},om.prototype.onContextMenu=function(){},om.prototype.resetPosition=function(){},om.prototype.needsContentAttribute=!0;var ob=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new $,this.hasSelection=!1,this.composing=null,this.resetting=!1};ob.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var o=this.textarea;function a(e){if(!eM(i,e)){if(i.somethingSelected())oa={lineWise:!1,text:i.getSelections()};else{if(!i.options.lineWiseCopyCut)return;var t=oc(i);oa={lineWise:!0,text:t.text},"cut"==e.type?i.setSelections(t.ranges,null,en):(n.prevInput="",o.value=t.text.join("\n"),H(o))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),T&&(o.style.width="0px"),e_(o,"input",function(){g&&v>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),e_(o,"paste",function(e){eM(i,e)||ol(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())}),e_(o,"cut",a),e_(o,"copy",a),e_(e.scroller,"paste",function(t){if(!(t6(e,t)||eM(i,t))){if(!o.dispatchEvent){i.state.pasteIncoming=+new Date,n.focus();return}var a=new Event("paste");a.clipboardData=t.clipboardData,o.dispatchEvent(a)}}),e_(e.lineSpace,"selectstart",function(t){t6(e,t)||ek(t)}),e_(o,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),e_(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},ob.prototype.createField=function(e){this.wrapper=of(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;od(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},ob.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ob.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=nV(e);if(e.options.moveInputWithCursor){var o=ny(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+s.left-a.left))}return i},ob.prototype.showSelection=function(e){var t=this.cm.display;F(t.cursorDiv,e.cursors),F(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ob.prototype.reset=function(e){if(!this.contextMenuPending&&(!this.composing||!e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&H(this.textarea),g&&v>=9&&(this.hasSelection=n)}else!e&&(this.prevInput=this.textarea.value="",g&&v>=9&&(this.hasSelection=null));this.resetting=!1}},ob.prototype.getField=function(){return this.textarea},ob.prototype.supportsTouch=function(){return!1},ob.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!P||U(X(this.textarea))!=this.textarea))try{this.textarea.focus()}catch(e){}},ob.prototype.blur=function(){this.textarea.blur()},ob.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ob.prototype.receivedFocus=function(){this.slowPoll()},ob.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ob.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},ob.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||eG(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=n.value;if(o==i&&!t.somethingSelected())return!1;if(g&&v>=9&&this.hasSelection===o||M&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=o.charCodeAt(0);if(8203!=a||i||(i=""),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var s=0,l=Math.min(i.length,o.length);s<l&&i.charCodeAt(s)==o.charCodeAt(s);)++s;return ro(t,function(){os(t,o.slice(s),i.length-s,null,e.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ob.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ob.prototype.onKeyPress=function(){g&&v>=9&&(this.hasSelection=null),this.fastPoll()},ob.prototype.onContextMenu=function(e){var t,n=this,i=n.cm,o=i.display,a=n.textarea;n.contextMenuPending&&n.contextMenuPending();var s=nD(i,e),l=o.scroller.scrollTop;if(s&&!A){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(s)&&ra(i,r1)(i.doc,rE(s),en);var u=a.style.cssText,c=n.wrapper.style.cssText,d=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(g?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",y&&(t=a.ownerDocument.defaultView.scrollY),o.input.focus(),y&&a.ownerDocument.defaultView.scrollTo(null,t),o.input.reset(),i.somethingSelected()||(a.value=n.prevInput=" "),n.contextMenuPending=h,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),g&&v>=9&&p(),N){eB(e);var f=function(){eO(window,"mouseup",f),setTimeout(h,20)};e_(window,"mouseup",f)}else setTimeout(h,50)}function p(){if(null!=a.selectionStart){var e=i.somethingSelected(),t=""+(e?a.value:"");a.value="",a.value=t,n.prevInput=e?"":"",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function h(){if(n.contextMenuPending==h&&(n.contextMenuPending=!1,n.wrapper.style.cssText=c,a.style.cssText=u,g&&v<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart)){(!g||g&&v<9)&&p();var e=0,t=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&""==n.prevInput?ra(i,r7)(i):e++<10?o.detectingSelectAll=setTimeout(t,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(t,200)}}},ob.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},ob.prototype.setUneditable=function(){},ob.prototype.needsContentAttribute=!1;var ox=or.optionHandlers;function ow(e,t,n,i){or.defaults[e]=t,n&&(ox[e]=i?function(e,t,i){i!=oe&&n(e,t,i)}:n)}or.defineOption=ow,or.Init=oe,ow("value","",function(e,t){return e.setValue(t)},!0),ow("mode",null,function(e,t){e.doc.modeOption=t,rR(e)},!0),ow("indentUnit",2,rR,!0),ow("indentWithTabs",!1),ow("smartIndent",!0),ow("tabSize",4,function(e){rB(e),nd(e),nk(e)},!0),ow("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var o=0;;){var a=e.text.indexOf(t,o);if(-1==a)break;o=a+t.length,n.push(e9(i,a))}i++});for(var o=n.length-1;o>=0;o--)is(e.doc,t,n[o],e9(n[o].line,n[o].ch+t.length))}}),ow("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=RegExp(t.source+(t.test("	")?"":"|	"),"g"),n!=oe&&e.refresh()}),ow("specialCharPlaceholder",function(e){var t=V("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){return e.refresh()},!0),ow("electricChars",!0),ow("inputStyle",P?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),ow("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),ow("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),ow("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),ow("rtlMoveVisually",!D),ow("wholeLineUpdateBefore",!0),ow("theme","default",function(e){i7(e),rw(e)},!0),ow("keyMap","default",function(e,t,n){var i=ij(t),o=n!=oe&&ij(n);o&&o.detach&&o.detach(e,i),i.attach&&i.attach(e,o||null)}),ow("extraKeys",null),ow("configureMouse",null),ow("lineWrapping",!1,function(e){e.options.lineWrapping?(z(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(B(e.display.wrapper,"CodeMirror-wrap"),tF(e)),nE(e),nk(e),nd(e),setTimeout(function(){return n9(e)},100)},!0),ow("gutters",[],function(e,t){e.display.gutterSpecs=rb(t,e.options.lineNumbers),rw(e)},!0),ow("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?nP(e.display)+"px":"0",e.refresh()},!0),ow("coverGutterNextToScrollbar",!1,function(e){return n9(e)},!0),ow("scrollbarStyle","native",function(e){rt(e),n9(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),ow("lineNumbers",!1,function(e,t){e.display.gutterSpecs=rb(e.options.gutters,t),rw(e)},!0),ow("firstLineNumber",1,rw,!0),ow("lineNumberFormatter",function(e){return e},rw,!0),ow("showCursorWhenSelecting",!1,nF,!0),ow("resetSelectionOnContextMenu",!0),ow("lineWiseCopyCut",!0),ow("pasteLinesPerSelection",!0),ow("selectionsMayTouch",!1),ow("readOnly",!1,function(e,t){"nocursor"==t&&(nq(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),ow("screenReaderLabel",null,function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)}),ow("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),ow("dragDrop",!0,function(e,t,n){if(!t!=!(n&&n!=oe)){var i=e.display.dragFunctions,o=t?e_:eO;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}),ow("allowDropFileTypes",null),ow("cursorBlinkRate",530),ow("cursorScrollMargin",0),ow("cursorHeight",1,nF,!0),ow("singleCursorHeightPerLine",!0,nF,!0),ow("workTime",100),ow("workDelay",100),ow("flattenSpans",!0,rB,!0),ow("addModeClass",!1,rB,!0),ow("pollInterval",100),ow("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),ow("historyEventDelay",1250),ow("viewportMargin",10,function(e){return e.refresh()},!0),ow("maxHighlightLength",1e4,rB,!0),ow("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),ow("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),ow("autofocus",null),ow("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),ow("phrases",null),t=or.optionHandlers,n=or.helpers={},or.prototype={constructor:or,focus:function(){Y(this).focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,o=i[e];(i[e]!=n||"mode"==e)&&(i[e]=n,t.hasOwnProperty(e)&&ra(this,t[e])(this,n,o),eP(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](ij(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:rs(function(e,t){var n=e.token?e:or.getMode(this.options,e);if(n.startState)throw Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,o=n(t);i<e.length&&n(e[i])<=o;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:n,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,nk(this)}),removeOverlay:rs(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e){t.splice(n,1),this.state.modeGen++,nk(this);return}}}),indentLine:rs(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),e6(this.doc,e)&&oo(this,e,t,n)}),indentSelection:rs(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var o=t[i];if(o.empty())o.head.line>n&&(oo(this,o.head.line,e,!0),n=o.head.line,i==this.doc.sel.primIndex&&nQ(this));else{var a=o.from(),s=o.to(),l=Math.max(n,a.line);n=Math.min(this.lastLine(),s.line-!s.ch)+1;for(var u=l;u<n;++u)oo(this,u,e);var c=this.doc.sel.ranges;0==a.ch&&t.length==c.length&&c[i].from().ch>0&&r$(this.doc,i,new rP(a,c[i].to()),en)}}}),getTokenAt:function(e,t){return tg(this,e,t)},getLineTokens:function(e,t){return tg(this,e9(e),t,!0)},getTokenTypeAt:function(e){e=to(this.doc,e);var t,n=tc(this,e0(this.doc,e.line)),i=0,o=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var s=i+o>>1;if((s?n[2*s-1]:0)>=a)o=s;else if(n[2*s+1]<a)i=s+1;else{t=n[2*s+2];break}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?or.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var o=n[t],a=this.getModeAt(e);if("string"==typeof a[t])o[a[t]]&&i.push(o[a[t]]);else if(a[t])for(var s=0;s<a[t].length;s++){var l=o[a[t][s]];l&&i.push(l)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(a,this)&&-1==ee(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var n=this.doc;return td(this,(e=ti(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return ny(this,null==e?n.head:"object"==typeof e?to(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return nv(this,to(this.doc,e),t||"page")},coordsChar:function(e,t){return nw(this,(e=ng(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=ng(this,{top:e,left:0},t||"page").top,e5(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,o=!1;if("number"==typeof e){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,o=!0),i=e0(this.doc,e)}else i=e;return nm(this,i,{top:0,left:0},t||"page",n||o).top+(o?this.doc.height-tB(i):0)},defaultTextHeight:function(){return n_(this.display)},defaultCharWidth:function(){return nT(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,o){var a,s=this.display,l=(e=ny(this,to(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==i)l=e.top;else if("above"==i||"near"==i){var c=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(l=e.bottom),u+t.offsetWidth>d&&(u=d-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==o?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?u=0:"middle"==o&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(null!=(a=nZ(this,{left:u,top:l,right:u+t.offsetWidth,bottom:l+t.offsetHeight})).scrollTop&&n2(this,a.scrollTop),null!=a.scrollLeft&&n4(this,a.scrollLeft))},triggerOnKeyDown:rs(i0),triggerOnKeyPress:rs(i2),triggerOnKeyUp:i1,triggerOnMouseDown:rs(i4),execCommand:function(e){if(iH.hasOwnProperty(e))return iH[e].call(null,this)},triggerElectric:rs(function(e){ou(this,e)}),findPosH:function(e,t,n,i){var o=1;t<0&&(o=-1,t=-t);for(var a=to(this.doc,e),s=0;s<t&&!(a=op(this.doc,a,o,n,i)).hitSide;++s);return a},moveH:rs(function(e,t){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?op(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()},ei)}),deleteH:rs(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):iG(this,function(n){var o=op(i,n.head,e,t,!1);return e<0?{from:o,to:n.head}:{from:n.head,to:o}})}),findPosV:function(e,t,n,i){var o=1,a=i;t<0&&(o=-1,t=-t);for(var s=to(this.doc,e),l=0;l<t;++l){var u=ny(this,s,"div");if(null==a?a=u.left:u.left=a,(s=oh(this,u,o,n)).hitSide)break}return s},moveV:rs(function(e,t){var n=this,i=this.doc,o=[],a=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(a)return e<0?s.from():s.to();var l=ny(n,s.head,"div");null!=s.goalColumn&&(l.left=s.goalColumn),o.push(l.left);var u=oh(n,l,e,t);return"page"==t&&s==i.sel.primary()&&nJ(n,nv(n,u,"div").top-l.top),u},ei),o.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=o[s]}),findWordAt:function(e){var t=e0(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var o=this.getHelper(e,"wordChars");("before"==e.sticky||i==t.length)&&n?--n:++i;for(var a=t.charAt(n),s=eh(a,o)?function(e){return eh(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!eh(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new rP(e9(e.line,n),e9(e.line,i))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),eP(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==U(K(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:rs(function(e,t){n$(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ne(this)-this.display.barHeight,width:e.scrollWidth-ne(this)-this.display.barWidth,clientHeight:nn(this),clientWidth:nt(this)}},scrollIntoView:rs(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:e9(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line){var n;n=e,n0(this),this.curOp.scrollToPos=n}else n1(this,e.from,e.to,e.margin)}),setSize:rs(function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&nc(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(e){if(e.widgets){for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){nN(n,o,"widget");break}}++o}),this.curOp.forceUpdate=!0,eP(this,"refresh",this)}),operation:function(e){return ro(this,e)},startOperation:function(){return rr(this)},endOperation:function(){return ri(this)},refresh:rs(function(){var e=this.display.cachedTextHeight;nk(this),this.curOp.forceUpdate=!0,nd(this),n$(this,this.doc.scrollLeft,this.doc.scrollTop),rm(this.display),(null==e||Math.abs(e-n_(this.display))>.5||this.options.lineWrapping)&&nE(this),eP(this,"refresh",this)}),swapDoc:rs(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),rj(this,e),nd(this),this.display.input.reset(),n$(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,tZ(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},eI(or),or.registerHelper=function(e,t,i){n.hasOwnProperty(e)||(n[e]=or[e]={_global:[]}),n[e][t]=i},or.registerGlobalHelper=function(e,t,i,o){or.registerHelper(e,t,o),n[e]._global.push({pred:i,val:o})};var oA="iter insert remove copy getEditor constructor".split(" ");for(var oC in iC.prototype)iC.prototype.hasOwnProperty(oC)&&0>ee(oA,oC)&&(or.prototype[oC]=function(e){return function(){return e.apply(this.doc,arguments)}}(iC.prototype[oC]));return eI(iC),or.inputStyles={textarea:ob,contenteditable:om},or.defineMode=function(e){or.defaults.mode||"null"==e||(or.defaults.mode=e),eq.apply(this,arguments)},or.defineMIME=function(e,t){eH[e]=t},or.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),or.defineMIME("text/plain","null"),or.defineExtension=function(e,t){or.prototype[e]=t},or.defineDocExtension=function(e,t){iC.prototype[e]=t},or.fromTextArea=function(e,t){if((t=t?J(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n,i=U(X(e));t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function o(){e.value=l.getValue()}if(e.form&&(e_(e.form,"submit",o),!t.leaveSubmitMethodAlone)){var a=e.form;n=a.submit;try{var s=a.submit=function(){o(),a.submit=n,a.submit(),a.submit=s}}catch(e){}}t.finishInit=function(i){i.save=o,i.getTextArea=function(){return e},i.toTextArea=function(){i.toTextArea=isNaN,o(),e.parentNode.removeChild(i.getWrapperElement()),e.style.display="",e.form&&(eO(e.form,"submit",o),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=n))}},e.style.display="none";var l=or(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l},or.off=eO,or.on=e_,or.wheelEventPixels=function(e){var t=r_(e);return t.x*=rS,t.y*=rS,t},or.Doc=iC,or.splitLines=ej,or.countColumn=Q,or.findColumn=eo,or.isWordChar=ep,or.Pass=et,or.signal=eP,or.Line=tV,or.changeEnd=rD,or.scrollbarModel=re,or.Pos=e9,or.cmpPos=e7,or.modes=eW,or.mimeModes=eH,or.resolveMode=eK,or.getMode=eX,or.modeExtensions=eY,or.extendMode=function(e,t){J(t,eY.hasOwnProperty(e)?eY[e]:eY[e]={})},or.copyState=eZ,or.startState=eQ,or.innerMode=eJ,or.commands=iH,or.keyMap=iN,or.keyName=iV,or.isModifierKey=iL,or.lookupKey=iB,or.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var o=eu(n.split(" "),iR),a=0;a<o.length;a++){var s=void 0,l=void 0;a==o.length-1?(l=o.join(" "),s=i):(l=o.slice(0,a+1).join(" "),s="...");var u=t[l];if(u){if(u!=s)throw Error("Inconsistent bindings for "+l)}else t[l]=s}delete e[n]}for(var c in t)e[c]=t[c];return e},or.StringStream=e$,or.SharedTextMarker=ix,or.TextMarker=iy,or.LineWidget=im,or.e_preventDefault=ek,or.e_stopPropagation=eN,or.e_stop=eB,or.addClass=z,or.contains=G,or.rmClass=B,or.keyNames=iE,or.version="5.65.20",or}()},5245(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2w4LDBsMCwybC04LDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},5264(e,t,n){var i=n(8899),o=n(4128),a=n(8336),s=n(5933).registerAnnotation,l=n(7150),u=n(4341),c=n(8795).annotation,d=n(8795).state,f=n(8795).annotationActionOwner,p=function(e,t){"use strict";if(!(this instanceof p))return new p(e,t);(e=u.deepMerge({},this.constructor.defaults,e)).corners=e.corners||e.coordinates||[],delete e.coordinates,c.call(this,t||"rectangle",e);var n=this,i=this.actions,s=this.processEditAction;this.actions=function(e){return(e||(e=n.state()),e===d.create)?[{action:a.annotation_rectangle,name:"rectangle create",owner:f,input:"left",selectionRectangle:!0,selectionConstraint:this._selectionConstraint}]:i.apply(n,arguments)},this.processAction=function(e){var t=n.layer();if(n.state()===d.create&&t&&e.event===o.actionselection&&e.state.action===a.annotation_rectangle){var i=t.map(),s=[i.displayToGcs({x:e.lowerLeft.x,y:e.lowerLeft.y},null),i.displayToGcs({x:e.lowerLeft.x,y:e.upperRight.y},null),i.displayToGcs({x:e.upperRight.x,y:e.upperRight.y},null),i.displayToGcs({x:e.upperRight.x,y:e.lowerLeft.y},null)];return(this._selectionConstraint&&e.mouse&&e.state.origin&&this._selectionConstraint(e.mouse.mapgcs,e.state.origin.mapgcs,s),t.displayDistance(s[0],null,s[1],null)*t.displayDistance(s[0],null,s[3],null)<.01)?"remove":(n.options("corners",s),n.state(d.done),"done")}},this.features=function(){var e,t=n.options(),i=n.state();return e=[],t.corners&&t.corners.length>=4&&(e=[{polygon:{polygon:t.corners,style:n.styleForState(i)}}]),i===d.edit&&n._addEditHandles(e,t.corners),e},this.toPolygonList=function(e){return n._coordinates().length<3?[]:[[n._coordinates().map(function(e){return[e.x,e.y]})]]},this._coordinates=function(e){return e&&e.length>=4&&n.options("corners",e.slice(0,4)),n.options("corners")},this._coordinateOption="corners",this._geojsonCoordinates=function(e){var t=n.coordinates(e);if(t&&n.state()!==d.create&&!(t.length<4)){for(var i=[],o=0;o<4;o+=1)i.push([t[o].x,t[o].y]);return i.push([t[0].x,t[0].y]),[i]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._setCornersFromMouse=function(e,t){var i=n.layer().map(),o=i.gcsToDisplay({x:e[0].x,y:e[0].y},null),a=i.gcsToDisplay(t.mapgcs,null),s={x:a.x,y:o.y},l={x:o.x,y:a.y};e[2]=Object.assign({},t.mapgcs),e[1]=i.displayToGcs(s,null),e[3]=i.displayToGcs(l,null),this._selectionConstraint&&this._selectionConstraint(t.mapgcs,e[0],e)},this.mouseMove=function(e){if(n.state()===d.create){var t=n.options("corners");if(t.length)return n._setCornersFromMouse(t,e),!0}},this.mouseClick=function(e){var t=n.layer();if(n.state()===d.create&&t&&(e.buttonsDown.left||e.buttonsDown.right)){var i=n.options("corners");if(!e.buttonsDown.right||i.length){if(e.handled=!0,i.length)return(n._setCornersFromMouse(i,e),t.displayDistance(i[0],null,i[1],null)*t.displayDistance(i[0],null,i[3],null)<.01)?"remove":(n.state(d.done),"done");if(e.buttonsDown.left)return i.push(Object.assign({},e.mapgcs)),i.push(Object.assign({},e.mapgcs)),i.push(Object.assign({},e.mapgcs)),i.push(Object.assign({},e.mapgcs)),!0}}},this.processEditAction=function(e){var t,i,o,a,l,u=n._editHandle.startCoordinates,c={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},d=n._editHandle.handle.type,f=n._editHandle.handle.index,p=[Math.atan2(u[1].y-u[0].y,u[1].x-u[0].x),Math.atan2(u[2].y-u[1].y,u[2].x-u[1].x),Math.atan2(u[3].y-u[2].y,u[3].x-u[2].x),Math.atan2(u[0].y-u[3].y,u[0].x-u[3].x)];switch(!p[0]&&!p[1]&&!p[2]&&!p[3]&&(p[1]=Math.PI/2,p[2]=Math.PI,p[3]=-Math.PI/2),!p[0]&&!p[2]&&(p[0]=p[1]-Math.PI/2,p[2]=p[1]+Math.PI/2),!p[1]&&!p[3]&&(p[1]=p[2]-Math.PI/2,p[3]=p[2]+Math.PI/2),d){case"vertex":return t=u.map(function(e){return{x:e.x,y:e.y}}),a=p[(f+1)%4],i={x:(c.x*Math.cos(a)+c.y*Math.sin(a))*Math.cos(a),y:(c.y*Math.sin(a)+c.x*Math.cos(a))*Math.sin(a)},l=p[f],o={x:(c.x*Math.cos(l)+c.y*Math.sin(l))*Math.cos(l),y:(c.y*Math.sin(l)+c.x*Math.cos(l))*Math.sin(l)},t[f].x+=c.x,t[f].y+=c.y,t[(f+1)%4].x+=i.x,t[(f+1)%4].y+=i.y,t[(f+3)%4].x+=o.x,t[(f+3)%4].y+=o.y,this._selectionConstraint&&(t=this._selectionConstraint(e.mouse.mapgcs,e.state.origin.mapgcs,t,"vertex",p,f).corners),n.options("corners",t),!0;case"edge":return t=u.map(function(e){return{x:e.x,y:e.y}}),a=p[(f+1)%4],c={x:(c.x*Math.cos(a)+c.y*Math.sin(a))*Math.cos(a),y:(c.y*Math.sin(a)+c.x*Math.cos(a))*Math.sin(a)},t[f].x+=c.x,t[f].y+=c.y,t[(f+1)%4].x+=c.x,t[(f+1)%4].y+=c.y,this._selectionConstraint&&(t=this._selectionConstraint(e.mouse.mapgcs,e.state.origin.mapgcs,t,"edge",p,f).corners),n.options("corners",t),!0}return s.apply(n,arguments)}};i(p,c),p.defaults=Object.assign({},c.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(e){return e.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var h={};h[l.capabilities.feature]=!0,s("rectangle",p,h),e.exports=p},5269(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9812),s=n(4128),l=n(4341),u=function(e){"use strict";if(!(this instanceof u))return new u(e);a.call(this,e),n(6062).call(this);var t,i,o=this._exit,c=this;return this.pointSearch=function(e,n){if(t){var i=t.pointSearch(e,n);if(!c.m_info)return this._pointSearchProcess(i);if(1===i.index.length&&i.extra&&i.extra[i.index[0]].basis){var o,a,s,l=i.extra[i.index[0]].basis;if(o=Math.floor(l.x*c.m_info.width),a=Math.floor(l.y*c.m_info.height),o>=0&&o<c.m_info.width&&a>=0&&a<c.m_info.height)return{index:[s=c.m_info.indices[a*c.m_info.width+o]],found:[c.data()[s]]}}}return{index:[],found:[]}},this._preparePixelmap=function(e){var t,n,i,o=e||c;if(e&&e.m_info)return e.m_info;if(l.isReadyImage(o.m_srcImage)){for(o.m_info={width:o.m_srcImage.naturalWidth,height:o.m_srcImage.naturalHeight,canvas:document.createElement("canvas")},o.m_info.canvas.width=o.m_info.width,o.m_info.canvas.height=o.m_info.height,o.m_info.context=o.m_info.canvas.getContext("2d"),o.m_info.context.drawImage(o.m_srcImage,0,0),o.m_info.imageData=o.m_info.context.getImageData(0,0,o.m_info.canvas.width,o.m_info.canvas.height),i=o.m_info.imageData.data,o.m_info.indices=Array(i.length/4),o.m_info.area=i.length/4,o.m_info.mappedColors={},t=0;t<i.length;t+=4)n=i[t]+(i[t+1]<<8)+(i[t+2]<<16),o.m_info.indices[t/4]=n,o.m_info.mappedColors[n]||(o.m_info.mappedColors[n]={first:t/4}),o.m_info.mappedColors[n].last=t/4;return o.m_info}},this._computePixelmap=function(e){var n,o,a,l,u,d,f,p,h,m,g=e||c,v=c.data()||[],y=c.style.get("color"),b=-1;if(i||!t||e||(t._hookRenderImageQuads=function(e){e.forEach(function(e){e.m_srcImage?c.buildTime().timestamp()>e._build&&(c._computePixelmap(e),e.image=e.m_info.context.canvas,e._build=c.buildTime().timestamp()):(e.m_srcImage=e.image,c._computePixelmap(e),e.image=e.m_info.context.canvas,e._build=c.buildTime().timestamp())})},i=!0),!g.m_info){if(c.indexModified(void 0,"clear"),!c._preparePixelmap(e))return;m=!0}for(o in c.indexModified(void 0,"clear"),f=g.m_info.mappedColors,p=g.m_info.area,f)f.hasOwnProperty(o)&&(l=[255*((l=y(v[o],+o)||{}).r||0),255*(l.g||0),255*(l.b||0),void 0===l.a?255:255*l.a],f[o].update=!f[o].color||f[o].color[0]!==l[0]||f[o].color[1]!==l[1]||f[o].color[2]!==l[2]||f[o].color[3]!==l[3],f[o].update&&(f[o].color=l,p=Math.min(f[o].first,p),b=Math.max(f[o].last,b)));if(!(p>=b)){for(u=g.m_info.imageData.data,d=g.m_info.indices,n=p;n<=b;n+=1)(o=d[n])!==a&&(a=o,l=f[o].color,h=f[o].update),h&&(u[4*n]=l[0],u[4*n+1]=l[1],u[4*n+2]=l[2],u[4*n+3]=l[3]);g.m_info.context.putImageData(g.m_info.imageData,0,0,0,Math.floor(p/g.m_info.width),g.m_info.width,Math.ceil((b+1)/g.m_info.width)),!e&&(t||(t=c.layer().createFeature("quad",{selectionAPI:!1,gcs:c.gcs(),visible:c.visible(void 0,!0)}),c.dependentFeatures([t]),t.style({image:c.m_info.canvas,position:c.style.get("position")}).data([{}]).draw(),i=!0),m&&c.geoTrigger(s.pixelmap.prepared,{pixelmap:c}))}},this._exit=function(){return t&&c.layer()&&(c.layer().deleteFeature(t),t=null,c.dependentFeatures([])),o(),c},e.quadFeature&&(t=e.quadFeature),this._init(e),this};i(u,a);var c={};c[a.capabilities.lookup]=!0,o("canvas","pixelmap",u,c),e.exports=u},5341(e,t,n){"use strict";n.d(t,{A:()=>C});var i=n(9130),o=n(5350),a=n(4334),s=n(7535);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["3857","900913","3785","102113"];let c=function(e){if("string"==typeof e){if(e in i.A)return i.A[e];if(0!==e.indexOf("+")&&-1!==e.indexOf("[")||"object"===l(e)&&!("srsCode"in e)){var t=(0,o.A)(e);if(function(e){var t=(0,s.A)(e,"authority");if(t){var n=(0,s.A)(t,"epsg");return n&&u.indexOf(n)>-1}}(t))return i.A["EPSG:3857"];var n=function(e){var t=(0,s.A)(e,"extension");if(t)return(0,s.A)(t,"proj4")}(t);return n?(0,a.A)(n):t}if("+"===e[0])return(0,a.A)(e)}else if(!("projName"in e))return(0,o.A)(e);else return e};function d(e,t){var n,i;if(e=e||{},!t)return e;for(i in t)void 0!==(n=t[i])&&(e[i]=n);return e}var f=n(4384),p=n(384);let h={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};var m=h.WGS84,g={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var v in g){var y=g[v];y.datumName&&(g[y.datumName]=y)}let b=function(e,t,n,i,o,a,s){var l={};return void 0===e||"none"===e?l.datum_type=p.A1:l.datum_type=p.xK,t&&(l.datum_params=t.map(parseFloat),(0!==l.datum_params[0]||0!==l.datum_params[1]||0!==l.datum_params[2])&&(l.datum_type=p.a8),l.datum_params.length>3&&(0!==l.datum_params[3]||0!==l.datum_params[4]||0!==l.datum_params[5]||0!==l.datum_params[6])&&(l.datum_type=p.Y$,l.datum_params[3]*=p._3,l.datum_params[4]*=p._3,l.datum_params[5]*=p._3,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=p.G9,l.grids=s),l.a=n,l.b=i,l.es=o,l.ep2=a,l};var x=n(2945);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(this instanceof A))return new A(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(e){if(e)throw e};var n,i,o,a,l,u,f,v=c(e);if("object"!==w(v))return void t("Could not parse to valid json: "+e);var y=A.projections.get(v.projName);if(!y)return void t("Could not get projection name from: "+e);if(v.datumCode&&"none"!==v.datumCode){var C=(0,s.A)(g,v.datumCode);C&&(v.datum_params=v.datum_params||(C.towgs84?C.towgs84.split(","):null),v.ellps=C.ellipse,v.datumName=C.datumName?C.datumName:v.datumCode)}v.k0=v.k0||1,v.axis=v.axis||"enu",v.ellps=v.ellps||"wgs84",v.lat1=v.lat1||v.lat0;var S=function(e,t,n,i,o){if(!e){var a=(0,s.A)(h,i);a||(a=m),e=a.a,t=a.b,n=a.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<p.H0)&&(o=!0,t=e),{a:e,b:t,rf:n,sphere:o}}(v.a,v.b,v.rf,v.ellps,v.sphere),_=(n=S.a,i=S.b,S.rf,o=v.R_A,u=((a=n*n)-(l=i*i))/a,f=0,o?(n*=1-u*(p.bA+u*(p.Q1+u*p.ej)),a=n*n,u=0):f=Math.sqrt(u),{es:u,e:f,ep2:(a-l)/l}),T=(0,x.f)(v.nadgrids),O=v.datum||b(v.datumCode,v.datum_params,S.a,S.b,_.es,_.ep2,T);d(this,v),d(this,y),this.a=S.a,this.b=S.b,this.rf=S.rf,this.sphere=S.sphere,this.es=_.es,this.e=_.e,this.ep2=_.ep2,this.datum=O,"init"in this&&"function"==typeof this.init&&this.init(),t(null,this)}A.projections=f.Ay,A.projections.start();let C=A},5350(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{A:()=>L});var o,a,s=(o=function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")},a=[{key:"getId",value:function(e){var t=e.find(function(e){return Array.isArray(e)&&"ID"===e[0]});return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}},{key:"convertUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unit";if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};var n=e[1],i=parseFloat(e[2])||null,o=e.find(function(e){return Array.isArray(e)&&"ID"===e[0]});return{type:t,name:n,conversion_factor:i,id:o?{authority:o[1],code:parseInt(o[2],10)}:null}}},{key:"convertAxis",value:function(e){var t,n=e[1]||"Unknown",i=n.match(/^\((.)\)$/);if(i){var o=i[1].toUpperCase();if("E"===o)t="east";else if("N"===o)t="north";else if("U"===o)t="up";else throw Error("Unknown axis abbreviation: ".concat(o))}else t=e[2]?e[2].toLowerCase():"unknown";var a=e.find(function(e){return Array.isArray(e)&&"ORDER"===e[0]}),s=a?parseInt(a[1],10):null,l=e.find(function(e){return Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])});return{name:n,direction:t,unit:this.convertUnit(l),order:s}}},{key:"extractAxes",value:function(e){var t=this;return e.filter(function(e){return Array.isArray(e)&&"AXIS"===e[0]}).map(function(e){return t.convertAxis(e)}).sort(function(e,t){return(e.order||0)-(t.order||0)})}},{key:"convert",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(function(e){return Array.isArray(e)&&"BASEGEOGCRS"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"BASEGEOGCRS"===e[0]})):null,n.conversion=e.find(function(e){return Array.isArray(e)&&"CONVERSION"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"CONVERSION"===e[0]})):null;var i=e.find(function(e){return Array.isArray(e)&&"CS"===e[0]});i&&(n.coordinate_system={type:i[1],axis:this.extractAxes(e)});var o=e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]});if(o){var a=this.convertUnit(o);n.coordinate_system.unit=a}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];var s=e.find(function(e){return Array.isArray(e)&&("DATUM"===e[0]||"ENSEMBLE"===e[0])});if(s){var l=this.convert(s);"ENSEMBLE"===s[0]?n.datum_ensemble=l:n.datum=l;var u=e.find(function(e){return Array.isArray(e)&&"PRIMEM"===e[0]});u&&"Greenwich"!==u[1]&&(l.prime_meridian={name:u[1],longitude:parseFloat(u[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]})):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(function(e){return Array.isArray(e)&&"MEMBER"===e[0]}).map(function(e){return{type:"DatumEnsembleMember",name:e[1],id:t.getId(e)}});var c=e.find(function(e){return Array.isArray(e)&&"ENSEMBLEACCURACY"===e[0]});c&&(n.accuracy=parseFloat(c[1]));var d=e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]});d&&(n.ellipsoid=this.convert(d)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]})&&this.convert(e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]}),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})):null,n.parameters=e.filter(function(e){return Array.isArray(e)&&"PARAMETER"===e[0]}).map(function(e){return t.convert(e)});break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(function(e){return Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])})),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";var f=e.find(function(e){return Array.isArray(e)&&"SOURCECRS"===e[0]});if(f){var p=f.find(function(e){return Array.isArray(e)});n.source_crs=p?this.convert(p):null}var h=e.find(function(e){return Array.isArray(e)&&"TARGETCRS"===e[0]});if(h){var m=h.find(function(e){return Array.isArray(e)});n.target_crs=m?this.convert(m):null}var g=e.find(function(e){return Array.isArray(e)&&"ABRIDGEDTRANSFORMATION"===e[0]});g?n.transformation=this.convert(g):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})):null,n.parameters=e.filter(function(e){return Array.isArray(e)&&("PARAMETER"===e[0]||"PARAMETERFILE"===e[0])}).map(function(e){return"PARAMETER"===e[0]?t.convert(e):"PARAMETERFILE"===e[0]?{name:e[1],value:e[2],id:{authority:"EPSG",code:8656}}:void 0}),7===n.parameters.length){var v=n.parameters[6];"Scale difference"===v.name&&(v.value=Math.round((v.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":var y=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(function(e){e.unit||(e.unit=y)}),y.conversion_factor&&1!==y.conversion_factor&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:y});break;default:n.keyword=e[0]}return n}}],function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(o.key),o)}}(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function c(){return(c="u">typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t;function n(){var e,t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return e=n,t=arguments,e=d(e),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var n=e;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,u()?Reflect.construct(e,t||[],d(this).constructor):e.apply(this,t))}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&f(n,e),t=[{key:"convert",value:function(e){var t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this,"function"==typeof(i=c(d(n),"convert",t))?function(e){return i.apply(t,e)}:i)([e,o]),o.coordinate_system&&"Cartesian"===o.coordinate_system.subtype&&delete o.coordinate_system,o.usage&&delete o.usage,o}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=l(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(i.key),i)}}(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(s);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function g(){return(g="u">typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(null,arguments)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t;function n(){var e,t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return e=n,t=arguments,e=v(e),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var n=e;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,m()?Reflect.construct(e,t||[],v(this).constructor):e.apply(this,t))}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&y(n,e),t=[{key:"convert",value:function(e){var t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t=this,"function"==typeof(i=g(v(n),"convert",t))?function(e){return i.apply(t,e)}:i)([e,o]);var a=e.find(function(e){return Array.isArray(e)&&"CS"===e[0]});a&&(o.coordinate_system={subtype:a[1],axis:this.extractAxes(e)});var s=e.find(function(e){return Array.isArray(e)&&"USAGE"===e[0]});if(s){var l=s.find(function(e){return Array.isArray(e)&&"SCOPE"===e[0]}),u=s.find(function(e){return Array.isArray(e)&&"AREA"===e[0]}),c=s.find(function(e){return Array.isArray(e)&&"BBOX"===e[0]});o.usage={},l&&(o.usage.scope=l[1]),u&&(o.usage.area=u[1]),c&&(o.usage.bbox=c.slice(1))}return o}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=h(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(i.key),i)}}(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(s),x=/\s/,w=/[A-Za-z]/,A=/[A-Za-z84_]/,C=/[,\]]/,S=/[\d\.E\-\+]/;function _(e){if("string"!=typeof e)throw Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function T(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,o=n.reduce(function(e,t){return O(t,e),e},i);t&&(e[t]=o)}function O(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n,i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length){if(Array.isArray(e[0])){t[i]={},O(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if("TOWGS84"===i){t[i]=e;return}if("AXIS"===i){i in t||(t[i]=[]),t[i].push(e);return}switch(!Array.isArray(i)&&(t[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},3===e.length&&O(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},4===e.length&&O(e[3],t[i]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],T(t,i,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],T(t,i,e),t[i].type=i;return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return O(e,t[i]);return T(t,i,e)}}function P(e){return .017453292519943295*e}function M(e){var t=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&("albers conic equal area"===t||"lambert azimuthal equal area"===t)&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&("stereographic south pole"===t||"polar stereographic (variant b)"===t)?(e.lat0=P(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&("polar stereographic"===t||"polar stereographic (variant a)"===t)&&(e.lat_ts=e.lat0,e.lat0=P(e.lat0>0?90:-90),delete e.lat1)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){var t={units:null,to_meter:void 0};return"string"==typeof e?(t.units=e.toLowerCase(),"metre"===t.units&&(t.units="meter"),"meter"===t.units&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function I(e){return"object"===E(e)?e.value*e.unit.conversion_factor:e}function k(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=I(e.ellipsoid.semi_major_axis),void 0!==e.ellipsoid.inverse_flattening?t.rf=e.ellipsoid.inverse_flattening:void 0!==e.ellipsoid.semi_major_axis&&void 0!==e.ellipsoid.semi_minor_axis&&(t.rf=t.a/(t.a-I(e.ellipsoid.semi_minor_axis))))}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&"object"===E(e)?("BoundCRS"===e.type?(N(e.source_crs,t),e.transformation&&(e.transformation.method&&"NTv2"===e.transformation.method.name?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map(function(e){return e.value}))):(Object.keys(e).forEach(function(n){var i=e[n];if(null!==i)switch(n){case"name":if(t.srsCode)break;t.name=i,t.srsCode=i;break;case"type":"GeographicCRS"===i?t.projName="longlat":"ProjectedCRS"===i&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(t.ellps=i.ellipsoid.name,k(i,t)),i.prime_meridian&&(t.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=i.name,k(i,t);break;case"prime_meridian":t.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis){if(t.axis=i.axis.map(function(e){var t=e.direction;if("east"===t)return"e";if("north"===t)return"n";if("west"===t)return"w";if("south"===t)return"s";throw Error("Unknown axis direction: ".concat(t))}).join("")+"u",i.unit){var o=D(i.unit),a=o.units,s=o.to_meter;t.units=a,t.to_meter=s}else if(i.axis[0]&&i.axis[0].unit){var l=D(i.axis[0].unit),u=l.units,c=l.to_meter;t.units=u,t.to_meter=c}}break;case"id":i.authority&&i.code&&(t.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(t.projName=i.method.name),i.parameters&&i.parameters.forEach(function(e){var n=e.name.toLowerCase().replace(/\s+/g,"_"),i=e.value;e.unit&&e.unit.conversion_factor?t[n]=i*e.unit.conversion_factor:"degree"===e.unit?t[n]=i*Math.PI/180:t[n]=i});break;case"unit":i.name&&(t.units=i.name.toLowerCase(),"metre"===t.units&&(t.units="meter")),i.conversion_factor&&(t.to_meter=i.conversion_factor);break;case"base_crs":N(i,t),t.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name}}),void 0!==t.latitude_of_false_origin&&(t.lat0=t.latitude_of_false_origin),void 0!==t.longitude_of_false_origin&&(t.long0=t.longitude_of_false_origin),void 0!==t.latitude_of_standard_parallel&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),void 0!==t.latitude_of_1st_standard_parallel&&(t.lat1=t.latitude_of_1st_standard_parallel),void 0!==t.latitude_of_2nd_standard_parallel&&(t.lat2=t.latitude_of_2nd_standard_parallel),void 0!==t.latitude_of_projection_centre&&(t.lat0=t.latitude_of_projection_centre),void 0!==t.longitude_of_projection_centre&&(t.longc=t.longitude_of_projection_centre),void 0!==t.easting_at_false_origin&&(t.x0=t.easting_at_false_origin),void 0!==t.northing_at_false_origin&&(t.y0=t.northing_at_false_origin),void 0!==t.latitude_of_natural_origin&&(t.lat0=t.latitude_of_natural_origin),void 0!==t.longitude_of_natural_origin&&(t.long0=t.longitude_of_natural_origin),void 0!==t.longitude_of_origin&&(t.long0=t.longitude_of_origin),void 0!==t.false_easting&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),void 0!==t.false_northing&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),void 0!==t.standard_parallel_1&&(t.lat1=t.standard_parallel_1),void 0!==t.standard_parallel_2&&(t.lat2=t.standard_parallel_2),void 0!==t.scale_factor_at_natural_origin&&(t.k0=t.scale_factor_at_natural_origin),void 0!==t.scale_factor_at_projection_centre&&(t.k0=t.scale_factor_at_projection_centre),void 0!==t.scale_factor_on_pseudo_standard_parallel&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),void 0!==t.azimuth&&(t.alpha=t.azimuth),void 0!==t.azimuth_at_projection_centre&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),M(t)),t):e}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}_.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;x.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case -1:return}},_.prototype.afterquote=function(e){if('"'===e){this.word+='"',this.state=4;return}if(C.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},_.prototype.afterItem=function(e){if(","===e){null!==this.word&&this.currentObject.push(this.word),this.word=null,this.state=1;return}if("]"===e){this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=-1);return}},_.prototype.number=function(e){if(S.test(e)){this.word+=e;return}if(C.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw Error("havn't handled \""+e+'" in number yet, index '+this.place)},_.prototype.quoted=function(e){if('"'===e){this.state=5;return}this.word+=e},_.prototype.keyword=function(e){if(A.test(e)){this.word+=e;return}if("["===e){var t=[];t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=1;return}if(C.test(e))return void this.afterItem(e);throw Error("havn't handled \""+e+'" in keyword yet, index '+this.place)},_.prototype.neutral=function(e){if(w.test(e)){this.word=e,this.state=2;return}if('"'===e){this.word="",this.state=4;return}if(S.test(e)){this.word=e,this.state=3;return}if(C.test(e))return void this.afterItem(e);throw Error("havn't handled \""+e+'" in neutral yet, index '+this.place)},_.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw Error('unable to parse string "'+this.text+'". State is '+this.state)};var B=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function L(e){if("object"===R(e))return N(e);var t,n=(t=e.toUpperCase()).includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1"),i=new _(e).output();if("WKT2"===n)return N(("2019"==(i.find(function(e){return Array.isArray(e)&&"USAGE"===e[0]})?"2019":(i.find(function(e){return Array.isArray(e)&&"CS"===e[0]})||"BOUNDCRS"===i[0]||"PROJCRS"===i[0]||i[0],"2015"))?b:p).convert(i));var o=i[0],a={};return O(i,a),!function e(t){for(var n=Object.keys(t),i=0,o=n.length;i<o;++i){var a=n[i];-1!==B.indexOf(a)&&function(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===R(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",i=0,o=e.AXIS.length;i<o;++i){var a=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?n+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?n+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?n+="e":(-1!==a[0].indexOf("west")||("x"===a[0]||"lon"===a[0])&&"west"===a[1])&&(n+="w")}2===n.length&&(n+="u"),3===n.length&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;function l(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_1949"===e.datumCode&&(e.datumCode="nzgd49"),("wgs_1984"===e.datumCode||"world_geodetic_system_1984"===e.datumCode)&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"belge_1972"===e.datumCode&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=P(e.rectified_grid_angle)),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",P],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",P],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",P],["lat0","latitude_of_origin",P],["lat0","standard_parallel_1",P],["lat1","standard_parallel_1",P],["lat2","standard_parallel_2",P],["azimuth","Azimuth"],["alpha","azimuth",P],["srsCode","name"]].forEach(function(t){var n,i;return n=t[0],i=t[1],void(!(n in e)&&i in e&&(e[n]=e[i],3===t.length&&(e[n]=t[2](e[n]))))}),M(e)}(t[a]),"object"===R(t[a])&&e(t[a])}}(a),a[o]}},5421(e){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},5443(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(6465),s=function(e){return this instanceof s?(e=e||{},a.call(this,e),n(4727).call(this),this._init(e),this):new s(e)};i(s,a),o("webgl","track",s),e.exports=s},5446(e,t,n){var i=n(8899),o=n(5665),a=function(e){"use strict";if(!(this instanceof a))return new a(e);var t=n(4341),i=n(9956);e=e||{},o.call(this,e);var s=this,l=this._init;return this._createGrids=function(){return i.createColoredMesh(s,!0)},this.grid=s.mesh,this._init=function(e){l.call(s,e);var n=Object.assign({},{opacity:1,value:function(e,n){return t.isNonNullFinite(e)?e:s.position()(e,n).z},position:function(e){return e||{x:0,y:0}},origin:function(e){return e.length>=3?[e[0],e[1],0]:[0,0,0]}},void 0===e.style?{}:e.style);s.style(n),s.grid(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},e.mesh||{},e.grid||{})),(e.mesh||e.grid)&&s.dataTime().modified()},this._init(e),this};i(a,o),e.exports=a},5463(e,t,n){var i=n(8899),o=n(5933).registerAnnotation,a=n(7252),s=n(4341),l=n(8795).state,u=n(5264),c=function(e,t){"use strict";if(!(this instanceof c))return new c(e,t);e=s.deepMerge({},this.constructor.defaults,e),u.call(this,e,t||"ellipse");var n=this;this.features=function(){var e,t=n.options(),i=n.state();if(e=[],t.corners&&t.corners.length>=4){var o=n.styleForState(i),s=Math.pow(Math.pow(t.corners[0].x-t.corners[1].x,2)+Math.pow(t.corners[0].y-t.corners[1].y,2),.5),u=Math.pow(Math.pow(t.corners[0].x-t.corners[3].x,2)+Math.pow(t.corners[0].y-t.corners[3].y,2),.5),c=Math.max(s,u)/2/n.layer().map().unitsPerPixel(0),d=-Math.atan2(t.corners[1].y-t.corners[0].y,t.corners[1].x-t.corners[0].x);e=[{marker:{x:(t.corners[0].x+t.corners[1].x+t.corners[2].x+t.corners[3].x)/4,y:(t.corners[0].y+t.corners[1].y+t.corners[2].y+t.corners[3].y)/4,style:Object.assign({},o,{radius:c,symbolValue:s?u/s:1e20,rotation:d,strokeOffset:0,radiusIncludesStroke:!1,scaleWithZoom:a.scaleMode.fill,rotateWithMap:!0,strokeOpacity:!1===o.stroke?0:o.strokeOpacity,fillOpacity:!1===o.fill?0:o.fillOpacity})}}]}return i===l.edit&&n._addEditHandles(e,t.corners),e},this.toPolygonList=function(e){var t=n._coordinates();if(t.length<3)return[];var i=e&&e.tolerance||0;if(!i){var o=n.layer().map();i=e&&e.pixelTolerance?o.unitsPerPixel(o.zoom())*e.pixelTolerance:.1*o.unitsPerPixel(o.zoomRange().max)}for(var a=Math.pow(Math.pow(t[0].x-t[1].x,2)+Math.pow(t[0].y-t[1].y,2),.5),s=Math.pow(Math.pow(t[0].x-t[3].x,2)+Math.pow(t[0].y-t[3].y,2),.5),l=(t[0].x+t[2].x)/2,u=(t[0].y+t[2].y)/2,c=Math.max(a,s)/2,d=-Math.atan2(t[1].y-t[0].y,t[1].x-t[0].x),f=Math.max(12,Math.ceil(Math.PI/Math.acos((c-i)/(c+i)))),p=a/2*(1+(1-Math.cos(Math.PI/f))/2),h=s/2*(1+(1-Math.cos(Math.PI/f))/2),m=[],g=Math.cos(d),v=Math.sin(d),y=0;y<f;y+=1){var b=2*Math.PI*y/f,x=Math.cos(b),w=Math.sin(b),A=l+p*g*x-h*v*w,C=u+p*v*x+h*g*w;m.push([A,C])}return[[m]]}};i(c,u),c.defaults=Object.assign({},u.defaults,{});var d={};d[a.capabilities.feature]=!0,o("ellipse",c,d),e.exports=c},5530(e,t,n){var i=n(4692),o=n(8899),a=n(5933).registerFeature,s=n(7252),l=n(452),u=function(e){"use strict";if(!(this instanceof u))return new u(e);e=e||{},s.call(this,e);var t=n(6194),o=n(5204),a=n(4341),c=n(4727),d=n(7740),f=n(4128),p=n(1906),h=n(3153),m=n(9835),g=n(1708);c.call(this);var v,y,b=this,x=this._exit,w=null,A=null,C={},S=this._init,_=this._update,T=this.updateStyleFromArray;return d(b,e),this.actors=function(){return w?[w]:[]},this.updateStyleFromArray=function(e,t,n){var o,a,s={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbolComputed:1,symbolValueComputed:1,rotation:1};if("string"==typeof e){var l={};l[e]=t,e=l}return i.each(e,function(e,t){var n,i,l,u,c,d,f,p,h,m="symbolComputed"===e?"symbol":"symbolValueComputed"===e?"symbolValue":e;if(b.visible()&&w&&s[e]&&!o&&!b.clustering())if(h=s[e],u=b.data().length,l=(i=w.mapper()).getSourceBuffer(m),n=b.verticesPerFeature(),l&&u&&u*n*h===l.length){switch(s[e]){case 1:for(d=0,p=0;d<u;d+=1)for(f=0,c=t[d];f<n;f+=1,p+=1)l[p]=c;break;case 3:for(d=0,p=0;d<u;d+=1)for(f=0,c=t[d];f<n;f+=1,p+=3)l[p]=c.r,l[p+1]=c.g,l[p+2]=c.b}i.updateSourceBuffer(m),a=!0}else o=!0;else o=!0;var g=b.modified;o||e!==m||(b.modified=function(){}),T(e,t,!1),b.modified=g}),n&&(b.visible()&&o?b.draw():a&&b.renderer()._render()),b},this._handleZoom=function(e){b._primitiveShapeAuto&&b._primitiveShape===s.primitiveShapes.sprite&&2*b._approximateMaxRadius(e)>l._maxPointSize&&(b._primitiveShape=s.primitiveShapes.triangle,b.renderer().contextRenderer().removeActor(b.actors()[0]),b._init(!0),b.dataTime().modified(),b.draw())},this._init=function(n){var i,o,a,l=t.shaderProgram(),u=((i=new t.shader(t.GL.VERTEX_SHADER)).setShaderSource(b._primitiveShape===s.primitiveShapes.sprite?g:m),i),c=((o=new t.shader(t.GL.FRAGMENT_SHADER)).setShaderSource(b._primitiveShape===s.primitiveShapes.sprite?h:p),o),d=t.material(),x=t.blend(),_=t.geometryData(),T=t.sourceDataP3fv({name:"pos"}),O={fillColor:3,fillOpacity:1,radius:1,rotation:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbol:1,symbolValue:1},P={pixelWidth:t.GL.FLOAT,aspect:t.GL.FLOAT,zoom:t.GL.FLOAT,rotationUniform:t.GL.FLOAT},M=new t.projectionUniform("projectionMatrix");v=new t.modelViewOriginUniform("modelViewMatrix",y),b._primitiveShape===s.primitiveShapes.sprite?a=new t.points:(a=new t.triangles,O.unit=2),a.setIndices(new Uint16Array),n||S.call(b,e),A=t.mapper(),l.addVertexAttribute(t.vertexAttribute("pos"),t.vertexAttributeKeys.Position),_.addSource(T),Object.keys(O).forEach(function(e,n){l.addVertexAttribute(t.vertexAttribute(e),n+1),_.addSource(t.sourceDataAnyfv(O[e],n+1,{name:e}))}),C={},Object.keys(P).forEach(function(e){C[e]=new t.uniform(P[e],e),l.addUniform(C[e])}),l.addUniform(v),l.addUniform(M),l.addShader(c),l.addShader(u),d.addAttribute(l),d.addAttribute(x),(w=t.actor()).setMaterial(d),w.setMapper(A),_.addPrimitive(a),_.computeBounds=function(){_.setBounds(0,0,0,0,0,0)},A.setGeometryData(_),n||b.geoOn(f.zoom,function(e){b._handleZoom(e.zoomLevel)})},this._build=function(){return!function e(t){var n,i,u,c,d,f,p,h,m,g,x,C,S=b.data().length,_=b._pointPolygon(0,0,1,1),T=Array(3*S),O={},P={},M={},E={},D={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeOffset:0,strokeWidth:1,symbol:1,symbolValue:1,rotation:1,scaleWithZoom:0,rotateWithMap:0,radiusIncludesStroke:0},I=b.verticesPerFeature(),k=b.data(),N=A.geometryData();for(var R in d=b.position(),D)M[R]=b.style.get(R),a.isFunction(b.style(R))||(E[R]=M[R]()),D[R]&&(O[R]=a.getGeomBuffer(N,R,I*S*D[R]));if(!t){for(n=C=0;n<S;n+=1,C+=3)c=d(k[n],n),T[C]=c.x,T[C+1]=c.y,T[C+2]=0;if(T=o.transformCoordinates(b.gcs(),b.layer().map().gcs(),T,3),(y=new Float32Array(b.style.get("origin")(T)))[0]||y[1]||y[2])for(n=C=0;n<S;n+=1,C+=3)T[C]-=y[0],T[C+1]-=y[1],T[C+2]-=y[2];v.setOrigin(y),u=a.getGeomBuffer(N,"pos",I*S*3),b._primitiveShape!==s.primitiveShapes.sprite&&(p=a.getGeomBuffer(N,"unit",I*S*2)),(f=N.primitive(0).indices())instanceof Uint16Array&&f.length===I*S||(f=new Uint16Array(I*S),N.primitive(0).setIndices(f))}for(n=m=g=x=C=0;n<S;n+=1,C+=3){if(h=k[n],!t&&b._primitiveShape!==s.primitiveShapes.sprite)for(i=0;i<_.length;i+=1,x+=1)p[x]=_[i];for(var B in D)P[B]=void 0===E[B]?M[B](h,n):E[B];for(P.scaleWithZoom=s.scaleMode[P.scaleWithZoom]||(P.scaleWithZoom>=1&&P.scaleWithZoom<=3?P.scaleWithZoom:0),P.symbolComputed=P.scaleWithZoom+4*!!P.rotateWithMap+(Math.sign(void 0!==P.radiusIncludesStroke&&P.radiusIncludesStroke?P.strokeOffset:1)+1)*16+64*P.symbol,P.symbolValue&&P.symbol>=s.symbols.arrow&&P.symbol<s.symbols.arrow+s.symbols.arrowMax&&(P.symbolValue=a.packFloats(P.symbolValue)),i=0;i<I;i+=1,m+=1,g+=3)t||(u[g]=T[C],u[g+1]=T[C+1],u[g+2]=T[C+2]),O.radius[m]=P.radius,O.fillColor[g]=P.fillColor.r,O.fillColor[g+1]=P.fillColor.g,O.fillColor[g+2]=P.fillColor.b,O.fillOpacity[m]=P.fillOpacity,O.strokeColor[g]=P.strokeColor.r,O.strokeColor[g+1]=P.strokeColor.g,O.strokeColor[g+2]=P.strokeColor.b,O.strokeOpacity[m]=P.strokeOpacity,O.strokeWidth[m]=P.strokeWidth,O.symbol[m]=P.symbolComputed,O.symbolValue[m]=P.symbolValue,O.rotation[m]=P.rotation}if(b._primitiveShapeAuto){var L=b._approximateMaxRadius(b.renderer().map().zoom());if(b._primitiveShape===s.primitiveShapes.sprite&&L>l._maxPointSize||b._primitiveShape!==s.primitiveShapes.sprite&&L<=l._maxPointSize){b._primitiveShape=L>l._maxPointSize?s.primitiveShapes.triangle:s.primitiveShapes.sprite,b.renderer().contextRenderer().removeActor(w),w=null,b._init(!0),e();return}}t?Object.keys(O).forEach(function(e){return A.updateSourceBuffer(e)}):(N.boundsDirty(!0),A.modified(),A.boundsDirtyTimestamp().modified())}(b.dataTime().timestamp()<b.buildTime().timestamp()),b.renderer().contextRenderer().hasActor(w)||b.renderer().contextRenderer().addActor(w),b.buildTime().modified(),b},this._update=function(){return _.call(b),(b.dataTime().timestamp()>=b.buildTime().timestamp()||b.updateTime().timestamp()<b.timestamp())&&b._build(),C.pixelWidth.set(2/b.renderer().width()),C.aspect.set(b.renderer().width()/b.renderer().height()),C.zoom.set(b.renderer().map().zoom()),C.rotationUniform.set(b.renderer().map().rotation()),w.setVisible(b.visible()),w.material().setBinNumber(b.bin()),b.updateTime().modified(),b},this._exit=function(){b.renderer().contextRenderer().removeActor(w),w=null,C={},x()},b._init(),this};o(u,s),a("webgl","marker",u,{}),e.exports=u},5579(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},5601(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*l-i*s,x=n*u-o*s,w=n*c-a*s,A=i*u-o*l,C=i*c-a*l,S=o*c-a*u,_=d*g-f*m,T=d*v-p*m,O=d*y-h*m,P=f*v-p*g,M=f*y-h*g,E=p*y-h*v,D=b*E-x*M+w*P+A*O-C*T+S*_;return D?(D=1/D,e[0]=(l*E-u*M+c*P)*D,e[1]=(u*O-s*E-c*T)*D,e[2]=(s*M-l*O+c*_)*D,e[3]=(o*M-i*E-a*P)*D,e[4]=(n*E-o*O+a*T)*D,e[5]=(i*O-n*M-a*_)*D,e[6]=(g*S-v*C+y*A)*D,e[7]=(v*w-m*S-y*x)*D,e[8]=(m*C-g*w+y*b)*D,e):null}},5663(e,t,n){var i=n(5933).registerLayerAdjustment,o=function(){"use strict";var e,t=this,n=this._init,i=this._exit,o=this._update,a=0,s=[];this._drawTile=function(n){if(e){var i=t._tileBounds(n),o=n.index.level||0,l=t._tileOffset(o),u=t.tileCropFromBounds(n),c={};u&&(c.crop=u),c.ul=t.fromLocal(t.fromLevel({x:i.left-l.x,y:i.top-l.y},o),0),c.ll=t.fromLocal(t.fromLevel({x:i.left-l.x,y:i.bottom-l.y},o),0),c.ur=t.fromLocal(t.fromLevel({x:i.right-l.x,y:i.top-l.y},o),0),c.lr=t.fromLocal(t.fromLevel({x:i.right-l.x,y:i.bottom-l.y},o),0),c.ul.z=c.ll.z=c.ur.z=c.lr.z=o,c.id=a+=1,n.quadId=c.id,c.image=n.image,s.push(c),e.data(s),e._update(),t.draw()}},this._remove=function(n){if(void 0!==n.quadId&&e){for(var i=0;i<s.length;i+=1)if(s[i].id===n.quadId){s.splice(i,1);break}e.data(s),e._update(),t.draw()}},this._update=function(n){return o.call(t,n),e&&e.nearestPixel&&e.nearestPixel(t.nearestPixel()),t._addBaseQuadToTiles(e,s),t},this._exit=function(){t.deleteFeature(e),e=null,s=[],i.apply(t,arguments)},this._init=function(){n.apply(t,arguments),(e=t.createFeature("quad",{previewColor:t._options.previewColor,previewImage:t._options.previewImage})).geoTrigger=void 0,e.gcs(t._options.gcs||t.map().gcs()),e.data(s),e._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};i("canvas","tile",o),e.exports=o},5665(e,t,n){var i=n(8899),o=n(9186),a=function(e){"use strict";if(!(this instanceof a))return new a(e);var t=n(4341);e=e||{},o.call(this,e);var i=this,s=this._init,l={};return this.featureType="mesh",this.mesh=function(e,t){return void 0===e?l:"string"==typeof e&&void 0===t?l[e]:(void 0===t?l=Object.assign({},{gridWidth:function(){return e.gridHeight?Math.floor(i.data().length/e.gridHeight):Math.floor(Math.sqrt(i.data().length))},gridHeight:function(){return e.gridWidth?Math.floor(i.data().length/e.gridWidth):Math.floor(Math.sqrt(i.data().length))}},l,e):l[e]=t,i.modified(),i)},this.mesh.get=function(e){if(void 0===e){var n,o={};for(n in l)l.hasOwnProperty(n)&&(o[n]=i.mesh.get(n));return o}return t.ensureFunction(l[e])},this.position=function(e){return void 0===e?i.style("position"):(i.style("position",e),i.dataTime().modified(),i.modified(),i)},this._createMesh=function(e,t){e=e||{},t=t||{};var n,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x=i.data(),w=i.position(),A=i.mesh.get("elements")(x),C=i.mesh.get("elementPacking")(x),S=i.mesh.get("gridWidth")(x),_=i.mesh.get("gridHeight")(x),T=i.mesh.get("wrapLongitude")(x),O=i.mesh.get("x0")(x),P=i.mesh.get("y0")(x),M=i.mesh.get("dx")(x),E=i.mesh.get("dy")(x),D=S,I={shape:"square",elements:[],elementIndex:[]};if(A){var k=A.length&&Array.isArray(A[0]);if("square"===C||"triangle"!==C&&(!k&&!(A.length%4)&&A.length%3||k&&4===A[0].length))if(I.shape="square",k)for(n=0;n<A.length;n+=1)I.elements.push(A[n][0]),I.elements.push(A[n][1]),I.elements.push(A[n][3]),I.elements.push(A[n][2]),I.elements.push(A[n][3]),I.elements.push(A[n][1]),I.elementIndex.push(n),I.elementIndex.push(n);else for(n=a=0;n<A.length-3;n+=4,a+=1)I.elements.push(A[n]),I.elements.push(A[n+1]),I.elements.push(A[n+3]),I.elements.push(A[n+2]),I.elements.push(A[n+3]),I.elements.push(A[n+1]),I.elementIndex.push(a),I.elementIndex.push(a);else if(I.shape="triangle",k)for(n=0;n<A.length;n+=1)I.elements.push(A[n][0]),I.elements.push(A[n][1]),I.elements.push(A[n][2]),I.elementIndex.push(n);else for(I.elements=A.slice(0,A.length-A.length%3),n=a=0;n<A.length-2;n+=3,a+=1)I.elementIndex.push(a);u=x.length,d=!0}else{if(Object.keys(e).length?S*_>x.length&&(_=Math.floor(x.length/S)):Object.keys(t).length&&(S-1)*(_-1)>x.length&&(_=Math.floor(x.length/(S-1))+1),T=!!(void 0===T||T),!(d=null==O||null==P||!M||!E)&&T&&(O<-180||O>180||O+M*(S-1)<-180||O+M*(S-1)>180)&&M>-180&&M<180&&M*(S-1)<360.0001){for(n=0,m=[],g=[];n<S;n+=1){for(y=O+n*M;y<-180;)y+=360;for(;y>180;)y-=360;n&&Math.abs(y-m[m.length-1])>180&&(y>m[m.length-1]?(m.push(y-360),m.push(m[m.length-2]+360)):(m.push(y+360),m.push(m[m.length-2]-360)),g.push(n),g.push(n+1),v=n),m.push(y),g.push(n)}if(S+=2,.01>Math.abs(Math.abs(D*M)-360)){for(S+=1,y=O+D*M;y<-180;)y+=360;for(;y>180;)y-=360;m.push(y),g.push(0)}}if(u=S*_,void 0!==v)for(n=0,I.index=Array(u);n<u;n+=1)a=Math.floor(n/S),b=n-a*S,(b+=b>v?-2:0)>=D&&(b-=D),b+=a*D,I.index[n]=b;for(a=l=0;a<_-1;a+=1,l+=1)for(n=0;n<S-1;n+=1,l+=1)n!==v&&(I.elements.push(l),I.elements.push(l+1),I.elements.push(l+S),I.elements.push(l+S+1),I.elements.push(l+S),I.elements.push(l+1),I.elementIndex.push(a*(S-1)+(g?g[n]:n)),I.elementIndex.push(a*(S-1)+(g?g[n]:n)))}I.verticesPerElement="triangle"===I.shape?3:6;var N=I.verticesPerElement;if(t.used){var R=Array(I.elementIndex[I.elementIndex.length-1]+1);for(n=0;n<R.length;n+=1)R[n]=t.used(x[n],n);for(n=0;n<I.elementIndex.length&&R[I.elementIndex[n]];n+=1);if(n<I.elementIndex.length){for(a=n;n<I.elementIndex.length;n+=1)if(R[I.elementIndex[n]]){for(s=0,I.elementIndex[a]=I.elementIndex[n];s<3;s+=1)I.elements[3*a+s]=I.elements[3*n+s];a+=1}I.elements.splice(3*a),I.elementIndex.splice(a)}}if(e.used){for(n=0;n<u&&(l=I.index?I.index[n]:n,e.used(x[l],l));n+=1);if(n!==u){c=n;var B=Array(u);for(a=0;a<c;a+=1)B[a]=a;if(B[c]=-1,!I.index)for(a=0,I.index=Array(x.length);a<x.length;a+=1)I.index[a]=a;for(n=c+1;n<u;n+=1)l=I.index[n],e.used(x[l],l)?(B[n]=c,I.index[c]=I.index[n],c+=1):B[n]=-1;for(I.index.splice(c),n=s=0;n<I.elements.length;n+=N){for(a=0;a<N&&!(B[I.elements[n+a]]<0);a+=1)I.elements[s+a]=B[I.elements[n+a]];a===N&&(I.elementIndex[Math.floor(s/3)]=I.elementIndex[Math.floor(n/3)],6===N&&(I.elementIndex[Math.floor(s/3)+1]=I.elementIndex[Math.floor(n/3)+1]),s+=N)}I.elements.splice(s),I.elementIndex.splice(Math.floor(s/3)),u=c}}if(t.used&&void 0===v){var L=Array(u),F=I.index;for(n=0,I.index=[];n<I.elements.length;n+=1)void 0===L[s=I.elements[n]]&&(L[s]=I.index.length,I.index.push(F?F[s]:s)),I.elements[n]=L[s];u=I.index.length}for(p in I.pos=Array(3*u),e)"used"!==p&&e.hasOwnProperty(p)&&(I[p]=Array(u));for(n=o=0;n<u;n+=1,o+=3)for(p in f=x[l=I.index?I.index[n]:n],d?(h=w(f,l),I.pos[o]=h.x,I.pos[o+1]=h.y,I.pos[o+2]=h.z||0):(void 0===v?I.pos[o]=O+l%S*M:I.pos[o]=m[n%S],I.pos[o+1]=P+E*Math.floor(l/S),I.pos[o+2]=0,h={x:I.pos[o],y:I.pos[o+1],z:I.pos[o+2]}),e)"used"!==p&&e.hasOwnProperty(p)&&(I[p][n]=e[p](f,l,h));for(p in t)if("used"!==p&&t.hasOwnProperty(p)){var V=t[p];for(n=0,I[p]=Array(I.elementIndex.length);n<I.elementIndex.length;n+=1)f=x[l=I.elementIndex[n]],I[p][n]=V(f,l)}return I.numVertices=u,I.numElements=I.elements.length/I.verticesPerElement,I},this._init=function(e){s.call(i,e);var t=Object.assign({},{position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e}},(e=e||{}).style||{});i.mesh(e.mesh||{}),i.style(t)},this};i(a,o),e.exports=a},5670(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d,forward:()=>a,init:()=>o,inverse:()=>s,names:()=>c});var i=n(384);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=i.sK-i.Vj/2?this.face=5:this.lat0<=-(i.sK-i.Vj/2)?this.face=6:Math.abs(this.long0)<=i.Vj?this.face=1:Math.abs(this.long0)<=i.sK+i.Vj?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function a(e){var t,n,o,a,s,c,d,f,p,h,m,g={x:0,y:0},v={value:0};return(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,5===this.face)?(a=i.sK-t,n>=i.Vj&&n<=i.sK+i.Vj?(v.value=1,o=n-i.sK):n>i.sK+i.Vj||n<=-(i.sK+i.Vj)?(v.value=2,o=n>0?n-i.DF:n+i.DF):n>-(i.sK+i.Vj)&&n<=-i.Vj?(v.value=3,o=n+i.sK):(v.value=4,o=n)):6===this.face?(a=i.sK+t,n>=i.Vj&&n<=i.sK+i.Vj?(v.value=1,o=-n+i.sK):n<i.Vj&&n>=-i.Vj?(v.value=2,o=-n):n<-i.Vj&&n>=-(i.sK+i.Vj)?(v.value=3,o=-n-i.sK):(v.value=4,o=n>0?-n+i.DF:-n-i.DF)):(2===this.face?n=u(n,+i.sK):3===this.face?n=u(n,+i.DF):4===this.face&&(n=u(n,-i.sK)),p=Math.sin(t),h=Math.cos(t),m=Math.sin(n),d=h*Math.cos(n),f=h*m,1===this.face?o=l(a=Math.acos(d),p,f,v):2===this.face?o=l(a=Math.acos(f),p,-d,v):3===this.face?o=l(a=Math.acos(-d),p,-f,v):4===this.face?o=l(a=Math.acos(-f),p,d,v):(a=o=0,v.value=1)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(c=Math.atan(12/i.DF*(o+Math.acos(Math.sin(o)*Math.cos(i.Vj))-i.sK)))*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(o))))),2===v.value?c+=i.sK:3===v.value?c+=i.DF:4===v.value&&(c+=1.5*i.DF),g.x=s*Math.cos(c),g.y=s*Math.sin(c),g.x=g.x*this.a+this.x0,g.y=g.y*this.a+this.y0,e.x=g.x,e.y=g.y,e}function s(e){var t,n,o,a,s,l,c,d,f,p,h,m,g,v,y={lam:0,phi:0},b={value:0};return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?b.value=1:e.y>=0&&e.y>=Math.abs(e.x)?(b.value=2,t-=i.sK):e.x<0&&-e.x>=Math.abs(e.y)?(b.value=3,t=t<0?t+i.DF:t-i.DF):(b.value=4,t+=i.sK),s=Math.atan(Math.sin(d=i.DF/12*Math.tan(t))/(Math.cos(d)-1/Math.sqrt(2))),(l=1-(o=Math.cos(t))*o*(a=Math.tan(n))*a*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?l=-1:l>1&&(l=1),5===this.face?(c=Math.acos(l),y.phi=i.sK-c,1===b.value?y.lam=s+i.sK:2===b.value?y.lam=s<0?s+i.DF:s-i.DF:3===b.value?y.lam=s-i.sK:y.lam=s):6===this.face?(y.phi=(c=Math.acos(l))-i.sK,1===b.value?y.lam=-s+i.sK:2===b.value?y.lam=-s:3===b.value?y.lam=-s-i.sK:y.lam=s<0?-s-i.DF:-s+i.DF):(h=(d=(f=l)*f)>=1?0:Math.sqrt(1-d)*Math.sin(s),d+=h*h,p=d>=1?0:Math.sqrt(1-d),2===b.value?(d=p,p=-h,h=d):3===b.value?(p=-p,h=-h):4===b.value&&(d=p,p=h,h=-d),2===this.face?(d=f,f=-p,p=d):3===this.face?(f=-f,p=-p):4===this.face&&(d=f,f=p,p=-d),y.phi=Math.acos(-h)-i.sK,y.lam=Math.atan2(p,f),2===this.face?y.lam=u(y.lam,-i.sK):3===this.face?y.lam=u(y.lam,-i.DF):4===this.face&&(y.lam=u(y.lam,+i.sK))),0!==this.es&&(m=+(y.phi<0),g=Math.tan(y.phi),v=this.b/Math.sqrt(g*g+this.one_minus_f_squared),y.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),m&&(y.phi=-y.phi)),y.lam+=this.long0,e.x=y.lam,e.y=y.phi,e}function l(e,t,n,o){var a;return e<i.H0?(o.value=1,a=0):Math.abs(a=Math.atan2(t,n))<=i.Vj?o.value=1:a>i.Vj&&a<=i.sK+i.Vj?(o.value=2,a-=i.sK):a>i.sK+i.Vj||a<=-(i.sK+i.Vj)?(o.value=3,a=a>=0?a-i.DF:a+i.DF):(o.value=4,a+=i.sK),a}function u(e,t){var n=e+t;return n<-i.DF?n+=i.JM:n>+i.DF&&(n-=i.JM),n}var c=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];let d={init:o,forward:a,inverse:s,names:c}},5679(e,t,n){var i=n(8899),o=n(3757),a=n(5933).registerRenderer,s=function(e){"use strict";if(!(this instanceof s))return new s(e);o.call(this,e),e=e||{};var t=this;return this.api=function(){return"dom"},this._init=function(e){var n=t.layer().node();return!t.canvas()&&n&&n.length&&t.canvas(n[0]),t},this._init(e),this};i(s,o),a("dom",s),e.exports=s},5742(e,t,n){var i=n(4099),o=n(8899),a=n(8315);i.uniform=function(e,t){"use strict";if(!(this instanceof i.uniform))return new i.uniform(e,t);this.getTypeNumberOfComponents=function(e){switch(e){case i.GL.FLOAT:case i.GL.INT:case i.GL.BOOL:return 1;case i.GL.FLOAT_VEC2:case i.GL.INT_VEC2:case i.GL.BOOL_VEC2:return 2;case i.GL.FLOAT_VEC3:case i.GL.INT_VEC3:case i.GL.BOOL_VEC3:return 3;case i.GL.FLOAT_VEC4:case i.GL.INT_VEC4:case i.GL.BOOL_VEC4:return 4;case i.GL.FLOAT_MAT3:return 9;case i.GL.FLOAT_MAT4:return 16;default:return 0}};var n=Array(this.getTypeNumberOfComponents(e)).fill(0);return this.name=function(){return t},this.set=function(e){var t=0,i=n.length;if(1!==i)for(t=0;t<i;t+=1)n[t]=e[t];else n[0]=e},this.callGL=function(t,o){switch(e){case i.GL.BOOL:case i.GL.INT:t.m_context.uniform1iv(o,n);break;case i.GL.FLOAT:t.m_context.uniform1fv(o,n);break;case i.GL.BOOL_VEC2:case i.GL.INT_VEC2:t.m_context.uniform2iv(o,n);break;case i.GL.FLOAT_VEC2:t.m_context.uniform2fv(o,n);break;case i.GL.BOOL_VEC3:case i.GL.INT_VEC3:t.m_context.uniform3iv(o,n);break;case i.GL.FLOAT_VEC3:t.m_context.uniform3fv(o,n);break;case i.GL.BOOL_VEC4:case i.GL.INT_VEC4:t.m_context.uniform4iv(o,n);break;case i.GL.FLOAT_VEC4:t.m_context.uniform4fv(o,n);break;case i.GL.FLOAT_MAT3:t.m_context.uniformMatrix3fv(o,i.GL.FALSE,n);break;case i.GL.FLOAT_MAT4:t.m_context.uniformMatrix4fv(o,i.GL.FALSE,n)}},this.update=function(e,t){},this},i.modelViewOriginUniform=function(e,t){"use strict";if(!(this instanceof i.modelViewOriginUniform))return new i.modelViewOriginUniform(e,t);e||(e="modelViewMatrix");var n=[(t=t||[0,0,0])[0],t[1],t[2]||0];return i.uniform.call(this,i.GL.FLOAT_MAT4,e),this.set(a.create()),this.setOrigin=function(e){n=[(e=e||[0,0,0])[0],e[1],e[2]||0]},this.update=function(e,t){var i=e.m_modelViewMatrix;if(e.m_modelViewAlignment){var o=e.m_modelViewAlignment;(i=i.slice?i.slice():Array.prototype.slice.call(i))[12]=Math.round(i[12]/o.roundx)*o.roundx+o.dx,i[13]=Math.round(i[13]/o.roundy)*o.roundy+o.dy}i=a.translate(a.create(),i,n),this.set(i)},this},o(i.modelViewOriginUniform,i.uniform),i.projectionUniform=function(e){return this instanceof i.projectionUniform?(e||(e="projectionMatrix"),i.uniform.call(this,i.GL.FLOAT_MAT4,e),this.set(a.create()),this.update=function(e,t){this.set(e.m_projectionMatrix)},this):new i.projectionUniform(e)},o(i.projectionUniform,i.uniform),i.floatUniform=function(e,t){"use strict";if(!(this instanceof i.floatUniform))return new i.floatUniform(e,t);e||(e="floatUniform"),t=void 0===t?1:t,i.uniform.call(this,i.GL.FLOAT,e),this.set(t)},o(i.floatUniform,i.uniform)},5753(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t*(c*a-s*u)+n*(s*l-c*o)+i*(u*o-a*l)}},5776(e){e.exports="/* quadFeature Image fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  mediump vec4 color = texture2D(sampler2d, iTextureCoord);\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  color.w *= opacity;\n  gl_FragColor = color;\n}\n"},5786(e,t,n){var i=n(4692),o=n(4099),a=n(8899);o.viewer=function(e,t){"use strict";if(!(this instanceof o.viewer))return new o.viewer(e,t);o.object.call(this);var n=o.renderer(t),a=o.renderWindow(e);return this.canvas=function(){return e},this.renderWindow=function(){return a},this.init=function(){null!==a?a._setup():console.log("[ERROR] No render window attached")},this.exit=function(e){null!==a?a._cleanup(e):console.log("[ERROR] No render window attached")},this.render=function(){a.render()},this.bindEventHandlers=function(){i(e).on("mousedown",this.handleMouseDown),i(e).on("mouseup",this.handleMouseUp),i(e).on("mousemove",this.handleMouseMove),i(e).on("mousewheel",this.handleMouseWheel),i(e).on("contextmenu",this.handleContextMenu)},this.unbindEventHandlers=function(){i(e).off("mousedown",this.handleMouseDown),i(e).off("mouseup",this.handleMouseUp),i(e).off("mousemove",this.handleMouseMove),i(e).off("mousewheel",this.handleMouseWheel),i(e).off("contextmenu",this.handleContextMenu)},this._init=function(){this.bindEventHandlers(),a.addRenderer(n)},this._init(),this},a(o.viewer,o.object)},5796(e){e.exports=function(e,t,n,i){var o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T,O,P,M=i[0],E=i[1],D=i[2],I=Math.sqrt(M*M+E*E+D*D);return 1e-6>Math.abs(I)?null:(M*=I=1/I,E*=I,D*=I,o=Math.sin(n),s=1-(a=Math.cos(n)),l=t[0],u=t[1],c=t[2],d=t[3],f=t[4],p=t[5],h=t[6],m=t[7],g=t[8],v=t[9],y=t[10],b=t[11],x=M*M*s+a,w=E*M*s+D*o,A=D*M*s-E*o,C=M*E*s-D*o,S=E*E*s+a,_=D*E*s+M*o,T=M*D*s+E*o,O=E*D*s-M*o,P=D*D*s+a,e[0]=l*x+f*w+g*A,e[1]=u*x+p*w+v*A,e[2]=c*x+h*w+y*A,e[3]=d*x+m*w+b*A,e[4]=l*C+f*S+g*_,e[5]=u*C+p*S+v*_,e[6]=c*C+h*S+y*_,e[7]=d*C+m*S+b*_,e[8]=l*T+f*O+g*P,e[9]=u*T+p*O+v*P,e[10]=c*T+h*O+y*P,e[11]=d*T+m*O+b*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},5843(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(o.key),o)}}n.r(t),n.d(t,{default:()=>u});var l=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],u=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,o=arguments.length>3?arguments[3]:void 0;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");if(isNaN(e)||e<0)throw Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=l.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,u=e*this.IndexArrayType.BYTES_PER_ELEMENT,c=(8-u%8)%8;if(a<0)throw Error("Unexpected typed array class: ".concat(i,"."));o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+u+c,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+u+c),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+u+c,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}return e=[{key:"add",value:function(e,t){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}},{key:"finish",value:function(){var e=this._pos>>1;if(e!==this.numItems)throw Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return function e(t,n,i,o,a,s){if(!(a-o<=i)){var l=o+a>>1;(function e(t,n,i,o,a,s){for(;a>o;){if(a-o>600){var l=a-o+1,u=i-o+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(o,Math.floor(i-u*f/l+p)),m=Math.min(a,Math.floor(i+(l-u)*f/l+p));e(t,n,i,h,m,s)}var g=n[2*i+s],v=o,y=a;for(c(t,n,o,i),n[2*a+s]>g&&c(t,n,o,a);v<y;){for(c(t,n,v,y),v++,y--;n[2*v+s]<g;)v++;for(;n[2*y+s]>g;)y--}n[2*o+s]===g?c(t,n,o,y):c(t,n,++y,a),y<=i&&(o=y+1),i<=y&&(a=y-1)}})(t,n,l,o,a,s),e(t,n,i,o,l-1,1-s),e(t,n,i,l+1,a,1-s)}}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(e,t,n,i){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");for(var o=this.ids,a=this.coords,s=this.nodeSize,l=[0,o.length-1,0],u=[];l.length;){var c=l.pop()||0,d=l.pop()||0,f=l.pop()||0;if(d-f<=s){for(var p=f;p<=d;p++){var h=a[2*p],m=a[2*p+1];h>=e&&h<=n&&m>=t&&m<=i&&u.push(o[p])}continue}var g=f+d>>1,v=a[2*g],y=a[2*g+1];v>=e&&v<=n&&y>=t&&y<=i&&u.push(o[g]),(0===c?e<=v:t<=y)&&(l.push(f),l.push(g-1),l.push(1-c)),(0===c?n>=v:i>=y)&&(l.push(g+1),l.push(d),l.push(1-c))}return u}},{key:"within",value:function(e,t,n){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");for(var i=this.ids,o=this.coords,a=this.nodeSize,s=[0,i.length-1,0],l=[],u=n*n;s.length;){var c=s.pop()||0,d=s.pop()||0,p=s.pop()||0;if(d-p<=a){for(var h=p;h<=d;h++)f(o[2*h],o[2*h+1],e,t)<=u&&l.push(i[h]);continue}var m=p+d>>1,g=o[2*m],v=o[2*m+1];f(g,v,e,t)<=u&&l.push(i[m]),(0===c?e-n<=g:t-n<=v)&&(s.push(p),s.push(m-1),s.push(1-c)),(0===c?e+n>=g:t+n>=v)&&(s.push(m+1),s.push(d),s.push(1-c))}return l}}],t=[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");var t=o(new Uint8Array(e,0,2),2),i=t[0],a=t[1];if(219!==i)throw Error("Data does not appear to be in a KDBush format.");var s=a>>4;if(1!==s)throw Error("Got v".concat(s," data when expected v").concat(1,"."));var u=l[15&a];if(!u)throw Error("Unrecognized array type.");var c=o(new Uint16Array(e,2,1),1)[0];return new n(o(new Uint32Array(e,4,1),1)[0],c,u,e)}}],e&&s(n.prototype,e),t&&s(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function c(e,t,n,i){d(e,n,i),d(t,2*n,2*i),d(t,2*n+1,2*i+1)}function d(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function f(e,t,n,i){var o=e-n,a=t-i;return o*o+a*a}},5885(e,t,n){var i=n(5237),o=n(4160);void 0===o.CodeMirror&&(o.CodeMirror=i),e.exports=i},5915(e,t,n){e.exports={colorLegendWidget:n(3341),domWidget:n(6207),legendWidget:n(8130),scaleWidget:n(8849),sliderWidget:n(6286),svgWidget:n(6301),uiLayer:n(7668),widget:n(9987)}},5926(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>v,forward:()=>h,init:()=>p,inverse:()=>m,names:()=>g});var i=n(4181),o=n(384),a=n(641),s=n(6549),l=n(3690),u=n(3987),c=n(7216),d=n(3357),f=n(4484);function p(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function h(e){var t,n,d,f,p,h,m,g,v,y,b=e.x,x=e.y,w=Math.sin(e.y),A=Math.cos(e.y),C=(0,i.A)(b-this.long0,this.over);if(this.sphere)if(Math.abs(this.sin_p12-1)<=o.H0)return e.x=this.x0+this.a*(o.sK-x)*Math.sin(C),e.y=this.y0-this.a*(o.sK-x)*Math.cos(C),e;else if(Math.abs(this.sin_p12+1)<=o.H0)return e.x=this.x0+this.a*(o.sK+x)*Math.sin(C),e.y=this.y0+this.a*(o.sK+x)*Math.cos(C),e;else return g=(m=Math.acos(this.sin_p12*w+this.cos_p12*A*Math.cos(C)))?m/Math.sin(m):1,e.x=this.x0+this.a*g*A*Math.sin(C),e.y=this.y0+this.a*g*(this.cos_p12*w-this.sin_p12*A*Math.cos(C)),e;return(t=(0,s.A)(this.es),n=(0,l.A)(this.es),d=(0,u.A)(this.es),f=(0,c.A)(this.es),Math.abs(this.sin_p12-1)<=o.H0)?(p=this.a*(0,a.A)(t,n,d,f,o.sK),h=this.a*(0,a.A)(t,n,d,f,x),e.x=this.x0+(p-h)*Math.sin(C),e.y=this.y0-(p-h)*Math.cos(C),e):Math.abs(this.sin_p12+1)<=o.H0?(p=this.a*(0,a.A)(t,n,d,f,o.sK),h=this.a*(0,a.A)(t,n,d,f,x),e.x=this.x0+(p+h)*Math.sin(C),e.y=this.y0+(p+h)*Math.cos(C),e):(Math.abs(b)<o.H0&&Math.abs(x-this.lat0)<o.H0?e.x=e.y=0:(y=(v=function(e,t,n,i,o,a){var s,l,u,c,d,f,p,h,m,g,v,y,b,x=i-t,w=Math.atan((1-a)*Math.tan(e)),A=Math.atan((1-a)*Math.tan(n)),C=Math.sin(w),S=Math.cos(w),_=Math.sin(A),T=Math.cos(A),O=x,P=100;do{if(0===(u=Math.sqrt(T*(s=Math.sin(O))*(T*s)+(S*_-C*T*(l=Math.cos(O)))*(S*_-C*T*l))))return{azi1:0,s12:0};d=Math.atan2(u,c=C*_+S*T*l),h=0!=(p=1-(f=S*T*s/u)*f)?c-2*C*_/p:0,m=a/16*p*(4+a*(4-3*p)),b=O,O=x+(1-m)*a*f*(d+m*u*(h+m*c*(-1+2*h*h)))}while(Math.abs(O-b)>1e-12&&--P>0);return 0===P?{azi1:NaN,s12:NaN}:(v=1+(g=p*(o*o-o*(1-a)*(o*(1-a)))/(o*(1-a)*(o*(1-a))))/16384*(4096+g*(-768+g*(320-175*g))),{azi1:Math.atan2(T*s,S*_-C*T*l),s12:o*(1-a)*v*(d-(y=g/1024*(256+g*(-128+g*(74-47*g))))*u*(h+y/4*(c*(-1+2*h*h)-y/6*h*(-3+4*u*u)*(-3+4*h*h))))})}(this.lat0,this.long0,x,b,this.a,this.f)).azi1,e.x=v.s12*Math.sin(y),e.y=v.s12*Math.cos(y)),e)}function m(e){var t,n,p,h,m,g,v,y,b,x,w,A,C,S,_;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*o.sK*this.a)return;return p=Math.sin(n=t/this.a),h=Math.cos(n),m=this.long0,Math.abs(t)<=o.H0?g=this.lat0:(g=(0,d.A)(h*this.sin_p12+e.y*p*this.cos_p12/t),m=Math.abs(Math.abs(this.lat0)-o.sK)<=o.H0?this.lat0>=0?(0,i.A)(this.long0+Math.atan2(e.x,-e.y),this.over):(0,i.A)(this.long0-Math.atan2(-e.x,e.y),this.over):(0,i.A)(this.long0+Math.atan2(e.x*p,t*this.cos_p12*h-e.y*this.sin_p12*p),this.over)),e.x=m,e.y=g,e}return(v=(0,s.A)(this.es),y=(0,l.A)(this.es),b=(0,u.A)(this.es),x=(0,c.A)(this.es),Math.abs(this.sin_p12-1)<=o.H0)?(A=(w=this.a*(0,a.A)(v,y,b,x,o.sK))-(t=Math.sqrt(e.x*e.x+e.y*e.y)),g=(0,f.A)(A/this.a,v,y,b,x),m=(0,i.A)(this.long0+Math.atan2(e.x,-1*e.y),this.over),e.x=m,e.y=g):Math.abs(this.sin_p12+1)<=o.H0?(w=this.a*(0,a.A)(v,y,b,x,o.sK),A=(t=Math.sqrt(e.x*e.x+e.y*e.y))-w,g=(0,f.A)(A/this.a,v,y,b,x),m=(0,i.A)(this.long0+Math.atan2(e.x,e.y),this.over),e.x=m,e.y=g):(C=Math.atan2(e.x,e.y),S=Math.sqrt(e.x*e.x+e.y*e.y),e.x=(_=function(e,t,n,i,o,a){var s,l,u,c,d,f=Math.atan((1-a)*Math.tan(e)),p=Math.sin(f),h=Math.cos(f),m=Math.sin(n),g=Math.cos(n),v=Math.atan2(p,h*g),y=h*m,b=1-y*y,x=b*(o*o-o*(1-a)*(o*(1-a)))/(o*(1-a)*(o*(1-a))),w=1+x/16384*(4096+x*(-768+x*(320-175*x))),A=x/1024*(256+x*(-128+x*(74-47*x))),C=i/(o*(1-a)*w),S=100;do s=Math.cos(2*v+C),c=A*(l=Math.sin(C))*(s+A/4*((u=Math.cos(C))*(-1+2*s*s)-A/6*s*(-3+4*l*l)*(-3+4*s*s))),d=C,C=i/(o*(1-a)*w)+c;while(Math.abs(C-d)>1e-12&&--S>0);if(0===S)return{lat2:NaN,lon2:NaN};var _=p*l-h*u*g,T=Math.atan2(p*u+h*l*g,(1-a)*Math.sqrt(y*y+_*_)),O=a/16*b*(4+a*(4-3*b));return{lat2:T,lon2:t+(Math.atan2(l*m,h*u-p*l*g)-(1-O)*a*y*(C+O*l*(s+O*u*(-1+2*s*s))))}}(this.lat0,this.long0,C,S,this.a,this.f)).lon2,e.y=_.lat2),e}var g=["Azimuthal_Equidistant","aeqd"];let v={init:p,forward:h,inverse:m,names:g}},5930(e){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},5933(e,t,n){var i=n(8336),o=n(6500),a={dom:{}},s={},l={},u={},c={},d={},f={},p={},h={},m={};m.registerFileReader=function(e,t){f[e]=t},m.createFileReader=function(e,t){return f.hasOwnProperty(e)?f[e](t):null},m.registerRenderer=function(e,t){u[e]=t},m.createRenderer=function(e,t,n,i){if(u.hasOwnProperty(e)){var o=u[e]({layer:t,canvas:n,options:i});return o._init(),o}return null},m.checkRenderer=function(e,t){if(null===e)return e;if(u.hasOwnProperty(e)){var n=u[e];if(!n.supported||n.supported())return n.apiname||e;if(!n.fallback||t)return!1;var i=m.checkRenderer(n.fallback(),!0);return!1!==i&&console.warn(e+" renderer is unavailable, using "+i+" renderer instead"),i}return!1},m.rendererForFeatures=function(e){var t,n,i,o,a,s,l=["webgl","canvas","svg","vtkjs",null];for(n=0;n<l.length;n+=1)if(t=l[n],!1!==m.checkRenderer(t,!0)){if(!e)return t;if(c[t]){for(o=0,s=!0;o<e.length;o+=1)if(i=e[o],a=null,i.indexOf(".")>=0&&(a=i,i=i.substr(0,i.indexOf("."))),void 0===c[t][i]||a&&d[t][i]&&!d[t][i][a]){s=!1;break}if(s)return t}}return console.warn('There is no renderer available for the feature list "'+(e||[]).join(", ")+'".'),!1},m.registerFeature=function(e,t,n,i){e in c||(c[e]={},d[e]={});var o=c[e][t];return o&&console.warn("The "+e+"."+t+" feature is already registered"),c[e][t]=n,d[e][t]=i,o},m.createFeature=function(e,t,n,i){var a=n.api(),s={layer:t,renderer:n};if(a in c&&e in c[a]){void 0!==i&&o.deepMerge(s,i);var l=c[a][e](s);return void 0===t.gcs&&(t.gcs=function(){return t.map().gcs()}),l}return null},m.registerLayerAdjustment=function(e,t,n){e in p||(p[e]={});var i=p[e][t];return i&&console.warn("The "+e+"."+t+" layer adjustment is already registered"),p[e][t]=n,i},m.adjustLayerForRenderer=function(e,t){var n=t.rendererName();n&&p&&p[n]&&p[n][e]&&p[n][e].apply(t)},m.registerLayer=function(e,t,n){s[e]=t,l[e]=n},m.createLayer=function(e,t,n){var i={map:t},a=null;if(!(e in s))return null;if(n.renderer||n.features||!l||(i.features=l[e]),void 0!==n){var u=n.data;delete n.data,o.deepMerge(i,n),u&&(i.data=u)}return(a=s[e](i)).layerName=e,a._init(),a},m.registerWidget=function(e,t,n){e in a||(a[e]={});var i=a[e][t];return i&&console.warn("The "+e+"."+t+" widget is already registered"),a[e][t]=n,i},m.createWidget=function(e,t,n){var i={layer:t};if(e in a.dom)return void 0!==n&&o.deepMerge(i,n),a.dom[e](i);throw Error("Cannot create unknown widget "+e)},m.registerAnnotation=function(e,t,n){var o=h[e];return o&&console.warn("The "+e+" annotation is already registered"),h[e]={func:t,features:n||{}},i["annotation_"+e]="geo_annotation_"+e,o},m.createAnnotation=function(e,t){return h[e]?h[e].func(t):void console.warn("The "+e+" annotation is not registered")},m.listAnnotations=function(){return Object.keys(h)},m.featuresForAnnotations=function(e){var t=[];return(Array.isArray(e)?e:Object.keys(e)).forEach(function(n){h[n]&&Object.keys(h[n].features).forEach(function(i){Array.isArray(e)||!0===e[n]||!Array.isArray(h[n].features[i])?t.push(i):e[n].forEach(function(e){h[n].features[i].includes(e)&&t.push(i)})})}),t},m.rendererForAnnotations=function(e){return m.rendererForFeatures(m.featuresForAnnotations(e))},m.registries={annotations:h,features:c,featureCapabilities:d,fileReaders:f,layers:s,renderers:u,widgets:a},e.exports=m},5947(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>m,forward:()=>f,init:()=>d,inverse:()=>p,names:()=>h});var i=n(384),o=n(4181),a=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],s=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],l=i.dX/5,u=1/l,c=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};function d(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function f(e){var t=(0,o.A)(e.x-this.long0,this.over),n=Math.abs(e.y),d=Math.floor(n*l);d<0?d=0:d>=18&&(d=17),n=i.dX*(n-u*d);var f={x:c(a[d],n)*t,y:c(s[d],n)};return e.y<0&&(f.y=-f.y),f.x=f.x*this.a*.8487+this.x0,f.y=f.y*this.a*1.3523+this.y0,f}function p(e){var t={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=a[18][0],t.y=e.y<0?-i.sK:i.sK;else{var n=Math.floor(18*t.y);for(n<0?n=0:n>=18&&(n=17);;)if(s[n][0]>t.y)--n;else if(s[n+1][0]<=t.y)++n;else break;var l=s[n],u=5*(t.y-l[0])/(s[n+1][0]-l[0]);u=function(e,t,n,i){for(var o=t;i;--i){var a=e(o);if(o-=a,Math.abs(a)<n)break}return o}(function(e){return(c(l,e)-t.y)/(l[1]+e*(2*l[2]+3*e*l[3]))},u,i.H0,100),t.x/=c(a[n],u),t.y=(5*n+u)*i.zq,e.y<0&&(t.y=-t.y)}return t.x=(0,o.A)(t.x+this.long0,this.over),t}var h=["Robinson","robin"];let m={init:d,forward:f,inverse:p,names:h}},5949(e,t,n){"use strict";n.d(t,{A:()=>a});var i=n(384),o=n(3385);function a(e){return Math.abs(e)<i.sK?e:e-(0,o.A)(e)*Math.PI}},5980(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="},6e3(e,t,n){"use strict";n.d(t,{A:()=>w});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a),l=n(4417),u=n.n(l),c=new URL(n(1954),n.b),d=new URL(n(4912),n.b),f=new URL(n(5980),n.b),p=new URL(n(3604),n.b),h=new URL(n(5139),n.b),m=s()(o()),g=u()(c),v=u()(d),y=u()(f),b=u()(p),x=u()(h);m.push([e.id,`/* The lint marker gutter */
.CodeMirror-lint-markers {
  width: 16px;
}

.CodeMirror-lint-tooltip {
  background-color: #ffd;
  border: 1px solid black;
  border-radius: 4px 4px 4px 4px;
  color: black;
  font-family: monospace;
  font-size: 10pt;
  overflow: hidden;
  padding: 2px 5px;
  position: fixed;
  white-space: pre;
  white-space: pre-wrap;
  z-index: 100;
  max-width: 600px;
  opacity: 0;
  transition: opacity .4s;
  -moz-transition: opacity .4s;
  -webkit-transition: opacity .4s;
  -o-transition: opacity .4s;
  -ms-transition: opacity .4s;
}

.CodeMirror-lint-mark {
  background-position: left bottom;
  background-repeat: repeat-x;
}

.CodeMirror-lint-mark-warning {
  background-image: url(${g});
}

.CodeMirror-lint-mark-error {
  background-image: url(${v});
}

.CodeMirror-lint-marker {
  background-position: center center;
  background-repeat: no-repeat;
  cursor: pointer;
  display: inline-block;
  height: 16px;
  width: 16px;
  vertical-align: middle;
  position: relative;
}

.CodeMirror-lint-message {
  padding-left: 18px;
  background-position: top left;
  background-repeat: no-repeat;
}

.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {
  background-image: url(${y});
}

.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {
  background-image: url(${b});
}

.CodeMirror-lint-marker-multiple {
  background-image: url(${x});
  background-repeat: no-repeat;
  background-position: right bottom;
  width: 100%; height: 100%;
}

.CodeMirror-lint-line-error {
  background-color: rgba(183, 76, 81, 0.08);
}

.CodeMirror-lint-line-warning {
  background-color: rgba(255, 211, 0, 0.1);
}
`,"",{version:3,sources:["webpack://./node_modules/codemirror/addon/lint/lint.css"],names:[],mappings:"AAAA,2BAA2B;AAC3B;EACE,WAAW;AACb;;AAEA;EACE,sBAAsB;EACtB,uBAAuB;EACvB,8BAA8B;EAC9B,YAAY;EACZ,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,qBAAqB;EACrB,YAAY;EACZ,gBAAgB;EAChB,UAAU;EACV,uBAAuB;EACvB,4BAA4B;EAC5B,+BAA+B;EAC/B,0BAA0B;EAC1B,2BAA2B;AAC7B;;AAEA;EACE,gCAAgC;EAChC,2BAA2B;AAC7B;;AAEA;EACE,yDAA+U;AACjV;;AAEA;EACE,yDAAmT;AACrT;;AAEA;EACE,kCAAkC;EAClC,4BAA4B;EAC5B,eAAe;EACf,qBAAqB;EACrB,YAAY;EACZ,WAAW;EACX,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,6BAA6B;EAC7B,4BAA4B;AAC9B;;AAEA;EACE,yDAAuW;AACzW;;AAEA;EACE,yDAAmT;AACrT;;AAEA;EACE,yDAAuN;EACvN,4BAA4B;EAC5B,iCAAiC;EACjC,WAAW,EAAE,YAAY;AAC3B;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,wCAAwC;AAC1C",sourcesContent:['/* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n.CodeMirror-lint-line-error {\n  background-color: rgba(183, 76, 81, 0.08);\n}\n\n.CodeMirror-lint-line-warning {\n  background-color: rgba(255, 211, 0, 0.1);\n}\n'],sourceRoot:""}]);let w=m},6001(e,t,n){var i=n(8899),o=n(4897),a=n(4341),s=n(6411),l=function(e){"use strict";if(!(this instanceof l))return new l(e);o.call(this);var t,i,u,c,d,f,p,h,m,g,v=n(4692),y=n(4128),b=n(8336),x=n(4341).throttle,w=n(4341).debounce,A=n(4341).actionMatch,C=n(9971),S=this,_=0,T=null,O=!1,P=!1,M=function(){};function E(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)}function D(){f={boundDocumentHandlers:f.boundDocumentHandlers}}return t=a.deepMerge({},{throttle:30,discreteZoom:!1,actions:[{action:b.pan,input:"left",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"},{action:b.zoom,input:"right",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button zoom"},{action:b.zoom,input:"wheel",modifiers:{shift:!1},owner:"geo.mapInteractor",name:"wheel zoom"},{action:b.rotate,input:"left",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"button rotate"},{action:b.rotate,input:"wheel",modifiers:{shift:!0,ctrl:!1},owner:"geo.mapInteractor",name:"wheel rotate"},{action:b.select,input:"left",modifiers:{shift:!0,ctrl:!0},selectionRectangle:y.select,owner:"geo.mapInteractor",name:"drag select"},{action:b.zoomselect,input:"left",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:b.unzoomselect,input:"right",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:b.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:b.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"},{action:b.pan,input:"middle",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"}],click:{enabled:!0,buttons:{left:!0,right:!0,middle:!0},duration:0,cancelOnMove:!0},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:!1,ctrl:!1},1:{shift:!0,ctrl:!0},2:{shift:!0,ctrl:!1}},metakeyMouseEvents:["shift","ctrl","shift+ctrl","shift+alt","shift+meta"],focusHighlight:!0},alwaysTouch:!1,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:!0,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[b.pan,b.zoom]},spring:{enabled:!1,springConstant:5e-5},zoomAnimation:{enabled:!0,duration:500,ease:function(e){return(2-e)*e}}},e||{}),e&&e.actions&&(t.actions=a.deepMerge([],e.actions)),e&&e.momentum&&e.momentum.actions&&(t.momentum.actions=a.deepMerge([],e.momentum.actions)),e&&e.keyboard&&void 0!==e.keyboard.actions&&(t.keyboard.actions=a.deepMerge({},e.keyboard.actions)),i={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:!1,right:!1,middle:!1},modifiers:{alt:!1,ctrl:!1,shift:!1,meta:!1},time:new Date,deltaTime:1,velocity:{x:0,y:0}},f={},p={},this._handleKeys=function(e,n,i){i&&!0===i.simulated&&(n=i);var o,a,s=t.keyboard.meta||{0:{}},l=S.map(),u=l.size(),c=e,d="",f={};for(o in s)s.hasOwnProperty(o)&&(void 0===s[o].shift||!!s[o].shift===n.shiftKey)&&(void 0===s[o].ctrl||!!s[o].ctrl===n.ctrlKey)&&(void 0===s[o].alt||!!s[o].alt===n.altKey)&&(void 0===s[o].meta||!!s[o].meta===n.metaKey)&&(a=o);if(void 0!==a){switch(n.stopPropagation(),n.preventDefault(),e.indexOf(".")>=0&&(c=e.substr(0,e.indexOf(".")),d=e.substr(e.indexOf(".")+1)),c){case"zoom":switch(d){case"in":f.zoomDelta=[.05,.25,1][a];break;case"out":f.zoomDelta=-[.05,.25,1][a];break;default:isNaN(parseFloat(d))||(f.zoom=parseFloat(d))}break;case"pan":switch(d){case"down":f.panY=-Math.max(1,[0,.05,.5][a]*u.height);break;case"left":f.panX=Math.max(1,[0,.05,.5][a]*u.width);break;case"right":f.panX=-Math.max(1,[0,.05,.5][a]*u.width);break;case"up":f.panY=Math.max(1,[0,.05,.5][a]*u.height)}break;case"rotate":switch(d){case"ccw":f.rotationDelta=[1,5,90][a]*Math.PI/180;break;case"cw":f.rotationDelta=-[1,5,90][a]*Math.PI/180;break;default:isNaN(parseFloat(d))||(f.rotation=parseFloat(d))}}l.geoTrigger(y.keyaction,{move:f,action:e,factor:a,event:n}),!f.cancel&&(void 0!==f.zoom?l.zoom(f.zoom):f.zoomDelta&&l.zoom(l.zoom()+f.zoomDelta),void 0!==f.rotation?l.rotation(f.rotation):f.rotationDelta&&l.rotation(l.rotation()+f.rotationDelta),(f.panX||f.panY)&&l.pan({x:f.panX||0,y:f.panY||0}))}},this.hasTouchSupport=function(){return"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof window.DocumentTouch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1},this._handleTouch=function(e){var n=!1;if("mouse"===e.pointerType&&d.touchSupport&&(n=!0),"hammer.input"===e.type)if("pan"!==d.lastEventType||1===e.pointers.length)return;else n=!0,d.lastEventType=null;var i=/^(.*)(start|end|move|tap)$/.exec(e.type);if(i&&3===i.length||(n=!0),n){f.boundDocumentHandlers&&d.lastEvent&&S._handleMouseUpDocument(d.lastEvent);return}e.which=i[1];var o=new Date().valueOf();("pan"!==e.which||"pan"===d.lastEventType||!(o-d.lastTime<t.touchPanDelay))&&(d.lastTime=o,d.lastEventType=e.which,d.lastEvent=e,void 0===e.pageX&&void 0!==e.center&&void 0!==e.center.x&&(e.pageX=e.center.x,e.pageY=e.center.y),"start"===i[2]&&(S._handleMouseDown(e),S._setClickMaybe(!1),f.boundDocumentHandlers&&v(document).on("mousemove.geojs",S._handleMouseUpDocument)),("start"===i[2]||"move"===i[2])&&(f.boundDocumentHandlers?S._handleMouseMoveDocument(e):S._handleMouseMove(e)),("end"===i[2]||"cancel"===i[2])&&(f.boundDocumentHandlers?S._handleMouseUpDocument(e):S._handleMouseUp(e),d.lastEvent=null),"tap"!==i[2]||f.boundDocumentHandlers||(e.which=1,d.lastEventType=null,S._handleMouseDown(e),S._handleMouseUp(e),d.lastEventType=i[2]))},this._repeatMouseMoveEvent=function(e){if(i&&i.modifiers){var t={alt:i.modifiers.alt,ctrl:i.modifiers.ctrl,meta:i.modifiers.meta,shift:i.modifiers.shift};S._getMouseModifiers(e),(i.modifiers.alt!==t.alt||i.modifiers.ctrl!==t.ctrl||i.modifiers.meta!==t.meta||i.modifiers.shift!==t.shift)&&(f.boundDocumentHandlers?S.map().geoTrigger(y.actionmove,{state:S.state(),mouse:S.mouse(),event:e}):S.map().geoTrigger(y.mousemove,S.mouse()))}},this.retriggerMouseMove=function(){S.map().geoTrigger(y.mousemove,S.mouse())},this._connectEvents=function(){if(!t.map)return S;S._disconnectEvents(),h=v(t.map.node()),S._handleMouseWheel=function(){var e={};function n(n){var i,o;O||(e!==p&&(p=e={kind:"wheel",scroll:{x:0,y:0}}),n.preventDefault(),n.deltaFactor=1,1===n.originalEvent.deltaMode?n.deltaFactor=40:2===n.originalEvent.deltaMode&&(n.deltaFactor=v(window).height()),i=n.originalEvent.deltaX||0,o=n.originalEvent.deltaY||0,i=i*t.wheelScaleX*n.deltaFactor/120,o=o*t.wheelScaleY*n.deltaFactor/120,e.scroll.x+=i,e.scroll.y+=o)}function o(n){var o,a;if(e===p){if(S._getMousePosition(n),S._getMouseButton(n),S._getMouseModifiers(n),a=(A({wheel:!0},i.modifiers,t.actions)||{}).action){var s=S.map().transitionCancel("wheel."+a);switch((s|=S.cancel(b.momentum,!0))&&(i.geo=S.map().displayToGcs(i.map),i.mapgcs=S.map().displayToGcs(i.map,null)),a){case b.pan:S.map().pan({x:p.scroll.x,y:p.scroll.y},void 0,"limited");break;case b.zoom:o=-p.scroll.y,M(o,i);break;case b.rotate:S.map().rotation(S.map().rotation()+p.scroll.y*t.rotateWheelScale,i)}S.map().geoTrigger(y.actionwheel,{state:S.state(),mouse:S.mouse(),eventData:n})}p={}}}return t.throttle>0?x(t.throttle,!1,o,n):function(e){n(e),o(e)}}(),M=function(){var e,n,i,o=0,s=400;function l(s,l){var u,c=S.map();e=a.deepMerge({},l),o+=s,void 0===i&&(n=i=c.zoom()),i+=s,c&&Math.abs(o)>=1&&t.discreteZoom&&!t.zoomAnimation.enabled&&(u=Math.round(o+c.zoom()),o=o+c.zoom()-u,c.zoom(u,e))}function u(){var a,s=S.map();s&&(t.zoomAnimation.enabled?(a=i,t.discreteZoom&&(a=Math.round(a))===n&&i!==n&&(a=n+(i>n?1:-1)),(a=Math.round(1e6*s._fix_zoom(a))/1e6)!==s.zoom()?(s.transitionCancel("debounced_zoom."+b.zoom),s.transition({zoom:a,zoomOrigin:e,duration:t.zoomAnimation.duration,ease:t.zoomAnimation.ease,done:function(e){e=e||{};var n=RegExp("\\."+b.zoom+"$");!e.next&&(!e.cancel||0>(""+e.source).search(n))&&(i=void 0),t.discreteZoom&&e.cancel&&e.transition&&e.transition.end&&0>(""+e.source).search(n)&&s.zoom(e.transition.end.zoom,e.transition.end.zoomOrigin)}})):i=void 0):(a=o+s.zoom(),t.discreteZoom&&(a=Math.round(a)),s.zoom(a,e))),o=0}return(!0!==t.discreteZoom&&t.discreteZoom>0&&(s=t.discreteZoom),(!0===t.discreteZoom||t.discreteZoom>0)&&!t.zoomAnimation.enabled)?w(s,!1,u,l):function(e,t){(e||void 0!==i)&&(l(e,t),u())}}(),a.adjustActions(t.actions);var e,o={};if(["right","pan","rotate"].forEach(function(e){o[e]=t.actions.some(function(t){return t.input[e]})}),h.on("wheel.geojs",S._handleMouseWheel),h.on("mousemove.geojs",S._handleMouseMove),h.on("mousedown.geojs",S._handleMouseDown),h.on("mouseup.geojs",S._handleMouseUp),h.on("dragstart",function(){return!1}),o.right&&h.on("contextmenu.geojs",function(){return!1}),t.keyboard&&t.keyboard.actions){u=s(h[0]);var l=[];for(var f in t.keyboard.actions)t.keyboard.actions.hasOwnProperty(f)&&(u.bind(t.keyboard.actions[f],function(e){return function(t,n){S._handleKeys(e,t,n)}}(f)),l=l.concat(t.keyboard.actions[f]));t.keyboard.metakeyMouseEvents&&t.keyboard.metakeyMouseEvents.forEach(function(e){u.bind(e,S._repeatMouseMoveEvent,"keydown"),u.bind(e,S._repeatMouseMoveEvent,"keyup"),l.push(e)}),c=l}if(h.toggleClass("highlight-focus",!!(c&&c.length&&t.keyboard.focusHighlight)),(S.hasTouchSupport()||t.alwaysTouch)&&(o.pan||o.rotate)){try{(e=n(3599))&&e.Manager||(e=void 0)}catch(e){}if(void 0!==e){var m=[],g=["hammer.input"];o.rotate&&(m.push([e.Rotate,{enable:!0}]),g=g.concat(["rotatestart","rotateend","rotatemove"])),o.pan&&(m.push([e.Pan,{direction:e.DIRECTION_ALL}]),g=g.concat(["panstart","panend","panmove"])),m.push([e.Tap,{event:"doubletap",taps:2}]),m.push([e.Tap,{event:"singletap"},void 0,["doubletap"]]),g=g.concat(["singletap"]),(d={manager:new e.Manager(h[0],{recognizers:m,preventDefault:!0}),touchSupport:S.hasTouchSupport(),lastTime:0}).manager.get("doubletap").recognizeWith("singletap"),g.forEach(function(e){d.manager.on(e,S._handleTouch)})}}return S},this._disconnectEvents=function(){return c&&(u&&u.unbind(c),c=null,u=null),d&&(d.manager.destroy(),d=null),h&&(h.off(".geojs"),h=null),S._handleMouseWheel=function(){},M=function(){},S},this.map=function(e){return void 0!==e?(t.map=e,S._connectEvents(),S):t.map},this.options=function(e){return void 0===e?Object.assign({},t):(Object.assign(t,e),S._connectEvents(),S)},this._getMousePosition=function(e){if(void 0!==e.pageX&&void 0!==e.pageY){var t,n,o=h.offset();t=(n=new Date().valueOf())-i.time,i.time=n,i.deltaTime=t,i.velocity={x:(e.pageX-i.page.x)/t,y:(e.pageY-i.page.y)/t},i.page={x:e.pageX,y:e.pageY},i.map={x:e.pageX-o.left,y:e.pageY-o.top};try{i.geo=S.map().displayToGcs(i.map),i.mapgcs=S.map().displayToGcs(i.map,null)}catch(e){i.geo=i.mapgcs=null}}},this._getMouseButton=function(e){if(void 0!==e.buttons||void 0!==e.which){for(var t in i.buttons)i.buttons.hasOwnProperty(t)&&(i.buttons[t]=!1);if(void 0!==e.buttons)i.buttons.left=!!(1&e.buttons),i.buttons.right=!!(2&e.buttons),i.buttons.middle=!!(4&e.buttons);else if("mouseup"!==e.type)switch(e.which){case 1:i.buttons.left=!0;break;case 2:i.buttons.middle=!0;break;case 3:i.buttons.right=!0}e.which&&!(e.which>=1&&e.which<=3)&&(i.buttons[e.which]=!0)}},this._getMouseModifiers=function(e){i.modifiers.alt=e.altKey,i.modifiers.ctrl=e.ctrlKey,i.modifiers.meta=e.metaKey,i.modifiers.shift=e.shiftKey},this._getSelection=function(){var e=f.origin,t=S.mouse(),n=S.map(),i={},o={},s=t.map;if(f.actionRecord&&a.isFunction(f.actionRecord.selectionConstraint)){var l=f.actionRecord.selectionConstraint(t.mapgcs,e.mapgcs);s=l?n.gcsToDisplay(l.pos,null):s}else if(t.modifiers.shift){var u=Math.pow(Math.abs((s.x-e.map.x)*(s.y-e.map.y)),.5);s={x:e.map.x+Math.sign(s.x-e.map.x)*u,y:e.map.y+Math.sign(s.y-e.map.y)*u}}return i.upperLeft={x:Math.min(e.map.x,s.x),y:Math.min(e.map.y,s.y)},i.lowerRight={x:Math.max(e.map.x,s.x),y:Math.max(e.map.y,s.y)},i.upperRight={x:i.lowerRight.x,y:i.upperLeft.y},i.lowerLeft={x:i.upperLeft.x,y:i.lowerRight.y},o.upperLeft=n.displayToGcs(i.upperLeft,null),o.lowerRight=n.displayToGcs(i.lowerRight,null),o.upperRight=n.displayToGcs(i.upperRight,null),o.lowerLeft=n.displayToGcs(i.lowerLeft,null),m.data([{ul:o.upperLeft,ur:o.upperRight,ll:o.lowerLeft,lr:o.lowerRight}]),m.draw(),{display:i,gcs:o,mouse:t,origin:Object.assign({},f.origin)}},this.cancel=function(e,t){var n;return(n=e?f.action===e:!!f.action)&&(t||(p={}),D()),n},this._setClickMaybe=function(e){P=e,g&&(window.clearTimeout(g),g=null)},this._handleMouseDown=function(e){if(!O&&!(d&&"tap"===d.lastEventType&&new Date().valueOf()-d.lastTime<1e3)){S._getMousePosition(e),S._getMouseButton(e),S._getMouseModifiers(e),S.map().geoTrigger(y.mousedown,S.mouse()),t.click.enabled&&(!i.buttons.left||t.click.buttons.left)&&(!i.buttons.right||t.click.buttons.right)&&(!i.buttons.middle||t.click.buttons.middle)&&(S._setClickMaybe({x:i.page.x,y:i.page.y,buttons:Object.assign({},i.buttons)}),t.click.duration>0&&(g=window.setTimeout(function(){P=!1,g=null},t.click.duration)));var n,o=((n=A(i.buttons,i.modifiers,t.actions))||{}).action,s=S.map();s.transitionCancel("_handleMouseDown"+(o?"."+o:"")),S.cancel(b.momentum),i.velocity={x:0,y:0},o&&(p={kind:"move"},_+=1,f={action:o,actionRecord:n,origin:a.deepMerge({},i),initialZoom:s.zoom(),initialRotation:s.rotation(),initialEventRotation:e.rotation,stateId:_,delta:{x:0,y:0}},n.selectionRectangle&&(T&&(T.clear(),s.deleteLayer(T),T=null),(m=(T=s.createLayer("feature",{features:[C.capabilities.color],autoshareRenderer:!1})).createFeature("quad",{gcs:s.gcs()})).style({opacity:.25,color:{r:.3,g:.3,b:.3}}),s.geoTrigger(y.brushstart,S._getSelection())),s.geoTrigger(y.actiondown,{state:S.state(),mouse:S.mouse(),event:e}),t.throttle>0?v(document).on("mousemove.geojs",x(t.throttle,S._handleMouseMoveDocument)):v(document).on("mousemove.geojs",S._handleMouseMoveDocument),v(document).on("mouseup.geojs",S._handleMouseUpDocument),f.boundDocumentHandlers=!0)}},this._handleMouseMove=function(e){O||f.boundDocumentHandlers||(t.click.cancelOnMove&&P&&S._setClickMaybe(!1),S._getMousePosition(e),S._getMouseButton(e),S._getMouseModifiers(e),P||S.map().geoTrigger(y.mousemove,S.mouse()))},this._handleZoomrotate=function(e){var n=Math.log2(e.scale);if(!f.zoomrotateAllowZoom&&n&&Math.abs(n)>=Math.log2(1+t.zoomrotateMinimumZoom)&&(t.zoomrotateMinimumZoom&&(f.initialZoom-=n),f.zoomrotateAllowZoom=!0),f.zoomrotateAllowZoom&&n){var i=f.initialZoom+n;S.map().zoom(i,f.origin)}var o=(e.rotation-f.initialEventRotation)*Math.PI/180;if(!f.zoomrotateAllowRotation&&o&&Math.abs(o)>=t.zoomrotateMinimumRotation&&(t.zoomrotateMinimumRotation&&(f.initialEventRotation=e.rotation,o=0),f.zoomrotateAllowRotation=!0),f.zoomrotateAllowRotation){var s=f.initialRotation+o;(o=a.wrapAngle(s-S.map().rotation()))&&(o*(f.lastRotationDelta||0)>=0||Math.abs(o)>=t.zoomrotateReverseRotation)&&(S.map().rotation(s,f.origin),f.lastRotationDelta=o)}var l=f.origin.page;if(f.initialEventGeo){var u=h.offset();l=S.map().gcsToDisplay(f.initialEventGeo),l.x+=u.left,l.y+=u.top}var c=e.pageX-l.x,d=e.pageY-l.y,p=c*c+d*d;!f.zoomrotateAllowPan&&p&&p>=t.zoomrotateMinimumPan*t.zoomrotateMinimumPan&&(t.zoomrotateMinimumPan?(c=d=0,f.initialEventGeo=S.mouse().geo):f.initialEventGeo=f.origin.geo,f.zoomrotateAllowPan=!0),f.zoomrotateAllowPan&&(c||d)&&S.map().pan({x:c,y:d})},this._handleMouseMoveDocument=function(e){if(S.map()&&!O&&"move"===p.kind){if(S._getMousePosition(e),S._getMouseButton(e),S._getMouseModifiers(e),t.click.cancelOnMove)if(void 0===P.x||void 0===P.y)S._setClickMaybe(!1);else if(!0===t.click.cancelOnMove&&(i.page.x!==P.x||i.page.y!==P.y))S._setClickMaybe(!1);else{var n,o,a,s,l;Math.sqrt(Math.pow(i.page.x-P.x,2)+Math.pow(i.page.y-P.y,2))>=t.click.cancelOnMove&&S._setClickMaybe(!1)}if(!P){if(!f.action)return void console.log("WARNING: Invalid state in mapInteractor.");n=i.map.x-f.origin.map.x-f.delta.x,o=i.map.y-f.origin.map.y-f.delta.y,f.delta.x+=n,f.delta.y+=o,f.action===b.pan?S.map().pan({x:n,y:o},void 0,"limited"):f.action===b.zoom?M(-o*t.zoomScale/120,f):f.action===b.rotate?(void 0===f.origin.rotation&&(s=f.origin.map.x-S.map().size().width/2,l=f.origin.map.y-S.map().size().height/2,f.origin.rotation=S.map().rotation()-Math.atan2(l,s)),s=i.map.x-S.map().size().width/2,l=i.map.y-S.map().size().height/2,S.map().rotation(f.origin.rotation+Math.atan2(l,s))):f.action===b.zoomrotate?S._handleZoomrotate(e):f.actionRecord.selectionRectangle&&(a=S._getSelection(),S.map().geoTrigger(y.brush,a)),S.map().geoTrigger(y.actionmove,{state:S.state(),mouse:S.mouse(),event:e}),e.preventDefault()}}},this._zoomFromSelection=function(e,t,n){if((e===b.zoomselect||e===b.unzoomselect)&&t.x!==n.x&&t.y!==n.y){var i,o,a=S.map(),s=a.size(),l={x:Math.abs((n.x-t.x)/s.width),y:Math.abs((n.y-t.y)/s.height)};if(e===b.zoomselect?(o=a.displayToGcs({x:(t.x+n.x)/2,y:(t.y+n.y)/2},null),i=a.zoom()-Math.log2(Math.max(l.x,l.y))):(i=a.zoom()+Math.log2(Math.max(l.x,l.y)),o=a.center(void 0,null)),a.discreteZoom()&&(i=Math.floor(i)),a.zoom(i),e===b.zoomselect)a.center(o,null);else{var u=a.gcsToDisplay(o,null);a.pan({x:(t.x+n.x)/2-u.x,y:(t.y+n.y)/2-u.y})}}},this._handleMouseUpDocument=function(e){var n,o;if(!O&&(p={},S._setClickMaybe(!1),S._getMouseButton(e),S._getMouseModifiers(e),v(document).off(".geojs"),f.boundDocumentHandlers=!1,i.buttons.right&&e.preventDefault(),f.actionRecord&&f.actionRecord.selectionRectangle&&(S._getMousePosition(e),n=S._getSelection(),T.clear(),S.map().deleteLayer(T),T=null,m=null,S.map().geoTrigger(y.brushend,n),!0!==f.actionRecord.selectionRectangle&&S.map().geoTrigger(f.actionRecord.selectionRectangle,n),S._zoomFromSelection(f.action,n.display.lowerLeft,n.display.upperRight),S.map().geoTrigger(y.actionselection,{state:S.state(),mouse:S.mouse(),event:e,lowerLeft:n.display.lowerLeft,upperRight:n.display.upperRight})),S.map().geoTrigger(y.actionup,{state:S.state(),mouse:S.mouse(),event:e}),o=f.action,D(),t.momentum.enabled&&t.momentum.actions.includes(o))){var a=new Date().valueOf(),s=a-i.time+i.deltaTime;a-i.time<t.momentum.stopTime?(i.velocity.x*=i.deltaTime/s,i.velocity.y*=i.deltaTime/s,i.deltaTime=s):i.velocity.x=i.velocity.y=0,S.springBack(!0,o)}},this._handleMouseUp=function(e){if(!O){S._getMouseButton(e),P&&S._handleMouseClick(e);var t=S.mouse();t.buttonsDown=P.buttons,S.map().geoTrigger(y.mouseup,t)}},this._handleMouseClick=function(e){f.actionRecord&&f.actionRecord.selectionRectangle&&(T.clear(),S.map().deleteLayer(T),T=null,m=null,f.action=f.actionRecord=null),S._getMouseButton(e),S._getMouseModifiers(e),S.cancel(b.pan),v(document).off(".geojs"),f.boundDocumentHandlers=!1;var t=S.mouse();t.buttonsDown=P.buttons,t.evt=e,S._setClickMaybe(!1),S.map().geoTrigger(y.mouseclick,t)},this._handleMouseWheel=function(){},this.springBack=function(e,n){f.action!==b.momentum&&(e||(i.velocity={x:0,y:0}),f.origAction=n,f.action=b.momentum,f.origin=S.mouse(),f.momentum=S.mouse(),f.start=new Date,f.handler=function(){var e,n,i,o;if(!(f.action!==b.momentum||!S.map()||S.map().transition())){if(o=Math.min(f.momentum.deltaTime,30),i=f.start.valueOf(),f.start=new Date,a=f.momentum.velocity,s=(s=f.start-i)<=0?30:s,l=function(){if(!t.spring.enabled)return{x:0,y:0};var e,n,i=S.map().maxBounds(void 0,null),o=S.map().gcsToDisplay({x:i.left,y:i.top},null),a=S.map().gcsToDisplay({x:i.right,y:i.bottom},null),s=t.spring.springConstant,l=S.map().node().width(),u=S.map().node().height();return e=s*Math.max(0,o.x),n=s*Math.max(0,l-a.x),{x:e-n,y:s*Math.max(0,o.y)/2-s*Math.max(0,u-a.y)/2}}(),u=E(a),c=a.x/u,d=a.y/u,u*=Math.exp(-t.momentum.drag*s),!(e=E(l)*s+u<t.momentum.minSpeed?null:(u>0?(c*=u,d*=u):(c=0,d=0),{x:c-l.x*s,y:d-l.y*s})))return void D();if((n=E(e))>t.momentum.maxSpeed&&(n=t.momentum.maxSpeed/n,e.x=e.x*n,e.y=e.y*n),isFinite(e.x)&&isFinite(e.y)||(e.x=0,e.y=0),f.momentum.velocity.x=e.x,f.momentum.velocity.y=e.y,f.origAction===b.zoom){var a,s,l,u,c,d,p=f.momentum.velocity.y*o;M(-p*t.zoomScale/120,f)}else S.map().pan({x:f.momentum.velocity.x*o,y:f.momentum.velocity.y*o},void 0,"limited");f.handler&&S.map().scheduleAnimationFrame(f.handler)}},f.handler&&S.map().scheduleAnimationFrame(f.handler))},this.destroy=function(){S._disconnectEvents(),S.map()&&v(S.map().node()).removeClass("highlight-focus"),S.map(null)},this.mouse=function(){return a.deepMerge({},i)},this.keyboard=function(e){return void 0===e?a.deepMerge({},t.keyboard||{}):S.options({keyboard:e})},this.state=function(){return a.deepMerge({},f)},this.pause=function(e){return void 0===e?O:(O=!!e,S)},this.addAction=function(e,n){e&&e.action&&e.input&&(a.addAction(t.actions,e,n),t.map&&t.actions.some(function(e){return e.input.right})&&(h.off("contextmenu.geojs"),h.on("contextmenu.geojs",function(){return!1})))},this.hasAction=function(e,n,i){return a.hasAction(t.actions,e,n,i)},this.removeAction=function(e,n,i){var o=a.removeAction(t.actions,e,n,i);return t.map&&!t.actions.some(function(e){return e.input.right})&&h.off("contextmenu.geojs"),o},this.simulateEvent=function(e,t){var n,i,o,a,s;if(!S.map())return S;if("keyboard"===e&&u){var l={shiftKey:t.shift||t.shiftKey||!1,ctrlKey:t.ctrl||t.ctrlKey||!1,altKey:t.alt||t.altKey||!1,metaKey:t.meta||t.metaKey||!1,toString:function(){return t.keys},stopPropagation:function(){},preventDefault:function(){},simulated:!0};return u.trigger(l,t.event),S}return i=t.page||{},t.map&&(o=h.offset(),i.x=t.map.x+o.left,i.y=t.map.y+o.top),"left"===t.button?(a=1,s=1):"right"===t.button?(a=3,s=2):"middle"===t.button&&(a=2,s=4),t.modifiers=t.modifiers||[],t.wheelDelta=t.wheelDelta||{},n=v.Event(e,{pageX:i.x,pageY:i.y,which:a,buttons:s,altKey:t.modifiers.indexOf("alt")>=0,ctrlKey:t.modifiers.indexOf("ctrl")>=0,metaKey:t.modifiers.indexOf("meta")>=0,shiftKey:t.modifiers.indexOf("shift")>=0,center:t.center,rotation:t.touch?t.rotation||0:t.rotation,scale:t.touch?t.scale||1:t.scale,pointers:t.pointers,pointerType:t.pointerType,originalEvent:{deltaX:t.wheelDelta.x,deltaY:t.wheelDelta.y,deltaMode:t.wheelMode,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}}),t.touch&&d?S._handleTouch(n):h.trigger(n),e.indexOf(".geojs")>=0&&v(document).trigger(n),S},this._connectEvents(),this};i(l,o),e.exports=l},6021(e){e.exports="/* pointFeature sprite fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main () {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = 2.0 * length(gl_PointCoord - vec2(0.5));  // distinct for sprite\n  pointFeatureFragment(rad);\n}\n"},6062(e,t,n){var i=function(e){"use strict";if(!(this instanceof n(4897)))return new i(e);var t=this,o=this.draw,a={};return this._renderOnCanvas=function(){},this._delayRender=function(){return!1},this._canvasProperty=function(e,n,i){return e&&n?a[n]!==i&&(a[n]=i,e[n]=i):a={},t},this.draw=function(){return t.ready&&(t._update(),t.renderer()._render(),o()),t},this};e.exports=i},6067(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>a});var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(var o in i)Object.freeze(i[o]);let a=Object.freeze(i)},6174(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9481),s=function(e){return this instanceof s?(e=e||{},a.call(this,e),n(6062).call(this),this._init(e),this):new s(e)};i(s,a),o("canvas","isoline",s),e.exports=s},6194(e,t,n){e.exports=n(4099),n(303),n(5103),n(8147),n(3237),n(8490),n(3366),n(4157),n(2977),n(4200),n(7167),n(8033),n(7707),n(6205),n(6928),n(3344),n(412),n(4251),n(8793),n(6585),n(2437),n(5742),n(8492),n(5786)},6195(e,t,n){var i=n(5933).registerLayerAdjustment,o=function(){"use strict";var e=n(5933).createRenderer,t=n(4128),i=n(452),o=n(6601),a=this,s=this._init,l=this.opacity,u=this.visible,c=this.zIndex;this.opacity=function(e){var t=l.apply(a,arguments);return void 0!==e&&a.initialized()&&a.map()._updateAutoshareRenderers(),t},this.visible=function(e){if(void 0===e)return u();var t=u(),n=u.apply(a,arguments);return t!==e&&a.initialized()&&(a.map().scheduleAnimationFrame(a._update,!0),a.renderer()._render()),n},this.zIndex=function(e,t){var n=c.apply(a,arguments);return void 0!==e&&a.initialized()&&(a.map().scheduleAnimationFrame(a._update,!0),a.renderer()._render(),a.map()._updateAutoshareRenderers()),n},this.switchRenderer=function(e,t){if(e instanceof i&&e!==a.renderer()){var n=a.renderer(),o=[],s=[];a.map().listSceneObjects([a]).forEach(function(e){e._cleanup&&(e._cleanup(),e._update&&s.push(e)),e.actors&&(o=o.concat(e.actors()))}),o.forEach(function(t){n.contextRenderer().removeActor(t),e.contextRenderer().addActor(t)}),a._renderer(e),a._canvas(e.canvas()),t&&(o.length||s.length)&&(n._render(),s.forEach(function(e){e._update()}),e._render())}return a},this._init=function(){var n=a.map();return n._updateAutoshareRenderers||(n._updateAutoshareRenderers=function(){var t,a,s,l=n.sortedLayers(),u=[];l.forEach(function(n){var l=n.autoshareRenderer(),c=n instanceof o;l&&n.renderer()&&n.renderer().api()===i.apiname?!t||n.opacity()!==a||"more"!==l&&(n.opacity()>0&&1>n.opacity()||c&&!s)?(n.node()[0].contains(n.renderer().canvas()[0])||(n.switchRenderer(e(i.apiname,n),!1),u.push(n.renderer())),t=n.renderer(),a=n.opacity(),s=c):(n.renderer()!==t&&(u.push(n.renderer()),n.switchRenderer(t,!1),u.push(n.renderer())),s&=c):t=null}),l.forEach(function(e){u.indexOf(e.renderer())>=0&&e._update&&e._update()}),l.forEach(function(e){u.indexOf(e.renderer())>=0&&(e.renderer()._renderFrame(),u=u.filter(function(t){return t!==e.renderer()}))}),u.forEach(function(e){e._exit()})},n.geoOn(t.layerAdd,function(){return n._updateAutoshareRenderers()}),n.geoOn(t.layerRemove,function(){return n._updateAutoshareRenderers()})),s.apply(a,arguments)}};i("webgl","all",o),e.exports=o},6205(e,t,n){var i=n(4099),o=n(8899);i.blendFunction=function(e,t){return this instanceof i.blendFunction?(this.apply=function(n){n.m_context.blendFuncSeparate(e,t,i.GL.ONE,i.GL.ONE_MINUS_SRC_ALPHA)},this):new i.blendFunction(e,t)},i.blend=function(){"use strict";if(!(this instanceof i.blend))return new i.blend;i.materialAttribute.call(this,i.materialAttributeType.Blend);var e=!1,t=i.blendFunction(i.GL.SRC_ALPHA,i.GL.ONE_MINUS_SRC_ALPHA);return this.bind=function(n){return e=n.m_context.isEnabled(i.GL.BLEND),this.enabled()?(n.m_context.enable(i.GL.BLEND),t.apply(n)):n.m_context.disable(i.GL.BLEND),!0},this.undoBind=function(t){return e?t.m_context.enable(i.GL.BLEND):t.m_context.disable(i.GL.BLEND),!0},this},o(i.blend,i.materialAttribute)},6207(e,t,n){var i=n(9987),o=n(8899),a=n(5933).registerWidget,s=function(e){"use strict";if(!(this instanceof s))return new s(e);i.call(this,e);var t=this;return this._init=function(){return e.hasOwnProperty("parent")&&e.parent.addChild(t),t._createCanvas(),t._appendCanvasToParent(),t.canvas().addEventListener("mousedown",function(e){e.stopPropagation()}),t.reposition(),t},this._createCanvas=function(){t.canvas(document.createElement(e.el||"div"))},this};o(s,i),a("dom","dom",s),e.exports=s},6224(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(838),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e),n(8743).call(this,e);var t=this;return this._build=function(){t.actors()[0]&&t.renderer().contextRenderer().removeActor(t.actors()[0]),t.createGLMeshColored(t._createContours()),t.renderer().contextRenderer().addActor(t.actors()[0]),t.buildTime().modified()},this._init(e),this};i(s,a),o("webgl","contour",s),e.exports=s},6245(e,t,n){"use strict";n.d(t,{A:()=>o});var i=n(384);function o(e,t){for(var n,o,a=.5*e,s=i.sK-2*Math.atan(t),l=0;l<=15;l++)if(n=e*Math.sin(s),o=i.sK-2*Math.atan(t*Math.pow((1-n)/(1+n),a))-s,s+=o,1e-10>=Math.abs(o))return s;return -9999}},6265(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>v,init:()=>d,names:()=>g});var i=n(5949),o=n(4181),a=n(2736),s=n(1114),l=n(4568),u=n(1064),c=n(384);function d(){var e;if(this.phi1=this.lat1,1e-10>Math.abs(this.phi1))throw Error();this.es?(this.en=(0,s.A)(this.es),this.m1=(0,u.A)(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=p,this.forward=f):(Math.abs(this.phi1)+1e-10>=c.sK?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=m,this.forward=h)}function f(e){var t,n,i,a=(0,o.A)(e.x-(this.long0||0),this.over),s=e.y;return t=this.am1+this.m1-(0,u.A)(s,n=Math.sin(s),i=Math.cos(s),this.en),n=i*a/(t*Math.sqrt(1-this.es*n*n)),e.x=t*Math.sin(n),e.y=this.am1-t*Math.cos(n),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function p(e){var t,n,s,u;if(e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a,n=(0,a.A)(e.x,e.y=this.am1-e.y),(t=Math.abs(u=(0,l.A)(this.am1+this.m1-n,this.es,this.en)))<c.sK)t=Math.sin(u),s=n*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(u);else if(1e-10>=Math.abs(t-c.sK))s=0;else throw Error();return e.x=(0,o.A)(s+(this.long0||0),this.over),e.y=(0,i.A)(u),e}function h(e){var t,n,i=(0,o.A)(e.x-(this.long0||0),this.over),a=e.y;return Math.abs(n=this.cphi1+this.phi1-a)>1e-10?(e.x=n*Math.sin(t=i*Math.cos(a)/n),e.y=this.cphi1-n*Math.cos(t)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function m(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,s=(0,a.A)(e.x,e.y=this.cphi1-e.y);if(Math.abs(n=this.cphi1+this.phi1-s)>c.sK)throw Error();return t=1e-10>=Math.abs(Math.abs(n)-c.sK)?0:s*Math.atan2(e.x,e.y)/Math.cos(n),e.x=(0,o.A)(t+(this.long0||0),this.over),e.y=(0,i.A)(n),e}var g=["bonne","Bonne (Werner lat_1=90)"];let v={init:d,names:g}},6278(e){e.exports="/* pointFeature square/triangle fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec3 unitVar;  // distinct for square/triangle\n\nvoid main () {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = length(unitVar.xy); // distinct for square/triangle\n  pointFeatureFragment(rad);\n}\n"},6286(e,t,n){var i=n(6301),o=n(8899),a=n(5933).registerWidget,s=function(e){"use strict";if(!(this instanceof s))return new s(e);i.call(this,e);var t,o,a,l,u,c,d,f=n(2184).d3,p=n(4128),h=this,m=this._exit,g=e.width||20,v=e.height||160,y=e.width?.5*e.width:10;function b(e,t,n,i,o){var a=t.append("g");return a.append("g").append("g").attr("transform","translate("+n+","+i+") scale("+o/1024+") translate(-512,-512)").append("path").attr("d",e).attr("class","geo-glyphicon"),a}d={white:"#f4f4f4",black:"#505050"},this.size=function(){return{width:g,height:v}},this._init=function(){h._createCanvas(),h._appendCanvasToParent(),h.reposition();var e=f.select(h.canvas()),n=h.layer().map();function i(t,i){var a=o.invert(f.pointer(event,e.node())[1]),s=n.zoomRange();a=(1-a)*(s.max-s.min)+s.min,i?n.transition({zoom:a,ease:f.easeCubicInOut,duration:500,done:h._update()}):(n.zoom(a),h._update()),t.stopPropagation()}function s(){f.select(this).attr("filter",null),c.selectAll("circle,rect,path").transition().duration(100).style("fill",function(e){return d[e.fill]||null}).style("stroke",function(e){return d[e.stroke]||null})}return e.attr("width",g).attr("height",v),t=f.scaleLinear().domain([-4,4]).range([0,g]),o=f.scaleLinear().domain([0,1]).range([1.5*g,v-1.5*g]),c=e=e.append("g").classed("geo-ui-slider",!0),(a=e.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",!0).attr("cx",t(0)).attr("cy",o(0)-g+2).attr("r",(g-2)/2).style("cursor","pointer").on("click",function(){var e=n.zoom();n.transition({zoom:e+1,ease:f.easeCubicInOut,duration:500})}).on("mousedown",function(e){e.stopPropagation()}),b("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z",a,t(0),o(0)-g+2,g+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),(l=e.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",!0).attr("cx",t(0)).attr("cy",o(1)+g-2).attr("r",(g-2)/2).style("cursor","pointer").on("click",function(){var e=n.zoom();n.transition({zoom:e-1,ease:f.easeCubicInOut,duration:500})}).on("mousedown",function(e){e.stopPropagation()}),b("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z",l,t(0),o(1)+g-2,g+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),e.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",!0).attr("x",t(0)-g/6).attr("y",o(0)).attr("rx",g/10).attr("ry",g/10).attr("width",g/3).attr("height",v-3*g).style("cursor","pointer").on("click",function(e){i(e,!0)}),u=e.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",!0).attr("x",t(-4)).attr("y",o(.5)-y/2).attr("rx",3).attr("ry",3).attr("width",g).attr("height",y).style("cursor","pointer").on("mousedown",function(e){f.select(document).on("mousemove.geo.slider",function(){i(e)}),f.select(document).on("mouseup.geo.slider",function(){i(e),f.select(document).on(".geo.slider",null)}),e.stopPropagation()}),c.selectAll("*").on("mouseover",function(){f.select(this).attr("filter","url(#geo-highlight)"),c.selectAll("rect,path,circle").transition().duration(100).style("fill",function(e){return e.fill||null}).style("stroke",function(e){return e.stroke||null})}).on("mouseout",s),h.geoOn(p.zoom,h._update),s(),h._update(),h},this._exit=function(){h.geoOff(p.zoom,h._update),c.remove(),m()},this._update=function(e){var t=h.layer().map(),n=t.zoomRange(),i=t.zoom(),a=f.scaleLinear();i=(e=e||{}).value||i,a.domain([n.min,n.max]).range([1,0]).clamp(!0),u.attr("y",o(a(i))-y/2)}};o(s,i),a("dom","slider",s),e.exports=s},6301(e,t,n){var i=n(9987),o=n(8899),a=n(5933).registerWidget,s=function(e){"use strict";if(!(this instanceof s))return new s(e);i.call(this,e);var t=n(2184),o=this,a=this._exit,l=null;return this._init=function(){var t;return e.hasOwnProperty("parent")&&(e.parent.addChild(o),t=e.parent.canvas()),o._createCanvas(t),o.canvas().addEventListener("mousedown",function(e){e.stopPropagation()}),o.reposition(),o},this._exit=function(){l&&l._exit(),a()},this._createCanvas=function(e){var n={layer:o.layer(),widget:!0};e&&(n.d3Parent=e),(l=t(n))._resize=function(){},o.canvas(l.canvas().node())},this};o(s,i),a("dom","svg",s),e.exports=s},6314(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,i,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(s[u]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]&&(d[1]="@media ".concat(d[2]," {").concat(d[1],"}")),d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},6411(e,t,n){var i;!function(o,a,s){if(o){for(var l,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)u[111+p]="f"+p;for(p=0;p<=9;++p)u[p+96]=p.toString();y.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},y.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},y.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1||function e(t,n){return null!==t&&t!==a&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},y.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t]);l=null},y.init=function(){var e=y(a);for(var t in e)"_"!==t.charAt(0)&&(y[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},y.init(),o.Mousetrap=y,e.exports&&(e.exports=y),s===(i=(function(){return y}).call(t,n,t,e))||(e.exports=i)}function h(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return u[e.which]?u[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t){var n,i,o,a,s,c,p=[];for(c=0,a="+"===(n=e)?["+"]:(n=n.replace(/\+{2}/g,"+plus")).split("+");c<a.length;++c)f[s=a[c]]&&(s=f[s]),t&&"keypress"!=t&&d[s]&&(s=d[s],p.push("shift")),g(s)&&p.push(s);return i=s,(o=t)||(o=function(){if(!l)for(var e in l={},u)e>95&&e<112||u.hasOwnProperty(e)&&(l[u[e]]=e);return l}()[i]?"keydown":"keypress"),"keypress"==o&&p.length&&(o="keydown"),{key:s,modifiers:p,action:t=o}}function y(e){var t,n=this;if(e=e||a,!(n instanceof y))return new y(e);n.target=e,n._callbacks={},n._directMap={};var i={},o=!1,s=!1,l=!1;function u(e){e=e||{};var t,n=!1;for(t in i){if(e[t]){n=!0;continue}i[t]=0}n||(l=!1)}function c(e,t,o,a,s,l){var u,c,d,f,p=[],h=o.type;if(!n._callbacks[e])return[];for("keyup"==h&&g(e)&&(t=[e]),d=0;d<n._callbacks[e].length;++d)if((f=n._callbacks[e][d],a||!f.seq||i[f.seq]==f.level)&&h==f.action&&("keypress"==h&&!o.metaKey&&!o.ctrlKey||(u=t,c=f.modifiers,u.sort().join(",")===c.sort().join(",")))){var m=!a&&f.combo==s,v=a&&f.seq==a&&f.level==l;(m||v)&&n._callbacks[e].splice(d,1),p.push(f)}return p}function d(e,t,i,o){!n.stopCallback(t,t.target||t.srcElement,i,o)&&!1===e(t,i)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function f(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,i=m(e);if(i){if("keyup"==e.type&&o===i){o=!1;return}n.handleKey(i,(t=[],e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t),e)}}n._handleKey=function(e,t,n){var i,o=c(e,t,n),a={},f=0,p=!1;for(i=0;i<o.length;++i)o[i].seq&&(f=Math.max(f,o[i].level));for(i=0;i<o.length;++i){if(o[i].seq){if(o[i].level!=f)continue;p=!0,a[o[i].seq]=1,d(o[i].callback,n,o[i].combo,o[i].seq);continue}p||d(o[i].callback,n,o[i].combo)}var h="keypress"==n.type&&s;n.type!=l||g(e)||h||u(a),s=p&&"keydown"==n.type};n._bindMultiple=function(e,a,s){for(var f=0;f<e.length;++f)!function e(a,s,f,p,h){n._directMap[a+":"+f]=s;var g,y=(a=a.replace(/\s+/g," ")).split(" ");y.length>1?function(n,a,s,c){function f(e){d(s,e,n),"keyup"!==c&&(o=m(e)),setTimeout(u,10)}i[n]=0;for(var p=0;p<a.length;++p){var h=p+1===a.length?f:function(e){return function(){l=e,++i[n],clearTimeout(t),t=setTimeout(u,1e3)}}(c||v(a[p+1]).action);e(a[p],h,c,n,p)}}(a,y,s,f):(g=v(a,f),n._callbacks[g.key]=n._callbacks[g.key]||[],c(g.key,g.modifiers,{type:g.action},p,a,h),n._callbacks[g.key][p?"unshift":"push"]({callback:s,modifiers:g.modifiers,action:g.action,seq:p,level:h,combo:a}))}(e[f],a,s)},h(e,"keypress",f),h(e,"keydown",f),h(e,"keyup",f)}}("u">typeof window?window:null,"u">typeof window?document:null)},6446(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(6465),s=function(e){return this instanceof s?(e=e||{},a.call(this,e),n(9966).call(this),this._init(e),this):new s(e)};i(s,a),o("svg","track",s),e.exports=s},6457(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},6465(e,t,n){var i=n(8899),o=n(9186),a=n(5933),s=n(4341),l=function(e){"use strict";if(!(this instanceof l))return new l(e);var t=n(5204);e=e||{},o.call(this,e);var i,u,c,d,f,p=this,h={},m={startTime:void 0!==e.startTime?e.startTime:null,endTime:void 0!==e.endTime?e.endTime:null,duration:void 0!==e.duration?e.duration:null,start:0,end:0},g=this.draw,v=this._exit,y=this._init,b=this.modified,x=this.style,w=this._update;return this.featureType="track",this._linePosition=function(e){return function(t,n,i,o){var a=m.timeFunc(t,n,i,o);return"past"===e&&a>=m.start||"current"===e&&a<m.start?m.startPosition[o]:"current"===e&&a>m.end||"future"===e&&a<m.end?m.endPosition[o]:m.positionFunc(t,n,i,o)}},this._headPosition=function(e,t){return m.endPosition[t]},this._headText=function(e,t){return m.text[t]},this._updateTimeRange=function(){null!==m.endTime||null===m.endTime&&(null===m.startTime||null==m.duration)?(m.end=null!==m.endTime?m.endTime:m.timeExtents.end,null!==m.startTime&&(null===m.endTime||m.startTime<=m.endTime)?m.start=m.startTime:null!==m.duration?m.start=m.end-m.duration:m.start=m.timeExtents.start):(m.start=m.startTime,m.end=m.start+m.duration)},this.calculateTimePosition=function(e,n,i){p.dataTime().timestamp()>=p.buildTime().timestamp()&&p._build(),n=null===n?p.layer().map().gcs():void 0===n?p.gcs():n;var o=t({source:p.gcs(),target:n}),a=p.data(),s=[],l=a.map(function(t,n){var i=m.trackFunc(t,n);if(s.push(i),!i.length)return{x:0,y:0,z:0,posidx:-1};var o,a,l,u,c=0,d=i.length-1;if(1===i.length)return{posidx:c,angidx0:c,angidx1:c};if((o=m.timeFunc(i[c],c,t,n))>=e)return{posidx:c,angidx0:c,angidx1:c+1};if((a=m.timeFunc(i[d],d,t,n))<=e)return{posidx:d,angidx0:d-1,angidx1:d};for(;d-c>1;){if(l=Math.floor((d+c)/2),(u=m.timeFunc(i[l],l,t,n))===e)return{posidx:l,angidx0:l-1,angidx1:l+1};u<e?(o=u,c=l):(a=u,d=l)}var f=(e-o)/(a-o);return{posidx0:c,posidx1:d,factor0:1-f,factor1:f,angidx0:c,angidx1:d}});return l.forEach(function(e,t){var n,a,l;!(e.posidx<0)&&(void 0===e.posidx1?n=m.positionFunc(s[t][e.posidx],e.posidx,s[t],t):(a=o.forward(m.positionFunc(s[t][e.posidx0],e.posidx0,s[t],t),!0),l=o.forward(m.positionFunc(s[t][e.posidx1],e.posidx1,s[t],t),!0),n=o.inverse({x:a.x*e.factor0+l.x*e.factor1,y:a.y*e.factor0+l.y*e.factor1,z:(a.z||0)*e.factor0+(l.z||0)*e.factor1},!0)),e.x=n.x,e.y=n.y,e.z=n.z||0,i&&(void 0===e.posidx1&&(a=o.forward(e.angidx0===e.posidx?n:m.positionFunc(s[t][e.angidx0],e.angidx0,s[t],t),!0),l=o.forward(e.angidx1===e.posidx?n:m.positionFunc(s[t][e.angidx1],e.angidx1,s[t],t),!0)),e.angle=Math.atan2(l.y-a.y,l.x-a.x)))}),l},this._build=function(){p.buildTime().modified(),i||(i={past:p.layer().createFeature("line"),future:p.layer().createFeature("line"),current:p.layer().createFeature("line")},p.dependentFeatures([i.past,i.current,i.future]));var e,t,n=p.data();m.data=n,m.timeFunc=p.style.get("time"),m.positionFunc=p.style.get("position"),m.trackFunc=p.style.get("track"),m.textFunc=p.style.get("text"),["past","current","future"].forEach(function(e){i[e].style(p.style()).style(p[e+"Style"]()).line(p.style("track")).gcs(p.gcs()).data(n).position(p._linePosition(e))});var o={};if(n.forEach(function(e,t){var n,i=m.trackFunc(e,t);i.length&&(n=m.timeFunc(i[0],0,e,t),(void 0===o.start||n<o.start)&&(o.start=n),i.length>1&&(n=m.timeFunc(i[i.length-1],i.length-1,e,t)),(void 0===o.end||n>o.end)&&(o.end=n))}),m.timeExtents=o,p._updateTimeRange(),m.startPosition=p.calculateTimePosition(m.start,null),m.endPosition=p.calculateTimePosition(m.end,null,!0),m.text=n.map(function(n,i){var o=m.textFunc(n,i);return(e|=null==o,null==o||""===o)?"":(t=!0,m.startPosition[i].posidx<0&&(o=""),o)}),e&&!c){if(!(a.registries.features[p.layer().rendererName()]||{}).marker){var s=a.rendererForFeatures(["marker"]);u=a.createLayer("feature",p.layer().map(),{renderer:s}),p.layer().addChild(u),p.layer().node().append(u.node())}c=(u||p.layer()).createFeature("marker");var l=p.dependentFeatures();l.push(c),p.dependentFeatures(l)}if(t&&!f){if(!(a.registries.features[p.layer().rendererName()]||{}).text){var h=a.rendererForFeatures(["text"]);d=a.createLayer("feature",p.layer().map(),{renderer:h}),p.layer().addChild(d),p.layer().node().append(d.node())}f=(d||p.layer()).createFeature("text");var g=p.dependentFeatures();g.push(f),p.dependentFeatures(g)}if(c){c.headData=m.endPosition,c.style(p.markerStyle()).gcs(p.gcs()).data(n).position(p._headPosition);var v=c.style.get("radius");c.style("radius",function(e,t){return m.text[t]||m.startPosition[t].posidx<0?0:v(e,t)})}return f&&(f.headData=m.endPosition,f.style(p.textStyle()).gcs(p.gcs()).data(n).text(p._headText).position(p._headPosition)),p},this._updateTimeAndPosition=function(){i&&(p._updateTimeRange(),m.startPosition=p.calculateTimePosition(m.start,null),m.endPosition=p.calculateTimePosition(m.end,null,!0),i.past.modified(),i.current.modified(),i.future.modified(),c&&c.modified(),f&&f.modified(),p.updateTime().modified(),p.modified())},this._update=function(){return w.call(p),(p.dataTime().timestamp()>=p.buildTime().timestamp()||p.updateTime().timestamp()<=p.timestamp())&&p._build(),p.updateTime().modified(),p},this.draw=function(){var e=g();return i&&(i.past.draw(),i.current.draw(),i.future.draw()),c&&c.draw(),f&&f.draw(),e},this.modified=function(){var e=b();return i&&(i.past.modified(),i.current.modified(),i.future.modified()),c&&c.modified(),f&&f.modified(),e},this.style=function(e,t,n){return"style"===(n=n||"style")?x(e,t):void 0===e?h[n]:"string"==typeof e&&void 0===t?(h[n]||{})[e]:(void 0===h[n]&&(h[n]={}),void 0===t?h[n]=s.deepMerge(h[n],e):h[n][e]=t,p.modified(),p)},this.style.get=x.get,["markerStyle","textStyle","pastStyle","currentStyle","futureStyle"].forEach(function(e){p[e]=function(t,n){return p.style(t,n,e)}}),this.track=function(e){return void 0===e?p.style("track"):(p.style("track",e),p.dataTime().modified(),p.modified(),p)},this.position=function(e){return void 0===e?p.style("position"):(p.style("position",e),p.dataTime().modified(),p.modified(),p)},this.time=function(e){return void 0===e?p.style("time"):(p.style("time",e),p.dataTime().modified(),p.modified(),p)},this.timeRange=function(e){if(void 0===e)return{startTime:m.startTime,endTime:m.endTime,duration:m.duration,start:m.start,end:m.end,minimum:(m.timeExtents||{}).start,maximum:(m.timeExtents||{}).end};var t=!1;return void 0!==e.startTime&&e.startTime!==m.startTime&&(m.startTime=null===e.startTime?e.startTime:+e.startTime,t=!0),void 0!==e.endTime&&e.endTime!==m.endTime&&(m.endTime=null===e.endTime?e.endTime:+e.endTime,t=!0),void 0!==e.duration&&e.duration!==m.duration&&(m.duration=null===e.duration?e.duration:+e.duration,t=!0),t&&p._updateTimeAndPosition(),p},this.startTime=function(e){return void 0===e?m.startTime:(e!==m.startTime&&(m.startTime=null===e?e:+e,p._updateTimeAndPosition()),p)},this.endTime=function(e){return void 0===e?m.endTime:(e!==m.endTime&&(m.endTime=null===e?e:+e,p._updateTimeAndPosition()),p)},this.duration=function(e){return void 0===e?m.duration:(e!==m.duration&&(m.duration=null===e?e:+e,p._updateTimeAndPosition()),p)},this._mergeSearchResults=function(e,t){return e.extra=e.extra||{},t.forEach(function(t){return t.value.index.forEach(function(n,i){0>e.index.indexOf(n)&&(e.index.push(n),e.found.push(t.value.found[i]),e.where=e.where||{},t.value.extra&&t.value.extra[n]&&(e.extra[n]=t.value.extra[n]),s.isObject(e.extra[n])||(e.extra[n]={value:e.extra[n]}),e.extra[n].where=t.key)})}),e},this.pointSearch=function(e){var t=i.current.pointSearch(e),n=i.past.pointSearch(e),o=i.future.pointSearch(e),a=c?c.pointSearch(e):{index:[]};return this._mergeSearchResults(t,[{key:"marker",value:a},{key:"past",value:n},{key:"future",value:o}])},this.polygonSearch=function(e,t){var n=i.current.polygonSearch(e,t),o=i.past.polygonSearch(e,t),a=i.future.polygonSearch(e,t),s=c?c.polygonSearch(e,t):{index:[]};return this._mergeSearchResults(n,[{key:"marker",value:s},{key:"past",value:o},{key:"future",value:a}])},this._exit=function(){i&&p.layer()&&(p.layer().deleteFeature(i.past),p.layer().deleteFeature(i.current),p.layer().deleteFeature(i.future)),i=null,(u||p.layer())&&c&&(u||p.layer()).deleteFeature(c),u&&p.layer()&&p.layer().removeChild(u),u=null,(d||p.layer())&&f&&(d||p.layer()).deleteFeature(f),d&&p.layer()&&p.layer().removeChild(d),d=null,p.dependentFeatures([]),v()},this._init=function(e){e=e||{},y.call(p,e);var t=s.deepMerge({},{track:s.identityFunction,position:s.identityFunction,time:function(e,t){return void 0!==e.t?e.t:t},uniformLine:"drop",closed:!1},void 0===e.style?{}:e.style),n=s.deepMerge({},{rotateWithMap:!0,rotation:function(e,t){return-m.endPosition[t].angle||0}},void 0===e.markerStyle?{}:e.markerStyle),i=s.deepMerge({},{rotateWithMap:!0,rotation:function(e,t){return void 0!==m.endPosition[t].angle?-m.endPosition[t].angle+Math.PI/2:0}},void 0===e.textStyle?{}:e.textStyle),o=s.deepMerge({},{strokeOpacity:.25},void 0===e.pastStyle?{}:e.pastStyle),a=s.deepMerge({},{},void 0===e.currentStyle?{}:e.currentStyle),l=s.deepMerge({},{strokeOpacity:.25},void 0===e.futureStyle?{}:e.futureStyle);["track","position","time"].forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),p.style(t),p.markerStyle(n),p.textStyle(i),p.pastStyle(o),p.currentStyle(a),p.futureStyle(l)},this};i(l,o),e.exports=l},6496(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n*n+i*i+o*o+a*a;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=i*s,e[2]=o*s,e[3]=a*s),e}},6500(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(4692),a=n(1413);a=a.__esModule?a.default:a;var s,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c='<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="100%" height="100%"></foreignObject></svg>',d={},f=200,p=15;function h(){var e;for(e=0;e<arguments.length;e+=1)if(isFinite(arguments[e]))return arguments[e]}var m={pointInPolygon:function(e,t,n,i){return t.outer&&(n=t.inner,t=t.outer),!(t.length<3)&&(!i||!i.min||!i.max||!(e.x<i.min.x)&&!(e.y<i.min.y)&&!(e.x>i.max.x)&&!(e.y>i.max.y))&&m.distanceToPolygon2d(e,n?{outer:t,inner:n}:t,!0)>0},pointToTriangleBasis2d:function(e,t,n,i){var o=n.x-t.x,a=i.x-t.x,s=n.y-t.y,l=i.y-t.y,u=e.x-t.x,c=e.y-t.y,d=o*l-a*s;if(d)return{x:(u*l-c*a)/d,y:(-(u*s)+c*o)/d}},isReadyImage:function(e,t){return e instanceof Image&&!!e.complete&&!!e.src&&(!!e.naturalWidth&&!!e.naturalHeight||!!t)},isReadyVideo:function(e,t){return e instanceof HTMLVideoElement&&!!e.src&&void 0!==e.HAVE_CURRENT_DATA&&(!!e.videoWidth&&!!e.videoHeight&&!!(e.readyState>=e.HAVE_CURRENT_DATA)||!!t&&!!e.error)},isFunction:function(e){return"function"==typeof e},ensureFunction:function(e){return m.isFunction(e)?e:function(){return e}},isNonNullFinite:function(e){return isFinite(e)&&null!==e&&!1!==e&&""!==e},randomString:function(e){var t,n,i;for(n=0,e=e||8,t="";n<e;n+=1)i=Math.floor(Math.random()*u.length),t+=u.substring(i,i+1);return t},normalizeCoordinates:function(e){return Array.isArray(e=e||{})?{x:e[0],y:e[1],z:e[2]||0}:{x:h(e.x,e.longitude,e.lng,e.lon,0),y:h(e.y,e.latitude,e.lat,0),z:h(e.z,e.elevation,e.elev,e.height,0)}},range:function(e,t,n){n=n||1;for(var i=[],o=e;o<=t;o+=n)i.push(o);return i},compareArrays:function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})},vec3AsArray:function(){return[0,0,0]},mat3AsArray:function(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function(e,t,n,i,o){i=void 0===i?.2:i,o=void 0===o?.1:o;var a=e.sourceByName(t),s=a.data(),l=Math.floor((i+1)*n);if((s=a.data())instanceof Float32Array&&(s.length===n||s.length>=n&&s.length<=l))return s;var u=n;return s instanceof Float32Array&&s.length&&n&&o>0&&(u=Math.floor((o+1)*n)),s=new Float32Array(u),a.setData(s),s},adjustActions:function(e){var t,n;for(n=0;n<e.length;n+=1){if(t=e[n],"string"===o.type(t.input)){var i={};i[t.input]=!0,t.input=i}if(t.modifiers||(t.modifiers={}),"string"===o.type(t.modifiers)){var a={};a[t.modifiers]=!0,t.modifiers=a}}},addAction:function(e,t,n){n?e.push(t):e.unshift(t),m.adjustActions(e)},hasAction:function(e,t,n,i){t&&t.action&&(n=t.name,i=t.owner,t=t.action);for(var o=0;o<e.length;o+=1)if((!t||e[o].action===t)&&(!n||e[o].name===n)&&(!i||e[o].owner===i))return e[o];return null},removeAction:function(e,t,n,i){var o,a=0;do(o=m.hasAction(e,t,n,i))&&(e.splice(e.indexOf(o),1),a+=1);while(o);return a},actionMatch:function(e,t,n){var i;if(n.some(function(n){for(var o in n.input)if(n.input.hasOwnProperty(o)&&(!1===n.input[o]&&e[o]||n.input[o]&&!e[o]))return!1;for(var a in n.modifiers)if(n.modifiers.hasOwnProperty(a)&&(!1===n.modifiers[a]&&t[a]||n.modifiers[a]&&!t[a]))return!1;return i=n,!0}))return i},pixelCoordinateParams:function(e,t,n,i,a){e&&(s=(e=o(e)).innerWidth(),l=e.innerHeight()),i=i||t,a=a||n;var s,l,u=i!==t||a!==n,c=Math.min(0,Math.floor(Math.log(Math.min((s||i)/i,(l||a)/a))/Math.log(2))),d=Math.max(0,Math.ceil(Math.log(Math.max(t/i,n/a))/Math.log(2)));return{map:{node:e,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:t,bottom:n},unitsPerPixel:Math.pow(2,d),center:{x:t/2,y:n/2},min:c,max:d,zoom:c,clampBoundsX:!0,clampBoundsY:!0,clampZoom:!0},layer:{maxLevel:d,minLevel:Math.min(0,d),wrapX:!1,wrapY:!1,tileOffset:function(){return{x:0,y:0}},attribution:"",tileWidth:i,tileHeight:a,tileRounding:Math.ceil,tilesAtZoom:u?function(e){var o=Math.pow(2,d-e);return{x:Math.ceil(t/i/o),y:Math.ceil(n/a/o)}}:void 0,tilesMaxBounds:u?function(e){var i=Math.pow(2,d-e);return{x:Math.floor(t/i),y:Math.floor(n/i)}}:void 0}}},centerFromPerimeter:function(e){var t,n,i,o,a,s;if(e&&e.outer&&(e=e.outer),e&&e.length){if(1===e.length)return{x:e[0].x,y:e[0].y};for(s=0,t={x:0,y:0},a=0,n=e[e.length-1];s<e.length;s+=1)i=n,n=e[s],o=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),t.x+=(n.x+i.x)*o,t.y+=(n.y+i.y)*o,a+=2*o;return t.x/=a,t.y/=a,a?t:{x:n.x,y:n.y}}},distance2dSquared:function(e,t){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},distance2dToLineSquared:function(e,t,n){var i=n.x-t.x,o=n.y-t.y,a=i*i+o*o,s=0;return a&&(s=Math.max(0,Math.min(1,s=((e.x-t.x)*i+(e.y-t.y)*o)/a))),m.distance2dSquared(e,{x:t.x+s*i,y:t.y+s*o})},distanceToPolygon2d:function(e,t,n){for(var i,o,a=t.outer||t,s=!1,l=0,u=a.length,c=u-1;l<u;c=l,l+=1){var d=a[l],f=a[c];d.y>e.y!=f.y>e.y&&e.x<(f.x-d.x)*(e.y-d.y)/(f.y-d.y)+d.x&&(s=!s),o=n?1:m.distance2dToLineSquared(e,d,f),(void 0===i||o<i)&&(i=o)}return t.inner&&t.inner.forEach(function(t){var o=m.distanceToPolygon2d(e,t,n);o*o<i&&(i=o*o),o>0&&(s=!s)}),(s?1:-1)*Math.sqrt(i)},triangleTwiceSignedArea2d:function(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)},crossedLineSegmentPolygon2d:function(e,t,n){var i,o,a=n.outer||n,s=a.length;for(i=0,o=s-1;i<s;o=i,i+=1)if(m.crossedLineSegments2d(e,t,a[i],a[o]))return!0;if(n.inner){for(i=0;i<n.inner.length;i+=1)if(m.crossedLineSegmentPolygon2d(e,t,n.inner[i]))return!0}return!1},crossedLineSegments2d:function(e,t,n,i){return!(e.x>n.x&&e.x>i.x&&t.x>n.x&&t.x>i.x||e.x<n.x&&e.x<i.x&&t.x<n.x&&t.x<i.x||e.y>n.y&&e.y>i.y&&t.y>n.y&&t.y>i.y||e.y<n.y&&e.y<i.y&&t.y<n.y&&t.y<i.y||e.x===n.x&&e.y===n.y||e.x===i.x&&e.y===i.y||t.x===n.x&&t.y===n.y||t.x===i.x&&t.y===i.y||m.triangleTwiceSignedArea2d(e,t,n)*m.triangleTwiceSignedArea2d(e,t,i)>0||m.triangleTwiceSignedArea2d(n,i,e)*m.triangleTwiceSignedArea2d(n,i,t)>0)},segmentCrossesLineList2d:function(e,t,n){return n.some(function(n){return n.some(function(i,o){return!!o&&m.crossedLineSegments2d(e,t,n[o-1],i)})})},rdpLineSimplify:function(e,t,n,i){if(e.length<=2||t<0)return e;var o,a,s,l=-1,u=t*t;if(n){for(o=1;o<e.length;o+=1)(a=m.distance2dSquared(e[0],e[o]))>l&&(l=a,s=o);return 4*l<=u?e.slice(s,s+1):(e=e.slice(s).concat(e.slice(0,s+1)),(e=m.rdpLineSimplify(e,t,!1,i)).splice(e.length-1),e)}for(o=1;o<e.length-1;o+=1)(a=m.distance2dToLineSquared(e[o],e[0],e[e.length-1]))>l&&(l=a,s=o);if(l<=u&&(!i||!m.segmentCrossesLineList2d(e[0],e[e.length-1],i)))return[e[0],e[e.length-1]];var c=e.slice(0,s+1),d=e.slice(s),f=m.rdpLineSimplify(c,t,!1,i?i.concat([d]):null),p=m.rdpLineSimplify(d,t,!1,i?i.concat([c]):null);return f.slice(0,f.length-1).concat(p)},getMinMaxValues:function(e,t,n,i){if(e.length&&(i||!o.isNumeric(t)||!o.isNumeric(n))){var a,s,l=e[0],u=e[0];for(s=e.length-1;s>0;s-=1)(a=e[s])<l&&(l=a),a>u&&(u=a);(!o.isNumeric(t)||i&&l>t)&&(t=l),(!o.isNumeric(n)||i&&u<n)&&(n=u)}return{min:t,max:n}},wrapAngle:function(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},escapeUnicodeHTML:function(e){return e.replace(/[^- 0-9A-Za-z~`!@#$%^&*()_+={}|[\]\\:";'<>?,./]/g,function(t,n){var i=t.charCodeAt(0);if(i<127)return t;if(i>=55296&&i<=57344){if(i<56320||n)return"";var o=e.charCodeAt(n-1);if(o<55296||o>=56320)return"";i=(o-55296)*1024+(i-56320)}return"&#"+i.toString(10)+";"})},deepMerge:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];for(var a=0;a<n.length;a++){var s=n[a];if(null!=s){for(var l in s)if("__proto__"!==l&&e!==s[l]){var u=s[l];if(u&&"object"===i(u)&&(u.constructor===Object||Array.isArray(u))){var c=e[l];Array.isArray(u)?Array.isArray(c)||(c=[]):("object"!==i(c)||Array.isArray(c))&&(c={}),e[l]=m.deepMerge(c,u)}else void 0!==u&&(e[l]=u)}}}return e},dereferenceElements:function(e){var t=[];return o("img,image",e).each(function(){var e=o(this),n=e.is("image")?"href":"src";if(e.attr(n)){var i=new Image;("http"===e.attr(n).substr(0,4)||e[0].crossOrigin)&&(i.crossOrigin=e[0].crossOrigin||"anonymous");var a=o.Deferred();i.onload=function(){var t=document.createElement("canvas");t.width=i.naturalWidth,t.height=i.naturalHeight,t.getContext("2d").drawImage(i,0,0),e.attr(n,t.toDataURL("image/png")),"data:image"!==e.attr(n).substr(0,10)&&e.remove(),a.resolve()},i.onerror=function(){e.remove(),a.resolve()},i.src=e.attr(n),t.push(a)}}),t},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function(e,t,n,i,a){var s=[],l=[];if(e=(e=e.replace(/\/\*[^\0]*?\*\//g,"")).replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n"),a){var u=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(a);a=u&&u[1]?u[1]+"/":null}e.replace(m.dereferenceCssUrlsRegex,function(e,t){var n=s.length,i=o.Deferred(),u=new XMLHttpRequest;return s.push(i),l.push(""),/^[^/:][^:]*(\/|$)/g.exec(t)&&a&&(t=a+t),u.open("GET",t,!0),u.responseType="arraybuffer",u.onload=function(){if(200===this.status){var e,t=new Uint8Array(this.response),o=Array(t.length);for(e=0;e<t.length;e+=1)o[e]=String.fromCharCode(t[e]);o=o.join(""),l[n]="url(data:"+u.getResponseHeader("content-type")+";base64,"+btoa(o)+")"}i.resolve()},u.onerror=i.resolve,u.send(),e}),o.when.apply(o,s).then(function(){var o=0;e=e.replace(m.dereferenceCssUrlsRegex,function(e,t){return l[(o+=1)-1]}),void 0===i?t.text(e):t.style[i]=e,n.resolve()})},htmlToImageSupported:function(){if(void 0===l){var e=o.Deferred(),t=o(c);t.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"}),o("foreignObject",t).append("<div/>");var n=new Image;return n.onload=n.onerror=function(){var t=document.createElement("canvas");t.width=10,t.height=10,t.getContext("2d").drawImage(n,0,0);try{t.toDataURL(),l=!0}catch(e){console.warn("This browser does not support converting HTML to an image via SVG foreignObject.  Some functionality will be limited.",e),l=!1}e.resolve(l)},n.src="data:image/svg+xml;base64,"+btoa(m.escapeUnicodeHTML(new XMLSerializer().serializeToString(t[0]))),e}return l},htmlToImage:function(e,t){var n,i=o.Deferred(),a=[m.htmlToImageSupported()],s=o(e);for(e=o(e).clone();t&&t>0;)(s=s.parent()).is("div")&&((n=o("<div>").attr({class:s.attr("class"),id:s.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0})).append(e),e=n),t-=1;o("canvas",e).remove(),o("*",e).addBack().each(function(){for(var e=this.style,t=0;t<e.length;t+=1){var n=this.style[t];if(this.style[n].match(m.dereferenceCssUrlsRegex)){var i=o.Deferred();m.dereferenceCssUrls(this.style[n],this,i,n),a.push(i)}}}),(n=o('<div xmlns="http://www.w3.org/1999/xhtml">')).css({width:s.width()+"px",height:s.height()+"px"}),n.append(o("<head>"));var l=o("<body>");return n.append(l),l.css({width:s.width()+"px",height:s.height()+"px",background:"none",margin:0}),l.append(e),a=a.concat(m.dereferenceElements(e)),o('style,link[rel="stylesheet"]').each(function(){var e=o('<style type="text/css">'),t=o.Deferred();if(o(this).is("style")){var i=o(this).text();m.dereferenceCssUrls(i,e,t)}else{var s=o(this).attr("href");o.get(s).done(function(n){m.dereferenceCssUrls(n,e,t,void 0,s)}).fail(function(n,i,o){console.warn("Failed to dereference "+s,i,o),e.remove(),t.resolve()})}a.push(t),o("head",n).append(e)}),o.when.apply(o,a).then(function(){var e=o(c);e.attr({width:s.width()+"px",height:s.height()+"px","text-rendering":"optimizeLegibility"}),o("foreignObject",e).append(n);var t=new Image;m.htmlToImageSupported()?(t.onload=function(){i.resolve(t)},t.onerror=function(){console.warn("Failed to render html to image"),i.reject()},t.src="data:image/svg+xml;base64,"+btoa(m.escapeUnicodeHTML(new XMLSerializer().serializeToString(e[0])))):i.resolve(t)}),i},timeReport:function(e){return(o.each(d,function(e,t){t.count?(t.stddev=Math.sqrt(Math.abs((t.sum2-t.sum*t.sum/t.count)/t.count)),t.average=t.sum/t.count):(t.stddev=0,t.average=0)}),e)?d[e]:d},timeFunctionStart:function(e,t){(!d[e]||t)&&(d[e]={count:0,sum:0,sum2:0,max:0,recent:[]}),d[e].start=window.performance.now()},timeFunctionStop:function(e){if(d[e]&&d[e].start){var t=window.performance.now()-d[e].start;d[e].start=null,d[e].sum+=t,d[e].sum2+=t*t,d[e].count+=1,d[e].max=Math.max(d[e].max,t),d[e].recent.push(t),d[e].recent.length>f&&d[e].recent.splice(0,d[e].recent.length-f)}},timeRequestAnimationFrame:function(e,t,n,i){(!d.requestAnimationFrame||t)&&(d.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}),n&&(p=n),i&&(f=i),e&&s?(window.requestAnimationFrame=s,s=null):e||s||(s=window.requestAnimationFrame,window.requestAnimationFrame=function(e){return s.call(window,function(t){var n,i=d.requestAnimationFrame;i.timestamp!==t&&(i.nowDelta=window.performance.now()-t,1e3>Math.abs(i.nowDelta)&&(i.nowDelta=0),i.timestamp=t,i.subcalls=i.subcalls||0,i.start={sum:i.sum,sum2:i.sum2,count:i.count,max:i.max,above_threshold:i.above_threshold},i.recent.push([0]),i.recentsub.push([]),i.recent.length>f&&(i.recent.splice(0,i.recent.length-f),i.recentsub.splice(0,i.recentsub.length-f))),i.subcalls+=1,e.apply(this,arguments);var o=window.performance.now()-t;o-=i.nowDelta,i.sum=i.start.sum+o,i.sum2=i.start.sum2+o*o,i.count=i.start.count+1,i.max=Math.max(i.max,o),i.above_threshold=i.start.above_threshold+ +(o>=p),i.recent[i.recent.length-1]=o,(n=i.recentsub[i.recent.length-1]).push({total_duration:o,duration:o-(n.length?n[n.length-1].total_duration:0),callback:e.name||e})})})},isObject:function(e){var t=i(e);return null!=e&&("object"===t||"function"===t)},identityFunction:function(e){return e},packFloats:function(e){return e.length?((void 0===e[0]?0:Math.floor(250*Math.abs(e[0]))+1)+(void 0===e[1]?0:Math.floor(250*Math.abs(e[1]))+1)*252+(void 0===e[2]?0:Math.floor(250*Math.abs(e[2]))+1)*63504)*(e[3]?-1:1):void 0===e?0:Math.floor(250*Math.abs(e))+1},radiusEarth:a.WGS84.a};e.exports=m},6509(e){e.exports="/* contourFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float steps;\nuniform bool stepped;\nuniform sampler2D sampler2d;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main () {\n  vec4 clr;\n  if (valueVar < 0.0) {\n    clr = minColor;\n  } else if (valueVar > steps) {\n    clr = maxColor;\n  } else {\n    float step;\n    if (stepped) {\n      step = floor(valueVar) + 0.5;\n      if (step > steps) {\n        step = steps - 0.5;\n      }\n    } else {\n      step = valueVar + 0.5;\n    }\n    // our texture is padded on either end by a repeated value to ensure\n    // we interpolate smoothly at the ends.\n    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));\n  }\n  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);\n}\n"},6549(e,t,n){"use strict";function i(e){return 1-.25*e*(1+e/16*(3+1.25*e))}n.d(t,{A:()=>i})},6585(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.shaderProgram=function(){"use strict";if(!(this instanceof i.shaderProgram))return new i.shaderProgram;i.materialAttribute.call(this,i.materialAttributeType.ShaderProgram);var e=this,t=0,n=a(),o=a(),s=[],l=[],u={},c={},d={};return this.queryUniformLocation=function(e,n){return e.m_context.getUniformLocation(t,n)},this.queryAttributeLocation=function(e,n){return e.m_context.getAttribLocation(t,n)},this.addShader=function(t){var n;if(s.indexOf(t)>-1)return!1;for(n=s.length-2;n>=0;n-=1)s[n].shaderType()===t.shaderType()&&s.splice(n,1);return s.push(t),e.modified(),!0},this.addUniform=function(t){return!(l.indexOf(t)>-1)&&(l.push(t),e.modified(),!0)},this.addVertexAttribute=function(t,n){u[n]=t,e.modified()},this.uniformLocation=function(e){return c[e]},this.attributeLocation=function(e){return d[e]},this.uniform=function(e){var t;for(t=0;t<l.length;t+=1)if(l[t].name()===e)return l[t];return null},this.updateUniforms=function(e){var t;for(t=0;t<l.length;t+=1)l[t].callGL(e,c[l[t].name()])},this.link=function(e){return e.m_context.linkProgram(t),!!e.m_context.getProgramParameter(t,i.GL.LINK_STATUS)||(console.log("[ERROR] Unable to initialize the shader program."),!1)},this.use=function(e){e.m_context.useProgram(t)},this._setup=function(e){0===t&&(t=e.m_context.createProgram())},this._cleanup=function(t){e.deleteVertexAndFragment(t),e.deleteProgram(t),e.modified()},this.deleteProgram=function(e){t&&e.m_context.deleteProgram(t),t=0},this.deleteVertexAndFragment=function(e){var n;for(n=0;n<s.length;n+=1)s[n].shaderHandle(e)&&e.m_context.detachShader(t,s[n].shaderHandle(e)),e.m_context.deleteShader(s[n].shaderHandle(e)),s[n].removeContext(e)},this.compileAndLink=function(i){var o;if(!(n.getMTime()>=this.getMTime())){for(e._setup(i),o=0;o<s.length;o+=1)s[o].compile(i),s[o].attachShader(i,t);e.bindAttributes(i),e.link(i)||(console.log("[ERROR] Failed to link Program"),e._cleanup(i)),n.modified()}},this.bind=function(t){var n=0;for(o.getMTime()<e.getMTime()?(e.compileAndLink(t),e.use(t),e.bindUniforms(t),o.modified()):e.use(t),n=0;n<l.length;n+=1)l[n].update(t,e);e.updateUniforms(t)},this.undoBind=function(e){e.m_context.useProgram(null)},this.bindVertexData=function(e,t){u.hasOwnProperty(t)&&u[t].bindVertexData(e,t)},this.undoBindVertexData=function(e,t){u.hasOwnProperty(t)&&u[t].undoBindVertexData(e,t)},this.bindUniforms=function(e){var t;for(t=0;t<l.length;t+=1)c[l[t].name()]=this.queryUniformLocation(e,l[t].name())},this.bindAttributes=function(e){var n,i;for(n in u)u.hasOwnProperty(n)&&(i=u[n].name(),e.m_context.bindAttribLocation(t,n,i),d[i]=n)},e},o(i.shaderProgram,i.materialAttribute)},6591(e){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},6601(e,t,n){var i=n(8899),o=n(8525),a=n(4341);function s(e){var t,n=/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/,i=e.replace(RegExp(n,"g"),"{s}").replace(/\$?\{[xX]\}/g,"{x}").replace(/\$?\{[yY]\}/g,"{y}").replace(/\$?\{[zZ]\}/g,"{z}"),o=e.match(n);if(o){if(o[2])t=o[1].split(",");else if(":"===o[1][1])t=o[1].substr(2).split("");else if("-"===o[1][1]){t=[];for(var a=o[1].charCodeAt(0),s=o[1].charCodeAt(2),l=Math.min(a,s);l<=Math.max(a,s);l+=1)t.push(String.fromCharCode(l))}}return function(e,n,o,a){var s,l;return i.replace(/\{s\}/g,(s=t||a)[((e+n+o)%(l=s.length)+l)%l]).replace(/\{x\}/g,e).replace(/\{y\}/g,n).replace(/\{z\}/g,o)}}var l=function(e){"use strict";if(!(this instanceof l))return new l(e);o.call(this,e);var t=n(4692),i=n(4128),u=n(5204),c=n(7286),d=n(3273),f=n(5933).adjustLayerForRenderer,p=n(6966);if((e=a.deepMerge({},this.constructor.defaults,e||{})).cacheSize||(e.cacheSize=e.keepLower?600:200),"string"===t.type(e.subdomains)&&(e.subdomains=e.subdomains.split("")),e.baseUrl){var h=e.baseUrl;h&&"/"!==h.charAt(h.length-1)&&(h+="/"),e.url=h+"{z}/{x}/{y}."+(e.imageFormat||"png")}e.originalUrl=e.url,"string"===t.type(e.url)&&(e.url=s(e.url));var m,g,v,y=this._init,b=this._exit,x=this.visible,w=e.queueSize||6,A=e.initialQueueSize||0,C=[],S={},_=[],T=e.nearestPixel,O=this;this._options=a.deepMerge({},e),this.attribution(e.attribution),this._activeTiles={},this._tileTree={},this._cache=c({size:e.cacheSize}),this._queue=e.queue||d({size:w,initialSize:A,track:e.cacheSize,needed:function(e){return this._tileLayers&&this._tileLayers.length?this._tileLayers.some(function(t){return e===t.cache.get(e.toString(),!0)}):e===O.cache.get(e.toString(),!0)}}),this._queue._tileLayers=this._queue._tileLayers||[],this._queue._tileLayers.push(O),this._queue.initialTrack&&this._queue.track&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length);var P={};return Object.defineProperty(this,"options",{get:function(){return Object.assign({},O._options)}}),Object.defineProperty(this,"cache",{get:function(){return O._cache}}),Object.defineProperty(this,"activeTiles",{get:function(){return Object.assign({},O._activeTiles)}}),Object.defineProperty(this,"queue",{get:function(){return O._queue},set:function(e){O._queue!==e&&(this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(O)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(O),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),O._queue=e,O._queue._tileLayers=O._queue._tileLayers||[],O._queue._tileLayers.push(O),O._queue.initialTrack&&O._queue.track&&(O._queue.track=O._queue.initialTrack*O._queue._tileLayers.length))}}),Object.defineProperty(this,"queueSize",{get:function(){return w},set:function(e){w=e,O._queue.size=e}}),Object.defineProperty(this,"initialQueueSize",{get:function(){return A},set:function(e){A=e||0,O._queue.initialSize=e||w}}),Object.defineProperty(this,"reference",{get:function(){return""+O.id()+"_"+(m||0)},set:function(e){m=e},configurable:!0}),this.tilesAtZoom=function(e){if(O._options.tilesAtZoom)return O._options.tilesAtZoom.call(O,e);var t=Math.pow(2,e);return{x:t,y:t}},this.tilesMaxBounds=function(e){return O._options.tilesMaxBounds?O._options.tilesMaxBounds.call(O,e):null},this.tileCropFromBounds=function(e){if(O._options.tilesMaxBounds){var t=e.index.level,n=O._tileBounds(e);if(void 0===_[t]&&(_[t]=O.tilesMaxBounds(t)||null),_[t]&&(n.right>_[t].x||n.bottom>_[t].y))return{x:Math.max(0,Math.min(_[t].x,n.right)-n.left),y:Math.max(0,Math.min(_[t].y,n.bottom)-n.top)}}},this.isValid=function(e){return!!(O._options.minLevel<=e.level&&e.level<=O._options.maxLevel)&&!!(O._options.wrapX||0<=e.x&&e.x<=O.tilesAtZoom(e.level).x-1)&&!!(O._options.wrapY||0<=e.y&&e.y<=O.tilesAtZoom(e.level).y-1)},this._origin=function(e){var t,n,i=O.toLevel(O.toLocal(O.map().origin()),e),o=O._options;return t={x:Math.floor(i.x/o.tileWidth),y:Math.floor(i.y/o.tileHeight)},n={x:i.x-o.tileWidth*t.x,y:i.y-o.tileHeight*t.y},{index:t,offset:n}},this._tileBounds=function(e){var t=O._origin(e.index.level);return e.bounds(t.index,t.offset)},this.tileAtPoint=function(e,t){var n=O._origin(t),i=O.map();isNaN((e=O.displayToLevel(i.gcsToDisplay(e,null),t)).x)&&(e.x=0),isNaN(e.y)&&(e.y=0);var o=O._tileOffset(t);return o&&(e.x+=o.x,e.y+=o.y),{x:Math.floor(n.index.x+(n.offset.x+e.x)/O._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+e.y)/O._options.tileHeight)}},this.gcsTileBounds=function(e,t){var n=e.index?e:p({index:e,size:{x:O._options.tileWidth,y:O._options.tileHeight},url:""}),i=O._tileOffset(n.index.level),o=n.bounds({x:0,y:0},i),a=O.map(),s=a.unitsPerPixel(n.index.level),l=[{x:o.left*s,y:O._topDown()*o.top*s},{x:o.right*s,y:O._topDown()*o.bottom*s}];return(t=null===t?a.gcs():void 0===t?a.ingcs():t)!==a.gcs()&&(l=u.transformCoordinates(a.gcs(),t,l)),{left:l[0].x,top:l[0].y,right:l[1].x,bottom:l[1].y}},this._getTile=function(e,t){var n=t||e;return p({index:e,size:{x:O._options.tileWidth,y:O._options.tileHeight},queue:O._queue,url:O._options.url.call(O,n.x,n.y,Math.max(n.level||0,Math.min(0,O._options.minLevel||0)),O._options.subdomains)})},this._getTileCached=function(e,t,n){var i=O.cache.get(O._tileHash(e));return null===i&&(i=O._getTile(e,t),O.cache.add(i,O.remove,n)),i},this._tileHash=function(e){return[e.level||0,e.y,e.x,e.reference||0].join("_")},this._getTileRange=function(e,t){var n=[O.tileAtPoint({x:t.left,y:t.top},e),O.tileAtPoint({x:t.right,y:t.top},e),O.tileAtPoint({x:t.left,y:t.bottom},e),O.tileAtPoint({x:t.right,y:t.bottom},e)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}},this._getTiles=function(e,n,i,o){var a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w=[],A=!1,S=O._options.keepLower?O._options.minLevel:Math.min(Math.max(e,O._options.minLevel),O._options.maxLevel);for(e<S&&(e=S),x=S;x<=e;x+=1){if(h=(g=O._getTileRange(x,n)).start,m=g.end,p=O.tilesAtZoom(x),!O._options.wrapX){if(h.x>=p.x||m.x<0)continue;h.x=Math.min(Math.max(h.x,0),p.x-1),m.x=Math.min(Math.max(m.x,0),p.x-1),x===S&&O._options.keepLower&&(h.x=0,m.x=p.x-1)}if(!O._options.wrapY){if(h.y>p.y||m.y<0)continue;h.y=Math.min(Math.max(h.y,0),p.y-1),m.y=Math.min(Math.max(m.y,0),p.y-1),x===S&&O._options.keepLower&&(h.y=0,m.y=p.y-1)}if(O._options.gcs&&O._options.gcs!==O.map().gcs()&&x!==S&&(m.x+1-h.x)*(m.y+1-h.y)>O.map().size().width*O.map().size().height/O._options.tileWidth/O._options.tileHeight*16)break;for(c=h.x;c<=m.x;c+=1)for(d=h.y;d<=m.y;d+=1)f={level:x,x:c,y:d,reference:O.reference},v={level:x,x:c,y:d,reference:O.reference},O._options.wrapX&&(a=v.x,v.x=(a%(s=p.x)+s)%s),O._options.wrapY&&(l=v.y,v.y=(l%(u=p.y)+u)%u),O.isValid(v)&&(o&&w.length<C.length&&(b=C[w.length],A=A||f.level!==b.level||f.x!==b.x||f.y!==b.y),w.push({index:f,source:v}))}if(o){if(!A&&w.length===C.length)return;C.splice(0,C.length),t.each(w,function(e,t){C.push(t.index)})}if(i){y={x:(h.x+m.x)/2,y:(h.y+m.y)/2,level:e,bottomLevel:e};for(var _=Math.max(m.x-h.x,m.y-h.y)+1;_>=1;_/=2)y.bottomLevel-=1;w.sort(O._loadMetric(y)),O._queue&&O._queue.batch(!0)}for(O.cache.size<w.length&&(console.log("Increasing cache size to "+w.length),O.cache.size=w.length),c=0;c<w.length;c+=1)w[c]=O._getTileCached(w[c].index,w[c].source,!0);return O.cache.purge(O.remove),w},this.gcs=function(e){if(void 0===e)return O._options.gcs||O.map().gcs();var t=O.gcs();return null===e?delete O._options.gcs:O._options.gcs=e,O.gcs()!==t&&(O.clear(),O.gcsFeatures(O.gcs()),O.modified(),O._update()),O},this.prefetch=function(e,n){var i;return i=O._getTiles(e,n,!0),t.when.apply(t,i.map(function(e){return e.fetch()}))},this._loadMetric=function(e){return function(t,n){var i,o,a,s,l,u;return(t=t.index||t,n=n.index||n,t.level!==n.level)?e.bottomLevel&&t.level>=e.bottomLevel!=n.level>=e.bottomLevel?t.level>=e.bottomLevel?-1:1:t.level-n.level:(u=Math.pow(2,t.level-e.level),s=(e.x+.5)*u-.5,l=(e.y+.5)*u-.5,i=(o=t.x-s)*o+(a=t.y-l)*a,i-((o=n.x-s)*o+(a=n.y-l)*a))}},this.fromLevel=function(e,t){var n=Math.pow(2,-t);return{x:e.x*n,y:e.y*n}},this.toLevel=function(e,t){var n=Math.pow(2,t);return{x:e.x*n,y:e.y*n}},this.drawTile=function(e){var t=e.toString();O._activeTiles.hasOwnProperty(t)?O._moveToTop(e):O._drawTile(e),O._activeTiles[t]=e},this._drawTile=function(e){if(null!==O.renderer())throw Error("This draw method is not valid on renderer managed layers.");var n,i=e.index.level,o=t(O._getSubLayer(i)),a=O._tileBounds(e),s=O._options.animationDuration,l=t('<div class="geo-tile-container"/>').attr("tile-reference",e.toString());l.append(e.image),l.css({left:a.left-parseInt(o.attr("offsetx")||0,10)+"px",top:a.top-parseInt(o.attr("offsety")||0,10)+"px"}),(n=O.tileCropFromBounds(e))&&l.addClass("crop").css({width:n.x+"px",height:n.y+"px"}),s>0&&e.fadeIn(s),o.append(l),e.catch(function(){console.warn("Could not load tile at "+e.toString()),O._remove(e)})},this.remove=function(e){var t=e.toString(),n=O._activeTiles[t];if(n instanceof p&&O._remove(n),delete O._activeTiles[t],C&&e.index)for(var i=e.index,o=C.length-1;o>=0;o-=1){var a=C[o];if(a.level===i.level&&a.x===i.x&&a.y===i.y&&a.reference===i.reference){C.splice(o,1);break}}return n},this._remove=function(e){e.image&&(e.image.parentElement?t(e.image.parentElement).remove():console.log("No parent element to remove "+e.toString(),e),t(e.image).remove())},this._moveToTop=function(e){t.noop(e)},this._getViewBounds=function(){var e=O.map(),t=e.zoom(),n=O._options.tileRounding(t),i=Math.pow(2,t-n),o=e.size(),a=O.displayToLevel({x:0,y:0}),s=O.displayToLevel({x:o.width,y:0}),l=O.displayToLevel({x:0,y:o.height}),u=O.displayToLevel({x:o.width,y:o.height});return{level:n,scale:i,left:Math.min(a.x,s.x,l.x,u.x),right:Math.max(a.x,s.x,l.x,u.x),top:Math.min(a.y,s.y,l.y,u.y),bottom:Math.max(a.y,s.y,l.y,u.y)}},this._purge=function(e,t,n){var i,o;if(O._updating)return O;for(o in n||(n=O._getViewBounds()),O._activeTiles)i=O._activeTiles[o],O._canPurge(i,n,e,t)&&O.remove(i);return O},this.clear=function(){var e,t=[];for(e in O._activeTiles)t.push(O.remove(e));return O._tileTree={},C=[],t},this.reset=function(){return O.clear(),O._cache.clear(),O._queue.initialSize=A,O},this.toLocal=function(e,t){var n=O.map(),i=n.unitsPerPixel(void 0===t?n.zoom():t);return{x:e.x/i,y:O._topDown()*e.y/i}},this.fromLocal=function(e,t){var n=O.map(),i=n.unitsPerPixel(void 0===t?n.zoom():t);return{x:e.x*i,y:O._topDown()*e.y*i}},this._topDown=function(){return O._options.topDown?1:-1},this._getSubLayer=function(e){if(O.canvas()){var n=O.canvas().find("div[data-tile-layer="+e.toFixed()+"]").get(0);return n||(n=t('<div class=geo-tile-layer data-tile-layer="'+e.toFixed()+'"/>').get(0),O.canvas().append(n)),n}},this._updateSubLayers=function(e,n){var i=O.canvas(),o=parseInt(i.attr("lastlevel"),10),a=parseInt(i.attr("lastoffsetx")||0,10),s=parseInt(i.attr("lastoffsety")||0,10);if(o===e&&65536>Math.abs(a-n.left)&&65536>Math.abs(s-n.top))return{x:a,y:s};var l=O.map(),u=O._tileOffset(e),c=parseInt((n.left+n.right-l.size().width)/2+u.x,10),d=parseInt((n.top+n.bottom-l.size().height)/2+u.y,10);return i.find(".geo-tile-layer").each(function(n,i){var o=t(i),a=parseInt(o.data("tileLayer"),10);o.css("transform","scale("+Math.pow(2,e-a)+")");var s=parseInt(c/Math.pow(2,e-a),10),l=parseInt(d/Math.pow(2,e-a),10),u=s-parseInt(o.attr("offsetx")||0,10),f=l-parseInt(o.attr("offsety")||0,10);o.attr({offsetx:s,offsety:l}),o.find(".geo-tile-container").each(function(e,n){t(n).css({left:parseInt(t(n).css("left"),10)-u+"px",top:parseInt(t(n).css("top"),10)-f+"px"})})}),i.attr({lastoffsetx:c,lastoffsety:d,lastlevel:e}),{x:c,y:d}},this._update=function(e){if(e&&e.event&&(e.event.event===i.zoom||e.event.event===i.rotate)||!O.visible())return O;var n,o=O.map(),a=o.bounds(void 0,null),s=o.zoom(),l=O._options.tileRounding(s);if(O._updateSubLayers){var u=O._getViewBounds(),c=O._updateSubLayers(l,u)||{x:0,y:0},d=O._tileOffset(l);if(null===O.renderer()){var f=Math.pow(2,s-l),p=o.rotation(),h=-d.x+-(u.left+u.right)/2+c.x,m=-d.y+-(u.bottom+u.top)/2+c.y,v=h+o.size().width/2,y=m+o.size().height/2;O.canvas().css({"transform-origin":""+-h+"px "+-m+"px"});var b="translate("+v+"px,"+y+"px)scale("+f+")";p&&(b+="rotate("+180*p/Math.PI+"deg)"),O.canvas().css("transform",b)}O.canvas().attr({scale:Math.pow(2,s-l),dx:-d.x+-(u.left+u.right)/2,dy:-d.y+-(u.bottom+u.top)/2,offsetx:c.x,offsety:c.y,rotation:o.rotation()})}if(void 0===(n=O._getTiles(l,a,!0,!0)))return O;if(O._tileTree={},n.forEach(function(e){e.fetched()?(delete S[e.toString()],O.drawTile(e),O._setTileTree(e)):(e._queued?(O._queue?O._queue.get(e):-1)>=0&&O._queue.add(e):(e.then(function(){if(!g&&e===O.cache.get(e.toString())){var t=o.zoom(),n=O._options.tileRounding(t),i=O._getViewBounds();if(O._canPurge(e,i,n))return void O.remove(e);O.drawTile(e),O._setTileTree(e)}}),e._queued=!0),O.addPromise(e),S[e.toString()]=e)}),t.when.apply(t,n).done(function(){var e=O.map().zoom(),t=O._options.tileRounding(e);O._purge(t,!0)}),"all"!==O._options.idleAfter)for(var x in S){var w=S[x];0>n.indexOf(w)&&(O.removePromise(w),delete S[x])}return O},this._setTileTree=function(e){if(!O._options.keepLower){var t=e.index;O._tileTree[t.level]=O._tileTree[t.level]||{},O._tileTree[t.level][t.x]=O._tileTree[t.level][t.x]||{},O._tileTree[t.level][t.x][t.y]=e}},this._getTileTree=function(e){return((O._tileTree[e.level]||{})[e.x]||{})[e.y]||null},this._isCovered=function(e){var t=e.index.level,n=e.index.x,i=e.index.y,o=[];return(o=O._getTileTree({level:t-1,x:Math.floor(n/2),y:Math.floor(i/2)}))?[o]:(o=[O._getTileTree({level:t+1,x:2*n,y:2*i}),O._getTileTree({level:t+1,x:2*n+1,y:2*i}),O._getTileTree({level:t+1,x:2*n,y:2*i+1}),O._getTileTree({level:t+1,x:2*n+1,y:2*i+1})]).every(function(e){return null!==e})?o:null},this._outOfBounds=function(e,t){var n=O._tileOffset(e.index.level),i=1;return e.index.level!==t.level&&(i=Math.pow(2,(t.level||0)-(e.index.level||0))),(e.bottom-n.y)*i<t.top||(e.left-n.x)*i>t.right||(e.top-n.y)*i>t.bottom||(e.right-n.x)*i<t.left},this._canPurge=function(e,t,n,i){if(O._options.keepLower){if((n=n||0)<e.index.level&&e.index.level!==O._options.minLevel)return!0;if(e.index.level===O._options.minLevel&&!O._options.wrapX&&!O._options.wrapY)return!1}else if((i||O._isCovered(e))&&n!==e.index.level&&(n>=O._options.minLevel||e.index.level!==O._options.minLevel)&&(n<O._options.maxLevel||e.index.level!==O._options.maxLevel))return!0;return!!t&&O._outOfBounds(e,t)},this.displayToLevel=function(e,t){var n,i=O.map(),o=i.zoom(),a=O._options.tileRounding(o),s=i.unitsPerPixel(void 0===t?a:t);if(void 0===e){var l=i.size();e={x:l.width/2,y:l.height/2}}try{n=i.displayToGcs(e,O._options.gcs||null)}catch(e){n={x:0,y:0}}return{x:n.x/s,y:O._topDown()*n.y/s}},this.url=function(e){return void 0===e?O._options.originalUrl:(e===O._options.originalUrl||(O._options.originalUrl=e,"string"===t.type(e)&&(e=s(e)),O._options.url=e,O.reset(),O.map().draw()),O)},this.subdomains=function(e){return void 0===e?O._options.subdomains:(e&&("string"===t.type(e)&&(e=e.indexOf(",")>=0?e.split(","):e.split("")),O._options.subdomains=e,O.reset(),O.map().draw()),O)},this._tileOffset=function(e){return void 0===P[e]&&(P[e]=O._options.tileOffset(e)),P[e]},this.visible=function(e){return void 0===e?x():(O.visible()!==e&&(x(e),e&&O._update()),O)},this.nearestPixel=function(e,t){return void 0===e?T:(T!==e&&(T=e,t||(O.modified(),O._update())),O)},Object.defineProperty(this,"baseQuad",{get:function(){return O._options.baseQuad},set:function(e){O._options.baseQuad=e,O._update()}}),this._addBaseQuadToTiles=function(e,t){e&&(this.baseQuad!==v&&(v&&t.splice(0,1),(v=this.baseQuad)&&(t.splice(0,0,this.baseQuad),e.cacheUpdate(0)),e.data(t)),e._update())},this._init=function(){var e;if(y.apply(O,arguments),null===O.renderer())for(e=0;e<=O._options.maxLevel;e+=1)O._getSubLayer(e);return O},this._exit=function(){return O.reset(),b.apply(O,arguments),g=!0,this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(O)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(O),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),O},f("tile",this),this};l.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:!0,wrapY:!1,url:null,subdomains:"abc",tileOffset:function(e){return{x:0,y:0}},tilesMaxBounds:null,topDown:!1,keepLower:!0,idleAfter:"view",tileRounding:Math.round,attribution:"",animationDuration:0},i(l,o),e.exports=l},6622(e,t,n){"use strict";function i(e){var t=Math.exp(e);return(t-1/t)/2}n.d(t,{A:()=>i})},6678(e){e.exports=function(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+c*i,e[5]=s*o+d*i,e[6]=l*o+f*i,e[7]=u*o+p*i,e[8]=c*o-a*i,e[9]=d*o-s*i,e[10]=f*o-l*i,e[11]=p*o-u*i,e}},6682(e,t,n){e.exports={adjoint:n(293),clone:n(3863),copy:n(2029),create:n(7048),determinant:n(5753),frob:n(2193),fromMat2:n(1944),fromMat4:n(8974),fromQuat:n(3807),identity:n(1694),invert:n(9408),multiply:n(4816),normalFromMat4:n(5601),rotate:n(7047),scale:n(368),str:n(2165),translate:n(9136),transpose:n(8825)}},6717(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c,forward:()=>s,init:()=>a,inverse:()=>l,names:()=>u});var i=n(4181),o=Math.sqrt(3)/2;function a(){this.es=0,this.long0=void 0!==this.long0?this.long0:0,this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0}function s(e){var t=(0,i.A)(e.x-this.long0,this.over),n=Math.asin(o*Math.sin(e.y)),a=n*n,s=a*a*a;return e.x=t*Math.cos(n)/(o*(1.340264+-.24331799999999998*a+s*(.0062510000000000005+.034164*a))),e.y=n*(1.340264+-.081106*a+s*(893e-6+.003796*a)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function l(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t,n,a,s,l,u=e.y;for(l=0;l<12&&(n=(t=u*u)*t*t,a=u*(1.340264+-.081106*t+n*(893e-6+.003796*t))-e.y,u-=s=a/(1.340264+-.24331799999999998*t+n*(.0062510000000000005+.034164*t)),!(1e-9>Math.abs(s)));++l);return n=(t=u*u)*t*t,e.x=o*e.x*(1.340264+-.24331799999999998*t+n*(.0062510000000000005+.034164*t))/Math.cos(u),e.y=Math.asin(Math.sin(u)/o),e.x=(0,i.A)(e.x+this.long0,this.over),e}var u=["eqearth","Equal Earth","Equal_Earth"];let c={init:a,forward:s,inverse:l,names:u}},6732(e){var t=0,n=function(){"use strict";if(!(this instanceof n))return new n;var e=this,i=0;return this.modified=function(){return t+=1,i=t,e},this.timestamp=function(){return i},this.getMTime=this.timestamp,this};e.exports=n},6767(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=t[9],h=t[10],m=t[11],g=t[12],v=t[13],y=t[14],b=t[15],x=n[0],w=n[1],A=n[2],C=n[3];return e[0]=x*i+w*l+A*f+C*g,e[1]=x*o+w*u+A*p+C*v,e[2]=x*a+w*c+A*h+C*y,e[3]=x*s+w*d+A*m+C*b,x=n[4],w=n[5],A=n[6],C=n[7],e[4]=x*i+w*l+A*f+C*g,e[5]=x*o+w*u+A*p+C*v,e[6]=x*a+w*c+A*h+C*y,e[7]=x*s+w*d+A*m+C*b,x=n[8],w=n[9],A=n[10],C=n[11],e[8]=x*i+w*l+A*f+C*g,e[9]=x*o+w*u+A*p+C*v,e[10]=x*a+w*c+A*h+C*y,e[11]=x*s+w*d+A*m+C*b,x=n[12],w=n[13],A=n[14],C=n[15],e[12]=x*i+w*l+A*f+C*g,e[13]=x*o+w*u+A*p+C*v,e[14]=x*a+w*c+A*h+C*y,e[15]=x*s+w*d+A*m+C*b,e}},6791(e){e.exports="/* pointFeature square/triangle vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec3 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = vec3(unit, 1.0);\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += (radius + strokeWidthVar) *\n       vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},6792(e,t,n){!function(e){"use strict";e.defineMode("javascript",function(t,n){var i,o,a=t.indentUnit,s=n.statementIndent,l=n.jsonld,u=n.json||l,c=!1!==n.trackScope,d=n.typescript,f=n.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),o=e("keyword d"),a=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:o,break:o,continue:o,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),h=/[+\-*&%=<>!?|~^@]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(e,t,n){return i=e,o=n,t}function v(e,t){var n,i=e.next();if('"'==i||"'"==i){return n=i,t.tokenize=function(e,t){var i,o=!1;if(l&&"@"==e.peek()&&e.match(m))return t.tokenize=v,g("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=n||o);)o=!o&&"\\"==i;return o||(t.tokenize=v),g("string","string")},t.tokenize(e,t)}if("."==i&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return g("number","number");if("."==i&&e.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return g(i);if("="==i&&e.eat(">"))return g("=>","operator");else if("0"==i&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return g("number","number");else if(/\d/.test(i))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),g("number","number");else if("/"==i)if(e.eat("*"))return t.tokenize=y,y(e,t);else if(e.eat("/"))return e.skipToEnd(),g("comment","comment");else if(eQ(e,t,1))return!function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),g("regexp","string-2");else return e.eat("="),g("operator","operator",e.current());else if("`"==i)return t.tokenize=b,b(e,t);else if("#"==i&&"!"==e.peek())return e.skipToEnd(),g("meta","meta");else if("#"==i&&e.eatWhile(f))return g("variable","property");else if("<"==i&&e.match("!--")||"-"==i&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),g("comment","comment");else if(h.test(i))return((">"!=i||!t.lexical||">"!=t.lexical.type)&&(e.eat("=")?("!"==i||"="==i)&&e.eat("="):/[<>*+\-|&?]/.test(i)&&(e.eat(i),">"==i&&e.eat(i))),"?"==i&&e.eat("."))?g("."):g("operator","operator",e.current());else if(f.test(i)){e.eatWhile(f);var o=e.current();if("."!=t.lastType){if(p.propertyIsEnumerable(o)){var a=p[o];return g(a.type,a.style,o)}if("async"==o&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return g("async","keyword",o)}return g("variable","variable",o)}}function y(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=v;break}i="*"==n}return g("comment","comment")}function b(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=v;break}i=!i&&"\\"==n}return g("quasi","string-2",e.current())}function x(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(d){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var o=0,a=!1,s=n-1;s>=0;--s){var l=e.string.charAt(s),u="([{}])".indexOf(l);if(u>=0&&u<3){if(!o){++s;break}if(0==--o){"("==l&&(a=!0);break}}else if(u>=3&&u<6)++o;else if(f.test(l))a=!0;else if(/["'\/`]/.test(l))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==l&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(a&&!o){++s;break}}a&&!o&&(t.fatArrowAt=s)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function A(e,t,n,i,o,a){this.indented=e,this.column=t,this.type=n,this.prev=o,this.info=a,null!=i&&(this.align=i)}function C(e,t,n,i,o){var a=e.cc;for(S.state=e,S.stream=o,S.marked=null,S.cc=a,S.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():u?G:V)(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();if(S.marked)return S.marked;if("variable"==n&&function(e,t){if(!c)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(var n=i.vars;n;n=n.next)if(n.name==t)return!0}(e,i))return"variable-2";return t}}var S={state:null,column:null,marked:null,cc:null};function _(){for(var e=arguments.length-1;e>=0;e--)S.cc.push(arguments[e])}function T(){return _.apply(null,arguments),!0}function O(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function P(e){var t=S.state;if(S.marked="def",c){if(t.context){if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,n){if(!n)return null;if(n.block){var i=e(t,n.prev);return i?i==n.prev?n:new E(i,n.vars,!0):null}return O(t,n.vars)?n:new E(n.prev,new D(t,n.vars),!1)}(e,t.context);if(null!=i){t.context=i;return}}else if(!O(e,t.localVars)){t.localVars=new D(e,t.localVars);return}}n.globalVars&&!O(e,t.globalVars)&&(t.globalVars=new D(e,t.globalVars))}}function M(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function E(e,t,n){this.prev=e,this.vars=t,this.block=n}function D(e,t){this.name=e,this.next=t}var I=new D("this",new D("arguments",null));function k(){S.state.context=new E(S.state.context,S.state.localVars,!1),S.state.localVars=I}function N(){S.state.context=new E(S.state.context,S.state.localVars,!0),S.state.localVars=null}function R(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function B(e,t){var n=function(){var n=S.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var o=n.lexical;o&&")"==o.type&&o.align;o=o.prev)i=o.indented;n.lexical=new A(i,S.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function L(){var e=S.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function F(e){return function t(n){return n==e?T():";"==e||"}"==n||")"==n||"]"==n?_():T(t)}}function V(e,t){if("var"==e)return T(B("vardef",t),eC,F(";"),L);if("keyword a"==e)return T(B("form"),z,V,L);if("keyword b"==e)return T(B("form"),V,L);if("keyword d"==e)return S.stream.match(/^\s*$/,!1)?T():T(B("stat"),H,F(";"),L);if("debugger"==e)return T(F(";"));if("{"==e)return T(B("}"),N,es,L,R);if(";"==e)return T();if("if"==e)return"else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==L&&S.state.cc.pop()(),T(B("form"),z,V,L,eM);if("function"==e)return T(ek);if("for"==e)return T(B("form"),N,eE,V,R,L);if("class"==e||d&&"interface"==t)return S.marked="keyword",T(B("form","class"==e?e:t),eF,L);if("variable"==e)if(d&&"declare"==t)return S.marked="keyword",T(V);else if(d&&("module"==t||"enum"==t||"type"==t)&&S.stream.match(/^\s*\w/,!1))return(S.marked="keyword","enum"==t)?T(eZ):"type"==t?T(eR,F("operator"),ef,F(";")):T(B("form"),eS,F("{"),B("}"),es,L,L);else if(d&&"namespace"==t)return S.marked="keyword",T(B("form"),G,V,L);else if(d&&"abstract"==t)return S.marked="keyword",T(V);else return T(B("stat"),ee);return"switch"==e?T(B("form"),z,F("{"),B("}","switch"),N,es,L,L,R):"case"==e?T(G,F(":")):"default"==e?T(F(":")):"catch"==e?T(B("form"),k,j,V,L,R):"export"==e?T(B("stat"),eU,L):"import"==e?T(B("stat"),eW,L):"async"==e?T(V):"@"==t?T(G,V):_(B("stat"),G,F(";"),L)}function j(e){if("("==e)return T(eB,F(")"))}function G(e,t){return W(e,t,!1)}function U(e,t){return W(e,t,!0)}function z(e){return"("!=e?_():T(B(")"),H,F(")"),L)}function W(e,t,n){if(S.state.fatArrowAt==S.stream.start){var i,o=n?J:Z;if("("==e)return T(k,B(")"),eo(eB,")"),L,F("=>"),o,R);if("variable"==e)return _(k,eS,F("=>"),o,R)}var a=n?K:q;return w.hasOwnProperty(e)?T(a):"function"==e?T(ek,a):"class"==e||d&&"interface"==t?(S.marked="keyword",T(B("form"),eL,L)):"keyword c"==e||"async"==e?T(n?U:G):"("==e?T(B(")"),H,F(")"),L,a):"operator"==e||"spread"==e?T(n?U:G):"["==e?T(B("]"),eY,L,a):"{"==e?ea(en,"}",null,a):"quasi"==e?_(X,a):"new"==e?T((i=n,function(e){return"."==e?T(i?$:Q):"variable"==e&&d?T(ex,i?K:q):_(i?U:G)})):T()}function H(e){return e.match(/[;\}\)\],]/)?_():_(G)}function q(e,t){return","==e?T(H):K(e,t,!1)}function K(e,t,n){var i=!1==n?q:K,o=!1==n?G:U;if("=>"==e)return T(k,n?J:Z,R);if("operator"==e)return/\+\+|--/.test(t)||d&&"!"==t?T(i):d&&"<"==t&&S.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(B(">"),eo(ef,">"),L,i):"?"==t?T(G,F(":"),o):T(o);if("quasi"==e)return _(X,i);if(";"!=e){if("("==e)return ea(U,")","call",i);if("."==e)return T(et,i);if("["==e)return T(B("]"),H,F("]"),L,i);if(d&&"as"==t)return S.marked="keyword",T(ef,i);if("regexp"==e)return S.state.lastType=S.marked="operator",S.stream.backUp(S.stream.pos-S.stream.start-1),T(o)}}function X(e,t){return"quasi"!=e?_():"${"!=t.slice(t.length-2)?T(X):T(H,Y)}function Y(e){if("}"==e)return S.marked="string-2",S.state.tokenize=b,T(X)}function Z(e){return x(S.stream,S.state),_("{"==e?V:G)}function J(e){return x(S.stream,S.state),_("{"==e?V:U)}function Q(e,t){if("target"==t)return S.marked="keyword",T(q)}function $(e,t){if("target"==t)return S.marked="keyword",T(K)}function ee(e){return":"==e?T(L,V):_(q,F(";"),L)}function et(e){if("variable"==e)return S.marked="property",T()}function en(e,t){if("async"==e)return S.marked="property",T(en);if("variable"==e||"keyword"==S.style){var n;return(S.marked="property","get"==t||"set"==t)?T(er):(d&&S.state.fatArrowAt==S.stream.start&&(n=S.stream.match(/^\s*:\s*/,!1))&&(S.state.fatArrowAt=S.stream.pos+n[0].length),T(ei))}if("number"==e||"string"==e)return S.marked=l?"property":S.style+" property",T(ei);if("jsonld-keyword"==e)return T(ei);if(d&&M(t))return S.marked="keyword",T(en);else if("["==e)return T(G,el,F("]"),ei);else if("spread"==e)return T(U,ei);else if("*"==t)return S.marked="keyword",T(en);else if(":"==e)return _(ei)}function er(e){return"variable"!=e?_(ei):(S.marked="property",T(ek))}function ei(e){return":"==e?T(U):"("==e?_(ek):void 0}function eo(e,t,n){function i(o,a){if(n?n.indexOf(o)>-1:","==o){var s=S.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),T(function(n,i){return n==t||i==t?_():_(e)},i)}return o==t||a==t?T():n&&n.indexOf(";")>-1?_(e):T(F(t))}return function(n,o){return n==t||o==t?T():_(e,i)}}function ea(e,t,n){for(var i=3;i<arguments.length;i++)S.cc.push(arguments[i]);return T(B(t,n),eo(e,t),L)}function es(e){return"}"==e?T():_(V,es)}function el(e,t){if(d){if(":"==e)return T(ef);if("?"==t)return T(el)}}function eu(e,t){if(d&&(":"==e||"in"==t))return T(ef)}function ec(e){if(d&&":"==e)if(S.stream.match(/^\s*\w+\s+is\b/,!1))return T(G,ed,ef);else return T(ef)}function ed(e,t){if("is"==t)return S.marked="keyword",T()}function ef(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(S.marked="keyword",T("typeof"==t?U:ef)):"variable"==e||"void"==t?(S.marked="type",T(eb)):"|"==t||"&"==t?T(ef):"string"==e||"number"==e||"atom"==e?T(eb):"["==e?T(B("]"),eo(ef,"]",","),L,eb):"{"==e?T(B("}"),eh,L,eb):"("==e?T(eo(ey,")"),ep,eb):"<"==e?T(eo(ef,">"),ef):"quasi"==e?_(eg,eb):void 0}function ep(e){if("=>"==e)return T(ef)}function eh(e){return e.match(/[\}\)\]]/)?T():","==e||";"==e?T(eh):_(em,eh)}function em(e,t){if("variable"==e||"keyword"==S.style)return S.marked="property",T(em);if("?"==t||"number"==e||"string"==e)return T(em);if(":"==e)return T(ef);if("["==e)return T(F("variable"),eu,F("]"),em);if("("==e)return _(eN,em);else if(!e.match(/[;\}\)\],]/))return T()}function eg(e,t){return"quasi"!=e?_():"${"!=t.slice(t.length-2)?T(eg):T(ef,ev)}function ev(e){if("}"==e)return S.marked="string-2",S.state.tokenize=b,T(eg)}function ey(e,t){return"variable"==e&&S.stream.match(/^\s*[?:]/,!1)||"?"==t?T(ey):":"==e?T(ef):"spread"==e?T(ey):_(ef)}function eb(e,t){return"<"==t?T(B(">"),eo(ef,">"),L,eb):"|"==t||"."==e||"&"==t?T(ef):"["==e?T(ef,F("]"),eb):"extends"==t||"implements"==t?(S.marked="keyword",T(ef)):"?"==t?T(ef,F(":"),ef):void 0}function ex(e,t){if("<"==t)return T(B(">"),eo(ef,">"),L,eb)}function ew(){return _(ef,eA)}function eA(e,t){if("="==t)return T(ef)}function eC(e,t){return"enum"==t?(S.marked="keyword",T(eZ)):_(eS,el,eO,eP)}function eS(e,t){return d&&M(t)?(S.marked="keyword",T(eS)):"variable"==e?(P(t),T()):"spread"==e?T(eS):"["==e?ea(eT,"]"):"{"==e?ea(e_,"}"):void 0}function e_(e,t){return"variable"!=e||S.stream.match(/^\s*:/,!1)?("variable"==e&&(S.marked="property"),"spread"==e)?T(eS):"}"==e?_():"["==e?T(G,F("]"),F(":"),e_):T(F(":"),eS,eO):(P(t),T(eO))}function eT(){return _(eS,eO)}function eO(e,t){if("="==t)return T(U)}function eP(e){if(","==e)return T(eC)}function eM(e,t){if("keyword b"==e&&"else"==t)return T(B("form","else"),V,L)}function eE(e,t){return"await"==t?T(eE):"("==e?T(B(")"),eD,L):void 0}function eD(e){return"var"==e?T(eC,eI):"variable"==e?T(eI):_(eI)}function eI(e,t){return")"==e?T():";"==e?T(eI):"in"==t||"of"==t?(S.marked="keyword",T(G,eI)):_(G,eI)}function ek(e,t){return"*"==t?(S.marked="keyword",T(ek)):"variable"==e?(P(t),T(ek)):"("==e?T(k,B(")"),eo(eB,")"),L,ec,V,R):d&&"<"==t?T(B(">"),eo(ew,">"),L,ek):void 0}function eN(e,t){return"*"==t?(S.marked="keyword",T(eN)):"variable"==e?(P(t),T(eN)):"("==e?T(k,B(")"),eo(eB,")"),L,ec,R):d&&"<"==t?T(B(">"),eo(ew,">"),L,eN):void 0}function eR(e,t){return"keyword"==e||"variable"==e?(S.marked="type",T(eR)):"<"==t?T(B(">"),eo(ew,">"),L):void 0}function eB(e,t){return("@"==t&&T(G,eB),"spread"==e)?T(eB):d&&M(t)?(S.marked="keyword",T(eB)):d&&"this"==e?T(el,eO):_(eS,el,eO)}function eL(e,t){return"variable"==e?eF(e,t):eV(e,t)}function eF(e,t){if("variable"==e)return P(t),T(eV)}function eV(e,t){return"<"==t?T(B(">"),eo(ew,">"),L,eV):"extends"==t||"implements"==t||d&&","==e?("implements"==t&&(S.marked="keyword"),T(d?ef:G,eV)):"{"==e?T(B("}"),ej,L):void 0}function ej(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||d&&M(t))&&S.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(S.marked="keyword",T(ej)):"variable"==e||"keyword"==S.style?(S.marked="property",T(eG,ej)):"number"==e||"string"==e?T(eG,ej):"["==e?T(G,el,F("]"),eG,ej):"*"==t?(S.marked="keyword",T(ej)):d&&"("==e?_(eN,ej):";"==e||","==e?T(ej):"}"==e?T():"@"==t?T(G,ej):void 0}function eG(e,t){if("!"==t||"?"==t)return T(eG);if(":"==e)return T(ef,eO);if("="==t)return T(U);var n=S.state.lexical.prev;return _(n&&"interface"==n.info?eN:ek)}function eU(e,t){return"*"==t?(S.marked="keyword",T(eX,F(";"))):"default"==t?(S.marked="keyword",T(G,F(";"))):"{"==e?T(eo(ez,"}"),eX,F(";")):_(V)}function ez(e,t){return"as"==t?(S.marked="keyword",T(F("variable"))):"variable"==e?_(U,ez):void 0}function eW(e){return"string"==e?T():"("==e?_(G):"."==e?_(q):_(eH,eq,eX)}function eH(e,t){return"{"==e?ea(eH,"}"):("variable"==e&&P(t),"*"==t&&(S.marked="keyword"),T(eK))}function eq(e){if(","==e)return T(eH,eq)}function eK(e,t){if("as"==t)return S.marked="keyword",T(eH)}function eX(e,t){if("from"==t)return S.marked="keyword",T(G)}function eY(e){return"]"==e?T():_(eo(U,"]"))}function eZ(){return _(B("form"),eS,F("{"),B("}"),eo(eJ,"}"),L,L)}function eJ(){return _(eS,eO)}function eQ(e,t,n){return t.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return k.lex=N.lex=!0,R.lex=!0,L.lex=!0,{startState:function(e){var t={tokenize:v,lastType:"sof",cc:[],lexical:new A((e||0)-a,0,"block",!1),localVars:n.localVars,context:n.localVars&&new E(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),x(e,t)),t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"==i&&("++"==o||"--"==o)?"incdec":i,C(t,n,i,o,e))},indent:function(t,i){if(t.tokenize==y||t.tokenize==b)return e.Pass;if(t.tokenize!=v)return 0;var o,l=i&&i.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(i))for(var c=t.cc.length-1;c>=0;--c){var d=t.cc[c];if(d==L)u=u.prev;else if(d!=eM&&d!=R)break}for(;("stat"==u.type||"form"==u.type)&&("}"==l||(o=t.cc[t.cc.length-1])&&(o==q||o==K)&&!/^[,\.=+\-*:?[\(]/.test(i));)u=u.prev;s&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var f=u.type,p=l==f;if("vardef"==f)return u.indented+("operator"==t.lastType||","==t.lastType?u.info.length+1:0);if("form"==f&&"{"==l)return u.indented;if("form"==f)return u.indented+a;if("stat"==f)return u.indented+("operator"==t.lastType||","==t.lastType||h.test(i.charAt(0))||/[,.]/.test(i.charAt(0))?s||a:0);if("switch"==u.info&&!p&&!1!=n.doubleIndentSwitch)return u.indented+(/^(?:case|default)\b/.test(i)?a:2*a);else if(u.align)return u.column+ +!p;else return u.indented+(p?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:l,jsonMode:u,expressionAllowed:eQ,skipExpression:function(t){C(t,"atom","atom","true",new e.StringStream("",2,null))}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(5885))},6900(e,t,n){var i=n(8899),o=n(9186),a=function(e){"use strict";if(!(this instanceof a))return new a(e);e=e||{},o.call(this,e);var t=n(4341),i=n(5933),s=this,l=this.draw,u=this.style,c=null,d=null,f=function(e){return e.children},p=[],h=this._init,m=this._exit;return this.featureType="graph",this._init=function(e){h.call(s,e);var n=t.deepMerge({},{nodes:{radius:5,fill:!0,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},void 0===e.style?{}:e.style);return s.style(n),s.nodes(t.identityFunction),s},this._build=function(){s.children().forEach(function(e){e._build()})},this._update=function(){s.children().forEach(function(e){e._update()})},this._exit=function(){return s.data([]),p.forEach(function(e){e._exit(),s.removeChild(e)}),p=[],d._exit(),s.removeChild(d),m(),s},this.style=function(e,t){var n=u.call(s,e,t);return n!==s?n:(d.style(e.nodes),p.forEach(function(t){t.style(e.links)}),s)},this.style.get=u.get,this.links=function(e){return void 0===e?f:(f=t.ensureFunction(e),s)},this.nodes=function(e){return void 0===e?c:(c=e,s.modified(),s)},this.nodeFeature=function(){return d},this.linkFeatures=function(){return p},this.draw=function(){var e,t=s.layer(),n=s.data(),o=0;return e=s.style(),d.data(n),d.style(e.nodes),n.forEach(function(n){(n.children||[]).forEach(function(a){var l;o+=1,p.length<o&&(l=i.createFeature(e.linkType,t,t.renderer()).style(e.links),s.addChild(l),p.push(l)),p[o-1].data([n,a])})}),p.splice(o,p.length-o).forEach(function(e){e._exit(),s.removeChild(e)}),l(),s},d=i.createFeature("point",this.layer(),this.layer().renderer()),s.addChild(d),e.nodes&&this.nodes(e.nodes),this._init(e),this};i(a,o),e.exports=a},6928(e,t,n){var i=n(4099);i.data=function(){"use strict";if(!(this instanceof i.data))return new i.data;this.type=function(){}},i.data.raster=0,i.data.point=1,i.data.lineString=2,i.data.polygon=3,i.data.geometry=10},6936(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},6949(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},6966(e,t,n){var i=n(4692),o=function(e){if(!(this instanceof o))return new o(e);this._index=e.index,this._size=e.size,this._overlap=e.overlap||{x:0,y:0},this._wrap=e.wrap||{x:1,y:1},this._url=e.url,this._fetched=!1,this._queue=e.queue||null,Object.defineProperty(this,"index",{get:function(){return this._index}}),Object.defineProperty(this,"size",{get:function(){return this._size}}),Object.defineProperty(this,"overlap",{get:function(){return this._overlap}}),this.fetch=function(){return this._fetched||i.get(this._url).done((function(){this._fetched=!0}).bind(this)).promise(this),this},this.fetched=function(){return this._fetched},this.then=function(e,t){return!this.fetched()&&this._queue&&this._queue.add&&(!this.state||"pending"===this.state())?this._queue.add(this,this.fetch):this.fetch(),this.done&&this.fail?this.done(e).fail(t):this.then(e,t),this},this.catch=function(e){return this.then(void 0,e),this},this.toString=function(){return[this._index.level||0,this._index.y,this._index.x,this._index.reference||0].join("_")},this.bounds=function(e,t){var n,i,o,a;return i=(n=this.size.x*(this.index.x-e.x)-this.overlap.x-t.x)+this.size.x+2*this.overlap.x,o=(a=this.size.y*(this.index.y-e.y)-this.overlap.y-t.y)+this.size.y+2*this.overlap.y,this.overlap.x&&this.index.x===e.x&&(n+=this.overlap.x),this.overlap.y&&this.index.y===e.y&&(a+=this.overlap.y),{left:n,right:i,bottom:o,top:a}},Object.defineProperty(this,"bottom",{get:function(){return this.size.y*(this.index.y+1)+this.overlap.y}}),Object.defineProperty(this,"top",{get:function(){return this.size.y*this.index.y-(this.index.y?this.overlap.y:0)}}),Object.defineProperty(this,"left",{get:function(){return this.size.x*this.index.x-(this.index.x?this.overlap.x:0)}}),Object.defineProperty(this,"right",{get:function(){return this.size.x*(this.index.x+1)+this.overlap.x}}),this.fadeIn=function(e){return i.noop(e),this}};e.exports=o},7019(e,t,n){var i=n(8899),o=n(9186),a=function(e){"use strict";if(!(this instanceof a))return new a(e);e=e||{},o.call(this,e);var t=this,n=this._init;return this.featureType="path",this.position=function(e){return void 0===e?t.style("position"):(e!==t.style("position")&&(t.style("position",e),t.dataTime().modified(),t.modified()),t)},this._init=function(e){n.call(t,e);var i=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:1,b:1},position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e}},void 0===e.style?{}:e.style);return void 0!==e.position&&(i.position=e.position),t.style(i),i.position&&t.position(i.position),t.dataTime().modified(),t},this._init(e),this};i(a,o),e.exports=a},7033(e){e.exports=function(e,t,n){var i,o,a,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return 1e-6>Math.abs(c)?null:(s*=c=1/c,l*=c,u*=c,i=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=s*s*a+o,e[1]=l*s*a+u*i,e[2]=u*s*a-l*i,e[3]=0,e[4]=s*l*a-u*i,e[5]=l*l*a+o,e[6]=u*l*a+s*i,e[7]=0,e[8]=s*u*a+l*i,e[9]=l*u*a-s*i,e[10]=u*u*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},7047(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=Math.sin(n),h=Math.cos(n);return e[0]=h*i+p*s,e[1]=h*o+p*l,e[2]=h*a+p*u,e[3]=h*s-p*i,e[4]=h*l-p*o,e[5]=h*u-p*a,e[6]=c,e[7]=d,e[8]=f,e}},7048(e){e.exports=function(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}},7092(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y,forward:()=>m,init:()=>h,inverse:()=>g,names:()=>v});var i=n(6549),o=n(3690),a=n(3987),s=n(7216),l=n(9576),u=n(641),c=n(4181),d=n(5949),f=n(4484),p=n(384);function h(){Math.abs(this.lat1+this.lat2)<p.H0||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.A)(this.es),this.e1=(0,o.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=(0,l.A)(this.e,this.sin_phi,this.cos_phi),this.ml1=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<p.H0?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=(0,l.A)(this.e,this.sin_phi,this.cos_phi),this.ml2=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function m(e){var t,n=e.x,i=e.y;if(this.sphere)t=this.a*(this.g-i);else{var o=(0,u.A)(this.e0,this.e1,this.e2,this.e3,i);t=this.a*(this.g-o)}var a=this.ns*(0,c.A)(n-this.long0,this.over),s=this.x0+t*Math.sin(a),l=this.y0+this.rh-t*Math.cos(a);return e.x=s,e.y=l,e}function g(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var t,n,i,o,a=0;if(0!==n&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return o=(0,c.A)(this.long0+a/this.ns,this.over),i=(0,d.A)(this.g-n/this.a),e.x=o,e.y=i,e;var s=this.g-n/this.a;return i=(0,f.A)(s,this.e0,this.e1,this.e2,this.e3),e.x=o=(0,c.A)(this.long0+a/this.ns,this.over),e.y=i,e}var v=["Equidistant_Conic","eqdc"];let y={init:h,forward:m,inverse:g,names:v}},7094(e){e.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7099(e,t,n){"use strict";n.d(t,{A:()=>o});var i=n(384);function o(e,t,n){var o=e*n;return o=Math.pow((1-o)/(1+o),.5*e),Math.tan(.5*(i.sK-t))/o}},7147(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},7150(e,t,n){var i=n(8899),o=n(9186),a=n(5204),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},o.call(this,e);var t,i=n(4341),l=this,u=this._init,c=this._exit,d=this.data,f=this.draw,p=this.modified,h=this.style,m=[];function g(e,t,n){var i=l.gcs(),o=l.layer().map().gcs();return e=e||l.data(),t=t||l.style.get("position"),n=n||l.style.get("polygon"),e.map(function(e,s){var u,c,d,f,p,h,m,g,v,y=n(e,s);if(y){u=Array((f=y.outer||(Array.isArray(y)?y:[])).length);for(var b=0;b<f.length;b+=1)u[b]=t.call(l,f[b],b,e,s),p=u[b].x,h=u[b].y,b?(p<d.min.x&&(d.min.x=p),h<d.min.y&&(d.min.y=h),p>d.max.x&&(d.max.x=p),h>d.max.y&&(d.max.y=h)):d={min:{x:p,y:h},max:{x:p,y:h}};c=(y.inner||[]).map(function(n){for(var i=Array((f=n||[]).length),o=0;o<f.length;o+=1)i[o]=t.call(l,f[o],o,e,s);return i}),m=a.transformCoordinates(i,o,u),g=c.map(function(e){return a.transformCoordinates(i,o,e)});for(var x=0;x<m.length;x+=1)p=m[x].x,h=m[x].y,x?(p<v.min.x&&(v.min.x=p),h<v.min.y&&(v.min.y=h),p>v.max.x&&(v.max.x=p),h>v.max.y&&(v.max.y=h)):v={min:{x:p,y:h},max:{x:p,y:h}};return{outer:u,inner:c,range:d,mapouter:m,mapinner:g,maprange:v}}})}function v(e){return i.isFunction(e)?function(t){return e(t[0],t[1],t[2],t[3])}:e}return this.featureType="polygon",this._subfeatureStyles={fillColor:!0,fillOpacity:!0,lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.data=function(e){var t=d(e);return void 0!==e&&(m=g(),l._checkForStroke()),t},this.polygonCoordinates=function(){return m},this.polygon=function(e){return void 0===e?l.style("polygon"):(l.style("polygon",e),l.dataTime().modified(),l.modified(),m=g(),l)},this.position=function(e){return void 0===e?l.style("position"):(l.style("position",e),l.dataTime().modified(),l.modified(),m=g(),l)},this.pointSearch=function(e,n){var o=[],s=[],u={},c=l.data(),d=l.layer().map();n=null===n?d.gcs():void 0===n?d.ingcs():n;var f=a.transformCoordinates(n,d.gcs(),e);return m.forEach(function(e,t){i.pointInPolygon(f,e.mapouter,e.mapinner,e.maprange)&&(s.push(t),u[t]=!0,o.push(c[t]))}),t&&t.pointSearch(e).found.forEach(function(e){e.length&&4===e[0].length&&!u[e[0][3]]&&(s.push(e[0][3]),u[e[0][3]]=!0,o.push(c[e[0][3]]))}),{index:s,found:o}},this.polygonSearch=function(e,n,o){var s,u,c=l.data(),d=[],f=[],p={},h=e,g={},v=l.layer().map();if(o=null===o?v.gcs():void 0===o?v.ingcs():o,e.outer||(e={outer:e,inner:[]}),!c||!c.length||e.outer.length<3)return{found:f,index:d,extra:p};if((n=n||{}).partial=n.partial||!1,(e={outer:a.transformCoordinates(o,v.gcs(),e.outer),inner:(e.inner||[]).map(function(e){return a.transformCoordinates(o,v.gcs(),e)})}).outer.forEach(function(e){s||(s={x:e.x,y:e.y},u={x:e.x,y:e.y}),e.x<s.x&&(s.x=e.x),e.x>u.x&&(u.x=e.x),e.y<s.y&&(s.y=e.y),e.y>u.y&&(u.y=e.y)}),m.forEach(function(t,o){if(t.mapouter.length&&(!t.maprange||!(t.maprange.max.x<s.x)&&!(t.maprange.min.x>u.x)&&!(t.maprange.max.y<s.y)&&!(t.maprange.min.y>u.y))){for(var a,l,h=-1;h<t.mapinner.length&&!l;h+=1)for(var m=h<0?t.mapouter:t.mapinner[h],v=0,y=m.length,b=y-1;v<y;b=v,v+=1){var x=i.distanceToPolygon2d(m[v],e);if(x*i.distanceToPolygon2d(m[b],e)<0||i.crossedLineSegmentPolygon2d(m[v],m[b],e)){l=!0;break}x>0&&(a=!0)}!a&&!l&&i.pointInPolygon(e.outer[0],t.mapouter,t.mapinner,t.maprange)&&(l=!0),(!n.partial&&a&&!l||n.partial&&(a||l))&&(d.push(o),f.push(c[o]),p[o]={partial:l},g[o]=!0)}}),t){var y=t.polygonSearch(h,n);y.found.forEach(function(e,t){e.length&&4===e[0].length&&(g[e[0][3]]||(d.push(e[0][3]),g[e[0][3]]=!0,f.push(c[e[0][3]]),p[y.index[t]]={partial:!1}),y.extra[y.index[t]].partial&&(p[y.index[t]].partial=!0))})}return{found:f,index:d,extra:p}},this.style=function(e,t){var n=h.apply(l,arguments);return void 0!==e&&("string"!=typeof e||void 0!==t)&&l._checkForStroke(),n},this.style.get=h.get,this._getLoopData=function(e,t,n){var i,o=[];for(i=0;i<n.length;i+=1)o.push([n[i],i,e,t]);return o},this._checkForStroke=function(){if(!1===h("stroke")){t&&l.layer()&&(l.layer().deleteFeature(t),t=null,l.dependentFeatures([]));return}if(l.layer()){t||(t=l.layer().createFeature("line",{selectionAPI:!1,gcs:l.gcs(),visible:l.visible(void 0,!0),dynamicDraw:!0}),l.dependentFeatures([t]));var e,n=l.style();if(i.isFunction(n.stroke)||!n.stroke){var o=l.style.get("stroke"),a=l.style.get("strokeOpacity");e=function(e){return o(e[2],e[3])?a(e[0],e[1],e[2],e[3]):0}}else e=v(n.strokeOpacity);t.style({antialiasing:v(n.antialiasing),closed:!0,lineCap:v(n.lineCap),lineJoin:v(n.lineJoin),miterLimit:v(n.miterLimit),strokeWidth:v(n.strokeWidth),strokeStyle:v(n.strokeStyle),strokeColor:v(n.strokeColor),strokeOffset:v(n.strokeOffset),strokeOpacity:e,uniformLine:v(n.uniformPolygon)});var s=l.data(),u=l.style("position");if(s!==t._lastData||u!==t._lastPosVal){var c,d,f,p=[],m=l.style.get("position"),g=l.style.get("polygon");for(c=0;c<s.length;c+=1)(d=g(s[c],c))&&(f=d.outer||(Array.isArray(d)?d:[])).length>=2&&(p.push(l._getLoopData(s[c],c,f)),d.inner&&d.inner.forEach(function(e){e.length>=2&&p.push(l._getLoopData(s[c],c,e))}));t.position(function(e,t,n,i){return m(e[0],e[1],e[2],e[3])}),t.data(p),t._lastData=s,t._lastPosVal=u}}},this.draw=function(){var e=f();return t&&t.draw(),e},this.modified=function(){var e=p();return t&&t.modified(),e},this.rdpSimplifyData=function(e,t,n,o,s){var u=l.layer().map(),c=u.gcs(),d=l.gcs(),f=g(e,n,o);return(void 0===t&&(t=.5*u.unitsPerPixel(u.zoom())),f=f.map(function(e){return{outer:a.transformCoordinates(d,c,e.outer),inner:e.inner.map(function(e){return a.transformCoordinates(d,c,e)})}}),e=e.map(function(e,n){var o=f[n],s={};for(var l in e)e.hasOwnProperty(l)&&!(Array.isArray(e)&&l>=0&&l<e.length)&&(s[l]=e[l]);if(o&&o.outer.length>=3)if(s.inner=o.inner.filter(function(e){return e.length>=3}),s.outer=i.rdpLineSimplify(o.outer,t,!0,s.inner),s.outer.length>=3){var u=s.inner.slice();s.inner.map(function(e,n){u[n]=s.outer;var o=i.rdpLineSimplify(e,t,!0,u);return u[n]=o,o}).filter(function(e){return e.length>=3}),s.outer=a.transformCoordinates(c,d,s.outer),s.inner=s.inner.map(function(e){return a.transformCoordinates(c,d,e)})}else s.outer=s.inner=[];else s.outer=[];return s}),s)?e:(l.style("position",i.identityFunction),l.style("polygon",i.identityFunction),l.data(e),l)},this.mouseOverOrderClosestBorder=function(e){var t=e.feature.data(),n=e.feature.layer().map(),o=a.transformCoordinates(n.ingcs(),e.feature.gcs(),e.mouse.geo),s=e.feature.polygonCoordinates(),l={};e.over.index.forEach(function(e,t){var n,a=s[e];a.outer.forEach(function(e,t){var s=a.outer[(t+1)%a.outer.length],l=i.distance2dToLineSquared(o,e,s);(void 0===n||l<n)&&(n=l)}),a.inner.forEach(function(e){e.forEach(function(t,a){var s=e[(a+1)%e.length],l=i.distance2dToLineSquared(o,t,s);(void 0===n||l<n)&&(n=l)})}),l[e]=n}),e.over.index.sort(function(e,t){return l[e]-l[t]}).reverse(),e.over.index.forEach(function(n,i){e.over.found[i]=t[n]})},this.toPolygonList=function(e){var t=l.style.get("polygon"),n=l.style.get("position");return l.data().map(function(e,i){var o=t(e,i),a=o.outer||(Array.isArray(o)?o:[]);if(a.length<3)return[];var s=[a.map(function(t,o){var a=n(t,o,e,i);return[a.x,a.y]})];return o.inner&&o.inner.forEach(function(t){s.push(t.map(function(t,o){var a=n(t,o,e,i);return[a.x,a.y]}))}),s})},this.fromPolygonList=function(e,t){return l.style({position:function(e){return{x:e[0],y:e[1]}},polygon:function(e){return{outer:e[0],inner:e.slice(1)}}}),l.data(e),l},this._exit=function(){t&&l.layer()&&(l.layer().deleteFeature(t),t=null,l.dependentFeatures([])),c()},this._init=function(e){e=e||{},u.call(l,e);var t=Object.assign({},{fill:!0,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:!1,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:i.identityFunction,position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e},origin:function(e){for(var t=0;t<e.length;t+=1)if(e[t].vertices.length>=3)return e[t].vertices.slice(0,3);return[0,0,0]}},void 0===e.style?{}:e.style);void 0!==e.polygon&&(t.polygon=e.polygon),void 0!==e.position&&(t.position=e.position),l.style(t),l._checkForStroke()},this};s.create=function(e,t){return(t=t||{}).type="polygon",o.create(e,t)},s.capabilities={feature:"polygon"},i(s,o),e.exports=s},7167(e,t,n){var i=n(4099),o=n(8899),a=n(4226),s=n(8315);i.actor=function(){"use strict";if(!(this instanceof i.actor))return new i.actor;i.node.call(this);var e=this,t=s.create(),n=i.boundingObject.ReferenceFrame.Relative,o=null;return this.matrix=function(){return t},this.referenceFrame=function(){return n},this.mapper=function(){return o},this.setMapper=function(t){t!==o&&(o=t,e.boundsModified())},this.computeBounds=function(){if(null==o)return void e.resetBounds();var n,i,s,l,u=e.computeBoundsTimestamp();(e.boundsDirtyTimestamp().getMTime()>u.getMTime()||o.boundsDirtyTimestamp().getMTime()>u.getMTime())&&(o.computeBounds(),i=[(n=o.bounds())[0],n[2],n[4]],s=[n[1],n[3],n[5]],a.transformMat4(i,i,t),a.transformMat4(s,s,t),l=[i[0]>s[0]?s[0]:i[0],i[0]>s[0]?i[0]:s[0],i[1]>s[1]?s[1]:i[1],i[1]>s[1]?i[1]:s[1],i[2]>s[2]?s[2]:i[2],i[2]>s[2]?i[2]:s[2]],e.setBounds(l[0],l[1],l[2],l[3],l[4],l[5]),u.modified())},e},o(i.actor,i.node)},7187(e,t,n){e.exports={create:n(4771),clone:n(7382),fromValues:n(2633),copy:n(2646),set:n(503),add:n(4672),subtract:n(3851),multiply:n(9207),divide:n(4018),min:n(7147),max:n(6457),scale:n(7229),scaleAndAdd:n(7897),distance:n(416),squaredDistance:n(9305),length:n(5067),squaredLength:n(1642),negate:n(2421),inverse:n(8603),normalize:n(6496),dot:n(9284),lerp:n(1666),random:n(1316),transformMat4:n(278),transformQuat:n(2488)}},7216(e,t,n){"use strict";function i(e){return e*e*e*(35/3072)}n.d(t,{A:()=>i})},7229(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},7252(e,t,n){function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var a=n(8899),s=n(9186),l=n(9558),u=function(e){"use strict";if(!(this instanceof u))return new u(e);e=e||{},l.call(this,e);var t=n(6732),o=n(4341),a=n(5843);a=a.__esModule?a.default:a;var s=this,c=this._init,d=null,f=t(),p=0,h=0,m=0;return this.featureType="marker",this._updateRangeTree=function(){if(!(f.timestamp()>=s.dataTime().timestamp()&&f.timestamp()>=s.timestamp())){var e,t,n=s.style.get("radius"),o=s.style.get("strokeWidth"),l=s.style.get("radiusIncludesStroke"),c=s.style.get("strokeOffset"),g=s.style.get("scaleWithZoom");t=s.position(),p=0,h=0,m=0,e=s.data().map(function(e,i){var a=t(e,i),s=g(e,i),d=n(e,i),f=o(e,i),v=Math.sign(c(e,i)),y=l(e,i),b=(y=void 0===y||y)?d+f*(v+1)/2:d+f,x=y?d+f*(v-1)/2:d;switch(s=u.scaleMode[s]||(s>=1&&s<=3?s:0)){case u.scaleMode.stroke:x>p&&(p=x),f>m&&(m=f);break;case u.scaleMode.fill:case u.scaleMode.all:b>h&&(h=b);break;default:b>p&&(p=b)}return[a.x,a.y]}),d=new a(e.length);var v,y=function(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,s=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw s}}}}(e);try{for(y.s();!(v=y.n()).done;){var b,x=(b=v.value,function(e){if(Array.isArray(e))return e}(b)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{a=(n=n.call(e)).next,!1;for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),2!==l.length);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(b,2)||i(b,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=x[0],A=x[1];d.add(w,A)}}catch(e){y.e(e)}finally{y.f()}d.finish(),f.modified()}},this._approximateMaxRadius=function(e){s._updateRangeTree();var t=Math.pow(2,e);return Math.max(p+m*t,h*t)},this.pointSearch=function(e,t){var n,i,o,a,l=[],c=[],f=[],p=s.gcs(),h=s.style.get("radius"),m=s.style.get("strokeWidth"),g=s.style.get("radiusIncludesStroke"),v=s.style.get("strokeOffset"),y=s.style.get("scaleWithZoom");if(!(o=s.data())||!o.length)return{found:[],index:[]};s._updateRangeTree();var b=s.layer().map();t=null===t?b.gcs():void 0===t?b.ingcs():t;var x=b.gcsToDisplay(e,t),w=b.zoom(),A=Math.pow(2,w),C=this._approximateMaxRadius(w);return n={x:Math.min((a=[b.displayToGcs({x:x.x-C,y:x.y-C},p),b.displayToGcs({x:x.x+C,y:x.y-C},p),b.displayToGcs({x:x.x-C,y:x.y+C},p),b.displayToGcs({x:x.x+C,y:x.y+C},p)])[0].x,a[1].x,a[2].x,a[3].x),y:Math.min(a[0].y,a[1].y,a[2].y,a[3].y)},i={x:Math.max(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.max(a[0].y,a[1].y,a[2].y,a[3].y)},l=d.range(n.x,n.y,i.x,i.y),(l=Uint32Array.from(l).sort()).forEach(function(e){var t=o[e],n=h(o[e],e),i=y(o[e],e),a=v(o[e],e),l=i?m(o[e],e):0,d=g(t,e),w=(d=void 0===d||d)?n+l*(a-1)/2:n;n=w+l;var C,S,_,T=s.position()(t,e);switch(i=u.scaleMode[i]||(i>=1&&i<=3?i:0)){case u.scaleMode.fill:n=w*A+l;break;case u.scaleMode.stroke:n=w+l*A;break;case u.scaleMode.all:n*=A}n&&(_=n*n,(C=(T=b.gcsToDisplay(T,p)).x-x.x)*C+(S=T.y-x.y)*S<=_&&(c.push(t),f.push(e)))}),{found:c,index:f}},this.polygonSearch=function(e,t,n){var i,a,l,c,f=s.gcs(),p=[],h=[],m={},g=s.layer().map(),v=s.data(),y=s.style.get("radius"),b=s.style.get("strokeWidth"),x=s.style.get("radiusIncludesStroke"),w=s.style.get("strokeOffset"),A=s.style.get("scaleWithZoom"),C=g.zoom(),S=Math.pow(2,C),_=this._approximateMaxRadius(C);return(n=null===n?g.gcs():void 0===n?g.ingcs():n,e.outer||(e={outer:e,inner:[]}),!(e.outer.length<3)&&v&&v.length)?((t=t||{}).partial=t.partial||!1,(e={outer:g.gcsToDisplay(e.outer,n),inner:(e.inner||[]).map(function(e){return g.gcsToDisplay(e,n)})}).outer.forEach(function(e){a||(a={x:e.x,y:e.y},l={x:e.x,y:e.y}),e.x<a.x&&(a.x=e.x),e.x>l.x&&(l.x=e.x),e.y<a.y&&(a.y=e.y),e.y>l.y&&(l.y=e.y)}),s._updateRangeTree(),a={x:Math.min((c=[g.displayToGcs({x:a.x-_,y:a.y-_},f),g.displayToGcs({x:l.x+_,y:a.y-_},f),g.displayToGcs({x:l.x+_,y:l.y+_},f),g.displayToGcs({x:a.x-_,y:l.y+_},f)])[0].x,c[1].x,c[2].x,c[3].x),y:Math.min(c[0].y,c[1].y,c[2].y,c[3].y)},l={x:Math.max(c[0].x,c[1].x,c[2].x,c[3].x),y:Math.max(c[0].y,c[1].y,c[2].y,c[3].y)},i=d.range(a.x,a.y,l.x,l.y),(i=Uint32Array.from(i).sort()).forEach(function(n){var i=v[n],a=s.position()(i,n),l=y(i,n),c=A(i,n),d=w(i,n),C=c?b(i,n):0,_=x(i,n),T=(_=void 0===_||_)?l+C*(d-1)/2:l;switch(c=u.scaleMode[c]||(c>=1&&c<=3?c:0),l=T+C,c){case u.scaleMode.fill:l=T*S+C;break;case u.scaleMode.stroke:l=T+C*S;break;case u.scaleMode.all:l*=S}if(l){a=g.gcsToDisplay(a,f);var O=o.distanceToPolygon2d(a,e);(O>=l||O>=0&&"center"===t.partial||O>=-l&&t.partial&&"center"!==t.partial)&&(p.push(i),h.push(n),m[n]={partial:O<l,distance:O})}}),{found:p,index:h,extra:m}):{found:[],index:[],extra:{}}},this._init=function(e){return e=o.deepMerge({},{style:Object.assign({},{radius:6.25,radiusIncludesStroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeOffset:-1,strokeOpacity:1,strokeWidth:1.25,fillColor:{r:1,g:.839,b:.439},fillOpacity:.8,symbol:0,symbolValue:0,rotation:0,scaleWithZoom:u.scaleMode.none,rotateWithMap:!1},e&&void 0===e.style?{}:e.style)},e),c.call(s,e),s},s};u.create=function(e,t){return(t=t||{}).type="marker",s.create(e,t)},u.capabilities={feature:"marker"},u.primitiveShapes=l.primitiveShapes,u.symbols={circle:0,ellipse:0,flowerBase:1,flowerMax:16,triangle:16,diamond:17,starBase:17,starMax:16,square:32,rectangle:32,crossBase:33,crossMax:16,oval:48,jackBase:49,jackMax:16,drop:64,dropBase:65,dropMax:16,arrow:80,arrowBase:81,arrowMax:16,length:96},["flower","star","cross","jack","drop","arrow"].forEach(function(e){for(var t=2;t<=u.symbols[e+"Max"];t+=1)u.symbols[e+t]=u.symbols[e+"Base"]-2+t}),u.scaleMode={none:0,fill:1,stroke:2,all:3},a(u,l),e.exports=u},7286(e){var t=function(e){return this instanceof t?(e=e||{},this._size=e.size||64,Object.defineProperty(this,"size",{get:function(){return this._size},set:function(e){for(;this._atime.length>e;)this.remove(this._atime[this._atime.length-1]);this._size=e}}),Object.defineProperty(this,"length",{get:function(){return this._atime.length}}),this._access=function(e){return this._atime.indexOf(e)},this.remove=function(e){var t="string"==typeof e?e:e.toString();return t in this._cache&&(this._atime.splice(this._access(t),1),delete this._cache[t],!0)},this.clear=function(){return this._cache={},this._atime=[],this},this.get=function(e,t){return(e="string"==typeof e?e:e.toString())in this._cache?(t||(this._atime.splice(this._access(e),1),this._atime.unshift(e)),this._cache[e]):null},this.add=function(e,t,n){this.remove(e);var i=e.toString();this._cache[i]=e,this._atime.unshift(i),n||this.purge(t)},this.purge=function(e){for(var t;this._atime.length>this.size;){t=this._atime.pop();var n=this._cache[t];e&&e(n),delete this._cache[t]}},this.clear(),this):new t(e)};e.exports=t},7306(e){var t={};t.Util={stamp:function(e){return e._leaflet_id=e._leaflet_id||++t.Util.lastId,e._leaflet_id},lastId:0};var n=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}};n.prototype={addObject:function(e,n){var i=this._getCoord(n.x),o=this._getCoord(n.y),a=this._grid,s=a[o]=a[o]||{},l=s[i]=s[i]||[],u=t.Util.stamp(e);n.obj=e,this._objectPoint[u]=n,l.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,n){var i,o,a=this._getCoord(n.x),s=this._getCoord(n.y),l=this._grid,u=l[s]=l[s]||{},c=u[a]=u[a]||[];for(delete this._objectPoint[t.Util.stamp(e)],i=0,o=c.length;i<o;i++)if(c[i]===e)return c.splice(i,1),1===o&&delete u[a],!0},eachObject:function(e,t){var n,i,o,a,s,l,u=this._grid;for(n in u)for(i in s=u[n])for(o=0,a=(l=s[i]).length;o<a;o++)e.call(t,l[o])&&(o--,a--)},getNearObject:function(e){var n,i,o,a,s,l,u,c,d=this._getCoord(e.x),f=this._getCoord(e.y),p=this._objectPoint,h=this._sqCellSize,m=null;for(n=f-1;n<=f+1;n++)if(a=this._grid[n]){for(i=d-1;i<=d+1;i++)if(s=a[i])for(o=0,l=s.length;o<l;o++)u=s[o],(c=this._sqDist(p[t.Util.stamp(u)],e))<h&&(h=c,m=u)}return m},contents:function(){return Object.values(this._objectPoint)},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},e.exports=n},7314(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>p,forward:()=>c,init:()=>u,inverse:()=>d,names:()=>f});var i=n(9576),o=n(4181),a=n(7099),s=n(6245),l=n(384);function u(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,i.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function c(e){var t,n,i=e.x,s=e.y;if(s*l.dX>90&&s*l.dX<-90&&i*l.dX>180&&i*l.dX<-180||Math.abs(Math.abs(s)-l.sK)<=l.H0)return null;if(this.sphere)t=this.x0+this.a*this.k0*(0,o.A)(i-this.long0,this.over),n=this.y0+this.a*this.k0*Math.log(Math.tan(l.Vj+.5*s));else{var u=Math.sin(s),c=(0,a.A)(this.e,s,u);t=this.x0+this.a*this.k0*(0,o.A)(i-this.long0,this.over),n=this.y0-this.a*this.k0*Math.log(c)}return e.x=t,e.y=n,e}function d(e){var t,n=e.x-this.x0,i=e.y-this.y0;if(this.sphere)t=l.sK-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(t=(0,s.A)(this.e,a)))return null}return e.x=(0,o.A)(this.long0+n/(this.a*this.k0),this.over),e.y=t,e}var f=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];let p={init:u,forward:c,inverse:d,names:f}},7350(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h,forward:()=>d,init:()=>c,inverse:()=>f,names:()=>p});var i=n(1114),o=n(1064),a=n(4568),s=n(4181),l=n(384),u=n(3385);function c(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,i.A)(this.es),this.ml0=(0,o.A)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function d(e){var t,n,i=e.x,a=e.y,u=(0,s.A)(i-this.long0,this.over),c=Math.sin(a),d=Math.cos(a);if(this.es){var f=d*u,p=Math.pow(f,2),h=this.ep2*Math.pow(d,2),m=Math.pow(h,2),g=Math.pow(Math.abs(d)>l.H0?Math.tan(a):0,2),v=Math.pow(g,2);f/=Math.sqrt(1-this.es*Math.pow(c,2));var y=(0,o.A)(a,c,d,this.en);t=this.a*(this.k0*f*(1+p/6*(1-g+h+p/20*(5-18*g+v+14*h-58*g*h+p/42*(61+179*v-v*g-479*g)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+c*u*f/2*(1+p/12*(5-g+9*h+4*m+p/30*(61+v-58*g+270*h-330*g*h+p/56*(1385+543*v-v*g-3111*g))))))+this.y0}else{var b=d*Math.sin(u);if(Math.abs(Math.abs(b)-1)<l.H0)return 93;if(t=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,(b=Math.abs(n=d*Math.cos(u)/Math.sqrt(1-Math.pow(b,2))))>=1)if(b-1>l.H0)return 93;else n=0;else n=Math.acos(n);a<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=t,e.y=n,e}function f(e){var t,n,i,o,c=(e.x-this.x0)*(1/this.a),d=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+d/this.k0,Math.abs(n=(0,a.A)(t,this.es,this.en))<l.sK){var f=Math.sin(n),p=Math.cos(n),h=Math.abs(p)>l.H0?Math.tan(n):0,m=this.ep2*Math.pow(p,2),g=Math.pow(m,2),v=Math.pow(h,2),y=Math.pow(v,2),b=c*Math.sqrt(t=1-this.es*Math.pow(f,2))/this.k0,x=Math.pow(b,2);t*=h,i=n-t*x/(1-this.es)*.5*(1-x/12*(5+3*v-9*m*v+m-4*g-x/30*(61+90*v-252*m*v+45*y+46*m-x/56*(1385+3633*v+4095*y+1574*y*v)))),o=(0,s.A)(this.long0+b*(1-x/6*(1+2*v+m-x/20*(5+28*v+24*y+8*m*v+6*m-x/42*(61+662*v+1320*y+720*y*v))))/p,this.over)}else i=l.sK*(0,u.A)(d),o=0;else{var w=Math.exp(c/this.k0),A=.5*(w-1/w),C=Math.cos(this.lat0+d/this.k0);i=Math.asin(t=Math.sqrt((1-Math.pow(C,2))/(1+Math.pow(A,2)))),d<0&&(i=-i),o=0===A&&0===C?0:(0,s.A)(Math.atan2(A,C)+this.long0,this.over)}return e.x=o,e.y=i,e}var p=["Fast_Transverse_Mercator","Fast Transverse Mercator"];let h={init:c,forward:d,inverse:f,names:p}},7382(e){e.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},7429(e,t,n){var i={"./aea.js":38,"./aeqd.js":5926,"./bonne.js":6265,"./cass.js":4165,"./cea.js":1120,"./eqc.js":1492,"./eqdc.js":7092,"./eqearth.js":6717,"./equi.js":8903,"./etmerc.js":1498,"./gauss.js":9985,"./geocent.js":3768,"./geos.js":9121,"./gnom.js":3546,"./gstmerc.js":8876,"./krovak.js":4319,"./laea.js":565,"./lcc.js":9385,"./longlat.js":8044,"./merc.js":7314,"./mill.js":4273,"./moll.js":163,"./nzmg.js":9699,"./ob_tran.js":3012,"./omerc.js":231,"./ortho.js":1929,"./poly.js":2013,"./qsc.js":5670,"./robin.js":5947,"./sinu.js":3234,"./somerc.js":7560,"./stere.js":9204,"./sterea.js":605,"./tmerc.js":7350,"./tpers.js":1587,"./utm.js":2196,"./vandg.js":535};function o(e){return n(a(e))}function a(e){if(!n.o(i,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=7429},7444(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,c=n*s,d=i*s,f=i*l,p=o*s,h=o*l,m=o*u,g=a*s,v=a*l,y=a*u;return e[0]=1-f-m,e[1]=d+y,e[2]=p-v,e[3]=0,e[4]=d-y,e[5]=1-c-m,e[6]=h+g,e[7]=0,e[8]=p+v,e[9]=h-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7445(e){e.exports="/* lineFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute vec3 prev;\nattribute vec3 next;\nattribute vec3 far;\nattribute float flags;\n\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float pixelWidth;\nuniform float aspect;\nuniform float miterLimit;\nuniform float antialiasing;\n\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;  /* px, py, length - px, width */\nvarying vec4 info;  /* near mode, far mode, offset */\nvarying vec4 angles; /* near angle cos, sin, far angle cos, sin */\n\nconst float PI = 3.14159265358979323846264;\n\nvec4 viewCoord(vec3 c) {\n  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);\n  if (result.w != 0.0)  result = result / result.w;\n  return result;\n}\n\nfloat atan2(float y, float x) {\n  if (x > 0.0)  return atan(y / x);\n  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;\n  if (x < 0.0)  return atan(y / x) - PI;\n  return sign(y) * 0.5 * PI;\n}\n\nvoid main(void)\n{\n  /* If any vertex has been deliberately set to a negative opacity,\n   * skip doing computations on it. */\n  if (strokeOpacity < 0.0) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  /* convert coordinates.  We have four values, since we need to\n   * calculate the angles between the lines formed by prev-pos and\n   * pos-next, and between pos-next and next-far, plus know the angle\n   *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n  vec4 A = viewCoord(prev);\n  vec4 B = viewCoord(pos);\n  vec4 C = viewCoord(next);\n  vec4 D = viewCoord(far);\n  // calculate line segment vector and angle\n  vec2 deltaCB = C.xy - B.xy;\n  if (deltaCB == vec2(0.0, 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;\n  // if lines reverse upon themselves and are not nearly the same length, skip\n  // joins.  This is a heuristic; the correct method would to be to pass some\n  // sort of length of the adjacent line to the fragment renderer and adjust\n  // which fragments are rendered, but this is much more complex.\n  float abLimit = length(vec2(A.x - B.x, (A.y - B.y) / aspect)) / pixelWidth;\n  float dcLimit = length(vec2(D.x - C.x, (D.y - C.y) / aspect)) / pixelWidth;\n  if (abLimit >= lineLength - antialiasing - strokeWidth * 0.5 && abLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    abLimit = 0.0001;\n  } else {\n    if (abLimit < lineLength)  abLimit = lineLength;\n    abLimit = (strokeWidth - antialiasing) / (abLimit + antialiasing);\n    if (abLimit < 0.0001) abLimit = 0.0001;\n    if (abLimit > 0.1) abLimit = 0.1;\n  }\n  if (dcLimit >= lineLength - antialiasing - strokeWidth * 0.5 && dcLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    dcLimit = 0.0001;\n  } else {\n    if (dcLimit < lineLength)  dcLimit = lineLength;\n    dcLimit = (strokeWidth - antialiasing) / (dcLimit + antialiasing);\n    if (dcLimit < 0.0001) dcLimit = 0.0001;\n    if (dcLimit > 0.1) dcLimit = 0.1;\n  }\n  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);\n  // values we need to pass along\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // extract values from our flags field\n  int vertex = int(mod(flags, 4.0));\n  int nearMode = int(mod(floor(flags / 4.0), 8.0));\n  int farMode = int(mod(floor(flags / 32.0), 8.0));\n  // we use 11 bits of the flags for the offset, where -1023 to 1023\n  // maps to -1 to 1.  The 11 bits are a signed value, so simply\n  // selecting the bits will result in an unsigned values that may be\n  // greater than 1, in which case we have to subtract appropriately.\n  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;\n  if (offset > 1.0)  offset -= 2048.0 / 1023.0;\n  // by default, offset by the width and don't extend lines.  Later,\n  // calculate line extensions based on end cap and end join modes\n  float yOffset = strokeWidth + antialiasing;\n  if (vertex == 0)  yOffset *= -1.0;\n  yOffset += strokeWidth * offset;\n  float xOffset = 0.0;\n  // end caps\n  if (nearMode == 0) {\n    xOffset = antialiasing;\n  } else if (nearMode == 1 || nearMode == 2) {\n    xOffset = strokeWidth + antialiasing;\n  }\n\n  // If joining lines, calculate the angles in screen space formed by\n  // the near end (A-B-C) and far end (B-C-D), and determine how much\n  // space is needed for the particular join.\n  //   This could be changed: if the lines are not a uniform width and\n  // offset, then the functional join angle is not simply half the\n  // angle between the two lines, but rather half the angle of the\n  // inside edge of the the two lines.\n  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;  // of half angles\n  // handle near end\n  if (nearMode >= 4) {\n    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);\n    if (A.xy == B.xy)  angleBA = angleCB;\n    float angleABC = angleCB - angleBA;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosABC = cos(angleABC);  sinABC = sin(angleABC);\n    // if this angle is close to flat, pass-through the join\n    if (nearMode >= 4 && (cosABC > 0.999999 || cosABC < abLimit)) {\n      nearMode = 3;\n    }\n    // miter, miter-clip\n    if (nearMode == 4 || nearMode == 7) {\n      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {\n        if (nearMode == 4) {\n          nearMode = 5;\n        } else {\n          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n        }\n      } else {\n        // we add an extra 1.0 to the xOffset to make sure that fragment\n        // shader is doing the clipping\n        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;\n        nearMode = 4;\n      }\n    }\n    // bevel or round join\n    if (nearMode == 5 || nearMode == 6) {\n      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n    }\n  }\n\n  // handle far end\n  if (farMode >= 4) {\n    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);\n    if (D.xy == C.xy)  angleDC = angleCB;\n    float angleBCD = angleDC - angleCB;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);\n    // if this angle is close to flat, pass-through the join\n    if (farMode >= 4 && (cosBCD > 0.999999 || cosBCD < dcLimit)) {\n      farMode = 3;\n    }\n    // miter, miter-clip\n    if (farMode == 4 || farMode == 7) {\n      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {\n        if (farMode == 4)  farMode = 5;\n      } else {\n        farMode = 4;\n      }\n    }\n  }\n\n  // compute the location of a vertex to include everything that might\n  // need to be rendered\n  xOffset *= -1.0;\n  gl_Position = vec4(\n    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,\n    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,\n    B.z, 1.0);\n  // store other values needed to determine which pixels to plot.\n  if (vertex == 0 || vertex == 1) {\n    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);\n    info = vec4(float(nearMode), float(farMode), offset, 0.0);\n    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);\n  } else {\n    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);\n    info = vec4(float(farMode), float(nearMode), -offset, 0.0);\n    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);\n  }\n}\n"},7449(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function o(e,t,i){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var i=e;if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e,a()?Reflect.construct(t,i||[],s(e).constructor):t.apply(e,i))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=n(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(o.key),o)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||h(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t,n){var i,o;return[(i=e[0],i+(t[0]-i)*n),(o=e[1],o+(t[1]-o)*n)]}function v(e,t){var n=p(e,2),i=n[0],o=n[1],a=p(t,2),s=a[0],l=a[1];return!(i[0]>l[0]||o[0]<s[0]||i[1]>l[1]||o[1]<s[1])}Object.defineProperty(t,"__esModule",{value:!0});var y=d(function e(){f(this,e)}),b=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-10;return f(this,t),(e=o(this,t)).epsilon=n,e}return l(t,e),d(t,[{key:"snap0",value:function(e){return Math.abs(e)<this.epsilon?0:e}},{key:"snap01",value:function(e){return Math.abs(e)<this.epsilon?0:Math.abs(1-e)<this.epsilon?1:e}},{key:"isCollinear",value:function(e,t,n){var i=e[0]-t[0],o=e[1]-t[1],a=t[0]-n[0];return Math.abs(i*(t[1]-n[1])-a*o)<this.epsilon}},{key:"solveCubicNormalized",value:function(e,t,n){var i=e/3,o=t/3,a=i*i-o,s=i*(i*i-t/2)+n/2;if(Math.abs(s)<this.epsilon&&Math.abs(a)<this.epsilon)return[-i];if(Math.abs(i*(i*(4*i*n-o*t)-2*t*n)+4*o*o*o+n*n)<this.epsilon){var l=Math.sqrt(a);return s>0?[-2*l-e/3,l-e/3]:[-l-e/3,2*l-e/3]}var u=a*a*a,c=s*s;if(c<u){var d=Math.acos((s<0?-1:1)*Math.sqrt(c/u)),f=-2*Math.sqrt(a);return[f*Math.cos(d/3)-i,f*Math.cos((d+2*Math.PI)/3)-i,f*Math.cos((d-2*Math.PI)/3)-i].sort(function(e,t){return e-t})}var p=(s<0?1:-1)*Math.pow(Math.abs(s)+Math.sqrt(c-u),1/3),h=Math.abs(p)>=this.epsilon?a/p:0;return[p+h-i]}},{key:"solveCubic",value:function(e,t,n,i){if(Math.abs(e)<this.epsilon){if(Math.abs(t)<this.epsilon)return Math.abs(n)<this.epsilon?Math.abs(i)<this.epsilon?[0]:[]:[-i/n];var o=2*t,a=n*n-4*t*i;return Math.abs(a)<this.epsilon?[-n/o]:a>0?[(-n+(a=Math.sqrt(a)))/o,(-n-a)/o].sort(function(e,t){return e-t}):[]}return this.solveCubicNormalized(t/e,n/e,i/e)}},{key:"isEqualVec2",value:function(e,t){return Math.abs(e[0]-t[0])<this.epsilon&&Math.abs(e[1]-t[1])<this.epsilon}},{key:"compareVec2",value:function(e,t){return Math.abs(t[0]-e[0])<this.epsilon?Math.abs(t[1]-e[1])<this.epsilon?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1}}])}(y),x=d(function e(t){f(this,e),this.tValues=[],this.geo=t},[{key:"addArray",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.tValues.push(o)}}catch(e){n.e(e)}finally{n.f()}return this}},{key:"add",value:function(e){if((e=this.geo.snap01(e))<0||e>1)return this;var t,n=i(this.tValues);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(0===this.geo.snap0(e-o))return this}}catch(e){n.e(e)}finally{n.f()}return this.tValues.push(e),this}},{key:"list",value:function(){return this.tValues.sort(function(e,t){return e-t}),this.tValues}}]),w=d(function e(t,n){f(this,e),this.tValuePairs=[],this.allowOutOfRange=t,this.geo=n},[{key:"add",value:function(e,t){if(e=this.geo.snap01(e),t=this.geo.snap01(t),!this.allowOutOfRange&&(e<0||e>1||t<0||t>1))return this;var n,o=i(this.tValuePairs);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(0===this.geo.snap0(e-a[0])||0===this.geo.snap0(t-a[1]))return this}}catch(e){o.e(e)}finally{o.f()}return this.tValuePairs.push([e,t]),this}},{key:"list",value:function(){return this.tValuePairs.sort(function(e,t){return e[0]-t[0]}),this.tValuePairs}},{key:"done",value:function(){return this.tValuePairs.length<=0?null:{kind:"tValuePairs",tValuePairs:this.list()}}}]),A=d(function e(){f(this,e)}),C=function(e){function t(e,n,i){var a;return f(this,t),(a=o(this,t)).p0=e,a.p1=n,a.geo=i,a}return l(t,e),d(t,[{key:"copy",value:function(){return new t(this.p0,this.p1,this.geo)}},{key:"isEqual",value:function(e){return this.geo.isEqualVec2(this.p0,e.p0)&&this.geo.isEqualVec2(this.p1,e.p1)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p0}},{key:"end",value:function(){return this.p1}},{key:"setStart",value:function(e){this.p0=e}},{key:"setEnd",value:function(e){this.p1=e}},{key:"point",value:function(e){var t=this.p0,n=this.p1;return 0===e?t:1===e?n:[t[0]+(n[0]-t[0])*e,t[1]+(n[1]-t[1])*e]}},{key:"split",value:function(e){var n=this;if(e.length<=0)return[this];var o=e.map(function(e){return n.point(e)});o.push(this.p1);var a,s=[],l=this.p0,u=i(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;s.push(new t(l,c,this.geo)),l=c}}catch(e){u.e(e)}finally{u.f()}return s}},{key:"reverse",value:function(){return new t(this.p1,this.p0,this.geo)}},{key:"boundingBox",value:function(){var e=this.p0,t=this.p1;return[[Math.min(e[0],t[0]),Math.min(e[1],t[1])],[Math.max(e[0],t[0]),Math.max(e[1],t[1])]]}},{key:"pointOn",value:function(e){return this.geo.isCollinear(e,this.p0,this.p1)}},{key:"draw",value:function(e){var t=this.p0,n=this.p1;return e.moveTo(t[0],t[1]),e.lineTo(n[0],n[1]),e}}])}(A),S=function(e){function t(e,n,i,a,s){var l;return f(this,t),(l=o(this,t)).p0=e,l.p1=n,l.p2=i,l.p3=a,l.geo=s,l}return l(t,e),d(t,[{key:"copy",value:function(){return new t(this.p0,this.p1,this.p2,this.p3,this.geo)}},{key:"isEqual",value:function(e){return this.geo.isEqualVec2(this.p0,e.p0)&&this.geo.isEqualVec2(this.p1,e.p1)&&this.geo.isEqualVec2(this.p2,e.p2)&&this.geo.isEqualVec2(this.p3,e.p3)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p2}},{key:"end",value:function(){return this.p3}},{key:"setStart",value:function(e){this.p0=e}},{key:"setEnd",value:function(e){this.p3=e}},{key:"point",value:function(e){var t=this.p0,n=this.p1,i=this.p2,o=this.p3;if(0===e)return t;if(1===e)return o;var a=(1-e)*(1-e),s=e*e,l=a*(1-e),u=3*a*e,c=3*s*(1-e),d=s*e;return[t[0]*l+n[0]*u+i[0]*c+o[0]*d,t[1]*l+n[1]*u+i[1]*c+o[1]*d]}},{key:"split",value:function(e){var n=this;if(e.length<=0)return[this];var o,a=[],s=[this.p0,this.p1,this.p2,this.p3],l=0,u=i(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;s=function(e,i){var o=p(e,4),s=o[0],l=o[1],u=o[2],c=o[3],d=g(s,l,i),f=g(l,u,i),h=g(u,c,i),m=g(d,f,i),v=g(f,h,i),y=g(m,v,i);return a.push(new t(s,d,m,y,n.geo)),[y,v,h,c]}(s,(c-l)/(1-l)),l=c}}catch(e){u.e(e)}finally{u.f()}return a.push(new t(s[0],s[1],s[2],s[3],this.geo)),a}},{key:"reverse",value:function(){return new t(this.p3,this.p2,this.p1,this.p0,this.geo)}},{key:"getCubicCoefficients",value:function(e){var t=this.p0[e],n=this.p1[e],i=this.p2[e];return[this.p3[e]-3*i+3*n-t,3*i-6*n+3*t,3*n-3*t,t]}},{key:"boundingTValues",value:function(){var e=this,t=new x(this.geo),n=function(n,i,o,a){var s=3*a-9*o+9*i-3*n,l=6*n-12*i+6*o,u=3*i-3*n;if(0===e.geo.snap0(s))t.add(-u/l);else{var c=l*l-4*s*u;if(c>=0){var d=Math.sqrt(c);t.add((-l+d)/(2*s)),t.add((-l-d)/(2*s))}}return t},i=this.p0,o=this.p1,a=this.p2,s=this.p3;return n(i[0],o[0],a[0],s[0]),n(i[1],o[1],a[1],s[1]),t.list()}},{key:"inflectionTValues",value:function(){var e=new x(this.geo);e.addArray(this.boundingTValues());var t,n=this.p0,o=this.p1,a=this.p2,s=this.p3,l=3*(o[0]-n[0]),u=3*(o[1]-n[1]),c=6*(a[0]-o[0]),d=6*(a[1]-o[1]),f=3*(s[0]-a[0]),p=3*(s[1]-a[1]),h=6*(a[0]-2*o[0]+n[0]),m=6*(a[1]-2*o[1]+n[1]),g=6*(s[0]-2*a[0]+o[0]),v=6*(s[1]-2*a[1]+o[1]),y=l-c+f,b=u-d+p,w=c-2*l,A=d-2*u,C=g-h,S=v-m,_=i(this.geo.solveCubic(y*S-b*C,y*m+w*S-b*h-A*C,w*m+l*S-A*h-u*C,l*m-u*h));try{for(_.s();!(t=_.n()).done;){var T=t.value;e.add(T)}}catch(e){_.e(e)}finally{_.f()}return e.list()}},{key:"boundingBox",value:function(){var e,t=this.p0,n=this.p3,o=[Math.min(t[0],n[0]),Math.min(t[1],n[1])],a=[Math.max(t[0],n[0]),Math.max(t[1],n[1])],s=i(this.boundingTValues());try{for(s.s();!(e=s.n()).done;){var l=e.value,u=this.point(l);o[0]=Math.min(o[0],u[0]),o[1]=Math.min(o[1],u[1]),a[0]=Math.max(a[0],u[0]),a[1]=Math.max(a[1],u[1])}}catch(e){s.e(e)}finally{s.f()}return[o,a]}},{key:"mapXtoT",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===this.geo.snap0(this.p0[0]-e))return 0;if(0===this.geo.snap0(this.p3[0]-e))return 1;var n,o=this.p0[0]-e,a=this.p1[0]-e,s=this.p2[0]-e,l=[this.p3[0]-e-3*s+3*a-o,3*s-6*a+3*o,3*a-3*o,o],u=i(this.geo.solveCubic(l[0],l[1],l[2],l[3]));try{for(u.s();!(n=u.n()).done;){var c=n.value,d=this.geo.snap01(c);if(d>=0&&d<=1)return c}}catch(e){u.e(e)}finally{u.f()}if(t||e>=Math.min(this.p0[0],this.p3[0])&&e<=Math.max(this.p0[0],this.p3[0]))for(var f=0;f<4;f++){for(var p=-1,h=0;h<4;h++)0!==l[h]&&(p<0||Math.abs(l[h])<Math.abs(l[p]))&&(p=h);if(p<0)return 0;l[p]=0;var m,g=i(this.geo.solveCubic(l[0],l[1],l[2],l[3]));try{for(g.s();!(m=g.n()).done;){var v=m.value,y=this.geo.snap01(v);if(y>=0&&y<=1)return v}}catch(e){g.e(e)}finally{g.f()}}return!1}},{key:"mapXtoY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapXtoT(e,t);return!1!==n&&this.point(n)[1]}},{key:"pointOn",value:function(e){if(this.geo.isEqualVec2(this.p0,e)||this.geo.isEqualVec2(this.p3,e))return!0;var t=this.mapXtoY(e[0]);return!1!==t&&0===this.geo.snap0(t-e[1])}},{key:"toLine",value:function(){var e=this.p0,t=this.p1,n=this.p2,i=this.p3;return 0===this.geo.snap0(e[0]-t[0])&&0===this.geo.snap0(e[0]-n[0])&&0===this.geo.snap0(e[0]-i[0])||0===this.geo.snap0(e[1]-t[1])&&0===this.geo.snap0(e[1]-n[1])&&0===this.geo.snap0(e[1]-i[1])?new C(e,i,this.geo):null}},{key:"draw",value:function(e){var t=this.p0,n=this.p1,i=this.p2,o=this.p3;return e.moveTo(t[0],t[1]),e.bezierCurveTo(n[0],n[1],i[0],i[1],o[0],o[1]),e}}])}(A);function _(e,t){var n=t.p1[0]-t.p0[0],i=t.p1[1]-t.p0[1];return((e[0]-t.p0[0])*n+(e[1]-t.p0[1])*i)/(n*n+i*i)}function T(e,t,n){var i=e.geo,o=e.p0,a=e.p1,s=t.p0,l=t.p1,u=a[0]-o[0],c=a[1]-o[1],d=l[0]-s[0],f=l[1]-s[1],p=u*f-c*d;if(0===i.snap0(p)){if(!i.isCollinear(o,a,s))return null;var h=_(t.p0,e),m=_(t.p1,e),g=i.snap01(Math.min(h,m)),v=i.snap01(Math.max(h,m));if(v<0||g>1)return null;var y=_(e.p0,t),b=_(e.p1,t),x=i.snap01(Math.min(y,b)),A=i.snap01(Math.max(y,b));return A<0||x>1?null:{kind:"tRangePairs",tStart:[Math.max(0,g),Math.max(0,x)],tEnd:[Math.min(1,v),Math.min(1,A)]}}var C=o[0]-s[0],S=o[1]-s[1];return new w(n,i).add((d*S-f*C)/p,(u*S-c*C)/p).done()}function O(e,t,n,o){var a=e.geo,s=e.p0,l=e.p1,u=l[1]-s[1],c=s[0]-l[0];if(0===a.snap0(c)){var d=t.mapXtoT(s[0],!1);if(!1===d)return null;var f=(t.point(d)[1]-s[1])/u,p=new w(n,a);return o?p.add(d,f):p.add(f,d),p.done()}var h=u*s[0]+c*s[1],m=t.getCubicCoefficients(0),g=t.getCubicCoefficients(1),v=u*m[0]+c*g[0],y=u*m[1]+c*g[1],b=u*m[2]+c*g[2],x=u*m[3]+c*g[3]-h,A=a.solveCubic(v,y,b,x),C=new w(n,a);if(0===a.snap0(u)){var S,_=i(A);try{for(_.s();!(S=_.n()).done;){var T=S.value,O=m[0]*T*T*T+m[1]*T*T+m[2]*T+m[3],P=(s[0]-O)/c;o?C.add(T,P):C.add(P,T)}}catch(e){_.e(e)}finally{_.f()}}else{var M,E=i(A);try{for(E.s();!(M=E.n()).done;){var D=M.value,I=(g[0]*D*D*D+g[1]*D*D+g[2]*D+g[3]-s[1])/u;o?C.add(D,I):C.add(I,D)}}catch(e){E.e(e)}finally{E.f()}}return C.done()}function P(e,t,n){var i=e.geo;if(i.isEqualVec2(e.p0,t.p0))if(!i.isEqualVec2(e.p3,t.p3))return{kind:"tValuePairs",tValuePairs:[[0,0]]};else if(i.isEqualVec2(e.p1,t.p1)&&i.isEqualVec2(e.p2,t.p2))return{kind:"tRangePairs",tStart:[0,0],tEnd:[1,1]};else return{kind:"tValuePairs",tValuePairs:[[0,0],[1,1]]};if(i.isEqualVec2(e.p0,t.p3))return{kind:"tValuePairs",tValuePairs:[[0,1]]};if(i.isEqualVec2(e.p3,t.p0))return{kind:"tValuePairs",tValuePairs:[[1,0]]};if(i.isEqualVec2(e.p3,t.p3))return{kind:"tValuePairs",tValuePairs:[[1,1]]};var o=new w(n,i),a=function(e,t,n,s,l,u){if(v(e.boundingBox(),s.boundingBox())){var c=(t+n)/2,d=(l+u)/2;if(0===i.snap0(n-t)&&0===i.snap0(u-l))return void o.add(c,d);var f=p(e.split([.5]),2),h=f[0],m=f[1],g=p(s.split([.5]),2),y=g[0],b=g[1];a(h,t,c,y,l,d),a(m,c,n,y,l,d),a(h,t,c,b,d,u),a(m,c,n,b,d,u)}};return a(e,0,1,t,0,1),o.done()}function M(e,t,n){if(e instanceof C){if(t instanceof C)return T(e,t,n);else if(t instanceof S)return O(e,t,n,!1)}else if(e instanceof S){if(t instanceof C)return O(t,e,n,!0);else if(t instanceof S)return P(e,t,n)}throw Error("PolyBool: Unknown segment instance in segmentsIntersect")}var E=d(function e(t){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.otherFill=null,this.id=null!=(n=null==l?void 0:l.segmentId())?n:-1,this.data=t,this.myFill={above:null!=(i=null==a?void 0:a.above)?i:null,below:null!=(o=null==a?void 0:a.below)?o:null},this.closed=s}),D=function(e){function t(){return f(this,t),o(this,t,arguments)}return l(t,e),d(t)}(E),I=function(e){function t(){return f(this,t),o(this,t,arguments)}return l(t,e),d(t)}(E);function k(e,t){if(e instanceof D)return new D(e.data,e.myFill,e.closed,t);if(e instanceof I)return new I(e.data,e.myFill,e.closed,t);throw Error("PolyBool: Unknown SegmentBool in copySegmentBool")}var N=d(function e(t,n,i,o){f(this,e),this.status=null,this.isStart=t,this.p=n,this.seg=i,this.primary=o}),R=d(function e(){f(this,e),this.nodes=[]},[{key:"remove",value:function(e){var t=this.nodes.indexOf(e);t>=0&&this.nodes.splice(t,1)}},{key:"getIndex",value:function(e){return this.nodes.indexOf(e)}},{key:"isEmpty",value:function(){return this.nodes.length<=0}},{key:"getHead",value:function(){return this.nodes[0]}},{key:"removeHead",value:function(){this.nodes.shift()}},{key:"insertBefore",value:function(e,t){this.findTransition(e,t).insert(e)}},{key:"findTransition",value:function(e,t){for(var n,i,o=this,a=0,s=this.nodes.length;a<s;){var l,u=a+s>>1;(l=this.nodes[u],t(e)-t(l)>0)?s=u:a=u+1}return{before:a<=0?null:null!=(n=this.nodes[a-1])?n:null,after:null!=(i=this.nodes[a])?i:null,insert:function(e){return o.nodes.splice(a,0,e),e}}}}]),B=d(function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.events=new R,this.status=new R,this.currentPath=[],this.selfIntersection=t,this.geo=n,this.log=i},[{key:"compareEvents",value:function(e,t,n,i,o,a,s,l){var u=this.geo.compareVec2(t,a);return 0!==u?u:i instanceof C&&l instanceof C&&this.geo.isEqualVec2(n,s)?0:e!==o?e?1:-1:this.compareSegments(l,i)}},{key:"addEvent",value:function(e){var t=this;this.events.insertBefore(e,function(n){return n===e?0:t.compareEvents(e.isStart,e.p,e.other.p,e.seg.data,n.isStart,n.p,n.other.p,n.seg.data)})}},{key:"divideEvent",value:function(e,t,n){null==(i=this.log)||i.segmentDivide(e.seg,n);var i,o,a=p(e.seg.data.split([t]),2),s=a[0],l=a[1];s.setEnd(n),l.setStart(n);var u=l instanceof C?new D(l,e.seg.myFill,e.seg.closed,this.log):l instanceof S?new I(l,e.seg.myFill,e.seg.closed,this.log):null;if(!u)throw Error("PolyBool: Unknown segment data in divideEvent");return this.events.remove(e.other),e.seg.data=s,null==(o=this.log)||o.segmentChop(e.seg),e.other.p=n,this.addEvent(e.other),this.addSegment(u,e.primary)}},{key:"beginPath",value:function(){this.currentPath=[]}},{key:"closePath",value:function(){var e,t=i(this.currentPath);try{for(t.s();!(e=t.n()).done;)e.value.closed=!0}catch(e){t.e(e)}finally{t.f()}}},{key:"addSegment",value:function(e,t){var n=new N(!0,e.data.start(),e,t),i=new N(!1,e.data.end(),e,t);return n.other=i,i.other=n,this.addEvent(n),this.addEvent(i),n}},{key:"addLine",value:function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=this.geo.compareVec2(e,t);if(0!==i){var o=new D(new C(i<0?e:t,i<0?t:e,this.geo),null,!1,this.log);this.currentPath.push(o),this.addSegment(o,n)}}},{key:"addCurve",value:function(e,t,n,o){var a,s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],l=new S(e,t,n,o,this.geo),u=i(l.split(l.inflectionTValues()));try{for(u.s();!(a=u.n()).done;){var c=a.value,d=this.geo.compareVec2(c.start(),c.end());if(0!==d){var f=c.toLine();if(f)this.addLine(f.p0,f.p1,s);else{var p=new I(d<0?c:c.reverse(),null,!1,this.log);this.currentPath.push(p),this.addSegment(p,s)}}}}catch(e){u.e(e)}finally{u.f()}}},{key:"compareSegments",value:function(e,t){var n=e.start(),o=t.start2(),a=t.start();if(t.pointOn(n)){if(n=e.start2(),t.pointOn(n)){if(e instanceof C){if(t instanceof C)return 0;t instanceof S&&(n=e.point(.5))}e instanceof S&&(n=e.end())}if(t instanceof S&&0===this.geo.snap0(n[0]-a[0])&&0===this.geo.snap0(o[0]-a[0]))return Math.sign(a[1]-n[1])}else{if(t instanceof S){var s=t.mapXtoY(n[0],!0);if(!1!==s)return Math.sign(s-n[1])}if(e instanceof S){var l=M(e,t,!0);if(l&&"tValuePairs"===l.kind){var u,c=i(l.tValuePairs);try{for(c.s();!(u=c.n()).done;){var d=u.value,f=this.geo.snap01(d[0]);if(f>0&&f<1){o=e.point(f);break}}}catch(e){c.e(e)}finally{c.f()}}}}var h=p(n,2),m=h[0],g=h[1],v=p(o,2),y=v[0],b=v[1],x=p(a,2),w=x[0];return Math.sign((y-m)*(x[1]-g)-(b-g)*(w-m))}},{key:"statusFindSurrounding",value:function(e){var t=this;return this.status.findTransition(e,function(n){if(e===n)return 0;var i=t.compareSegments(e.seg.data,n.seg.data);return 0===i?-1:i})}},{key:"checkIntersection",value:function(e,t){var n,i=e.seg,o=t.seg;null==(n=this.log)||n.checkIntersection(i,o);var a=M(i.data,o.data,!1);if(null===a)return null;if("tRangePairs"===a.kind){var s=p(a.tStart,2),l=s[0],u=s[1],c=p(a.tEnd,2),d=c[0],f=c[1];if(1===l&&1===d&&0===u&&0===f||0===l&&0===d&&1===u&&1===f)return null;if(0===l&&1===d&&0===u&&1===f)return t;var h=i.data.start(),m=i.data.end(),g=o.data.end();return 0===l&&0===u?(1===d?this.divideEvent(t,f,m):this.divideEvent(e,d,g),t):(u>0&&u<1&&(1===d&&1===f||(1===d?this.divideEvent(t,f,m):this.divideEvent(e,d,g)),this.divideEvent(t,u,h)),null)}if("tValuePairs"===a.kind){if(a.tValuePairs.length<=0)return null;for(var v=a.tValuePairs[0],y=1;y<a.tValuePairs.length&&(0===v[0]&&0===v[1]||0===v[0]&&1===v[1]||1===v[0]&&0===v[1]||1===v[0]&&1===v[1]);y++)v=a.tValuePairs[y];var b=p(v,2),x=b[0],w=b[1],A=0===w?o.data.start():1===w?o.data.end():0===x?i.data.start():1===x?i.data.end():i.data.point(x);return x>0&&x<1&&this.divideEvent(e,x,A),w>0&&w<1&&this.divideEvent(t,w,A),null}throw Error("PolyBool: Unknown intersection type")}},{key:"calculate",value:function(){for(var e,t,n,i,o,a,s,l,u=this,c=[];!this.events.isEmpty();)if(function(){var l=u.events.getHead();if(null==(e=u.log)||e.vert(l.p[0]),l.isStart){null==(t=u.log)||t.segmentNew(l.seg,l.primary);var d,f,p=u.statusFindSurrounding(l),h=p.before,m=p.after;null==(n=u.log)||n.tempStatus(l.seg,!!h&&h.seg,!!m&&m.seg);var g=function(){if(h){var e=u.checkIntersection(l,h);if(e)return e}return m?u.checkIntersection(l,m):null}();if(g&&(u.selfIntersection?(null===l.seg.myFill.below?l.seg.closed:l.seg.myFill.above!==l.seg.myFill.below)&&(g.seg.myFill.above=!g.seg.myFill.above):g.seg.otherFill=l.seg.myFill,null==(i=u.log)||i.segmentUpdate(g.seg),u.events.remove(l.other),u.events.remove(l)),u.events.getHead()!==l)return null==(o=u.log)||o.rewind(l.seg),1;if(u.selfIntersection)d=null===l.seg.myFill.below?l.seg.closed:l.seg.myFill.above!==l.seg.myFill.below,m?l.seg.myFill.below=m.seg.myFill.above:l.seg.myFill.below=!1,l.seg.myFill.above=d?!l.seg.myFill.below:l.seg.myFill.below;else if(null===l.seg.otherFill){if(m)if(l.primary===m.primary){if(null===m.seg.otherFill)throw Error("PolyBool: Unexpected state of otherFill (null)");f=m.seg.otherFill.above}else f=m.seg.myFill.above;else f=!1;l.seg.otherFill={above:f,below:f}}null==(a=u.log)||a.status(l.seg,!!h&&h.seg,!!m&&m.seg),l.other.status=p.insert(l)}else{var v=l.status;if(null===v)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");var y=u.status.getIndex(v);if(y>0&&y<u.status.nodes.length-1){var b=u.status.nodes[y-1],x=u.status.nodes[y+1];u.checkIntersection(b,x)}if(null==(s=u.log)||s.statusRemove(v.seg),u.status.remove(v),!l.primary){if(!l.seg.otherFill)throw Error("PolyBool: Unexpected state of otherFill (null)");var w=l.seg.myFill;l.seg.myFill=l.seg.otherFill,l.seg.otherFill=w}c.push(l.seg)}u.events.removeHead()}())continue;return null==(l=this.log)||l.done(),c}}]);function L(e,t,n){var o,a=[],s=i(e);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=t[8*!!l.myFill.above+4*!!l.myFill.below+(l.otherFill&&l.otherFill.above?2:0)+(l.otherFill&&l.otherFill.below?1:0)],c=(1&u)!=0,d=(2&u)!=0;if(!l.closed&&0!==u||l.closed&&c!==d){var f={above:c,below:d};if(l instanceof D)a.push(new D(l.data,f,l.closed,n));else if(l instanceof I)a.push(new I(l.data,f,l.closed,n));else throw Error("PolyBool: Unknown SegmentBool type in SegmentSelector")}}}catch(e){s.e(e)}finally{s.f()}return null==n||n.selected(a),a}var F=d(function e(){f(this,e)},null,[{key:"union",value:function(e,t){return L(e,[4,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)}},{key:"intersect",value:function(e,t){return L(e,[0,0,0,4,0,2,0,2,0,0,1,1,4,2,1,0],t)}},{key:"difference",value:function(e,t){return L(e,[4,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)}},{key:"differenceRev",value:function(e,t){return L(e,[4,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)}},{key:"xor",value:function(e,t){return L(e,[4,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}]);function V(e,t,n){return!!n.isCollinear(e.p0,e.p1,t.p1)&&new C(e.p0,t.p1,n)}function j(e,t,n){if(n.isCollinear(e.p2,e.p3,t.p1)){var i=t.p1[0]-e.p2[0],o=t.p1[1]-e.p2[1],a=Math.abs(i)>Math.abs(o)?(e.p3[0]-e.p2[0])/i:(e.p3[1]-e.p2[1])/o,s=n.snap01(a);if(0!==s&&1!==s){var l=new S(e.p0,[e.p0[0]+(e.p1[0]-e.p0[0])/a,e.p0[1]+(e.p1[1]-e.p0[1])/a],[t.p2[0]-a*(t.p3[0]-t.p2[0])/(1-a),t.p2[1]-a*(t.p3[1]-t.p2[1])/(1-a)],t.p3,n),u=p(l.split([a]),2),c=u[0],d=u[1];if(c.isEqual(e)&&d.isEqual(t))return l}}return!1}function G(e,t,n){return e!==t&&(e instanceof C&&t instanceof C?V(e,t,n):e instanceof S&&t instanceof S&&j(e,t,n))}function U(e,t,n){var o,a=[],s=[],l=[],u=i(e);try{for(u.s();!(o=u.n()).done;)if(function(){var e=o.value,u=e.data,c=e.closed,d=c?a:s,f=u.start(),p=u.end(),h=function(e){null==n||n.chainReverse(e,c);var t,o=[],a=i(d[e].segs);try{for(a.s();!(t=a.n()).done;){var s=t.value;o.unshift(s.reverse())}}catch(e){a.e(e)}finally{a.f()}return d[e]={segs:o,fill:!d[e].fill},o};if(u instanceof C&&t.isEqualVec2(f,p))return console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large"),1;null==n||n.chainStart({seg:u,fill:!!e.myFill.above},c);var m={index:0,matchesHead:!1,matchesPt1:!1},g={index:0,matchesHead:!1,matchesPt1:!1},v=m;function y(e,t,n){return(v&&(v.index=e,v.matchesHead=t,v.matchesPt1=n),v===m)?(v=g,!1):(v=null,!0)}for(var b=0;b<d.length;b++){var x=d[b].segs,w=x[0].start(),A=x[x.length-1].end();if(t.isEqualVec2(w,f)){if(y(b,!0,!0))break}else if(t.isEqualVec2(w,p)){if(y(b,!0,!1))break}else if(t.isEqualVec2(A,f)){if(y(b,!1,!0))break}else if(t.isEqualVec2(A,p)&&y(b,!1,!1))break}if(v===m){var S=!!e.myFill.above;d.push({segs:[u],fill:S}),null==n||n.chainNew({seg:u,fill:S},c)}else if(v===g){var _=m.index;null==n||n.chainMatch(_,c);var T=d[_],O=T.segs,P=T.fill;if(m.matchesHead?(m.matchesPt1&&(u=u.reverse()),null==n||n.chainAddHead(_,{seg:u,fill:P},c),O.unshift(u)):(m.matchesPt1||(u=u.reverse()),null==n||n.chainAddTail(_,{seg:u,fill:P},c),O.push(u)),m.matchesHead){var M=O[1],E=G(u,M,t);E&&(O.shift(),O[0]=E,null==n||n.chainSimplifyHead(_,{seg:E,fill:P},c))}else{var D=O[O.length-2],I=G(D,u,t);I&&(O.pop(),O[O.length-1]=I,null==n||n.chainSimplifyTail(_,{seg:I,fill:P},c))}if(c){var k=O,N=k[0],R=k[k.length-1];if(k.length>0&&t.isEqualVec2(N.start(),R.end())){var B,L=0,F=k[0].start(),V=i(k);try{for(V.s();!(B=V.n()).done;){var j=B.value.end();L+=j[1]*F[0]-j[0]*F[1],F=j}}catch(e){V.e(e)}finally{V.f()}L<0===P&&(N=(k=h(_))[0],R=k[k.length-1]);var U=G(R,N,t);U&&(k.pop(),k[0]=U,null==n||n.chainSimplifyClose(_,{seg:U,fill:P},c)),null==n||n.chainClose(_,c),d.splice(_,1),l.push(k)}}}else{var z=function(e,i){var o=d[e],a=o.segs,s=o.fill,l=d[i].segs;null==n||n.chainAddTail(e,{seg:u,fill:s},c),a.push(u);var f=a[a.length-2],p=G(f,u,t);p&&(a.pop(),a[a.length-1]=p,null==n||n.chainSimplifyTail(e,{seg:p,fill:s},c));var h=a[a.length-1],m=l[0],g=G(h,m,t);g&&(l.shift(),a[a.length-1]=g,null==n||n.chainSimplifyJoin(e,i,{seg:g,fill:s},c)),null==n||n.chainJoin(e,i,c),d[e].segs=a.concat(l),d.splice(i,1)},W=m.index,H=g.index;null==n||n.chainConnect(W,H,c);var q=d[W].segs.length<d[H].segs.length;m.matchesHead?g.matchesHead?q?(m.matchesPt1||(u=u.reverse()),h(W),z(W,H)):(m.matchesPt1&&(u=u.reverse()),h(H),z(H,W)):(m.matchesPt1&&(u=u.reverse()),z(H,W)):g.matchesHead?(m.matchesPt1||(u=u.reverse()),z(W,H)):q?(m.matchesPt1&&(u=u.reverse()),h(W),z(H,W)):(m.matchesPt1||(u=u.reverse()),h(H),z(W,H))}}())continue}catch(e){u.e(e)}finally{u.f()}for(var c=0;c<s.length;c++){var d=s[c].segs;l.push(d)}return l}function z(e,t,n,o){var a=p(o,6),s=a[0],l=a[1],u=a[2],c=a[3],d=a[4],f=a[5];n.beginPath();var h,m=i(e);try{for(m.s();!(h=m.n()).done;){var g=h.value;if(!(g.length<=0)){for(var v=0;v<g.length;v++){var y=g[v];if(0===v){var b=y.start(),x=p(b,2),w=x[0],A=x[1];n.moveTo(s*w+u*A+d,l*w+c*A+f)}if(y instanceof C){var _=p(y.p1,2),T=_[0],O=_[1];n.lineTo(s*T+u*O+d,l*T+c*O+f)}else if(y instanceof S){var P=p(y.p1,2),M=P[0],E=P[1],D=p(y.p2,2),I=D[0],k=D[1],N=p(y.p3,2),R=N[0],B=N[1];n.bezierCurveTo(s*M+u*E+d,l*M+c*E+f,s*I+u*k+d,l*I+c*k+f,s*R+u*B+d,l*R+c*B+f)}else throw Error("PolyBool: Unknown segment instance")}var L=g[0],F=g[g.length-1];t.isEqualVec2(L.start(),F.end())&&n.closePath()}}}catch(e){m.e(e)}finally{m.f()}return n}var W=d(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.pathState={kind:"beginPath"},this.saveStack=[],this.matrix=[1,0,0,1,0,0],this.geo=t,this.log=i,n?this.resultState={state:"seg",segments:n}:this.resultState={state:"new",selfIntersect:new B(!0,this.geo,this.log)}},[{key:"setTransform",value:function(e,t,n,i,o,a){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");return this.matrix=[e,t,n,i,o,a],this}},{key:"resetTransform",value:function(){return this.matrix=[1,0,0,1,0,0],this}},{key:"getTransform",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");var e=p(this.matrix,6);return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}},{key:"transform",value:function(e,t,n,i,o,a){var s=p(this.matrix,6),l=s[0],u=s[1],c=s[2],d=s[3],f=s[4],h=s[5];return this.matrix=[l*e+c*t,u*e+d*t,l*n+c*i,u*n+d*i,l*o+c*a+f,u*o+d*a+h],this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=p(this.matrix,6),o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],c=i[5];return this.matrix=[o*t+s*n,a*t+l*n,s*t-o*n,l*t-a*n,u,c],this}},{key:"rotateDeg",value:function(e){var t=(e%360+360)%360;if(0===t)return this;var n=0,i=0;if(90===t)i=1;else if(180===t)n=-1;else if(270===t)i=-1;else if(45===t)n=i=Math.SQRT1_2;else if(135===t)i=Math.SQRT1_2,n=-Math.SQRT1_2;else if(225===t)n=i=-Math.SQRT1_2;else if(315===t)n=Math.SQRT1_2,i=-Math.SQRT1_2;else if(30===t)n=Math.sqrt(3)/2,i=.5;else if(60===t)n=.5,i=Math.sqrt(3)/2;else if(120===t)n=-.5,i=Math.sqrt(3)/2;else if(150===t)n=-Math.sqrt(3)/2,i=.5;else if(210===t)n=-Math.sqrt(3)/2,i=-.5;else if(240===t)n=-.5,i=-Math.sqrt(3)/2;else if(300===t)n=.5,i=-Math.sqrt(3)/2;else if(330===t)n=Math.sqrt(3)/2,i=-.5;else{var o=Math.PI*t/180;n=Math.cos(o),i=Math.sin(o)}var a=p(this.matrix,6),s=a[0],l=a[1],u=a[2],c=a[3],d=a[4],f=a[5];return this.matrix=[s*n+u*i,l*n+c*i,u*n-s*i,c*n-l*i,d,f],this}},{key:"scale",value:function(e,t){var n=p(this.matrix,6),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5];return this.matrix=[i*e,o*e,a*t,s*t,l,u],this}},{key:"translate",value:function(e,t){var n=p(this.matrix,6),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5];return this.matrix=[i,o,a,s,i*e+a*t+l,o*e+s*t+u],this}},{key:"save",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");return this.saveStack.push({matrix:this.matrix}),this}},{key:"restore",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");var e=this.saveStack.pop();return e&&(this.matrix=e.matrix),this}},{key:"transformPoint",value:function(e,t){var n=p(this.matrix,6),i=n[0],o=n[1],a=n[2],s=n[3];return[i*e+a*t+n[4],o*e+s*t+n[5]]}},{key:"beginPath",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");return this.resultState.selfIntersect.beginPath(),this.endPath()}},{key:"moveTo",value:function(e,t){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");"beginPath"!==this.pathState.kind&&this.beginPath();var n=this.transformPoint(e,t);return this.pathState={kind:"moveTo",start:n,current:n},this}},{key:"lineTo",value:function(e,t){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw Error("PolyBool: Must call moveTo prior to calling lineTo");var n=this.transformPoint(e,t);return this.resultState.selfIntersect.addLine(this.pathState.current,n),this.pathState.current=n,this}},{key:"rect",value:function(e,t,n,i){return this.moveTo(e,t).lineTo(e+n,t).lineTo(e+n,t+i).lineTo(e,t+i).closePath().moveTo(e,t)}},{key:"bezierCurveTo",value:function(e,t,n,i,o,a){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw Error("PolyBool: Must call moveTo prior to calling bezierCurveTo");var s=this.transformPoint(o,a);return this.resultState.selfIntersect.addCurve(this.pathState.current,this.transformPoint(e,t),this.transformPoint(n,i),s),this.pathState.current=s,this}},{key:"closePath",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");return"moveTo"!==this.pathState.kind||this.geo.isEqualVec2(this.pathState.start,this.pathState.current)||(this.resultState.selfIntersect.addLine(this.pathState.current,this.pathState.start),this.pathState.current=this.pathState.start),this.resultState.selfIntersect.closePath(),this.endPath()}},{key:"endPath",value:function(){if("new"!==this.resultState.state)throw Error("PolyBool: Cannot change shape after using it in an operation");return this.pathState={kind:"beginPath"},this}},{key:"selfIntersect",value:function(){return"new"===this.resultState.state&&(this.resultState={state:"seg",segments:this.resultState.selfIntersect.calculate()}),this.resultState.segments}},{key:"segments",value:function(){if("reg"!==this.resultState.state){var e=this.selfIntersect();this.resultState={state:"reg",segments:e,regions:U(e,this.geo,this.log)}}return this.resultState.regions}},{key:"output",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0];return z(this.segments(),this.geo,e,t)}},{key:"combine",value:function(e){var t,n=new B(!1,this.geo,this.log),o=i(this.selfIntersect());try{for(o.s();!(t=o.n()).done;){var a=t.value;n.addSegment(k(a,this.log),!0)}}catch(e){o.e(e)}finally{o.f()}var s,l=i(e.selfIntersect());try{for(l.s();!(s=l.n()).done;){var u=s.value;n.addSegment(k(u,this.log),!1)}}catch(e){l.e(e)}finally{l.f()}return new H(n.calculate(),this.geo,this.log)}}]),H=d(function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.geo=n,this.segments=t,this.log=i},[{key:"union",value:function(){return new W(this.geo,F.union(this.segments,this.log),this.log)}},{key:"intersect",value:function(){return new W(this.geo,F.intersect(this.segments,this.log),this.log)}},{key:"difference",value:function(){return new W(this.geo,F.difference(this.segments,this.log),this.log)}},{key:"differenceRev",value:function(){return new W(this.geo,F.differenceRev(this.segments,this.log),this.log)}},{key:"xor",value:function(){return new W(this.geo,F.xor(this.segments,this.log),this.log)}}]),q=d(function e(){f(this,e),this.list=[],this.nextSegmentId=0,this.curVert=NaN},[{key:"push",value:function(e,t){this.list.push({type:e,data:JSON.parse(JSON.stringify(t))})}},{key:"info",value:function(e,t){this.push("info",{msg:e,data:t})}},{key:"segmentId",value:function(){return this.nextSegmentId++}},{key:"checkIntersection",value:function(e,t){this.push("check",{seg1:e,seg2:t})}},{key:"segmentDivide",value:function(e,t){this.push("div_seg",{seg:e,p:t})}},{key:"segmentChop",value:function(e){this.push("chop",{seg:e})}},{key:"statusRemove",value:function(e){this.push("pop_seg",{seg:e})}},{key:"segmentUpdate",value:function(e){this.push("seg_update",{seg:e})}},{key:"segmentNew",value:function(e,t){this.push("new_seg",{seg:e,primary:t})}},{key:"tempStatus",value:function(e,t,n){this.push("temp_status",{seg:e,above:t,below:n})}},{key:"rewind",value:function(e){this.push("rewind",{seg:e})}},{key:"status",value:function(e,t,n){this.push("status",{seg:e,above:t,below:n})}},{key:"vert",value:function(e){e!==this.curVert&&(this.push("vert",{x:e}),this.curVert=e)}},{key:"selected",value:function(e){this.push("selected",{segs:e})}},{key:"chainStart",value:function(e,t){this.push("chain_start",{sf:e,closed:t})}},{key:"chainNew",value:function(e,t){this.push("chain_new",{sf:e,closed:t})}},{key:"chainMatch",value:function(e,t){this.push("chain_match",{index:e,closed:t})}},{key:"chainClose",value:function(e,t){this.push("chain_close",{index:e,closed:t})}},{key:"chainAddHead",value:function(e,t,n){this.push("chain_add_head",{index:e,sf:t,closed:n})}},{key:"chainAddTail",value:function(e,t,n){this.push("chain_add_tail",{index:e,sf:t,closed:n})}},{key:"chainSimplifyHead",value:function(e,t,n){this.push("chain_simp_head",{index:e,sf:t,closed:n})}},{key:"chainSimplifyTail",value:function(e,t,n){this.push("chain_simp_tail",{index:e,sf:t,closed:n})}},{key:"chainSimplifyClose",value:function(e,t,n){this.push("chain_simp_close",{index:e,sf:t,closed:n})}},{key:"chainSimplifyJoin",value:function(e,t,n,i){this.push("chain_simp_join",{index1:e,index2:t,sf:n,closed:i})}},{key:"chainConnect",value:function(e,t,n){this.push("chain_con",{index1:e,index2:t,closed:n})}},{key:"chainReverse",value:function(e,t){this.push("chain_rev",{index:e,closed:t})}},{key:"chainJoin",value:function(e,t,n){this.push("chain_join",{index1:e,index2:t,closed:n})}},{key:"done",value:function(){this.push("done",null)}}]),K=d(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new b,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(this,e),this.geo=t,this.log=n},[{key:"shape",value:function(){return new W(this.geo,null,this.log)}},{key:"buildLog",value:function(e){var t;return this.log=e?new q:null,null==(t=this.log)?void 0:t.list}},{key:"segments",value:function(e){var t=this.shape();t.beginPath();var n,o=i(e.regions);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a[a.length-1];t.moveTo(s[s.length-2],s[s.length-1]);var l,u=i(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(2===c.length)t.lineTo(c[0],c[1]);else if(6===c.length)t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);else throw Error("PolyBool: Invalid point in region")}}catch(e){u.e(e)}finally{u.f()}t.closePath()}}catch(e){o.e(e)}finally{o.f()}return{shape:t,inverted:e.inverted}}},{key:"combine",value:function(e,t){return{shape:e.shape.combine(t.shape),inverted1:e.inverted,inverted2:t.inverted}}},{key:"selectUnion",value:function(e){return{shape:e.inverted1?e.inverted2?e.shape.intersect():e.shape.difference():e.inverted2?e.shape.differenceRev():e.shape.union(),inverted:e.inverted1||e.inverted2}}},{key:"selectIntersect",value:function(e){return{shape:e.inverted1?e.inverted2?e.shape.union():e.shape.differenceRev():e.inverted2?e.shape.difference():e.shape.intersect(),inverted:e.inverted1&&e.inverted2}}},{key:"selectDifference",value:function(e){return{shape:e.inverted1?e.inverted2?e.shape.differenceRev():e.shape.union():e.inverted2?e.shape.intersect():e.shape.difference(),inverted:e.inverted1&&!e.inverted2}}},{key:"selectDifferenceRev",value:function(e){return{shape:e.inverted1?e.inverted2?e.shape.difference():e.shape.intersect():e.inverted2?e.shape.union():e.shape.differenceRev(),inverted:!e.inverted1&&e.inverted2}}},{key:"selectXor",value:function(e){return{shape:e.shape.xor(),inverted:e.inverted1!==e.inverted2}}},{key:"polygon",value:function(e){var t=[];return e.shape.output({beginPath:function(){},moveTo:function(){t.push([])},lineTo:function(e,n){t[t.length-1].push([e,n])},bezierCurveTo:function(e,n,i,o,a,s){t[t.length-1].push([e,n,i,o,a,s])},closePath:function(){}}),{regions:t,inverted:e.inverted}}},{key:"union",value:function(e,t){var n=this.segments(e),i=this.segments(t),o=this.combine(n,i),a=this.selectUnion(o);return this.polygon(a)}},{key:"intersect",value:function(e,t){var n=this.segments(e),i=this.segments(t),o=this.combine(n,i),a=this.selectIntersect(o);return this.polygon(a)}},{key:"difference",value:function(e,t){var n=this.segments(e),i=this.segments(t),o=this.combine(n,i),a=this.selectDifference(o);return this.polygon(a)}},{key:"differenceRev",value:function(e,t){var n=this.segments(e),i=this.segments(t),o=this.combine(n,i),a=this.selectDifferenceRev(o);return this.polygon(a)}},{key:"xor",value:function(e,t){var n=this.segments(e),i=this.segments(t),o=this.combine(n,i),a=this.selectXor(o);return this.polygon(a)}}]),X=new K;t.EventBool=N,t.Geometry=y,t.GeometryEpsilon=b,t.Intersecter=B,t.ListBool=R,t.PolyBool=K,t.SegmentBase=A,t.SegmentBoolBase=E,t.SegmentBoolCurve=I,t.SegmentBoolLine=D,t.SegmentChainer=U,t.SegmentCurve=S,t.SegmentLine=C,t.SegmentSelector=F,t.SegmentTValuePairsBuilder=w,t.SegmentTValuesBuilder=x,t.Shape=W,t.ShapeCombined=H,t.boundingBoxesIntersect=v,t.copySegmentBool=k,t.default=X,t.joinCurves=j,t.joinLines=V,t.joinSegments=G,t.lerp=function(e,t,n){return e+(t-e)*n},t.lerpVec2=g,t.projectPointOntoSegmentLine=_,t.segmentCurveIntersectSegmentCurve=P,t.segmentLineIntersectSegmentCurve=O,t.segmentLineIntersectSegmentLine=T,t.segmentsIntersect=M,t.segmentsToReceiver=z},7463(e,t,n){"use strict";function i(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,s=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,g=t&&t.length,v=g?t[0]*a:e.length,x=s(e,0,v,a,!0),A=[];if(!x||x.next===x.prev)return A;if(g&&(x=function(e,t,n,i){for(var o=[],a=0,c=t.length;a<c;a++){var f=t[a]*i,m=a<c-1?t[a+1]*i:e.length,g=s(e,f,m,i,!1);g===g.next&&(g.steiner=!0),o.push(function(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(g))}o.sort(u);for(var v=0;v<o.length;v++)n=function(e,t){var n=function(e,t){var n,i=t,o=e.x,a=e.y,s=-1/0;if(h(e,i))return i;do{if(h(e,i.next))return i.next;if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var l=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=o&&l>s&&(s=l,n=i.x<i.next.x?i:i.next,l===o))return n}i=i.next}while(i!==t);if(!n)return null;var u=n,c=n.x,f=n.y,m=1/0;i=n;do{if(o>=i.x&&i.x>=c&&o!==i.x&&d(a<f?o:s,a,c,f,a<f?s:o,a,i.x,i.y)){var g,v,b=Math.abs(a-i.y)/(o-i.x);y(i,e)&&(b<m||b===m&&(i.x>n.x||i.x===n.x&&(g=n,v=i,0>p(g.prev,g,v.prev)&&0>p(v.next,g,g.next))))&&(n=i,m=b)}i=i.next}while(i!==u);return n}(e,t);if(!n)return t;var i=b(n,e);return l(i,i.next),l(n,n.next)}(o[v],n);return n}(e,t,x,a)),e.length>80*a){n=e[0],i=e[1];for(var C=n,S=i,_=a;_<v;_+=a){var T=e[_],O=e[_+1];T<n&&(n=T),O<i&&(i=O),T>C&&(C=T),O>S&&(S=O)}o=0!==(o=Math.max(C-n,S-i))?32767/o:0}return function e(t,n,i,o,a,s,u){if(t){!u&&s&&function(e,t,n,i){var o=e;do 0===o.z&&(o.z=c(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n=1;do{var i=e,o=void 0;e=null;var a=null;for(t=0;i;){t++;for(var s=i,l=0,u=0;u<n&&(l++,s=s.nextZ);u++);for(var c=n;l>0||c>0&&s;)0!==l&&(0===c||!s||i.z<=s.z)?(o=i,i=i.nextZ,l--):(o=s,s=s.nextZ,c--),a?a.nextZ=o:e=o,o.prevZ=a,a=o;i=s}a.nextZ=null,n*=2}while(t>1)}(o)}(t,o,a,s);for(var d=t;t.prev!==t.next;){var g=t.prev,v=t.next;if(s?function(e,t,n,i){var o=e.prev,a=e.next;if(p(o,e,a)>=0)return!1;for(var s=o.x,l=e.x,u=a.x,d=o.y,h=e.y,m=a.y,g=Math.min(s,l,u),v=Math.min(d,h,m),y=Math.max(s,l,u),b=Math.max(d,h,m),x=c(g,v,t,n,i),w=c(y,b,t,n,i),A=e.prevZ,C=e.nextZ;A&&A.z>=x&&C&&C.z<=w;){if(A.x>=g&&A.x<=y&&A.y>=v&&A.y<=b&&A!==o&&A!==a&&f(s,d,l,h,u,m,A.x,A.y)&&p(A.prev,A,A.next)>=0||(A=A.prevZ,C.x>=g&&C.x<=y&&C.y>=v&&C.y<=b&&C!==o&&C!==a&&f(s,d,l,h,u,m,C.x,C.y)&&p(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;A&&A.z>=x;){if(A.x>=g&&A.x<=y&&A.y>=v&&A.y<=b&&A!==o&&A!==a&&f(s,d,l,h,u,m,A.x,A.y)&&p(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;C&&C.z<=w;){if(C.x>=g&&C.x<=y&&C.y>=v&&C.y<=b&&C!==o&&C!==a&&f(s,d,l,h,u,m,C.x,C.y)&&p(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}(t,o,a,s):function(e){var t=e.prev,n=e.next;if(p(t,e,n)>=0)return!1;for(var i=t.x,o=e.x,a=n.x,s=t.y,l=e.y,u=n.y,c=Math.min(i,o,a),d=Math.min(s,l,u),h=Math.max(i,o,a),m=Math.max(s,l,u),g=n.next;g!==t;){if(g.x>=c&&g.x<=h&&g.y>=d&&g.y<=m&&f(i,s,o,l,a,u,g.x,g.y)&&p(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(t)){n.push(g.i,t.i,v.i),w(t),t=v.next,d=v.next;continue}if((t=v)===d){u?1===u?e(t=function(e,t){var n=e;do{var i=n.prev,o=n.next.next;!h(i,o)&&m(i,n,n.next,o)&&y(i,o)&&y(o,i)&&(t.push(i.i,n.i,o.i),w(n),w(n.next),n=e=o),n=n.next}while(n!==e);return l(n)}(l(t),n),n,i,o,a,s,2):2===u&&function(t,n,i,o,a,s){var u=t;do{for(var c,d,f=u.next.next;f!==u.prev;){if(u.i!==f.i&&(c=u,d=f,c.next.i!==d.i&&c.prev.i!==d.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&m(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(c,d)&&(y(c,d)&&y(d,c)&&function(e,t){var n=e,i=!1,o=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&o<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}(c,d)&&(p(c.prev,c,d.prev)||p(c,d.prev,d))||h(c,d)&&p(c.prev,c,c.next)>0&&p(d.prev,d,d.next)>0))){var g=b(u,f);u=l(u,u.next),g=l(g,g.next),e(u,n,i,o,a,s,0),e(g,n,i,o,a,s,0);return}f=f.next}u=u.next}while(u!==t)}(t,n,i,o,a,s):e(l(t),n,i,o,a,s,1);break}}}}(x,A,a,n,i,o,0),A}function s(e,t,n,i,o){var a;if(o===S(e,t,n,i)>0)for(var s=t;s<n;s+=i)a=x(s/i|0,e[s],e[s+1],a);else for(var l=n-i;l>=t;l-=i)a=x(l/i|0,e[l],e[l+1],a);return a&&h(a,a.next)&&(w(a),a=a.next),a}function l(e,t){if(!e)return e;t||(t=e);var n,i=e;do if(n=!1,!i.steiner&&(h(i,i.next)||0===p(i.prev,i,i.next))){if(w(i),(i=t=i.prev)===i.next)break;n=!0}else i=i.next;while(n||i!==t);return t}n.r(t),n.d(t,{default:()=>a,deviation:()=>C,flatten:()=>_});function u(e,t){var n=e.x-t.x;return 0===n&&0==(n=e.y-t.y)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function c(e,t,n,i,o){return(e=((e=((e=((e=((e=(e-n)*o|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-i)*o|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function d(e,t,n,i,o,a,s,l){return(o-s)*(t-l)>=(e-s)*(a-l)&&(e-s)*(i-l)>=(n-s)*(t-l)&&(n-s)*(a-l)>=(o-s)*(i-l)}function f(e,t,n,i,o,a,s,l){return(e!==s||t!==l)&&d(e,t,n,i,o,a,s,l)}function p(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function h(e,t){return e.x===t.x&&e.y===t.y}function m(e,t,n,i){var o=v(p(e,t,n)),a=v(p(e,t,i)),s=v(p(n,i,e)),l=v(p(n,i,t));return!!(o!==a&&s!==l||0===o&&g(e,n,t)||0===a&&g(e,i,t)||0===s&&g(n,e,i)||0===l&&g(n,t,i))}function g(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function v(e){return e>0?1:e<0?-1:0}function y(e,t){return 0>p(e.prev,e,e.next)?p(e,t,e.next)>=0&&p(e,e.prev,t)>=0:0>p(e,t,e.prev)||0>p(e,e.next,t)}function b(e,t){var n=A(e.i,e.x,e.y),i=A(t.i,t.x,t.y),o=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function x(e,t,n,i){var o=A(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function C(e,t,n,i){var o=t&&t.length,a=o?t[0]*n:e.length,s=Math.abs(S(e,0,a,n));if(o)for(var l=0,u=t.length;l<u;l++){var c=t[l]*n,d=l<u-1?t[l+1]*n:e.length;s-=Math.abs(S(e,c,d,n))}for(var f=0,p=0;p<i.length;p+=3){var h=i[p]*n,m=i[p+1]*n,g=i[p+2]*n;f+=Math.abs((e[h]-e[g])*(e[m+1]-e[h+1])-(e[h]-e[m])*(e[g+1]-e[h+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)}function S(e,t,n,i){for(var o=0,a=t,s=n-i;a<n;a+=i)o+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return o}function _(e){var t,n=[],o=[],a=e[0][0].length,s=0,l=0,u=i(e);try{for(u.s();!(t=u.n()).done;){var c,d=t.value,f=i(d);try{for(f.s();!(c=f.n()).done;)for(var p=c.value,h=0;h<a;h++)n.push(p[h])}catch(e){f.e(e)}finally{f.f()}l&&(s+=l,o.push(s)),l=d.length}}catch(e){u.e(e)}finally{u.f()}return{vertices:n,holes:o,dimensions:a}}},7518(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(9973),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},7535(e,t,n){"use strict";n.d(t,{A:()=>o});var i=/[\s_\-\/\(\)]/g;function o(e,t){if(e[t])return e[t];for(var n,o=Object.keys(e),a=t.toLowerCase().replace(i,""),s=-1;++s<o.length;)if((n=o[s]).toLowerCase().replace(i,"")===a)return e[n]}},7560(e,t,n){"use strict";function i(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=1/this.rf,o=2*i-Math.pow(i,2),a=this.e=Math.sqrt(o);this.R=this.k0*n*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+a*t)/(1-a*t));this.K=s-this.alpha*l+this.alpha*a/2*u}function o(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=2*(Math.atan(Math.exp(-this.alpha*(t+n)+this.K))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e}function a(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,o=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(o))),l=this.lambda0+s/this.alpha,u=0,c=a,d=-1e3,f=0;Math.abs(c-d)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),d=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=l,e.y=c,e}n.r(t),n.d(t,{default:()=>l,forward:()=>o,init:()=>i,inverse:()=>a,names:()=>s});var s=["somerc"];let l={init:i,forward:o,inverse:a,names:s}},7572(e,t,n){"use strict";function i(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}n.d(t,{A:()=>i})},7649(e,t,n){"use strict";function i(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}n.d(t,{A:()=>i})},7659(e){"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},7668(e,t,n){var i=n(8899),o=n(5933).registerLayer,a=n(4837),s=function(e){"use strict";var t=n(5933).createWidget;if(e.renderer="dom",e.sticky=!1,!(this instanceof s))return new s(e);a.call(this,e);var i=this,o=this._exit;this.createWidget=function(e,n){var o=t(e,i,n);return n&&"parent"in n||i.addChild(o),o._init(n),i.modified(),o},this.deleteWidget=function(e){return e._exit(),i.removeChild(e),i.modified(),i},this._exit=function(){i.children().forEach(function(e){i.deleteWidget(e)}),o()}};i(s,a),o("ui",s),e.exports=s},7707(e,t,n){var i=n(4099),o=n(8899),a=n(6732),s=n(4226),l=n(7187),u=n(8315);i.camera=function(e){"use strict";if(!(this instanceof i.camera))return new i.camera(e);i.groupNode.call(this),e=e||{};var t=30*Math.PI/180,n=l.fromValues(0,0,1,1),o=l.fromValues(0,0,0,1),c=l.fromValues(0,1,0,0),d=1,f=l.fromValues(0,0,-1,0),p=u.create(),h=u.create(),m=a(),g=a(),v=-1,y=1,b=1,x=-1,w={zoom:1,tilesize:256},A=!1,C=[0,0,0,0],S=i.GL.COLOR_BUFFER_BIT|i.GL.DEPTH_BUFFER_BIT;return void 0!==e.parallelProjection&&(A=!!e.parallelProjection),this.setViewAspect=function(e){d=e,this.modified()},this.parallelExtents=function(){return w},this.setParallelExtents=function(e){var t,n,i=["width","height","zoom","tilesize"],o=!1;for(t=0;t<i.length;t+=1)void 0!==e[n=i[t]]&&e[n]!==w[n]&&(w[n]=e[n],o=!0);if(o&&w.width&&w.height&&void 0!==w.zoom&&w.tilesize){var a=this.unitsPerPixel(w.zoom,w.tilesize);v=-(y=a*w.width/2),x=-(b=a*w.height/2),this.modified()}},this.unitsPerPixel=function(e,t){return 360*Math.pow(2,-e)/(t=t||256)},this.viewMatrix=function(){return this.computeViewMatrix()},this.setViewMatrix=function(e,t){t?p=e.slice():u.copy(p,e),m.modified()},this.projectionMatrix=function(){return this.computeProjectionMatrix()},this.setProjectionMatrix=function(e){u.copy(h,e),g.modified()},this.clearMask=function(){return S},this.clearColor=function(){return C},this.clearDepth=function(){return 1},this.computeDirectionOfProjection=function(){s.subtract(f,o,n),s.normalize(f,f),this.modified()},this.computeViewMatrix=function(){return m.getMTime()<this.getMTime()&&(u.lookAt(p,n,o,c),m.modified()),p},this.computeProjectionMatrix=function(){return g.getMTime()<this.getMTime()&&(A?u.ortho(h,v,y,x,b,.01,1e4):u.perspective(h,t,d,.01,1e4),g.modified()),h},this.computeDirectionOfProjection(),this},o(i.camera,i.groupNode)},7740(e,t,n){var i=n(9558);e.exports=function(e,t){t=t||{},e._primitiveShapeAuto=!0,e._primitiveShape=i.primitiveShapes.auto,void 0!==i.primitiveShapes[t.primitiveShape]&&(e._primitiveShape=t.primitiveShape),e._primitiveShapeAuto=e._primitiveShape===i.primitiveShapes.auto,e._primitiveShapeAuto&&(e._primitiveShape=i.primitiveShapes.sprite,e._primitiveShapeAuto=!0),e._pointPolygon=function(t,n,o,a){var s;switch(e._primitiveShape){case i.primitiveShapes.triangle:s=[t,n-2*a,t-o*Math.sqrt(3),n+a,t+o*Math.sqrt(3),n+a];break;case i.primitiveShapes.square:s=[t-o,n+a,t-o,n-a,t+o,n+a,t-o,n-a,t+o,n-a,t+o,n+a];break;default:s=[t,n]}return s},e.verticesPerFeature=function(){return e._pointPolygon(0,0,1,1).length/2},e.primitiveShape=function(t,n){if(void 0===t)return n||!e._primitiveShapeAuto?e._primitiveShape:i.primitiveShapes.auto;if(void 0!==i.primitiveShapes[t]){var o=!1;t===i.primitiveShapes.auto?(o=!e._primitiveShapeAuto,e._primitiveShapeAuto=!0):(o=e._primitiveShapeAuto||e._primitiveShape!==t,e._primitiveShapeAuto=!1,e._primitiveShape=t),o&&(e.renderer().contextRenderer().removeActor(e.actors()[0]),e._init(!0),e.dataTime().modified())}return e}}},7742(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(6465),s=function(e){return this instanceof s?(e=e||{},a.call(this,e),n(6062).call(this),this._init(e),this):new s(e)};i(s,a),o("canvas","track",s),e.exports=s},7784(e,t,n){var i=n(8899),o=n(5933).registerAnnotation,a=n(7150),s=n(4341),l=n(5264),u=function(e,t){"use strict";if(!(this instanceof u))return new u(e,t);e=s.deepMerge({},this.constructor.defaults,e,{constraint:1}),l.call(this,e,t||"square")};i(u,l),u.defaults=Object.assign({},l.defaults,{});var c={};c[a.capabilities.feature]=!0,o("square",u,c),e.exports=u},7825(e){"use strict";e.exports=function(e){if("u"<typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){var i,o,a;i="",n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {")),(o=void 0!==n.layer)&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}"),(a=n.sourceMap)&&"u">typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(i,t,e.options)},remove:function(){var e;null===(e=t).parentNode||e.parentNode.removeChild(e)}}}},7841(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9558),s=function(e){"use strict";if(!(this instanceof s))return new s(e);var t=n(9966),i=n(6732);e=e||{},a.call(this,e),t.call(this);var o=this,l=this._init,u=this._update,c=i(),d={};return this._init=function(e){return l.call(o,e),o},this._build=function(){var e=o.data(),t=o.style.get(),n=o.renderer(),i=o.position();return u.call(o),e||(e=[]),d.id=o._svgid(),d.data=e,d.append="circle",d.attributes={r:n._convertScale(t.radius),cx:function(e){return o.featureGcsToDisplay(i(e)).x},cy:function(e){return o.featureGcsToDisplay(i(e)).y}},d.style=t,d.classes=["svgPointFeature"],d.visible=o.visible,o.renderer()._drawFeatures(d),c.modified(),o.updateTime().modified(),o},this._update=function(){return u.call(o),o.timestamp()>=c.timestamp()&&o._build(),o},this._init(e),this};i(s,a);var l={};l[a.capabilities.stroke]=!0,o("svg","point",s,l),e.exports=s},7897(e){e.exports=function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e}},7899(e){e.exports="/* lineFeature debug fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  bool debug = bool(mod(fixedFlags, 2.0));\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 255.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 254.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    if (debug) {\n      color.r = 253.0 / 255.0;\n      gl_FragColor = color;\n      return;\n    }\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},7923(e,t,n){!function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function o(e){return e&&e.bracketRegex||/[(){}[\]]/}function a(e,t,a){var l=e.getLineHandle(t.line),u=t.ch-1,c=a&&a.afterCursor;null==c&&(c=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var d=o(a),f=!c&&u>=0&&d.test(l.text.charAt(u))&&i[l.text.charAt(u)]||d.test(l.text.charAt(u+1))&&i[l.text.charAt(++u)];if(!f)return null;var p=">"==f.charAt(1)?1:-1;if(a&&a.strict&&p>0!=(u==t.ch))return null;var h=e.getTokenTypeAt(n(t.line,u+1)),m=s(e,n(t.line,u+ +(p>0)),p,h,a);return null==m?null:{from:n(t.line,u),to:m&&m.pos,match:m&&m.ch==f.charAt(0),forward:p>0}}function s(e,t,a,s,l){for(var u=l&&l.maxScanLineLength||1e4,c=l&&l.maxScanLines||1e3,d=[],f=o(l),p=a>0?Math.min(t.line+c,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-c),h=t.line;h!=p;h+=a){var m=e.getLine(h);if(m){var g=a>0?0:m.length-1,v=a>0?m.length:-1;if(!(m.length>u))for(h==t.line&&(g=t.ch-(a<0));g!=v;g+=a){var y=m.charAt(g);if(f.test(y)&&(void 0===s||(e.getTokenTypeAt(n(h,g+1))||"")==(s||""))){var b=i[y];if(b&&">"==b.charAt(1)==a>0)d.push(y);else{if(!d.length)return{pos:n(h,g),ch:y};d.pop()}}}}}return h-a!=(a>0?e.lastLine():e.firstLine())&&null}function l(e,i,o){for(var s=e.state.matchBrackets.maxHighlightLineLength||1e3,l=o&&o.highlightNonMatching,u=[],c=e.listSelections(),d=0;d<c.length;d++){var f=c[d].empty()&&a(e,c[d].head,o);if(f&&(f.match||!1!==l)&&e.getLine(f.from.line).length<=s){var p=f.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(e.markText(f.from,n(f.from.line,f.from.ch+1),{className:p})),f.to&&e.getLine(f.to.line).length<=s&&u.push(e.markText(f.to,n(f.to.line,f.to.ch+1),{className:p}))}}if(u.length){t&&e.state.focused&&e.focus();var h=function(){e.operation(function(){for(var e=0;e<u.length;e++)u[e].clear()})};if(!i)return h;setTimeout(h,800)}}function u(e){e.operation(function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=l(e,!1,e.state.matchBrackets)})}function c(e){e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)}e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&(t.off("cursorActivity",u),t.off("focus",u),t.off("blur",c),c(t)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",u),t.on("focus",u),t.on("blur",c))}),e.defineExtension("matchBrackets",function(){l(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),a(this,e,t)}),e.defineExtension("scanForBracket",function(e,t,n,i){return s(this,e,t,n,i)})}(n(5885))},7929(e){e.exports=function(e,t,n,i,o,a,s){var l=1/(n-t),u=1/(o-i),c=1/(a-s);return e[0]=2*a*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*l,e[9]=(o+i)*u,e[10]=(s+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*c,e[15]=0,e}},7941(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(8452),s=function(e){"use strict";if(!(this instanceof s))return new s(e);var t=n(6062);e=e||{},a.call(this,e),t.call(this);var i=this;return this._renderOnCanvas=function(e,t){var n,o,a,s,l,u=i.data(),c=i.position(),d=i.line(),f=i.style.get("strokeWidth"),p=i.style.get("strokeColor"),h=i.style.get("strokeOpacity"),m=i.style.get("lineCap"),g=i.style.get("lineJoin"),v=i.style.get("miterLimit")(u),y=i.style.get("closed"),b={},x={};u.forEach(function(t,u){if(!((o=d(t,u)).length<2)){for(x.closed=y(t,u),x.width=f(o[0],0,t,u),x.color=p(o[0],0,t,u),x.opacity=h(o[0],0,t,u),x.linecap=m(o[0],0,t,u),x.linejoin=g(o[0],0,t,u),x.strokeStyle="rgba("+255*x.color.g+", "+255*x.color.g+", "+255*x.color.b+", "+(void 0!==x.opacity?x.opacity:1)+")",(b.strokeStyle!==x.strokeStyle||b.width!==x.width||b.linecap!==x.linecap||b.linejoin!==x.linejoin||b.miterlimit!==x.miterlimit)&&(void 0!==b.strokeStyle&&e.stroke(),e.beginPath(),e.strokeStyle=x.strokeStyle,e.lineWidth=x.width,e.lineCap=x.linecap,e.lineJoin=x.linejoin,e.miterLimit=v),l=0;l<o.length;l+=1)a=i.featureGcsToDisplay(c(o[l],l,t,u)),l?e.lineTo(a.x,a.y):(s=a,e.moveTo(a.x,a.y));x.closed&&e.lineTo(s.x,s.y),n=b,b=x,x=n}}),void 0!==b.strokeStyle&&e.stroke()},this._init(e),this};i(s,a);var l={};l[a.capabilities.basic]=!0,l[a.capabilities.multicolor]=!1,o("canvas","line",s,l),e.exports=s},8033(e,t,n){var i=n(4099),o=n(8899);i.groupNode=function(){"use strict";if(!(this instanceof i.groupNode))return new i.groupNode;i.node.call(this);var e=[];return this.addChild=function(t){return t instanceof i.node&&-1===e.indexOf(t)&&(t.setParent(this),e.push(t),this.boundsDirtyTimestamp().modified(),!0)},this.removeChild=function(t){if(t.parent()===this){var n=e.indexOf(t);if(n>=0)return e.splice(n,1),t.setParent(null),this.boundsDirtyTimestamp().modified(),!0}return!1},this.removeChildren=function(){for(;e.length;)this.removeChild(e[0]);this.modified()},this.children=function(){return e},this.hasChild=function(t){var n=0,i=!1;for(n=0;n<e.length;n+=1)if(e[n]===t){i=!0;break}return i},this},o(i.groupNode,i.node)},8044(e,t,n){"use strict";function i(){}function o(e){return e}n.r(t),n.d(t,{default:()=>s,forward:()=>o,init:()=>i,inverse:()=>o,names:()=>a});var a=["longlat","identity"];let s={init:i,forward:o,inverse:o,names:a}},8051(e){e.exports=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+i*i+o*o)}},8084(e,t,n){var i=function(e){"use strict";if(!(this instanceof n(4897)))return new i(e);var t=this,o=this.draw;return this.draw=function(){return t.ready&&(t._update(),t.renderer()._render(),o()),t},this};e.exports=i},8089(e,t,n){"use strict";function i(e){var t=Math.exp(e);return(t+1/t)/2}n.d(t,{A:()=>i})},8104(e){e.exports=function(e,t,n,i){var o=n[0],a=n[2],s=t[0]-o,l=t[2]-a,u=Math.sin(i),c=Math.cos(i);return e[0]=o+l*u+s*c,e[1]=t[1],e[2]=a+l*c-s*u,e}},8130(e,t,n){var i=n(6301),o=n(8899),a=n(5933).registerWidget,s=function(e){"use strict";if(!(this instanceof s))return new s(e);i.call(this,e);var t=n(2184).d3,o=n(4128),a=this,l=[],u=null,c=null,d=null;this.categories=function(e){return void 0===e?l.slice():(l=e.slice().map(function(e){return"line"===e.type&&(e.style.fill=!1,e.style.stroke=!0),e}),a.draw(),a)},this.size=function(){var e,n=1,i=t.select(a.canvas()).append("text").style("opacity",1e-6);return l.forEach(function(e){i.text(e.name),n=Math.max(n,i.node().getBBox().width)}),i.remove(),e=20*(l.length+1),{width:n+50,height:e}},this.draw=function(){function e(e){e.style("fill",function(e){return e.style.fill||void 0===e.style.fill?e.style.fillColor:"none"}).style("fill-opacity",function(e){return void 0===e.style.fillOpacity?1:e.style.fillOpacity}).style("stroke",function(e){return e.style.stroke||void 0===e.style.stroke?e.style.strokeColor:"none"}).style("stroke-opacity",function(e){return void 0===e.style.strokeOpacity?1:e.style.strokeOpacity}).style("stroke-width",function(e){return void 0===e.style.strokeWidth?1.5:e.style.strokeWidth})}a._init(),d.attr("height",a.size().height+24).style("display",null);var t=a._scale(),n=c.selectAll("g.geo-label").data(l,function(e){return e.name}).enter().append("g").attr("class","geo-label").attr("transform",function(e,n){return"translate(0,"+t.y(n)+")"});return e(n.filter(function(e){return"point"!==e.type&&"line"!==e.type}).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12)),e(n.filter(function(e){return"point"===e.type}).append("circle").attr("cx",20).attr("cy",0).attr("r",6)),e(n.filter(function(e){return"line"===e.type}).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0)),n.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text(function(e){return e.name}),a.reposition(),a},this._scale=function(){return{x:t.scaleLinear().domain([0,1]).range([0,a.size().width]),y:t.scaleLinear().domain([0,l.length-1]).range([6,a.size().height-6])}},this._init=function(){u||(a._createCanvas(),a._appendCanvasToParent());var e=a.size().width+24+4,n=a.size().height+24+4;u&&u.remove(),t.select(a.canvas()).attr("width",e).attr("height",n),(d=(c=(u=t.select(a.canvas()).append("g")).append("g").attr("transform","translate(14,14)")).append("rect").attr("x",-12).attr("y",-12).attr("width",e-4).attr("height",n-4).attr("rx",3).attr("ry",3)).style("stroke","black").style("stroke-width","1.5px").style("fill","white").style("fill-opacity",.75).style("display","none"),c.on("mousedown",function(e){e.stopPropagation()}),c.on("mouseover",function(){d.transition().duration(250).style("fill-opacity",1)}),c.on("mouseout",function(){d.transition().duration(250).style("fill-opacity",.75)}),a.reposition()},this.geoOn(o.resize,function(){a.draw()})};o(s,i),a("dom","legend",s),e.exports=s},8147(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.boundingObject=function(){"use strict";if(!(this instanceof i.boundingObject))return new i.boundingObject;i.object.call(this);var e=[0,0,0,0,0,0],t=a(),n=a();return t.modified(),n.modified(),this.bounds=function(){return e},this.hasValidBounds=function(e){return e[0]!==Number.MAX_VALUE&&e[1]!==-Number.MAX_VALUE&&e[2]!==Number.MAX_VALUE&&e[3]!==-Number.MAX_VALUE&&e[4]!==Number.MAX_VALUE&&e[5]!==-Number.MAX_VALUE},this.setBounds=function(n,i,o,a,s,l){if(this.hasValidBounds([n,i,o,a,s,l]))return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,this.modified(),t.modified(),!0},this.resetBounds=function(){e[0]=Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=Number.MAX_VALUE,e[3]=-Number.MAX_VALUE,e[4]=Number.MAX_VALUE,e[5]=-Number.MAX_VALUE,this.modified()},this.computeBounds=function(){},this.computeBoundsTimestamp=function(){return t},this.boundsDirtyTimestamp=function(){return n},this.resetBounds(),this},i.boundingObject.ReferenceFrame={Relative:0,Absolute:1},o(i.boundingObject,i.object)},8301(e,t,n){var i=n(8899),o=n(4897),a=n(4341),s=n(6682),l=n(4226),u=n(8315),c=n(7187),d=function(e){if(!(this instanceof d))return new d(e);var t=n(4128);return e=e||{},o.call(this,e),this._view=a.mat4AsArray(),this._proj=a.mat4AsArray(),this._projection=null,this._transform=a.mat4AsArray(),this._inverse=a.mat4AsArray(),this._bounds=null,this._display=null,this._world=null,this._viewport={width:1,height:1},this._createProj=function(){var e="perspective"===this._projection?u.frustum:u.ortho,t=this._clipbounds[this._projection];e(this._proj,t.left,t.right,t.bottom,t.top,t.near,t.far)},this._update=function(){this._bounds=null,this._display=null,this._world=null,this._transform=u.multiply(a.mat4AsArray(),this._proj,this._view),u.invert(this._inverse,this._transform),this.geoTrigger(t.camera.view,{camera:this})},Object.defineProperty(this,"view",{get:function(){return this._view},set:function(e){u.copy(this._view,e),this._update()},configurable:!0}),Object.defineProperty(this,"bounds",{get:function(){return null===this._bounds&&(this._bounds=this._getBounds()),this._bounds},set:function(e){this._setBounds(e),this._update()}}),Object.defineProperty(this,"clipbounds",{get:function(){return this._clipbounds[this._projection]},set:function(e){var t=this._clipbounds[this._projection];if((e={left:void 0===e.left?t.left:e.left,right:void 0===e.right?t.right:e.right,top:void 0===e.top?t.top:e.top,bottom:void 0===e.bottom?t.bottom:e.bottom,near:void 0===e.near?t.near:e.near,far:void 0===e.far?t.far:e.far}).left===e.right)throw Error("Left and right values must be different");if(e.top===e.bottom)throw Error("Top and bottom values must be different");if(e.near===e.far)throw Error("Near and far values must be different");this._clipbounds[this._projection]=e,this._createProj(),this._update()}}),Object.defineProperty(this,"display",{get:function(){if(null===this._display){var e=this._clipbounds[this._projection],t=a.mat4AsArray();u.translate(t,t,[this.viewport.width/2,this.viewport.height/2,0]),u.scale(t,t,[this.viewport.width/(e.right-e.left),this.viewport.height/(e.bottom-e.top),1]),u.translate(t,t,[-(e.left+e.right)/2,-(e.top+e.bottom)/2,0]),u.multiply(t,t,this._transform),this._display=t}return this._display}}),Object.defineProperty(this,"world",{get:function(){return null===this._world&&(this._world=u.invert(a.mat4AsArray(),this.display)),this._world}}),Object.defineProperty(this,"projection",{get:function(){return this._projection},set:function(e){if(!this.constructor.projection[e])throw Error("Unsupported projection type: "+e);e!==this._projection&&(this._projection=e,this._createProj(),this._update(),this.geoTrigger(t.camera.projection,{camera:this,projection:e}))}}),Object.defineProperty(this,"projectionMatrix",{get:function(){return this._proj}}),Object.defineProperty(this,"transform",{get:function(){return this._transform}}),Object.defineProperty(this,"inverse",{get:function(){return this._inverse}}),Object.defineProperty(this,"viewport",{get:function(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function(e){if(!(e.width>0&&e.height>0))throw Error("Invalid viewport dimensions");(e.width!==this._viewport.width||e.height!==this._viewport.height)&&(this._viewport.width&&this._viewport.height&&(this._scale([this._viewport.width/e.width,this._viewport.height/e.height,1]),this._translate([(e.width-this._viewport.width)/2,(e.height-this._viewport.height)/2,0])),this._viewport={width:e.width,height:e.height,left:e.left,top:e.top},this._update(),this.geoTrigger(t.camera.viewport,{camera:this,viewport:this.viewport}))}}),this._resetView=function(){return u.identity(this._view),this},this._translate=function(e){return u.translate(this._view,this._view,e),this},this._scale=function(e){return u.scale(this._view,this._view,e),this},this._worldToClip4=function(e){return c.transformMat4(e,e,this._transform)},this._clipToWorld4=function(e){return c.transformMat4(e,e,this._inverse)},this.applyProjection=function(e){var t;return"perspective"===this._projection?(t=1/(e[3]||1),e[0]=t*e[0],e[1]=t*e[1],e[2]=t*e[2],e[3]=t):e[3]=1,e},this.unapplyProjection=function(e){var t;return"perspective"===this._projection?(t=e[3]||1,e[0]=t*e[0],e[1]=t*e[1],e[2]=t*e[2],e[3]=t):e[3]=1,e},this.worldToDisplay4=function(e){return e=[e[0],e[1],e[2]||0,e[3]||1],(e=c.transformMat4(e,e,this.display))[3]&&1!==e[3]&&(e=[e[0]/e[3],e[1]/e[3],e[2]/e[3],1]),e},this.displayToWorld4=function(e){return e=[e[0],e[1],e[2]||0,e[3]||1],(e=c.transformMat4(e,e,this.world))[3]&&1!==e[3]&&(e=[e[0]/e[3],e[1]/e[3],e[2]/e[3],1]),e},this.worldToDisplay=function(e){var t=this._clipbounds[this._projection];return{x:(e=this.worldToDisplay4([e.x,e.y,-t.near]))[0],y:e[1]}},this.displayToWorld=function(e){return{x:(e=this.displayToWorld4([e.x,e.y,-1]))[0],y:e[1]}},this._getBounds=function(){var e,t,n,i,o={};return e=this.displayToWorld({x:0,y:0}),t=this.displayToWorld({x:this._viewport.width,y:0}),n=this.displayToWorld({x:0,y:this._viewport.height}),i=this.displayToWorld({x:this._viewport.width,y:this._viewport.height}),o.left=Math.min(e.x,t.x,n.x,i.x),o.bottom=Math.min(e.y,t.y,n.y,i.y),o.right=Math.max(e.x,t.x,n.x,i.x),o.top=Math.max(e.y,t.y,n.y,i.y),o},this._setBounds=function(e){var t={width:e.right-e.left,height:e.top-e.bottom},n={x:(e.left+e.right)/2,y:(e.bottom+e.top)/2};return this._viewFromCenterSizeRotation(n,t,0),this},this._viewFromCenterSizeRotation=function(e,t,n){var i,o,s,l=a.vec3AsArray(),u=a.vec3AsArray();return this._resetView(),(o=Math.abs(t.width))/(s=Math.abs(t.height))>=(i=this._viewport.width/this._viewport.height)?s=o/i:o=s*i,u[0]=2/o,u[1]=2/s,u[2]=1,this._scale(u),n&&this._rotate(n),l[0]=-e.x,l[1]=-e.y,l[2]=0,this._translate(l),this},this.viewFromCenterSizeRotation=function(e,t,n){return this._viewFromCenterSizeRotation(e,t,n),this._update(),this},this.pan=function(e){return(e.x||e.y||e.z)&&(this._translate([e.x,e.y,e.z||0]),this._update()),this},this.zoom=function(e){return 1===e||(u.scale(this._view,this._view,[e,e,e]),this._update()),this},this._rotate=function(e,t,n){if(!e)return this;n=n||[0,0,-1],t?void 0!==t.x&&(t=[t.x||0,t.y||0,t.z||0]):t=[0,0,0];var i=[-t[0],-t[1],-t[2]];return u.translate(this._view,this._view,t),u.rotate(this._view,this._view,e,n),u.translate(this._view,this._view,i),this},this.css=function(e){var t;switch((e||"").toLowerCase()){case"display":case"":t=this.display;break;case"world":t=this.world;break;default:throw Error("Unknown transform "+e)}return d.css(t)},this.ppMatrix=function(e,t){function n(n){var i=e[n],o=i.toExponential(t);return i>=0&&(o=" "+o),o}return t=t||2,[[n(0),n(4),n(8),n(12)].join(" "),[n(1),n(5),n(9),n(13)].join(" "),[n(2),n(6),n(10),n(14)].join(" "),[n(3),n(7),n(11),n(15)].join(" ")].join("\n")},this.toString=function(){return this.ppMatrix(this._transform)},this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")},this.valueOf=function(){return this._transform},this._clipbounds=this.constructor.clipbounds,this._resetView(),this.projection=e.projection||"parallel",e.viewport&&(this.viewport=e.viewport),this._update(),this};d.projection={perspective:!0,parallel:!0},d.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}},d.css=function(e){return"matrix3d("+e.map(function(e){return(e=(+e).toPrecision(15)).indexOf("e")>=0?e=(+e).toString():e.indexOf(".")>=0&&(e=e.replace(/(\.|)0+$/,"")),e}).join(",")+")"},d.vec3=l,d.mat3=s,d.vec4=c,d.mat4=u,i(d,o),e.exports=d},8315(e,t,n){e.exports={create:n(5579),clone:n(366),copy:n(9742),identity:n(6949),transpose:n(3900),invert:n(435),adjoint:n(9508),determinant:n(304),multiply:n(6767),translate:n(121),scale:n(4101),rotate:n(5796),rotateX:n(6678),rotateY:n(4949),rotateZ:n(8860),fromRotation:n(7033),fromRotationTranslation:n(8434),fromScaling:n(7094),fromTranslation:n(1904),fromXRotation:n(4553),fromYRotation:n(2822),fromZRotation:n(8427),fromQuat:n(7444),frustum:n(7929),perspective:n(597),perspectiveFromFieldOfView:n(3145),ortho:n(1101),lookAt:n(8329),str:n(8916)}},8317(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2];return e[0]=i*n[0]+o*n[3]+a*n[6],e[1]=i*n[1]+o*n[4]+a*n[7],e[2]=i*n[2]+o*n[5]+a*n[8],e}},8329(e,t,n){var i=n(6949);e.exports=function(e,t,n,o){var a,s,l,u,c,d,f,p,h,m,g=t[0],v=t[1],y=t[2],b=o[0],x=o[1],w=o[2],A=n[0],C=n[1],S=n[2];return 1e-6>Math.abs(g-A)&&1e-6>Math.abs(v-C)&&1e-6>Math.abs(y-S)?i(e):(m=1/Math.sqrt((f=g-A)*f+(p=v-C)*p+(h=y-S)*h),f*=m,p*=m,h*=m,(m=Math.sqrt((a=x*h-w*p)*a+(s=w*f-b*h)*s+(l=b*p-x*f)*l))?(a*=m=1/m,s*=m,l*=m):(a=0,s=0,l=0),(m=Math.sqrt((u=p*l-h*s)*u+(c=h*a-f*l)*c+(d=f*s-p*a)*d))?(u*=m=1/m,c*=m,d*=m):(u=0,c=0,d=0),e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=s,e[5]=c,e[6]=p,e[7]=0,e[8]=l,e[9]=d,e[10]=h,e[11]=0,e[12]=-(a*g+s*v+l*y),e[13]=-(u*g+c*v+d*y),e[14]=-(f*g+p*v+h*y),e[15]=1,e)}},8336(e){e.exports={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_edit_handle:"geo_annotation_edit_handle",annotation_cursor:"geo_annotation_cursor"}},8342(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(9812),s=n(1386),l=n(4341),u=function(e){"use strict";if(!(this instanceof u))return new u(e);a.call(this,e),n(4727).call(this);var t,i,o,c=n(6194),d=n(3640),f=this._exit,p=this;return this.pointSearch=function(e,n){if(t&&p.m_info){var i=t.pointSearch(e,n);return this._pointSearchProcess(i)}return{index:[],found:[]}},this._computePixelmap=function(){var e,n=p.data()||[],a=p.style.get("color"),u=p.indexModified(void 0,"clear"),f=p.dataTime().timestamp()>=p.buildTime().timestamp()||void 0===u;o||((o=s()).setTextureUnit(1),f=!0);var h=Math.max(1,n.length),m=o.maxWidth();h>m&&h%m&&(h+=m-h%m),f||(f=(e=o.colorTable()).length!==4*h,u[0]=Math.max(0,u[0]),u[1]=Math.min(n.length,u[1]+1)),f&&(e=new Uint8Array(4*h),u=[0,n.length]);for(var g=u[0];g<u[1];g+=1){var v=n[g],y=l.convertColor(a.call(p,v,g));e[4*g]=255*y.r,e[4*g+1]=255*y.g,e[4*g+2]=255*y.b,e[4*g+3]=void 0===y.a?255:255*y.a}p.m_info={colors:e};var b=o.colorTable();if(b&&b.length===e.length){for(var x=4*u[0];x<4*u[1]&&e[x]===b[x];x+=1);if(x===4*u[1])return}o.colorTable(e),t||(t=p.layer().createFeature("quad",{selectionAPI:!1,gcs:p.gcs(),visible:p.visible(void 0,!0),nearestPixel:!0}),i=!1),i||(p.dependentFeatures([t]),t.setShader("image_fragment",d),t._hookBuild=function(e){var t=new c.uniform(c.GL.INT,"lutSampler");t.set(o.textureUnit()),e.addUniform(t);var n=new c.uniform(c.GL.INT,"lutWidth");n.set(o.width),e.addUniform(n);var i=new c.uniform(c.GL.INT,"lutHeight");i.set(o.height),e.addUniform(i)},t._hookRenderImageQuads=function(e,t){o.bind(e,t)},!1===i&&t.style({image:p.m_srcImage,position:p.style.get("position")}).data([{}]).draw(),i=!0)},this._exit=function(){return t&&p.layer()&&(p.layer().deleteFeature(t),t=null,p.dependentFeatures([])),f(),p},e.quadFeature&&(t=e.quadFeature).nearestPixel&&t.nearestPixel(!0),this._init(e),this};i(u,a);var c={};c[a.capabilities.lookup]=!0,o("webgl","pixelmap",u,c),e.exports=u},8370(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(3479),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},8427(e){e.exports=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},8434(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,u=o+o,c=a+a,d=i*l,f=i*u,p=i*c,h=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c;return e[0]=1-(h+g),e[1]=f+b,e[2]=p-y,e[3]=0,e[4]=f-b,e[5]=1-(d+g),e[6]=m+v,e[7]=0,e[8]=p+y,e[9]=m-v,e[10]=1-(d+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},8452(e,t,n){var i=n(8899),o=n(9186),a=n(6732),s=n(5204),l=n(4341),u=function(e){"use strict";if(!(this instanceof u))return new u(e);e=e||{},o.call(this,e);var t,n=this,i=this._init,c=a();return this.featureType="line",this._subfeatureStyles={lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.line=function(e){return void 0===e?n.style("line"):(n.style("line",e),n.dataTime().modified(),n.modified(),n)},this.position=function(e){return void 0===e?n.style("position"):(n.style("position",e),n.dataTime().modified(),n.modified(),n)},this._updatePointSearchInfo=function(){if(c.timestamp()>=n.dataTime().timestamp()&&c.timestamp()>=n.timestamp())return t;c.modified(),t=[];for(var e=n.data(),i=n.line(),o=n.style.get("strokeWidth"),a=l.isFunction(n.style("strokeWidth"))?void 0:o(),u=n.position(),d=n.style.get("closed"),f=l.isFunction(n.style("closed"))?void 0:d(),p=n.style.get("uniformLine"),h=l.isFunction(n.style("uniformLine"))?void 0:p(),m=n.gcs(),g=n.layer().map().gcs(),v=s.onlyInvertedY(m,g),y=0;y<e.length;y+=1){for(var b=e[y],x=void 0===f?d(b,y):f,w=void 0,A=void 0,C=void 0,S=void 0,_=void 0,T=void 0,O=void 0,P=void 0,M=[],E=void 0===h?p(b,y):h,D=i(b,y),I=0;I<D.length;I+=1){var k=D[I],N=u(k,I,b,y);v?N={x:N.x,y:-N.y}:m!==g&&(N=s.transformCoordinates(m,g,N)),void 0===T&&(T={x:N.x,y:N.y}),void 0===O&&(O={x:N.x,y:N.y}),N.x<T.x&&(T.x=N.x),N.x>O.x&&(O.x=N.x),N.y<T.y&&(T.y=N.y),N.y>O.y&&(O.y=N.y),E&&I||(P=void 0===a?o(k,I,b,y):a);var R=Math.ceil(P/2)+2;(void 0===O.r||R>O.r)&&(O.r=R);var B=R*R;w&&M.push({u:N,v:w,r:C>R?C:R,r2:S>B?S:B,i:I,j:A}),w=N,A=I,C=R,S=B,!_&&x&&(_={p:N,r:R,r2:B,i:I})}x&&_&&(w.x!==_.p.x||w.y!==_.p.y)&&M.push({u:w,v:_.p,r:C>_.r?C:_.r,r2:S>_.r2?S:_.r2,i:A,j:_.i}),M.min=T,M.max=O,t.push(M)}return t},this.pointSearch=function(e,i){var o=n.data(),a=[],u=[],c={};if(!o||!o.length||!n.layer())return{found:u,index:a,extra:c};n._updatePointSearchInfo();var d=n.layer().map();i=null===i?d.gcs():void 0===i?d.ingcs():i;var f,p,h,m,g=d.unitsPerPixel(d.zoom()),v=g*g,y=s.transformCoordinates(i,d.gcs(),e),b=n.style.get("strokeWidth"),x=n.style.get("strokeOpacity"),w=n.line();for(p=0;p<t.length;p+=1)for(h=0,m=t[p],f=null;h<m.length;h+=1)if(l.distance2dToLineSquared(y,m[h].u,m[h].v)<=m[h].r2*v&&(f||(f=w(o[p],p)),(x(f[m[h].i],m[h].i,o[p],p)>0||x(f[m[h].j],m[h].j,o[p],p)>0)&&(b(f[m[h].i],m[h].i,o[p],p)>0||b(f[m[h].j],m[h].j,o[p],p)>0))){u.push(o[p]),a.push(p),c[p]=h;break}return{found:u,index:a,extra:c}},this.polygonSearch=function(e,i,o){var a,u,c,d,f,p,h,m,g=n.data(),v=[],y=[],b={},x=n.layer().map(),w=n.style.get("strokeWidth"),A=n.style.get("strokeOpacity"),C=n.line();if(o=null===o?x.gcs():void 0===o?x.ingcs():o,e.outer||(e={outer:e,inner:[]}),!g||!g.length||e.outer.length<3)return{found:y,index:v,extra:b};(i=i||{}).partial=i.partial||!1,(e={outer:s.transformCoordinates(o,x.gcs(),e.outer),inner:(e.inner||[]).map(function(e){return s.transformCoordinates(o,x.gcs(),e)})}).outer.forEach(function(e){h||(h={x:e.x,y:e.y},m={x:e.x,y:e.y}),e.x<h.x&&(h.x=e.x),e.x>m.x&&(m.x=e.x),e.y<h.y&&(h.y=e.y),e.y>m.y&&(m.y=e.y)}),n._updatePointSearchInfo();var S=x.unitsPerPixel(x.zoom());for(a=0;a<t.length;a+=1)if((c=t[a]).max&&!(c.max.x<h.x-c.max.r*S)&&!(c.min.x>m.x+c.max.r*S)&&!(c.max.y<h.y-c.max.r*S)&&!(c.min.y>m.y+c.max.r*S)){var _=void 0,T=void 0,O=void 0;for(u=0;u<c.length;u+=1)if((d=c[u].u,f=c[u].v,p=c[u].r,(!(d.x<h.x-p*S)||!(f.x<h.x-p*S))&&(!(d.x>m.x+p*S)||!(f.x>m.x+p*S))&&(!(d.y<h.y-p*S)||!(f.y<h.y-p*S))&&(!(d.y>m.y+p*S)||!(f.y>m.y+p*S)))&&(O||(O=C(g[a],a)),!(0>=A(O[c[u].i],c[u].i,g[a],a)&&0>=A(O[c[u].j],c[u].j,g[a],a)||0>=w(O[c[u].i],c[u].i,g[a],a)&&0>=w(O[c[u].j],c[u].j,g[a],a)))){var P=l.distanceToPolygon2d(d,e),M=l.distanceToPolygon2d(f,e);if(P>-p*S&&P<p*S||M>-p*S&&M<p&S||P*M<0||l.crossedLineSegmentPolygon2d(d,f,e)){T=!0;break}for(var E=p*p*S*S,D=0;D<e.outer.length&&!T;D+=1)T=l.distance2dToLineSquared(e.outer[D],d,f)<E;for(var I=0;I<e.inner.length&&!T;I+=1)for(var k=0;k<e.inner[I].length&&!T;k+=1)T=l.distance2dToLineSquared(e.inner[I][k],d,f)<E;if(T)break;P>0&&(_=!0)}(!i.partial&&_&&!T||i.partial&&(_||T))&&(v.push(a),y.push(g[a]),b[a]={partial:T,segment:u<t[a].length?u:0})}return{found:y,index:v,extra:b}},this.rdpSimplifyData=function(e,t,i,o){e=e||n.data(),i=i||n.style.get("position"),o=o||n.style.get("line");var a=n.layer().map(),u=a.gcs(),c=n.gcs(),d=n.style.get("closed");return void 0===t&&(t=.5*a.unitsPerPixel(a.zoom())),e=e.map(function(e,n){var a=o(e,n),f=s.transformCoordinates(c,u,a.map(function(t,o){return i(t,o,e,n)})),p=l.rdpLineSimplify(f,t,d(e,n),[]);for(var h in(p.length<2||2===p.length&&l.distance2dSquared(p[0],p[1])<t*t)&&(p=[]),p=s.transformCoordinates(u,c,p),e)e.hasOwnProperty(h)&&!(Array.isArray(e)&&h>=0&&h<e.length)&&(p[h]=e[h]);return p}),n.style("position",l.identityFunction),n.style("line",l.identityFunction),n.data(e),n},this._init=function(e){e=e||{},i.call(n,e);var t=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:!1,line:l.identityFunction,position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e},origin:function(e){return e.length>=3?e.slice(0,3):[0,0,0]}},void 0===e.style?{}:e.style);return void 0!==e.line&&(t.line=e.line),void 0!==e.position&&(t.position=e.position),n.style(t),n.dataTime().modified(),n},this._init(e),this};u.create=function(e,t){return(t=t||{}).type="line",o.create(e,t)},u.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"},i(u,o),e.exports=u},8490(e,t,n){var i=n(4099);i.event={},i.event.keyPress="vgl.event.keyPress",i.event.mousePress="vgl.event.mousePress",i.event.mouseRelease="vgl.event.mouseRelease",i.event.contextMenu="vgl.event.contextMenu",i.event.configure="vgl.event.configure",i.event.enable="vgl.event.enable",i.event.mouseWheel="vgl.event.mouseWheel",i.event.keyRelease="vgl.event.keyRelease",i.event.middleButtonPress="vgl.event.middleButtonPress",i.event.startInteraction="vgl.event.startInteraction",i.event.enter="vgl.event.enter",i.event.rightButtonPress="vgl.event.rightButtonPress",i.event.middleButtonRelease="vgl.event.middleButtonRelease",i.event.char="vgl.event.char",i.event.disable="vgl.event.disable",i.event.endInteraction="vgl.event.endInteraction",i.event.mouseMove="vgl.event.mouseMove",i.event.mouseOut="vgl.event.mouseOut",i.event.expose="vgl.event.expose",i.event.timer="vgl.event.timer",i.event.leftButtonPress="vgl.event.leftButtonPress",i.event.leave="vgl.event.leave",i.event.rightButtonRelease="vgl.event.rightButtonRelease",i.event.leftButtonRelease="vgl.event.leftButtonRelease",i.event.click="vgl.event.click",i.event.dblClick="vgl.event.dblClick"},8492(e,t,n){var i=n(4099);i.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5},i.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9},i.vertexAttribute=function(e){"use strict";if(!(this instanceof i.vertexAttribute))return new i.vertexAttribute(e);this.name=function(){return e},this.bindVertexData=function(t,n){var i=t.m_mapper.geometryData().sourceData(n),o=t.m_material.shaderProgram();t.m_context.vertexAttribPointer(o.attributeLocation(e),i.attributeNumberOfComponents(n),i.attributeDataType(n),i.normalized(n),i.attributeStride(n),i.attributeOffset(n)),t.m_context.enableVertexAttribArray(o.attributeLocation(e))},this.undoBindVertexData=function(t,n){var i=t.m_material.shaderProgram();t.m_context.disableVertexAttribArray(i.attributeLocation(e))}}},8525(e,t,n){var i=n(8899),o=n(4837),a=n(4128),s=n(5933),l=function(e){"use strict";if(!(this instanceof l))return new l(e);o.call(this,e);var t=this,n=[],i=this._init,u=this._exit,c=this._update,d=this.visible,f=this.selectionAPI,p=this.draw;return this.createFeature=function(e,n){var i=s.createFeature(e,t,t.renderer(),n);return i?t.addFeature(i):console.warn("Layer renderer ("+t.rendererName()+') does not support feature type "'+e+'"'),i},this.addFeature=function(e){return t.removeFeature(e),t.addChild(e),n.push(e),t.dataTime().modified(),t.modified(),t},this.removeFeature=function(e){var i;return(i=n.indexOf(e))>=0&&(n.splice(i,1),t.removeChild(e),t.dataTime().modified(),t.modified()),t},this.deleteFeature=function(e){return e&&(n.indexOf(e)>=0&&e._exit(),t.removeFeature(e)),t},this.features=function(e){if(void 0===e)return n.slice();var i,o=n.slice();for(i=0;i<o.length;i+=1)0>e.indexOf(o[i])&&n.indexOf(o[i])>=0&&t.deleteFeature(o[i]);for(i=0;i<e.length;i+=1)t.addFeature(e[i]);return t},this.gcsFeatures=function(e){if(void 0===e){var n,i;return this.features().forEach(function(e){void 0===n?n=e.gcs():e.gcs()!==n&&(i=!0)}),i?void 0:n}return t.features().forEach(function(t){t.gcs()!==e&&t.gcs(e)}),t},this._init=function(){return t.initialized()||(i.call(t,!0),t.geoOn(a.resize,function(e){t.renderer()?(t.renderer()._resize(e.x,e.y,e.width,e.height),t._update({event:e}),t.renderer()._render()):t._update({event:e})}),t.geoOn(a.pan,function(e){t._update({event:e}),t.renderer()&&t.renderer()._render()}),t.geoOn(a.rotate,function(e){t._update({event:e}),t.renderer()&&t.renderer()._render()}),t.geoOn(a.zoom,function(e){t._update({event:e}),t.renderer()&&t.renderer()._render()})),t},this._update=function(e){var i;if(!n.length)return t;if(c.call(t,e),t.dataTime().timestamp()>t.updateTime().timestamp())for(i=0;i<n.length;i+=1)n[i].renderer(t.renderer());for(i=0;i<n.length;i+=1)n[i]._update();return t.updateTime().modified(),t},this._exit=function(){t.clear(),u()},this.draw=function(){return t.visible()&&(p(),t.renderer()&&t.renderer()._render()),t},this.visible=function(e){if(void 0===e)return d();if(t.visible()!==e){d(e);var i,o=n.slice();for(i=0;i<o.length;i+=1)o[i].visible(o[i].visible(void 0,!0),!0);e&&t.draw()}return t},this.selectionAPI=function(e){if(void 0===e)return f();if(t.selectionAPI()!==e){f(e);var i,o=n.slice();for(i=0;i<o.length;i+=1)o[i].selectionAPI(o[i].selectionAPI(void 0,!0),!0)}return t},this.clear=function(){for(;n.length;)t.deleteFeature(n[0]);return t},t};i(l,o),s.registerLayer("feature",l),e.exports=l},8546(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2wzLDBsMCwtM2wyLDBsMCwzbDMsMGwwLDJsLTMsMGwwLDNsLTIsMGwwLC0zbC0zLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},8603(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},8648(e){e.exports="0.0.0-semantically-released"},8736(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var i=n(5072),o=n.n(i),a=n(7825),s=n.n(a),l=n(7659),u=n.n(l),c=n(5056),d=n.n(c),f=n(540),p=n.n(f),h=n(1113),m=n.n(h),g=n(2885),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.A,v);let y=g.A&&g.A.locals?g.A.locals:void 0},8743(e,t,n){e.exports=function(e){"use strict";e=e||{};var t=n(6194),i=n(5204),o=n(4341),a=n(6509),s=n(3376);n(4727).call(this);var l,u,c=this,d=this._exit,f=null,p=null,h=null,m=null,g=null,v=null,y=null,b=null,x=void 0!==e.dynamicDraw&&e.dynamicDraw,w=this._init,A=this._update;return this.createGLMeshColored=function(e){var t,n,a,s,d,f,h,x,w,A=e.elements.length,C=[],S=p.geometryData();for(g.set([e.minColor.r,e.minColor.g,e.minColor.b,e.minColor.a]),v.set([e.maxColor.r,e.maxColor.g,e.maxColor.b,e.maxColor.a]),y.set(e.colorMap.length),b.set(e.stepped),t=-1;t<e.colorMap.length+1;t+=1)a=Math.max(0,Math.min(e.colorMap.length-1,t)),C.push(255*e.colorMap[a].r),C.push(255*e.colorMap[a].g),C.push(255*e.colorMap[a].b),C.push(255*e.colorMap[a].a);if(m.setColorTable(C),e.pos=i.transformCoordinates(c.gcs(),c.layer().map().gcs(),e.pos,3),(l=new Float32Array(c.style.get("origin")(e.pos)))[0]||l[1]||l[2])for(t=0;t<e.pos.length;t+=3)e.pos[t]-=l[0],e.pos[t+1]-=l[1],e.pos[t+2]-=l[2];for(u.setOrigin(l),f=o.getGeomBuffer(S,"pos",3*A),h=o.getGeomBuffer(S,"opacity",A),x=o.getGeomBuffer(S,"value",A),t=n=0;t<A;t+=1,n+=3)s=3*(a=e.elements[t]),f[n]=e.pos[s],f[n+1]=e.pos[s+1],f[n+2]=e.pos[s+2],d=e.elementValues?Math.floor(t/3):a,h[t]=e.opacity[d],x[t]=e.value[d];(w=S.primitive(0).indices())instanceof Uint16Array&&w.length===A||(w=new Uint16Array(A),S.primitive(0).setIndices(w)),S.boundsDirty(!0),p.modified(),p.boundsDirtyTimestamp().modified()},this._init=function(e){var n,i,o=t.blend(),l=t.shaderProgram(),d=t.material(),A=t.lookupTable(),C=t.geometryData(),S=new t.projectionUniform("projectionMatrix"),_=new t.uniform(t.GL.INT,"sampler2d"),T=((n=new t.shader(t.GL.VERTEX_SHADER)).setShaderSource(s),n),O=((i=new t.shader(t.GL.FRAGMENT_SHADER)).setShaderSource(a),i),P=t.vertexAttribute("pos"),M=t.vertexAttribute("value"),E=t.vertexAttribute("opacity"),D=t.sourceDataP3fv({name:"pos"}),I=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.One,{name:"value"}),k=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Two,{name:"opacity"}),N=new t.triangles;u=new t.modelViewOriginUniform("modelViewMatrix"),w.call(c,e),p=t.mapper({dynamicDraw:x}),l.addVertexAttribute(P,t.vertexAttributeKeys.Position),l.addVertexAttribute(M,t.vertexAttributeKeysIndexed.One),l.addVertexAttribute(E,t.vertexAttributeKeysIndexed.Two),l.addUniform(u),l.addUniform(S),g=new t.uniform(t.GL.FLOAT_VEC4,"minColor"),l.addUniform(g),v=new t.uniform(t.GL.FLOAT_VEC4,"maxColor"),l.addUniform(v),y=new t.uniform(t.GL.FLOAT,"steps"),l.addUniform(y),b=new t.uniform(t.GL.BOOL,"stepped"),l.addUniform(b),l.addShader(O),l.addShader(T),l.addUniform(_),A.setTextureUnit(7),_.set(7),(h=d).addAttribute(l),h.addAttribute(o),m=A,h.addAttribute(m),(f=t.actor()).setMaterial(h),f.setMapper(p),C.addSource(D),C.addSource(I),C.addSource(k),C.addPrimitive(N),C.computeBounds=function(){C.setBounds(0,0,0,0,0,0)},p.setGeometryData(C)},this.actors=function(){return f?[f]:[]},this._update=function(){A.call(c),(c.dataTime().timestamp()>=c.buildTime().timestamp()||c.updateTime().timestamp()<=c.timestamp())&&c._build(),f.setVisible(c.visible()),f.material().setBinNumber(c.bin()),c.updateTime().modified()},this._exit=function(){c.renderer().contextRenderer().removeActor(f),d()},this}},8770(e){e.exports="46a0639f4232b085fab9366b8399f818420ce78b"},8793(e,t,n){var i=n(4099),o=n(8899),a=n(6732);i.shader=function(e){"use strict";if(!(this instanceof i.shader))return new i.shader(e);i.object.call(this);var t=[],n="";this._getContextEntry=function(e){var n,i,o=e.m_context;for(n=0;n<t.length;n+=1)if(t[n].context===o)return t[n];return i={context:o,compileTimestamp:a()},t.push(i),i},this.removeContext=function(e){var n,i=e.m_context;for(n=0;n<t.length;n+=1)if(t[n].context===i)return void t.splice(n,1)},this.shaderHandle=function(e){return this._getContextEntry(e).shaderHandle},this.setShaderSource=function(e){n=e,this.modified()},this.compile=function(t){var o=this._getContextEntry(t);return this.getMTime()<o.compileTimestamp.getMTime()?o.shaderHandle:(t.m_context.deleteShader(o.shaderHandle),o.shaderHandle=t.m_context.createShader(e),t.m_context.shaderSource(o.shaderHandle,n),t.m_context.compileShader(o.shaderHandle),t.m_context.getShaderParameter(o.shaderHandle,i.GL.COMPILE_STATUS))?(o.compileTimestamp.modified(),o.shaderHandle):(console.log("[ERROR] An error occurred compiling the shaders: "+t.m_context.getShaderInfoLog(o.shaderHandle)),console.log(n),t.m_context.deleteShader(o.shaderHandle),null)},this.attachShader=function(e,t){e.m_context.attachShader(t,this.shaderHandle(e))}},o(i.shader,i.object),function(){"use strict";var e=[];i.getCachedShader=function(t,n,o){for(var a=0;a<e.length;a+=1)if(e[a].type===t&&e[a].context===n&&e[a].source===o)return a&&e.splice(0,0,e.splice(a,1)[0]),e[0].shader;var s=new i.shader(t);return s.setShaderSource(o),e.unshift({type:t,context:n,source:o,shader:s}),e.length>=10&&e.splice(10,e.length-10),s},i.clearCachedShaders=function(t){for(var n=e.length-1;n>=0;n-=1)(null==t||e[n].context===t)&&e.splice(n,1)}}()},8795(e,t,n){var i=n(4128),o=n(8336),a=n(5204),s=n(4341),l=n(2227),u=0,c={create:"create",done:"done",highlight:"highlight",edit:"edit",cursor:"cursor"},d="annotationAction",f={fill:!0,fillColor:function(e){return e.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function(e){return e.selected?.5:.25},radius:function(e){return"edge"===e.type||"rotate"===e.type?8:10},scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function(e){return"edge"===e.type||"rotate"===e.type?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:!0,edge:!0,center:!0,rotate:!0,resize:!0}},p=function(e,t){"use strict";if(!(this instanceof p))return new p(e,t);var n=this,m=s.deepMerge({},this.constructor.defaults,t||{}),g=m.annotationId;delete m.annotationId,void 0===g||m.layer&&m.layer.annotationById(g)?(u+=1,void 0!==g&&console.warn("Annotation id "+g+" is in use; using "+u+" instead."),g=u):g>u&&(u=g);var v=m.name||e.charAt(0).toUpperCase()+e.substr(1)+" "+g,y=m.label||null,b=m.description||void 0,x=m.layer,w=m.state||c.done;delete m.state,delete m.layer,delete m.name,delete m.label,delete m.description,m.constraint&&(s.isFunction(m.constraint)?this._selectionConstraint=m.constraint:this._selectionConstraint=h(m.constraint)),this._exit=function(){n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove)},this.id=function(){return g},this.newId=function(){return u+=1,g=u,n},this.name=function(e){return void 0===e?v:(null!==e&&(""+e).trim()&&(e=(""+e).trim())!==v&&(v=e,n.modified()),n)},this.label=function(e,t){return void 0===e?null!==y||t?y:v:(e!==y&&(y=e,n.modified()),n)},this._labelPosition=function(){return s.centerFromPerimeter(n._coordinates())},this._rotateHandlePosition=function(e,t){var i,o,a,l=n.layer().map(),u=n._coordinates(),c=s.centerFromPerimeter(n._coordinates()),d=c?l.gcsToDisplay(c,null):void 0,f=0;if(c){for(i=0,e=e||0,t=t||0,u=u.outer?u.outer:u;i<u.length;i+=1)f=Math.max(f,Math.pow((o=l.gcsToDisplay(u[i],null)).x-d.x,2)+Math.pow(o.y-d.y,2));return a=Math.sqrt(f)+e,o=l.displayToGcs({x:d.x+a*Math.cos(t),y:d.y-a*Math.sin(t)},null)}},this.labelRecord=function(){var e=n.options("showLabel");if(e){var t=n.state();if(!(!0===e&&t===c.create||!0!==e&&0>e.indexOf(t))){var i=n.labelStyle(),o={text:n.label(),position:n._labelPosition()};if(o.position)return i&&(o.style=i),o}}},this.description=function(e){return void 0===e?b:(e!==b&&(b=e,n.modified()),n)},this.layer=function(e){return void 0===e?x:(x=e,n)},this._cursorHandleMousemove=function(e){n.layer()._handleMouseMoveModifiers(e);var t=n._cursorCenter,i={x:e.mapgcs.x-t.x,y:e.mapgcs.y-t.y};if(i.x||i.y){var o=n._coordinates(),a=n._coordinatesMapFunc(o,function(e){return{x:e.x+i.x,y:e.y+i.y}});return n._coordinates(a),n._cursorCenter=e.mapgcs,n.modified(),n.draw(),!0}return!1},this.state=function(e){return void 0===e?w:(w!==e&&(w=e,n.layer()&&n.layer().geoTrigger(i.annotation.state,{annotation:n}),n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove),w===c.cursor&&(n._cursorCenter=s.centerFromPerimeter(n._coordinates()),n.layer()&&n.layer().geoOn(i.mousemove,n._cursorHandleMousemove))),n)},this.actions=function(e){switch(!e&&(e=n.state()),e){case c.edit:return[{action:o.annotation_edit_handle,name:"annotation edit",owner:d,input:"left"},{action:o.annotation_edit_handle,name:"annotation edit",owner:d,input:"pan"}];case c.cursor:return[{action:o.annotation_cursor,name:"annotation cursor",owner:d,input:"pan"},{action:o.annotation_cursor,name:"annotation cursor",owner:d,input:"left"}];default:return[]}},this.processAction=function(e){},this.processEditAction=function(e){if(e&&n._editHandle&&n._editHandle.handle)switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(e);case"edge":return n._processEditActionEdge(e);case"center":return n._processEditActionCenter(e);case"rotate":return n._processEditActionRotate(e);case"resize":return n._processEditActionResize(e)}},this._copyOfCoordinates=function(e){return(e=e||n._coordinates()).outer?{outer:e.outer.slice(),inner:(e.inner||[]).map(function(e){return e.slice()})}:e.slice()},this.selectEditHandle=function(e,t){t&&n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected&&(n._editHandle.handle.selected=!1),e.selected=t;var o=(n._editHandle||{}).amountRotated||0;return n._editHandle={handle:e,startCoordinates:n._copyOfCoordinates(),center:s.centerFromPerimeter(n._coordinates()),rotatePosition:n._rotateHandlePosition(e.style.rotateHandleOffset,e.style.rotateHandleRotation+o),startAmountRotated:o,amountRotated:o,resizePosition:n._rotateHandlePosition(e.style.resizeHandleOffset,e.style.resizeHandleRotation)},n.layer()&&n.layer().geoTrigger(i.annotation.select_edit_handle,{annotation:n,handle:n._editHandle,enable:t}),n},this.options=function(e,t){if(void 0===e)return m;if("string"==typeof e&&void 0===t)return m[e];if(void 0===t?(o=void 0!==e[n._coordinateOption],m=s.deepMerge(m,e),["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(t){void 0!==e[t]&&Object.assign(m[t],e[t])})):(o=e===n._coordinateOption,m[e]=t),m.coordinates){var o,a=m.coordinates;delete m.coordinates,n._coordinates(a)}if(void 0!==m.name){var l=m.name;delete m.name,n.name(l)}if(void 0!==m.label){var u=m.label;delete m.label,n.label(u)}if(void 0!==m.description){var c=m.description;delete m.description,n.description(c)}return n.modified(),o&&n.layer()&&n.layer().geoTrigger(i.annotation.coordinates,{annotation:n}),n},this.style=function(e,t,i){return(i=i||"style",void 0===e)?m[i]:"string"==typeof e&&void 0===t?(m[i]||{})[e]:(void 0===m[i]&&(m[i]={}),void 0===t?m[i]=s.deepMerge(m[i],e):m[i][e]=t,n.modified(),n)},["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(e){n[e]=function(t,i){return n.style(t,i,e)}}),this.styleForState=function(e){return(e=e||n.state())===c.edit||e===c.highlight?Object.assign({},m.style,m[e+"Style"]):e===c.create?Object.assign({},m.style,m.editStyle,m[e+"Style"]):e===c.cursor?Object.assign({},m.style,m.editStyle,m.createStyle,m[e+"Style"]):m[e+"Style"]||m.style||{}},this.type=function(){return e},this.features=function(){return[]},this.mouseClick=function(e){},this.mouseClickEdit=function(e){},this.mouseMove=function(e){},this._coordinates=function(e){return[]},this._coordinateOption="vertices",this.coordinates=function(e){var t=n._coordinates()||[];if(t.length||t.outer&&t.outer.length||(t=[]),n.layer()){var i=n.layer().map();(e=null===e?i.gcs():void 0===e?i.ingcs():e)!==i.gcs()&&(t=n._convertCoordinates(i.gcs(),e,t))}return t},this.modified=function(){return n.layer()&&n.layer().modified(),n},this.draw=function(){return n.layer()&&(n.layer()._update(),n.layer().draw()),n},this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(e){return[]},this._geojsonGeometryType=function(){return""},this.geojson=function(t,i){var o,a,u,c=n._geojsonCoordinates(t),d=n._geojsonGeometryType(),f=n._geojsonStyles(),p=n.options("style")||{},h=n.labelStyle()||{};if(c&&c.length&&d){var m={type:"Feature",geometry:{type:d,coordinates:c},properties:{annotationType:e,name:n.name(),annotationId:n.id()}};for(y&&(m.properties.label=y),b&&(m.properties.description=b),!1===n.options("showLabel")&&(m.properties.showLabel=n.options("showLabel")),o=0;o<f.length;o+=1)if(a=f[o],void 0!==(u=s.ensureFunction(p[a])())){var g=((n.constructor.defaults||{}).style||{})[a];a.toLowerCase().match(/color$/)&&(u=s.convertColorToHex(u,"needed"),g=void 0!==g?s.convertColorToHex(g,"needed"):g),u!==g&&(m.properties[a]=u)}for(o=0;o<l.usedStyles.length;o+=1)a=l.usedStyles[o],void 0!==(u=s.ensureFunction(h[a])())&&(a.toLowerCase().match(/color$/)&&(u=s.convertColorToHex(u,"needed")),m.properties["label"+a.charAt(0).toUpperCase()+a.slice(1)]=u);if(i){var v=n.layer().map();m.crs={type:"name",properties:{type:"proj4",name:t=null===t?v.gcs():void 0===t?v.ingcs():t}}}return m}},this._addEditHandles=function(e,t,i,o){var a,l=Object.assign({},f,n.editHandleStyle()),u=s.ensureFunction(l.handles)()||{},c=n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected?n._editHandle.handle:void 0;i=Object.assign({},i),Object.keys(u).forEach(function(e){!1===u[e]&&(i[e]=!1)}),e[3]||(e[3]={point:[]}),a=e[3].point,(t.outer?[t.outer].concat(t.inner||[]):[t]).forEach(function(e,t){e.forEach(function(n,s){!1!==i.vertex&&a.push(Object.assign({},n,{type:"vertex",index:s,vindex:t,style:l,editHandle:!0})),!1!==i.edge&&s!==e.length-1&&(n.x!==e[s+1].x||n.y!==e[s+1].y)&&a.push(Object.assign({x:(n.x+e[s+1].x)/2,y:(n.y+e[s+1].y)/2},{type:"edge",index:s,vindex:t,style:l,editHandle:!0})),!1===i.edge||o||s!==e.length-1||n.x===e[0].x&&n.y===e[0].y||a.push(Object.assign({x:(n.x+e[0].x)/2,y:(n.y+e[0].y)/2},{type:"edge",index:s,vindex:t,style:l,editHandle:!0}))})}),!1!==i.center&&a.push(Object.assign({},s.centerFromPerimeter(n._coordinates()),{type:"center",style:l,editHandle:!0})),!1!==i.rotate&&(a.push(Object.assign(n._rotateHandlePosition(l.rotateHandleOffset,l.rotateHandleRotation+(c&&"rotate"===c.type?n._editHandle.amountRotated:0)),{type:"rotate",style:l,editHandle:!0})),n._editHandle&&(!c||"rotate"!==c.type)&&(n._editHandle.amountRotated=0)),!1!==i.resize&&a.push(Object.assign(n._rotateHandlePosition(l.resizeHandleOffset,l.resizeHandleRotation),{type:"resize",style:l,editHandle:!0})),c&&a.forEach(function(e){e.type===c.type&&e.index===c.index&&e.vindex===c.vindex&&(e.selected=!0)})},this._coordinatesMapFunc=function(e,t){return e.outer?{outer:e.outer.map(t),inner:(e.inner||[]).map(function(e){return e.map(t)})}:e.map(t)},this._firstPointDifferent=function(e,t){return e=e.outer?e.outer:e,t=t.outer?t.outer:t,e[0].x!==t[0].x||e[0].y!==t[0].y},this._processEditActionCenter=function(e){var t=n._editHandle.startCoordinates,i={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},o=n._coordinates(),a=n._coordinatesMapFunc(t,function(e){return{x:e.x+i.x,y:e.y+i.y}});return!!n._firstPointDifferent(a,o)&&(n._coordinates(a),!0)},this._processEditActionRotate=function(e){var t=n._editHandle,i=t.startCoordinates,o={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},a=Math.atan2(t.rotatePosition.y-t.center.y,t.rotatePosition.x-t.center.x),s=Math.atan2(t.rotatePosition.y+o.y-t.center.y,t.rotatePosition.x+o.x-t.center.x)-a,l=n._coordinates(),u=n._coordinatesMapFunc(i,function(e){var n={x:e.x-t.center.x,y:e.y-t.center.y};return{x:n.x*Math.cos(s)-n.y*Math.sin(s)+t.center.x,y:n.x*Math.sin(s)+n.y*Math.cos(s)+t.center.y}});return!!n._firstPointDifferent(u,l)&&(n._coordinates(u),t.amountRotated=t.startAmountRotated+s,!0)},this._processEditActionResize=function(e){var t=n._editHandle,i=t.startCoordinates,o={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},a=n.layer().map(),s=a.gcsToDisplay(t.center,null),l=a.gcsToDisplay(t.resizePosition,null),u=a.gcsToDisplay({x:t.resizePosition.x+o.x,y:t.resizePosition.y+o.y},null),c=Math.pow(Math.pow(l.y-s.y,2)+Math.pow(l.x-s.x,2),.5)-t.handle.style.resizeHandleOffset,d=Math.pow(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2),.5)-t.handle.style.resizeHandleOffset,f=n._coordinates();if(d&&c){var p=d/c,h=n._coordinatesMapFunc(i,function(e){return{x:(e.x-t.center.x)*p+t.center.x,y:(e.y-t.center.y)*p+t.center.y}});if(n._firstPointDifferent(h,f))return n._coordinates(h),!0}return!1},this._processEditActionEdge=function(e){var t=n._editHandle,i=t.handle.index,o=t.handle.vindex,a=n._coordinates();return a.outer?(o?a.inner[o-1]:a.outer).splice(i+1,0,{x:t.handle.x,y:t.handle.y}):a.splice(i+1,0,{x:t.handle.x,y:t.handle.y}),t.handle.type="vertex",t.handle.index+=1,t.startCoordinates=n._copyOfCoordinates(a),n.modified(),!0},this._processEditActionVertex=function(e,t){var o,a,s=n._editHandle,l=s.handle.index,u=s.handle.vindex,c=s.startCoordinates,d=n._coordinates(),f=d.outer?u?d.inner[u-1]:d.outer:d,p=f.length,h=f[l],m={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},g=n.layer(),v=g.options("adjacentPointProximity");return c.outer&&(c=u?c.inner[u-1]:c.outer),f[l]={x:c[l].x+m.x,y:c[l].y+m.y},g.displayDistance(f[l],null,c[l],null)<=v||(g.displayDistance(f[l],null,f[(l+1)%f.length],null)<=v?o=(l+1)%f.length:g.displayDistance(f[l],null,f[(l+f.length-1)%f.length],null)<=v&&(o=(l+f.length-1)%f.length)),a=0===o&&l===f.length-1||o===f.length-1&&0===l,!1===t&&a&&(o=void 0),void 0!==o&&f.length>(t||n.options("style").closed?3:2)&&(f[l]={x:f[o].x,y:f[o].y},e.event===i.actionup&&(t&&a&&(n.options("style").closed=!0),f.splice(l,1))),(f.length!==p||f[l].x!==h.x||f[l].y!==h.y)&&(n._coordinates(d),!0)},this._convertCoordinates=function(e,t,i){var o=!i;return i=(i=i||n._coordinates()).outer?{outer:a.transformCoordinates(e,t,i.outer),inner:(i.inner||[]).map(function(n){return a.transformCoordinates(e,t,n)})}:a.transformCoordinates(e,t,i),o&&n._coordinates(i),i}};function h(e){var t=Array.isArray(e)?e:[e];return function(e,n,i,o,a,s){var l=e;if(i||(i=[{x:n.x,y:n.y},{x:e.x,y:n.y},{x:e.x,y:e.y},{x:n.x,y:e.y}]),o){var u,c,d,f=(s+1)%4,p=(s+2)%4,h=(s+3)%4,m=Math.pow(Math.pow(i[s].x-i[f].x,2)+Math.pow(i[s].y-i[f].y,2),.5),g=Math.pow(Math.pow(i[s].x-i[h].x,2)+Math.pow(i[s].y-i[h].y,2),.5),v=Math.abs(m*g);t.forEach(function(e){if(e.width?(t=e.width,n=e.height):n=(t=Math.pow(v*e,.5))/e,t!==n&&!(s%2)){var t,n,i=[n,t];t=i[0],n=i[1]}var o=Math.pow(t-g,2)+Math.pow(n-m,2);(void 0===u||o<u)&&(u=o,c={w:t,h:n})});var y=a[f],b={x:-c.w*Math.cos(y),y:-c.w*Math.sin(y)},x=a[s],w={x:-c.h*Math.cos(x),y:-c.h*Math.sin(x)};switch(o){case"vertex":i[s].x=i[p].x+b.x+w.x,i[s].y=i[p].y+b.y+w.y,i[f].x=i[p].x+b.x,i[f].y=i[p].y+b.y,i[h].x=i[p].x+w.x,i[h].y=i[p].y+w.y;break;case"edge":d={x:(i[p].x+i[h].x)*.5,y:(i[p].y+i[h].y)*.5},i[p].x=d.x+w.x/2,i[p].y=d.y+w.y/2,i[s].x=d.x+b.x-w.x/2,i[s].y=d.y+b.y-w.y/2,i[f].x=d.x+b.x+w.x/2,i[f].y=d.y+b.y+w.y/2,i[h].x=d.x-w.x/2,i[h].y=d.y-w.y/2}}else{var A=Math.abs((e.x-n.x)*(e.y-n.y));t.forEach(function(t){t.width?(i=t.width,o=t.height):o=(i=Math.pow(A*t,.5))/t;var i,o,a={x:n.x+Math.sign(e.x-n.x)*i,y:n.y+Math.sign(e.y-n.y)*o},s=Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2);(void 0===u||s<u)&&(u=s,l=a)}),i[0].y=i[1].y=n.y,i[0].x=i[3].x=n.x,i[1].x=i[2].x=l.x,i[2].y=i[3].y=l.y}return{corners:i,origin:n,pos:l}}}p.defaults={showLabel:!0},e.exports={state:c,actionOwner:d,annotation:p,_editHandleFeatureLevel:3,defaultEditHandleStyle:f,constrainAspectRatio:h,annotationActionOwner:d,continuousVerticesActions:function(e,t,n,i,a){return(n||(n=e.state()),n===c.create)?[{action:o["annotation_"+i],name:i+" create",owner:d,input:"left"},{action:o["annotation_"+i],name:i+" create",owner:d,input:"pan"}]:t.apply(e,a)},continuousVerticesProcessAction:function(e,t,n){var a=e.layer();if(e.state()===c.create&&a&&t.state.action===o["annotation_"+n]){var s=a.options("continuousPointProximity"),l=a.options("continuousPointCollinearity"),u=a.options("continuousCloseProximity");if(s||0===s){var d=e.options("vertices"),f=!1;if(!d.length)return d.push(t.mouse.mapgcs),d.push(t.mouse.mapgcs),!0;var p=a.displayDistance(d[d.length-2],null,t.mouse.map,"display");if(p&&p>s){if(d.length>=(e._lastClickVertexCount||1)+3){var h=a.displayDistance(d[d.length-3],null,d[d.length-2],null),m=a.displayDistance(d[d.length-3],null,t.mouse.map,"display");h&&m&&(m*m-h*h-p*p)/(2*h*p)>Math.cos(l)&&d.pop()}d[d.length-1]=t.mouse.mapgcs,d.push(t.mouse.mapgcs),f=!0}return(u||0===u)&&t.event===i.actionup&&(!0===u||a.displayDistance(d[0],null,t.mouse.map,"display")<=s)?d.length<3+ +("polygon"===n)?"remove":(d.pop(),e.state(c.done),"done"):f}}}}},8817(e,t,n){e.exports=function(e,t){var n=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2];return Math.abs(n-s)<=i*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=i*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-u)<=i*Math.max(1,Math.abs(a),Math.abs(u))};var i=n(2864)},8825(e){e.exports=function(e,t){if(e===t){var n=t[1],i=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}},8849(e,t,n){var i=n(4692),o=n(8899),a=n(6301),s=n(5933).registerWidget;n(8370);var l=function(e){"use strict";if(!(this instanceof l))return new l(e);a.call(this,e);var t=n(4128),o=n(5204),s=n(4341),u=n(2184).d3,c=this,d=this._exit,f=Object.assign({},{scale:1,maxWidth:200,maxHeight:"left"===e.orientation||"right"===e.orientation?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function(e,t,n){return"+proj=longlat +axis=enu"===n?Math.sqrt(s.distance2dSquared(e,t)):o.sphericalDistance(e,t,n)}},e);this._init=function(){return c._createCanvas(),c._appendCanvasToParent(),c.reposition(),u.select(c.canvas()).attr("width",f.maxWidth).attr("height",f.maxHeight),c.geoOn(t.pan,c._update),c._render(),c},this._exit=function(){c.geoOff(t.pan,c._update),d()},this._vertical=function(){return"left"===f.orientation||"right"===f.orientation},this._scaleValue=function(e,t,n){n=l.unitsTable[n]||n||l.unitsTable[f.units]||f.units;var i,o,a,s=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}],u=n[0];return n.forEach(function(t){e>=t.scale*(t.minimum||1)&&(u=t)}),o=Math.floor(Math.log(e/u.scale)/Math.log(u.basis||10)),(s=u.multiples||s).forEach(function(t){var n=u.scale*t.multiple*Math.pow(10,o);n<=e&&(i=t,a=n)}),{html:(i.multiple*Math.pow(10,o)).toFixed(Math.max(0,-o+i.digits-1))+" "+u.unit,value:a,pixels:a/e*t,power:o,multiple:i,unitRecord:u,originalValue:e,originalPixels:t}},this._render=function(){var e,t,n,o,a,s,l=u.select(c.canvas()),d=c.layer().map(),p=f.maxWidth,h=f.maxHeight,m=f.strokeWidth,g=.5*m,v=f.tickLength,y=c._vertical();if(e=(y?f.maxHeight:f.maxWidth)-m,n={x:(t={x:(t=i(l.node()).offset()).left+("left"===f.orientation?p-g:g),y:t.top+("top"===f.orientation?h-g:g)}).x+(y?0:e),y:t.y+(y?e:0)},(o=f.distance(d.displayToGcs(t,null),d.displayToGcs(n,null),d.gcs())*f.scale)<=0||!isFinite(o))return void console.warn("The distance calculated for the scale is invalid: "+o);switch(a=c._scaleValue(o,e),y?h=a.pixels+m:p=a.pixels+m,l.attr("width",p).attr("height",h),l.select("polyline").empty()&&l.append("polyline").classed("geojs-scale-widget-bar",!0).attr("fill","none").attr("stroke-width",m),l.select("text").empty()&&l.append("text").classed("geojs-scale-widget-text",!0),f.orientation){case"bottom":s=[[g,v],[g,g],[p-g,g],[p-g,v]],l.select("text").attr("x",p/2).attr("y",2*m).attr("text-anchor","middle").attr("dominant-baseline","hanging");break;case"top":s=[[g,h-v],[g,h-g],[p-g,h-g],[p-g,h-v]],l.select("text").attr("x",p/2).attr("y",h-2*m).attr("text-anchor","middle").attr("dominant-baseline","alphabetic");break;case"left":s=[[p-v,g],[p-g,g],[p-g,h-g],[p-v,h-g]],l.select("text").attr("x",p-2*m).attr("y",h/2).attr("text-anchor","end").attr("dominant-baseline","middle");break;case"right":s=[[v,g],[g,g],[g,h-g],[v,h-g]],l.select("text").attr("x",2*m).attr("y",h/2).attr("text-anchor","start").attr("dominant-baseline","middle")}l.select("polyline").attr("points",s.map(function(e){return e.join(",")}).join(" ")),l.select("text").html(a.html)},this._update=function(){c._render()},this.options=function(e,t){if(void 0===e){var n=Object.assign({},f);return n.position=c.position(void 0,!0),n}return"string"==typeof e&&void 0===t?"position"===e?c.position(void 0,!0):f[e]:(void 0===t?f=s.deepMerge(f,e):f[e]=t,(e.position||"position"===e)&&c.position(e.position||t),c._render(),c)}};o(l,a),l.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"m",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}],decmiles:[{unit:"mi",scale:1609.344}]},l.areaUnitsTable={si:[{unit:"nm\xb2",scale:1e-18},{unit:"m\xb2",scale:1e-12},{unit:"mm\xb2",scale:1e-6},{unit:"m\xb2",scale:1},{unit:"km\xb2",scale:1e6}],hectares:[{unit:"ha",scale:1e4}],decmiles:[{unit:"mi\xb2",scale:2589988.110336}],miles:[{unit:"in\xb2",scale:64516e-8},{unit:"ft\xb2",scale:.09290304},{unit:"mi\xb2",scale:2589988.110336}],acres:[{unit:"pl",scale:25.29285264},{unit:"rd",scale:1011.7141056},{unit:"ac",scale:4046.8564224}]},l.formatUnit=function(e,t,n,i){if(null!=e){if(!Array.isArray(t)){if(!(n=n||l.unitsTable)||!n[t||"si"])return;t=n[t||"si"]}for(o=0;o<t.length-1&&!(e<t[o+1].scale);o+=1);if(e/=(t=t[o]).scale,!((i=Math.max(0,-Math.ceil(Math.log10(e))+(void 0===i||i<0?3:i)))>10)){var o,a=e.toFixed(i);if(i){for(;"0"===a.substr(a.length-1);)a=a.substr(0,a.length-1);"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1))}return a+" "+t.unit}}},s("dom","scale",l),e.exports=l},8860(e){e.exports=function(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+c*i,e[1]=s*o+d*i,e[2]=l*o+f*i,e[3]=u*o+p*i,e[4]=c*o-a*i,e[5]=d*o-s*i,e[6]=f*o-l*i,e[7]=p*o-u*i,e}},8874(e,t,n){var i=n(6500),o=n(6067);o=o.__esModule?o.default:o;var a={maxCount:1e3,count:0,memo:{}};function s(e,t){return a.count+=1,a.count>=a.maxCount&&(a.memo={},a.count=0),a.memo[e]=t,t}var l={convertColor:function(e){if(null==e||void 0!==e.r&&void 0!==e.g&&void 0!==e.b)return e;if(void 0!==a.memo[e])return a.memo[e];var t,n=e;if("string"==typeof e){var i=e.toLowerCase();if(o.hasOwnProperty(i))e={r:o[i][0]/255,g:o[i][1]/255,b:o[i][2]/255};else if("#"===e.charAt(0))4===e.length||5===e.length?(5===e.length&&(t=parseInt(e.slice(4),16)/15),e=(3840&(e=parseInt(e.slice(1,4),16)))*4352+(240&e)*272+(15&e)*17):(7===e.length||9===e.length)&&(9===e.length&&(t=parseInt(e.slice(7),16)/255),e=parseInt(e.slice(1,7),16));else if("transparent"===i)t=e=0;else if(i.indexOf("(")>=0)for(var u=0;u<l.cssColorConversions.length;u+=1){var c=l.cssColorConversions[u].regex.exec(i);if(c)return s(n,e=l.cssColorConversions[u].process(i,c))}}return isFinite(e)&&(e={r:((0xff0000&e)>>16)/255,g:((65280&e)>>8)/255,b:(255&e)/255}),void 0!==t&&e&&void 0!==e.r&&(e.a=t),s(n,e)},convertColorAndOpacity:function(e,t,n){return(e=l.convertColor(e))&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b||(e=l.convertColor(n||{r:0,g:0,b:0})),e&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b||(e={r:0,g:0,b:0}),e={r:isFinite(e.r)&&e.r>=0?e.r<=1?+e.r:1:0,g:isFinite(e.g)&&e.g>=0?e.g<=1?+e.g:1:0,b:isFinite(e.b)&&e.b>=0?e.b<=1?+e.b:1:0,a:i.isNonNullFinite(e.a)&&e.a>=0&&e.a<1?+e.a:1},i.isNonNullFinite(t)&&t<1&&(e.a=t<=0?0:e.a*t),e},convertColorToHex:function(e,t){var n,i=l.convertColor(e);return n=i.r||i.g||i.b?"#"+(0x1000000+(Math.round(255*i.r)<<16)+(Math.round(255*i.g)<<8)+Math.round(255*i.b)).toString(16).slice(1):"#000000",void 0!==i.a&&t&&(i.a<1||"needed"!==t)&&(n+=(256+Math.round(255*i.a)).toString(16).slice(1)),n},convertColorToRGBA:function(e){var t=l.convertColor(e);return t||(t={r:0,g:0,b:0}),(!i.isNonNullFinite(t.a)||t.a>1)&&(t.a=1),"rgba("+Math.round(255*t.r)+", "+Math.round(255*t.g)+", "+Math.round(255*t.b)+", "+ +(+t.a).toFixed(5)+")"},cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?"};l.cssColorConversions=[{name:"rgb",regex:RegExp("^\\s*rgba?\\(\\s*("+l.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+l.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+l.cssNumberRegex+")\\s*(%?)\\s*([/,]?\\s*("+l.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(e,t){return e={r:Math.min(1,Math.max(0,t[1]/(t[2]?100:255))),g:Math.min(1,Math.max(0,t[3]/(t[4]?100:255))),b:Math.min(1,Math.max(0,t[5]/(t[6]?100:255)))},t[7]&&(e.a=Math.min(1,Math.max(0,t[8]/(t[9]?100:1)))),e}},{name:"hsl",regex:RegExp("^\\s*hsla?\\(\\s*("+l.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*,?\\s*("+l.cssNumberRegex+")\\s*%\\s*,?\\s*("+l.cssNumberRegex+")\\s*%\\s*([/,]?\\s*("+l.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(e,t){var n=function(e,t,n){return 6*(n-=Math.floor(n))<1?e+(t-e)*n*6:6*n<3?t:6*n<4?e+(t-e)*(2/3-n)*6:e},i=t[1]/(l.cssAngleUnitsBase[t[2]]||360),o=Math.min(1,Math.max(0,t[3]/100)),a=Math.min(1,Math.max(0,t[4]/100)),s=a<=.5?a*(o+1):a+o-a*o,u=2*a-s;return e={r:n(u,s,i+1/3),g:n(u,s,i),b:n(u,s,i-1/3)},t[5]&&(e.a=Math.min(1,Math.max(0,t[6]/(t[7]?100:1)))),e}}],e.exports=l},8876(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>p,forward:()=>c,init:()=>u,inverse:()=>d,names:()=>f});var i=n(384);function o(e,t,n){if(Math.abs(t)>i.sK)return NaN;if(t===i.sK)return 1/0;if(t===-1*i.sK)return-1/0;var o=e*n;return Math.log(Math.tan((i.sK+t)/2))+e*Math.log((1-o)/(1+o))/2}var a=n(6622),s=n(8089);function l(e,t){return 2*Math.atan(e*Math.exp(t))-i.sK}function u(){var e=this.b/this.a;this.e=Math.sqrt(1-e*e),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var t=Math.sin(this.lat0),n=Math.asin(t/this.rs),i=Math.sin(n);this.cp=o(0,n,i)-this.rs*o(this.e,this.lat0,t),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*t*t),this.xs=this.x0,this.ys=this.y0-this.n2*n,this.title||(this.title="Gauss Schreiber transverse mercator")}function c(e){var t=e.x,n=e.y,i=this.rs*(t-this.lc),l=this.cp+this.rs*o(this.e,n,Math.sin(n)),u=Math.asin(Math.sin(i)/(0,s.A)(l)),c=o(0,u,Math.sin(u));return e.x=this.xs+this.n2*c,e.y=this.ys+this.n2*Math.atan((0,a.A)(l)/Math.cos(i)),e}function d(e){var t=e.x,n=e.y,i=Math.atan((0,a.A)((t-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2)),u=Math.asin(Math.sin((n-this.ys)/this.n2)/(0,s.A)((t-this.xs)/this.n2)),c=o(0,u,Math.sin(u));return e.x=this.lc+i/this.rs,e.y=function(e,t){var n=l(1,t),i=0,o=0;do o=e*Math.sin(i=n),n=l(Math.exp(e*Math.log((1+o)/(1-o))/2),t);while(Math.abs(n-i)>1e-12);return n}(this.e,(c-this.cp)/this.rs),e}var f=["gstmerg","gstmerc"];let p={init:u,forward:c,inverse:d,names:f}},8899(e){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},8903(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>u,forward:()=>a,init:()=>o,inverse:()=>s,names:()=>l});var i=n(4181);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0}function a(e){var t=e.x,n=e.y,o=(0,i.A)(t-this.long0,this.over),a=this.x0+this.a*o*Math.cos(this.lat0),s=this.y0+this.a*n;return this.t1=a,this.t2=Math.cos(this.lat0),e.x=a,e.y=s,e}function s(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/this.a,n=(0,i.A)(this.long0+e.x/(this.a*Math.cos(this.lat0)),this.over);e.x=n,e.y=t}var l=["equi"];let u={init:o,forward:a,inverse:s,names:l}},8916(e){e.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},8948(e,t,n){!function(e){"use strict";function t(t,n,o,a){if(o&&o.call){var s=o;o=null}else var s=i(t,o,"rangeFinder");"number"==typeof n&&(n=e.Pos(n,0));var l=i(t,o,"minFoldSize");function u(e){var i=s(t,n);if(!i||i.to.line-i.from.line<l)return null;if("fold"===a)return i;for(var o=t.findMarksAt(i.from),u=0;u<o.length;++u)if(o[u].__isFold){if(!e)return null;i.cleared=!0,o[u].clear()}return i}var c=u(!0);if(i(t,o,"scanUp"))for(;!c&&n.line>t.firstLine();)n=e.Pos(n.line-1,0),c=u(!1);if(c&&!c.cleared&&"unfold"!==a){var d=function(e,t,n){var o=i(e,t,"widget");if("function"==typeof o&&(o=o(n.from,n.to)),"string"==typeof o){var a=document.createTextNode(o);(o=document.createElement("span")).appendChild(a),o.className="CodeMirror-foldmarker"}else o&&(o=o.cloneNode(!0));return o}(t,o,c);e.on(d,"mousedown",function(t){f.clear(),e.e_preventDefault(t)});var f=t.markText(c.from,c.to,{replacedWith:d,clearOnEnter:i(t,o,"clearOnEnter"),__isFold:!0});f.on("clear",function(n,i){e.signal(t,"unfold",t,n,i)}),e.signal(t,"fold",t,c.from,c.to)}}e.newFoldFunction=function(e,n){return function(i,o){t(i,o,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,i){t(this,e,n,i)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),{scanUp:!1},"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();n<=i;n++)t.foldCode(e.Pos(n,0),{scanUp:!1},"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();n<=i;n++)t.foldCode(e.Pos(n,0),{scanUp:!1},"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var i=0;i<e.length;++i){var o=e[i](t,n);if(o)return o}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),i=0;i<n.length;i++){var o=n[i](e,t);if(o)return o}});var n={rangeFinder:e.fold.auto,widget:"",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function i(e,t,i){if(t&&void 0!==t[i])return t[i];var o=e.options.foldOptions;return o&&void 0!==o[i]?o[i]:n[i]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return i(this,e,t)})}(n(5885))},8974(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}},9059(e){e.exports=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}},9084(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(7150),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e);var t=n(6194),i=n(7463);i=i.__esModule?i.default:i;var o=n(5204),l=n(4341),u=n(4727),c=n(7252),d=n(3020),f=n(2170),p=n(3457),h=n(2499);u.call(this);var m,g,v,y,b,x,w=this,A=this._exit,C=null,S=null,_=this._init,T=this._update;return this._init=function(e){w._hasPatterns=!0===e;var n,i,o=t.shaderProgram(),a=t.vertexAttribute("pos"),s=t.vertexAttribute("fillColor"),l=t.vertexAttribute("fillOpacity"),u=new t.projectionUniform("projectionMatrix"),c=(n=new t.shader(t.GL.VERTEX_SHADER),w._hasPatterns?n.setShaderSource(h):n.setShaderSource(p),n),m=(i=new t.shader(t.GL.FRAGMENT_SHADER),w._hasPatterns?i.setShaderSource(f):i.setShaderSource(d),i),g=t.blend(),b=t.geometryData(),x=t.sourceDataP3fv({name:"pos"}),A=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),T=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),O=t.triangles(),P=t.material();if(y=new t.modelViewOriginUniform("modelViewMatrix"),o.addVertexAttribute(a,t.vertexAttributeKeys.Position),o.addVertexAttribute(s,t.vertexAttributeKeysIndexed.Two),o.addVertexAttribute(l,t.vertexAttributeKeysIndexed.Three),w._hasPatterns){var M=t.vertexAttribute("patternFillColor"),E=t.vertexAttribute("patternStrokeColor"),D=t.vertexAttribute("patternSymbolProps"),I=t.vertexAttribute("patternPositionProps");o.addVertexAttribute(M,t.vertexAttributeKeysIndexed.Four),o.addVertexAttribute(E,t.vertexAttributeKeysIndexed.Five),o.addVertexAttribute(D,t.vertexAttributeKeysIndexed.Six),o.addVertexAttribute(I,t.vertexAttributeKeysIndexed.Seven)}if(o.addUniform(y),o.addUniform(u),o.addShader(m),o.addShader(c),P.addAttribute(o),P.addAttribute(g),S=t.mapper(),(C=t.actor()).setMaterial(P),C.setMapper(S),b.addSource(x),b.addSource(A),b.addSource(T),w._hasPatterns){var k={pixelWidth:t.GL.FLOAT,aspect:t.GL.FLOAT,zoom:t.GL.FLOAT,rotationUniform:t.GL.FLOAT};v={},Object.keys(k).forEach(function(e){v[e]=new t.uniform(k[e],e),o.addUniform(v[e])});var N=t.sourceDataAnyfv(4,t.vertexAttributeKeysIndexed.Four,{name:"patternFillColor"}),R=t.sourceDataAnyfv(4,t.vertexAttributeKeysIndexed.Five,{name:"patternStrokeColor"}),B=t.sourceDataAnyfv(4,t.vertexAttributeKeysIndexed.Six,{name:"patternSymbolProps"}),L=t.sourceDataAnyfv(4,t.vertexAttributeKeysIndexed.Seven,{name:"patternPositionProps"});b.addSource(N),b.addSource(R),b.addSource(B),b.addSource(L)}b.addPrimitive(O),b.computeBounds=function(){b.setBounds(0,0,0,0,0,0)},S.setGeometryData(b),!0!==e&&_.call(w,e)},this.actors=function(){return[C]},this._build=function(){!function(e){var t,n,a,s,u,d,f,p,h,v,b,x,A,_,T,O,P,M,E,D,I,k,N,R,B,L,F,V,j,G,U,z,W,H,q,K,X,Y,Z,J=[],Q=w.gcs(),$=w.layer().map().gcs(),ee=0;for(u=w.style.get("fillColor"),d=l.isFunction(w.style("fillColor"))?void 0:u(),p=w.style.get("fillOpacity"),h=l.isFunction(w.style("fillOpacity"))?void 0:p(),v=w.style.get("fill"),b=l.isFunction(w.style("fill"))?void 0:v(),E=w.style.get("uniformPolygon"),D=l.isFunction(w.style("uniformPolygon"))?void 0:E(),x=w.style.get("pattern"),null!==(A=l.isFunction(w.style("pattern"))?void 0:x()||null)&&!0!==w._hasPatterns&&(w.renderer().contextRenderer().removeActor(C),C=null,w._init(!0)),B=S.geometryData(),e?(J=m.items,ee=m.numPts):(n=(n=w.style.get("position"))===l.identityFunction?null:n,a=(a=w.style.get("polygon"))===l.identityFunction?null:a,w.data().forEach(function(e,t){var s,l,u,c;if((s=a?a(e,t):e)&&!((l=s.outer||(Array.isArray(s)?s:[])).length<3)){for(u=Array(3*l.length),z=G=0;z<l.length;z+=1,G+=3)c=n?n(l[z],z,e,t):l[z],u[G]=c.x,u[G+1]=c.y,u[G+2]=0;u={vertices:u,dimensions:3,holes:[]},Z=l,s.inner&&s.inner.forEach(function(i){if(!(i.length<3))for(Z=Z.concat(i),u.holes.push(G/3),z=0;z<i.length;z+=1,G+=3)c=n?n(i[z],z,e,t):i[z],u.vertices[G]=c.x,u.vertices[G+1]=c.y,u.vertices[G+2]=0}),u.vertices=o.transformCoordinates(Q,$,u.vertices,u.dimensions),(K={triangles:i(u.vertices,u.holes,u.dimensions),vertices:u.vertices,original:Z,item:e,itemIndex:t}).triangles.length&&(J.push(K),ee+=K.triangles.length)}}),t=l.getGeomBuffer(B,"pos",3*ee),(k=B.primitive(0).indices())instanceof Uint16Array&&k.length===ee||(k=new Uint16Array(ee),B.primitive(0).setIndices(k)),m={items:J,numPts:ee},g=new Float32Array(w.style.get("origin")(J)),y.setOrigin(g)),s=l.getGeomBuffer(B,"fillColor",3*ee),f=l.getGeomBuffer(B,"fillOpacity",ee),j=G=0,L=d,V=b,w._hasPatterns&&(T=l.getGeomBuffer(B,"patternFillColor",4*ee),O=l.getGeomBuffer(B,"patternStrokeColor",4*ee),P=l.getGeomBuffer(B,"patternSymbolProps",4*ee),M=l.getGeomBuffer(B,"patternPositionProps",4*ee)),H=0;H<J.length;H+=1){if(q=(R=(N=J[H]).triangles).length,U=N.vertices,X=N.item,Y=N.itemIndex,Z=N.original,I=void 0===D?E(X,Y):D,F=h,I&&(void 0===d&&(L=u(U[0],0,X,Y)),void 0===h&&(F=p(U[0],0,X,Y))),void 0===b&&(V=v(X,Y)),V||(F=0),w._hasPatterns&&(void 0===_&&A||void 0===A)&&(_=function(e,t,n,i,o){if(!e&&void 0===t)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var a,s,u=Array(16);if(void 0===e&&(e=t(n,i)),!e)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];void 0===e.fillColor?(a=l.convertColor(w.style.get("strokeColor")(o,0,n,i))).a=w.style.get("strokeOpacity")(o,0,n,i):a=l.convertColor(e.fillColor),u[0]=a.r,u[1]=a.g,u[2]=a.b,u[3]=a.a,void 0===e.strokeColor?(s=l.convertColor(w.style.get("fillColor")(o,0,n,i))).a=w.style.get("fillOpacity")(o,0,n,i):s=l.convertColor(e.strokeColor),u[4]=s.r,u[5]=s.g,u[6]=s.b,u[7]=s.a,u[8]=void 0===e.strokeWidth?1.25:e.strokeWidth,u[9]=void 0===e.radius?6.25:e.radius;var d=void 0===e.scaleWithZoom?c.scaleMode.none:e.scaleWithZoom;d=c.scaleMode[d]||d;var f=void 0===e.strokeOffset||e.strokeOffset<0?-1:+(e.strokeOffset>0);return u[10]=d+4*!e.rotateWithMap+((e.radiusIncludeStroke?f:1)+1)*16+64*(e.symbol||0),e.symbol&&e.symbolValue&&e.symbol>=c.symbols.arrow&&e.symbol<c.symbols.arrow+c.symbols.arrowMax?u[11]=l.packFloats(e.symbolValue||0):u[11]=e.symbolValue||0,u[12]=e.rotation||0,u[13]=void 0===e.spacing?20:e.spacing,u[14]=void 0===e.origin?0:e.origin[0],u[15]=void 0===e.origin?0:e.origin[1],u}(A,x,X,Y,U[0])),I&&e&&N.uniform&&N.color&&L.r===N.color.r&&L.g===N.color.g&&L.b===N.color.b&&F===N.opacity){j+=q,G+=3*q;continue}for(z=0;z<q;z+=1,j+=1,G+=3)e&&I?(s[G]=L.r,s[G+1]=L.g,s[G+2]=L.b):(W=3*R[z],e||(t[G]=U[W]-g[0],t[G+1]=U[W+1]-g[1],t[G+2]=U[W+2]-g[2],k[j]=z),I||void 0!==d||(L=u(Z[W],W,X,Y)),s[G]=L.r,s[G+1]=L.g,s[G+2]=L.b,!I&&V&&void 0===h&&(F=p(Z[W],W,X,Y))),f[j]=F,w._hasPatterns&&(T[4*j]=_[0],T[4*j+1]=_[1],T[4*j+2]=_[2],T[4*j+3]=_[3],O[4*j]=_[4],O[4*j+1]=_[5],O[4*j+2]=_[6],O[4*j+3]=_[7],P[4*j]=_[8],P[4*j+1]=_[9],P[4*j+2]=_[10],P[4*j+3]=_[11],M[4*j]=_[12],M[4*j+1]=_[13],M[4*j+2]=_[14],M[4*j+3]=_[15]);(I||N.uniform)&&(N.uniform=I,N.color=L,N.opacity=F)}e?(S.updateSourceBuffer("fillOpacity"),S.updateSourceBuffer("fillColor"),w._hasPatterns&&(S.updateSourceBuffer("patternFillColor"),S.updateSourceBuffer("patternStrokeColor"),S.updateSourceBuffer("patternSymbolProps"),S.updateSourceBuffer("patternPositionProps"))):(S.modified(),B.boundsDirty(!0),S.boundsDirtyTimestamp().modified())}(!!(w.dataTime().timestamp()<w.buildTime().timestamp()&&m)),w.renderer().contextRenderer().hasActor(C)||(w.renderer().contextRenderer().addActor(C),b=!0),w.buildTime().modified()},this._update=function(e){if(w.ready){if(e&&e.mayDelay&&b){x=w.layer().map().scheduleAnimationFrame(w._update);return}x&&(w.layer().map().scheduleAnimationFrame(w._update,"remove"),x=null),T.call(w),(w.dataTime().timestamp()>=w.buildTime().timestamp()||w.updateTime().timestamp()<=w.timestamp())&&w._build(),w._hasPatterns&&(v.pixelWidth.set(2/w.renderer().width()),v.aspect.set(w.renderer().width()/w.renderer().height()),v.zoom.set(w.renderer().map().zoom()),v.rotationUniform.set(w.renderer().map().rotation())),C.setVisible(w.visible()),C.material().setBinNumber(w.bin()),w.updateTime().modified()}},this._exit=function(){x&&w.layer()&&(w.layer().map().scheduleAnimationFrame(w._update,"remove"),x=null),w.renderer().contextRenderer().removeActor(C),C=null,v={},A()},this._init(e),this};i(s,a),o("webgl","polygon",s),e.exports=s},9121(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s,init:()=>o,names:()=>a});var i=n(2736);function o(){if(this.flip_axis=+("x"===this.sweep),this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw Error();if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=1/e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}var a=["Geostationary Satellite View","Geostationary_Satellite","geos"];let s={init:o,forward:function(e){var t,n,o,a,s=e.x,l=e.y;if(s-=this.long0,"ellipse"===this.shape){l=Math.atan(this.radius_p2*Math.tan(l));var u=this.radius_p/(0,i.A)(this.radius_p*Math.cos(l),Math.sin(l));if(n=u*Math.cos(s)*Math.cos(l),o=u*Math.sin(s)*Math.cos(l),a=u*Math.sin(l),(this.radius_g-n)*n-o*o-a*a*this.radius_p_inv2<0)return e.x=NaN,e.y=NaN,e;t=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/(0,i.A)(a,t)),e.y=this.radius_g_1*Math.atan(a/t)):(e.x=this.radius_g_1*Math.atan(o/t),e.y=this.radius_g_1*Math.atan(a/(0,i.A)(o,t)))}else"sphere"===this.shape&&(n=Math.cos(s)*(t=Math.cos(l)),o=Math.sin(s)*t,a=Math.sin(l),t=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/(0,i.A)(a,t)),e.y=this.radius_g_1*Math.atan(a/t)):(e.x=this.radius_g_1*Math.atan(o/t),e.y=this.radius_g_1*Math.atan(a/(0,i.A)(o,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,n,o,a,s=-1,l=0,u=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(u=Math.tan(e.y/this.radius_g_1),l=Math.tan(e.x/this.radius_g_1)*(0,i.A)(1,u)):(l=Math.tan(e.x/this.radius_g_1),u=Math.tan(e.y/this.radius_g_1)*(0,i.A)(1,l));var c=u/this.radius_p;if(t=l*l+c*c+s*s,(o=(n=2*this.radius_g*s)*n-4*t*this.C)<0)return e.x=NaN,e.y=NaN,e;a=(-n-Math.sqrt(o))/(2*t),s=this.radius_g+a*s,l*=a,u*=a,e.x=Math.atan2(l,s),e.y=Math.atan(u*Math.cos(e.x)/s),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(u=Math.tan(e.y/this.radius_g_1),l=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+u*u)):(l=Math.tan(e.x/this.radius_g_1),u=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+l*l)),t=l*l+u*u+s*s,(o=(n=2*this.radius_g*s)*n-4*t*this.C)<0)return e.x=NaN,e.y=NaN,e;a=(-n-Math.sqrt(o))/(2*t),s=this.radius_g+a*s,l*=a,u*=a,e.x=Math.atan2(l,s),e.y=Math.atan(u*Math.cos(e.x)/s)}return e.x=e.x+this.long0,e},names:a}},9130(e,t,n){"use strict";n.d(t,{A:()=>u});var i=n(4334),o=n(5350);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=this;if(2==arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[e]=(0,i.A)(arguments[1]):s[e]=(0,o.A)(arguments[1]):!n||"object"!==a(n)||"projName"in n?(s[e]=n,n||delete s[e]):s[e]=(0,o.A)(arguments[1])}else if(1==arguments.length){if(Array.isArray(e))return e.map(function(e){return Array.isArray(e)?s.apply(t,e):s(e)});if("string"==typeof e){if(e in s)return s[e]}else"EPSG"in e?s["EPSG:"+e.EPSG]=e:"ESRI"in e?s["ESRI:"+e.ESRI]=e:"IAU2000"in e?s["IAU2000:"+e.IAU2000]=e:console.log(e);return}}s("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),s("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),s("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var l=1;l<=60;++l)s("EPSG:"+(32600+l),"+proj=utm +zone="+l+" +datum=WGS84 +units=m"),s("EPSG:"+(32700+l),"+proj=utm +zone="+l+" +south +datum=WGS84 +units=m");s("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),s("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),s.WGS84=s["EPSG:4326"],s["EPSG:3785"]=s["EPSG:3857"],s.GOOGLE=s["EPSG:3857"],s["EPSG:900913"]=s["EPSG:3857"],s["EPSG:102113"]=s["EPSG:3857"];let u=s},9136(e){e.exports=function(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=n[0],h=n[1];return e[0]=i,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=u,e[6]=p*i+h*s+c,e[7]=p*o+h*l+d,e[8]=p*a+h*u+f,e}},9137(e){e.exports=function(e,t,n,i){var o=n[0],a=n[1],s=t[0]-o,l=t[1]-a,u=Math.sin(i),c=Math.cos(i);return e[0]=o+s*c-l*u,e[1]=a+s*u+l*c,e[2]=t[2],e}},9166(e){self,e.exports=function(){var e={9016:function(e,t,n){"use strict";var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".CornerAnnotation-module-container_MtsnD {\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  flex-direction: column;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.CornerAnnotation-module-row_fchHS {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n}\n\n.CornerAnnotation-module-topRow__S0LS {\n  align-items: flex-start;\n}\n\n.CornerAnnotation-module-middleRow_LXC7g {\n  align-items: center;\n}\n\n.CornerAnnotation-module-bottomRow_NFTxW {\n  align-items: flex-end;\n}\n\n.CornerAnnotation-module-item_wigvd {\n  flex: 1;\n  padding: 5px;\n}\n\n.CornerAnnotation-module-east_mBb95 {\n  text-align: right;\n}\n\n.CornerAnnotation-module-west_QjOwC {\n  text-align: left;\n}\n\n.CornerAnnotation-module-north_rXoQl {\n  text-align: center;\n}\n\n.CornerAnnotation-module-south_wRnpI {\n  text-align: center;\n}\n\n.CornerAnnotation-module-northEast_m6eKm {\n}\n\n.CornerAnnotation-module-northWest_fpQfn {\n}\n\n.CornerAnnotation-module-southEast_NknwO {\n}\n\n.CornerAnnotation-module-southWest_s6fe8 {\n}\n\n","",{version:3,sources:["webpack://./Sources/Interaction/UI/CornerAnnotation/CornerAnnotation.module.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,oBAAoB;EACpB,8BAA8B;EAC9B,sBAAsB;EACtB,yBAAiB;KAAjB,sBAAiB;UAAjB,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;AACd;;AAEA;EACE,OAAO;EACP,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;AACrB;;AAEA;EAEE,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;AACrB;;AAEA;EAEE,qBAAqB;AACvB;;AAEA;EACE,OAAO;EACP,YAAY;AACd;;AAEA;EAEE,iBAAiB;AACnB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EAEE,kBAAkB;AACpB;;AAEA;EAEE,kBAAkB;AACpB;;AAEA;AAEA;;AAEA;AAEA;;AAEA;AAEA;;AAEA;AAEA",sourcesContent:[".container {\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  flex-direction: column;\n  user-select: none;\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.row {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n}\n\n.topRow {\n  composes: row;\n  align-items: flex-start;\n}\n\n.middleRow {\n  composes: row;\n  align-items: center;\n}\n\n.bottomRow {\n  composes: row;\n  align-items: flex-end;\n}\n\n.item {\n  flex: 1;\n  padding: 5px;\n}\n\n.east {\n  composes: item;\n  text-align: right;\n}\n\n.west {\n  composes: item;\n  text-align: left;\n}\n\n.north {\n  composes: item;\n  text-align: center;\n}\n\n.south {\n  composes: item;\n  text-align: center;\n}\n\n.northEast {\n  composes: east;\n}\n\n.northWest {\n  composes: west;\n}\n\n.southEast {\n  composes: east;\n}\n\n.southWest {\n  composes: west;\n}\n\n"],sourceRoot:""}]),s.locals={container:"CornerAnnotation-module-container_MtsnD",row:"CornerAnnotation-module-row_fchHS",topRow:"CornerAnnotation-module-topRow__S0LS CornerAnnotation-module-row_fchHS",middleRow:"CornerAnnotation-module-middleRow_LXC7g CornerAnnotation-module-row_fchHS",bottomRow:"CornerAnnotation-module-bottomRow_NFTxW CornerAnnotation-module-row_fchHS",item:"CornerAnnotation-module-item_wigvd",east:"CornerAnnotation-module-east_mBb95 CornerAnnotation-module-item_wigvd",west:"CornerAnnotation-module-west_QjOwC CornerAnnotation-module-item_wigvd",north:"CornerAnnotation-module-north_rXoQl CornerAnnotation-module-item_wigvd",south:"CornerAnnotation-module-south_wRnpI CornerAnnotation-module-item_wigvd",northEast:"CornerAnnotation-module-northEast_m6eKm CornerAnnotation-module-east_mBb95 CornerAnnotation-module-item_wigvd",northWest:"CornerAnnotation-module-northWest_fpQfn CornerAnnotation-module-west_QjOwC CornerAnnotation-module-item_wigvd",southEast:"CornerAnnotation-module-southEast_NknwO CornerAnnotation-module-east_mBb95 CornerAnnotation-module-item_wigvd",southWest:"CornerAnnotation-module-southWest_s6fe8 CornerAnnotation-module-west_QjOwC CornerAnnotation-module-item_wigvd"},t.A=s},4506:function(e,t,n){"use strict";var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".FPSMonitor-module-verticalContainer_JRbWS {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.FPSMonitor-module-horizontalContainer_EkVOU {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.FPSMonitor-module-leftPane_M9Lhm {\n  flex: none;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.FPSMonitor-module-rightPane_pMk4r {\n  flex: 1;\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-auto-rows: 1.5em;\n  grid-column-gap: 5px;\n  grid-row-gap: 2px;\n  padding: 10px;\n}\n\n.FPSMonitor-module-title_JsQT0 {\n  flex: 1;\n  font-weight: bold;\n  padding: 5px 10px 0 10px;\n}\n\n.FPSMonitor-module-graph_mRbs5 {\n  flex: none;\n  border: solid 1px black;\n  margin: 10px ;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.FPSMonitor-module-label_QY3c4 {\n  font-weight: bold;\n  text-transform: capitalize;\n  text-align: right;\n  align-self: center;\n}\n\n.FPSMonitor-module-value_aqAI6 {\n  font-style: italic;\n  text-align: center;\n  align-self: center;\n}\n","",{version:3,sources:["webpack://./Sources/Interaction/UI/FPSMonitor/FPSMonitor.module.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,sBAAsB;EACtB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,UAAU;EACV,aAAa;EACb,sBAAsB;EACtB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,OAAO;EACP,aAAa;EACb,gCAAgC;EAChC,qBAAqB;EACrB,oBAAoB;EACpB,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,OAAO;EACP,iBAAiB;EACjB,wBAAwB;AAC1B;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,aAAa;EACb,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,0BAA0B;EAC1B,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;AACpB",sourcesContent:[".verticalContainer {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.horizontalContainer {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.leftPane {\n  flex: none;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.rightPane {\n  flex: 1;\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-auto-rows: 1.5em;\n  grid-column-gap: 5px;\n  grid-row-gap: 2px;\n  padding: 10px;\n}\n\n.title {\n  flex: 1;\n  font-weight: bold;\n  padding: 5px 10px 0 10px;\n}\n\n.graph {\n  flex: none;\n  border: solid 1px black;\n  margin: 10px ;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.label {\n  font-weight: bold;\n  text-transform: capitalize;\n  text-align: right;\n  align-self: center;\n}\n\n.value {\n  font-style: italic;\n  text-align: center;\n  align-self: center;\n}\n"],sourceRoot:""}]),s.locals={verticalContainer:"FPSMonitor-module-verticalContainer_JRbWS",horizontalContainer:"FPSMonitor-module-horizontalContainer_EkVOU",leftPane:"FPSMonitor-module-leftPane_M9Lhm",rightPane:"FPSMonitor-module-rightPane_pMk4r",title:"FPSMonitor-module-title_JsQT0",graph:"FPSMonitor-module-graph_mRbs5",label:"FPSMonitor-module-label_QY3c4",value:"FPSMonitor-module-value_aqAI6"},t.A=s},1582:function(e,t,n){"use strict";var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".Slider-module-cursor_qCabe {\n  position: absolute;\n  border-radius: 50%;\n  box-sizing: border-box;\n  cursor: move;\n}\n","",{version:3,sources:["webpack://./Sources/Interaction/UI/Slider/Slider.module.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,kBAAkB;EAClB,sBAAsB;EACtB,YAAY;AACd",sourcesContent:[".cursor {\n  position: absolute;\n  border-radius: 50%;\n  box-sizing: border-box;\n  cursor: move;\n}\n"],sourceRoot:""}]),s.locals={cursor:"Slider-module-cursor_qCabe"},t.A=s},6776:function(e,t,n){"use strict";var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".VolumeController-module-container_gRE1G {\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  background: rgba(128, 128, 128, 0.5);\n  border-radius: 5px;\n  padding: 2px;\n  border: 0.5px solid black;\n  box-sizing: border-box;\n}\n\n.VolumeController-module-line_JHxzb {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.VolumeController-module-button_ZC9NH {\n  cursor: pointer;\n  width: 1rem;\n  margin-left: 5px;\n  margin-right: 5px;\n}\n\n.VolumeController-module-button_ZC9NH svg {\n  width: 1rem;\n  height: 1rem;\n}\n\n.VolumeController-module-sliderEntry_Mmhht {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.VolumeController-module-sliderIcon_RxTkn {\n  height: 1rem;\n}\n\n.VolumeController-module-slider__iS6z {\n  flex: 1;\n  min-height: 1rem;\n  width: 5px;\n}\n\n.VolumeController-module-piecewiseEditor_TQVG0 {\n  flex: 1;\n}\n\n.VolumeController-module-select_kmSPG {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: white;\n  border: none;\n  -moz-appearance: none;\n  width: 5px;\n}\n\n.VolumeController-module-select_kmSPG select:focus {\n  outline: none;\n  border: none;\n}\n\n.VolumeController-module-presets_VDslk {\n}\n\n.VolumeController-module-shadow_sG7Xf {\n}\n\n.VolumeController-module-buttonDarkBG_VsF7D {\n}\n\n.VolumeController-module-presetsDarkBG_poNvG {\n  color: white;\n}\n\n.VolumeController-module-presetsDarkBG_poNvG option {\n  color: black;\n}\n\n.VolumeController-module-shadowDarkBG_eV4mT {\n  color: white;\n}\n\n.VolumeController-module-shadowDarkBG_eV4mT option {\n  color: black;\n}\n\n.VolumeController-module-buttonBrightBG_xo55P {\n}\n\n.VolumeController-module-presetsBrightBG_WXInz {\n  color: black;\n}\n\n.VolumeController-module-presetsBrightBG_WXInz option {\n  color: white;\n}\n\n.VolumeController-module-shadowBrightBG__bzEc {\n  color: black;\n}\n\n.VolumeController-module-shadowBrightBG__bzEc option {\n  color: white;\n}\n","",{version:3,sources:["webpack://./Sources/Interaction/UI/VolumeController/VolumeController.module.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,oBAAoB;EACpB,sBAAsB;EACtB,8BAA8B;EAC9B,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,oCAAoC;EACpC,kBAAkB;EAClB,YAAY;EACZ,yBAAyB;EACzB,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,OAAO;EACP,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,OAAO;EACP,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,OAAO;EACP,gBAAgB;EAChB,UAAU;AACZ;;AAEA;EACE,OAAO;AACT;;AAEA;EACE,OAAO;EACP,YAAY;EACZ,uBAAuB;EACvB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;AAEA;;AAEA;AAEA;;AAEA;AAEA;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;AAEA;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,YAAY;AACd",sourcesContent:[".container {\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  background: rgba(128, 128, 128, 0.5);\n  border-radius: 5px;\n  padding: 2px;\n  border: 0.5px solid black;\n  box-sizing: border-box;\n}\n\n.line {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.button {\n  cursor: pointer;\n  width: 1rem;\n  margin-left: 5px;\n  margin-right: 5px;\n}\n\n.button svg {\n  width: 1rem;\n  height: 1rem;\n}\n\n.sliderEntry {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.sliderIcon {\n  composes: button;\n  height: 1rem;\n}\n\n.slider {\n  flex: 1;\n  min-height: 1rem;\n  width: 5px;\n}\n\n.piecewiseEditor {\n  flex: 1;\n}\n\n.select {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: white;\n  border: none;\n  -moz-appearance: none;\n  width: 5px;\n}\n\n.select select:focus {\n  outline: none;\n  border: none;\n}\n\n.presets {\n  composes: select;\n}\n\n.shadow {\n  composes: select;\n}\n\n.buttonDarkBG {\n  composes: button;\n}\n\n.presetsDarkBG {\n  composes: presets;\n  color: white;\n}\n\n.presetsDarkBG option {\n  color: black;\n}\n\n.shadowDarkBG {\n  composes: shadow;\n  color: white;\n}\n\n.shadowDarkBG option {\n  color: black;\n}\n\n.buttonBrightBG {\n  composes: button;\n}\n\n.presetsBrightBG {\n  composes: presets;\n  color: black;\n}\n\n.presetsBrightBG option {\n  color: white;\n}\n\n.shadowBrightBG {\n  composes: shadow;\n  color: black;\n}\n\n.shadowBrightBG option {\n  color: white;\n}\n"],sourceRoot:""}]),s.locals={container:"VolumeController-module-container_gRE1G",line:"VolumeController-module-line_JHxzb",button:"VolumeController-module-button_ZC9NH",sliderEntry:"VolumeController-module-sliderEntry_Mmhht",sliderIcon:"VolumeController-module-sliderIcon_RxTkn VolumeController-module-button_ZC9NH",slider:"VolumeController-module-slider__iS6z",piecewiseEditor:"VolumeController-module-piecewiseEditor_TQVG0",select:"VolumeController-module-select_kmSPG",presets:"VolumeController-module-presets_VDslk VolumeController-module-select_kmSPG",shadow:"VolumeController-module-shadow_sG7Xf VolumeController-module-select_kmSPG",buttonDarkBG:"VolumeController-module-buttonDarkBG_VsF7D VolumeController-module-button_ZC9NH",presetsDarkBG:"VolumeController-module-presetsDarkBG_poNvG VolumeController-module-presets_VDslk VolumeController-module-select_kmSPG",shadowDarkBG:"VolumeController-module-shadowDarkBG_eV4mT VolumeController-module-shadow_sG7Xf VolumeController-module-select_kmSPG",buttonBrightBG:"VolumeController-module-buttonBrightBG_xo55P VolumeController-module-button_ZC9NH",presetsBrightBG:"VolumeController-module-presetsBrightBG_WXInz VolumeController-module-presets_VDslk VolumeController-module-select_kmSPG",shadowBrightBG:"VolumeController-module-shadowBrightBG__bzEc VolumeController-module-shadow_sG7Xf VolumeController-module-select_kmSPG"},t.A=s},3918:function(e,t,n){"use strict";var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,".RenderWindowWithControlBar-module-rootContainer_HrVPs {\n  position: relative;\n}\n\n.RenderWindowWithControlBar-module-renderWindow_H_ixA {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.RenderWindowWithControlBar-module-control_CCf3U {\n  z-index: 1;\n  position: absolute;\n}\n","",{version:3,sources:["webpack://./Sources/Rendering/Misc/RenderWindowWithControlBar/RenderWindowWithControlBar.module.css"],names:[],mappings:"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,UAAU;EACV,kBAAkB;AACpB",sourcesContent:[".rootContainer {\n  position: relative;\n}\n\n.renderWindow {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.control {\n  z-index: 1;\n  position: absolute;\n}\n"],sourceRoot:""}]),s.locals={rootContainer:"RenderWindowWithControlBar-module-rootContainer_HrVPs",renderWindow:"RenderWindowWithControlBar-module-renderWindow_H_ixA",control:"RenderWindowWithControlBar-module-control_CCf3U"},t.A=s},6314:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,i,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(s[u]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]&&(d[1]="@media ".concat(d[2]," {").concat(d[1],"}")),d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},1354:function(e){"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n))));return[t].concat(n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")})).concat(["/*# ".concat("sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i)," */")]).join("\n")}return[t].join("\n")}},8452:function(e,t,n){"use strict";var i=n(1189),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,u=l&&function(){var e={};try{for(var t in l(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,n,i){(!(t in e)||"function"==typeof i&&"[object Function]"===a.call(i)&&i())&&(u?l(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},d=function(e,t){var n=arguments.length>2?arguments[2]:{},a=i(t);o&&(a=s.call(a,Object.getOwnPropertySymbols(t)));for(var l=0;l<a.length;l+=1)c(e,a[l],t[a[l]],n[a[l]])};d.supportsDescriptors=!!u,e.exports=d},2017:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=i;0!=o--;){var i,o,a,s=a[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},7820:function(e){"use strict";"u">typeof self?e.exports=self:"u">typeof window?e.exports=window:e.exports=Function("return this")()},170:function(e,t,n){"use strict";var i=n(8452),o=n(7820),a=n(5323),s=n(6061),l=a(),u=function(){return l};i(u,{getPolyfill:a,implementation:o,shim:s}),e.exports=u},5323:function(e,t,n){"use strict";var i=n(7820);e.exports=function(){return"object"==typeof n.g&&n.g&&n.g.Math===Math&&n.g.Array===Array?n.g:i}},6061:function(e,t,n){"use strict";var i=n(8452),o=n(5323);e.exports=function(){var e=o();if(i.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");t&&(!t.configurable||!t.enumerable&&t.writable&&globalThis===e)||Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else"object"==typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},8875:function(e,t,n){"use strict";var i;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=n(1093),l=Object.prototype.propertyIsEnumerable,u=!l.call({toString:null},"toString"),c=l.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("u"<typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===a.call(e),i=s(e),l=t&&"[object String]"===a.call(e),p=[];if(!t&&!n&&!i)throw TypeError("Object.keys called on a non-object");var m=c&&n;if(l&&e.length>0&&!o.call(e,0))for(var g=0;g<e.length;++g)p.push(String(g));if(i&&e.length>0)for(var v=0;v<e.length;++v)p.push(String(v));else for(var y in e)m&&"prototype"===y||!o.call(e,y)||p.push(String(y));if(u)for(var b=function(e){if("u"<typeof window||!h)return f(e);try{return f(e)}catch(e){return!1}}(e),x=0;x<d.length;++x)b&&"constructor"===d[x]||!o.call(e,d[x])||p.push(d[x]);return p}}e.exports=i},1189:function(e,t,n){"use strict";var i=Array.prototype.slice,o=n(1093),a=Object.keys,s=a?function(e){return a(e)}:n(8875),l=Object.keys;s.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?l(i.call(e)):l(e)}):Object.keys=s,Object.keys||s},e.exports=s},1093:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),i}},7391:function(e,t,n){var i=n(7180),o=n(3181),a=n(3031),s=n(9067),l=n(6833),u=n(3717),c=n(4801);c.alea=i,c.xor128=o,c.xorwow=a,c.xorshift7=s,c.xor4096=l,c.tychei=u,e.exports=c},7180:function(e,t,n){var i;!function(e,o){function a(e){var t,n=this,i=(t=0xefc8249d,function(e){e=String(e);for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=0x100000000*(i-=t)}return 23283064365386963e-26*(t>>>0)});n.next=function(){var e=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=i(" "),n.s1=i(" "),n.s2=i(" "),n.s0-=i(e),n.s0<0&&(n.s0+=1),n.s1-=i(e),n.s1<0&&(n.s1+=1),n.s2-=i(e),n.s2<0&&(n.s2+=1),i=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),i=t&&t.state,o=n.next;return o.int32=function(){return 0x100000000*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.alea=l}(0,e=n.nmd(e),n.amdD)},3717:function(e,t,n){var i;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-0x61c88647,t.d=0x517cc1b7,e===Math.floor(e)?(t.a=e/0x100000000|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=n.charCodeAt(i),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),i=t&&t.state,o=function(){return(n.next()>>>0)/0x100000000};return o.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.tychei=l}(0,e=n.nmd(e),n.amdD)},3181:function(e,t,n){var i;!function(e,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=n.charCodeAt(i),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),i=t&&t.state,o=function(){return(n.next()>>>0)/0x100000000};return o.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.xor128=l}(0,e=n.nmd(e),n.amdD)},6833:function(e,t,n){var i;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,i=t.w,o=t.X,a=t.i;return t.w=i=i+0x61c88647|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(i^i>>>16)|0},function(e,t){var n,i,o,a,s,l=[],u=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,u=Math.max(u,t.length)),o=0,a=-32;a<u;++a)t&&(i^=t.charCodeAt((a+32)%t.length)),0===a&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,a>=0&&(s=s+0x61c88647|0,o=0==(n=l[127&a]^=i+s)?o+1:0);for(o>=128&&(l[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)i=l[o+34&127],n=l[o=o+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,l[o]=i^n;e.w=s,e.X=l,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),i=t&&t.state,o=function(){return(n.next()>>>0)/0x100000000};return o.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},9067:function(e,t,n){var i;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,i=t.x,o=t.i;return e=i[o],n=(e^=e>>>7)^e<<24^((e=i[o+1&7])^e>>>10)^((e=i[o+3&7])^e>>>3)^((e=i[o+4&7])^e<<7),e=i[o+7&7],n^=(e^=e<<13)^e<<9,i[o]=n,t.i=o+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),i=t&&t.state,o=function(){return(n.next()>>>0)/0x100000000};return o.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},3031:function(e,t,n){var i;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),i=t&&t.state,o=function(){return(n.next()>>>0)/0x100000000};return o.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&s(i,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(i=(function(){return l}).call(t,n,t,o))||(o.exports=i):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},4801:function(e,t,n){var i;!function(o,a,s){var l,u=s.pow(256,6),c=s.pow(2,52),d=2*c;function f(e,t,n){var i=[],f=m(function e(t,n){var i,o=[],a=typeof t;if(n&&"object"==a)for(i in t)try{o.push(e(t[i],n-1))}catch(e){}return o.length?o:"string"==a?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return l&&(e=l.randomBytes)?e=e(256):(e=new Uint8Array(256),(o.crypto||o.msCrypto).getRandomValues(e)),g(e)}catch(e){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,g(a)]}}():e,3),i),v=new p(i),y=function(){for(var e=v.g(6),t=u,n=0;e<c;)e=(e+n)*256,t*=256,n=v.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|v.g(4)},y.quick=function(){return v.g(4)/0x100000000},y.double=y,m(g(v.S),a),(t.pass||n||function(e,t,n,i){return i&&(i.S&&h(i,v),e.state=function(){return h(v,{})}),n?(s.random=e,t):e})(y,f,"global"in t?t.global:this==s,t.state)}function p(e){var t,n=e.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(n||(e=[n++]);o<256;)s[o]=o++;for(o=0;o<256;o++)s[o]=s[a=255&a+e[o%n]+(t=s[o])],s[a]=t;(i.g=function(e){for(var t,n=0,o=i.i,a=i.j,s=i.S;e--;)t=s[o=255&o+1],n=256*n+s[255&(s[o]=s[a=255&a+t])+(s[a]=t)];return i.i=o,i.j=a,n})(256)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,i=e+"",o=0;o<i.length;)t[255&o]=255&(n^=19*t[255&o])+i.charCodeAt(o++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(s.random(),a),e.exports){e.exports=f;try{l=n(1234)}catch(e){}}else void 0===(i=(function(){return f}).call(t,n,t,e))||(e.exports=i)}("u">typeof self?self:this,[],Math)},4196:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkImageResliceMapperFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the gpu image mapper fragment shader\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n"},5780:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkImageResliceMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model coordinates\n// WC - World coordinates\n// VC - View coordinates\n// DC - Display coordinates\n// TC - Texture coordinates\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvoid main()\n{\n  //VTK::PositionVC::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Picking::Impl\n}\n"},979:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nuniform int PrimitiveIDOffset;\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Scalar coloring\n//VTK::Color::Dec\n\n// Depth Peeling\n//VTK::DepthPeeling::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Color::Impl\n  //VTK::TCoord::Impl\n\n  //VTK::DepthPeeling::Impl\n  //VTK::Picking::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n}\n"},8147:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model Coordinates\n// WC - WC world coordinates\n// VC - View Coordinates\n// DC - Display Coordinates\n\nin vec4 vertexWC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nuniform mat4 WCVCMatrix;  // World to view matrix\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  gl_Position = WCVCMatrix*vertexWC;\n\n  //VTK::TCoord::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::PositionVC::Impl\n}\n"},2081:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// label outline \n//VTK::LabelOutline::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\n//VTK::LabelOutlineHelperFunction\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Light::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n"},1665:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n"},7239:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\nuniform float scaleFactor;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vec2 scaledOffsetMC = scaleFactor * offsetMC;\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(scaledOffsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;\n    }\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n"},5826:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n"},5513:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the volume mappers fragment shader\n\nconst float infinity = 3.402823466e38;\n\n// the output of this shader\n//VTK::Output::Dec\n\nin vec3 vertexVCVSOutput;\n\n// From Sources\\Rendering\\Core\\VolumeProperty\\Constants.js\n#define COMPOSITE_BLEND 0\n#define MAXIMUM_INTENSITY_BLEND 1\n#define MINIMUM_INTENSITY_BLEND 2\n#define AVERAGE_INTENSITY_BLEND 3\n#define ADDITIVE_INTENSITY_BLEND 4\n#define RADON_TRANSFORM_BLEND 5\n#define LABELMAP_EDGE_PROJECTION_BLEND 6\n\n#define vtkNumberOfLights //VTK::NumberOfLights\n#define vtkMaxLaoKernelSize //VTK::MaxLaoKernelSize\n#define vtkNumberOfComponents //VTK::NumberOfComponents\n#define vtkBlendMode //VTK::BlendMode\n#define vtkMaximumNumberOfSamples //VTK::MaximumNumberOfSamples\n\n//VTK::EnabledColorFunctions\n\n//VTK::EnabledLightings\n\n//VTK::EnabledMultiTexturePerVolume\n\n//VTK::EnabledGradientOpacity\n\n//VTK::EnabledIndependentComponents\n\n//VTK::vtkProportionalComponents\n\n//VTK::vtkForceNearestComponents\n\nuniform int twoSidedLighting;\n\n#if vtkMaxLaoKernelSize > 0\n  vec2 kernelSample[vtkMaxLaoKernelSize];\n#endif\n\n// Textures\n#ifdef EnabledMultiTexturePerVolume\n  #define vtkNumberOfVolumeTextures vtkNumberOfComponents\n#else\n  #define vtkNumberOfVolumeTextures 1\n#endif\nuniform highp sampler3D volumeTexture[vtkNumberOfVolumeTextures];\nuniform sampler2D colorTexture;\nuniform sampler2D opacityTexture;\nuniform sampler2D jtexture;\nuniform sampler2D labelOutlineThicknessTexture;\n\nstruct Volume {\n  // ---- Volume geometry settings ----\n\n  vec3 originVC;          // in VC\n  vec3 spacing;           // in VC per IC\n  vec3 inverseSpacing;    // 1/spacing\n  ivec3 dimensions;       // in IC\n  vec3 inverseDimensions; // 1/vec3(dimensions)\n  mat3 vecISToVCMatrix;   // convert from IS to VC without translation\n  mat3 vecVCToISMatrix;   // convert from VC to IS without translation\n  mat4 PCWCMatrix;\n  mat4 worldToIndex;\n  float diagonalLength; // in VC, this is: length(size)\n\n  // ---- Texture settings ----\n\n  // Texture shift and scale\n  vec4 colorTextureScale;\n  vec4 colorTextureShift;\n  vec4 opacityTextureScale;\n  vec4 opacityTextureShift;\n\n  // The heights defined below are the locations for the up to four components\n  // of the transfer functions. The transfer functions have a height of (2 *\n  // numberOfComponents) pixels so the values are computed to hit the middle of\n  // the two rows for that component\n  vec4 transferFunctionsSampleHeight;\n\n  // ---- Mode specific settings ----\n\n  // Independent component default preset settings per component\n  vec4 independentComponentMix;\n\n  // Additive / average blending mode settings\n  vec4 ipScalarRangeMin;\n  vec4 ipScalarRangeMax;\n\n  // ---- Rendering settings ----\n\n  // Lighting\n  float ambient;\n  float diffuse;\n  float specular;\n  float specularPower;\n  int computeNormalFromOpacity;\n\n  // Gradient opacity\n  vec4 gradientOpacityScale;\n  vec4 gradientOpacityShift;\n  vec4 gradientOpacityMin;\n  vec4 gradientOpacityMax;\n\n  // Volume shadow\n  float volumetricScatteringBlending;\n  float globalIlluminationReach;\n  float anisotropy;\n  float anisotropySquared;\n\n  // LAO\n  int kernelSize;\n  int kernelRadius;\n\n  // Label outline\n  float outlineOpacity;\n};\nuniform Volume volume;\n\nstruct Light {\n  vec3 color;\n  vec3 positionVC;\n  vec3 directionVC; // normalized\n  vec3 halfAngleVC;\n  vec3 attenuation;\n  float exponent;\n  float coneAngle;\n  int isPositional;\n};\n#if vtkNumberOfLights > 0\n  uniform Light lights[vtkNumberOfLights];\n#endif\n\nuniform float vpWidth;\nuniform float vpHeight;\nuniform float vpOffsetX;\nuniform float vpOffsetY;\n\n// Bitmasks for label outline\nconst int MAX_SEGMENT_INDEX = 256; // Define as per expected maximum\n#define MAX_SEGMENTS 256\n#define UINT_SIZE 32\n// We add UINT_SIZE - 1, as we want the ceil of the division instead of the\n// floor\n#define BITMASK_SIZE ((MAX_SEGMENTS + UINT_SIZE - 1) / UINT_SIZE)\nuint labelOutlineBitmasks[BITMASK_SIZE];\n\n// Set the corresponding bit in the bitmask\nvoid setLabelOutlineBit(int segmentIndex) {\n  int arrayIndex = segmentIndex / UINT_SIZE;\n  int bitIndex = segmentIndex % UINT_SIZE;\n  labelOutlineBitmasks[arrayIndex] |= 1u << bitIndex;\n}\n\n// Check if a bit is set in the bitmask\nbool isLabelOutlineBitSet(int segmentIndex) {\n  int arrayIndex = segmentIndex / UINT_SIZE;\n  int bitIndex = segmentIndex % UINT_SIZE;\n  return ((labelOutlineBitmasks[arrayIndex] & (1u << bitIndex)) != 0u);\n}\n\n// if you want to see the raw tiled\n// data in webgl1 uncomment the following line\n// #define debugtile\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\nuniform int cameraParallel;\n\n//VTK::ClipPlane::Dec\n\n// A random number between 0 and 1 that only depends on the fragment\n// It uses the jtexture, so this random seed repeats by blocks of 32 fragments\n// in screen space\nfloat fragmentSeed;\n\n// sample texture is global\nuniform float sampleDistance;\nuniform float volumeShadowSampleDistance;\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n//=======================================================================\n// global and custom variables (a temporary section before photorealistics\n// rendering module is complete)\nvec3 rayDirVC;\n\n#define INV4PI 0.0796\n#define EPSILON 0.001\n#define PI 3.1415\n#define PI2 9.8696\n\nvec4 rawSampleTexture(vec3 pos) {\n  #ifdef EnabledMultiTexturePerVolume\n    vec4 rawSample;\n    rawSample[0] = texture(volumeTexture[0], pos)[0];\n  #if vtkNumberOfComponents > 1\n    rawSample[1] = texture(volumeTexture[1], pos)[0];\n  #endif\n  #if vtkNumberOfComponents > 2\n    rawSample[2] = texture(volumeTexture[2], pos)[0];\n  #endif\n  #if vtkNumberOfComponents > 3\n    rawSample[3] = texture(volumeTexture[3], pos)[0];\n  #endif\n    return rawSample;\n  #else\n    return texture(volumeTexture[0], pos);\n  #endif\n}\n\nvec4 rawFetchTexture(ivec3 pos) {\n  #ifdef EnabledMultiTexturePerVolume\n    vec4 rawSample;\n    #if vtkNumberOfComponents > 0\n      rawSample[0] = texelFetch(volumeTexture[0], pos, 0)[0];\n    #endif\n    #if vtkNumberOfComponents > 1\n      rawSample[1] = texelFetch(volumeTexture[1], pos, 0)[0];\n    #endif\n    #if vtkNumberOfComponents > 2\n      rawSample[2] = texelFetch(volumeTexture[2], pos, 0)[0];\n    #endif\n    #if vtkNumberOfComponents > 3\n      rawSample[3] = texelFetch(volumeTexture[3], pos, 0)[0];\n    #endif\n    return rawSample;\n  #else\n    return texelFetch(volumeTexture[0], pos, 0);\n  #endif\n}\n\nvec4 getTextureValue(vec3 pos) {\n  vec4 tmp = rawSampleTexture(pos);\n\n  // Force nearest\n  #if defined(vtkComponent0ForceNearest) || \\\n      defined(vtkComponent1ForceNearest) || \\\n      defined(vtkComponent2ForceNearest) || \\\n      defined(vtkComponent3ForceNearest)\n    vec3 nearestPos = (floor(pos * vec3(volume.dimensions)) + 0.5) *\n                      volume.inverseDimensions;\n    vec4 nearestValue = rawSampleTexture(nearestPos);\n    #ifdef vtkComponent0ForceNearest\n      tmp[0] = nearestValue[0];\n    #endif\n    #ifdef vtkComponent1ForceNearest\n      tmp[1] = nearestValue[1];\n    #endif\n    #ifdef vtkComponent2ForceNearest\n      tmp[2] = nearestValue[2];\n    #endif\n    #ifdef vtkComponent3ForceNearest\n      tmp[3] = nearestValue[3];\n    #endif\n  #endif\n\n  // Set alpha when using dependent components\n  #ifndef EnabledIndependentComponents\n    #if vtkNumberOfComponents == 1\n      tmp.a = tmp.r;\n    #endif\n    #if vtkNumberOfComponents == 2\n      tmp.a = tmp.g;\n    #endif\n    #if vtkNumberOfComponents == 3\n      tmp.a = length(tmp.rgb);\n    #endif\n  #endif\n\n  return tmp;\n}\n\n// `height` is usually `volume.transferFunctionsSampleHeight[component]`\n// when using independent component and `0.5` otherwise. Don't move the if\n// statement in these function, as the callers usually already knows if it is\n// using independent component or not\nfloat getOpacityFromTexture(float scalar, int component, float height) {\n  float scaledScalar = scalar * volume.opacityTextureScale[component] +\n                       volume.opacityTextureShift[component];\n  return texture2D(opacityTexture, vec2(scaledScalar, height)).r;\n}\nvec3 getColorFromTexture(float scalar, int component, float height) {\n  float scaledScalar = scalar * volume.colorTextureScale[component] +\n                       volume.colorTextureShift[component];\n  return texture2D(colorTexture, vec2(scaledScalar, height)).rgb;\n}\n\n//=======================================================================\n// transformation between VC and IS space\n\n// convert vector position from idx to vc\nvec3 posIStoVC(vec3 posIS) {\n  return volume.vecISToVCMatrix * posIS + volume.originVC;\n}\n\n// convert vector position from vc to idx\nvec3 posVCtoIS(vec3 posVC) {\n  return volume.vecVCToISMatrix * (posVC - volume.originVC);\n}\n\n// Rotate vector to view coordinate\nvec3 vecISToVC(vec3 dirIS) {\n  return volume.vecISToVCMatrix * dirIS;\n}\n\n// Rotate vector to idx coordinate\nvec3 vecVCToIS(vec3 dirVC) {\n  return volume.vecVCToISMatrix * dirVC;\n}\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\nfloat computeGradientOpacityFactor(float normalMag, int component) {\n  float goscale = volume.gradientOpacityScale[component];\n  float goshift = volume.gradientOpacityShift[component];\n  float gomin = volume.gradientOpacityMin[component];\n  float gomax = volume.gradientOpacityMax[component];\n  return clamp(normalMag * goscale + goshift, gomin, gomax);\n}\n\n#ifdef vtkClippingPlanesOn\n  bool isPointClipped(vec3 posVC) {\n    for (int i = 0; i < clip_numPlanes; ++i) {\n      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0) {\n        return true;\n      }\n    }\n    return false;\n  }\n#endif\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position, uses forward\n// difference\n\n// The output normal is in VC\nvec4 computeDensityNormal(vec3 opacityUCoords[2], float opacityTextureHeight,\n                          float gradientOpacity, int component) {\n  // Pass the scalars through the opacity functions\n  vec4 opacityG;\n  opacityG.x += getOpacityFromTexture(opacityUCoords[0].x, component,\n                                      opacityTextureHeight);\n  opacityG.y += getOpacityFromTexture(opacityUCoords[0].y, component,\n                                      opacityTextureHeight);\n  opacityG.z += getOpacityFromTexture(opacityUCoords[0].z, component,\n                                      opacityTextureHeight);\n  opacityG.x -= getOpacityFromTexture(opacityUCoords[1].x, component,\n                                      opacityTextureHeight);\n  opacityG.y -= getOpacityFromTexture(opacityUCoords[1].y, component,\n                                      opacityTextureHeight);\n  opacityG.z -= getOpacityFromTexture(opacityUCoords[1].z, component,\n                                      opacityTextureHeight);\n\n  // Divide by spacing and convert to VC\n  opacityG.xyz *= gradientOpacity * volume.inverseSpacing;\n  opacityG.w = length(opacityG.xyz);\n  if (opacityG.w == 0.0) {\n    return vec4(0.0);\n  }\n\n  // Normalize\n  opacityG.xyz = normalize(vecISToVC(opacityG.xyz));\n\n  return opacityG;\n}\n\n// The output normal is in VC\nvec4 computeNormalForDensity(vec3 posIS, out vec3 scalarInterp[2],\n                             const int opacityComponent) {\n  vec3 offsetedPosIS;\n  for (int axis = 0; axis < 3; ++axis) {\n    // Positive direction\n    offsetedPosIS = posIS;\n    offsetedPosIS[axis] += volume.inverseDimensions[axis];\n    scalarInterp[0][axis] =\n        getTextureValue(offsetedPosIS)[opacityComponent];\n    #ifdef vtkClippingPlanesOn\n      if (isPointClipped(posIStoVC(offsetedPosIS))) {\n        scalarInterp[0][axis] = 0.0;\n      }\n    #endif\n\n    // Negative direction\n    offsetedPosIS = posIS;\n    offsetedPosIS[axis] -= volume.inverseDimensions[axis];\n    scalarInterp[1][axis] =\n        getTextureValue(offsetedPosIS)[opacityComponent];\n    #ifdef vtkClippingPlanesOn\n      if (isPointClipped(posIStoVC(offsetedPosIS))) {\n        scalarInterp[1][axis] = 0.0;\n      }\n    #endif\n  }\n\n  vec4 result;\n  result.xyz = (scalarInterp[0] - scalarInterp[1]) * volume.inverseSpacing;\n  result.w = length(result.xyz);\n  if (result.w == 0.0) {\n    return vec4(0.0);\n  }\n  result.xyz = normalize(vecISToVC(result.xyz));\n  return result;\n}\n\nvec4 fragCoordToPCPos(vec4 fragCoord) {\n  return vec4((fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,\n              (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,\n              (fragCoord.z - 0.5) * 2.0, 1.0);\n}\n\nvec4 pcPosToWorldCoord(vec4 pcPos) {\n  return volume.PCWCMatrix * pcPos;\n}\n\nvec3 fragCoordToIndexSpace(vec4 fragCoord) {\n  vec4 pcPos = fragCoordToPCPos(fragCoord);\n  vec4 worldCoord = pcPosToWorldCoord(pcPos);\n  vec4 vertex = (worldCoord / worldCoord.w);\n\n  vec3 index = (volume.worldToIndex * vertex).xyz;\n\n  // half voxel fix for labelmapOutline\n  return (index + vec3(0.5)) * volume.inverseDimensions;\n}\n\nvec3 fragCoordToWorld(vec4 fragCoord) {\n  vec4 pcPos = fragCoordToPCPos(fragCoord);\n  vec4 worldCoord = pcPosToWorldCoord(pcPos);\n  return worldCoord.xyz;\n}\n\n//=======================================================================\n// Compute the normals and gradient magnitudes for a position for independent\n// components The output normals are in VC\nmat4 computeMat4Normal(vec3 posIS, vec4 tValue) {\n  vec3 xvec = vec3(volume.inverseDimensions.x, 0.0, 0.0);\n  vec3 yvec = vec3(0.0, volume.inverseDimensions.y, 0.0);\n  vec3 zvec = vec3(0.0, 0.0, volume.inverseDimensions.z);\n\n  vec4 distX = getTextureValue(posIS + xvec) - getTextureValue(posIS - xvec);\n  vec4 distY = getTextureValue(posIS + yvec) - getTextureValue(posIS - yvec);\n  vec4 distZ = getTextureValue(posIS + zvec) - getTextureValue(posIS - zvec);\n\n  // divide by spacing\n  distX *= 0.5 * volume.inverseSpacing.x;\n  distY *= 0.5 * volume.inverseSpacing.y;\n  distZ *= 0.5 * volume.inverseSpacing.z;\n\n  mat4 result;\n\n  // optionally compute the 1st component\n  #if vtkNumberOfComponents > 0 && !defined(vtkComponent0Proportional)\n    {\n      const int component = 0;\n      vec3 normal = vec3(distX[component], distY[component], distZ[component]);\n      float normalLength = length(normal);\n      if (normalLength > 0.0) {\n        normal = normalize(vecISToVC(normal));\n      }\n      result[component] = vec4(normal, normalLength);\n    }\n  #endif\n\n  // optionally compute the 2nd component\n  #if vtkNumberOfComponents > 1 && !defined(vtkComponent1Proportional)\n    {\n      const int component = 1;\n      vec3 normal = vec3(distX[component], distY[component], distZ[component]);\n      float normalLength = length(normal);\n      if (normalLength > 0.0) {\n        normal = normalize(vecISToVC(normal));\n      }\n      result[component] = vec4(normal, normalLength);\n    }\n  #endif\n\n  // optionally compute the 3rd component\n  #if vtkNumberOfComponents > 2 && !defined(vtkComponent2Proportional)\n    {\n      const int component = 2;\n      vec3 normal = vec3(distX[component], distY[component], distZ[component]);\n      float normalLength = length(normal);\n      if (normalLength > 0.0) {\n        normal = normalize(vecISToVC(normal));\n      }\n      result[component] = vec4(normal, normalLength);\n    }\n  #endif\n\n  // optionally compute the 4th component\n  #if vtkNumberOfComponents > 3 && !defined(vtkComponent3Proportional)\n    {\n      const int component = 3;\n      vec3 normal = vec3(distX[component], distY[component], distZ[component]);\n      float normalLength = length(normal);\n      if (normalLength > 0.0) {\n        normal = normalize(vecISToVC(normal));\n      }\n      result[component] = vec4(normal, normalLength);\n    }\n  #endif\n\n  return result;\n}\n\n//=======================================================================\n// global shadow - secondary ray\n\n// henyey greenstein phase function\nfloat phaseFunction(float cos_angle) {\n  // divide by 2.0 instead of 4pi to increase intensity\n  float anisotropy = volume.anisotropy;\n  if (abs(anisotropy) <= EPSILON) {\n    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity\n    return 0.5;\n  }\n  float anisotropy2 = volume.anisotropySquared;\n  return ((1.0 - anisotropy2) /\n          pow(1.0 + anisotropy2 - 2.0 * anisotropy * cos_angle, 1.5)) /\n         2.0;\n}\n\n// Compute the two intersection distances of the ray with the volume in VC\n// The entry point is `rayOriginVC + distanceMin * rayDirVC` and the exit point\n// is `rayOriginVC + distanceMax * rayDirVC` If distanceMin < distanceMax, the\n// volume is not intersected The ray origin is inside the box when distanceMin <\n// 0.0 < distanceMax\nvec2 rayIntersectVolumeDistances(vec3 rayOriginVC, vec3 rayDirVC) {\n  // Compute origin and direction in IS\n  vec3 rayOriginIS = posVCtoIS(rayOriginVC);\n  vec3 rayDirIS = vecVCToIS(rayDirVC);\n  // Don't check for infinity as the min/max combination afterward will always\n  // find an intersection before infinity\n  vec3 invDir = 1.0 / rayDirIS;\n\n  // We have: bound = origin + t * dir\n  // So: t = (1/dir) * (bound - origin)\n  vec3 distancesTo0 = invDir * (vec3(0.0) - rayOriginIS);\n  vec3 distancesTo1 = invDir * (vec3(1.0) - rayOriginIS);\n  // Min and max distances to plane intersection per plane\n  vec3 dMinPerAxis = min(distancesTo0, distancesTo1);\n  vec3 dMaxPerAxis = max(distancesTo0, distancesTo1);\n  // Overall first and last intersection\n  float distanceMin = max(dMinPerAxis.x, max(dMinPerAxis.y, dMinPerAxis.z));\n  float distanceMax = min(dMaxPerAxis.x, min(dMaxPerAxis.y, dMaxPerAxis.z));\n  return vec2(distanceMin, distanceMax);\n}\n\n//=======================================================================\n// local ambient occlusion\n#if vtkMaxLaoKernelSize > 0\n\n  // Return a random point on the unit sphere\n  vec3 sampleDirectionUniform(int rayIndex) {\n    // Each ray of each fragment should be different, two sources of randomness\n    // are used. Only depends on ray index\n    vec2 rayRandomness = kernelSample[rayIndex];\n    // Only depends on fragment\n    float fragmentRandomness = fragmentSeed;\n    // Merge both source of randomness in a single uniform random variable using\n    // the formula (x+y < 1 ? x+y : x+y-1). The simpler formula (x+y)/2 doesn't\n    // result in a uniform distribution\n    vec2 mergedRandom = rayRandomness + vec2(fragmentRandomness);\n    mergedRandom -= vec2(greaterThanEqual(mergedRandom, vec2(1.0)));\n\n    // Insipred by:\n    // https://karthikkaranth.me/blog/generating-random-points-in-a-sphere/#better-choice-of-spherical-coordinates\n    float u = mergedRandom[0];\n    float v = mergedRandom[1];\n    float theta = u * 2.0 * PI;\n    float phi = acos(2.0 * v - 1.0);\n    float sinTheta = sin(theta);\n    float cosTheta = cos(theta);\n    float sinPhi = sin(phi);\n    float cosPhi = cos(phi);\n    return vec3(sinPhi * cosTheta, sinPhi * sinTheta, cosPhi);\n  }\n\n  float computeLAO(vec3 posVC, vec4 normalVC, float originalOpacity) {\n    // apply LAO only at selected locations, otherwise return full brightness\n    if (normalVC.w <= 0.0 || originalOpacity <= 0.05) {\n      return 1.0;\n    }\n\n    #ifdef EnabledGradientOpacity\n      float gradientOpacityFactor = computeGradientOpacityFactor(normalVC.w, 0);\n    #endif\n\n    float visibilitySum = 0.0;\n    float weightSum = 0.0;\n    for (int i = 0; i < volume.kernelSize; i++) {\n      // Only sample on an hemisphere around the normalVC.xyz axis, so\n      // normalDotRay should be negative\n      vec3 rayDirectionVC = sampleDirectionUniform(i);\n      float normalDotRay = dot(normalVC.xyz, rayDirectionVC);\n      if (normalDotRay > 0.0) {\n        // Flip rayDirectionVC when it is in the wrong hemisphere\n        rayDirectionVC = -rayDirectionVC;\n        normalDotRay = -normalDotRay;\n      }\n\n      vec3 currPosIS = posVCtoIS(posVC);\n      float visibility = 1.0;\n      vec3 randomDirStepIS = vecVCToIS(rayDirectionVC * sampleDistance);\n      for (int j = 0; j < volume.kernelRadius; j++) {\n        currPosIS += randomDirStepIS;\n        // If out of the volume, we are done\n        if (any(lessThan(currPosIS, vec3(0.0))) ||\n            any(greaterThan(currPosIS, vec3(1.0)))) {\n          break;\n        }\n        float opacity = getOpacityFromTexture(getTextureValue(currPosIS).r, 0, 0.5);\n        #ifdef EnabledGradientOpacity\n          opacity *= gradientOpacityFactor;\n        #endif\n        visibility *= 1.0 - opacity;\n        // If visibility is less than EPSILON, consider it to be 0\n        if (visibility < EPSILON) {\n          visibility = 0.0;\n          break;\n        }\n      }\n      float rayWeight = -normalDotRay;\n      visibilitySum += visibility * rayWeight;\n      weightSum += rayWeight;\n    }\n\n    // If no sample, LAO factor is one\n    if (weightSum == 0.0) {\n      return 1.0;\n    }\n\n    // LAO factor is the average visibility:\n    // - visibility low => ambient low\n    // - visibility high => ambient high\n    float lao = visibilitySum / weightSum;\n\n    // Reduce variance by clamping\n    return clamp(lao, 0.3, 1.0);\n  }\n#endif\n\n//=======================================================================\n// Volume shadows\n#if vtkNumberOfLights > 0\n\n  // Non-memoised version\n  float computeVolumeShadowWithoutCache(vec3 posVC, vec3 lightDirNormVC) {\n    // modify sample distance with a random number between 1.5 and 3.0\n    float rayStepLength =\n        volumeShadowSampleDistance * mix(1.5, 3.0, fragmentSeed);\n\n    // in case the first sample near surface has a very tiled light ray, we need\n    // to offset start position\n    vec3 initialPosVC = posVC + rayStepLength * lightDirNormVC;\n\n    #ifdef vtkClippingPlanesOn\n      float clippingPlanesMaxDistance = infinity;\n      for (int i = 0; i < clip_numPlanes; ++i) {\n        // Find distance of intersection with the plane\n        // Points are clipped when:\n        // dot(planeOrigin - (rayOrigin + distance * rayDirection), planeNormal) > 0\n        // This is equivalent to:\n        // dot(planeOrigin - rayOrigin, planeNormal) - distance * dot(rayDirection,\n        // planeNormal) > 0.0\n        // We precompute the dot products, so we clip ray points when:\n        // dotOrigin - distance * dotDirection > 0.0\n        float dotOrigin =\n            dot(vClipPlaneOrigins[i] - initialPosVC, vClipPlaneNormals[i]);\n        if (dotOrigin > 0.0) {\n          // The initialPosVC is clipped by this plane\n          return 1.0;\n        }\n        float dotDirection = dot(lightDirNormVC, vClipPlaneNormals[i]);\n        if (dotDirection < 0.0) {\n          // We only hit the plane if dotDirection is negative, as (distance is\n          // positive)\n          float intersectionDistance =\n              dotOrigin / dotDirection; // negative divided by negative => positive\n          clippingPlanesMaxDistance =\n              min(clippingPlanesMaxDistance, intersectionDistance);\n        }\n      }\n    #endif\n\n    vec2 intersectionDistances =\n        rayIntersectVolumeDistances(initialPosVC, lightDirNormVC);\n\n    if (intersectionDistances[1] <= intersectionDistances[0] ||\n        intersectionDistances[1] <= 0.0) {\n      // Volume not hit or behind the ray\n      return 1.0;\n    }\n\n    // When globalIlluminationReach is 0, no sample at all\n    // When globalIlluminationReach is 1, the ray will go through the whole\n    // volume\n    float maxTravelDistance = mix(0.0, volume.diagonalLength,\n                                  volume.globalIlluminationReach);\n    float startDistance = max(intersectionDistances[0], 0.0);\n    float endDistance = min(intersectionDistances[1], startDistance + maxTravelDistance);\n    #ifdef vtkClippingPlanesOn\n      endDistance = min(endDistance, clippingPlanesMaxDistance);\n    #endif\n    if (endDistance - startDistance < 0.0) {\n      return 1.0;\n    }\n\n    // These two variables are used to compute posIS, without having to call\n    // VCtoIS at each step\n    vec3 initialPosIS = posVCtoIS(initialPosVC);\n    // The light dir is scaled and rotated, but not translated, as it is a\n    // vector (w = 0)\n    vec3 scaledLightDirIS = vecVCToIS(lightDirNormVC);\n\n    float shadow = 1.0;\n    for (float currentDistance = startDistance; currentDistance <= endDistance;\n          currentDistance += rayStepLength) {\n      vec3 posIS = initialPosIS + currentDistance * scaledLightDirIS;\n      vec4 scalar = getTextureValue(posIS);\n      float opacity = getOpacityFromTexture(scalar.r, 0, 0.5);\n      #if defined(EnabledGradientOpacity) && !defined(EnabledIndependentComponents)\n        vec3 scalarInterp[2];\n        vec4 normal = computeNormalForDensity(posIS, scalarInterp, 3);\n        float opacityFactor = computeGradientOpacityFactor(normal.w, 0);\n        opacity *= opacityFactor;\n      #endif\n      shadow *= 1.0 - opacity;\n\n      // Early termination if shadow coeff is near 0.0\n      if (shadow < EPSILON) {\n        return 0.0;\n      }\n    }\n    return shadow;\n  }\n\n  // Some cache for volume shadows\n  struct {\n    vec3 posVC;\n    float shadow;\n  } cachedShadows[vtkNumberOfLights];\n\n  // Memoised version\n  float computeVolumeShadow(vec3 posVC, vec3 lightDirNormVC, int lightIdx) {\n    if (posVC == cachedShadows[lightIdx].posVC) {\n      return cachedShadows[lightIdx].shadow;\n    }\n    float shadow = computeVolumeShadowWithoutCache(posVC, lightDirNormVC);\n    cachedShadows[lightIdx].posVC = posVC;\n    cachedShadows[lightIdx].shadow = shadow;\n    return shadow;\n  }\n\n#endif\n\n//=======================================================================\n// surface light contribution\n#if vtkNumberOfLights > 0\n  vec3 applyLighting(vec3 tColor, vec4 normalVC) {\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    for (int lightIdx = 0; lightIdx < vtkNumberOfLights; lightIdx++) {\n      float df = dot(normalVC.xyz, lights[lightIdx].directionVC);\n      if (df > 0.0) {\n        diffuse += df * lights[lightIdx].color;\n        float sf = dot(normalVC.xyz, -lights[lightIdx].halfAngleVC);\n        if (sf > 0.0) {\n          specular += pow(sf, volume.specularPower) * lights[lightIdx].color;\n        }\n      }\n    }\n    return tColor * (diffuse * volume.diffuse + volume.ambient) +\n          specular * volume.specular;\n  }\n\n  vec3 applySurfaceShadowLighting(vec3 tColor, float alpha, vec3 posVC,\n                                  vec4 normalVC) {\n    // everything in VC\n    vec3 diffuse = vec3(0.0);\n    vec3 specular = vec3(0.0);\n    for (int ligthIdx = 0; ligthIdx < vtkNumberOfLights; ligthIdx++) {\n      vec3 vertLightDirection;\n      float attenuation;\n      if (lights[ligthIdx].isPositional == 1) {\n        vertLightDirection = posVC - lights[ligthIdx].positionVC;\n        float lightDistance = length(vertLightDirection);\n        // Normalize with precomputed length\n        vertLightDirection = vertLightDirection / lightDistance;\n        // Base attenuation\n        vec3 attenuationPolynom = lights[ligthIdx].attenuation;\n        attenuation =\n            1.0 / (attenuationPolynom[0] +\n                  lightDistance * (attenuationPolynom[1] +\n                                    lightDistance * attenuationPolynom[2]));\n        // Cone attenuation\n        float coneDot = dot(vertLightDirection, lights[ligthIdx].directionVC);\n        // Per OpenGL standard cone angle is 90 or less for a spot light\n        if (lights[ligthIdx].coneAngle <= 90.0) {\n          if (coneDot >= cos(radians(lights[ligthIdx].coneAngle))) {\n            // Inside the cone\n            attenuation *= pow(coneDot, lights[ligthIdx].exponent);\n          } else {\n            // Outside the cone\n            attenuation = 0.0;\n          }\n        }\n      } else {\n        vertLightDirection = lights[ligthIdx].directionVC;\n        attenuation = 1.0;\n      }\n\n      float ndotL = dot(normalVC.xyz, vertLightDirection);\n      if (ndotL < 0.0 && twoSidedLighting == 1) {\n        ndotL = -ndotL;\n      }\n      if (ndotL > 0.0) {\n        // Diffuse\n        diffuse += ndotL * attenuation * lights[ligthIdx].color;\n        // Specular\n        float vdotR =\n            dot(-rayDirVC, normalize(vertLightDirection - 2.0 * ndotL * normalVC.xyz));\n        if (vdotR > 0.0) {\n          specular += pow(vdotR, volume.specularPower) * attenuation *\n                      lights[ligthIdx].color;\n        }\n      }\n    }\n    #if vtkMaxLaoKernelSize > 0\n      float laoFactor = computeLAO(posVC, normalVC, alpha);\n    #else\n      const float laoFactor = 1.0;\n    #endif\n    return tColor * (diffuse * volume.diffuse +\n                    volume.ambient * laoFactor) +\n          specular * volume.specular;\n  }\n\n  vec3 applyVolumeShadowLighting(vec3 tColor, vec3 posVC) {\n    // Here we have no effect of cones and no attenuation\n    vec3 diffuse = vec3(0.0);\n    for (int lightIdx = 0; lightIdx < vtkNumberOfLights; lightIdx++) {\n      vec3 lightDirVC = lights[lightIdx].isPositional == 1\n                            ? normalize(lights[lightIdx].positionVC - posVC)\n                            : -lights[lightIdx].directionVC;\n      float shadowCoeff = computeVolumeShadow(posVC, lightDirVC, lightIdx);\n      float phaseAttenuation = phaseFunction(dot(rayDirVC, lightDirVC));\n      diffuse += phaseAttenuation * shadowCoeff * lights[lightIdx].color;\n    }\n    return tColor * (diffuse * volume.diffuse + volume.ambient);\n  }\n#endif\n\n// LAO of surface shadows and volume shadows only work with dependent components\nvec3 applyAllLightning(vec3 tColor, float alpha, vec3 posVC,\n                       vec4 surfaceNormalVC) {\n  #if vtkNumberOfLights > 0\n    // 0 <= volCoeff < EPSILON => only surface shadows\n    // EPSILON <= volCoeff < 1 - EPSILON => mix of surface and volume shadows\n    // 1 - EPSILON <= volCoeff => only volume shadows\n    float volCoeff = volume.volumetricScatteringBlending *\n                    (1.0 - alpha / 2.0) *\n                    (1.0 - atan(surfaceNormalVC.w) * INV4PI);\n\n    // Compute surface lighting if needed\n    vec3 surfaceShadedColor = tColor;\n    #ifdef EnableSurfaceLighting\n      if (volCoeff < 1.0 - EPSILON) {\n        surfaceShadedColor =\n            applySurfaceShadowLighting(tColor, alpha, posVC, surfaceNormalVC);\n      }\n    #endif\n\n    // Compute volume lighting if needed\n    vec3 volumeShadedColor = tColor;\n    #ifdef EnableVolumeLighting\n      if (volCoeff >= EPSILON) {\n        volumeShadedColor = applyVolumeShadowLighting(tColor, posVC);\n      }\n    #endif\n\n    // Return the right mix\n    if (volCoeff < EPSILON) {\n      // Surface shadows\n      return surfaceShadedColor;\n    }\n    if (volCoeff >= 1.0 - EPSILON) {\n      // Volume shadows\n      return volumeShadedColor;\n    }\n    // Mix of surface and volume shadows\n    return mix(surfaceShadedColor, volumeShadedColor, volCoeff);\n  #endif\n  return tColor;\n}\n\nvec4 getColorForLabelOutline() {\n  vec3 centerPosIS =\n      fragCoordToIndexSpace(gl_FragCoord); // pos in texture space\n  vec4 centerValue = getTextureValue(centerPosIS);\n  bool pixelOnBorder = false;\n  vec4 tColor = vec4(getColorFromTexture(centerValue.r, 0, 0.5),\n                     getOpacityFromTexture(centerValue.r, 0, 0.5));\n\n  int segmentIndex = int(centerValue.r * 255.0);\n\n  // Use texture sampling for outlineThickness\n  float textureCoordinate = float(segmentIndex - 1) / 1024.0;\n  float textureValue =\n      texture2D(labelOutlineThicknessTexture, vec2(textureCoordinate, 0.5)).r;\n  int actualThickness = int(textureValue * 255.0);\n\n  // If it is the background (segment index 0), we should quickly bail out.\n  // Previously, this was determined by tColor.a, which was incorrect as it\n  // prevented the outline from appearing when the fill is 0.\n  if (segmentIndex == 0) {\n    return vec4(0, 0, 0, 0);\n  }\n\n  // Only perform outline check on fragments rendering voxels that aren't\n  // invisible. Saves a bunch of needless checks on the background.\n  // TODO define epsilon when building shader?\n  for (int i = -actualThickness; i <= actualThickness; i++) {\n    for (int j = -actualThickness; j <= actualThickness; j++) {\n      if (i == 0 || j == 0) {\n        continue;\n      }\n\n      vec4 neighborPixelCoord =\n          vec4(gl_FragCoord.x + float(i), gl_FragCoord.y + float(j),\n               gl_FragCoord.z, gl_FragCoord.w);\n\n      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n      vec4 value = getTextureValue(neighborPosIS);\n\n      // If any of my neighbours are not the same value as I\n      // am, this means I am on the border of the segment.\n      // We can break the loops\n      if (any(notEqual(value, centerValue))) {\n        pixelOnBorder = true;\n        break;\n      }\n    }\n\n    if (pixelOnBorder == true) {\n      break;\n    }\n  }\n\n  // If I am on the border, I am displayed at full opacity\n  if (pixelOnBorder == true) {\n    tColor.a = volume.outlineOpacity;\n  }\n\n  return tColor;\n}\n\nvec4 getColorForAdditivePreset(vec4 tValue, vec3 posVC, vec3 posIS) {\n  // compute normals\n  mat4 normalMat = computeMat4Normal(posIS, tValue);\n  vec4 normalLights[2];\n  normalLights[0] = normalMat[0];\n  normalLights[1] = normalMat[1];\n  #if vtkNumberOfLights > 0\n    if (volume.computeNormalFromOpacity == 1) {\n      for (int component = 0; component < 2; ++component) {\n        vec3 scalarInterp[2];\n        float height = volume.transferFunctionsSampleHeight[component];\n        computeNormalForDensity(posIS, scalarInterp, component);\n        normalLights[component] =\n            computeDensityNormal(scalarInterp, height, 1.0, component);\n      }\n    }\n  #endif\n\n  // compute opacities\n  float opacities[2];\n  opacities[0] = getOpacityFromTexture(\n      tValue[0], 0, volume.transferFunctionsSampleHeight[0]);\n  opacities[1] = getOpacityFromTexture(\n      tValue[1], 1, volume.transferFunctionsSampleHeight[1]);\n  #ifdef EnabledGradientOpacity\n    for (int component = 0; component < 2; ++component) {\n      opacities[component] *=\n          computeGradientOpacityFactor(normalMat[component].a, component);\n    }\n  #endif\n  float opacitySum = opacities[0] + opacities[1];\n  if (opacitySum <= 0.0) {\n    return vec4(0.0);\n  }\n\n  // mix the colors and opacities\n  vec3 colors[2];\n  for (int component = 0; component < 2; ++component) {\n    float sampleHeight = volume.transferFunctionsSampleHeight[component];\n    vec3 color = getColorFromTexture(tValue[component], component, sampleHeight);\n    color = applyAllLightning(color, opacities[component], posVC,\n                              normalLights[component]);\n    colors[component] = color;\n  }\n  vec3 mixedColor =\n      (opacities[0] * colors[0] + opacities[1] * colors[1]) / opacitySum;\n  return vec4(mixedColor, min(1.0, opacitySum));\n}\n\nvec4 getColorForColorizePreset(vec4 tValue, vec3 posVC, vec3 posIS) {\n  // compute normals\n  mat4 normalMat = computeMat4Normal(posIS, tValue);\n  vec4 normalLight = normalMat[0];\n  #if vtkNumberOfLights > 0\n    if (volume.computeNormalFromOpacity == 1) {\n      vec3 scalarInterp[2];\n      float height = volume.transferFunctionsSampleHeight[0];\n      computeNormalForDensity(posIS, scalarInterp, 0);\n      normalLight = computeDensityNormal(scalarInterp, height, 1.0, 0);\n    }\n  #endif\n\n  // compute opacities\n  float opacity = getOpacityFromTexture(\n      tValue[0], 0, volume.transferFunctionsSampleHeight[0]);\n  #ifdef EnabledGradientOpacity\n    opacity *= computeGradientOpacityFactor(normalMat[0].a, 0);\n  #endif\n\n  // colorizing component\n  vec3 colorizingColor = getColorFromTexture(\n      tValue[0], 1, volume.transferFunctionsSampleHeight[1]);\n  float colorizingOpacity = getOpacityFromTexture(\n      tValue[1], 1, volume.transferFunctionsSampleHeight[1]);\n\n  // mix the colors and opacities\n  vec3 color =\n      getColorFromTexture(tValue[0], 0,\n                          volume.transferFunctionsSampleHeight[0]) *\n      mix(vec3(1.0), colorizingColor, colorizingOpacity);\n  color = applyAllLightning(color, opacity, posVC, normalLight);\n  return vec4(color, opacity);\n}\n\nvec4 getColorForDefaultIndependentPreset(vec4 tValue, vec3 posIS) {\n\n  // compute the normal vectors as needed\n  #if defined(EnabledGradientOpacity) || vtkNumberOfLights > 0\n    mat4 normalMat = computeMat4Normal(posIS, tValue);\n  #endif\n\n  // process color and opacity for each component\n  // initial value of alpha is determined by wether the first component is\n  // proportional or not\n  #if defined(vtkComponent0Proportional)\n    // when it is proportional, it starts at 1 (neutral for multiplications)\n    float alpha = 1.0;\n  #else\n    // when it is not proportional, it starts at 0 (neutral for additions)\n    float alpha = 0.0;\n  #endif\n\n  vec3 mixedColor = vec3(0.0);\n  #if vtkNumberOfComponents > 0\n    {\n      const int component = 0;\n      vec3 color = getColorFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      float opacity = getOpacityFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      #if !defined(vtkComponent0Proportional)\n        float alphaContribution = volume.independentComponentMix[component] * opacity;\n        #ifdef EnabledGradientOpacity\n          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);\n        #endif\n        alpha += alphaContribution;\n        #if vtkNumberOfLights > 0\n          color = applyLighting(color, normalMat[component]);\n        #endif\n      #else\n        color *= opacity;\n        alpha *= mix(opacity, 1.0,\n                    (1.0 - volume.independentComponentMix[component]));\n      #endif\n      mixedColor += volume.independentComponentMix[component] * color;\n    }\n  #endif\n  #if vtkNumberOfComponents > 1\n    {\n      const int component = 1;\n      vec3 color = getColorFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      float opacity = getOpacityFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      #if !defined(vtkComponent1Proportional)\n        float alphaContribution = volume.independentComponentMix[component] * opacity;\n        #ifdef EnabledGradientOpacity\n          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);\n        #endif\n        alpha += alphaContribution;\n        #if vtkNumberOfLights > 0\n          color = applyLighting(color, normalMat[component]);\n        #endif\n      #else\n        color *= opacity;\n        alpha *= mix(opacity, 1.0,\n                    (1.0 - volume.independentComponentMix[component]));\n      #endif\n      mixedColor += volume.independentComponentMix[component] * color;\n    }\n  #endif\n  #if vtkNumberOfComponents > 2\n    {\n      const int component = 2;\n      vec3 color = getColorFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      float opacity = getOpacityFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      #if !defined(vtkComponent2Proportional)\n        float alphaContribution = volume.independentComponentMix[component] * opacity;\n        #ifdef EnabledGradientOpacity\n          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);\n        #endif\n        alpha += alphaContribution;\n        #if vtkNumberOfLights > 0\n          color = applyLighting(color, normalMat[component]);\n        #endif\n      #else\n        color *= opacity;\n        alpha *= mix(opacity, 1.0,\n                    (1.0 - volume.independentComponentMix[component]));\n      #endif\n      mixedColor += volume.independentComponentMix[component] * color;\n    }\n  #endif\n  #if vtkNumberOfComponents > 3\n    {\n      const int component = 3;\n      vec3 color = getColorFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      float opacity = getOpacityFromTexture(\n          tValue[component], component,\n          volume.transferFunctionsSampleHeight[component]);\n      #if !defined(vtkComponent3Proportional)\n        float alphaContribution = volume.independentComponentMix[component] * opacity;\n        #ifdef EnabledGradientOpacity\n          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);\n        #endif\n        alpha += alphaContribution;\n        #if vtkNumberOfLights > 0\n          color = applyLighting(color, normalMat[component]);\n        #endif\n      #else\n        color *= opacity;\n        alpha *= mix(opacity, 1.0,\n                    (1.0 - volume.independentComponentMix[component]));\n      #endif\n      mixedColor += volume.independentComponentMix[component] * color;\n    }\n  #endif\n\n  return vec4(mixedColor, alpha);\n}\n\nvec4 getColorForDependentComponents(vec4 tValue, vec3 posVC, vec3 posIS) {\n  #if defined(EnabledGradientOpacity) || vtkNumberOfLights > 0\n    // use component 3 of the opacity texture as getTextureValue() sets alpha to\n    // the opacity value\n    vec3 scalarInterp[2];\n    vec4 normal0 = computeNormalForDensity(posIS, scalarInterp, 3);\n    float gradientOpacity = computeGradientOpacityFactor(normal0.a, 0);\n  #endif\n\n  // get color and opacity\n  #if vtkNumberOfComponents == 1\n    vec3 tColor = getColorFromTexture(tValue.r, 0, 0.5);\n    float alpha = getOpacityFromTexture(tValue.r, 0, 0.5);\n  #endif\n  #if vtkNumberOfComponents == 2\n    vec3 tColor = vec3(tValue.r * volume.colorTextureScale[0] +\n                  volume.colorTextureShift[0]);\n    float alpha = getOpacityFromTexture(tValue.a, 1, 0.5);\n  #endif\n  #if vtkNumberOfComponents == 3\n      vec3 tColor = tValue.rgb * volume.colorTextureScale.rgb +\n              volume.colorTextureShift.rgb;\n      float alpha = getOpacityFromTexture(tValue.a, 0, 0.5);\n  #endif\n  #if vtkNumberOfComponents == 4\n      vec3 tColor = tValue.rgb * volume.colorTextureScale.rgb +\n              volume.colorTextureShift.rgb;\n      float alpha = getOpacityFromTexture(tValue.a, 3, 0.5);\n  #endif\n\n  // Apply gradient opacity\n  #if defined(EnabledGradientOpacity)\n    alpha *= gradientOpacity;\n  #endif\n\n  #if vtkNumberOfComponents == 1\n    if (alpha < EPSILON) {\n      return vec4(0.0);\n    }\n  #endif\n\n  // lighting\n  #if vtkNumberOfLights > 0\n    vec4 normalLight;\n    if (volume.computeNormalFromOpacity == 1) {\n      if (normal0[3] != 0.0) {\n        normalLight =\n            computeDensityNormal(scalarInterp, 0.5, gradientOpacity, 0);\n        if (normalLight[3] == 0.0) {\n          normalLight = normal0;\n        }\n      }\n    } else {\n      normalLight = normal0;\n    }\n    tColor = applyAllLightning(tColor, alpha, posVC, normalLight);\n  #endif\n\n  return vec4(tColor, alpha);\n}\n\nvec4 getColorForValue(vec4 tValue, vec3 posVC, vec3 posIS) {\n  #ifdef EnableColorForValueFunctionId0\n    return getColorForDependentComponents(tValue, posVC, posIS);\n  #endif\n\n  #ifdef EnableColorForValueFunctionId1\n    return getColorForAdditivePreset(tValue, posVC, posIS);\n  #endif\n\n  #ifdef EnableColorForValueFunctionId2\n    return getColorForColorizePreset(tValue, posVC, posIS);\n  #endif\n\n  #ifdef EnableColorForValueFunctionId3\n    /*\n      * Mix the color information from all the independent components to get a\n      * single rgba output. See other shader functions like\n      * `getColorForAdditivePreset` to learn how to create a custom color mix.\n      * The custom color mix should return a value, but if it doesn't, it will\n      * fallback on the default shading\n      */\n    //VTK::CustomColorMix\n  #endif\n\n  #if defined(EnableColorForValueFunctionId4) || defined(EnableColorForValueFunctionId3)\n    return getColorForDefaultIndependentPreset(tValue, posIS);\n  #endif\n\n  #ifdef EnableColorForValueFunctionId5\n    return getColorForLabelOutline();\n  #endif\n}\n\nbool valueWithinScalarRange(vec4 val) {\n  #if vtkNumberOfComponents > 1 && !defined(EnabledIndependentComponents)\n    return false;\n  #endif\n  vec4 rangeMin = volume.ipScalarRangeMin;\n  vec4 rangeMax = volume.ipScalarRangeMax;\n  for (int component = 0; component < vtkNumberOfComponents; ++component) {\n    if (val[component] < rangeMin[component] ||\n        rangeMax[component] < val[component]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n#if vtkBlendMode == LABELMAP_EDGE_PROJECTION_BLEND\n  bool checkOnEdgeForNeighbor(int xFragmentOffset, int yFragmentOffset,\n                              int segmentIndex, vec3 stepIS) {\n    vec3 volumeDimensions = vec3(volume.dimensions);\n    vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(xFragmentOffset),\n                                  gl_FragCoord.y + float(yFragmentOffset),\n                                  gl_FragCoord.z, gl_FragCoord.w);\n    vec3 originalNeighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n\n    vec3 neighborPosIS = originalNeighborPosIS;\n    for (int k = 0; k < vtkMaximumNumberOfSamples / 2; ++k) {\n      ivec3 texCoord = ivec3(neighborPosIS * volumeDimensions);\n      vec4 texValue = rawFetchTexture(texCoord);\n      if (int(texValue.g) == segmentIndex) {\n        // not on edge\n        return false;\n      }\n      neighborPosIS += stepIS;\n    }\n\n    neighborPosIS = originalNeighborPosIS;\n    for (int k = 0; k < vtkMaximumNumberOfSamples / 2; ++k) {\n      ivec3 texCoord = ivec3(neighborPosIS * volumeDimensions);\n      vec4 texValue = rawFetchTexture(texCoord);\n      if (int(texValue.g) == segmentIndex) {\n        // not on edge\n        return false;\n      }\n      neighborPosIS -= stepIS;\n    }\n\n    // onedge\n    float sampleHeight = volume.transferFunctionsSampleHeight[1];\n    vec3 tColorSegment =\n        getColorFromTexture(float(segmentIndex), 1, sampleHeight);\n    float pwfValueSegment =\n        getOpacityFromTexture(float(segmentIndex), 1, sampleHeight);\n    gl_FragData[0] = vec4(tColorSegment, pwfValueSegment);\n    return true;\n  }\n#endif\n\nvec4 getColorAtPos(vec3 posVC) {\n  vec3 posIS = posVCtoIS(posVC);\n  vec4 texValue = getTextureValue(posIS);\n  return getColorForValue(texValue, posVC, posIS);\n}\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 rayOriginVC, vec3 rayDirVC, float minDistance,\n                float maxDistance) {\n  // start slightly inside and apply some jitter\n  vec3 stepVC = rayDirVC * sampleDistance;\n  float raySteps = (maxDistance - minDistance) / sampleDistance;\n\n  // Avoid 0.0 jitter\n  float jitter = 0.01 + 0.99 * fragmentSeed;\n\n  #if vtkBlendMode == COMPOSITE_BLEND\n    // now map through opacity and color\n    vec3 firstPosVC = rayOriginVC + minDistance * rayDirVC;\n    vec4 firstColor = getColorAtPos(firstPosVC);\n\n    // handle very thin volumes\n    if (raySteps <= 1.0) {\n      firstColor.a = 1.0 - pow(1.0 - firstColor.a, raySteps);\n      gl_FragData[0] = firstColor;\n      return;\n    }\n\n    // first color only counts for `jitter` factor of the step\n    firstColor.a = 1.0 - pow(1.0 - firstColor.a, jitter);\n    vec4 color = vec4(firstColor.rgb * firstColor.a, firstColor.a);\n    vec3 posVC = firstPosVC + jitter * stepVC;\n    float stepsTraveled = jitter;\n\n    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) {\n        break;\n      }\n      vec4 tColor = getColorAtPos(posVC);\n\n      color = color + vec4(tColor.rgb * tColor.a, tColor.a) * (1.0 - color.a);\n      stepsTraveled++;\n      posVC += stepVC;\n      if (color.a > 0.99) {\n        color.a = 1.0;\n        break;\n      }\n    }\n\n    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0) {\n      vec3 endPosVC = rayOriginVC + maxDistance * rayDirVC;\n      vec4 tColor = getColorAtPos(endPosVC);\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);\n\n      float mix = (1.0 - color.a);\n      color = color + vec4(tColor.rgb * tColor.a, tColor.a) * mix;\n    }\n\n    gl_FragData[0] = vec4(color.rgb / color.a, color.a);\n  #endif\n\n  #if vtkBlendMode == MAXIMUM_INTENSITY_BLEND ||                                 \\\n      vtkBlendMode == MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == MAXIMUM_INTENSITY_BLEND\n      #define OP max\n    #else\n      #define OP min\n    #endif\n\n    vec3 posVC = rayOriginVC + minDistance * rayDirVC;\n    float stepsTraveled = 0.0;\n\n    // Find a value to initialize the selected variables\n    vec4 selectedValue;\n    vec3 selectedPosVC;\n    vec3 selectedPosIS;\n    {\n      vec3 posIS = posVCtoIS(posVC);\n      selectedValue = getTextureValue(posIS);\n      selectedPosVC = posVC;\n      selectedPosIS = posIS;\n    }\n\n    // If the clipping range is shorter than the sample distance\n    // we can skip the sampling loop along the ray.\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(selectedValue, selectedPosVC, selectedPosIS);\n      return;\n    }\n\n    posVC += jitter * stepVC;\n    stepsTraveled += jitter;\n\n    // Sample along the ray until vtkMaximumNumberOfSamples,\n    // ending slightly inside the total distance\n    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) {\n        break;\n      }\n\n      // Get selected values\n      vec3 posIS = posVCtoIS(posVC);\n      vec4 previousSelectedValue = selectedValue;\n      vec4 currentValue = getTextureValue(posIS);\n      selectedValue = OP(selectedValue, currentValue);\n      if (previousSelectedValue != selectedValue) {\n        selectedPosVC = posVC;\n        selectedPosIS = posIS;\n      }\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posVC += stepVC;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posVC = rayOriginVC + maxDistance * rayDirVC;\n    {\n      vec3 posIS = posVCtoIS(posVC);\n      vec4 previousSelectedValue = selectedValue;\n      vec4 currentValue = getTextureValue(posIS);\n      selectedValue = OP(selectedValue, currentValue);\n      if (previousSelectedValue != selectedValue) {\n        selectedPosVC = posVC;\n        selectedPosIS = posIS;\n      }\n    }\n\n    gl_FragData[0] = getColorForValue(selectedValue, selectedPosVC, selectedPosIS);\n  #endif\n\n  #if vtkBlendMode == ADDITIVE_INTENSITY_BLEND ||                                \\\n      vtkBlendMode == AVERAGE_INTENSITY_BLEND\n    vec4 sum = vec4(0.);\n    #if vtkBlendMode == AVERAGE_INTENSITY_BLEND\n      float totalWeight = 0.0;\n    #endif\n    vec3 posVC = rayOriginVC + minDistance * rayDirVC;\n    float stepsTraveled = 0.0;\n\n    vec3 posIS = posVCtoIS(posVC);\n    vec4 value = getTextureValue(posIS);\n\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(value * raySteps, posVC, posIS);\n      return;\n    }\n\n    if (valueWithinScalarRange(value)) {\n      sum += value * jitter;\n      #if vtkBlendMode == AVERAGE_INTENSITY_BLEND\n        totalWeight += jitter;\n      #endif\n    }\n    posVC += jitter * stepVC;\n    stepsTraveled += jitter;\n\n    // Sample along the ray until vtkMaximumNumberOfSamples,\n    // ending slightly inside the total distance\n    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) {\n        break;\n      }\n\n      posIS = posVCtoIS(posVC);\n      value = getTextureValue(posIS);\n      // One can control the scalar range by setting the AverageIPScalarRange to\n      // disregard scalar values, not in the range of interest, from the average\n      // computation. Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      if (valueWithinScalarRange(value)) {\n        sum += value;\n        #if vtkBlendMode == AVERAGE_INTENSITY_BLEND\n          totalWeight++;\n        #endif\n      }\n\n      stepsTraveled++;\n      posVC += stepVC;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posVC = rayOriginVC + maxDistance * rayDirVC;\n    posIS = posVCtoIS(posVC);\n    value = getTextureValue(posIS);\n    if (valueWithinScalarRange(value)) {\n      sum += value;\n      #if vtkBlendMode == AVERAGE_INTENSITY_BLEND\n        totalWeight += raySteps - stepsTraveled;\n      #endif\n    }\n\n    #if vtkBlendMode == AVERAGE_INTENSITY_BLEND\n      sum /= vec4(totalWeight, totalWeight, totalWeight, 1.0);\n    #endif\n\n    gl_FragData[0] = getColorForValue(sum, posVC, posIS);\n  #endif\n\n  #if vtkBlendMode == RADON_TRANSFORM_BLEND\n    float normalizedRayIntensity = 1.0;\n    vec3 posVC = rayOriginVC + minDistance * rayDirVC;\n    float stepsTraveled = 0.0;\n\n    // handle very thin volumes\n    if (raySteps <= 1.0) {\n      vec3 posIS = posVCtoIS(posVC);\n      vec4 tValue = getTextureValue(posIS);\n      normalizedRayIntensity -= raySteps * sampleDistance *\n                                getOpacityFromTexture(tValue.r, 0, 0.5);\n      gl_FragData[0] =\n          vec4(getColorFromTexture(normalizedRayIntensity, 0, 0.5), 1.0);\n      return;\n    }\n\n    posVC += jitter * stepVC;\n    stepsTraveled += jitter;\n\n    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {\n      if (stepsTraveled + 1.0 >= raySteps) {\n        break;\n      }\n\n      vec3 posIS = posVCtoIS(posVC);\n      vec4 value = getTextureValue(posIS);\n      // Convert scalar value to normalizedRayIntensity coefficient and\n      // accumulate normalizedRayIntensity\n      normalizedRayIntensity -=\n          sampleDistance * getOpacityFromTexture(value.r, 0, 0.5);\n\n      posVC += stepVC;\n      stepsTraveled++;\n    }\n\n    // map normalizedRayIntensity to color\n    gl_FragData[0] =\n        vec4(getColorFromTexture(normalizedRayIntensity, 0, 0.5), 1.0);\n  #endif\n\n  #if vtkBlendMode == LABELMAP_EDGE_PROJECTION_BLEND\n    // Only works with a single volume\n    vec3 posVC = rayOriginVC + minDistance * rayDirVC;\n    float stepsTraveled = 0.0;\n    vec3 posIS = posVCtoIS(posVC);\n    vec4 tValue = getTextureValue(posIS);\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(tValue, posVC, posIS);\n      return;\n    }\n\n    vec3 stepIS = vecVCToIS(stepVC);\n    vec4 value = tValue;\n    posIS += jitter * stepIS;\n    stepsTraveled += jitter;\n    vec3 maxPosIS = posIS; // Store the position of the max value\n    int segmentIndex = int(value.g);\n    bool originalPosHasSeenNonZero = false;\n\n    if (segmentIndex != 0) {\n      // Tried using the segment index in an boolean array but reading\n      // from the array by dynamic indexing was horrondously slow\n      // so use bit masking instead and assign 1 to the bit corresponding to the\n      // segment index and later check if the bit is set via bit operations\n      setLabelOutlineBit(segmentIndex);\n    }\n\n    // Sample along the ray until vtkMaximumNumberOfSamples,\n    // ending slightly inside the total distance\n    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) {\n        break;\n      }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n      segmentIndex = int(tValue.g);\n\n      if (segmentIndex != 0) {\n        originalPosHasSeenNonZero = true;\n        setLabelOutlineBit(segmentIndex);\n      }\n\n      if (tValue.r > value.r) {\n        value = tValue;   // Update the max value\n        maxPosIS = posIS; // Update the position where max occurred\n      }\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = posVCtoIS(rayOriginVC + maxDistance * rayDirVC);\n    tValue = getTextureValue(posIS);\n\n    if (tValue.r > value.r) {\n      value = tValue;   // Update the max value\n      maxPosIS = posIS; // Update the position where max occurred\n    }\n\n    // If we have not seen any non-zero segments, we can return early\n    // and grab color from the actual center value first component (image)\n    if (!originalPosHasSeenNonZero) {\n      vec3 maxPosVC = posIStoVC(maxPosIS);\n      gl_FragData[0] = getColorForValue(value, maxPosVC, maxPosIS);\n      return;\n    }\n\n    vec3 neighborRayStepsIS = stepIS;\n    float neighborRaySteps = raySteps;\n    bool shouldLookInAllNeighbors = false;\n\n    vec3 volumeSpacings = volume.spacing;\n    float minVoxelSpacing =\n        min(volumeSpacings[0], min(volumeSpacings[1], volumeSpacings[2]));\n    vec4 base =\n        vec4(gl_FragCoord.x, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);\n\n    vec4 baseXPlus = vec4(gl_FragCoord.x + 1.0, gl_FragCoord.y, gl_FragCoord.z,\n                          gl_FragCoord.w);\n    vec4 baseYPlus = vec4(gl_FragCoord.x, gl_FragCoord.y + 1.0, gl_FragCoord.z,\n                          gl_FragCoord.w);\n\n    vec3 baseWorld = fragCoordToWorld(base);\n    vec3 baseXPlusWorld = fragCoordToWorld(baseXPlus);\n    vec3 baseYPlusWorld = fragCoordToWorld(baseYPlus);\n\n    float XPlusDiff = length(baseXPlusWorld - baseWorld);\n    float YPlusDiff = length(baseYPlusWorld - baseWorld);\n\n    float minFragSpacingWorld = min(XPlusDiff, YPlusDiff);\n\n    for (int s = 1; s < MAX_SEGMENT_INDEX; s++) {\n      // bail out quickly if the segment index has not\n      // been seen by the center segment\n      if (!isLabelOutlineBitSet(s)) {\n        continue;\n      }\n\n      // Use texture sampling for outlineThickness so that we can have\n      // per segment thickness\n      float textureCoordinate = float(s - 1) / 1024.0;\n      float textureValue =\n          texture2D(labelOutlineThicknessTexture, vec2(textureCoordinate, 0.5)).r;\n\n      int actualThickness = int(textureValue * 255.0);\n\n      // check the extreme points in the neighborhood since there is a better\n      // chance of finding the edge there, so that we can bail out\n      // faster if we find the edge\n      bool onEdge = checkOnEdgeForNeighbor(-actualThickness, -actualThickness, s,\n                                          stepIS) ||\n                    checkOnEdgeForNeighbor(actualThickness, actualThickness, s,\n                                          stepIS) ||\n                    checkOnEdgeForNeighbor(actualThickness, -actualThickness, s,\n                                          stepIS) ||\n                    checkOnEdgeForNeighbor(-actualThickness, +actualThickness, s,\n                                          stepIS);\n\n      if (onEdge) {\n        return;\n      }\n\n      // since the next step is computationally expensive, we need to perform\n      // some optimizations to avoid it if possible. One of the optimizations\n      // is to check the whether the minimum of the voxel spacing is greater than\n      // the 2 * the thickness of the outline segment. If that is the case\n      // then we can safely skip the next step since we can be sure that the\n      // the previous 4 checks on the extreme points would caught the entirety\n      // of the all the fragments inside. i.e., this happens when we zoom out,\n      if (minVoxelSpacing >\n          (2.0 * float(actualThickness) - 1.0) * minFragSpacingWorld) {\n        continue;\n      }\n\n      // Loop through the rest, skipping the processed extremes and the center\n      for (int i = -actualThickness; i <= actualThickness; i++) {\n        for (int j = -actualThickness; j <= actualThickness; j++) {\n          if (i == 0 && j == 0)\n            continue; // Skip the center\n          if (abs(i) == actualThickness && abs(j) == actualThickness)\n            continue; // Skip corners\n          if (checkOnEdgeForNeighbor(i, j, s, stepIS)) {\n            return;\n          }\n        }\n      }\n    }\n\n    float sampleHeight = volume.transferFunctionsSampleHeight[0];\n    vec3 tColor0 = getColorFromTexture(value.r, 0, sampleHeight);\n    float pwfValue0 = getOpacityFromTexture(value.r, 0, sampleHeight);\n    gl_FragData[0] = vec4(tColor0, pwfValue0);\n  #endif\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayOriginVC, vec3 rayDirVC) {\n  vec2 dists = rayIntersectVolumeDistances(rayOriginVC, rayDirVC);\n\n  //VTK::ClipPlane::Impl\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0, dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick / rayDirVC.z;\n  dists.y = min(farDist, dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\nfloat getFragmentSeed() {\n  // This first noise has a diagonal pattern\n  float firstNoise =\n      fract(sin(dot(gl_FragCoord.xy, vec2(12.9898, 78.233))) * 43758.5453);\n  // This second noise is made out of blocks of CPU generated noise\n  float secondNoise = texture2D(jtexture, gl_FragCoord.xy / 32.0).r;\n  // Combine the two sources of noise in a way that the distribution is uniform\n  // in [0,1[\n  float noiseSum = firstNoise + secondNoise;\n  return noiseSum < 1.0 ? noiseSum : noiseSum - 1.0;\n}\n\nvoid main() {\n  fragmentSeed = getFragmentSeed();\n\n  if (cameraParallel == 1) {\n    // Camera is parallel, so the rayDir is just the direction of the camera.\n    rayDirVC = vec3(0.0, 0.0, -1.0);\n  } else {\n    // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n    rayDirVC = normalize(vertexVCVSOutput);\n  }\n\n  vec3 rayOriginVC = vertexVCVSOutput;\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayOriginVC, rayDirVC);\n  if (rayStartEndDistancesVC[1] <= rayStartEndDistancesVC[0] ||\n      rayStartEndDistancesVC[1] <= 0.0) {\n    // Volume not hit or behind the ray\n    discard;\n  }\n\n  // Perform the blending operation along the ray\n  applyBlend(rayOriginVC, rayDirVC, rayStartEndDistancesVC[0], rayStartEndDistancesVC[1]);\n}\n"},169:function(e){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 PCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = PCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n"},5735:function(e){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],i=e[1],o=e[2],a=e[3];i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&o|~i&a)+t[0]-0x28955b88|0)<<7|n>>>25)+i|0)&i|~n&o)+t[1]-0x173848aa|0)<<12|a>>>20)+n|0)&n|~a&i)+t[2]+0x242070db|0)<<17|o>>>15)+a|0)&a|~o&n)+t[3]-0x3e423112|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&o|~i&a)+t[4]-0xa83f051|0)<<7|n>>>25)+i|0)&i|~n&o)+t[5]+0x4787c62a|0)<<12|a>>>20)+n|0)&n|~a&i)+t[6]-0x57cfb9ed|0)<<17|o>>>15)+a|0)&a|~o&n)+t[7]-0x2b96aff|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&o|~i&a)+t[8]+0x698098d8|0)<<7|n>>>25)+i|0)&i|~n&o)+t[9]-0x74bb0851|0)<<12|a>>>20)+n|0)&n|~a&i)+t[10]-42063|0)<<17|o>>>15)+a|0)&a|~o&n)+t[11]-0x76a32842|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&o|~i&a)+t[12]+0x6b901122|0)<<7|n>>>25)+i|0)&i|~n&o)+t[13]-0x2678e6d|0)<<12|a>>>20)+n|0)&n|~a&i)+t[14]-0x5986bc72|0)<<17|o>>>15)+a|0)&a|~o&n)+t[15]+0x49b40821|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&a|o&~a)+t[1]-0x9e1da9e|0)<<5|n>>>27)+i|0)&o|i&~o)+t[6]-0x3fbf4cc0|0)<<9|a>>>23)+n|0)&i|n&~i)+t[11]+0x265e5a51|0)<<14|o>>>18)+a|0)&n|a&~n)+t[0]-0x16493856|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&a|o&~a)+t[5]-0x29d0efa3|0)<<5|n>>>27)+i|0)&o|i&~o)+t[10]+0x2441453|0)<<9|a>>>23)+n|0)&i|n&~i)+t[15]-0x275e197f|0)<<14|o>>>18)+a|0)&n|a&~n)+t[4]-0x182c0438|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&a|o&~a)+t[9]+0x21e1cde6|0)<<5|n>>>27)+i|0)&o|i&~o)+t[14]-0x3cc8f82a|0)<<9|a>>>23)+n|0)&i|n&~i)+t[3]-0xb2af279|0)<<14|o>>>18)+a|0)&n|a&~n)+t[8]+0x455a14ed|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i&a|o&~a)+t[13]-0x561c16fb|0)<<5|n>>>27)+i|0)&o|i&~o)+t[2]-0x3105c08|0)<<9|a>>>23)+n|0)&i|n&~i)+t[7]+0x676f02d9|0)<<14|o>>>18)+a|0)&n|a&~n)+t[12]-0x72d5b376|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i^o^a)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^o)+t[8]-0x788e097f|0)<<11|a>>>21)+n|0)^n^i)+t[11]+0x6d9d6122|0)<<16|o>>>16)+a|0)^a^n)+t[14]-0x21ac7f4|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i^o^a)+t[1]-0x5b4115bc|0)<<4|n>>>28)+i|0)^i^o)+t[4]+0x4bdecfa9|0)<<11|a>>>21)+n|0)^n^i)+t[7]-0x944b4a0|0)<<16|o>>>16)+a|0)^a^n)+t[10]-0x41404390|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i^o^a)+t[13]+0x289b7ec6|0)<<4|n>>>28)+i|0)^i^o)+t[0]-0x155ed806|0)<<11|a>>>21)+n|0)^n^i)+t[3]-0x2b10cf7b|0)<<16|o>>>16)+a|0)^a^n)+t[6]+0x4881d05|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((a=((a+=((n=((n+=(i^o^a)+t[9]-0x262b2fc7|0)<<4|n>>>28)+i|0)^i^o)+t[12]-0x1924661b|0)<<11|a>>>21)+n|0)^n^i)+t[15]+0x1fa27cf8|0)<<16|o>>>16)+a|0)^a^n)+t[2]-0x3b53a99b|0)<<23|i>>>9)+o|0,i=((i+=((a=((a+=(i^((n=((n+=(o^(i|~a))+t[0]-0xbd6ddbc|0)<<6|n>>>26)+i|0)|~o))+t[7]+0x432aff97|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~i))+t[14]-0x546bdc59|0)<<15|o>>>17)+a|0)|~n))+t[5]-0x36c5fc7|0)<<21|i>>>11)+o|0,i=((i+=((a=((a+=(i^((n=((n+=(o^(i|~a))+t[12]+0x655b59c3|0)<<6|n>>>26)+i|0)|~o))+t[3]-0x70f3336e|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~i))+t[10]-1051523|0)<<15|o>>>17)+a|0)|~n))+t[1]-0x7a7ba22f|0)<<21|i>>>11)+o|0,i=((i+=((a=((a+=(i^((n=((n+=(o^(i|~a))+t[8]+0x6fa87e4f|0)<<6|n>>>26)+i|0)|~o))+t[15]-0x1d31920|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~i))+t[6]-0x5cfebcec|0)<<15|o>>>17)+a|0)|~n))+t[13]+0x4e0811a1|0)<<21|i>>>11)+o|0,i=((i+=((a=((a+=(i^((n=((n+=(o^(i|~a))+t[4]-0x8ac817e|0)<<6|n>>>26)+i|0)|~o))+t[11]-0x42c50dcb|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~i))+t[2]+0x2ad7d2bb|0)<<15|o>>>17)+a|0)|~n))+t[9]-0x14792c6f|0)<<21|i>>>11)+o|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=o+e[2]|0,e[3]=a+e[3]|0}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function a(e){var t,o,a,s,l,u,c=e.length,d=[0x67452301,-0x10325477,-0x67452302,0x10325476];for(t=64;t<=c;t+=64)n(d,i(e.substring(t-64,t)));for(o=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(d,a),t=0;t<16;t+=1)a[t]=0;return l=parseInt((s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/))[2],16),u=parseInt(s[1],16)||0,a[14]=l,a[15]=u,n(d,a),d}function s(e){var n;for(n=0;n<e.length;n+=1)e[n]=function(e){var n,i="";for(n=0;n<4;n+=1)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}(e[n]);return e.join("")}function l(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return s(a("hello")),"u"<typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var i,o,a,s,l=this.byteLength,u=e(t,l),c=l;return void 0!==n&&(c=e(n,l)),u>c?new ArrayBuffer(0):(a=new Uint8Array(o=new ArrayBuffer(i=c-u)),s=new Uint8Array(this,u,i),a.set(s),o)}}(),c.prototype.append=function(e){return this.appendBinary(l(e)),this},c.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)n(this._hash,i(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},c.prototype.end=function(e){var t,n,i=this._buff,o=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(a,o),n=s(this._hash),e&&(n=u(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[0x67452301,-0x10325477,-0x67452302,0x10325476],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(e,t){var i,o,a,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;o=parseInt((i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/))[2],16),a=parseInt(i[1],16)||0,e[14]=o,e[15]=a,n(this._hash,e)},c.hash=function(e,t){return c.hashBinary(l(e),t)},c.hashBinary=function(e,t){var n=s(a(e));return t?u(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(e){var t,i,a,s=(t=this._buff.buffer,(i=new Uint8Array(t.byteLength+e.byteLength)).set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),i),l=s.length;for(this._length+=e.byteLength,a=64;a<=l;a+=64)n(this._hash,o(s.subarray(a-64,a)));return this._buff=new Uint8Array(a-64<l?s.buffer.slice(a-64):0),this},c.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,o=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=i[t]<<(t%4<<3);return this._finish(a,o),n=s(this._hash),e&&(n=u(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[0x67452301,-0x10325477,-0x67452302,0x10325476],this},c.ArrayBuffer.prototype.getState=function(){var e,t=c.prototype.getState.call(this);return e=t.buff,t.buff=String.fromCharCode.apply(null,new Uint8Array(e)),t},c.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,i=e.length,o=new ArrayBuffer(i),a=new Uint8Array(o);for(n=0;n<i;n+=1)a[n]=e.charCodeAt(n);return t?a:o}(e.buff,!0),c.prototype.setState.call(this,e)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(e,t){var i=s(function(e){var t,i,a,s,l,u,c=e.length,d=[0x67452301,-0x10325477,-0x67452302,0x10325476];for(t=64;t<=c;t+=64)n(d,o(e.subarray(t-64,t)));for(i=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(d,a),t=0;t<16;t+=1)a[t]=0;return l=parseInt((s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/))[2],16),u=parseInt(s[1],16)||0,a[14]=l,a[15]=u,n(d,a),d}(new Uint8Array(e)));return t?u(i):i},c}()},5072:function(e){"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],u=i.base?l[0]+i.base:l[0],c=o[u]||0,d="".concat(u," ").concat(c);o[u]=c+1;var f=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=function(e,t){var n=t.domAPI(t);return n.update(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap||t.supports!==e.supports||t.layer!==e.layer)&&n.update(e=t):n.remove()}}(p,i);i.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}e.exports=function(e,o){var a=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var l=n(a[s]);t[l].references--}for(var u=i(e,o),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=u}}},7659:function(e){"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){var i,o,a;i="",n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {")),(o=void 0!==n.layer)&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}"),(a=n.sourceMap)&&"u">typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(i,t,e.options)},remove:function(){null===t.parentNode||t.parentNode.removeChild(t)}}}},1113:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},910:function(e,t,n){let i=n(2685);e.exports=class extends i{constructor(e){super(),this._messageId=1,this._messages=new Map,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._id=Math.ceil(1e7*Math.random())}terminate(){this._worker.terminate()}isFree(){return 0===this._messages.size}jobsLength(){return this._messages.size}exec(e,t=null,n=[],i){return new Promise((o,a)=>{let s=this._messageId++;this._messages.set(s,[o,a,i]),this._worker.postMessage([s,t,e],n||[])})}postMessage(e=null,t=[],n){return new Promise((i,o)=>{let a=this._messageId++;this._messages.set(a,[i,o,n]),this._worker.postMessage([a,e],t||[])})}emit(e,...t){this._worker.postMessage({eventName:e,args:t})}_onMessage(e){if(!Array.isArray(e.data)&&e.data.eventName)return super.emit(e.data.eventName,...e.data.args);let[t,...n]=e.data;if(1===t)this._onEvent(...n);else{if(0!==t)throw Error(`Wrong message type '${t}'`);this._onResult(...n)}}_onResult(e,t,n){let[i,o]=this._messages.get(e);return this._messages.delete(e),1===t?i(n):o(n)}_onEvent(e,t,n){let[,,i]=this._messages.get(e);i&&i(t,n)}}},2685:function(e){e.exports=class{constructor(){Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}emit(e,...t){if(!this.__listeners[e])return this;for(let n of this.__listeners[e])n(...t);return this}once(e,t){let n=(...i)=>{this.off(e,n),t(...i)};return this.on(e,n)}on(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}off(e,t){return this.__listeners[e]=t?this.__listeners[e].filter(e=>e!==t):[],this}}},5512:function(e){"use strict";e.exports=function(e,t,n,i){var o=self||window;try{try{try{a=new o.Blob([e])}catch(t){(a=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),a=a.getBlob()}var a,s=o.URL||o.webkitURL,l=s.createObjectURL(a),u=new o[t](l,n);return s.revokeObjectURL(l),u}catch(i){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new o[t](i,n)}}},9189:function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,(function(t){return e[t]}).bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=184)}([function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(240)),i(n(251)),i(n(175)),i(n(107)),i(n(29)),i(n(73)),i(n(106)),i(n(30)),i(n(252)),i(n(52)),i(n(97)),i(n(253)),i(n(37)),i(n(51)),i(n(173)),i(n(176)),i(n(172)),i(n(108)),i(n(254)),i(n(255)),i(n(256)),i(n(72)),i(n(177)),i(n(105)),i(n(17)),i(n(257)),i(n(12)),i(n(174))},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(e,t,n){if(d(e))e.forEach(function(e,i){return t.call(n,i,e)});else for(var i in e)e.hasOwnProperty(i)&&t.call(n,i,e[i])}function a(e){var t,n;if(s(e))return e;if(u(e)){var o=[];try{for(var c=i(e),d=c.next();!d.done;d=c.next()){var f=d.value;o.push(a(f))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o}if(l(e)){for(var p in o={},e)if(e.hasOwnProperty(p)){var h=e[p];o[p]=a(h)}return o}return e}function s(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)}function l(e){var t=typeof e;return!!e&&("function"===t||"object"===t)}function u(e){return Array.isArray(e)}function c(e){return e instanceof Set}function d(e){return e instanceof Map}function f(e){if(l(e)){var t=Object.getPrototypeOf(e),n=t.constructor;return t&&n&&"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeSet=n(212).FixedSizeSet,t.ObjectCache=n(213).ObjectCache,t.CompareCache=n(214).CompareCache,t.Lazy=n(215).Lazy,t.StringWalker=n(216).StringWalker,t.applyMixin=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];Object.getOwnPropertyNames(t.prototype).forEach(function(i){if("constructor"!==i){if(-1!==n.indexOf(i)){var o=Object.getOwnPropertyDescriptor(e.prototype,i);o&&Object.defineProperty(e.prototype,"_"+i,o)}var a=Object.getOwnPropertyDescriptor(t.prototype,i);a&&Object.defineProperty(e.prototype,i,a)}})},t.applyDefaults=function e(t,n,i){void 0===i&&(i=!1);var s=a(t||{});return o(n,function(t,n){f(n)?s[t]=e(s[t],n,i):(i||void 0===s[t])&&(s[t]=n)}),s},t.forEachArray=function(e,t,n){e.forEach(t,n)},t.forEachObject=o,t.arrayLength=function(e){return c(e)?e.size:e.length},t.objectLength=function(e){return d(e)?e.size:Object.keys(e).length},t.getObjectValue=function(e,t){return d(e)?e.get(t):e[t]},t.removeObjectValue=function(e,t){d(e)?e.delete(t):delete e[t]},t.clone=a,t.isBoolean=function(e){return"boolean"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isFunction=s,t.isObject=l,t.isArray=u,t.isSet=c,t.isMap=d,t.isEmpty=function(e){if(u(e))return!e.length;if(c(e)||d(e))return!e.size;if(l(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},t.isPlainObject=f,t.isIterable=function(e){return e&&"function"==typeof e[Symbol.iterator]},t.getValue=function(e){return s(e.valueOf)?e.valueOf():e},t.utf8Encode=function(e){for(var t=new Uint8Array(4*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o<128)t[n++]=o;else{if(o<2048)t[n++]=o>>6|192;else{if(o>55295&&o<56320){if(++i>=e.length)throw Error("Incomplete surrogate pair.");var a=e.charCodeAt(i);if(a<56320||a>57343)throw Error("Invalid surrogate character.");o=65536+((1023&o)<<10)+(1023&a),t[n++]=o>>18|240,t[n++]=o>>12&63|128}else t[n++]=o>>12|224;t[n++]=o>>6&63|128}t[n++]=63&o|128}}return t.subarray(0,n)},t.utf8Decode=function(e){for(var t="",n=0;n<e.length;){var i=e[n++];if(i>127)if(i>191&&i<224){if(n>=e.length)throw Error("Incomplete 2-byte sequence.");i=(31&i)<<6|63&e[n++]}else if(i>223&&i<240){if(n+1>=e.length)throw Error("Incomplete 3-byte sequence.");i=(15&i)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(i>239&&i<248))throw Error("Unknown multi-byte start.");if(n+2>=e.length)throw Error("Incomplete 4-byte sequence.");i=(7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(i<=65535)t+=String.fromCharCode(i);else{if(!(i<=1114111))throw Error("Code point exceeds UTF-16 limit.");i-=65536,t+=String.fromCharCode(i>>10|55296),t+=String.fromCharCode(1023&i|56320)}}return t}},function(e,t,n){"use strict";var i,o,a,s,l,u,c;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.BoundaryPosition||(t.BoundaryPosition={}))[i.Before=0]="Before",i[i.Equal=1]="Equal",i[i.After=2]="After",(o=t.EventPhase||(t.EventPhase={}))[o.None=0]="None",o[o.Capturing=1]="Capturing",o[o.AtTarget=2]="AtTarget",o[o.Bubbling=3]="Bubbling",(a=t.NodeType||(t.NodeType={}))[a.Element=1]="Element",a[a.Attribute=2]="Attribute",a[a.Text=3]="Text",a[a.CData=4]="CData",a[a.EntityReference=5]="EntityReference",a[a.Entity=6]="Entity",a[a.ProcessingInstruction=7]="ProcessingInstruction",a[a.Comment=8]="Comment",a[a.Document=9]="Document",a[a.DocumentType=10]="DocumentType",a[a.DocumentFragment=11]="DocumentFragment",a[a.Notation=12]="Notation",(s=t.Position||(t.Position={}))[s.Disconnected=1]="Disconnected",s[s.Preceding=2]="Preceding",s[s.Following=4]="Following",s[s.Contains=8]="Contains",s[s.ContainedBy=16]="ContainedBy",s[s.ImplementationSpecific=32]="ImplementationSpecific",(l=t.FilterResult||(t.FilterResult={}))[l.Accept=1]="Accept",l[l.Reject=2]="Reject",l[l.Skip=3]="Skip",(u=t.WhatToShow||(t.WhatToShow={}))[u.All=0xffffffff]="All",u[u.Element=1]="Element",u[u.Attribute=2]="Attribute",u[u.Text=4]="Text",u[u.CDataSection=8]="CDataSection",u[u.EntityReference=16]="EntityReference",u[u.Entity=32]="Entity",u[u.ProcessingInstruction=64]="ProcessingInstruction",u[u.Comment=128]="Comment",u[u.Document=256]="Document",u[u.DocumentType=512]="DocumentType",u[u.DocumentFragment=1024]="DocumentFragment",u[u.Notation=2048]="Notation",(c=t.HowToCompare||(t.HowToCompare={}))[c.StartToStart=0]="StartToStart",c[c.StartToEnd=1]="StartToEnd",c[c.EndToEnd=2]="EndToEnd",c[c.EndToStart=3]="EndToStart"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cast=n(241).Cast,t.Guard=n(150).Guard,t.EmptySet=n(242).EmptySet},function(e,t,n){var i=n(11),o=n(55).f,a=n(21),s=n(25),l=n(80),u=n(119),c=n(123);e.exports=function(e,t){var n,d,f,p,h,m=e.target,g=e.global,v=e.stat;if(n=g?i:v?i[m]||l(m,{}):(i[m]||{}).prototype)for(d in t){if(p=t[d],f=e.noTargetGet?(h=o(n,d))&&h.value:n[d],!c(g?d:m+(v?".":"#")+d,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(e.sham||f&&f.sham)&&a(p,"sham",!0),s(n,d,p,e)}}},function(e,t,n){var i=n(11),o=n(81),a=n(14),s=n(58),l=n(86),u=n(124),c=o("wks"),d=i.Symbol,f=u?d:d&&d.withoutSetter||s;e.exports=function(e){return a(c,e)||(l&&a(d,e)?c[e]=d[e]:c[e]=f("Symbol."+e)),c[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(29);t.dom=function(){function e(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new i.CompareCache,this._rangeList=new i.FixedSizeSet}return e.prototype.setFeatures=function(e){if(void 0===e&&(e=!0),i.isObject(e))for(var t in e)this._features[t]=e[t]||!1;else for(var t in this._features)this._features[t]=e},Object.defineProperty(e.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return null===this._window&&(this._window=o.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}().instance},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),t.base64=i(n(228)),t.byte=i(n(146)),t.byteSequence=i(n(147)),t.codePoint=i(n(96)),t.json=i(n(232)),t.list=i(n(233)),t.map=i(n(234)),t.namespace=i(n(235)),t.queue=i(n(236)),t.set=i(n(237)),t.stack=i(n(238)),t.string=i(n(239))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n){void 0===n&&(n="");var i=e.call(this,n)||this;return i.name=t,i}return o(t,e),t}(Error);t.DOMException=a,t.DOMStringSizeError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"DOMStringSizeError",t)||this}return o(t,e),t}(a),t.WrongDocumentError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"WrongDocumentError","The object is in the wrong document. "+t)||this}return o(t,e),t}(a),t.NoDataAllowedError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NoDataAllowedError",t)||this}return o(t,e),t}(a),t.NoModificationAllowedError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NoModificationAllowedError","The object can not be modified. "+t)||this}return o(t,e),t}(a),t.NotSupportedError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NotSupportedError","The operation is not supported. "+t)||this}return o(t,e),t}(a),t.InUseAttributeError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InUseAttributeError",t)||this}return o(t,e),t}(a),t.InvalidStateError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InvalidStateError","The object is in an invalid state. "+t)||this}return o(t,e),t}(a),t.InvalidModificationError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InvalidModificationError","The object can not be modified in this way. "+t)||this}return o(t,e),t}(a),t.NamespaceError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+t)||this}return o(t,e),t}(a),t.InvalidAccessError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InvalidAccessError","The object does not support the operation or argument. "+t)||this}return o(t,e),t}(a),t.ValidationError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"ValidationError",t)||this}return o(t,e),t}(a),t.TypeMismatchError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"TypeMismatchError",t)||this}return o(t,e),t}(a),t.SecurityError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"SecurityError","The operation is insecure. "+t)||this}return o(t,e),t}(a),t.NetworkError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NetworkError","A network error occurred. "+t)||this}return o(t,e),t}(a),t.AbortError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"AbortError","The operation was aborted. "+t)||this}return o(t,e),t}(a),t.URLMismatchError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"URLMismatchError","The given URL does not match another URL. "+t)||this}return o(t,e),t}(a),t.QuotaExceededError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"QuotaExceededError","The quota has been exceeded. "+t)||this}return o(t,e),t}(a),t.TimeoutError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"TimeoutError","The operation timed out. "+t)||this}return o(t,e),t}(a),t.InvalidNodeTypeError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+t)||this}return o(t,e),t}(a),t.DataCloneError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"DataCloneError","The object can not be cloned. "+t)||this}return o(t,e),t}(a),t.NotImplementedError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+t)||this}return o(t,e),t}(a),t.HierarchyRequestError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+t)||this}return o(t,e),t}(a),t.NotFoundError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"NotFoundError","The object can not be found here. "+t)||this}return o(t,e),t}(a),t.IndexSizeError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"IndexSizeError","The index is not in the allowed range. "+t)||this}return o(t,e),t}(a),t.SyntaxError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"SyntaxError","The string did not match the expected pattern. "+t)||this}return o(t,e),t}(a),t.InvalidCharacterError=function(e){function t(t){return void 0===t&&(t=""),e.call(this,"InvalidCharacterError","The string contains invalid characters. "+t)||this}return o(t,e),t}(a)},function(e,t,n){"use strict";var i=n(53),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],a=["scalar","sequence","mapping"];e.exports=function(e,t){var n,s;if(Object.keys(t=t||{}).forEach(function(t){if(-1===o.indexOf(t))throw new i('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(n=t.styleAliases||null,s={},null!==n&&Object.keys(n).forEach(function(e){n[e].forEach(function(t){s[String(t)]=e})}),s),-1===a.indexOf(this.kind))throw new i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idl_defineConst=function(e,t,n){Object.defineProperty(e,t,{writable:!1,enumerable:!0,configurable:!1,value:n})}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(16),o=n(115),a=n(18),s=n(56),l=Object.defineProperty;t.f=i?l:function(e,t,n){if(a(e),t=s(t,!0),a(n),o)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(8)(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(2);function s(e,t,n){if(void 0===n&&(n=!1),n&&o.Guard.isElementNode(t)&&o.Guard.isShadowRoot(t.shadowRoot)&&t.shadowRoot._firstChild)return t.shadowRoot._firstChild;if(t._firstChild)return t._firstChild;if(t===e)return null;if(t._nextSibling)return t._nextSibling;for(var i=t._parent;i&&i!==e;){if(i._nextSibling)return i._nextSibling;i=i._parent}return null}function l(){var e;return(e={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},e}function u(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);for(var o=t?e:s(e,e,n);o&&i&&!i(o);)o=s(e,o,n);return o}function c(e,t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=s(e,t,i);a&&o&&!o(a);)a=s(e,a,i);return a}function d(e,t,n,i){var o;return void 0===t&&(t=!1),void 0===n&&(n=!1),t||0!==e._children.size?((o={})[Symbol.iterator]=function(){var o=t?e:s(e,e,n);return{next:function(){for(;o&&i&&!i(o);)o=s(e,o,n);if(null===o)return{done:!0,value:null};var t={done:!1,value:o};return o=s(e,o,n),t}}},o):l()}function f(e,t,n){void 0===t&&(t=!1);for(var i=t?e:e._parent;i&&n&&!n(i);)i=i._parent;return i}function p(e,t,n,i){void 0===n&&(n=!1);for(var o=t._parent;o&&i&&!i(o);)o=o._parent;return o}function h(e){return o.Guard.isDocumentTypeNode(e)?0:o.Guard.isCharacterDataNode(e)?e._data.length:e._children.size}function m(e,t){if(void 0===t&&(t=!1),t){var n=m(e,!1);return o.Guard.isShadowRoot(n)?m(n._host,!0):n}return e._parent?m(e._parent):e}function g(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=n?e:i&&o.Guard.isShadowRoot(e)?e._host:e._parent;null!==a;){if(a===t)return!0;a=i&&o.Guard.isShadowRoot(a)?a._host:a._parent}return!1}function v(e){for(var t=m(e),n=0,i=u(t);null!==i;){if(n++,i===e)return n;i=c(t,i)}return -1}t.tree_getFirstDescendantNode=u,t.tree_getNextDescendantNode=c,t.tree_getDescendantNodes=d,t.tree_getDescendantElements=function(e,t,n,i){var a;return void 0===t&&(t=!1),void 0===n&&(n=!1),t||0!==e._children.size?((a={})[Symbol.iterator]=function(){var a=d(e,t,n,function(e){return o.Guard.isElementNode(e)})[Symbol.iterator](),s=a.next().value;return{next:function(){for(;s&&i&&!i(s);)s=a.next().value;if(null===s)return{done:!0,value:null};var e={done:!1,value:s};return s=a.next().value,e}}},a):l()},t.tree_getSiblingNodes=function(e,t,n){var i;return void 0===t&&(t=!1),e._parent&&0!==e._parent._children.size?((i={})[Symbol.iterator]=function(){var i=e._parent?e._parent._firstChild:null;return{next:function(){for(;i&&(n&&!n(i)||!t&&i===e);)i=i._nextSibling;if(null===i)return{done:!0,value:null};var o={done:!1,value:i};return i=i._nextSibling,o}}},i):l()},t.tree_getFirstAncestorNode=f,t.tree_getNextAncestorNode=p,t.tree_getAncestorNodes=function(e,t,n){var i;return void 0===t&&(t=!1),t||e._parent?((i={})[Symbol.iterator]=function(){var i=f(e,t,n);return{next:function(){if(null===i)return{done:!0,value:null};var e={done:!1,value:i};return i=p(0,i,t,n),e}}},i):l()},t.tree_getCommonAncestor=function(e,t){if(e===t)return e._parent;for(var n=[],i=[],o=f(e,!0);null!==o;)n.push(o),o=p(0,o,!0);for(var a=f(t,!0);null!==a;)i.push(a),a=p(0,a,!0);for(var s=n.length,l=i.length,u=null,c=Math.min(s,l);c>0;c--){var d=n[--s];if(d!==i[--l])break;u=d}return u},t.tree_getFollowingNode=function(e,t){if(t._firstChild)return t._firstChild;if(t._nextSibling)return t._nextSibling;for(;;){var n=t._parent;if(null===n||n===e)return null;if(n._nextSibling)return n._nextSibling;t=n}},t.tree_getPrecedingNode=function(e,t){return t===e?null:t._previousSibling?(t=t._previousSibling)._lastChild?t._lastChild:t:t._parent},t.tree_isConstrained=function e(t){var n,o,s,l,u,c;switch(t._nodeType){case a.NodeType.Document:var d=!1,f=!1;try{for(var p=i(t._children),h=p.next();!h.done;h=p.next())switch(h.value._nodeType){case a.NodeType.ProcessingInstruction:case a.NodeType.Comment:break;case a.NodeType.DocumentType:if(d||f)return!1;d=!0;break;case a.NodeType.Element:if(f)return!1;f=!0;break;default:return!1}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}break;case a.NodeType.DocumentFragment:case a.NodeType.Element:try{for(var m=i(t._children),g=m.next();!g.done;g=m.next())switch(g.value._nodeType){case a.NodeType.Element:case a.NodeType.Text:case a.NodeType.ProcessingInstruction:case a.NodeType.CData:case a.NodeType.Comment:break;default:return!1}}catch(e){s={error:e}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}break;case a.NodeType.DocumentType:case a.NodeType.Text:case a.NodeType.ProcessingInstruction:case a.NodeType.CData:case a.NodeType.Comment:return!t.hasChildNodes()}try{for(var v=i(t._children),y=v.next();!y.done;y=v.next())if(!e(y.value))return!1}catch(e){u={error:e}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(u)throw u.error}}return!0},t.tree_nodeLength=h,t.tree_isEmpty=function(e){return 0===h(e)},t.tree_rootNode=m,t.tree_isDescendantOf=function(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var o=u(e,n,i);null!==o;){if(o===t)return!0;o=c(e,o,n,i)}return!1},t.tree_isAncestorOf=g,t.tree_isHostIncludingAncestorOf=function e(t,n,i){if(void 0===i&&(i=!1),g(t,n,i))return!0;var a=m(t);return!(!o.Guard.isDocumentFragmentNode(a)||null===a._host||!e(a._host,n,i))},t.tree_isSiblingOf=function(e,t,n){return void 0===n&&(n=!1),e!==t?null!==e._parent&&e._parent===t._parent:!!n},t.tree_isPreceding=function(e,t){var n=v(e),i=v(t);return -1!==n&&-1!==i&&m(e)===m(t)&&i<n},t.tree_isFollowing=function(e,t){var n=v(e),i=v(t);return -1!==n&&-1!==i&&m(e)===m(t)&&i>n},t.tree_isParentOf=function(e,t){return e._parent===t},t.tree_isChildOf=function(e,t){return t._parent===e},t.tree_previousSibling=function(e){return e._previousSibling},t.tree_nextSibling=function(e){return e._nextSibling},t.tree_firstChild=function(e){return e._firstChild},t.tree_lastChild=function(e){return e._lastChild},t.tree_treePosition=v,t.tree_index=function(e){for(var t=0;null!==e._previousSibling;)t++,e=e._previousSibling;return t},t.tree_retarget=function(e,t){for(;;){if(!e||!o.Guard.isNode(e))return e;var n=m(e);if(!o.Guard.isShadowRoot(n)||t&&o.Guard.isNode(t)&&g(n,t,!0,!0))return e;e=n.host}}},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var i=n(24),o=n(130),a=n(49),s=n(43),l=n(88),u=s.set,c=s.getterFor("Array Iterator");e.exports=l(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:i(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var i=n(90),o=n(25),a=n(202);i||o(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){var i=n(16),o=n(15),a=n(40);e.exports=i?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var i=n(137).charAt,o=n(43),a=n(88),s=o.set,l=o.getterFor("String Iterator");a(String,"String",function(e){s(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=l(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=i(n,o),t.index+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(11),o=n(203),a=n(19),s=n(21),l=n(5),u=l("iterator"),c=l("toStringTag"),d=a.values;for(var f in o){var p=i[f],h=p&&p.prototype;if(h){if(h[u]!==d)try{s(h,u,d)}catch(e){h[u]=d}if(h[c]||s(h,c,f),o[f]){for(var m in a)if(h[m]!==a[m])try{s(h,m,a[m])}catch(e){h[m]=a[m]}}}}},function(e,t,n){var i=n(41),o=n(35);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(11),o=n(21),a=n(14),s=n(80),l=n(117),u=n(43),c=u.get,d=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,l){var u=!!l&&!!l.unsafe,c=!!l&&!!l.enumerable,p=!!l&&!!l.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||o(n,"name",t),d(n).source=f.join("string"==typeof t?t:"")),e!==i?(u?!p&&e[t]&&(c=!0):delete e[t],c?e[t]=n:o(e,t,n)):c?e[t]=n:s(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||l(this)})},function(e,t,n){var i=n(47),o=Math.min;e.exports=function(e){return e>0?o(i(e),0x1fffffffffffff):0}},function(e,t,n){var i=n(35);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(16),o=n(8),a=n(14),s=Object.defineProperty,l={},u=function(e){throw e};e.exports=function(e,t){if(a(l,e))return l[e];t||(t={});var n=[][e],c=!!a(t,"ACCESSORS")&&t.ACCESSORS,d=a(t,0)?t[0]:u,f=a(t,1)?t[1]:void 0;return l[e]=!!n&&!o(function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,d,f)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(148),o=n(149),a=n(151),s=n(98),l=n(153),u=n(154),c=n(155),d=n(99),f=n(100),p=n(156),h=n(157),m=n(101),g=n(158),v=n(159),y=n(160),b=n(161),x=n(162),w=n(163),A=n(164),C=n(165),S=n(166),_=n(167),T=n(168),O=n(169),P=n(170);t.create_domImplementation=function(e){return i.DOMImplementationImpl._create(e)},t.create_window=function(){return o.WindowImpl._create()},t.create_xmlDocument=function(){return new a.XMLDocumentImpl},t.create_document=function(){return new s.DocumentImpl},t.create_abortController=function(){return new l.AbortControllerImpl},t.create_abortSignal=function(){return u.AbortSignalImpl._create()},t.create_documentType=function(e,t,n,i){return c.DocumentTypeImpl._create(e,t,n,i)},t.create_element=function(e,t,n,i){return d.ElementImpl._create(e,t,n,i)},t.create_htmlElement=function(e,t,n,i){return d.ElementImpl._create(e,t,n,i)},t.create_htmlUnknownElement=function(e,t,n,i){return d.ElementImpl._create(e,t,n,i)},t.create_documentFragment=function(e){return f.DocumentFragmentImpl._create(e)},t.create_shadowRoot=function(e,t){return p.ShadowRootImpl._create(e,t)},t.create_attr=function(e,t){return h.AttrImpl._create(e,t)},t.create_text=function(e,t){return m.TextImpl._create(e,t)},t.create_cdataSection=function(e,t){return g.CDATASectionImpl._create(e,t)},t.create_comment=function(e,t){return v.CommentImpl._create(e,t)},t.create_processingInstruction=function(e,t,n){return y.ProcessingInstructionImpl._create(e,t,n)},t.create_htmlCollection=function(e,t){return void 0===t&&(t=function(){return!0}),b.HTMLCollectionImpl._create(e,t)},t.create_nodeList=function(e){return x.NodeListImpl._create(e)},t.create_nodeListStatic=function(e,t){return w.NodeListStaticImpl._create(e,t)},t.create_namedNodeMap=function(e){return A.NamedNodeMapImpl._create(e)},t.create_range=function(e,t){return C.RangeImpl._create(e,t)},t.create_nodeIterator=function(e,t,n){return S.NodeIteratorImpl._create(e,t,n)},t.create_treeWalker=function(e,t){return _.TreeWalkerImpl._create(e,t)},t.create_nodeFilter=function(){return T.NodeFilterImpl._create()},t.create_mutationRecord=function(e,t,n,i,o,a,s,l,u){return O.MutationRecordImpl._create(e,t,n,i,o,a,s,l,u)},t.create_domTokenList=function(e,t){return P.DOMTokenListImpl._create(e,t)}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(17),s=n(3),l=n(72),u=new Map;function c(e,t){if(t!==e._root&&a.tree_isAncestorOf(e._reference,t,!0)){if(e._pointerBeforeReference)for(;;){var n=a.tree_getFollowingNode(e._root,t);if(null!==n&&a.tree_isDescendantOf(e._root,n,!0)&&!a.tree_isDescendantOf(t,n,!0))return void(e._reference=n);if(null===n)return void(e._pointerBeforeReference=!1)}if(null===t._previousSibling)null!==t._parent&&(e._reference=t._parent);else{for(var i=t._previousSibling,o=a.tree_getFirstDescendantNode(t._previousSibling,!0,!1);null!==o;)null!==o&&(i=o),o=a.tree_getNextDescendantNode(t._previousSibling,o,!0,!1);e._reference=i}}}function d(e,t,n,i,o){s.Guard.isSlot(e)&&"name"===t&&null===o&&i!==n&&(null!==i||""!==n)&&(""!==i||null!==n)&&(e._name=null===i||""===i?"":i,l.shadowTree_assignSlotablesForATree(a.tree_rootNode(e)))}function f(e,t,n,i,o){s.Guard.isSlotable(e)&&"slot"===t&&null===o&&i!==n&&(null!==i||""!==n)&&(""!==i||null!==n)&&(e._name=null===i||""===i?"":i,l.shadowTree_isAssigned(e)&&l.shadowTree_assignSlotables(e._assignedSlot),l.shadowTree_assignASlot(e))}function p(e,t,n,i){"id"===t&&null===i&&(e._uniqueIdentifier=n||void 0)}t.dom_runRemovingSteps=function(e,t){},t.dom_runCloningSteps=function(e,t,n,i){},t.dom_runAdoptingSteps=function(e,t){},t.dom_runAttributeChangeSteps=function(e,t,n,a,s){var l,u;o.dom.features.slots&&(f.call(e,e,t,n,a,s),d.call(e,e,t,n,a,s)),p.call(e,e,t,a,s);try{for(var c=i(e._attributeChangeSteps),h=c.next();!h.done;h=c.next())h.value.call(e,e,t,n,a,s)}catch(e){l={error:e}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}},t.dom_runInsertionSteps=function(e){},t.dom_runNodeIteratorPreRemovingSteps=function(e,t){c.call(e,e,t)},t.dom_hasSupportedTokens=function(e){return u.has(e)},t.dom_getSupportedTokens=function(e){return u.get(e)||new Set},t.dom_runEventConstructingSteps=function(e){},t.dom_runChildTextContentChangeSteps=function(e){}},function(e,t,n){"use strict";var i=n(4),o=n(11),a=n(46),s=n(44),l=n(16),u=n(86),c=n(124),d=n(8),f=n(14),p=n(59),h=n(13),m=n(18),g=n(27),v=n(24),y=n(56),b=n(40),x=n(60),w=n(61),A=n(82),C=n(190),S=n(85),_=n(55),T=n(15),O=n(79),P=n(21),M=n(25),E=n(81),D=n(57),I=n(45),k=n(58),N=n(5),R=n(125),B=n(126),L=n(62),F=n(43),V=n(36).forEach,j=D("hidden"),G=N("toPrimitive"),U=F.set,z=F.getterFor("Symbol"),W=Object.prototype,H=o.Symbol,q=a("JSON","stringify"),K=_.f,X=T.f,Y=C.f,Z=O.f,J=E("symbols"),Q=E("op-symbols"),$=E("string-to-symbol-registry"),ee=E("symbol-to-string-registry"),et=E("wks"),en=o.QObject,er=!en||!en.prototype||!en.prototype.findChild,ei=l&&d(function(){return 7!=x(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=K(W,t);i&&delete W[t],X(e,t,n),i&&e!==W&&X(W,t,i)}:X,eo=function(e,t){var n=J[e]=x(H.prototype);return U(n,{type:"Symbol",tag:e,description:t}),l||(n.description=t),n},ea=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},es=function(e,t,n){e===W&&es(Q,t,n),m(e);var i=y(t,!0);return m(n),f(J,i)?(n.enumerable?(f(e,j)&&e[j][i]&&(e[j][i]=!1),n=x(n,{enumerable:b(0,!1)})):(f(e,j)||X(e,j,b(1,{})),e[j][i]=!0),ei(e,i,n)):X(e,i,n)},el=function(e,t){m(e);var n=v(t);return V(w(n).concat(ef(n)),function(t){l&&!eu.call(n,t)||es(e,t,n[t])}),e},eu=function(e){var t=y(e,!0),n=Z.call(this,t);return!(this===W&&f(J,t)&&!f(Q,t))&&(!(n||!f(this,t)||!f(J,t)||f(this,j)&&this[j][t])||n)},ec=function(e,t){var n=v(e),i=y(t,!0);if(n!==W||!f(J,i)||f(Q,i)){var o=K(n,i);return!o||!f(J,i)||f(n,j)&&n[j][i]||(o.enumerable=!0),o}},ed=function(e){var t=Y(v(e)),n=[];return V(t,function(e){f(J,e)||f(I,e)||n.push(e)}),n},ef=function(e){var t=e===W,n=Y(t?Q:v(e)),i=[];return V(n,function(e){f(J,e)&&(!t||f(W,e))&&i.push(J[e])}),i};u||(M((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=k(e),n=function(e){this===W&&n.call(Q,e),f(this,j)&&f(this[j],t)&&(this[j][t]=!1),ei(this,t,b(1,e))};return l&&er&&ei(W,t,{configurable:!0,set:n}),eo(t,e)}).prototype,"toString",function(){return z(this).tag}),M(H,"withoutSetter",function(e){return eo(k(e),e)}),O.f=eu,T.f=es,_.f=ec,A.f=C.f=ed,S.f=ef,R.f=function(e){return eo(N(e),e)},l&&(X(H.prototype,"description",{configurable:!0,get:function(){return z(this).description}}),s||M(W,"propertyIsEnumerable",eu,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),V(w(et),function(e){B(e)}),i({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=String(e);if(f($,t))return $[t];var n=H(t);return $[t]=n,ee[n]=t,n},keyFor:function(e){if(!ea(e))throw TypeError(e+" is not a symbol");if(f(ee,e))return ee[e]},useSetter:function(){er=!0},useSimple:function(){er=!1}}),i({target:"Object",stat:!0,forced:!u,sham:!l},{create:function(e,t){return void 0===t?x(e):el(x(e),t)},defineProperty:es,defineProperties:el,getOwnPropertyDescriptor:ec}),i({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ed,getOwnPropertySymbols:ef}),i({target:"Object",stat:!0,forced:d(function(){S.f(1)})},{getOwnPropertySymbols:function(e){return S.f(g(e))}}),q&&i({target:"JSON",stat:!0,forced:!u||d(function(){var e=H();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))})},{stringify:function(e,t,n){for(var i,o=[e],a=1;arguments.length>a;)o.push(arguments[a++]);if(i=t,(h(t)||void 0!==e)&&!ea(e))return p(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!ea(t))return t}),o[1]=t,q.apply(null,o)}}),H.prototype[G]||P(H.prototype,G,H.prototype.valueOf),L(H,"Symbol"),I[j]=!0},function(e,t,n){"use strict";var i=n(4),o=n(16),a=n(11),s=n(14),l=n(13),u=n(15).f,c=n(119),d=a.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var f={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(f[t]=!0),t};c(p,d);var h=p.prototype=d.prototype;h.constructor=p;var m=h.toString,g="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(s(f,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},function(e,t,n){n(126)("iterator")},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(2),u=n(70),c=n(3),d=n(9),f=n(0),p=n(152),h=n(12),m=function(e){function t(){var t=e.call(this)||this;return t._parent=null,t._firstChild=null,t._lastChild=null,t._previousSibling=null,t._nextSibling=null,t}return o(t,e),Object.defineProperty(t.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=f.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||s.dom.window._associatedDocument},set:function(e){this._nodeDocumentOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeName",{get:function(){return c.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:c.Guard.isAttrNode(this)?this._qualifiedName:c.Guard.isExclusiveTextNode(this)?"#text":c.Guard.isCDATASectionNode(this)?"#cdata-section":c.Guard.isProcessingInstructionNode(this)?this._target:c.Guard.isCommentNode(this)?"#comment":c.Guard.isDocumentNode(this)?"#document":c.Guard.isDocumentTypeNode(this)?this._name:c.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseURI",{get:function(){return p.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return c.Guard.isElementNode(this)&&f.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this._nodeType===l.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),t.prototype.getRootNode=function(e){return f.tree_rootNode(this,!!e&&e.composed)},Object.defineProperty(t.prototype,"parentNode",{get:function(){return this._nodeType===l.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this._parent&&c.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),t.prototype.hasChildNodes=function(){return null!==this._firstChild},Object.defineProperty(t.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return c.Guard.isAttrNode(this)?this._value:c.Guard.isCharacterDataNode(this)?this._data:null},set:function(e){null===e&&(e=""),c.Guard.isAttrNode(this)?f.attr_setAnExistingAttributeValue(this,e):c.Guard.isCharacterDataNode(this)&&f.characterData_replaceData(this,0,this._data.length,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return c.Guard.isDocumentFragmentNode(this)||c.Guard.isElementNode(this)?f.text_descendantTextContent(this):c.Guard.isAttrNode(this)?this._value:c.Guard.isCharacterDataNode(this)?this._data:null},set:function(e){null===e&&(e=""),c.Guard.isDocumentFragmentNode(this)||c.Guard.isElementNode(this)?f.node_stringReplaceAll(e,this):c.Guard.isAttrNode(this)?f.attr_setAnExistingAttributeValue(this,e):c.Guard.isCharacterDataNode(this)&&f.characterData_replaceData(this,0,f.tree_nodeLength(this),e)},enumerable:!0,configurable:!0}),t.prototype.normalize=function(){for(var e,t,n,i,o=[],l=f.tree_getFirstDescendantNode(this,!1,!1,function(e){return c.Guard.isExclusiveTextNode(e)});null!==l;)o.push(l),l=f.tree_getNextDescendantNode(this,l,!1,!1,function(e){return c.Guard.isExclusiveTextNode(e)});for(var u=0;u<o.length;u++){var d=o[u];if(null!==d._parent){var p=f.tree_nodeLength(d);if(0!==p){var h=[],m="";try{for(var g=(e=void 0,a(f.text_contiguousExclusiveTextNodes(d))),v=g.next();!v.done;v=g.next()){var y=v.value;h.push(y),m+=y._data}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=g.return)&&t.call(g)}finally{if(e)throw e.error}}if(f.characterData_replaceData(d,p,0,m),0!==s.dom.rangeList.size)for(var b=d._nextSibling;null!==b&&c.Guard.isExclusiveTextNode(b);){var x=b,w=f.tree_index(x);try{for(var A=(n=void 0,a(s.dom.rangeList)),C=A.next();!C.done;C=A.next()){var S=C.value;S._start[0]===x&&(S._start[0]=d,S._start[1]+=p),S._end[0]===x&&(S._end[0]=d,S._end[1]+=p),S._start[0]===x._parent&&S._start[1]===w&&(S._start[0]=d,S._start[1]=p),S._end[0]===x._parent&&S._end[1]===w&&(S._end[0]=d,S._end[1]=p)}}catch(e){n={error:e}}finally{try{C&&!C.done&&(i=A.return)&&i.call(A)}finally{if(n)throw n.error}}p+=f.tree_nodeLength(b),b=b._nextSibling}for(var _=0;_<h.length;_++)null!==(y=h[_])._parent&&f.mutation_remove(y,y._parent)}else f.mutation_remove(d,d._parent)}}},t.prototype.cloneNode=function(e){if(void 0===e&&(e=!1),c.Guard.isShadowRoot(this))throw new d.NotSupportedError;return f.node_clone(this,null,e)},t.prototype.isEqualNode=function(e){return void 0===e&&(e=null),null!==e&&f.node_equals(this,e)},t.prototype.isSameNode=function(e){return void 0===e&&(e=null),this===e},t.prototype.compareDocumentPosition=function(e){if(e===this)return 0;var t=e,n=this,i=null,o=null;if(c.Guard.isAttrNode(t)&&(t=(i=t)._element),c.Guard.isAttrNode(n)&&(n=(o=n)._element,i&&t&&t===n))for(var a=0;a<n._attributeList.length;a++){var u=n._attributeList[a];if(f.node_equals(u,i))return l.Position.ImplementationSpecific|l.Position.Preceding;if(f.node_equals(u,o))return l.Position.ImplementationSpecific|l.Position.Following}return null===t||null===n||f.tree_rootNode(t)!==f.tree_rootNode(n)?l.Position.Disconnected|l.Position.ImplementationSpecific|(s.dom.compareCache.check(this,e)?l.Position.Preceding:l.Position.Following):!i&&f.tree_isAncestorOf(n,t)||o&&t===n?l.Position.Contains|l.Position.Preceding:!o&&f.tree_isDescendantOf(n,t)||i&&t===n?l.Position.ContainedBy|l.Position.Following:f.tree_isPreceding(n,t)?l.Position.Preceding:l.Position.Following},t.prototype.contains=function(e){return null!==e&&f.tree_isDescendantOf(this,e,!0)},t.prototype.lookupPrefix=function(e){return e?c.Guard.isElementNode(this)?f.node_locateANamespacePrefix(this,e):c.Guard.isDocumentNode(this)?null===this.documentElement?null:f.node_locateANamespacePrefix(this.documentElement,e):c.Guard.isDocumentTypeNode(this)||c.Guard.isDocumentFragmentNode(this)?null:c.Guard.isAttrNode(this)?null===this._element?null:f.node_locateANamespacePrefix(this._element,e):null!==this._parent&&c.Guard.isElementNode(this._parent)?f.node_locateANamespacePrefix(this._parent,e):null:null},t.prototype.lookupNamespaceURI=function(e){return f.node_locateANamespace(this,e||null)},t.prototype.isDefaultNamespace=function(e){return e||(e=null),f.node_locateANamespace(this,null)===e},t.prototype.insertBefore=function(e,t){return f.mutation_preInsert(e,this,t)},t.prototype.appendChild=function(e){return f.mutation_append(e,this)},t.prototype.replaceChild=function(e,t){return f.mutation_replace(t,e,this)},t.prototype.removeChild=function(e){return f.mutation_preRemove(e,this)},t.prototype._getTheParent=function(e){return c.Guard.isSlotable(this)&&f.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},t.ELEMENT_NODE=1,t.ATTRIBUTE_NODE=2,t.TEXT_NODE=3,t.CDATA_SECTION_NODE=4,t.ENTITY_REFERENCE_NODE=5,t.ENTITY_NODE=6,t.PROCESSING_INSTRUCTION_NODE=7,t.COMMENT_NODE=8,t.DOCUMENT_NODE=9,t.DOCUMENT_TYPE_NODE=10,t.DOCUMENT_FRAGMENT_NODE=11,t.NOTATION_NODE=12,t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(u.EventTargetImpl);t.NodeImpl=m,m.prototype._children=new c.EmptySet,h.idl_defineConst(m.prototype,"ELEMENT_NODE",1),h.idl_defineConst(m.prototype,"ATTRIBUTE_NODE",2),h.idl_defineConst(m.prototype,"TEXT_NODE",3),h.idl_defineConst(m.prototype,"CDATA_SECTION_NODE",4),h.idl_defineConst(m.prototype,"ENTITY_REFERENCE_NODE",5),h.idl_defineConst(m.prototype,"ENTITY_NODE",6),h.idl_defineConst(m.prototype,"PROCESSING_INSTRUCTION_NODE",7),h.idl_defineConst(m.prototype,"COMMENT_NODE",8),h.idl_defineConst(m.prototype,"DOCUMENT_NODE",9),h.idl_defineConst(m.prototype,"DOCUMENT_TYPE_NODE",10),h.idl_defineConst(m.prototype,"DOCUMENT_FRAGMENT_NODE",11),h.idl_defineConst(m.prototype,"NOTATION_NODE",12),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_PRECEDING",2),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_FOLLOWING",4),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINS",8),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),h.idl_defineConst(m.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(87),o=n(41),a=n(27),s=n(26),l=n(128),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,d=4==e,f=6==e,p=5==e||f;return function(h,m,g,v){for(var y,b,x=a(h),w=o(x),A=i(m,g,3),C=s(w.length),S=0,_=v||l,T=t?_(h,C):n?_(h,0):void 0;C>S;S++)if((p||S in w)&&(b=A(y=w[S],S,x),e)){if(t)T[S]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:u.call(T,y)}else if(d)return!1}return f?-1:c||d?d:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(9),u=n(2),c=n(3),d=n(1),f=n(7),p=n(73),h=n(17),m=n(172),g=n(72),v=n(51),y=n(30),b=n(106);function x(e,t,n){var o,a,s,c,d,f,p,m,g=t._nodeType,v=e._nodeType,y=n?n._nodeType:null;if(g!==u.NodeType.Document&&g!==u.NodeType.DocumentFragment&&g!==u.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+t.nodeName+".");if(h.tree_isHostIncludingAncestorOf(t,e,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+e.nodeName+", parent node is "+t.nodeName+".");if(null!==n&&n._parent!==t)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+n.nodeName+", parent node is "+t.nodeName+".");if(v!==u.NodeType.DocumentFragment&&v!==u.NodeType.DocumentType&&v!==u.NodeType.Element&&v!==u.NodeType.Text&&v!==u.NodeType.ProcessingInstruction&&v!==u.NodeType.CData&&v!==u.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+e.nodeName+".");if(v===u.NodeType.Text&&g===u.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+e.nodeName+".");if(v===u.NodeType.DocumentType&&g!==u.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+t.nodeName+".");if(g===u.NodeType.Document){if(v===u.NodeType.DocumentFragment){var b=0;try{for(var x=i(e._children),w=x.next();!w.done;w=x.next()){var A=w.value;if(A._nodeType===u.NodeType.Element)b++;else if(A._nodeType===u.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+A.nodeName+".")}}catch(e){o={error:e}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}if(b>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+b+" element nodes.");if(1===b){try{for(var C=i(t._children),S=C.next();!S.done;S=C.next())if(S.value._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(e){s={error:e}}finally{try{S&&!S.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}if(n){if(y===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var _=n._nextSibling;_;){if(_._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");_=_._nextSibling}}}}else if(v===u.NodeType.Element){try{for(var T=i(t._children),O=T.next();!O.done;O=T.next())if(O.value._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+e.nodeName+".")}catch(e){d={error:e}}finally{try{O&&!O.done&&(f=T.return)&&f.call(T)}finally{if(d)throw d.error}}if(n){if(y===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+e.nodeName+".");for(_=n._nextSibling;_;){if(_._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+e.nodeName+".");_=_._nextSibling}}}else if(v===u.NodeType.DocumentType){try{for(var P=i(t._children),M=P.next();!M.done;M=P.next())if(M.value._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+e.nodeName+".")}catch(e){p={error:e}}finally{try{M&&!M.done&&(m=P.return)&&m.call(P)}finally{if(p)throw p.error}}if(n)for(var E=n._previousSibling;E;){if(E._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+e.nodeName+".");E=E._previousSibling}else for(E=t._firstChild;E;){if(E._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+e.nodeName+".");E=E._nextSibling}}}}function w(e,t,n){x(e,t,n);var i=n;return i===e&&(i=e._nextSibling),b.document_adopt(e,t._nodeDocument),A(e,t,i),e}function A(e,t,n,o){var l,m;if(null!==n||e._nodeType===u.NodeType.DocumentFragment){var b=e._nodeType===u.NodeType.DocumentFragment?e._children.size:1;if(null!==n&&0!==s.dom.rangeList.size){var x=h.tree_index(n);try{for(var w=i(s.dom.rangeList),A=w.next();!A.done;A=w.next()){var S=A.value;S._start[0]===t&&S._start[1]>x&&(S._start[1]+=b),S._end[0]===t&&S._end[1]>x&&(S._end[1]+=b)}}catch(e){l={error:e}}finally{try{A&&!A.done&&(m=w.return)&&m.call(w)}finally{if(l)throw l.error}}}var _=e._nodeType===u.NodeType.DocumentFragment?new(Array.bind.apply(Array,a([void 0],e._children))):[e];if(e._nodeType===u.NodeType.DocumentFragment)for(;e._firstChild;)C(e._firstChild,e,!0);s.dom.features.mutationObservers&&e._nodeType===u.NodeType.DocumentFragment&&v.observer_queueTreeMutationRecord(e,[],_,null,null);for(var T=n?n._previousSibling:t._lastChild,O=null===n?-1:h.tree_index(n),P=0;P<_.length;P++){var M=_[P];if(c.Guard.isElementNode(M)&&(c.Guard.isDocumentNode(t)&&(t._documentElement=M),M._nodeDocument._hasNamespaces||null===M._namespace&&null===M._namespacePrefix||(M._nodeDocument._hasNamespaces=!0)),M._parent=t,null===n?f.set.append(t._children,M):(f.set.insert(t._children,M,O),O++),null===t._firstChild)M._previousSibling=null,M._nextSibling=null,t._firstChild=M,t._lastChild=M;else{var E=n?n._previousSibling:t._lastChild,D=n||null;M._previousSibling=E,M._nextSibling=D,E&&(E._nextSibling=M),D&&(D._previousSibling=M),E||(t._firstChild=M),D||(t._lastChild=M)}s.dom.features.slots&&null!==t._shadowRoot&&c.Guard.isSlotable(M)&&g.shadowTree_assignASlot(M),s.dom.features.steps&&c.Guard.isTextNode(M)&&y.dom_runChildTextContentChangeSteps(t),s.dom.features.slots&&c.Guard.isShadowRoot(h.tree_rootNode(t))&&c.Guard.isSlot(t)&&d.isEmpty(t._assignedNodes)&&g.shadowTree_signalASlotChange(t),s.dom.features.slots&&g.shadowTree_assignSlotablesForATree(h.tree_rootNode(M));for(var I=h.tree_getFirstDescendantNode(M,!0,!0);null!==I;)s.dom.features.steps&&y.dom_runInsertionSteps(I),s.dom.features.customElements&&c.Guard.isElementNode(I)&&g.shadowTree_isConnected(I)&&(c.Guard.isCustomElementNode(I)?p.customElement_enqueueACustomElementCallbackReaction(I,"connectedCallback",[]):p.customElement_tryToUpgrade(I)),I=h.tree_getNextDescendantNode(M,I,!0,!0)}s.dom.features.mutationObservers&&(o||v.observer_queueTreeMutationRecord(t,_,[],T,n))}else{var k=t._lastChild;if(c.Guard.isElementNode(e)&&(c.Guard.isDocumentNode(t)&&(t._documentElement=e),e._nodeDocument._hasNamespaces||null===e._namespace&&null===e._namespacePrefix||(e._nodeDocument._hasNamespaces=!0)),e._parent=t,t._children.add(e),null===t._firstChild)e._previousSibling=null,e._nextSibling=null,t._firstChild=e,t._lastChild=e;else{var N=t._lastChild;e._previousSibling=N,e._nextSibling=null,N&&(N._nextSibling=e),N||(t._firstChild=e),t._lastChild=e}s.dom.features.slots&&null!==t._shadowRoot&&c.Guard.isSlotable(e)&&g.shadowTree_assignASlot(e),s.dom.features.steps&&c.Guard.isTextNode(e)&&y.dom_runChildTextContentChangeSteps(t),s.dom.features.slots&&c.Guard.isShadowRoot(h.tree_rootNode(t))&&c.Guard.isSlot(t)&&d.isEmpty(t._assignedNodes)&&g.shadowTree_signalASlotChange(t),s.dom.features.slots&&g.shadowTree_assignSlotablesForATree(h.tree_rootNode(e)),s.dom.features.steps&&y.dom_runInsertionSteps(e),s.dom.features.customElements&&c.Guard.isElementNode(e)&&g.shadowTree_isConnected(e)&&(c.Guard.isCustomElementNode(e)?p.customElement_enqueueACustomElementCallbackReaction(e,"connectedCallback",[]):p.customElement_tryToUpgrade(e)),s.dom.features.mutationObservers&&(o||v.observer_queueTreeMutationRecord(t,[e],[],k,null))}}function C(e,t,n){if(0!==s.dom.rangeList.size){var o,a,l,u,f,b,x,w,A=h.tree_index(e);try{for(var C=i(s.dom.rangeList),S=C.next();!S.done;S=C.next()){var _=S.value;h.tree_isDescendantOf(e,_._start[0],!0)&&(_._start=[t,A]),h.tree_isDescendantOf(e,_._end[0],!0)&&(_._end=[t,A]),_._start[0]===t&&_._start[1]>A&&_._start[1]--,_._end[0]===t&&_._end[1]>A&&_._end[1]--}}catch(e){o={error:e}}finally{try{S&&!S.done&&(a=C.return)&&a.call(C)}finally{if(o)throw o.error}}try{for(var T=i(s.dom.rangeList),O=T.next();!O.done;O=T.next())(_=O.value)._start[0]===t&&_._start[1]>A&&(_._start[1]-=1),_._end[0]===t&&_._end[1]>A&&(_._end[1]-=1)}catch(e){l={error:e}}finally{try{O&&!O.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}}if(s.dom.features.steps)try{for(var P=i(m.nodeIterator_iteratorList()),M=P.next();!M.done;M=P.next()){var E=M.value;E._root._nodeDocument===e._nodeDocument&&y.dom_runNodeIteratorPreRemovingSteps(E,e)}}catch(e){f={error:e}}finally{try{M&&!M.done&&(b=P.return)&&b.call(P)}finally{if(f)throw f.error}}var D=e._previousSibling,I=e._nextSibling;c.Guard.isDocumentNode(t)&&c.Guard.isElementNode(e)&&(t._documentElement=null),e._parent=null,t._children.delete(e);var k=e._previousSibling,N=e._nextSibling;e._previousSibling=null,e._nextSibling=null,k&&(k._nextSibling=N),N&&(N._previousSibling=k),k||(t._firstChild=N),N||(t._lastChild=k),s.dom.features.slots&&c.Guard.isSlotable(e)&&null!==e._assignedSlot&&g.shadowTree_isAssigned(e)&&g.shadowTree_assignSlotables(e._assignedSlot),s.dom.features.slots&&c.Guard.isShadowRoot(h.tree_rootNode(t))&&c.Guard.isSlot(t)&&d.isEmpty(t._assignedNodes)&&g.shadowTree_signalASlotChange(t),s.dom.features.slots&&null!==h.tree_getFirstDescendantNode(e,!0,!1,function(e){return c.Guard.isSlot(e)})&&(g.shadowTree_assignSlotablesForATree(h.tree_rootNode(t)),g.shadowTree_assignSlotablesForATree(e)),s.dom.features.steps&&y.dom_runRemovingSteps(e,t),s.dom.features.customElements&&c.Guard.isCustomElementNode(e)&&p.customElement_enqueueACustomElementCallbackReaction(e,"disconnectedCallback",[]);for(var R=h.tree_getFirstDescendantNode(e,!1,!0);null!==R;)s.dom.features.steps&&y.dom_runRemovingSteps(R,e),s.dom.features.customElements&&c.Guard.isCustomElementNode(R)&&p.customElement_enqueueACustomElementCallbackReaction(R,"disconnectedCallback",[]),R=h.tree_getNextDescendantNode(e,R,!1,!0);if(s.dom.features.mutationObservers)for(var B=h.tree_getFirstAncestorNode(t,!0);null!==B;){try{for(var L=(x=void 0,i(B._registeredObserverList)),F=L.next();!F.done;F=L.next()){var V=F.value;V.options.subtree&&e._registeredObserverList.push({observer:V.observer,options:V.options,source:V})}}catch(e){x={error:e}}finally{try{F&&!F.done&&(w=L.return)&&w.call(L)}finally{if(x)throw x.error}}B=h.tree_getNextAncestorNode(t,B,!0)}s.dom.features.mutationObservers&&(n||v.observer_queueTreeMutationRecord(t,[],[e],D,I)),s.dom.features.steps&&c.Guard.isTextNode(e)&&y.dom_runChildTextContentChangeSteps(t)}t.mutation_ensurePreInsertionValidity=x,t.mutation_preInsert=w,t.mutation_insert=A,t.mutation_append=function(e,t){return w(e,t,null)},t.mutation_replace=function(e,t,n){if(n._nodeType!==u.NodeType.Document&&n._nodeType!==u.NodeType.DocumentFragment&&n._nodeType!==u.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+n.nodeName+".");if(h.tree_isHostIncludingAncestorOf(n,t,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+t.nodeName+", parent node is "+n.nodeName+".");if(e._parent!==n)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+e.nodeName+", parent node is "+n.nodeName+".");if(t._nodeType!==u.NodeType.DocumentFragment&&t._nodeType!==u.NodeType.DocumentType&&t._nodeType!==u.NodeType.Element&&t._nodeType!==u.NodeType.Text&&t._nodeType!==u.NodeType.ProcessingInstruction&&t._nodeType!==u.NodeType.CData&&t._nodeType!==u.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+t.nodeName+".");if(t._nodeType===u.NodeType.Text&&n._nodeType===u.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+t.nodeName+".");if(t._nodeType===u.NodeType.DocumentType&&n._nodeType!==u.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+n.nodeName+".");if(n._nodeType===u.NodeType.Document){if(t._nodeType===u.NodeType.DocumentFragment){var o=0;try{for(var a=i(t._children),c=a.next();!c.done;c=a.next()){var d=c.value;if(d._nodeType===u.NodeType.Element)o++;else if(d._nodeType===u.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+d.nodeName+".")}}catch(e){x={error:e}}finally{try{c&&!c.done&&(w=a.return)&&w.call(a)}finally{if(x)throw x.error}}if(o>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+o+" element nodes.");if(1===o){try{for(var f=i(n._children),p=f.next();!p.done;p=f.next())if((E=p.value)._nodeType===u.NodeType.Element&&E!==e)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(e){S={error:e}}finally{try{p&&!p.done&&(_=f.return)&&_.call(f)}finally{if(S)throw S.error}}for(var m=e._nextSibling;m;){if(m._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");m=m._nextSibling}}}else if(t._nodeType===u.NodeType.Element){try{for(var g=i(n._children),y=g.next();!y.done;y=g.next())if((E=y.value)._nodeType===u.NodeType.Element&&E!==e)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+t.nodeName+".")}catch(e){T={error:e}}finally{try{y&&!y.done&&(O=g.return)&&O.call(g)}finally{if(T)throw T.error}}for(m=e._nextSibling;m;){if(m._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+t.nodeName+".");m=m._nextSibling}}else if(t._nodeType===u.NodeType.DocumentType){try{for(var x,w,S,_,T,O,P,M,E,D=i(n._children),I=D.next();!I.done;I=D.next())if((E=I.value)._nodeType===u.NodeType.DocumentType&&E!==e)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+t.nodeName+".")}catch(e){P={error:e}}finally{try{I&&!I.done&&(M=D.return)&&M.call(D)}finally{if(P)throw P.error}}for(var k=e._previousSibling;k;){if(k._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+t.nodeName+".");k=k._previousSibling}}}var N=e._nextSibling;N===t&&(N=t._nextSibling);var R=e._previousSibling;b.document_adopt(t,n._nodeDocument);var B=[];null!==e._parent&&(B.push(e),C(e,e._parent,!0));var L=[];return t._nodeType===u.NodeType.DocumentFragment?L=Array.from(t._children):L.push(t),A(t,n,N,!0),s.dom.features.mutationObservers&&v.observer_queueTreeMutationRecord(n,L,B,R,N),e},t.mutation_replaceAll=function(e,t){null!==e&&b.document_adopt(e,t._nodeDocument);var n,o,a=Array.from(t._children),l=[];e&&e._nodeType===u.NodeType.DocumentFragment?l=Array.from(e._children):null!==e&&l.push(e);try{for(var c=i(a),d=c.next();!d.done;d=c.next())C(d.value,t,!0)}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}null!==e&&A(e,t,null,!0),s.dom.features.mutationObservers&&v.observer_queueTreeMutationRecord(t,l,a,null,null)},t.mutation_preRemove=function(e,t){if(e._parent!==t)throw new l.NotFoundError("The child node cannot be found under parent node. Child node is "+e.nodeName+", parent node is "+t.nodeName+".");return C(e,t),e},t.mutation_remove=C},function(e,t,n){"use strict";function i(e){return null==e}e.exports.isNothing=i,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:i(e)?[]:[e]},e.exports.repeat=function(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i},e.exports.isNegativeZero=function(e){return 0===e&&-1/0==1/e},e.exports.extend=function(e,t){var n,i,o,a;if(t)for(n=0,i=(a=Object.keys(t)).length;n<i;n+=1)e[o=a[n]]=t[o];return e}},function(e,t,n){"use strict";var i=n(38),o=n(53),a=n(10);function s(e,t,n){var i=[];return e.include.forEach(function(e){n=s(e,t,n)}),e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&t.kind===e.kind&&i.push(n)}),n.push(e)}),n.filter(function(e,t){return -1===i.indexOf(t)})}function l(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{}};function i(e){n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}(this.compiledImplicit,this.compiledExplicit)}l.DEFAULT=null,l.create=function(){var e,t;switch(arguments.length){case 1:e=l.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(e=i.toArray(e),t=i.toArray(t),!e.every(function(e){return e instanceof l}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof a}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new l({include:e,explicit:t})},e.exports=l},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(8),o=n(42),a="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i,o,a,s=n(186),l=n(11),u=n(13),c=n(21),d=n(14),f=n(57),p=n(45),h=l.WeakMap;if(s){var m=new h,g=m.get,v=m.has,y=m.set;i=function(e,t){return y.call(m,e,t),t},o=function(e){return g.call(m,e)||{}},a=function(e){return v.call(m,e)}}else{var b=f("state");p[b]=!0,i=function(e,t){return c(e,b,t),t},o=function(e){return d(e,b)?e[b]:{}},a=function(e){return d(e,b)}}e.exports={set:i,get:o,has:a,enforce:function(e){return a(e)?o(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t,n){var i=n(120),o=n(11),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e*=1)?0:(e>0?i:n)(e)}},function(e,t,n){"use strict";var i=n(8);e.exports=function(e,t){var n=[][e];return!!n&&i(function(){n.call(null,t||function(){throw 1},1)})}},function(e,t){e.exports={}},function(e,t,n){"use strict";n(31),n(32),n(33),n(220),n(64),n(19),n(65),n(20),n(68),n(66),n(92),n(144),n(22),n(94),n(23);var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),l=n(69),u=n(95),c=n(7),d=n(0);t.BaseWriter=function(){function e(e){this.level=0,this._builderOptions=e}return e.prototype.declaration=function(e,t,n){},e.prototype.docType=function(e,t,n){},e.prototype.comment=function(e){},e.prototype.text=function(e){},e.prototype.instruction=function(e,t){},e.prototype.cdata=function(e){},e.prototype.openTagBegin=function(e){},e.prototype.openTagEnd=function(e,t,n){},e.prototype.closeTag=function(e){},e.prototype.attributes=function(e){var t,n;try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var s=a.value;this.attribute(null===s[1]?s[2]:s[1]+":"+s[2],s[3])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.attribute=function(e,t){},e.prototype.beginElement=function(e){},e.prototype.endElement=function(e){},e.prototype.serializeNode=function(e,t){var n=void 0!==e._nodeDocument&&e._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=e,n){var i=new u.NamespacePrefixMap;i.set("xml",c.namespace.XML),this._serializeNodeNS(e,null,i,{value:1},t)}else this._serializeNode(e,t)},e.prototype._serializeNodeNS=function(e,t,n,i,o){switch(this.currentNode=e,e.nodeType){case s.NodeType.Element:this._serializeElementNS(e,t,n,i,o);break;case s.NodeType.Document:this._serializeDocumentNS(e,t,n,i,o);break;case s.NodeType.Comment:this._serializeComment(e,o);break;case s.NodeType.Text:this._serializeText(e,o);break;case s.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(e,t,n,i,o);break;case s.NodeType.DocumentType:this._serializeDocumentType(e,o);break;case s.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,o);break;case s.NodeType.CData:this._serializeCData(e,o);break;default:throw Error("Unknown node type: "+e.nodeType)}},e.prototype._serializeNode=function(e,t){switch(this.currentNode=e,e.nodeType){case s.NodeType.Element:this._serializeElement(e,t);break;case s.NodeType.Document:this._serializeDocument(e,t);break;case s.NodeType.Comment:this._serializeComment(e,t);break;case s.NodeType.Text:this._serializeText(e,t);break;case s.NodeType.DocumentFragment:this._serializeDocumentFragment(e,t);break;case s.NodeType.DocumentType:this._serializeDocumentType(e,t);break;case s.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,t);break;case s.NodeType.CData:this._serializeCData(e,t);break;default:throw Error("Unknown node type: "+e.nodeType)}},e.prototype._serializeElementNS=function(t,n,o,s,l){var u,f,p=[];if(l&&(-1!==t.localName.indexOf(":")||!d.xml_isName(t.localName)))throw Error("Node local name contains invalid characters (well-formed required).");var h="",m=!1,g=!1,v=o.copy(),y={},b=this._recordNamespaceInformation(t,v,y),x=n,w=t.namespaceURI;if(x===w)null!==b&&(g=!0),h=w===c.namespace.XML?"xml:"+t.localName:t.localName,this.beginElement(h),this.openTagBegin(h);else{var A=t.prefix,C=null;if(null===A&&w===b||(C=v.get(A,w)),"xmlns"===A){if(l)throw Error("An element cannot have the 'xmlns' prefix (well-formed required).");C=A}null!==C?(h=C+":"+t.localName,null!==b&&b!==c.namespace.XML&&(x=b||null),this.beginElement(h),this.openTagBegin(h)):null!==A?(A in y&&(A=this._generatePrefix(w,v,s)),v.set(A,w),h+=A+":"+t.localName,this.beginElement(h),this.openTagBegin(h),p.push([null,"xmlns",A,this._serializeAttributeValue(w,l)]),null!==b&&(x=b||null)):null===b||null!==b&&b!==w?(g=!0,h+=t.localName,x=w,this.beginElement(h),this.openTagBegin(h),p.push([null,null,"xmlns",this._serializeAttributeValue(w,l)])):(h+=t.localName,x=w,this.beginElement(h),this.openTagBegin(h))}p.push.apply(p,a(this._serializeAttributesNS(t,v,s,y,g,l))),this.attributes(p);var S=w===c.namespace.HTML;if(S&&0===t.childNodes.length&&e._VoidElementNames.has(t.localName)?(this.openTagEnd(h,!0,!0),this.endElement(h),m=!0):S||0!==t.childNodes.length?this.openTagEnd(h,!1,!1):(this.openTagEnd(h,!0,!1),this.endElement(h),m=!0),!m){if(S&&"template"===t.localName);else try{for(var _=i(t.childNodes),T=_.next();!T.done;T=_.next()){var O=T.value;this.level++,this._serializeNodeNS(O,x,v,s,l),this.level--}}catch(e){u={error:e}}finally{try{T&&!T.done&&(f=_.return)&&f.call(_)}finally{if(u)throw u.error}}this.closeTag(h),this.endElement(h)}},e.prototype._serializeElement=function(e,t){if(t&&(-1!==e.localName.indexOf(":")||!d.xml_isName(e.localName)))throw Error("Node local name contains invalid characters (well-formed required).");var n,o,a=!1,s=e.localName;this.beginElement(s),this.openTagBegin(s);var l=this._serializeAttributes(e,t);if(this.attributes(l),e.hasChildNodes()?this.openTagEnd(s,!1,!1):(this.openTagEnd(s,!0,!1),this.endElement(s),a=!0),!a){try{for(var u=i(e._children),c=u.next();!c.done;c=u.next()){var f=c.value;this.level++,this._serializeNode(f,t),this.level--}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}this.closeTag(s),this.endElement(s)}},e.prototype._serializeDocumentNS=function(e,t,n,o,a){var s,l;if(a&&null===e.documentElement)throw Error("Missing document element (well-formed required).");try{for(var u=i(e.childNodes),c=u.next();!c.done;c=u.next()){var d=c.value;this._serializeNodeNS(d,t,n,o,a)}}catch(e){s={error:e}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}},e.prototype._serializeDocument=function(e,t){var n,o;if(t&&null===e.documentElement)throw Error("Missing document element (well-formed required).");try{for(var a=i(e._children),s=a.next();!s.done;s=a.next()){var l=s.value;this._serializeNode(l,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},e.prototype._serializeComment=function(e,t){if(t&&(!d.xml_isLegalChar(e.data)||-1!==e.data.indexOf("--")||e.data.endsWith("-")))throw Error("Comment data contains invalid characters (well-formed required).");this.comment(e.data)},e.prototype._serializeText=function(e,t){if(t&&!d.xml_isLegalChar(e.data))throw Error("Text data contains invalid characters (well-formed required).");var n=e.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(n)},e.prototype._serializeDocumentFragmentNS=function(e,t,n,o,a){var s,l;try{for(var u=i(e.childNodes),c=u.next();!c.done;c=u.next()){var d=c.value;this._serializeNodeNS(d,t,n,o,a)}}catch(e){s={error:e}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}},e.prototype._serializeDocumentFragment=function(e,t){var n,o;try{for(var a=i(e._children),s=a.next();!s.done;s=a.next()){var l=s.value;this._serializeNode(l,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},e.prototype._serializeDocumentType=function(e,t){if(t&&!d.xml_isPubidChar(e.publicId))throw Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(t&&(!d.xml_isLegalChar(e.systemId)||-1!==e.systemId.indexOf('"')&&-1!==e.systemId.indexOf("'")))throw Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(e.name,e.publicId,e.systemId)},e.prototype._serializeProcessingInstruction=function(e,t){if(t&&(-1!==e.target.indexOf(":")||/^xml$/i.test(e.target)))throw Error("Processing instruction target contains invalid characters (well-formed required).");if(t&&(!d.xml_isLegalChar(e.data)||-1!==e.data.indexOf("?>")))throw Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(e.target,e.data)},e.prototype._serializeCData=function(e,t){if(t&&-1!==e.data.indexOf("]]>"))throw Error("CDATA contains invalid characters (well-formed required).");this.cdata(e.data)},e.prototype._serializeAttributesNS=function(e,t,n,o,a,s){var u,f,p=[],h=s?new l.LocalNameSet:void 0;try{for(var m=i(e.attributes),g=m.next();!g.done;g=m.next()){var v=g.value;if(s||a||null!==v.namespaceURI){if(s&&h&&h.has(v.namespaceURI,v.localName))throw Error("Element contains duplicate attributes (well-formed required).");s&&h&&h.set(v.namespaceURI,v.localName);var y=v.namespaceURI,b=null;if(null!==y)if(b=t.get(v.prefix,y),y===c.namespace.XMLNS){if(v.value===c.namespace.XML||null===v.prefix&&a||null!==v.prefix&&(!(v.localName in o)||o[v.localName]!==v.value)&&t.has(v.localName,v.value))continue;if(s&&v.value===c.namespace.XMLNS)throw Error("XMLNS namespace is reserved (well-formed required).");if(s&&""===v.value)throw Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");"xmlns"===v.prefix&&(b="xmlns")}else null===b&&(b=null===v.prefix||t.hasPrefix(v.prefix)&&!t.has(v.prefix,y)?this._generatePrefix(y,t,n):v.prefix,p.push([null,"xmlns",b,this._serializeAttributeValue(y,s)]));if(s&&(-1!==v.localName.indexOf(":")||!d.xml_isName(v.localName)||"xmlns"===v.localName&&null===y))throw Error("Attribute local name contains invalid characters (well-formed required).");p.push([y,b,v.localName,this._serializeAttributeValue(v.value,s)])}else p.push([null,null,v.localName,this._serializeAttributeValue(v.value,s)])}}catch(e){u={error:e}}finally{try{g&&!g.done&&(f=m.return)&&f.call(m)}finally{if(u)throw u.error}}return p},e.prototype._serializeAttributes=function(e,t){var n,o,a=[],s=t?{}:void 0;try{for(var l=i(e.attributes),u=l.next();!u.done;u=l.next()){var c=u.value;if(t){if(t&&s&&c.localName in s)throw Error("Element contains duplicate attributes (well-formed required).");if(t&&s&&(s[c.localName]=!0),t&&(-1!==c.localName.indexOf(":")||!d.xml_isName(c.localName)))throw Error("Attribute local name contains invalid characters (well-formed required).");a.push([null,null,c.localName,this._serializeAttributeValue(c.value,t)])}else a.push([null,null,c.localName,this._serializeAttributeValue(c.value,t)])}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return a},e.prototype._recordNamespaceInformation=function(e,t,n){var o,a,s=null;try{for(var l=i(e.attributes),u=l.next();!u.done;u=l.next()){var d=u.value,f=d.namespaceURI,p=d.prefix;if(f===c.namespace.XMLNS){if(null===p){s=d.value;continue}var h=d.localName,m=d.value;if(m===c.namespace.XML||(""===m&&(m=null),t.has(h,m)))continue;t.set(h,m),n[h]=m||""}}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s},e.prototype._generatePrefix=function(e,t,n){var i="ns"+n.value.toString();return n.value++,t.set(i,e),i},e.prototype._serializeAttributeValue=function(e,t){if(t&&null!==e&&!d.xml_isLegalChar(e))throw Error("Invalid characters in attribute value.");return null===e?"":e.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),e}()},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),s=n(3),l=n(7),u=n(29),c=n(17),d=n(97);function f(){var e=a.dom.window;e._mutationObserverMicrotaskQueued||(e._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){p()}))}function p(){var e,t,n,o,u=a.dom.window;u._mutationObserverMicrotaskQueued=!1;var c=l.set.clone(u._mutationObservers),f=l.set.clone(u._signalSlots);l.set.empty(u._signalSlots);var p=function(e){var t=l.list.clone(e._recordQueue);l.list.empty(e._recordQueue);for(var n=0;n<e._nodeList.length;n++){var i=e._nodeList[n];l.list.remove(i._registeredObserverList,function(t){return s.Guard.isTransientRegisteredObserver(t)&&t.observer===e})}if(!l.list.isEmpty(t))try{e._callback.call(e,t,e)}catch(e){}};try{for(var h=i(c),m=h.next();!m.done;m=h.next())p(m.value)}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}if(a.dom.features.slots)try{for(var g=i(f),v=g.next();!v.done;v=g.next()){var y=v.value;d.event_fireAnEvent("slotchange",y,void 0,{bubbles:!0})}}catch(e){n={error:e}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}}function h(e,t,n,a,s,l,d,p,h){for(var m,g,v=new Map,y=c.tree_getFirstAncestorNode(t,!0);null!==y;){for(var b=0;b<y._registeredObserverList.length;b++){var x=y._registeredObserverList[b],w=x.options;if((y===t||w.subtree)&&("attributes"!==e||w.attributes)&&("attributes"!==e||!w.attributeFilter||w.attributeFilter.indexOf(n||"")&&null===a)&&("characterData"!==e||w.characterData)&&("childList"!==e||w.childList)){var A=x.observer;v.has(A)||v.set(A,null),("attributes"===e&&w.attributeOldValue||"characterData"===e&&w.characterDataOldValue)&&v.set(A,s)}}y=c.tree_getNextAncestorNode(t,y,!0)}try{for(var C=i(v),S=C.next();!S.done;S=C.next()){var _=o(S.value,2),T=_[0],O=_[1],P=u.create_mutationRecord(e,t,u.create_nodeListStatic(t,l),u.create_nodeListStatic(t,d),p,h,n,a,O);T._recordQueue.push(P)}}catch(e){m={error:e}}finally{try{S&&!S.done&&(g=C.return)&&g.call(C)}finally{if(m)throw m.error}}f()}t.observer_queueAMutationObserverMicrotask=f,t.observer_notifyMutationObservers=p,t.observer_queueMutationRecord=h,t.observer_queueTreeMutationRecord=function(e,t,n,i,o){h("childList",e,null,null,null,t,n,i,o)},t.observer_queueAttributeMutationRecord=function(e,t,n,i){h("attributes",e,t,n,i,[],[],null,null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(7),a=n(3),s=n(9),l=n(29),u=n(73),c=n(51),d=n(30),f=n(37),p=n(106);function h(e,t,n){i.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,e._value),i.dom.features.customElements&&a.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,"attributeChangedCallback",[e._localName,e._value,n,e._namespace]),i.dom.features.steps&&d.dom_runAttributeChangeSteps(t,e._localName,e._value,n,e._namespace),e._value=n}function m(e,t){i.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,null),i.dom.features.customElements&&a.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,"attributeChangedCallback",[e._localName,null,e._value,e._namespace]),i.dom.features.steps&&d.dom_runAttributeChangeSteps(t,e._localName,null,e._value,e._namespace),t._attributeList._asArray().push(e),e._element=t,t._nodeDocument._hasNamespaces||null===e._namespace&&null===e._namespacePrefix&&"xmlns"!==e._localName||(t._nodeDocument._hasNamespaces=!0)}function g(e,t){i.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,e._value),i.dom.features.customElements&&a.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,"attributeChangedCallback",[e._localName,e._value,null,e._namespace]),i.dom.features.steps&&d.dom_runAttributeChangeSteps(t,e._localName,e._value,null,e._namespace);var n=t._attributeList._asArray().indexOf(e);t._attributeList._asArray().splice(n,1),e._element=null}function v(e,t,n){i.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(n,e._localName,e._namespace,e._value),i.dom.features.customElements&&a.Guard.isCustomElementNode(n)&&u.customElement_enqueueACustomElementCallbackReaction(n,"attributeChangedCallback",[e._localName,e._value,t._value,e._namespace]),i.dom.features.steps&&d.dom_runAttributeChangeSteps(n,e._localName,e._value,t._value,e._namespace);var o=n._attributeList._asArray().indexOf(e);-1!==o&&(n._attributeList._asArray()[o]=t),e._element=null,t._element=n,n._nodeDocument._hasNamespaces||null===t._namespace&&null===t._namespacePrefix&&"xmlns"!==t._localName||(n._nodeDocument._hasNamespaces=!0)}function y(e,t){return t._namespace===o.namespace.HTML&&"html"===t._nodeDocument._type&&(e=e.toLowerCase()),t._attributeList._asArray().find(function(t){return t._qualifiedName===e})||null}function b(e,t,n){var i=e||null;return n._attributeList._asArray().find(function(e){return e._namespace===i&&e._localName===t})||null}t.element_has=function(e,t){return -1!==t._attributeList._asArray().indexOf(e)},t.element_change=h,t.element_append=m,t.element_remove=g,t.element_replace=v,t.element_getAnAttributeByName=y,t.element_getAnAttributeByNamespaceAndLocalName=b,t.element_getAnAttributeValue=function(e,t,n){void 0===n&&(n="");var i=b(n,t,e);return null===i?"":i._value},t.element_setAnAttribute=function(e,t){if(null!==e._element&&e._element!==t)throw new s.InUseAttributeError("This attribute already exists in the document: "+e._qualifiedName+" as a child of "+e._element._qualifiedName+".");var n=b(e._namespace||"",e._localName,t);return n===e?e:(null!==n?v(n,e,t):m(e,t),n)},t.element_setAnAttributeValue=function(e,t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var a=b(o||"",t,e);if(null===a){var s=l.create_attr(e._nodeDocument,t);return s._namespace=o,s._namespacePrefix=i,s._value=n,void m(s,e)}h(a,e,n)},t.element_removeAnAttributeByName=function(e,t){var n=y(e,t);return null!==n&&g(n,t),n},t.element_removeAnAttributeByNamespaceAndLocalName=function(e,t,n){var i=b(e,t,n);return null!==i&&g(i,n),i},t.element_createAnElement=function(e,t,n,a,c,d){void 0===a&&(a=null),void 0===c&&(c=null),void 0===d&&(d=!1);var f=null;if(!i.dom.features.customElements)return(f=l.create_element(e,t,n,a))._customElementState="uncustomized",f._customElementDefinition=null,f._is=c,f;var h=u.customElement_lookUpACustomElementDefinition(e,n,t,c);if(null!==h&&h.name!==h.localName)(f=new(p.document_elementInterface(t,o.namespace.HTML)))._localName=t,f._namespace=o.namespace.HTML,f._namespacePrefix=a,f._customElementState="undefined",f._customElementDefinition=null,f._is=c,f._nodeDocument=e,d?u.customElement_upgrade(h,f):u.customElement_enqueueACustomElementUpgradeReaction(f,h);else if(null!==h)if(d)try{var m=new(0,h.constructor);if(console.assert(void 0!==m._customElementState),console.assert(void 0!==m._customElementDefinition),console.assert(m._namespace===o.namespace.HTML),0!==m._attributeList.length)throw new s.NotSupportedError("Custom element already has attributes.");if(0!==m._children.size)throw new s.NotSupportedError("Custom element already has child nodes.");if(null!==m._parent)throw new s.NotSupportedError("Custom element already has a parent node.");if(m._nodeDocument!==e)throw new s.NotSupportedError("Custom element is already in a document.");if(m._localName!==t)throw new s.NotSupportedError("Custom element has a different local name.");m._namespacePrefix=a,m._is=null}catch(n){(f=l.create_htmlUnknownElement(e,t,o.namespace.HTML,a))._customElementState="failed",f._customElementDefinition=null,f._is=null}else(f=l.create_htmlElement(e,t,o.namespace.HTML,a))._customElementState="undefined",f._customElementDefinition=null,f._is=null,u.customElement_enqueueACustomElementUpgradeReaction(f,h);else(f=new(p.document_elementInterface(t,n)))._localName=t,f._namespace=n,f._namespacePrefix=a,f._customElementState="uncustomized",f._customElementDefinition=null,f._is=c,f._nodeDocument=e,n===o.namespace.HTML&&(null!==c||u.customElement_isValidCustomElementName(t))&&(f._customElementState="undefined");if(null===f)throw Error("Unable to create element.");return f},t.element_insertAdjacent=function(e,t,n){switch(t.toLowerCase()){case"beforebegin":return null===e._parent?null:f.mutation_preInsert(n,e._parent,e);case"afterbegin":return f.mutation_preInsert(n,e,e._firstChild);case"beforeend":return f.mutation_preInsert(n,e,null);case"afterend":return null===e._parent?null:f.mutation_preInsert(n,e._parent,e._nextSibling);default:throw new s.SyntaxError('Invalid \'where\' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected')}}},function(e,t,n){"use strict";function i(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=i},function(e,t,n){"use strict";e.exports=new(n(39))({include:[n(181)],implicit:[n(293),n(294)],explicit:[n(295),n(296),n(297),n(298)]})},function(e,t,n){var i=n(16),o=n(79),a=n(40),s=n(24),l=n(56),u=n(14),c=n(115),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=s(e),t=l(t,!0),c)try{return d(e,t)}catch(e){}if(u(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t,n){var i=n(13);e.exports=function(e,t){var n,o;if(!i(e))return e;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e))||"function"==typeof(n=e.valueOf)&&!i(o=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(81),o=n(58),a=i("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(42);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i,o=n(18),a=n(188),s=n(84),l=n(45),u=n(189),c=n(116),d=n(57)("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}h=i?((e=i).write(p("")),e.close(),t=e.parentWindow.Object,e=null,t):((o=c("iframe")).style.display="none",u.appendChild(o),o.src=String("javascript:"),(n=o.contentWindow.document).open(),n.write(p("document.F=Object")),n.close(),n.F);for(var e,t,n,o,a=s.length;a--;)delete h.prototype[s[a]];return h()};l[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:a(n,t)}},function(e,t,n){var i=n(121),o=n(84);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(15).f,o=n(14),a=n(5)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(8),o=n(5),a=n(129),s=o("species");e.exports=function(e){return a>=51||!i(function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,n){"use strict";var i=n(4),o=n(122).indexOf,a=n(48),s=n(28),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,c=a("indexOf"),d=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:u||!c||!d},{indexOf:function(e){return u?l.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(16),o=n(15).f,a=Function.prototype,s=a.toString,l=/^\s*function ([^ (]*)/;!i||"name"in a||o(a,"name",{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var i=n(25),o=n(18),a=n(8),s=n(136),l=RegExp.prototype,u=l.toString,c=a(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),d="toString"!=u.name;(c||d)&&i(RegExp.prototype,"toString",function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n)},{unsafe:!0})},function(e,t,n){"use strict";n(31),n(32),n(33),n(19),n(138),n(20),n(66),n(22),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(2);t.ObjectWriter=function(e){function t(t,n){var i=e.call(this,t)||this;return i._writerOptions=s.applyDefaults(n,{format:"object",wellFormed:!1,group:!1,verbose:!1}),i}return o(t,e),t.prototype.serialize=function(e){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(e,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},t.prototype._process=function(e,t){if(0===e.length)return{};for(var n={},i=!1,o=0,a=0,u=0,c=0,d=0;d<e.length;d++){var f=e[d];switch(R=Object.keys(f)[0]){case"@":continue;case"#":o++;break;case"!":a++;break;case"?":u++;break;case"$":c++;break;default:n[R]?i=!0:n[R]=!0}}var p=this._getAttrKey(),h=this._getNodeKey(l.NodeType.Text),m=this._getNodeKey(l.NodeType.Comment),g=this._getNodeKey(l.NodeType.ProcessingInstruction),v=this._getNodeKey(l.NodeType.CData);if(1===o&&1===e.length&&s.isString(e[0]["#"]))return e[0]["#"];if(i){var y={};for(d=0;d<e.length;d++)if("@"===(R=Object.keys(f=e[d])[0])){var b=f["@"];1===(L=Object.keys(b)).length?y[p+L[0]]=b[L[0]]:y[p]=f["@"]}var x=[];for(d=0;d<e.length;d++)switch(R=Object.keys(f=e[d])[0]){case"@":break;case"#":x.push(((P={})[h]=f["#"],P));break;case"!":x.push(((M={})[m]=f["!"],M));break;case"?":x.push(((E={})[g]=f["?"],E));break;case"$":x.push(((D={})[v]=f.$,D));break;default:if(0!==(B=f)[R].length&&s.isArray(B[R][0])){for(var w=[],A=B[R],C=0;C<A.length;C++)w.push(this._process(A[C],t));x.push(((I={})[R]=w,I))}else t.verbose?x.push(((k={})[R]=[this._process(B[R],t)],k)):x.push(((N={})[R]=this._process(B[R],t),N))}return y[h]=x,y}var S=1,_=1,T=1,O=1;for(y={},d=0;d<e.length;d++)switch(R=Object.keys(f=e[d])[0]){case"@":var P,M,E,D,I,k,N,R,B,L=Object.keys(b=f["@"]);if(t.group&&1!==L.length)y[p]=b;else for(var F in b)y[p+F]=b[F];break;case"#":S=this._processSpecItem(f["#"],y,t.group,h,o,S);break;case"!":_=this._processSpecItem(f["!"],y,t.group,m,a,_);break;case"?":T=this._processSpecItem(f["?"],y,t.group,g,u,T);break;case"$":O=this._processSpecItem(f.$,y,t.group,v,c,O);break;default:if(0!==(B=f)[R].length&&s.isArray(B[R][0])){w=[],A=B[R];for(var V=0;V<A.length;V++)w.push(this._process(A[V],t));y[R]=w}else t.verbose?y[R]=[this._process(B[R],t)]:y[R]=this._process(B[R],t)}return y},t.prototype._processSpecItem=function(e,t,n,i,o,l){var u,c;if(!n&&s.isArray(e)&&o+e.length>2)try{for(var d=a(e),f=d.next();!f.done;f=d.next()){var p=f.value;t[i+(l++).toString()]=p}}catch(e){u={error:e}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}else t[o>1?i+(l++).toString():i]=e;return l},t.prototype.beginElement=function(e){var t,n,i=[];if(0===this._currentList.length)this._currentList.push(((t={})[e]=i,t));else{var o=this._currentList[this._currentList.length-1];this._isElementNode(o,e)?0!==o[e].length&&s.isArray(o[e][0])?o[e].push(i):o[e]=[o[e],i]:this._currentList.push(((n={})[e]=i,n))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=i:this._listRegister.push(i),this._currentList=i},t.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},t.prototype.attribute=function(e,t){var n,i;if(0===this._currentList.length)this._currentList.push({"@":((n={})[e]=t,n)});else{var o=this._currentList[this._currentList.length-1];this._isAttrNode(o)?o["@"][e]=t:this._currentList.push({"@":((i={})[e]=t,i)})}},t.prototype.comment=function(e){if(0===this._currentList.length)this._currentList.push({"!":e});else{var t=this._currentList[this._currentList.length-1];this._isCommentNode(t)?s.isArray(t["!"])?t["!"].push(e):t["!"]=[t["!"],e]:this._currentList.push({"!":e})}},t.prototype.text=function(e){if(0===this._currentList.length)this._currentList.push({"#":e});else{var t=this._currentList[this._currentList.length-1];this._isTextNode(t)?s.isArray(t["#"])?t["#"].push(e):t["#"]=[t["#"],e]:this._currentList.push({"#":e})}},t.prototype.instruction=function(e,t){var n=""===t?e:e+" "+t;if(0===this._currentList.length)this._currentList.push({"?":n});else{var i=this._currentList[this._currentList.length-1];this._isInstructionNode(i)?s.isArray(i["?"])?i["?"].push(n):i["?"]=[i["?"],n]:this._currentList.push({"?":n})}},t.prototype.cdata=function(e){if(0===this._currentList.length)this._currentList.push({$:e});else{var t=this._currentList[this._currentList.length-1];this._isCDATANode(t)?s.isArray(t.$)?t.$.push(e):t.$=[t.$,e]:this._currentList.push({$:e})}},t.prototype._isAttrNode=function(e){return"@"in e},t.prototype._isTextNode=function(e){return"#"in e},t.prototype._isCommentNode=function(e){return"!"in e},t.prototype._isInstructionNode=function(e){return"?"in e},t.prototype._isCDATANode=function(e){return"$"in e},t.prototype._isElementNode=function(e,t){return t in e},t.prototype._getAttrKey=function(){return this._builderOptions.convert.att},t.prototype._getNodeKey=function(e){switch(e){case l.NodeType.Comment:return this._builderOptions.convert.comment;case l.NodeType.Text:return this._builderOptions.convert.text;case l.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case l.NodeType.CData:return this._builderOptions.convert.cdata;default:throw Error("Invalid node type.")}},t}(n(50).BaseWriter)},function(e,t,n){"use strict";var i=n(4),o=n(93);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalNameSet=function(){function e(){this._items={},this._nullItems={}}return e.prototype.set=function(e,t){null===e?this._nullItems[t]=!0:(this._items[e]||(this._items[e]={}),this._items[e][t]=!0)},e.prototype.has=function(e,t){return null===e?!0===this._nullItems[t]:!!this._items[e]&&!0===this._items[e][t]},e}()},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),a=n(3),s=n(0);t.EventTargetImpl=function(){function e(){}return Object.defineProperty(e.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,n){void 0===n&&(n={passive:!1,once:!1,capture:!1});var o,l=i(s.eventTarget_flattenMore(n),3),u=l[0],c=l[1],d=l[2];t&&(o=a.Guard.isEventListener(t)?t:{handleEvent:t},s.eventTarget_addEventListener(this,{type:e,callback:o,capture:u,passive:c,once:d,removed:!1}))},e.prototype.removeEventListener=function(e,t,n){void 0===n&&(n={capture:!1});var i=s.eventTarget_flatten(n);if(t)for(var o=0;o<this._eventListenerList.length;o++){var l=this._eventListenerList[o];if(l.type===e&&l.capture===i&&(a.Guard.isEventListener(t)&&l.callback===t||t&&l.callback.handleEvent===t)){s.eventTarget_removeEventListener(this,l,o);break}}},e.prototype.dispatchEvent=function(e){if(e._dispatchFlag||!e._initializedFlag)throw new o.InvalidStateError;return e._isTrusted=!1,s.event_dispatch(e,this)},e.prototype._getTheParent=function(e){return null},e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),s=n(0);t.CharacterDataImpl=function(e){function t(t){var n=e.call(this)||this;return n._data=t,n}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){s.characterData_replaceData(this,0,this._data.length,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),t.prototype.substringData=function(e,t){return s.characterData_substringData(this,e,t)},t.prototype.appendData=function(e){return s.characterData_replaceData(this,this._data.length,0,e)},t.prototype.insertData=function(e,t){s.characterData_replaceData(this,e,0,t)},t.prototype.deleteData=function(e,t){s.characterData_replaceData(this,e,t,"")},t.prototype.replaceData=function(e,t,n){s.characterData_replaceData(this,e,t,n)},Object.defineProperty(t.prototype,"previousElementSibling",{get:function(){throw Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextElementSibling",{get:function(){throw Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.remove=function(){throw Error("Mixin: ChildNode not implemented.")},t}(a.NodeImpl)},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(3),u=n(1),c=n(17),d=n(51);function f(e){s.dom.window._signalSlots.add(e),d.observer_queueAMutationObserverMicrotask()}function p(e,t){void 0===t&&(t=!1);var n=l.Cast.asNode(e)._parent;if(null===n)return null;var i=n._shadowRoot||null;if(null===i||t&&"open"!==i._mode)return null;for(var o=c.tree_getFirstDescendantNode(i,!1,!0,function(e){return l.Guard.isSlot(e)});null!==o;){if(o._name===e._name)return o;o=c.tree_getNextDescendantNode(i,o,!1,!0,function(e){return l.Guard.isSlot(e)})}return null}function h(e){var t,n,o=[],a=c.tree_rootNode(e);if(!l.Guard.isShadowRoot(a))return o;var s=a._host;try{for(var u=i(s._children),d=u.next();!d.done;d=u.next()){var f=d.value;l.Guard.isSlotable(f)&&p(f)===e&&o.push(f)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o}function m(e){var t,n,o=h(e);if(o.length===e._assignedNodes.length){for(var a=!0,s=0;s<o.length;s++)if(o[s]!==e._assignedNodes[s]){a=!1;break}a||f(e)}e._assignedNodes=o;try{for(var l=i(o),u=l.next();!u.done;u=l.next())u.value._assignedSlot=e}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}}t.shadowTree_signalASlotChange=f,t.shadowTree_isConnected=function(e){return l.Guard.isDocumentNode(c.tree_rootNode(e,!0))},t.shadowTree_isAssigned=function(e){return null!==e._assignedSlot},t.shadowTree_findASlot=p,t.shadowTree_findSlotables=h,t.shadowTree_findFlattenedSlotables=function e(t){var n,o,s,d,f=[],p=c.tree_rootNode(t);if(!l.Guard.isShadowRoot(p))return f;var m=h(t);if(u.isEmpty(m))try{for(var g=i(t._children),v=g.next();!v.done;v=g.next()){var y=v.value;l.Guard.isSlotable(y)&&m.push(y)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}try{for(var b=i(m),x=b.next();!x.done;x=b.next()){var w=x.value;if(l.Guard.isSlot(w)&&l.Guard.isShadowRoot(c.tree_rootNode(w))){var A=e(w);f.push.apply(f,a(A))}else f.push(w)}}catch(e){s={error:e}}finally{try{x&&!x.done&&(d=b.return)&&d.call(b)}finally{if(s)throw s.error}}return f},t.shadowTree_assignSlotables=m,t.shadowTree_assignSlotablesForATree=function(e){for(var t=c.tree_getFirstDescendantNode(e,!0,!1,function(e){return l.Guard.isSlot(e)});null!==t;)m(t),t=c.tree_getNextDescendantNode(e,t,!0,!1,function(e){return l.Guard.isSlot(e)})},t.shadowTree_assignASlot=function(e){var t=p(e);null!==t&&m(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),a=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),s=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),l=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);t.customElement_isValidCustomElementName=function(e){return!!i.test(e)&&!o.has(e)},t.customElement_isValidElementName=function(e){return a.has(e)},t.customElement_isVoidElementName=function(e){return s.has(e)},t.customElement_isValidShadowHostName=function(e){return l.has(e)},t.customElement_enqueueACustomElementUpgradeReaction=function(e,t){},t.customElement_enqueueACustomElementCallbackReaction=function(e,t,n){},t.customElement_upgrade=function(e,t){},t.customElement_tryToUpgrade=function(e){},t.customElement_lookUpACustomElementDefinition=function(e,t,n,i){return null}},function(e,t,n){n(4)({target:"String",proto:!0},{repeat:n(259)})},function(e,t,n){"use strict";n(278),n(68),n(179),n(94),Object.defineProperty(t,"__esModule",{value:!0});var i=n(109);t.BaseReader=function(){function e(e){this._builderOptions=e,e.parser&&Object.assign(this,e.parser)}return e.prototype._docType=function(e,t,n,i){return e.dtd({name:t,pubID:n,sysID:i})},e.prototype._comment=function(e,t){return e.com(t)},e.prototype._text=function(e,t){return e.txt(t)},e.prototype._instruction=function(e,t,n){return e.ins(t,n)},e.prototype._cdata=function(e,t){return e.dat(t)},e.prototype._element=function(e,t,n){return void 0===t?e.ele(n):e.ele(t,n)},e.prototype._attribute=function(e,t,n,i){return void 0===t?e.att(n,i):e.att(t,n,i)},e.prototype._sanitize=function(e){return i.sanitizeInput(e,this._builderOptions.invalidCharReplacement)},e.prototype._decodeText=function(t){return null==t?t:t.replace(/&(quot|amp|apos|lt|gt);/g,function(t,n){return e._entityTable[n]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(e,t,n){return String.fromCodePoint(parseInt(t||n,t?16:10))})},e.prototype._decodeAttributeValue=function(e){return this._decodeText(e)},e.prototype.parse=function(e,t){return this._parse(e,t)},e.prototype.docType=function(e,t,n,i){return this._docType(e,t,n,i)},e.prototype.comment=function(e,t){return this._comment(e,t)},e.prototype.text=function(e,t){return this._text(e,t)},e.prototype.instruction=function(e,t,n){return this._instruction(e,t,n)},e.prototype.cdata=function(e,t){return this._cdata(e,t)},e.prototype.element=function(e,t,n){return this._element(e,t,n)},e.prototype.attribute=function(e,t,n,i){return this._attribute(e,t,n,i)},e.prototype.sanitize=function(e){return this._sanitize(e)},e._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},e}()},function(e,t,n){"use strict";var i=n(39);e.exports=i.DEFAULT=new i({include:[n(54)],explicit:[n(299),n(300),n(301)]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLBuilderImpl=n(185).XMLBuilderImpl,t.XMLBuilderCBImpl=n(304).XMLBuilderCBImpl;var i=n(183);t.builder=i.builder,t.create=i.create,t.fragment=i.fragment,t.convert=i.convert;var o=n(309);t.createCB=o.createCB,t.fragmentCB=o.fragmentCB},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor;t.f=o&&!i.call({1:2},1)?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(11),o=n(21);e.exports=function(e,t){try{o(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(44),o=n(118);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(121),o=n(84).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(47),o=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):a(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(8);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t,n){var i=n(127);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var i=n(4),o=n(195),a=n(132),s=n(133),l=n(62),u=n(21),c=n(25),d=n(5),f=n(44),p=n(49),h=n(131),m=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,v=d("iterator"),y=function(){return this};e.exports=function(e,t,n,d,h,b,x){o(n,t,d);var w,A,C,S=function(e){if(e===h&&M)return M;if(!g&&e in O)return O[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},_=t+" Iterator",T=!1,O=e.prototype,P=O[v]||O["@@iterator"]||h&&O[h],M=!g&&P||S(h),E="Array"==t&&O.entries||P;if(E&&(w=a(E.call(new e)),m!==Object.prototype&&w.next&&(f||a(w)===m||(s?s(w,m):"function"!=typeof w[v]&&u(w,v,y)),l(w,_,!0,!0),f&&(p[_]=y))),"values"==h&&P&&"values"!==P.name&&(T=!0,M=function(){return P.call(this)}),f&&!x||O[v]===M||u(O,v,M),p[t]=M,h)if(A={values:S("values"),keys:b?M:S("keys"),entries:S("entries")},x)for(C in A)!g&&!T&&C in O||c(O,C,A[C]);else i({target:t,proto:!0,forced:g||T},A);return A}},function(e,t,n){"use strict";var i=n(4),o=n(13),a=n(59),s=n(83),l=n(26),u=n(24),c=n(134),d=n(5),f=n(63),p=n(28),h=f("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),g=d("species"),v=[].slice,y=Math.max;i({target:"Array",proto:!0,forced:!h||!m},{slice:function(e,t){var n,i,d,f=u(this),p=l(f.length),h=s(e,p),m=s(void 0===t?p:t,p);if(a(f)&&("function"==typeof(n=f.constructor)&&(n===Array||a(n.prototype))?n=void 0:o(n)&&null===(n=n[g])&&(n=void 0),n===Array||void 0===n))return v.call(f,h,m);for(i=new(void 0===n?Array:n)(y(m-h,0)),d=0;h<m;h++,d++)h in f&&c(i,d,f[h]);return i.length=d,i}})},function(e,t,n){var i={};i[n(5)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){"use strict";n(19),n(138),n(20),n(92),n(22),n(23),Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},t.XMLBuilderOptionKeys=new Set(Object.keys(t.DefaultBuilderOptions)),t.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(e,t,n){"use strict";e.exports=n(139)("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},n(143))},function(e,t,n){"use strict";var i,o,a=n(136),s=n(221),l=RegExp.prototype.exec,u=String.prototype.replace,c=l,d=(i=/a/,o=/b*/g,l.call(i,"a"),l.call(o,"a"),0!==i.lastIndex||0!==o.lastIndex),f=s.UNSUPPORTED_Y||s.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||f)&&(c=function(e){var t,n,i,o,s=f&&this.sticky,c=a.call(this),h=this.source,m=0,g=e;return s&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),g=String(e).slice(this.lastIndex),this.lastIndex>0&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,m++),n=RegExp("^(?:"+h+")",c)),p&&(n=RegExp("^"+h+"$(?!\\s)",c)),d&&(t=this.lastIndex),i=l.call(s?n:this,g),s?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=this.lastIndex,this.lastIndex+=i[0].length):this.lastIndex=0:d&&i&&(this.lastIndex=this.global?i.index+i[0].length:t),p&&i&&i.length>1&&u.call(i[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i}),e.exports=c},function(e,t,n){"use strict";var i=n(225),o=n(18),a=n(27),s=n(26),l=n(47),u=n(35),c=n(226),d=n(227),f=Math.max,p=Math.min,h=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;i("replace",2,function(e,t,n,i){var v=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=i.REPLACE_KEEPS_$0,b=v?"$":"$0";return[function(n,i){var o=u(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):t.call(String(o),n,i)},function(e,i){if(!v&&y||"string"==typeof i&&-1===i.indexOf(b)){var u=n(t,e,this,i);if(u.done)return u.value}var x=o(e),w=String(this),A="function"==typeof i;A||(i=String(i));var C=x.global;if(C){var S=x.unicode;x.lastIndex=0}for(var _=[];;){var T=d(x,w);if(null===T||(_.push(T),!C))break;""===String(T[0])&&(x.lastIndex=c(w,s(x.lastIndex),S))}for(var O,P="",M=0,E=0;E<_.length;E++){T=_[E];for(var D=String(T[0]),I=f(p(l(T.index),w.length),0),k=[],N=1;N<T.length;N++)k.push(void 0===(O=T[N])?O:String(O));var R=T.groups;if(A){var B=[D].concat(k,I,w);void 0!==R&&B.push(R);var L=String(i.apply(void 0,B))}else L=function(e,n,i,o,s,l){var u=i+e.length,c=o.length,d=g;return void 0!==s&&(s=a(s),d=m),t.call(l,d,function(t,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(u);case"<":l=s[a.slice(1,-1)];break;default:var d=+a;if(0===d)return t;if(d>c){var f=h(d/10);return 0===f?t:f<=c?void 0===o[f-1]?a.charAt(1):o[f-1]+a.charAt(1):t}l=o[d-1]}return void 0===l?"":l})}(D,w,I,k,R,i);I>=M&&(P+=w.slice(M,I)+L,M=I+D.length)}return P+w.slice(M)}]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamespacePrefixMap=function(){function e(){this._items={},this._nullItems=[]}return e.prototype.copy=function(){var t=new e;for(var n in this._items)t._items[n]=this._items[n].slice(0);return t._nullItems=this._nullItems.slice(0),t},e.prototype.get=function(e,t){var n=null===t?this._nullItems:this._items[t]||null;if(null===n)return null;for(var i=null,o=0;o<n.length&&(i=n[o])!==e;o++);return i},e.prototype.has=function(e,t){var n=null===t?this._nullItems:this._items[t]||null;return null!==n&&-1!==n.indexOf(e)},e.prototype.hasPrefix=function(e){if(-1!==this._nullItems.indexOf(e))return!0;for(var t in this._items)if(-1!==this._items[t].indexOf(e))return!0;return!1},e.prototype.set=function(e,t){var n=null===t?this._nullItems:this._items[t]||null;null!==t&&null===n?this._items[t]=[e]:n.push(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Surrogate=/[\uD800-\uDFFF]/,t.ScalarValue=/[\uD800-\uDFFF]/,t.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,t.ASCIICodePoint=/[\u0000-\u007F]/,t.ASCIITabOrNewLine=/[\t\n\r]/,t.ASCIIWhiteSpace=/[\t\n\f\r ]/,t.C0Control=/[\u0000-\u001F]/,t.C0ControlOrSpace=/[\u0000-\u001F ]/,t.Control=/[\u0000-\u001F\u007F-\u009F]/,t.ASCIIDigit=/[0-9]/,t.ASCIIUpperHexDigit=/[0-9A-F]/,t.ASCIILowerHexDigit=/[0-9a-f]/,t.ASCIIHexDigit=/[0-9A-Fa-f]/,t.ASCIIUpperAlpha=/[A-Z]/,t.ASCIILowerAlpha=/[a-z]/,t.ASCIIAlpha=/[A-Za-z]/,t.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(2),u=n(3),c=n(171),d=n(104),f=n(9),p=n(17),h=n(72),m=n(30);function g(e,t){void 0===t&&(t=void 0),void 0===t&&(t=null);var n=v(e,t,new Date,{});return n._isTrusted=!0,n}function v(e,t,n,i){var o=new e("");return o._initializedFlag=!0,o._timeStamp=n.getTime(),Object.assign(o,i),s.dom.features.steps&&m.dom_runEventConstructingSteps(o),o}function y(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o={value:!1});var a,s,c,d,f=!1;e._dispatchFlag=!0;var m=t;if(n){var g=t._associatedDocument;u.Guard.isDocumentNode(g)&&(m=g)}var v=null,y=p.tree_retarget(e._relatedTarget,t);if(t!==y||t===e._relatedTarget){var w=[];try{for(var A=i(e._touchTargetList),C=A.next();!C.done;C=A.next()){var S=C.value;w.push(p.tree_retarget(S,t))}}catch(e){a={error:e}}finally{try{C&&!C.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}b(e,t,m,y,w,!1);var _=u.Guard.isMouseEvent(e)&&"click"===e._type;_&&void 0!==t._activationBehavior&&(v=t);for(var T=u.Guard.isSlotable(t)&&h.shadowTree_isAssigned(t)?t:null,O=!1,P=t._getTheParent(e);null!==P&&u.Guard.isNode(P);){if(null!==T){if(!u.Guard.isSlot(P))throw Error("Parent node of a slotable should be a slot.");T=null;var M=p.tree_rootNode(P,!0);u.Guard.isShadowRoot(M)&&"closed"===M._mode&&(O=!0)}u.Guard.isSlotable(P)&&h.shadowTree_isAssigned(P)&&(T=P),y=p.tree_retarget(e._relatedTarget,P),w=[];try{for(var E=(c=void 0,i(e._touchTargetList)),D=E.next();!D.done;D=E.next())S=D.value,w.push(p.tree_retarget(S,P))}catch(e){c={error:e}}finally{try{D&&!D.done&&(d=E.return)&&d.call(E)}finally{if(c)throw c.error}}u.Guard.isWindow(P)||u.Guard.isNode(P)&&u.Guard.isNode(t)&&p.tree_isAncestorOf(p.tree_rootNode(t,!0),P,!0,!0)?(_&&e._bubbles&&null===v&&P._activationBehavior&&(v=P),b(e,P,null,y,w,O)):P===y?P=null:(t=P,_&&null===v&&t._activationBehavior&&(v=t),b(e,P,t,y,w,O)),null!==P&&(P=P._getTheParent(e)),O=!1}for(var I=null,k=e._path,N=k.length-1;N>=0;N--)if(null!==(B=k[N]).shadowAdjustedTarget){I=B;break}if(null!==I)if(u.Guard.isNode(I.shadowAdjustedTarget)&&u.Guard.isShadowRoot(p.tree_rootNode(I.shadowAdjustedTarget,!0)))f=!0;else if(u.Guard.isNode(I.relatedTarget)&&u.Guard.isShadowRoot(p.tree_rootNode(I.relatedTarget,!0)))f=!0;else for(var R=0;R<I.touchTargetList.length;R++){var B=I.touchTargetList[R];if(u.Guard.isNode(B)&&u.Guard.isShadowRoot(p.tree_rootNode(B,!0))){f=!0;break}}for(null!==v&&void 0!==v._legacyPreActivationBehavior&&v._legacyPreActivationBehavior(e),N=k.length-1;N>=0;N--)null!==(B=k[N]).shadowAdjustedTarget?e._eventPhase=l.EventPhase.AtTarget:e._eventPhase=l.EventPhase.Capturing,x(B,e,"capturing",o);for(N=0;N<k.length;N++){if(null!==(B=k[N]).shadowAdjustedTarget)e._eventPhase=l.EventPhase.AtTarget;else{if(!e._bubbles)continue;e._eventPhase=l.EventPhase.Bubbling}x(B,e,"bubbling",o)}}return e._eventPhase=l.EventPhase.None,e._currentTarget=null,e._path=[],e._dispatchFlag=!1,e._stopPropagationFlag=!1,e._stopImmediatePropagationFlag=!1,f&&(e._target=null,e._relatedTarget=null,e._touchTargetList=[]),null!==v&&(e._canceledFlag||void 0===v._activationBehavior?void 0!==v._legacyCanceledActivationBehavior&&v._legacyCanceledActivationBehavior(e):v._activationBehavior(e)),!e._canceledFlag}function b(e,t,n,i,o,a){var s=!1;u.Guard.isNode(t)&&u.Guard.isShadowRoot(p.tree_rootNode(t))&&(s=!0);var l=!1;u.Guard.isShadowRoot(t)&&"closed"===t._mode&&(l=!0),e._path.push({invocationTarget:t,invocationTargetInShadowTree:s,shadowAdjustedTarget:n,relatedTarget:i,touchTargetList:o,rootOfClosedTree:l,slotInClosedTree:a})}function x(e,t,n,i){void 0===i&&(i={value:!1});for(var o=t._path,s=-1,l=0;l<o.length;l++)if(o[l]===e){s=l;break}if(-1!==s){var u=o[s];(null!==u.shadowAdjustedTarget||s>0&&null!==(u=o[s-1]).shadowAdjustedTarget)&&(t._target=u.shadowAdjustedTarget)}if(t._relatedTarget=e.relatedTarget,t._touchTargetList=e.touchTargetList,!t._stopPropagationFlag){t._currentTarget=e.invocationTarget;var c=t._currentTarget._eventListenerList,d=new(Array.bind.apply(Array,a([void 0],c)));if(!w(t,d,n,e,i)&&t._isTrusted){var f=t._type;"animationend"===f?t._type="webkitAnimationEnd":"animationiteration"===f?t._type="webkitAnimationIteration":"animationstart"===f?t._type="webkitAnimationStart":"transitionend"===f&&(t._type="webkitTransitionEnd"),w(t,d,n,e,i),t._type=f}}}function w(e,t,n,i,o){void 0===o&&(o={value:!1});for(var a=!1,s=0;s<t.length;s++){var l=t[s];if(!l.removed){if(e._type!==l.type||(a=!0,"capturing"===n&&!l.capture)||"bubbling"===n&&l.capture)continue;if(l.once&&null!==e._currentTarget){for(var c=e._currentTarget,d=-1,f=0;f<c._eventListenerList.length;f++)if(c._eventListenerList[f]===l){d=f;break}-1!==d&&c._eventListenerList.splice(d,1)}var p=void 0,h=void 0;u.Guard.isWindow(p)&&(h=p._currentEvent,!1===i.invocationTargetInShadowTree&&(p._currentEvent=e)),l.passive&&(e._inPassiveListenerFlag=!0);try{l.callback.handleEvent.call(e._currentTarget,e)}catch(e){o.value=!0}if(l.passive&&(e._inPassiveListenerFlag=!1),u.Guard.isWindow(p)&&(p._currentEvent=h),e._stopImmediatePropagationFlag)break}}return a}t.event_setTheCanceledFlag=function(e){e._cancelable&&!e._inPassiveListenerFlag&&(e._canceledFlag=!0)},t.event_initialize=function(e,t,n,i){e._initializedFlag=!0,e._stopPropagationFlag=!1,e._stopImmediatePropagationFlag=!1,e._canceledFlag=!1,e._isTrusted=!1,e._target=null,e._type=t,e._bubbles=n,e._cancelable=i},t.event_createAnEvent=g,t.event_innerEventCreationSteps=v,t.event_dispatch=y,t.event_appendToAnEventPath=b,t.event_invoke=x,t.event_innerInvoke=w,t.event_fireAnEvent=function(e,t,n,i,o){void 0===n&&(n=d.EventImpl);var a=g(n);if(a._type=e,i)for(var s in i)a[s]=i[s];return y(a,t,o)},t.event_createLegacyEvent=function(e){var t=null;switch(e.toLowerCase()){case"beforeunloadevent":case"compositionevent":case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"customevent":t=c.CustomEventImpl;break;case"event":case"events":t=d.EventImpl}if(null===t)throw new f.NotSupportedError("Event constructor not found for interface "+e+".");var n=new t("");return n._type="",n._timeStamp=(new Date).getTime(),n._isTrusted=!1,n._initializedFlag=!1,n},t.event_getterEventHandlerIDLAttribute=function(e,t){return null},t.event_setterEventHandlerIDLAttribute=function(e,t,n){},t.event_determineTheTargetOfAnEventHandler=function(e,t){return null},t.event_getTheCurrentValueOfAnEventHandler=function(e,t){return null},t.event_activateAnEventHandler=function(e,t){},t.event_deactivateAnEventHandler=function(e,t){}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),u=n(2),c=n(9),d=n(34),f=n(3),p=n(1),h=n(7),m=n(152),g=n(0),v=n(12),y=function(e){function t(){var t=e.call(this)||this;return t._children=new Set,t._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},t._contentType="application/xml",t._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},t._origin=null,t._type="xml",t._mode="no-quirks",t._documentElement=null,t._hasNamespaces=!1,t._nodeDocumentOverwrite=null,t}return o(t,e),Object.defineProperty(t.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(e){this._nodeDocumentOverwrite=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=g.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"URL",{get:function(){return m.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compatMode",{get:function(){return"quirks"===this._mode?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doctype",{get:function(){var e,t;try{for(var n=a(this._children),i=n.next();!i.done;i=n.next()){var o=i.value;if(f.Guard.isDocumentTypeNode(o))return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),t.prototype.getElementsByTagName=function(e){return g.node_listOfElementsWithQualifiedName(e,this)},t.prototype.getElementsByTagNameNS=function(e,t){return g.node_listOfElementsWithNamespace(e,t,this)},t.prototype.getElementsByClassName=function(e){return g.node_listOfElementsWithClassNames(e,this)},t.prototype.createElement=function(e,t){if(!g.xml_isName(e))throw new c.InvalidCharacterError;"html"===this._type&&(e=e.toLowerCase());var n=null;void 0!==t&&(n=p.isString(t)?t:t.is);var i="html"===this._type||"application/xhtml+xml"===this._contentType?h.namespace.HTML:null;return g.element_createAnElement(this,e,i,null,n,!0)},t.prototype.createElementNS=function(e,t,n){return g.document_internalCreateElementNS(this,e,t,n)},t.prototype.createDocumentFragment=function(){return g.create_documentFragment(this)},t.prototype.createTextNode=function(e){return g.create_text(this,e)},t.prototype.createCDATASection=function(e){if("html"===this._type)throw new c.NotSupportedError;if(-1!==e.indexOf("]]>"))throw new c.InvalidCharacterError;return g.create_cdataSection(this,e)},t.prototype.createComment=function(e){return g.create_comment(this,e)},t.prototype.createProcessingInstruction=function(e,t){if(!g.xml_isName(e)||-1!==t.indexOf("?>"))throw new c.InvalidCharacterError;return g.create_processingInstruction(this,e,t)},t.prototype.importNode=function(e,t){if(void 0===t&&(t=!1),f.Guard.isDocumentNode(e)||f.Guard.isShadowRoot(e))throw new c.NotSupportedError;return g.node_clone(e,this,t)},t.prototype.adoptNode=function(e){if(f.Guard.isDocumentNode(e))throw new c.NotSupportedError;if(f.Guard.isShadowRoot(e))throw new c.HierarchyRequestError;return g.document_adopt(e,this),e},t.prototype.createAttribute=function(e){if(!g.xml_isName(e))throw new c.InvalidCharacterError;return"html"===this._type&&(e=e.toLowerCase()),g.create_attr(this,e)},t.prototype.createAttributeNS=function(e,t){var n=s(g.namespace_validateAndExtract(e,t),3),i=n[0],o=n[1],a=n[2],l=g.create_attr(this,a);return l._namespace=i,l._namespacePrefix=o,l},t.prototype.createEvent=function(e){return g.event_createLegacyEvent(e)},t.prototype.createRange=function(){var e=g.create_range();return e._start=[this,0],e._end=[this,0],e},t.prototype.createNodeIterator=function(e,t,n){void 0===t&&(t=u.WhatToShow.All),void 0===n&&(n=null);var i=g.create_nodeIterator(e,e,!0);return i._whatToShow=t,i._iteratorCollection=g.create_nodeList(e),p.isFunction(n)?(i._filter=g.create_nodeFilter(),i._filter.acceptNode=n):i._filter=n,i},t.prototype.createTreeWalker=function(e,t,n){void 0===t&&(t=u.WhatToShow.All),void 0===n&&(n=null);var i=g.create_treeWalker(e,e);return i._whatToShow=t,p.isFunction(n)?(i._filter=g.create_nodeFilter(),i._filter.acceptNode=n):i._filter=n,i},t.prototype._getTheParent=function(e){return"load"===e._type?null:l.dom.window},t.prototype.getElementById=function(e){throw Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(t.prototype,"children",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelector=function(e){throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelectorAll=function(e){throw Error("Mixin: ParentNode not implemented.")},t}(d.NodeImpl);t.DocumentImpl=y,v.idl_defineConst(y.prototype,"_nodeType",u.NodeType.Document)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=n(34),c=n(9),d=n(7),f=n(0),p=n(12),h=function(e){function t(){var t=e.call(this)||this;return t._children=new Set,t._namespace=null,t._namespacePrefix=null,t._localName="",t._customElementState="undefined",t._customElementDefinition=null,t._is=null,t._shadowRoot=null,t._attributeList=f.create_namedNodeMap(t),t._attributeChangeSteps=[],t._name="",t._assignedSlot=null,t}return o(t,e),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return f.element_getAnAttributeValue(this,"id")},set:function(e){f.element_setAnAttributeValue(this,"id",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return f.element_getAnAttributeValue(this,"class")},set:function(e){f.element_setAnAttributeValue(this,"class",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){var e=f.element_getAnAttributeByName("class",this);return null===e&&(e=f.create_attr(this._nodeDocument,"class")),f.create_domTokenList(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slot",{get:function(){return f.element_getAnAttributeValue(this,"slot")},set:function(e){f.element_setAnAttributeValue(this,"slot",e)},enumerable:!0,configurable:!0}),t.prototype.hasAttributes=function(){return 0!==this._attributeList.length},Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),t.prototype.getAttributeNames=function(){var e,t,n=[];try{for(var i=a(this._attributeList),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s._qualifiedName)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getAttribute=function(e){var t=f.element_getAnAttributeByName(e,this);return t?t._value:null},t.prototype.getAttributeNS=function(e,t){var n=f.element_getAnAttributeByNamespaceAndLocalName(e,t,this);return n?n._value:null},t.prototype.setAttribute=function(e,t){if(!f.xml_isName(e))throw new c.InvalidCharacterError;this._namespace===d.namespace.HTML&&"html"===this._nodeDocument._type&&(e=e.toLowerCase());for(var n=null,i=0;i<this._attributeList.length;i++){var o=this._attributeList[i];if(o._qualifiedName===e){n=o;break}}null===n?((n=f.create_attr(this._nodeDocument,e))._value=t,f.element_append(n,this)):f.element_change(n,this,t)},t.prototype.setAttributeNS=function(e,t,n){var i=s(f.namespace_validateAndExtract(e,t),3),o=i[0],a=i[1],l=i[2];f.element_setAnAttributeValue(this,l,n,a,o)},t.prototype.removeAttribute=function(e){f.element_removeAnAttributeByName(e,this)},t.prototype.removeAttributeNS=function(e,t){f.element_removeAnAttributeByNamespaceAndLocalName(e,t,this)},t.prototype.hasAttribute=function(e){this._namespace===d.namespace.HTML&&"html"===this._nodeDocument._type&&(e=e.toLowerCase());for(var t=0;t<this._attributeList.length;t++)if(this._attributeList[t]._qualifiedName===e)return!0;return!1},t.prototype.toggleAttribute=function(e,t){if(!f.xml_isName(e))throw new c.InvalidCharacterError;this._namespace===d.namespace.HTML&&"html"===this._nodeDocument._type&&(e=e.toLowerCase());for(var n=null,i=0;i<this._attributeList.length;i++){var o=this._attributeList[i];if(o._qualifiedName===e){n=o;break}}return null===n?(void 0===t||!0===t)&&((n=f.create_attr(this._nodeDocument,e))._value="",f.element_append(n,this),!0):void 0!==t&&!1!==t||(f.element_removeAnAttributeByName(e,this),!1)},t.prototype.hasAttributeNS=function(e,t){for(var n=e||null,i=0;i<this._attributeList.length;i++){var o=this._attributeList[i];if(o._namespace===n&&o._localName===t)return!0}return!1},t.prototype.getAttributeNode=function(e){return f.element_getAnAttributeByName(e,this)},t.prototype.getAttributeNodeNS=function(e,t){return f.element_getAnAttributeByNamespaceAndLocalName(e,t,this)},t.prototype.setAttributeNode=function(e){return f.element_setAnAttribute(e,this)},t.prototype.setAttributeNodeNS=function(e){return f.element_setAnAttribute(e,this)},t.prototype.removeAttributeNode=function(e){for(var t=!1,n=0;n<this._attributeList.length;n++)if(this._attributeList[n]===e){t=!0;break}if(!t)throw new c.NotFoundError;return f.element_remove(e,this),e},t.prototype.attachShadow=function(e){if(this._namespace!==d.namespace.HTML||!f.customElement_isValidCustomElementName(this._localName)&&!f.customElement_isValidShadowHostName(this._localName))throw new c.NotSupportedError;if(f.customElement_isValidCustomElementName(this._localName)||null!==this._is){var t=f.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(null!==t&&!0===t.disableShadow)throw new c.NotSupportedError}if(null!==this._shadowRoot)throw new c.NotSupportedError;var n=f.create_shadowRoot(this._nodeDocument,this);return n._mode=e.mode,this._shadowRoot=n,n},Object.defineProperty(t.prototype,"shadowRoot",{get:function(){var e=this._shadowRoot;return null===e||"closed"===e.mode?null:e},enumerable:!0,configurable:!0}),t.prototype.closest=function(e){throw new c.NotImplementedError},t.prototype.matches=function(e){throw new c.NotImplementedError},t.prototype.webkitMatchesSelector=function(e){return this.matches(e)},t.prototype.getElementsByTagName=function(e){return f.node_listOfElementsWithQualifiedName(e,this)},t.prototype.getElementsByTagNameNS=function(e,t){return f.node_listOfElementsWithNamespace(e,t,this)},t.prototype.getElementsByClassName=function(e){return f.node_listOfElementsWithClassNames(e,this)},t.prototype.insertAdjacentElement=function(e,t){return f.element_insertAdjacent(this,e,t)},t.prototype.insertAdjacentText=function(e,t){var n=f.create_text(this._nodeDocument,t);f.element_insertAdjacent(this,e,n)},Object.defineProperty(t.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_htmlUppercasedQualifiedName",{get:function(){var e=this._qualifiedName;return this._namespace===d.namespace.HTML&&"html"===this._nodeDocument._type&&(e=e.toUpperCase()),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelector=function(e){throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelectorAll=function(e){throw Error("Mixin: ParentNode not implemented.")},Object.defineProperty(t.prototype,"previousElementSibling",{get:function(){throw Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextElementSibling",{get:function(){throw Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.remove=function(){throw Error("Mixin: ChildNode not implemented.")},Object.defineProperty(t.prototype,"assignedSlot",{get:function(){throw Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),t._create=function(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var a=new t;return a._localName=n,a._namespace=i,a._namespacePrefix=o,a._nodeDocument=e,a},t}(u.NodeImpl);t.ElementImpl=h,p.idl_defineConst(h.prototype,"_nodeType",l.NodeType.Element)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(34),l=n(12),u=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n._children=new Set,n._host=t,n}return o(t,e),t.prototype.getElementById=function(e){throw Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(t.prototype,"children",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){throw Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelector=function(e){throw Error("Mixin: ParentNode not implemented.")},t.prototype.querySelectorAll=function(e){throw Error("Mixin: ParentNode not implemented.")},t._create=function(e,n){void 0===n&&(n=null);var i=new t(n);return i._nodeDocument=e,i},t}(s.NodeImpl);t.DocumentFragmentImpl=u,l.idl_defineConst(u.prototype,"_nodeType",a.NodeType.DocumentFragment)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),l=n(71),u=n(0),c=n(12),d=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;return n._name="",n._assignedSlot=null,n}return o(t,e),Object.defineProperty(t.prototype,"wholeText",{get:function(){var e,t,n="";try{for(var i=a(u.text_contiguousTextNodes(this,!0)),o=i.next();!o.done;o=i.next())n+=o.value._data}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),t.prototype.splitText=function(e){return u.text_split(this,e)},Object.defineProperty(t.prototype,"assignedSlot",{get:function(){throw Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),t._create=function(e,n){void 0===n&&(n="");var i=new t(n);return i._nodeDocument=e,i},t}(l.CharacterDataImpl);t.TextImpl=d,c.idl_defineConst(d.prototype,"_nodeType",s.NodeType.Text)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractRangeImpl=function(){function e(){}return Object.defineProperty(e.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.TraverserImpl=function(){function e(e){this._activeFlag=!1,this._root=e,this._whatToShow=i.WhatToShow.All,this._filter=null}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(0),a=n(12),s=function(){function e(e,t){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=i.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=e,t&&(this._bubbles=t.bubbles||!1,this._cancelable=t.cancelable||!1,this._composedFlag=t.composed||!1),this._initializedFlag=!0,this._timeStamp=(new Date).getTime()}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),e.prototype.composedPath=function(){var e=[],t=this._path;if(0===t.length)return e;var n=this._currentTarget;if(null===n)throw Error("Event currentTarget is null.");e.push(n);for(var i=0,o=0,a=t.length-1;a>=0;){if(t[a].rootOfClosedTree&&o++,t[a].invocationTarget===n){i=a;break}t[a].slotInClosedTree&&o--,a--}var s=o,l=o;for(a=i-1;a>=0;)t[a].rootOfClosedTree&&s++,s<=l&&e.unshift(t[a].invocationTarget),t[a].slotInClosedTree&&--s<l&&(l=s),a--;for(s=o,l=o,a=i+1;a<t.length;)t[a].slotInClosedTree&&s++,s<=l&&e.push(t[a].invocationTarget),t[a].rootOfClosedTree&&--s<l&&(l=s),a++;return e},Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(e){e&&this.stopPropagation()},enumerable:!0,configurable:!0}),e.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(e.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(e){e||o.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){o.event_setTheCanceledFlag(this)},Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),e.prototype.initEvent=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this._dispatchFlag||o.event_initialize(this,e,t,n)},e.NONE=0,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,e}();t.EventImpl=s,a.idl_defineConst(s.prototype,"NONE",0),a.idl_defineConst(s.prototype,"CAPTURING_PHASE",1),a.idl_defineConst(s.prototype,"AT_TARGET",2),a.idl_defineConst(s.prototype,"BUBBLING_PHASE",3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(9);t.traversal_filter=function(e,t){if(e._activeFlag)throw new o.InvalidStateError;var n=1<<t._nodeType-1;if(!(e.whatToShow&n))return i.FilterResult.Skip;if(!e.filter)return i.FilterResult.Accept;e._activeFlag=!0;var a=i.FilterResult.Reject;try{a=e.filter.acceptNode(t)}catch(t){throw e._activeFlag=!1,t}return e._activeFlag=!1,a}},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),s=n(3),l=n(1),u=n(99),c=n(73),d=n(17),f=n(173),p=n(30),h=n(52),m=n(37);t.document_elementInterface=function(e,t){return u.ElementImpl},t.document_internalCreateElementNS=function(e,t,n,o){var a=i(f.namespace_validateAndExtract(t,n),3),s=a[0],u=a[1],c=a[2],d=null;return void 0!==o&&(d=l.isString(o)?o:o.is),h.element_createAnElement(e,c,s,u,d,!0)},t.document_adopt=function(e,t){var n,i;if(e._nodeDocument!==t||null!==e._parent){var l=e._nodeDocument;if(e._parent&&m.mutation_remove(e,e._parent),t!==l)for(var u=d.tree_getFirstDescendantNode(e,!0,!0);null!==u;){if(u._nodeDocument=t,s.Guard.isElementNode(u))try{for(var f=(n=void 0,o(u._attributeList._asArray())),h=f.next();!h.done;h=f.next())h.value._nodeDocument=t}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}a.dom.features.customElements&&s.Guard.isElementNode(u)&&"custom"===u._customElementState&&c.customElement_enqueueACustomElementCallbackReaction(u,"adoptedCallback",[l,t]),a.dom.features.steps&&p.dom_runAdoptingSteps(u,l),u=d.tree_getNextDescendantNode(e,u,!0,!0)}}}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(3),s=n(9),l=n(17),u=n(51),c=n(30);t.characterData_replaceData=function(e,t,n,d){var f,p,h=l.tree_nodeLength(e);if(t>h)throw new s.IndexSizeError("Offset exceeds character data length. Offset: "+t+", Length: "+h+", Node is "+e.nodeName+".");t+n>h&&(n=h-t),o.dom.features.mutationObservers&&u.observer_queueMutationRecord("characterData",e,null,null,e._data,[],[],null,null);var m=e._data.substring(0,t)+d+e._data.substring(t+n);e._data=m;try{for(var g=i(o.dom.rangeList),v=g.next();!v.done;v=g.next()){var y=v.value;y._start[0]===e&&y._start[1]>t&&y._start[1]<=t+n&&(y._start[1]=t),y._end[0]===e&&y._end[1]>t&&y._end[1]<=t+n&&(y._end[1]=t),y._start[0]===e&&y._start[1]>t+n&&(y._start[1]+=d.length-n),y._end[0]===e&&y._end[1]>t+n&&(y._end[1]+=d.length-n)}}catch(e){f={error:e}}finally{try{v&&!v.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}o.dom.features.steps&&a.Guard.isTextNode(e)&&null!==e._parent&&c.dom_runChildTextContentChangeSteps(e._parent)},t.characterData_substringData=function(e,t,n){var i=l.tree_nodeLength(e);if(t>i)throw new s.IndexSizeError("Offset exceeds character data length. Offset: "+t+", Length: "+i+", Node is "+e.nodeName+".");return t+n>i?e._data.substr(t):e._data.substr(t,n)}},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(7);function l(e){return new Set(s.string.splitAStringOnASCIIWhitespace(e))}function u(e){return o(e).join(" ")}t.orderedSet_parse=l,t.orderedSet_serialize=u,t.orderedSet_sanitize=function(e){return u(l(e))},t.orderedSet_contains=function(e,t,n){var i,o,s,l;try{for(var u=a(t),c=u.next();!c.done;c=u.next()){var d=c.value,f=!1;try{for(var p=(s=void 0,a(e)),h=p.next();!h.done;h=p.next()){var m=h.value;if(n){if(m===d){f=!0;break}}else if(m.toUpperCase()===d.toUpperCase()){f=!0;break}}}catch(e){s={error:e}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}if(!f)return!1}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return!0}},function(e,t,n){"use strict";n(179),Object.defineProperty(t,"__esModule",{value:!0});var i=n(262),o=n(110),a=n(1);o.dom.setFeatures(!1),t.createDocument=function(){var e=(new i.DOMImplementation).createDocument(null,"root",null);return e.documentElement&&e.removeChild(e.documentElement),e},t.sanitizeInput=function(e,t){if(null==e)return e;if(void 0===t)return e+"";var n="";e+="";for(var i=0;i<e.length;i++){var o=e.charCodeAt(i);if(9===o||10===o||13===o||o>=32&&o<=55295||o>=57344&&o<=65533)n+=e.charAt(i);else if(o>=55296&&o<=56319&&i<e.length-1){var s=e.charCodeAt(i+1);s>=56320&&s<=57343?(n+=String.fromCodePoint(o=1024*(o-55296)+s-56320+65536),i++):n+=a.isString(t)?t:t(e.charAt(i),i,e)}else n+=a.isString(t)?t:t(e.charAt(i),i,e)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.AbortController=n(153).AbortControllerImpl,t.AbortSignal=n(154).AbortSignalImpl,t.AbstractRange=n(102).AbstractRangeImpl,t.Attr=n(157).AttrImpl,t.CDATASection=n(158).CDATASectionImpl;var o=n(71);t.CharacterData=o.CharacterDataImpl;var a=n(263);t.Comment=n(159).CommentImpl,t.CustomEvent=n(171).CustomEventImpl;var s=n(100);t.DocumentFragment=s.DocumentFragmentImpl;var l=n(98);t.Document=l.DocumentImpl;var u=n(264),c=n(155);t.DocumentType=c.DocumentTypeImpl,t.dom=n(6).dom,t.DOMImplementation=n(148).DOMImplementationImpl,t.DOMTokenList=n(170).DOMTokenListImpl;var d=n(99);t.Element=d.ElementImpl,t.Event=n(104).EventImpl,t.EventTarget=n(70).EventTargetImpl,t.HTMLCollection=n(161).HTMLCollectionImpl,t.MutationObserver=n(265).MutationObserverImpl,t.MutationRecord=n(169).MutationRecordImpl,t.NamedNodeMap=n(164).NamedNodeMapImpl,t.NodeFilter=n(168).NodeFilterImpl,t.Node=n(34).NodeImpl,t.NodeIterator=n(166).NodeIteratorImpl,t.NodeList=n(162).NodeListImpl,t.NodeListStatic=n(163).NodeListStaticImpl;var f=n(266),p=n(267),h=n(268);t.ProcessingInstruction=n(160).ProcessingInstructionImpl,t.Range=n(165).RangeImpl;var m=n(156);t.ShadowRoot=m.ShadowRootImpl;var g=n(269);t.StaticRange=n(270).StaticRangeImpl;var v=n(101);t.Text=v.TextImpl,t.Traverser=n(103).TraverserImpl,t.TreeWalker=n(167).TreeWalkerImpl,t.Window=n(149).WindowImpl,t.XMLDocument=n(151).XMLDocumentImpl,i.applyMixin(d.ElementImpl,a.ChildNodeImpl),i.applyMixin(o.CharacterDataImpl,a.ChildNodeImpl),i.applyMixin(c.DocumentTypeImpl,a.ChildNodeImpl),i.applyMixin(l.DocumentImpl,u.DocumentOrShadowRootImpl),i.applyMixin(m.ShadowRootImpl,u.DocumentOrShadowRootImpl),i.applyMixin(d.ElementImpl,f.NonDocumentTypeChildNodeImpl),i.applyMixin(o.CharacterDataImpl,f.NonDocumentTypeChildNodeImpl),i.applyMixin(l.DocumentImpl,p.NonElementParentNodeImpl),i.applyMixin(s.DocumentFragmentImpl,p.NonElementParentNodeImpl),i.applyMixin(l.DocumentImpl,h.ParentNodeImpl),i.applyMixin(s.DocumentFragmentImpl,h.ParentNodeImpl),i.applyMixin(d.ElementImpl,h.ParentNodeImpl),i.applyMixin(v.TextImpl,g.SlotableImpl),i.applyMixin(d.ElementImpl,g.SlotableImpl)},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.TokenType||(t.TokenType={}))[i.EOF=0]="EOF",i[i.Declaration=1]="Declaration",i[i.DocType=2]="DocType",i[i.Element=3]="Element",i[i.Text=4]="Text",i[i.CDATA=5]="CDATA",i[i.PI=6]="PI",i[i.Comment=7]="Comment",i[i.ClosingTag=8]="ClosingTag"},function(e,t,n){"use strict";n(64),n(20),n(66);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.ObjectReader=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._parse=function(e,t){var n=this,i=this._builderOptions,o=null;return a.isFunction(t)?o=this.parse(e,t.apply(this)):a.isArray(t)||a.isSet(t)?a.forEachArray(t,function(t){return o=n.parse(e,t)},this):a.isMap(t)||a.isObject(t)?a.forEachObject(t,function(t,s){if(a.isFunction(s)&&(s=s.apply(n)),i.ignoreConverters||0!==t.indexOf(i.convert.att))if(i.ignoreConverters||0!==t.indexOf(i.convert.text))if(i.ignoreConverters||0!==t.indexOf(i.convert.cdata))if(i.ignoreConverters||0!==t.indexOf(i.convert.comment))if(i.ignoreConverters||0!==t.indexOf(i.convert.ins)){if((a.isArray(s)||a.isSet(s))&&a.isEmpty(s));else if((a.isMap(s)||a.isObject(s))&&a.isEmpty(s))o=n.element(e,void 0,n.sanitize(t))||o;else if(i.keepNullNodes||null!=s)if(a.isArray(s)||a.isSet(s))a.forEachArray(s,function(i){var a={};a[t]=i,o=n.parse(e,a)},n);else if(a.isMap(s)||a.isObject(s))(l=n.element(e,void 0,n.sanitize(t)))&&(o=l,n.parse(l,s));else if(null!=s&&""!==s){var l;(l=n.element(e,void 0,n.sanitize(t)))&&(o=l,n.text(l,n._decodeText(n.sanitize(s))))}else o=n.element(e,void 0,n.sanitize(t))||o}else if(a.isString(s)){var u=s.indexOf(" "),c=-1===u?s:s.substr(0,u),d=-1===u?"":s.substr(u+1);o=n.instruction(e,n.sanitize(c),n.sanitize(d))||o}else a.isArray(s)||a.isSet(s)?a.forEachArray(s,function(t){var i=t.indexOf(" "),a=-1===i?t:t.substr(0,i),s=-1===i?"":t.substr(i+1);o=n.instruction(e,n.sanitize(a),n.sanitize(s))||o},n):a.forEachObject(s,function(t,i){return o=n.instruction(e,n.sanitize(t),n.sanitize(i))||o},n);else a.isArray(s)||a.isSet(s)?a.forEachArray(s,function(t){return o=n.comment(e,n.sanitize(t))||o},n):o=n.comment(e,n.sanitize(s))||o;else a.isArray(s)||a.isSet(s)?a.forEachArray(s,function(t){return o=n.cdata(e,n.sanitize(t))||o},n):o=n.cdata(e,n.sanitize(s))||o;else o=a.isMap(s)||a.isObject(s)?n.parse(e,s):n.text(e,n._decodeText(n.sanitize(s)))||o;else if(t===i.convert.att){if(a.isArray(s)||a.isSet(s))throw Error("Invalid attribute: "+s.toString()+". "+e._debugInfo());a.forEachObject(s,function(t,i){o=n.attribute(e,void 0,n.sanitize(t),n._decodeAttributeValue(n.sanitize(i)))||o})}else o=n.attribute(e,void 0,n.sanitize(t.substr(i.convert.att.length)),n._decodeAttributeValue(n.sanitize(s)))||o},this):(i.keepNullNodes||null!=t)&&(o=this.text(e,this._decodeText(this.sanitize(t)))||o),o||e},t}(n(75).BaseReader)},function(e,t,n){"use strict";e.exports=new(n(39))({explicit:[n(286),n(287),n(288)]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCBWriter=function(e){this.level=0,this._builderOptions=e,this._writerOptions=e}},function(e,t,n){var i=n(16),o=n(8),a=n(116);e.exports=!i&&!o(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(11),o=n(13),a=i.document,s=o(a)&&o(a.createElement);e.exports=function(e){return s?a.createElement(e):{}}},function(e,t,n){var i=n(118),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(11),o=n(80);e.exports=i["__core-js_shared__"]||o("__core-js_shared__",{})},function(e,t,n){var i=n(14),o=n(187),a=n(55),s=n(15);e.exports=function(e,t){for(var n=o(t),l=s.f,u=a.f,c=0;c<n.length;c++){var d=n[c];i(e,d)||l(e,d,u(t,d))}}},function(e,t,n){e.exports=n(11)},function(e,t,n){var i=n(14),o=n(24),a=n(122).indexOf,s=n(45);e.exports=function(e,t){var n,l=o(e),u=0,c=[];for(n in l)!i(s,n)&&i(l,n)&&c.push(n);for(;t.length>u;)i(l,n=t[u++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var i=n(24),o=n(26),a=n(83),s=function(e){return function(t,n,s){var l,u=i(t),c=o(u.length),d=a(s,c);if(e&&n!=n){for(;c>d;)if((l=u[d++])!=l)return!0}else for(;c>d;d++)if((e||d in u)&&u[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){var i=n(8),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==c||n!=u&&("function"==typeof t?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){e.exports=n(86)&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){t.f=n(5)},function(e,t,n){var i=n(120),o=n(14),a=n(125),s=n(15).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});o(t,e)||s(t,e,{value:a.f(e)})}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(13),o=n(59),a=n(5)("species");e.exports=function(e,t){var n;return o(e)&&("function"==typeof(n=e.constructor)&&(n===Array||o(n.prototype))?n=void 0:i(n)&&null===(n=n[a])&&(n=void 0)),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i,o,a=n(11),s=n(193),l=a.process,u=l&&l.versions,c=u&&u.v8;c?o=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(o=i[1]),e.exports=o&&+o},function(e,t,n){var i=n(5),o=n(60),a=n(15),s=i("unscopables"),l=Array.prototype;null==l[s]&&a.f(l,s,{configurable:!0,value:o(null)}),e.exports=function(e){l[s][e]=!0}},function(e,t,n){"use strict";var i,o,a,s=n(132),l=n(21),u=n(14),c=n(5),d=n(44),f=c("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(o=s(s(a)))!==Object.prototype&&(i=o):p=!0),null==i&&(i={}),d||u(i,f)||l(i,f,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var i=n(14),o=n(27),a=n(57),s=n(196),l=a("IE_PROTO"),u=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return i(e=o(e),l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){var i=n(18),o=n(197);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),o(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t,n){"use strict";var i=n(56),o=n(15),a=n(40);e.exports=function(e,t,n){var s=i(t);s in e?o.f(e,s,a(0,n)):e[s]=n}},function(e,t,n){var i=n(90),o=n(42),a=n(5)("toStringTag"),s="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:s?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){"use strict";var i=n(18);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var i=n(47),o=n(35),a=function(e){return function(t,n){var a,s,l=String(o(t)),u=i(n),c=l.length;return u<0||u>=c?e?"":void 0:(a=l.charCodeAt(u))<55296||a>56319||u+1===c||(s=l.charCodeAt(u+1))<56320||s>57343?e?l.charAt(u):a:e?l.slice(u,u+2):s-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){var i=n(4),o=n(27),a=n(61);i({target:"Object",stat:!0,forced:n(8)(function(){a(1)})},{keys:function(e){return a(o(e))}})},function(e,t,n){"use strict";var i=n(4),o=n(11),a=n(123),s=n(25),l=n(140),u=n(141),c=n(142),d=n(13),f=n(8),p=n(208),h=n(62),m=n(209);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),y=g?"set":"add",b=o[e],x=b&&b.prototype,w=b,A={},C=function(e){var t=x[e];s(x,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!d(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof b||!(v||x.forEach&&!f(function(){(new b).entries().next()}))))w=n.getConstructor(t,e,g,y),l.REQUIRED=!0;else if(a(e,!0)){var S=new w,_=S[y](v?{}:-0,1)!=S,T=f(function(){S.has(1)}),O=p(function(e){new b(e)}),P=!v&&f(function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)});O||((w=t(function(t,n){c(t,w,e);var i=m(new b,t,w);return null!=n&&u(n,i[y],i,g),i})).prototype=x,x.constructor=w),(T||P)&&(C("delete"),C("has"),g&&C("get")),(P||_)&&C(y),v&&x.clear&&delete x.clear}return A[e]=w,i({global:!0,forced:w!=b},A),h(w,e),v||n.setStrong(w,e,g),w}},function(e,t,n){var i=n(45),o=n(13),a=n(14),s=n(15).f,l=n(58),u=n(204),c=l("meta"),d=0,f=Object.isExtensible||function(){return!0},p=function(e){s(e,c,{value:{objectID:"O"+ ++d,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!f(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!f(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&f(e)&&!a(e,c)&&p(e),e}};i[c]=!0},function(e,t,n){var i=n(18),o=n(205),a=n(26),s=n(87),l=n(206),u=n(207),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,d,f){var p,h,m,g,v,y,b,x=s(t,n,d?2:1);if(f)p=e;else{if("function"!=typeof(h=l(e)))throw TypeError("Target is not iterable");if(o(h)){for(m=0,g=a(e.length);g>m;m++)if((v=d?x(i(b=e[m])[0],b[1]):x(e[m]))&&v instanceof c)return v;return new c(!1)}p=h.call(e)}for(y=p.next;!(b=y.call(p)).done;)if("object"==typeof(v=u(p,x,b.value,d))&&v&&v instanceof c)return v;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var i=n(15).f,o=n(60),a=n(210),s=n(87),l=n(142),u=n(141),c=n(88),d=n(211),f=n(16),p=n(140).fastKey,h=n(43),m=h.set,g=h.getterFor;e.exports={getConstructor:function(e,t,n,c){var d=e(function(e,i){l(e,d,t),m(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=i&&u(i,e[c],e,n)}),h=g(t),v=function(e,t,n){var i,o,a=h(e),s=y(e,t);return s?s.value=n:(a.last=s={index:o=p(t,!0),key:t,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=s),i&&(i.next=s),f?a.size++:e.size++,"F"!==o&&(a.index[o]=s)),e},y=function(e,t){var n,i=h(e),o=p(t);if("F"!==o)return i.index[o];for(n=i.first;n;n=n.next)if(n.key==t)return n};return a(d.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=h(this),n=y(this,e);if(n){var i=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),t.first==n&&(t.first=i),t.last==n&&(t.last=o),f?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=h(this),i=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!y(this,e)}}),a(d.prototype,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),f&&i(d.prototype,"size",{get:function(){return h(this).size}}),d},setStrong:function(e,t,n){var i=t+" Iterator",o=g(t),a=g(i);c(e,t,function(e,t){m(this,{type:i,target:e,state:o(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var i,o=n(4),a=n(55).f,s=n(26),l=n(222),u=n(35),c=n(224),d=n(44),f="".endsWith,p=Math.min,h=c("endsWith");o({target:"String",proto:!0,forced:!(!d&&!h&&(i=a(String.prototype,"endsWith"))&&!i.writable||h)},{endsWith:function(e){var t=String(u(this));l(e);var n=arguments.length>1?arguments[1]:void 0,i=s(t.length),o=void 0===n?i:p(s(n),i),a=String(e);return f?f.call(t,a,o):t.slice(o-a.length,o)===a}})},function(e,t,n){"use strict";(function(e){var i=n(229),o=n(230),a=n(231);function s(){return u.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff}function l(e,t){if(s()<t)throw RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"u">typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw TypeError('"encoding" must be a valid string encoding');var i=0|m(t,n),o=(e=l(e,i)).write(t,n);return o!==i&&(e=e.slice(0,o)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n,i=0|h(t.length);return 0===(e=l(e,i)).length||t.copy(e,0,0,i),e}if(t){if("u">typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?l(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function f(e,t){if(d(t),e=l(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=l(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function h(e){if(e>=s())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if("u">typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(i)return E(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var o,a,s,l=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var i,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var a="",s=t;s<n;++s){a+=(i=e[s])<16?"0"+i.toString(16):i.toString(16)}return a}(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}(this,t,n);case"latin1":case"binary":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}(this,t,n);case"base64":return o=this,a=t,s=n,0===a&&s===o.length?i.fromByteArray(o):i.fromByteArray(o.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var i=e.slice(t,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+256*i[a+1]);return o}(this,t,n);default:if(l)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),l=!0}}function v(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,o){if(0===e.length)return -1;if("string"==typeof n?(i=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),isNaN(n*=1)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1}else if(n<0){if(!o)return -1;n=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,o);throw TypeError("val must be string, number or Buffer")}function b(e,t,n,i,o){var a,s=1,l=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;s=2,l/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var d=-1;for(a=n;a<l;a++)if(c(e,a)===c(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===u)return d*s}else -1!==d&&(a-=a-d),d=-1}else for(n+u>l&&(n=l-u),a=n;a>=0;a--){for(var f=!0,p=0;p<u;p++)if(c(e,a+p)!==c(t,p)){f=!1;break}if(f)return a}return -1}function x(e,t,n,i){return I(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var a,s,l,u,c=e[o],d=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(d=c);break;case 2:128==(192&(a=e[o+1]))&&(u=(31&c)<<6|63&a)>127&&(d=u);break;case 3:a=e[o+1],s=e[o+2],128==(192&a)&&128==(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:a=e[o+1],s=e[o+2],l=e[o+3],128==(192&a)&&128==(192&s)&&128==(192&l)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&l)>65535&&u<1114112&&(d=u)}null===d?(d=65533,f=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),o+=f}var p=i.length;if(p<=4096)return String.fromCharCode.apply(String,i);for(var h="",m=0;m<p;)h+=String.fromCharCode.apply(String,i.slice(m,m+=4096));return h}function A(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function C(e,t,n,i,o,a){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw RangeError('"value" argument is out of bounds');if(n+i>e.length)throw RangeError("Index out of range")}function S(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function _(e,t,n,i){t<0&&(t=0xffffffff+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function T(e,t,n,i,o,a){if(n+i>e.length||n<0)throw RangeError("Index out of range")}function O(e,t,n,i,a){return a||T(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function P(e,t,n,i,a){return a||T(e,0,n,8),o.write(e,t,n,i,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"u">typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return d(e),e<=0?l(null,e):void 0!==t?"string"==typeof n?l(null,e).fill(t,n):l(null,e).fill(t):l(null,e)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:+(i<n)},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var n,i=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?w(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,i,o){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return -1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(a,s),c=this.slice(i,o),d=e.slice(t,n),f=0;f<l;++f)if(c[f]!==d[f]){a=c[f],s=d[f];break}return a<s?-1:+(s<a)},u.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o,a,s,l,u,c,d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var f=!1;;)switch(i){case"hex":return function(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;var a=t.length;if(a%2!=0)throw TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var l=parseInt(t.substr(2*s,2),16);if(isNaN(l))break;e[n+s]=l}return s}(this,e,t,n);case"utf8":case"utf-8":return o=t,a=n,I(E(e,this.length-o),this,o,a);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return s=t,l=n,I(D(e),this,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,c=n,I(function(e,t){for(var n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,o.push(n%256),o.push(i);return o}(e,this.length-u),this,u,c);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;n=new u(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,i){e*=1,t|=0,n|=0,i||C(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,i){e*=1,t|=0,n|=0,i||C(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,4,0xffffffff,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,4,0xffffffff,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,i){if(e*=1,t|=0,!i){var o=Math.pow(2,8*n-1);C(this,e,t,n,o-1,-o)}var a=0,s=1,l=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=(e/s|0)-l&255;return t+n},u.prototype.writeIntBE=function(e,t,n,i){if(e*=1,t|=0,!i){var o=Math.pow(2,8*n-1);C(this,e,t,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=(e/s|0)-l&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,4,0x7fffffff,-0x80000000),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e*=1,t|=0,n||C(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("sourceStart out of bounds");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,a=i-n;if(this===e&&n<t&&t<i)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o,a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:E(new u(e,i).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function E(e,t){var n;t=t||1/0;for(var i=e.length,o=null,a=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319||s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function D(e){return i.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isASCIIByte=function(e){return e>=0&&e<=127}},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.length=function(e){return e.length},t.byteLowercase=function(e){for(var t=0;t<e.length;t++){var n=e[t];n>=65&&n<=90&&(e[t]=n+32)}},t.byteUppercase=function(e){for(var t=0;t<e.length;t++){var n=e[t];n>=97&&n<=122&&(e[t]=n-32)}},t.byteCaseInsensitiveMatch=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],o=t[n];if(i>=65&&i<=90&&(i+=32),o>=65&&o<=90&&(o+=32),i!==o)return!1}return!0},t.startsWith=function(e,t){for(var n=0;;){if(n>=e.length)return!1;if(n>=t.length)return!0;if(e[n]!==t[n])return!1;n++}},t.byteLessThan=function(e,t){for(var n=0;;){if(n>=e.length)return!1;if(n>=t.length)return!0;var i=e[n],o=t[n];if(i<o)return!0;if(i>o)return!1;n++}},t.isomorphicDecode=function(e){return String.fromCodePoint.apply(String,o(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(7),a=n(0),s=n(12),l=function(){function e(e){this._associatedDocument=e||i.dom.window.document}return e.prototype.createDocumentType=function(e,t,n){return a.namespace_validate(e),a.create_documentType(this._associatedDocument,e,t,n)},e.prototype.createDocument=function(e,t,n){void 0===n&&(n=null);var i=a.create_xmlDocument(),s=null;return t&&(s=a.document_internalCreateElementNS(i,e,t)),n&&i.appendChild(n),s&&i.appendChild(s),i._origin=this._associatedDocument._origin,e===o.namespace.HTML?i._contentType="application/xhtml+xml":e===o.namespace.SVG?i._contentType="image/svg+xml":i._contentType="application/xml",i},e.prototype.createHTMLDocument=function(e){var t=a.create_document();t._type="html",t._contentType="text/html",t.appendChild(a.create_documentType(t,"html","",""));var n=a.element_createAnElement(t,"html",o.namespace.HTML);t.appendChild(n);var i=a.element_createAnElement(t,"head",o.namespace.HTML);if(n.appendChild(i),void 0!==e){var s=a.element_createAnElement(t,"title",o.namespace.HTML);i.appendChild(s);var l=a.create_text(t,e);s.appendChild(l)}var u=a.element_createAnElement(t,"body",o.namespace.HTML);return n.appendChild(u),t._origin=this._associatedDocument._origin,t},e.prototype.hasFeature=function(){return!0},e._create=function(t){return new e(t)},e}();t.DOMImplementationImpl=l,s.idl_defineConst(l.prototype,"_ID","@oozcitak/dom")},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(70),s=n(1),l=n(0);t.WindowImpl=function(e){function t(){var t=e.call(this)||this;return t._signalSlots=new Set,t._mutationObserverMicrotaskQueued=!1,t._mutationObservers=new Set,t._iteratorList=new s.FixedSizeSet,t._associatedDocument=l.create_document(),t}return o(t,e),Object.defineProperty(t.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),t._create=function(){return new t},t}(a.EventTargetImpl)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.Guard=function(){function e(){}return e.isNode=function(e){return!!e&&void 0!==e._nodeType},e.isDocumentNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.Document},e.isDocumentTypeNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.DocumentType},e.isDocumentFragmentNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.DocumentFragment},e.isAttrNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.Attribute},e.isCharacterDataNode=function(t){if(!e.isNode(t))return!1;var n=t._nodeType;return n===i.NodeType.Text||n===i.NodeType.ProcessingInstruction||n===i.NodeType.Comment||n===i.NodeType.CData},e.isTextNode=function(t){return e.isNode(t)&&(t._nodeType===i.NodeType.Text||t._nodeType===i.NodeType.CData)},e.isExclusiveTextNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.Text},e.isCDATASectionNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.CData},e.isCommentNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.Comment},e.isProcessingInstructionNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.ProcessingInstruction},e.isElementNode=function(t){return e.isNode(t)&&t._nodeType===i.NodeType.Element},e.isCustomElementNode=function(t){return e.isElementNode(t)&&"custom"===t._customElementState},e.isShadowRoot=function(e){return!!e&&void 0!==e.host},e.isMouseEvent=function(e){return!!e&&void 0!==e.screenX&&null!=e.screenY},e.isSlotable=function(t){return!!t&&void 0!==t._name&&void 0!==t._assignedSlot&&(e.isTextNode(t)||e.isElementNode(t))},e.isSlot=function(t){return!!t&&void 0!==t._name&&void 0!==t._assignedNodes&&e.isElementNode(t)},e.isWindow=function(e){return!!e&&void 0!==e.navigator},e.isEventListener=function(e){return!!e&&void 0!==e.handleEvent},e.isRegisteredObserver=function(e){return!!e&&void 0!==e.observer&&void 0!==e.options},e.isTransientRegisteredObserver=function(t){return!!t&&void 0!==t.source&&e.isRegisteredObserver(t)},e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.XMLDocumentImpl=function(e){function t(){return e.call(this)||this}return o(t,e),t}(n(98).DocumentImpl)},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(1),l=n(243),u=n(7),c=n(244),d={ftp:21,file:null,http:80,https:443,ws:80,wss:443},f=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,g=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,v=/[\0\t\f\r #%/:?@\[\\\]]/;function y(e){void 0!==a&&a.call(null,"Validation Error: "+e)}function b(e){return e in d}function x(e){return b(e.scheme)}function w(e){return d[e]||null}function A(e){return""!==e.username||""!==e.password}function C(e,t){void 0===t&&(t=!1);var n,o,a=e.scheme+":";if(null!==e.host?(a+="//",A(e)&&(a+=e.username,""!==e.password&&(a+=":"+e.password),a+="@"),a+=S(e.host),null!==e.port&&(a+=":"+e.port)):null===e.host&&"file"===e.scheme&&(a+="//"),e._cannotBeABaseURLFlag)a+=e.path[0];else try{for(var s=i(e.path),l=s.next();!l.done;l=s.next())a+="/"+l.value}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return null!==e.query&&(a+="?"+e.query),t||null===e.fragment||(a+="#"+e.fragment),a}function S(e){return s.isNumber(e)?_(e):s.isArray(e)?"["+T(e)+"]":e}function _(e){for(var t="",n=e,i=1;i<=4;i++)t=(n%256).toString()+t,4!==i&&(t="."+t),n=Math.floor(n/256);return t}function T(e){for(var t="",n=null,i=-1,o=0,a=0,s=0;s<8;s++)if(0===e[s]){o=1;for(var l=s+1;l<8&&0===e[l];l++)o++;o>a&&(a=o,i=s)}a>1&&(n=i);for(var u=!1,c=0;c<8;c++)u&&0===e[c]||(u&&(u=!1),n!==c?(t+=e[c].toString(16),7!==c&&(t+=":")):(t+=0===c?"::":":",u=!0));return t}function O(e,t,n,o,a){if(void 0===o){o={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var c=/^[\u0000-\u001F\u0020]+/,d=/[\u0000-\u001F\u0020]+$/;(c.test(e)||d.test(e))&&y("Input string contains leading or trailing control characters or space."),e=(e=e.replace(c,"")).replace(d,"")}var v=/[\u0009\u000A\u000D]/g;v.test(e)&&y("Input string contains tab or newline characters."),e=e.replace(v,"");var C=void 0===a?l.ParserState.SchemeStart:a;void 0===t&&(t=null);for(var S=void 0===n||"replacement"===n||"UTF-16BE"===n||"UTF-16LE"===n?"UTF-8":n,_="",T=!1,O=!1,R=!1,B=new s.StringWalker(e);;){switch(C){case l.ParserState.SchemeStart:if(u.codePoint.ASCIIAlpha.test(B.c()))_+=B.c().toLowerCase(),C=l.ParserState.Scheme;else{if(void 0!==a)return y("Invalid scheme start character."),null;C=l.ParserState.NoScheme,B.pointer--}break;case l.ParserState.Scheme:if(u.codePoint.ASCIIAlphanumeric.test(B.c())||"+"===B.c()||"-"===B.c()||"."===B.c())_+=B.c().toLowerCase();else{if(":"!==B.c()){if(void 0===a){_="",C=l.ParserState.NoScheme,B.pointer=0;continue}return y("Invalid input string."),null}if(void 0!==a&&(b(o.scheme)&&!b(_)||!b(o.scheme)&&b(_)||(A(o)||null!==o.port)&&"file"===_||"file"===o.scheme&&(""===o.host||null===o.host)))return o;if(o.scheme=_,void 0!==a)return o.port===w(o.scheme)&&(o.port=null),o;_="","file"===o.scheme?(B.remaining().startsWith("//")||y("Invalid file URL scheme, '//' expected."),C=l.ParserState.File):x(o)&&null!==t&&t.scheme===o.scheme?C=l.ParserState.SpecialRelativeOrAuthority:x(o)?C=l.ParserState.SpecialAuthoritySlashes:B.remaining().startsWith("/")?(C=l.ParserState.PathOrAuthority,B.pointer++):(o._cannotBeABaseURLFlag=!0,o.path.push(""),C=l.ParserState.CannotBeABaseURLPath)}break;case l.ParserState.NoScheme:if(null===t||t._cannotBeABaseURLFlag&&"#"!==B.c())return y("Invalid input string."),null;t._cannotBeABaseURLFlag&&"#"===B.c()?(o.scheme=t.scheme,o.path=u.list.clone(t.path),o.query=t.query,o.fragment="",o._cannotBeABaseURLFlag=!0,C=l.ParserState.Fragment):(C="file"!==t.scheme?l.ParserState.Relative:l.ParserState.File,B.pointer--);break;case l.ParserState.SpecialRelativeOrAuthority:"/"===B.c()&&B.remaining().startsWith("/")?(C=l.ParserState.SpecialAuthorityIgnoreSlashes,B.pointer++):(y("Invalid input string."),C=l.ParserState.Relative,B.pointer--);break;case l.ParserState.PathOrAuthority:"/"===B.c()?C=l.ParserState.Authority:(C=l.ParserState.Path,B.pointer--);break;case l.ParserState.Relative:if(null===t)throw Error("Invalid parser state. Base URL is null.");switch(o.scheme=t.scheme,B.c()){case"":o.username=t.username,o.password=t.password,o.host=t.host,o.port=t.port,o.path=u.list.clone(t.path),o.query=t.query;break;case"/":C=l.ParserState.RelativeSlash;break;case"?":o.username=t.username,o.password=t.password,o.host=t.host,o.port=t.port,o.path=u.list.clone(t.path),o.query="",C=l.ParserState.Query;break;case"#":o.username=t.username,o.password=t.password,o.host=t.host,o.port=t.port,o.path=u.list.clone(t.path),o.query=t.query,o.fragment="",C=l.ParserState.Fragment;break;default:x(o)&&"\\"===B.c()?(y("Invalid input string."),C=l.ParserState.RelativeSlash):(o.username=t.username,o.password=t.password,o.host=t.host,o.port=t.port,o.path=u.list.clone(t.path),0!==o.path.length&&o.path.splice(o.path.length-1,1),C=l.ParserState.Path,B.pointer--)}break;case l.ParserState.RelativeSlash:if(x(o)&&("/"===B.c()||"\\"===B.c()))"\\"===B.c()&&y("Invalid input string."),C=l.ParserState.SpecialAuthorityIgnoreSlashes;else if("/"===B.c())C=l.ParserState.Authority;else{if(null===t)throw Error("Invalid parser state. Base URL is null.");o.username=t.username,o.password=t.password,o.host=t.host,o.port=t.port,C=l.ParserState.Path,B.pointer--}break;case l.ParserState.SpecialAuthoritySlashes:"/"===B.c()&&B.remaining().startsWith("/")?(C=l.ParserState.SpecialAuthorityIgnoreSlashes,B.pointer++):(y("Expected '//'."),C=l.ParserState.SpecialAuthorityIgnoreSlashes,B.pointer--);break;case l.ParserState.SpecialAuthorityIgnoreSlashes:"/"!==B.c()&&"\\"!==B.c()?(C=l.ParserState.Authority,B.pointer--):y("Unexpected '/' or '\\'.");break;case l.ParserState.Authority:if("@"===B.c()){y("Unexpected '@'."),T&&(_="%40"+_),T=!0;try{for(var L,F,j,G,z,W=(L=void 0,i(_)),H=W.next();!H.done;H=W.next()){var q=H.value;if(":"!==q||R){var K=U(q,m);R?o.password+=K:o.username+=K}else R=!0}}catch(e){L={error:e}}finally{try{H&&!H.done&&(F=W.return)&&F.call(W)}finally{if(L)throw L.error}}_=""}else if(""===B.c()||"/"===B.c()||"?"===B.c()||"#"===B.c()||x(o)&&"\\"===B.c()){if(T&&""===_)return y("Invalid input string."),null;B.pointer-=_.length+1,_="",C=l.ParserState.Host}else _+=B.c();break;case l.ParserState.Host:case l.ParserState.Hostname:if(void 0!==a&&"file"===o.scheme)B.pointer--,C=l.ParserState.FileHost;else if(":"!==B.c()||O)if(""===B.c()||"/"===B.c()||"?"===B.c()||"#"===B.c()||x(o)&&"\\"===B.c()){if(B.pointer--,x(o)&&""===_)return y("Invalid input string."),null;if(void 0!==a&&""===_&&(A(o)||null!==o.port))return y("Invalid input string."),o;if(null===(z=N(_,!x(o))))return null;if(o.host=z,_="",C=l.ParserState.PathStart,void 0!==a)return o}else"["===B.c()&&(O=!0),"]"===B.c()&&(O=!1),_+=B.c();else{if(""===_)return y("Invalid input string."),null;if(null===(z=N(_,!x(o))))return null;if(o.host=z,_="",C=l.ParserState.Port,a===l.ParserState.Hostname)return o}break;case l.ParserState.Port:if(u.codePoint.ASCIIDigit.test(B.c()))_+=B.c();else{if(!(""===B.c()||"/"===B.c()||"?"===B.c()||"#"===B.c()||x(o)&&"\\"===B.c()||a))return y("Invalid input string."),null;if(""!==_&&""!==_){var X=parseInt(_,10);if(X>65535)return y("Invalid port number."),null;o.port=X===w(o.scheme)?null:X,_=""}if(void 0!==a)return o;C=l.ParserState.PathStart,B.pointer--}break;case l.ParserState.File:if(o.scheme="file","/"===B.c()||"\\"===B.c())"\\"===B.c()&&y("Invalid input string."),C=l.ParserState.FileSlash;else if(null!==t&&"file"===t.scheme)switch(B.c()){case"":o.host=t.host,o.path=u.list.clone(t.path),o.query=t.query;break;case"?":o.host=t.host,o.path=u.list.clone(t.path),o.query="",C=l.ParserState.Query;break;case"#":o.host=t.host,o.path=u.list.clone(t.path),o.query=t.query,o.fragment="",C=l.ParserState.Fragment;break;default:k(B.substring())?y("Unexpected windows drive letter in input string."):(o.host=t.host,o.path=u.list.clone(t.path),E(o)),C=l.ParserState.Path,B.pointer--}else C=l.ParserState.Path,B.pointer--;break;case l.ParserState.FileSlash:"/"===B.c()||"\\"===B.c()?("\\"===B.c()&&y("Invalid input string."),C=l.ParserState.FileHost):(null===t||"file"!==t.scheme||k(B.substring())||(D(t.path[0])?o.path.push(t.path[0]):o.host=t.host),C=l.ParserState.Path,B.pointer--);break;case l.ParserState.FileHost:if(""===B.c()||"/"===B.c()||"\\"===B.c()||"?"===B.c()||"#"===B.c())if(B.pointer--,void 0===a&&I(_))y("Unexpected windows drive letter in input string."),C=l.ParserState.Path;else if(""===_){if(o.host="",void 0!==a)return o;C=l.ParserState.PathStart}else{if(null===(z=N(_,!x(o))))return null;if("localhost"===z&&(z=""),o.host=z,void 0!==a)return o;_="",C=l.ParserState.PathStart}else _+=B.c();break;case l.ParserState.PathStart:x(o)?("\\"===B.c()&&y("Invalid input string."),C=l.ParserState.Path,"/"!==B.c()&&"\\"!==B.c()&&B.pointer--):void 0===a&&"?"===B.c()?(o.query="",C=l.ParserState.Query):void 0===a&&"#"===B.c()?(o.fragment="",C=l.ParserState.Fragment):""!==B.c()&&(C=l.ParserState.Path,"/"!==B.c()&&B.pointer--);break;case l.ParserState.Path:if(""===B.c()||"/"===B.c()||x(o)&&"\\"===B.c()||void 0===a&&("?"===B.c()||"#"===B.c())){if(x(o)&&"\\"===B.c()&&y("Invalid input string."),M(_))E(o),"/"===B.c()||x(o)&&"\\"===B.c()||o.path.push("");else if(!P(_)||"/"===B.c()||x(o)&&"\\"===B.c()){if(!P(_)){if("file"===o.scheme&&0===o.path.length&&I(_)){null!==o.host&&""!==o.host&&(y("Invalid input string."),o.host="");var Y=Array.from(_);_=Y.slice(0,1)+":"+Y.slice(2)}o.path.push(_)}}else o.path.push("");if(_="","file"===o.scheme&&(""===B.c()||"?"===B.c()||"#"===B.c()))for(;o.path.length>1&&""===o.path[0];)y("Invalid input string."),o.path.splice(0,1);"?"===B.c()&&(o.query="",C=l.ParserState.Query),"#"===B.c()&&(o.fragment="",C=l.ParserState.Fragment)}else g.test(B.c())||"%"===B.c()||y("Character is not a URL code point or a percent encoded character."),"%"!==B.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(B.remaining())||y("Percent encoded character must be followed by two hex digits."),_+=U(B.c(),h);break;case l.ParserState.CannotBeABaseURLPath:"?"===B.c()?(o.query="",C=l.ParserState.Query):"#"===B.c()?(o.fragment="",C=l.ParserState.Fragment):(""===B.c()||g.test(B.c())||"%"===B.c()||y("Character is not a URL code point or a percent encoded character."),"%"!==B.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(B.remaining())||y("Percent encoded character must be followed by two hex digits."),""!==B.c()&&(o.path[0]+=U(B.c(),f)));break;case l.ParserState.Query:if("UTF-8"===S||x(o)&&"ws"!==o.scheme&&"wss"!==o.scheme||(S="UTF-8"),void 0===a&&"#"===B.c())o.fragment="",C=l.ParserState.Fragment;else if(""!==B.c()){if(g.test(B.c())||"%"===B.c()||y("Character is not a URL code point or a percent encoded character."),"%"!==B.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(B.remaining())||y("Percent encoded character must be followed by two hex digits."),"UTF-8"!==S.toUpperCase())throw Error("Only UTF-8 encoding is supported.");var Z=s.utf8Encode(B.c());if(Z.length>=3&&38===Z[0]&&35===Z[1]&&59===Z[Z.length-1])Z=Z.subarray(2,Z.length-1),o.query+="%26%23"+u.byteSequence.isomorphicDecode(Z)+"%3B";else try{for(var J=(j=void 0,i(Z)),Q=J.next();!Q.done;Q=J.next()){var $=Q.value;$<33||$>126||34===$||35===$||60===$||62===$||39===$&&x(o)?o.query+=V($):o.query+=String.fromCharCode($)}}catch(e){j={error:e}}finally{try{Q&&!Q.done&&(G=J.return)&&G.call(J)}finally{if(j)throw j.error}}}break;case l.ParserState.Fragment:""===B.c()||("\0"===B.c()?y("NULL character in input string."):(g.test(B.c())||"%"===B.c()||y("Unexpected character in fragment string."),"%"!==B.c()||/^[A-Za-z0-9][A-Za-z0-9]/.test(B.remaining())||y("Unexpected character in fragment string."),o.fragment+=U(B.c(),p)))}if(B.eof)break;B.pointer++}return o}function P(e){return"."===e||"%2e"===e.toLowerCase()}function M(e){var t=e.toLowerCase();return".."===t||".%2e"===t||"%2e."===t||"%2e%2e"===t}function E(e){var t=e.path;0!==t.length&&("file"===e.scheme&&1===t.length&&D(t[0])||e.path.splice(e.path.length-1,1))}function D(e){return e.length>=2&&u.codePoint.ASCIIAlpha.test(e[0])&&":"===e[1]}function I(e){return e.length>=2&&u.codePoint.ASCIIAlpha.test(e[0])&&(":"===e[1]||"|"===e[1])}function k(e){return e.length>=2&&I(e)&&(2===e.length||"/"===e[2]||"\\"===e[2]||"?"===e[2]||"#"===e[2])}function N(e,t){if(void 0===t&&(t=!1),e.startsWith("["))return e.endsWith("]")?L(e.substring(1,e.length-1)):(y("Expected ']' after '['."),null);if(t)return F(e);var n=H(s.utf8Decode(G(e)));if(null===n||v.test(n))return y("Invalid domain."),null;var i=B(n);return null===i||s.isNumber(i)?i:n}function R(e,t){void 0===t&&(t={value:!1});var n=10;return e.startsWith("0x")||e.startsWith("0X")?(t.value=!0,e=e.substr(2),n=16):e.length>=2&&"0"===e[0]&&(t.value=!0,e=e.substr(1),n=8),""===e?0:(10===n?/^[0-9]+$/:16===n?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(e)?parseInt(e,n):null}function B(e){var t,n,o,a,s={value:!1},l=e.split(".");if(""===l[l.length-1]&&(s.value=!0,l.length>1&&l.pop()),l.length>4)return e;var u=[];try{for(var c=i(l),d=c.next();!d.done;d=c.next()){var f=d.value;if(""===f||null===(g=R(f,s)))return e;u.push(g)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}s.value&&y("Invalid IP v4 address.");for(var p=0;p<u.length;p++)if(u[p]>255&&(y("Invalid IP v4 address."),p<u.length-1))return null;if(u[u.length-1]>=Math.pow(256,5-u.length))return y("Invalid IP v4 address."),null;var h=u[u.length-1];u.pop();var m=0;try{for(var g,v=i(u),b=v.next();!b.done;b=v.next())h+=(g=b.value)*Math.pow(256,3-m),m++}catch(e){o={error:e}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}return h}function L(e){var t,n=[0,0,0,0,0,0,0,0],i=0,a=null,l=new s.StringWalker(e);if(":"===l.c()){if(!l.remaining().startsWith(":"))return y("Invalid IP v6 address."),null;l.pointer+=2,a=i+=1}for(;""!==l.c();){if(8===i)return y("Invalid IP v6 address."),null;if(":"!==l.c()){for(var c=0,d=0;d<4&&u.codePoint.ASCIIHexDigit.test(l.c());)c=16*c+parseInt(l.c(),16),l.pointer++,d++;if("."===l.c()){if(0===d||(l.pointer-=d,i>6))return y("Invalid IP v6 address."),null;for(var f=0;""!==l.c();){var p=null;if(f>0){if(!("."===l.c()&&f<4))return y("Invalid IP v6 address."),null;l.pointer++}if(!u.codePoint.ASCIIDigit.test(l.c()))return y("Invalid IP v6 address."),null;for(;u.codePoint.ASCIIDigit.test(l.c());){var h=parseInt(l.c(),10);if(null===p)p=h;else{if(0===p)return y("Invalid IP v6 address."),null;p=10*p+h}if(p>255)return y("Invalid IP v6 address."),null;l.pointer++}if(null===p)return y("Invalid IP v6 address."),null;n[i]=256*n[i]+p,2!=++f&&4!==f||i++}if(4!==f)return y("Invalid IP v6 address."),null;break}if(":"===l.c()){if(l.pointer++,""===l.c())return y("Invalid IP v6 address."),null}else if(""!==l.c())return y("Invalid IP v6 address."),null;n[i]=c,i++}else{if(null!==a)return y("Invalid IP v6 address."),null;l.pointer++,a=++i}}if(null!==a){var m=i-a;for(i=7;0!==i&&m>0;)t=o([n[a+m-1],n[i]],2),n[i]=t[0],n[a+m-1]=t[1],i--,m--}else if(null===a&&8!==i)return y("Invalid IP v6 address."),null;return n}function F(e){if(/[\x00\t\f\r #/:?@\[\\\]]/.test(e))return y("Invalid host string."),null;var t,n,o="";try{for(var a=i(e),s=a.next();!s.done;s=a.next())o+=U(s.value,f)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}function V(e){return"%"+("00"+e.toString(16).toUpperCase()).slice(-2)}function j(e){for(var t=function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},n=new Uint8Array(e.length),i=0,o=0;o<e.length;o++){var a=e[o];if(37!==a)n[i]=a,i++;else if(37===a&&o>=e.length-2)n[i]=a,i++;else if(37!==a||t(e[o+1])&&t(e[o+2])){var l=parseInt(s.utf8Decode(Uint8Array.of(e[o+1],e[o+2])),16);n[i]=l,i++,o+=2}else n[i]=a,i++}return n.subarray(0,i)}function G(e){return j(s.utf8Encode(e))}function U(e,t){if(!t.test(e))return e;var n,o,a=s.utf8Encode(e),l="";try{for(var u=i(a),c=u.next();!c.done;c=u.next())l+=V(c.value)}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return l}function z(e){var t,n,o,a,l=[],u=[];try{for(var c=i(e),d=c.next();!d.done;d=c.next()){var f=d.value;38===f?(l.push(Uint8Array.from(u)),u=[]):u.push(f)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}0!==u.length&&l.push(Uint8Array.from(u));var p=[];try{for(var h=i(l),m=h.next();!m.done;m=h.next()){var g=m.value;if(0!==g.length){for(var v=g.indexOf(61),y=-1!==v?g.slice(0,v):g,b=-1!==v?g.slice(v+1):new Uint8Array,x=0;x<y.length;x++)43===y[x]&&(y[x]=32);for(x=0;x<b.length;x++)43===b[x]&&(b[x]=32);var w=s.utf8Decode(y),A=s.utf8Decode(b);p.push([w,A])}}}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return p}function W(e){var t,n,o="";try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var l=s.value;o+=32===l?"+":42===l||45===l||46===l||l>=48&&l<=57||l>=65&&l<=90||95===l||l>=97&&l<=122?String.fromCodePoint(l):V(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}function H(e,t){void 0===t&&(t=!1);var n=c.domainToASCII(e);return""===n?(y("Invalid domain name."),null):n}t.setValidationErrorCallback=function(e){a=e},t.newURL=function(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}},t.isSpecialScheme=b,t.isSpecial=x,t.defaultPort=w,t.includesCredentials=A,t.cannotHaveAUsernamePasswordPort=function(e){return null===e.host||""===e.host||e._cannotBeABaseURLFlag||"file"===e.scheme},t.urlSerializer=C,t.hostSerializer=S,t.iPv4Serializer=_,t.iPv6Serializer=T,t.urlParser=function(e,t,n){var i=O(e,t,n);return null===i?null:("blob"!==i.scheme||(i._blobURLEntry=null),i)},t.basicURLParser=O,t.setTheUsername=function(e,t){var n,o,a="";try{for(var s=i(t),l=s.next();!l.done;l=s.next())a+=U(l.value,m)}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}e.username=a},t.setThePassword=function(e,t){var n,o,a="";try{for(var s=i(t),l=s.next();!l.done;l=s.next())a+=U(l.value,m)}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}e.password=a},t.isSingleDotPathSegment=P,t.isDoubleDotPathSegment=M,t.shorten=E,t.isNormalizedWindowsDriveLetter=D,t.isWindowsDriveLetter=I,t.startsWithAWindowsDriveLetter=k,t.hostParser=N,t.iPv4NumberParser=R,t.iPv4Parser=B,t.iPv6Parser=L,t.opaqueHostParser=F,t.resolveABlobURL=function(e){return null},t.percentEncode=V,t.percentDecode=j,t.stringPercentDecode=G,t.utf8PercentEncode=U,t.hostEquals=function(e,t){return e===t},t.urlEquals=function(e,t,n){return void 0===n&&(n=!1),C(e,n)===C(t,n)},t.urlEncodedStringParser=function(e){return z(s.utf8Encode(e))},t.urlEncodedParser=z,t.urlEncodedByteSerializer=W,t.urlEncodedSerializer=function(e,t){if("UTF-8"!==(void 0===t||"replacement"===t||"UTF-16BE"===t||"UTF-16LE"===t?"UTF-8":t).toUpperCase())throw Error("Only UTF-8 encoding is supported.");var n,o,a="";try{for(var l=i(e),u=l.next();!u.done;u=l.next()){var c=u.value,d=W(s.utf8Encode(c[0])),f=c[1];f=W(s.utf8Encode(f)),""!==a&&(a+="&"),a+=d+"="+f}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return a},t.origin=function e(t){switch(t.scheme){case"blob":t._blobURLEntry;var n=O(t.path[0]);return null===n?l.OpaqueOrigin:e(n);case"ftp":case"http":case"https":case"ws":case"wss":return[t.scheme,null===t.host?"":t.host,t.port,null];default:return l.OpaqueOrigin}},t.domainToASCII=H,t.domainToUnicode=function(e,t){void 0===t&&(t=!1);var n=c.domainToUnicode(e);return""===n&&y("Invalid domain name."),n},t.asciiSerializationOfAnOrigin=function(e){if(""===e[0]&&""===e[1]&&null===e[2]&&null===e[3])return"null";var t=e[0]+"://"+S(e[1]);return null!==e[2]&&(t+=":"+e[2].toString()),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.AbortControllerImpl=function(){function e(){this._signal=i.create_abortSignal()}return Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),e.prototype.abort=function(){i.abort_signalAbort(this._signal)},e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(70),s=n(0);t.AbortSignalImpl=function(e){function t(){var t=e.call(this)||this;return t._abortedFlag=!1,t._abortAlgorithms=new Set,t}return o(t,e),Object.defineProperty(t.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onabort",{get:function(){return s.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(e){s.event_setterEventHandlerIDLAttribute(this,"onabort",e)},enumerable:!0,configurable:!0}),t._create=function(){return new t},t}(a.EventTargetImpl)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(34),l=n(12),u=function(e){function t(t,n,i){var o=e.call(this)||this;return o._name="",o._publicId="",o._systemId="",o._name=t,o._publicId=n,o._systemId=i,o}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Mixin: ChildNode not implemented.")},t.prototype.remove=function(){throw Error("Mixin: ChildNode not implemented.")},t._create=function(e,n,i,o){void 0===i&&(i=""),void 0===o&&(o="");var a=new t(n,i,o);return a._nodeDocument=e,a},t}(s.NodeImpl);t.DocumentTypeImpl=u,l.idl_defineConst(u.prototype,"_nodeType",a.NodeType.DocumentType)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),s=n(1),l=n(0);t.ShadowRootImpl=function(e){function t(t,n){var i=e.call(this)||this;return i._host=t,i._mode=n,i}return o(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),t.prototype._getTheParent=function(e){return e._composedFlag||s.isEmpty(e._path)||l.tree_rootNode(e._path[0].invocationTarget)!==this?this._host:null},t._create=function(e,n){return new t(n,"closed")},t}(a.DocumentFragmentImpl)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(34),l=n(0),u=n(12),c=function(e){function t(t){var n=e.call(this)||this;return n._namespace=null,n._namespacePrefix=null,n._element=null,n._value="",n._localName=t,n}return o(t,e),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){l.attr_setAnExistingAttributeValue(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_qualifiedName",{get:function(){return null!==this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),t._create=function(e,n){var i=new t(n);return i._nodeDocument=e,i},t}(s.NodeImpl);t.AttrImpl=c,u.idl_defineConst(c.prototype,"_nodeType",a.NodeType.Attribute),u.idl_defineConst(c.prototype,"specified",!0)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(101),s=n(2),l=n(12),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t._create=function(e,n){void 0===n&&(n="");var i=new t(n);return i._nodeDocument=e,i},t}(a.TextImpl);t.CDATASectionImpl=u,l.idl_defineConst(u.prototype,"_nodeType",s.NodeType.CData)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(71),l=n(12),u=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return o(t,e),t._create=function(e,n){void 0===n&&(n="");var i=new t(n);return i._nodeDocument=e,i},t}(s.CharacterDataImpl);t.CommentImpl=u,l.idl_defineConst(u.prototype,"_nodeType",a.NodeType.Comment)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(71),l=n(12),u=function(e){function t(t,n){var i=e.call(this,n)||this;return i._target=t,i}return o(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t._create=function(e,n,i){var o=new t(n,i);return o._nodeDocument=e,o},t}(s.CharacterDataImpl);t.ProcessingInstructionImpl=u,l.idl_defineConst(u.prototype,"_nodeType",a.NodeType.ProcessingInstruction)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(0),a=n(3),s=n(1);t.HTMLCollectionImpl=function(){function e(e,t){return this._live=!0,this._root=e,this._filter=t,new Proxy(this,this)}return Object.defineProperty(e.prototype,"length",{get:function(){for(var e=this,t=0,n=o.tree_getFirstDescendantNode(this._root,!1,!1,function(t){return a.Guard.isElementNode(t)&&e._filter(t)});null!==n;)t++,n=o.tree_getNextDescendantNode(this._root,n,!1,!1,function(t){return a.Guard.isElementNode(t)&&e._filter(t)});return t},enumerable:!0,configurable:!0}),e.prototype.item=function(e){for(var t=this,n=0,i=o.tree_getFirstDescendantNode(this._root,!1,!1,function(e){return a.Guard.isElementNode(e)&&t._filter(e)});null!==i;){if(n===e)return i;n++,i=o.tree_getNextDescendantNode(this._root,i,!1,!1,function(e){return a.Guard.isElementNode(e)&&t._filter(e)})}return null},e.prototype.namedItem=function(e){var t=this;if(""===e)return null;for(var n=o.tree_getFirstDescendantNode(this._root,!1,!1,function(e){return a.Guard.isElementNode(e)&&t._filter(e)});null!=n;){if(n._uniqueIdentifier===e)return n;if(n._namespace===i.namespace.HTML)for(var s=0;s<n._attributeList.length;s++){var l=n._attributeList[s];if("name"===l._localName&&null===l._namespace&&null===l._namespacePrefix&&l._value===e)return n}n=o.tree_getNextDescendantNode(this._root,n,!1,!1,function(e){return a.Guard.isElementNode(e)&&t._filter(e)})}return null},e.prototype[Symbol.iterator]=function(){var e=this._root,t=this._filter,n=o.tree_getFirstDescendantNode(e,!1,!1,function(e){return a.Guard.isElementNode(e)&&t(e)});return{next:function(){if(null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=o.tree_getNextDescendantNode(e,n,!1,!1,function(e){return a.Guard.isElementNode(e)&&t(e)}),i}}},e.prototype.get=function(t,n,i){if(!s.isString(n)||-1!==e.reservedNames.indexOf(n))return Reflect.get(t,n,i);var o=Number(n);return isNaN(o)?t.namedItem(n)||void 0:t.item(o)||void 0},e.prototype.set=function(t,n,i,a){if(!s.isString(n)||-1!==e.reservedNames.indexOf(n))return Reflect.set(t,n,i,a);var l=Number(n),u=isNaN(l)?t.namedItem(n)||void 0:t.item(l)||void 0;return!(!u||!u._parent||(o.mutation_replace(u,i,u._parent),0))},e._create=function(t,n){return void 0===n&&(n=function(){return!0}),new e(t,n)},e.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],e}()},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(1),s=n(0);t.NodeListImpl=function(){function e(e){return this._live=!0,this._filter=null,this._length=0,this._root=e,new Proxy(this,this)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),e.prototype.item=function(e){if(e<0||e>this.length-1)return null;if(e<this.length/2){for(var t=0,n=this._root._firstChild;null!==n&&t!==e;)n=n._nextSibling,t++;return n}for(t=this.length-1,n=this._root._lastChild;null!==n&&t!==e;)n=n._previousSibling,t--;return n},e.prototype.keys=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=0;return{next:(function(){return e===this.length?{done:!0,value:null}:{done:!1,value:e++}}).bind(this)}}).bind(this),e},e.prototype.values=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=this[Symbol.iterator]();return{next:function(){return e.next()}}}).bind(this),e},e.prototype.entries=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=this[Symbol.iterator](),t=0;return{next:function(){var n=e.next();return n.done?{done:!0,value:null}:{done:!1,value:[t++,n.value]}}}}).bind(this),e},e.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},e.prototype.forEach=function(e,t){void 0===t&&(t=o.dom.window);var n,a,s=0;try{for(var l=i(this._root._children),u=l.next();!u.done;u=l.next()){var c=u.value;e.call(t,c,s++,this)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}},e.prototype.get=function(e,t,n){if(!a.isString(t))return Reflect.get(e,t,n);var i=Number(t);return isNaN(i)?Reflect.get(e,t,n):e.item(i)||void 0},e.prototype.set=function(e,t,n,i){if(!a.isString(t))return Reflect.set(e,t,n,i);var o=Number(t);if(isNaN(o))return Reflect.set(e,t,n,i);var l=e.item(o)||void 0;return!!l&&!!l._parent&&(s.mutation_replace(l,n,l._parent),!0)},e._create=function(t){return new e(t)},e}()},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(1);t.NodeListStaticImpl=function(){function e(e){return this._live=!1,this._items=[],this._length=0,this._root=e,this._items=[],this._filter=function(e){return!0},new Proxy(this,this)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),e.prototype.item=function(e){return e<0||e>this.length-1?null:this._items[e]},e.prototype.keys=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=0;return{next:(function(){return e===this.length?{done:!0,value:null}:{done:!1,value:e++}}).bind(this)}}).bind(this),e},e.prototype.values=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=this[Symbol.iterator]();return{next:function(){return e.next()}}}).bind(this),e},e.prototype.entries=function(){var e;return(e={})[Symbol.iterator]=(function(){var e=this[Symbol.iterator](),t=0;return{next:function(){var n=e.next();return n.done?{done:!0,value:null}:{done:!1,value:[t++,n.value]}}}}).bind(this),e},e.prototype[Symbol.iterator]=function(){var e=this._items[Symbol.iterator]();return{next:function(){return e.next()}}},e.prototype.forEach=function(e,t){void 0===t&&(t=o.dom.window);var n,a,s=0;try{for(var l=i(this._items),u=l.next();!u.done;u=l.next()){var c=u.value;e.call(t,c,s++,this)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}},e.prototype.get=function(e,t,n){if(!a.isString(t))return Reflect.get(e,t,n);var i=Number(t);return isNaN(i)?Reflect.get(e,t,n):e._items[i]||void 0},e.prototype.set=function(e,t,n,i){if(!a.isString(t))return Reflect.set(e,t,n,i);var o=Number(t);return isNaN(o)?Reflect.set(e,t,n,i):o>=0&&o<e._items.length&&(e._items[o]=n,!0)},e._create=function(t,n){var i=new e(t);return i._items=n,i},e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),s=n(0);t.NamedNodeMapImpl=function(e){function t(n){var i=e.call(this)||this;return i._element=n,Object.setPrototypeOf(i,t.prototype),i}return o(t,e),t.prototype._asArray=function(){return this},t.prototype.item=function(e){return this[e]||null},t.prototype.getNamedItem=function(e){return s.element_getAnAttributeByName(e,this._element)},t.prototype.getNamedItemNS=function(e,t){return s.element_getAnAttributeByNamespaceAndLocalName(e||"",t,this._element)},t.prototype.setNamedItem=function(e){return s.element_setAnAttribute(e,this._element)},t.prototype.setNamedItemNS=function(e){return s.element_setAnAttribute(e,this._element)},t.prototype.removeNamedItem=function(e){var t=s.element_removeAnAttributeByName(e,this._element);if(null===t)throw new a.NotFoundError;return t},t.prototype.removeNamedItemNS=function(e,t){var n=s.element_removeAnAttributeByNamespaceAndLocalName(e||"",t,this._element);if(null===n)throw new a.NotFoundError;return n},t._create=function(e){return new t(e)},t}(Array)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(2),u=n(102),c=n(9),d=n(0),f=n(12),p=n(3),h=function(e){function t(){var t=e.call(this)||this,n=s.dom.window._associatedDocument;return t._start=[n,0],t._end=[n,0],s.dom.rangeList.add(t),t}return o(t,e),Object.defineProperty(t.prototype,"commonAncestorContainer",{get:function(){for(var e=this._start[0];!d.tree_isAncestorOf(this._end[0],e,!0);){if(null===e._parent)throw Error("Parent node  is null.");e=e._parent}return e},enumerable:!0,configurable:!0}),t.prototype.setStart=function(e,t){d.range_setTheStart(this,e,t)},t.prototype.setEnd=function(e,t){d.range_setTheEnd(this,e,t)},t.prototype.setStartBefore=function(e){var t=e._parent;if(null===t)throw new c.InvalidNodeTypeError;d.range_setTheStart(this,t,d.tree_index(e))},t.prototype.setStartAfter=function(e){var t=e._parent;if(null===t)throw new c.InvalidNodeTypeError;d.range_setTheStart(this,t,d.tree_index(e)+1)},t.prototype.setEndBefore=function(e){var t=e._parent;if(null===t)throw new c.InvalidNodeTypeError;d.range_setTheEnd(this,t,d.tree_index(e))},t.prototype.setEndAfter=function(e){var t=e._parent;if(null===t)throw new c.InvalidNodeTypeError;d.range_setTheEnd(this,t,d.tree_index(e)+1)},t.prototype.collapse=function(e){e?this._end=this._start:this._start=this._end},t.prototype.selectNode=function(e){d.range_select(e,this)},t.prototype.selectNodeContents=function(e){if(p.Guard.isDocumentTypeNode(e))throw new c.InvalidNodeTypeError;var t=d.tree_nodeLength(e);this._start=[e,0],this._end=[e,t]},t.prototype.compareBoundaryPoints=function(e,t){if(e!==l.HowToCompare.StartToStart&&e!==l.HowToCompare.StartToEnd&&e!==l.HowToCompare.EndToEnd&&e!==l.HowToCompare.EndToStart)throw new c.NotSupportedError;if(d.range_root(this)!==d.range_root(t))throw new c.WrongDocumentError;switch(e){case l.HowToCompare.StartToStart:n=this._start,i=t._start;break;case l.HowToCompare.StartToEnd:n=this._end,i=t._start;break;case l.HowToCompare.EndToEnd:n=this._end,i=t._end;break;case l.HowToCompare.EndToStart:n=this._start,i=t._end;break;default:throw new c.NotSupportedError}var n,i,o=d.boundaryPoint_position(n,i);return o===l.BoundaryPosition.Before?-1:+(o===l.BoundaryPosition.After)},t.prototype.deleteContents=function(){var e,t,n,i;if(!d.range_collapsed(this)){var o=this._startNode,s=this._startOffset,l=this._endNode,u=this._endOffset;if(o===l&&p.Guard.isCharacterDataNode(o))d.characterData_replaceData(o,s,u-s,"");else{var c,f,h=[];try{for(var m=a(d.range_getContainedNodes(this)),g=m.next();!g.done;g=m.next()){var v=(b=g.value)._parent;null!==v&&d.range_isContained(v,this)||h.push(b)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}if(d.tree_isAncestorOf(l,o,!0))c=o,f=s;else{for(var y=o;null!==y._parent&&!d.tree_isAncestorOf(l,y._parent,!0);)y=y._parent;if(null===y._parent)throw Error("Parent node is null.");c=y._parent,f=d.tree_index(y)+1}p.Guard.isCharacterDataNode(o)&&d.characterData_replaceData(o,s,d.tree_nodeLength(o)-s,"");try{for(var b,x=a(h),w=x.next();!w.done;w=x.next())(b=w.value)._parent&&d.mutation_remove(b,b._parent)}catch(e){n={error:e}}finally{try{w&&!w.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}p.Guard.isCharacterDataNode(l)&&d.characterData_replaceData(l,0,u,""),this._start=[c,f],this._end=[c,f]}}},t.prototype.extractContents=function(){return d.range_extract(this)},t.prototype.cloneContents=function(){return d.range_cloneTheContents(this)},t.prototype.insertNode=function(e){return d.range_insert(e,this)},t.prototype.surroundContents=function(e){try{for(var t,n,i=a(d.range_getPartiallyContainedNodes(this)),o=i.next();!o.done;o=i.next()){var s=o.value;if(!p.Guard.isTextNode(s))throw new c.InvalidStateError}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}if(p.Guard.isDocumentNode(e)||p.Guard.isDocumentTypeNode(e)||p.Guard.isDocumentFragmentNode(e))throw new c.InvalidNodeTypeError;var l=d.range_extract(this);0!==e._children.size&&d.mutation_replaceAll(null,e),d.range_insert(e,this),d.mutation_append(l,e),d.range_select(e,this)},t.prototype.cloneRange=function(){return d.create_range(this._start,this._end)},t.prototype.detach=function(){s.dom.rangeList.delete(this)},t.prototype.isPointInRange=function(e,t){if(d.tree_rootNode(e)!==d.range_root(this))return!1;if(p.Guard.isDocumentTypeNode(e))throw new c.InvalidNodeTypeError;if(t>d.tree_nodeLength(e))throw new c.IndexSizeError;var n=[e,t];return d.boundaryPoint_position(n,this._start)!==l.BoundaryPosition.Before&&d.boundaryPoint_position(n,this._end)!==l.BoundaryPosition.After},t.prototype.comparePoint=function(e,t){if(d.tree_rootNode(e)!==d.range_root(this))throw new c.WrongDocumentError;if(p.Guard.isDocumentTypeNode(e))throw new c.InvalidNodeTypeError;if(t>d.tree_nodeLength(e))throw new c.IndexSizeError;var n=[e,t];return d.boundaryPoint_position(n,this._start)===l.BoundaryPosition.Before?-1:+(d.boundaryPoint_position(n,this._end)===l.BoundaryPosition.After)},t.prototype.intersectsNode=function(e){if(d.tree_rootNode(e)!==d.range_root(this))return!1;var t=e._parent;if(null===t)return!0;var n=d.tree_index(e);return d.boundaryPoint_position([t,n],this._end)===l.BoundaryPosition.Before&&d.boundaryPoint_position([t,n+1],this._start)===l.BoundaryPosition.After},t.prototype.toString=function(){var e,t,n="";if(this._startNode===this._endNode&&p.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);p.Guard.isTextNode(this._startNode)&&(n+=this._startNode._data.substring(this._startOffset));try{for(var i=a(d.range_getContainedNodes(this)),o=i.next();!o.done;o=i.next()){var s=o.value;p.Guard.isTextNode(s)&&(n+=s._data)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return p.Guard.isTextNode(this._endNode)&&(n+=this._endNode._data.substring(0,this._endOffset)),n},t._create=function(e,n){var i=new t;return e&&(i._start=e),n&&(i._end=n),i},t.START_TO_START=0,t.START_TO_END=1,t.END_TO_END=2,t.END_TO_START=3,t}(u.AbstractRangeImpl);t.RangeImpl=h,f.idl_defineConst(h.prototype,"START_TO_START",0),f.idl_defineConst(h.prototype,"START_TO_END",1),f.idl_defineConst(h.prototype,"END_TO_END",2),f.idl_defineConst(h.prototype,"END_TO_START",3)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(103),s=n(0);t.NodeIteratorImpl=function(e){function t(t,n,i){var o=e.call(this,t)||this;return o._iteratorCollection=void 0,o._reference=n,o._pointerBeforeReference=i,s.nodeIterator_iteratorList().add(o),o}return o(t,e),Object.defineProperty(t.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),t.prototype.nextNode=function(){return s.nodeIterator_traverse(this,!0)},t.prototype.previousNode=function(){return s.nodeIterator_traverse(this,!1)},t.prototype.detach=function(){s.nodeIterator_iteratorList().delete(this)},t._create=function(e,n,i){return new t(e,n,i)},t}(a.TraverserImpl)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(103),l=n(0);t.TreeWalkerImpl=function(e){function t(t,n){var i=e.call(this,t)||this;return i._current=n,i}return o(t,e),Object.defineProperty(t.prototype,"currentNode",{get:function(){return this._current},set:function(e){this._current=e},enumerable:!0,configurable:!0}),t.prototype.parentNode=function(){for(var e=this._current;null!==e&&e!==this._root;)if(null!==(e=e._parent)&&l.traversal_filter(this,e)===a.FilterResult.Accept)return this._current=e,e;return null},t.prototype.firstChild=function(){return l.treeWalker_traverseChildren(this,!0)},t.prototype.lastChild=function(){return l.treeWalker_traverseChildren(this,!1)},t.prototype.nextSibling=function(){return l.treeWalker_traverseSiblings(this,!0)},t.prototype.previousNode=function(){for(var e=this._current;e!==this._root;){for(var t=e._previousSibling;t;){e=t;for(var n=l.traversal_filter(this,e);n!==a.FilterResult.Reject&&e._lastChild;)e=e._lastChild,n=l.traversal_filter(this,e);if(n===a.FilterResult.Accept)return this._current=e,e;t=e._previousSibling}if(e===this._root||null===e._parent)break;if(e=e._parent,l.traversal_filter(this,e)===a.FilterResult.Accept)return this._current=e,e}return null},t.prototype.previousSibling=function(){return l.treeWalker_traverseSiblings(this,!1)},t.prototype.nextNode=function(){for(var e=this._current,t=a.FilterResult.Accept;;){for(;t!==a.FilterResult.Reject&&e._firstChild;)if(e=e._firstChild,(t=l.traversal_filter(this,e))===a.FilterResult.Accept)return this._current=e,e;for(var n=null,i=e;null!==i;){if(i===this._root)return null;if(null!==(n=i._nextSibling)){e=n;break}i=i._parent}if((t=l.traversal_filter(this,e))===a.FilterResult.Accept)return this._current=e,e}},t._create=function(e,n){return new t(e,n)},t}(s.TraverserImpl)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(12),a=function(){function e(){}return e.prototype.acceptNode=function(e){return i.FilterResult.Accept},e._create=function(){return new e},e.FILTER_ACCEPT=1,e.FILTER_REJECT=2,e.FILTER_SKIP=3,e.SHOW_ALL=0xffffffff,e.SHOW_ELEMENT=1,e.SHOW_ATTRIBUTE=2,e.SHOW_TEXT=4,e.SHOW_CDATA_SECTION=8,e.SHOW_ENTITY_REFERENCE=16,e.SHOW_ENTITY=32,e.SHOW_PROCESSING_INSTRUCTION=64,e.SHOW_COMMENT=128,e.SHOW_DOCUMENT=256,e.SHOW_DOCUMENT_TYPE=512,e.SHOW_DOCUMENT_FRAGMENT=1024,e.SHOW_NOTATION=2048,e}();t.NodeFilterImpl=a,o.idl_defineConst(a.prototype,"FILTER_ACCEPT",1),o.idl_defineConst(a.prototype,"FILTER_REJECT",2),o.idl_defineConst(a.prototype,"FILTER_SKIP",3),o.idl_defineConst(a.prototype,"SHOW_ALL",0xffffffff),o.idl_defineConst(a.prototype,"SHOW_ELEMENT",1),o.idl_defineConst(a.prototype,"SHOW_ATTRIBUTE",2),o.idl_defineConst(a.prototype,"SHOW_TEXT",4),o.idl_defineConst(a.prototype,"SHOW_CDATA_SECTION",8),o.idl_defineConst(a.prototype,"SHOW_ENTITY_REFERENCE",16),o.idl_defineConst(a.prototype,"SHOW_ENTITY",32),o.idl_defineConst(a.prototype,"SHOW_PROCESSING_INSTRUCTION",64),o.idl_defineConst(a.prototype,"SHOW_COMMENT",128),o.idl_defineConst(a.prototype,"SHOW_DOCUMENT",256),o.idl_defineConst(a.prototype,"SHOW_DOCUMENT_TYPE",512),o.idl_defineConst(a.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),o.idl_defineConst(a.prototype,"SHOW_NOTATION",2048)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutationRecordImpl=function(){function e(e,t,n,i,o,a,s,l,u){this._type=e,this._target=t,this._addedNodes=n,this._removedNodes=i,this._previousSibling=o,this._nextSibling=a,this._attributeName=s,this._attributeNamespace=l,this._oldValue=u}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),e._create=function(t,n,i,o,a,s,l,u,c){return new e(t,n,i,o,a,s,l,u,c)},e}()},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(9),s=n(7),l=n(0);t.DOMTokenListImpl=function(){function e(e,t){this._element=e,this._attribute=t,this._tokenSet=new Set;var n=t._localName,i=l.element_getAnAttributeValue(e,n),a=this;this._element._attributeChangeSteps.push(function(e,t,n,i,o){t===a._attribute._localName&&null===o&&(i?a._tokenSet=l.orderedSet_parse(i):a._tokenSet.clear())}),o.dom.features.steps&&l.dom_runAttributeChangeSteps(e,n,i,i,null)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),e.prototype.item=function(e){var t,n,o=0;try{for(var a=i(this._tokenSet),s=a.next();!s.done;s=a.next()){var l=s.value;if(o===e)return l;o++}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return null},e.prototype.contains=function(e){return this._tokenSet.has(e)},e.prototype.add=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var u=i(n),c=u.next();!c.done;c=u.next()){var d=c.value;if(""===d)throw new a.SyntaxError("Cannot add an empty token.");if(s.codePoint.ASCIIWhiteSpace.test(d))throw new a.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(d)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}l.tokenList_updateSteps(this)},e.prototype.remove=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var u=i(n),c=u.next();!c.done;c=u.next()){var d=c.value;if(""===d)throw new a.SyntaxError("Cannot remove an empty token.");if(s.codePoint.ASCIIWhiteSpace.test(d))throw new a.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(d)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}l.tokenList_updateSteps(this)},e.prototype.toggle=function(e,t){if(void 0===t&&(t=void 0),""===e)throw new a.SyntaxError("Cannot toggle an empty token.");if(s.codePoint.ASCIIWhiteSpace.test(e))throw new a.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(e)?void 0!==t&&!1!==t||(this._tokenSet.delete(e),l.tokenList_updateSteps(this),!1):(void 0===t||!0===t)&&(this._tokenSet.add(e),l.tokenList_updateSteps(this),!0)},e.prototype.replace=function(e,t){if(""===e||""===t)throw new a.SyntaxError("Cannot replace an empty token.");if(s.codePoint.ASCIIWhiteSpace.test(e)||s.codePoint.ASCIIWhiteSpace.test(t))throw new a.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(e)&&(s.set.replace(this._tokenSet,e,t),l.tokenList_updateSteps(this),!0)},e.prototype.supports=function(e){return l.tokenList_validationSteps(this,e)},Object.defineProperty(e.prototype,"value",{get:function(){return l.tokenList_serializeSteps(this)},set:function(e){l.element_setAnAttributeValue(this._element,this._attribute._localName,e)},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){var e=this._tokenSet[Symbol.iterator]();return{next:function(){return e.next()}}},e._create=function(t,n){return new e(t,n)},e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(104),s=n(0);t.CustomEventImpl=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._detail=null,i._detail=n&&n.detail||null,i}return o(t,e),Object.defineProperty(t.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),t.prototype.initCustomEvent=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=null),this._dispatchFlag||(s.event_initialize(this,e,t,n),this._detail=i)},t}(a.EventImpl)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(2),a=n(105),s=n(17);t.nodeIterator_traverse=function(e,t){for(var n=e._reference,i=e._pointerBeforeReference;;){if(t)if(i)i=!1;else{var l=s.tree_getFollowingNode(e._root,n);if(!l)return null;n=l}else if(i){var u=s.tree_getPrecedingNode(e.root,n);if(!u)return null;n=u}else i=!0;if(a.traversal_filter(e,n)===o.FilterResult.Accept)break}return e._reference=n,e._pointerBeforeReference=i,n},t.nodeIterator_iteratorList=function(){return i.dom.window._iteratorList}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(7),a=n(174);function s(e){if(!a.xml_isName(e))throw new i.InvalidCharacterError("Invalid XML name: "+e);if(!a.xml_isQName(e))throw new i.InvalidCharacterError("Invalid XML qualified name: "+e+".")}t.namespace_validate=s,t.namespace_validateAndExtract=function(e,t){e||(e=null),s(t);var n=t.split(":"),a=2===n.length?n[0]:null,l=2===n.length?n[1]:t;if(a&&null===e)throw new i.NamespaceError("Qualified name includes a prefix but the namespace is null.");if("xml"===a&&e!==o.namespace.XML)throw new i.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(e!==o.namespace.XMLNS&&("xmlns"===a||"xmlns"===t))throw new i.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(e===o.namespace.XMLNS&&"xmlns"!==a&&"xmlns"!==t)throw new i.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[e,a,l]},t.namespace_extractQName=function(e){s(e);var t=e.split(":");return[2===t.length?t[0]:null,2===t.length?t[1]:e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xml_isName=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!(n>=97&&n<=122||n>=65&&n<=90||58===n||95===n||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||0!==t&&(45===n||46===n||n>=48&&n<=57||183===n||n>=768&&n<=879||n>=8255&&n<=8256))){if(n>=55296&&n<=56319&&t<e.length-1){var i=e.charCodeAt(t+1);if(i>=56320&&i<=57343&&(t++,(n=1024*(n-55296)+i-56320+65536)>=65536&&n<=983039))continue}return!1}}return!0},t.xml_isQName=function(e){for(var t=!1,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(!(i>=97&&i<=122||i>=65&&i<=90||95===i||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||0!==n&&(45===i||46===i||i>=48&&i<=57||183===i||i>=768&&i<=879||i>=8255&&i<=8256))){if(0===n||58!==i){if(i>=55296&&i<=56319&&n<e.length-1){var o=e.charCodeAt(n+1);if(o>=56320&&o<=57343&&(n++,(i=1024*(i-55296)+o-56320+65536)>=65536&&i<=983039))continue}return!1}if(t||n===e.length-1)return!1;t=!0}}return!0},t.xml_isLegalChar=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!(9===n||10===n||13===n||n>=32&&n<=55295||n>=57344&&n<=65533)){if(n>=55296&&n<=56319&&t<e.length-1){var i=e.charCodeAt(t+1);if(i>=56320&&i<=57343&&(t++,(n=1024*(n-55296)+i-56320+65536)>=65536&&n<=1114111))continue}return!1}}return!0},t.xml_isPubidChar=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!(n>=97&&n<=122||n>=65&&n<=90||n>=39&&n<=59||32===n||13===n||10===n||n>=35&&n<=37||33===n||61===n||63===n||64===n||95===n))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(17);t.boundaryPoint_position=function e(t,n){var a=t[0],s=t[1],l=n[0],u=n[1];if(console.assert(o.tree_rootNode(a)===o.tree_rootNode(l),"Boundary points must share the same root node."),a===l)return s===u?i.BoundaryPosition.Equal:s<u?i.BoundaryPosition.Before:i.BoundaryPosition.After;if(o.tree_isFollowing(l,a)){var c=e([l,u],[a,s]);if(c===i.BoundaryPosition.Before)return i.BoundaryPosition.After;if(c===i.BoundaryPosition.After)return i.BoundaryPosition.Before}if(o.tree_isAncestorOf(l,a)){for(var d=l;!o.tree_isChildOf(a,d);)null!==d._parent&&(d=d._parent);if(o.tree_index(d)<s)return i.BoundaryPosition.After}return i.BoundaryPosition.Before}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(3),s=n(7),l=n(29),u=n(108),c=n(30),d=n(37),f=n(52);t.node_stringReplaceAll=function(e,t){var n=null;""!==e&&(n=l.create_text(t._nodeDocument,e)),d.mutation_replaceAll(n,t)},t.node_clone=function e(t,n,s){var u,p,h,m,g;if(void 0===n&&(n=null),void 0===s&&(s=!1),null===n&&(n=t._nodeDocument),a.Guard.isElementNode(t)){g=f.element_createAnElement(n,t._localName,t._namespace,t._namespacePrefix,t._is,!1);try{for(var v=i(t._attributeList),y=v.next();!y.done;y=v.next()){var b=e(y.value,n);f.element_append(b,g)}}catch(e){u={error:e}}finally{try{y&&!y.done&&(p=v.return)&&p.call(v)}finally{if(u)throw u.error}}}else if(a.Guard.isDocumentNode(t)){var x=l.create_document();x._encoding=t._encoding,x._contentType=t._contentType,x._URL=t._URL,x._origin=t._origin,x._type=t._type,x._mode=t._mode,g=x}else if(a.Guard.isDocumentTypeNode(t))g=l.create_documentType(n,t._name,t._publicId,t._systemId);else if(a.Guard.isAttrNode(t)){var w=l.create_attr(n,t.localName);w._namespace=t._namespace,w._namespacePrefix=t._namespacePrefix,w._value=t._value,g=w}else g=a.Guard.isExclusiveTextNode(t)?l.create_text(n,t._data):a.Guard.isCDATASectionNode(t)?l.create_cdataSection(n,t._data):a.Guard.isCommentNode(t)?l.create_comment(n,t._data):a.Guard.isProcessingInstructionNode(t)?l.create_processingInstruction(n,t._target,t._data):a.Guard.isDocumentFragmentNode(t)?l.create_documentFragment(n):Object.create(t);if(a.Guard.isDocumentNode(g)?(g._nodeDocument=g,n=g):g._nodeDocument=n,o.dom.features.steps&&c.dom_runCloningSteps(g,t,n,s),s)try{for(var A=i(t._children),C=A.next();!C.done;C=A.next()){var S=e(C.value,n,!0);d.mutation_append(S,g)}}catch(e){h={error:e}}finally{try{C&&!C.done&&(m=A.return)&&m.call(A)}finally{if(h)throw h.error}}return g},t.node_equals=function e(t,n){var o,s,l,u;if(t._nodeType!==n._nodeType)return!1;if(a.Guard.isDocumentTypeNode(t)&&a.Guard.isDocumentTypeNode(n)){if(t._name!==n._name||t._publicId!==n._publicId||t._systemId!==n._systemId)return!1}else if(a.Guard.isElementNode(t)&&a.Guard.isElementNode(n)){if(t._namespace!==n._namespace||t._namespacePrefix!==n._namespacePrefix||t._localName!==n._localName||t._attributeList.length!==n._attributeList.length)return!1}else if(a.Guard.isAttrNode(t)&&a.Guard.isAttrNode(n)){if(t._namespace!==n._namespace||t._localName!==n._localName||t._value!==n._value)return!1}else if(a.Guard.isProcessingInstructionNode(t)&&a.Guard.isProcessingInstructionNode(n)){if(t._target!==n._target||t._data!==n._data)return!1}else if(a.Guard.isCharacterDataNode(t)&&a.Guard.isCharacterDataNode(n)&&t._data!==n._data)return!1;if(a.Guard.isElementNode(t)&&a.Guard.isElementNode(n)){var c={};try{for(var d=i(t._attributeList),f=d.next();!f.done;f=d.next())c[(m=f.value)._localName]=m}catch(e){o={error:e}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}try{for(var p=i(n._attributeList),h=p.next();!h.done;h=p.next()){var m,g=h.value;if(!(m=c[g._localName])||!e(m,g))return!1}}catch(e){l={error:e}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}}if(t._children.size!==n._children.size)return!1;for(var v=t._children[Symbol.iterator](),y=n._children[Symbol.iterator](),b=v.next(),x=y.next();!b.done&&!x.done;){if(!e(b.value,x.value))return!1;b=v.next(),x=y.next()}return!0},t.node_listOfElementsWithQualifiedName=function(e,t){return"*"===e?l.create_htmlCollection(t):"html"===t._nodeDocument._type?l.create_htmlCollection(t,function(t){return t._namespace===s.namespace.HTML&&t._qualifiedName===e.toLowerCase()||t._namespace!==s.namespace.HTML&&t._qualifiedName===e}):l.create_htmlCollection(t,function(t){return t._qualifiedName===e})},t.node_listOfElementsWithNamespace=function(e,t,n){return""===e&&(e=null),"*"===e&&"*"===t?l.create_htmlCollection(n):"*"===e?l.create_htmlCollection(n,function(e){return e._localName===t}):"*"===t?l.create_htmlCollection(n,function(t){return t._namespace===e}):l.create_htmlCollection(n,function(n){return n._localName===t&&n._namespace===e})},t.node_listOfElementsWithClassNames=function(e,t){var n=u.orderedSet_parse(e);if(0===n.size)return l.create_htmlCollection(t,function(){return!1});var i="quirks"!==t._nodeDocument._mode;return l.create_htmlCollection(t,function(e){var t=e.classList;return u.orderedSet_contains(t._tokenSet,n,i)})},t.node_locateANamespacePrefix=function e(t,n){if(t._namespace===n&&null!==t._namespacePrefix)return t._namespacePrefix;for(var i=0;i<t._attributeList.length;i++){var o=t._attributeList[i];if("xmlns"===o._namespacePrefix&&o._value===n)return o._localName}return t._parent&&a.Guard.isElementNode(t._parent)?e(t._parent,n):null},t.node_locateANamespace=function e(t,n){if(a.Guard.isElementNode(t)){if(null!==t._namespace&&t._namespacePrefix===n)return t._namespace;for(var i=0;i<t._attributeList.length;i++){var o=t._attributeList[i];if(o._namespace===s.namespace.XMLNS&&"xmlns"===o._namespacePrefix&&o._localName===n||null===n&&o._namespace===s.namespace.XMLNS&&null===o._namespacePrefix&&"xmlns"===o._localName)return o._value||null}return null===t.parentElement?null:e(t.parentElement,n)}return a.Guard.isDocumentNode(t)?null===t.documentElement?null:e(t.documentElement,n):a.Guard.isDocumentTypeNode(t)||a.Guard.isDocumentFragmentNode(t)?null:a.Guard.isAttrNode(t)?null===t._element?null:e(t._element,n):t._parent&&a.Guard.isElementNode(t._parent)?e(t._parent,n):null}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(3),s=n(9),l=n(29),u=n(17),c=n(107),d=n(37);t.text_contiguousTextNodes=function(e,t){var n;return void 0===t&&(t=!1),(n={})[Symbol.iterator]=function(){for(var n=e;n&&a.Guard.isTextNode(n._previousSibling);)n=n._previousSibling;return{next:function(){if(n&&!t&&n===e&&(n=a.Guard.isTextNode(n._nextSibling)?n._nextSibling:null),null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=a.Guard.isTextNode(n._nextSibling)?n._nextSibling:null,i}}},n},t.text_contiguousExclusiveTextNodes=function(e,t){var n;return void 0===t&&(t=!1),(n={})[Symbol.iterator]=function(){for(var n=e;n&&a.Guard.isExclusiveTextNode(n._previousSibling);)n=n._previousSibling;return{next:function(){if(n&&!t&&n===e&&(n=a.Guard.isExclusiveTextNode(n._nextSibling)?n._nextSibling:null),null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=a.Guard.isExclusiveTextNode(n._nextSibling)?n._nextSibling:null,i}}},n},t.text_descendantTextContent=function(e){for(var t="",n=u.tree_getFirstDescendantNode(e,!1,!1,function(e){return a.Guard.isTextNode(e)});null!==n;)t+=n._data,n=u.tree_getNextDescendantNode(e,n,!1,!1,function(e){return a.Guard.isTextNode(e)});return t},t.text_split=function(e,t){var n,a,f=e._data.length;if(t>f)throw new s.IndexSizeError;var p=f-t,h=c.characterData_substringData(e,t,p),m=l.create_text(e._nodeDocument,h),g=e._parent;if(null!==g){d.mutation_insert(m,g,e._nextSibling);try{for(var v=i(o.dom.rangeList),y=v.next();!y.done;y=v.next()){var b=y.value;b._start[0]===e&&b._start[1]>t&&(b._start[0]=m,b._start[1]-=t),b._end[0]===e&&b._end[1]>t&&(b._end[0]=m,b._end[1]-=t);var x=u.tree_index(e);b._start[0]===g&&b._start[1]===x+1&&b._start[1]++,b._end[0]===g&&b._end[1]===x+1&&b._end[1]++}}catch(e){n={error:e}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(n)throw n.error}}}return c.characterData_replaceData(e,t,p,""),m}},function(e,t,n){"use strict";var i=n(4),o=n(41),a=n(24),s=n(48),l=[].join,u=o!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:u||!c},{join:function(e){return l.call(a(this),void 0===e?",":e)}})},function(e,t,n){var i=n(4),o=n(83),a=String.fromCharCode,s=String.fromCodePoint;i({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(111);t.XMLStringLexer=function(){function e(e,t){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=e,this._index=0,this._length=e.length,t&&(this._options.skipWhitespaceOnlyText=t.skipWhitespaceOnlyText||!1)}return e.prototype.nextToken=function(){if(this.eof())return{type:o.TokenType.EOF};var t=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&t.type===o.TokenType.Text&&e.isWhiteSpaceToken(t)&&(t=this.nextToken()),t},e.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?e.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},e.prototype.declaration=function(){for(var e="",t="",n="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.Declaration,version:e,encoding:t,standalone:n};var a=i(this.attribute(),2),s=a[0],l=a[1];"version"===s?e=l:"encoding"===s?t=l:"standalone"===s?n=l:this.throwError("Invalid attribute name: "+s)}this.throwError("Missing declaration end symbol `?>`")},e.prototype.doctype=function(){var e="",t="";this.skipSpace();var n=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(e=this.quotedString(),t=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(t=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:o.TokenType.DocType,name:n,pubId:e,sysId:t}},e.prototype.pi=function(){var e=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.PI,target:e,data:""};var t=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:o.TokenType.PI,target:e,data:t}},e.prototype.text=function(){var e=this.takeUntil("<");return{type:o.TokenType.Text,data:e}},e.prototype.comment=function(){var e=this.takeUntilStartsWith("--\x3e");return this.eof()&&this.throwError("Missing comment end symbol `--\x3e`"),this.seek(3),{type:o.TokenType.Comment,data:e}},e.prototype.cdata=function(){var e=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:o.TokenType.CDATA,data:e}},e.prototype.openTag=function(){this.skipSpace();var e=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:e,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:e,attributes:[],selfClosing:!0};for(var t=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:e,attributes:t,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:e,attributes:t,selfClosing:!0};var n=this.attribute();t.push(n)}this.throwError("Missing opening element tag end symbol `>`")},e.prototype.closeTag=function(){this.skipSpace();var e=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:o.TokenType.ClosingTag,name:e}},e.prototype.attribute=function(){this.skipSpace();var e=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[e,this.quotedString()]},e.prototype.quotedString=function(){this.skipSpace();var t=this.take(1);e.isQuote(t)||this.throwError("Missing start quote character before quoted value");var n=this.takeUntil(t);return this.skipIfStartsWith(t)||this.throwError("Missing end quote character after quoted value"),n},e.prototype.eof=function(){return this._index>=this._length},e.prototype.skipIfStartsWith=function(e){var t=e.length;if(1===t)return this._str[this._index]===e&&(this._index++,!0);for(var n=0;n<t;n++)if(this._str[this._index+n]!==e[n])return!1;return this._index+=t,!0},e.prototype.seek=function(e){this._index+=e,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},e.prototype.skipSpace=function(){for(;!this.eof()&&e.isSpace(this._str[this._index]);)this._index++},e.prototype.take=function(e){if(1===e)return this._str[this._index++];var t=this._index;return this.seek(e),this._str.slice(t,this._index)},e.prototype.takeUntil=function(t,n){void 0===n&&(n=!1);for(var i=this._index;this._index<this._length;){var o=this._str[this._index];if(o===t||n&&e.isSpace(o))break;this._index++}return this._str.slice(i,this._index)},e.prototype.takeUntil2=function(t,n,i){void 0===i&&(i=!1);for(var o=this._index;this._index<this._length;){var a=this._str[this._index];if(a===t||a===n||i&&e.isSpace(a))break;this._index++}return this._str.slice(o,this._index)},e.prototype.takeUntilStartsWith=function(t,n){void 0===n&&(n=!1);for(var i=this._index,o=t.length;this._index<this._length;){for(var a=!0,s=0;s<o;s++){var l=this._str[this._index+s],u=t[s];if(n&&e.isSpace(l))return this._str.slice(i,this._index);if(l!==u){this._index++,a=!1;break}}if(a)return this._str.slice(i,this._index)}return this._index=this._length,this._str.slice(i)},e.prototype.skipUntil=function(e){for(;this._index<this._length&&this._str[this._index]!==e;)this._index++},e.isWhiteSpaceToken=function(e){for(var t=e.data,n=0;n<t.length;n++){var i=t[n];if(" "!==i&&"\n"!==i&&"\r"!==i&&"	"!==i&&"\f"!==i)return!1}return!0},e.isSpace=function(e){return" "===e||"\n"===e||"\r"===e||"	"===e},e.isQuote=function(e){return'"'===e||"'"===e},e.prototype.throwError=function(e){for(var t=/\r\n|\r|\n/g,n=null,i=0,o=0,a=this._str.length;null!==(n=t.exec(this._str))&&null!==n;)if(i++,n.index<this._index&&(o=t.lastIndex),n.index>this._index){a=n.index;break}throw this.err={line:i,col:this._index-o,index:this._index,str:this._str.substring(o,a)},Error(e+"\nIndex: "+this.err.index+"\nLn: "+this.err.line+", Col: "+this.err.col+"\nInput: "+this.err.str)},e.prototype[Symbol.iterator]=function(){return this._index=0,{next:(function(){var e=this.nextToken();return e.type===o.TokenType.EOF?{done:!0,value:null}:{done:!1,value:e}}).bind(this)}},e}()},function(e,t,n){"use strict";e.exports=new(n(39))({include:[n(182)]})},function(e,t,n){"use strict";e.exports=new(n(39))({include:[n(113)],implicit:[n(289),n(290),n(291),n(292)]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),o=n(1),a=n(3),s=n(77),l=n(109);function u(e,t){var n=d(void 0===e||c(e)?e:i.DefaultBuilderOptions),o=c(e)?t:e,a=l.createDocument();f(a,n);var u=new s.XMLBuilderImpl(a);return void 0!==o&&u.ele(o),u}function c(e){if(!o.isPlainObject(e))return!1;for(var t in e)if(e.hasOwnProperty(t)&&!i.XMLBuilderOptionKeys.has(t))return!1;return!0}function d(e){void 0===e&&(e={});var t=o.applyDefaults(e,i.DefaultBuilderOptions);if(0===t.convert.att.length||0===t.convert.ins.length||0===t.convert.text.length||0===t.convert.cdata.length||0===t.convert.comment.length)throw Error("JS object converter strings cannot be zero length.");return t}function f(e,t,n){e._xmlBuilderOptions=t,e._isFragment=n}t.builder=function(e,t){var n=d(c(e)?e:i.DefaultBuilderOptions),l=a.Guard.isNode(e)||o.isArray(e)?e:t;if(void 0===l)throw Error("Invalid arguments.");if(o.isArray(l)){for(var u=[],f=0;f<l.length;f++){var p=new s.XMLBuilderImpl(l[f]);p.set(n),u.push(p)}return u}var h=new s.XMLBuilderImpl(l);return h.set(n),h},t.create=u,t.fragment=function(e,t){var n=d(void 0===e||c(e)?e:i.DefaultBuilderOptions),o=c(e)?t:e,a=l.createDocument();f(a,n,!0);var u=new s.XMLBuilderImpl(a.createDocumentFragment());return void 0!==o&&u.ele(o),u},t.convert=function(e,t,n){var o,a,s;return c(e)&&void 0!==t?(o=e,a=t,s=n):(o=i.DefaultBuilderOptions,a=e,s=t||void 0),u(o,a).end(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(77);t.builder=i.builder,t.create=i.create,t.fragment=i.fragment,t.convert=i.convert,t.createCB=i.createCB,t.fragmentCB=i.fragmentCB},function(e,t,n){"use strict";n(31),n(32),n(33),n(191),n(192),n(194),n(64),n(19),n(198),n(199),n(89),n(201),n(65),n(20),n(66),n(22),n(23);var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(91),s=n(1),l=n(217),u=n(2),c=n(3),d=n(0),f=n(109),p=n(7),h=n(276);t.XMLBuilderImpl=function(){function e(e){this._domNode=e}return Object.defineProperty(e.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.set=function(e){return this._options=s.applyDefaults(s.applyDefaults(this._options,e,!0),a.DefaultBuilderOptions),this},e.prototype.ele=function(t,n,o){if(s.isObject(t))return new h.ObjectReader(this._options).parse(this,t);if(null!==t&&/^\s*</.test(t))return new h.XMLReader(this._options).parse(this,t);if(null!==t&&/^\s*[\{\[]/.test(t))return new h.JSONReader(this._options).parse(this,t);if(null!==t&&/^(\s*|(#.*)|(%.*))*---/.test(t))return new h.YAMLReader(this._options).parse(this,t);if((null===t||s.isString(t))&&s.isString(n))c=(a=i([t,n,o],3))[0],p=a[1],m=a[2];else{if(null===t)throw Error("Element name cannot be null. "+this._debugInfo());c=(l=i([void 0,t,s.isObject(n)?n:void 0],3))[0],p=l[1],m=l[2]}if(m&&(m=s.getValue(m)),c=(u=i(this._extractNamespace(f.sanitizeInput(c,this._options.invalidCharReplacement),f.sanitizeInput(p,this._options.invalidCharReplacement),!0),2))[0],p=u[1],void 0===c){var a,l,u,c,p,m,g=i(d.namespace_extractQName(p),1)[0];c=this.node.lookupNamespaceURI(g)}var v=null!=c?this._doc.createElementNS(c,p):this._doc.createElement(p);this.node.appendChild(v);var y=new e(v),b=this._doc.doctype;if(v===this._doc.documentElement&&null!==b){var x=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,b.publicId,b.systemId);this._doc.replaceChild(x,b)}return m&&!s.isEmpty(m)&&y.att(m),y},e.prototype.remove=function(){var e=this.up();return e.node.removeChild(this.node),e},e.prototype.att=function(e,t,n){var o,a,l,u,h,m,g=this;if(s.isMap(e)||s.isObject(e))return s.forEachObject(e,function(e,t){return g.att(e,t)},this),this;if(null!=e&&(e=s.getValue(e+"")),null!=t&&(t=s.getValue(t+"")),null!=n&&(n=s.getValue(n+"")),(null===e||s.isString(e))&&s.isString(t)&&(null===n||s.isString(n)))u=(o=i([e,t,n],3))[0],h=o[1],m=o[2];else{if(!s.isString(e)||null!=t&&!s.isString(t))throw Error("Attribute name and value not specified. "+this._debugInfo());u=(a=i([void 0,e,t],3))[0],h=a[1],m=a[2]}if(this._options.keepNullAttributes&&null==m)m="";else if(null==m)return this;if(!c.Guard.isElementNode(this.node))throw Error("An attribute can only be assigned to an element node.");var v=this.node;u=(l=i(this._extractNamespace(u,h,!1),2))[0],h=l[1],h=f.sanitizeInput(h,this._options.invalidCharReplacement),u=f.sanitizeInput(u,this._options.invalidCharReplacement),m=f.sanitizeInput(m,this._options.invalidCharReplacement);var y=i(d.namespace_extractQName(h),2),b=y[0],x=y[1],w=i(d.namespace_extractQName(v.prefix?v.prefix+":"+v.localName:v.localName),1)[0],A=null;return"xmlns"===b?(u=p.namespace.XMLNS,null===v.namespaceURI&&w===x&&(A=m)):null===b&&"xmlns"===x&&null===w&&(u=p.namespace.XMLNS,A=m),null!==A&&(this._updateNamespace(A),v=this.node),void 0!==u?v.setAttributeNS(u,h,m):v.setAttribute(h,m),this},e.prototype.removeAtt=function(e,t){var n,i,o=this;if(!c.Guard.isElementNode(this.node))throw Error("An attribute can only be removed from an element node.");if(e=s.getValue(e),void 0!==t&&(t=s.getValue(t)),null!==e&&void 0===t)i=e;else{if(null!==e&&!s.isString(e)||void 0===t)throw Error("Attribute namespace must be a string. "+this._debugInfo());n=e,i=t}return s.isArray(i)||s.isSet(i)?s.forEachArray(i,function(e){return void 0===n?o.removeAtt(e):o.removeAtt(n,e)},this):void 0!==n?(i=f.sanitizeInput(i,this._options.invalidCharReplacement),n=f.sanitizeInput(n,this._options.invalidCharReplacement),this.node.removeAttributeNS(n,i)):(i=f.sanitizeInput(i,this._options.invalidCharReplacement),this.node.removeAttribute(i)),this},e.prototype.txt=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=""}var t=this._doc.createTextNode(f.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.com=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=""}var t=this._doc.createComment(f.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.dat=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=""}var t=this._doc.createCDATASection(f.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.ins=function(e,t){var n=this;if(void 0===t&&(t=""),null==t){if(!this._options.keepNullNodes)return this;t=""}if(s.isArray(e)||s.isSet(e))s.forEachArray(e,function(e){var t=(e+="").indexOf(" "),i=-1===t?e:e.substr(0,t),o=-1===t?"":e.substr(t+1);n.ins(i,o)},this);else if(s.isMap(e)||s.isObject(e))s.forEachObject(e,function(e,t){return n.ins(e,t)},this);else{var i=this._doc.createProcessingInstruction(f.sanitizeInput(e,this._options.invalidCharReplacement),f.sanitizeInput(t,this._options.invalidCharReplacement));this.node.appendChild(i)}return this},e.prototype.dec=function(e){return this._options.version=e.version||"1.0",this._options.encoding=e.encoding,this._options.standalone=e.standalone,this},e.prototype.dtd=function(e){var t=f.sanitizeInput(e&&e.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),n=f.sanitizeInput(e&&e.pubID||"",this._options.invalidCharReplacement),i=f.sanitizeInput(e&&e.sysID||"",this._options.invalidCharReplacement);if(null!==this._doc.documentElement&&t!==this._doc.documentElement.tagName)throw Error("DocType name does not match document element name.");var o=this._doc.implementation.createDocumentType(t,n,i);return null!==this._doc.doctype?this._doc.replaceChild(o,this._doc.doctype):this._doc.insertBefore(o,this._doc.documentElement),this},e.prototype.import=function(t){var n,a,s=this._domNode,l=this._doc,u=t.node;if(c.Guard.isDocumentNode(u)){var f=u.documentElement;if(null===f)throw Error("Imported document has no document element node. "+this._debugInfo());var p=l.importNode(f,!0);s.appendChild(p);var h=i(d.namespace_extractQName(p.prefix?p.prefix+":"+p.localName:p.localName),1)[0],m=s.lookupNamespaceURI(h);new e(p)._updateNamespace(m)}else if(c.Guard.isDocumentFragmentNode(u))try{for(var g=o(u.childNodes),v=g.next();!v.done;v=g.next()){var y=v.value;p=l.importNode(y,!0),s.appendChild(p),c.Guard.isElementNode(p)&&(h=i(d.namespace_extractQName(p.prefix?p.prefix+":"+p.localName:p.localName),1)[0],m=s.lookupNamespaceURI(h),new e(p)._updateNamespace(m))}}catch(e){n={error:e}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}else p=l.importNode(u,!0),s.appendChild(p),c.Guard.isElementNode(p)&&(h=i(d.namespace_extractQName(p.prefix?p.prefix+":"+p.localName:p.localName),1)[0],m=s.lookupNamespaceURI(h),new e(p)._updateNamespace(m));return this},e.prototype.doc=function(){if(this._doc._isFragment){for(var t=this.node;t&&t.nodeType!==u.NodeType.DocumentFragment;)t=t.parentNode;if(null===t)throw Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new e(t)}return new e(this._doc)},e.prototype.root=function(){var t=this._doc.documentElement;if(!t)throw Error("Document root element is null. "+this._debugInfo());return new e(t)},e.prototype.up=function(){var t=this._domNode.parentNode;if(!t)throw Error("Parent node is null. "+this._debugInfo());return new e(t)},e.prototype.prev=function(){var t=this._domNode.previousSibling;if(!t)throw Error("Previous sibling node is null. "+this._debugInfo());return new e(t)},e.prototype.next=function(){var t=this._domNode.nextSibling;if(!t)throw Error("Next sibling node is null. "+this._debugInfo());return new e(t)},e.prototype.first=function(){var t=this._domNode.firstChild;if(!t)throw Error("First child node is null. "+this._debugInfo());return new e(t)},e.prototype.last=function(){var t=this._domNode.lastChild;if(!t)throw Error("Last child node is null. "+this._debugInfo());return new e(t)},e.prototype.each=function(t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=this._getFirstDescendantNode(this._domNode,n,i);a[0];){var s=this._getNextDescendantNode(this._domNode,a[0],i,a[1],a[2]);t.call(o,new e(a[0]),a[1],a[2]),a=s}return this},e.prototype.map=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=[];return this.each(function(t,n,a){return o.push(e.call(i,t,n,a))},t,n),o},e.prototype.reduce=function(e,t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);var a=t;return this.each(function(t,n,i){return a=e.call(o,a,t,n,i)},n,i),a},e.prototype.find=function(t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=this._getFirstDescendantNode(this._domNode,n,i);a[0];){var s=new e(a[0]);if(t.call(o,s,a[1],a[2]))return s;a=this._getNextDescendantNode(this._domNode,a[0],i,a[1],a[2])}},e.prototype.filter=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=[];return this.each(function(t,n,a){e.call(i,t,n,a)&&o.push(t)},t,n),o},e.prototype.every=function(t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=this._getFirstDescendantNode(this._domNode,n,i);a[0];){var s=new e(a[0]);if(!t.call(o,s,a[1],a[2]))return!1;a=this._getNextDescendantNode(this._domNode,a[0],i,a[1],a[2])}return!0},e.prototype.some=function(t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var a=this._getFirstDescendantNode(this._domNode,n,i);a[0];){var s=new e(a[0]);if(t.call(o,s,a[1],a[2]))return!0;a=this._getNextDescendantNode(this._domNode,a[0],i,a[1],a[2])}return!1},e.prototype.toArray=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=[];return this.each(function(e){return n.push(e)},e,t),n},e.prototype.toString=function(e){return void 0===(e=e||{}).format&&(e.format="xml"),this._serialize(e)},e.prototype.toObject=function(e){return void 0===(e=e||{}).format&&(e.format="object"),this._serialize(e)},e.prototype.end=function(e){return void 0===(e=e||{}).format&&(e.format="xml"),this.doc()._serialize(e)},e.prototype._getFirstDescendantNode=function(e,t,n){return t?[this._domNode,0,0]:n?this._getNextDescendantNode(e,e,n,0,0):[this._domNode.firstChild,0,1]},e.prototype._getNextDescendantNode=function(e,t,n,i,o){if(!n)return e===t?[t.firstChild,0,o+1]:[t.nextSibling,i+1,o];if(t.firstChild)return[t.firstChild,0,o+1];if(t===e)return[null,-1,-1];if(t.nextSibling)return[t.nextSibling,i+1,o];for(var a=t.parentNode;a&&a!==e;){if(a.nextSibling)return[a.nextSibling,d.tree_index(a.nextSibling),o-1];a=a.parentNode,o--}return[null,-1,-1]},e.prototype._serialize=function(e){if("xml"===e.format)return new l.XMLWriter(this._options,e).serialize(this.node);if("map"===e.format)return new l.MapWriter(this._options,e).serialize(this.node);if("object"===e.format)return new l.ObjectWriter(this._options,e).serialize(this.node);if("json"===e.format)return new l.JSONWriter(this._options,e).serialize(this.node);if("yaml"===e.format)return new l.YAMLWriter(this._options,e).serialize(this.node);throw Error("Invalid writer format: "+e.format+". "+this._debugInfo())},e.prototype._extractNamespace=function(e,t,n){var i=t.indexOf("@");if(i>0&&(void 0===e&&(e=t.slice(i+1)),t=t.slice(0,i)),void 0===e)e=n?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(null!==e&&"@"===e[0]){var o=e.slice(1);if(void 0===(e=this._options.namespaceAlias[o]))throw Error("Namespace alias `"+o+"` is not defined. "+this._debugInfo())}return[e,t]},e.prototype._updateNamespace=function(t){var n,a,s,l,u=this._domNode;if(c.Guard.isElementNode(u)&&null!==t&&u.namespaceURI!==t){var f=i(d.namespace_extractQName(u.prefix?u.prefix+":"+u.localName:u.localName),2),p=f[0],h=f[1],m=d.create_element(this._doc,h,t,p);try{for(var g=o(u.attributes),v=g.next();!v.done;v=g.next()){var y=v.value,b=y.prefix?y.prefix+":"+y.localName:y.localName,x=i(d.namespace_extractQName(b),1)[0],w=y.namespaceURI;null===w&&null!==x&&(w=u.lookupNamespaceURI(x)),null===w?m.setAttribute(b,y.value):m.setAttributeNS(w,b,y.value)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}var A=u.parentNode;if(null===A)throw Error("Parent node is null."+this._debugInfo());A.replaceChild(m,u),this._domNode=m;try{for(var C=o(u.childNodes),S=C.next();!S.done;S=C.next()){var _=S.value.cloneNode(!0);if(m.appendChild(_),c.Guard.isElementNode(_)){var T=i(d.namespace_extractQName(_.prefix?_.prefix+":"+_.localName:_.localName),1)[0],O=m.lookupNamespaceURI(T);new e(_)._updateNamespace(O)}}}catch(e){s={error:e}}finally{try{S&&!S.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}}},Object.defineProperty(e.prototype,"_doc",{get:function(){var e=this.node;if(c.Guard.isDocumentNode(e))return e;var t=e.ownerDocument;if(!t)throw Error("Owner document is null. "+this._debugInfo());return t},enumerable:!0,configurable:!0}),e.prototype._debugInfo=function(e){var t=this.node,n=t.parentNode;e=e||t.nodeName;var i=n?n.nodeName:"";return i?"node: <"+e+">, parent: <"+i+">":"node: <"+e+">"},Object.defineProperty(e.prototype,"_options",{get:function(){var e=this._doc;if(void 0===e._xmlBuilderOptions)throw Error("Builder options is not set.");return e._xmlBuilderOptions},set:function(e){this._doc._xmlBuilderOptions=e},enumerable:!0,configurable:!0}),e}()},function(e,t,n){var i=n(11),o=n(117),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},function(e,t,n){var i=n(46),o=n(82),a=n(85),s=n(18);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(16),o=n(15),a=n(18),s=n(61);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=s(t),l=i.length,u=0;l>u;)o.f(e,n=i[u++],t[n]);return e}},function(e,t,n){e.exports=n(46)("document","documentElement")},function(e,t,n){var i=n(24),o=n(82).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(i(e))}},function(e,t,n){"use strict";var i=n(4),o=n(36).every,a=n(48),s=n(28),l=a("every"),u=s("every");i({target:"Array",proto:!0,forced:!l||!u},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(4),o=n(36).filter,a=n(63),s=n(28),l=a("filter"),u=s("filter");i({target:"Array",proto:!0,forced:!l||!u},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){e.exports=n(46)("navigator","userAgent")||""},function(e,t,n){"use strict";var i=n(4),o=n(36).find,a=n(130),s=n(28),l=!0,u=s("find");"find"in[]&&[,].find(function(){l=!1}),i({target:"Array",proto:!0,forced:l||!u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("find")},function(e,t,n){"use strict";var i=n(131).IteratorPrototype,o=n(60),a=n(40),s=n(62),l=n(49),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=o(i,{next:a(1,n)}),s(e,c,!1,!0),l[c]=u,e}},function(e,t,n){e.exports=!n(8)(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var i=n(4),o=n(36).map,a=n(63),s=n(28),l=a("map"),u=s("map");i({target:"Array",proto:!0,forced:!l||!u},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(4),o=n(200).left,a=n(48),s=n(28),l=a("reduce"),u=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!l||!u},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(127),o=n(27),a=n(41),s=n(26),l=function(e){return function(t,n,l,u){i(n);var c=o(t),d=a(c),f=s(c.length),p=e?f-1:0,h=e?-1:1;if(l<2)for(;;){if(p in d){u=d[p],p+=h;break}if(p+=h,e?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=h)p in d&&(u=n(u,d[p],p,c));return u}};e.exports={left:l(!1),right:l(!0)}},function(e,t,n){"use strict";var i=n(4),o=n(36).some,a=n(48),s=n(28),l=a("some"),u=s("some");i({target:"Array",proto:!0,forced:!l||!u},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(90),o=n(135);e.exports=i?({}).toString:function(){return"[object "+o(this)+"]"}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){e.exports=!n(8)(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,n){var i=n(5),o=n(49),a=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[a]===e)}},function(e,t,n){var i=n(135),o=n(49),a=n(5)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i=n(18);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},function(e,t,n){var i=n(5)("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},function(e,t,n){var i=n(13),o=n(133);e.exports=function(e,t,n){var a,s;return o&&"function"==typeof(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},function(e,t,n){var i=n(25);e.exports=function(e,t,n){for(var o in t)i(e,o,t[o],n);return e}},function(e,t,n){"use strict";var i=n(46),o=n(15),a=n(5),s=n(16),l=a("species");e.exports=function(e){var t=i(e),n=o.f;s&&t&&!t[l]&&n(t,l,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){var u=[a,l];if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeSet=function(){function e(e){void 0===e&&(e=1e3),this._items=new Set,this._limit=e}return e.prototype.add=function(e){if(this._items.add(e),this._items.size>this._limit){var t=this._items.values().next();t.done||this._items.delete(t.value)}return this},e.prototype.delete=function(e){return this._items.delete(e)},e.prototype.has=function(e){return this._items.has(e)},e.prototype.clear=function(){this._items.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._items.forEach(function(i){return e.call(t,i,i,n)})},e.prototype.keys=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.keys())];case 1:return e.sent(),[2]}})},e.prototype.values=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.values())];case 1:return e.sent(),[2]}})},e.prototype.entries=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.entries())];case 1:return e.sent(),[2]}})},e.prototype[Symbol.iterator]=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items)];case 1:return e.sent(),[2]}})},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";var i=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){var u=[a,l];if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectCache=function(){function e(e){void 0===e&&(e=1e3),this._items=new Map,this._limit=e}return e.prototype.get=function(e){return this._items.get(e)},e.prototype.set=function(e,t){if(this._items.set(e,t),this._items.size>this._limit){var n=this._items.keys().next();n.done||this._items.delete(n.value)}},e.prototype.delete=function(e){return this._items.delete(e)},e.prototype.has=function(e){return this._items.has(e)},e.prototype.clear=function(){this._items.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){this._items.forEach(function(n,i){return e.call(t,i,n)})},e.prototype.keys=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.keys())];case 1:return e.sent(),[2]}})},e.prototype.values=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.values())];case 1:return e.sent(),[2]}})},e.prototype.entries=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items.entries())];case 1:return e.sent(),[2]}})},e.prototype[Symbol.iterator]=function(){return i(this,function(e){switch(e.label){case 0:return[5,o(this._items)];case 1:return e.sent(),[2]}})},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompareCache=function(){function e(e){void 0===e&&(e=1e3),this._items=new Map,this._limit=e}return e.prototype.check=function(e,t){if(this._items.get(e)===t)return!0;if(this._items.get(t)===e)return!1;var n=.5>Math.random();if(n?this._items.set(e,t):this._items.set(t,e),this._items.size>this._limit){var i=this._items.keys().next();i.done||this._items.delete(i.value)}return n},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=function(){function e(e){this._initialized=!1,this._value=void 0,this._initFunc=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringWalker=function(){function e(e){this._pointer=0,this._chars=Array.from(e),this._length=this._chars.length}return Object.defineProperty(e.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.codePoint=function(){if(void 0===this._codePoint)if(this.eof)this._codePoint=-1;else{var e=this._chars[this._pointer].codePointAt(0);this._codePoint=void 0!==e?e:-1}return this._codePoint},e.prototype.c=function(){return void 0===this._c&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},e.prototype.remaining=function(){return void 0===this._remaining&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},e.prototype.substring=function(){return void 0===this._substring&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(e.prototype,"pointer",{get:function(){return this._pointer},set:function(e){e!==this._pointer&&(this._pointer=e,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapWriter=n(218).MapWriter,t.XMLWriter=n(258).XMLWriter,t.ObjectWriter=n(67).ObjectWriter,t.JSONWriter=n(260).JSONWriter,t.YAMLWriter=n(261).YAMLWriter},function(e,t,n){"use strict";n(19),n(219),n(20),n(22),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(67);t.MapWriter=function(e){function t(t,n){var i=e.call(this,t)||this;return i._writerOptions=a.applyDefaults(n,{format:"map",wellFormed:!1,group:!1,verbose:!1}),i}return o(t,e),t.prototype.serialize=function(e){var t=a.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),n=new s.ObjectWriter(this._builderOptions,t).serialize(e);return this._convertObject(n)},t.prototype._convertObject=function(e){if(a.isArray(e)){for(var t=0;t<e.length;t++)e[t]=this._convertObject(e[t]);return e}if(a.isObject(e)){var n=new Map;for(var i in e)n.set(i,this._convertObject(e[i]));return n}return e},t}(n(50).BaseWriter)},function(e,t,n){"use strict";e.exports=n(139)("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},n(143))},function(e,t,n){"use strict";var i=n(4),o=n(8),a=n(59),s=n(13),l=n(27),u=n(26),c=n(134),d=n(128),f=n(63),p=n(5),h=n(129),m=p("isConcatSpreadable"),g=h>=51||!o(function(){var e=[];return e[m]=!1,e.concat()[0]!==e}),v=f("concat"),y=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!g||!v},{concat:function(e){var t,n,i,o,a,s=l(this),f=d(s,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(y(a=-1===t?s:arguments[t])){if(p+(o=u(a.length))>0x1fffffffffffff)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,p++)n in a&&c(f,p,a[n])}else{if(p>=0x1fffffffffffff)throw TypeError("Maximum allowed index exceeded");c(f,p++,a)}return f.length=p,f}})},function(e,t,n){"use strict";var i=n(8);t.UNSUPPORTED_Y=i(function(){var e=RegExp("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),t.BROKEN_CARET=i(function(){var e=RegExp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},function(e,t,n){var i=n(223);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(13),o=n(42),a=n(5)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){var i=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){"use strict";n(68);var i=n(25),o=n(8),a=n(5),s=n(93),l=n(21),u=a("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d="$0"==="a".replace(/./,"$0"),f=a("replace"),p=!!/./[f]&&""===/./[f]("a","$0"),h=!o(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});e.exports=function(e,t,n,f){var m=a(e),g=!o(function(){var t={};return t[m]=function(){return 7},7!=""[e](t)}),v=g&&!o(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t});if(!g||!v||"replace"===e&&(!c||!d||p)||"split"===e&&!h){var y=/./[m],b=n(m,""[e],function(e,t,n,i,o){return t.exec===s?g&&!o?{done:!0,value:y.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}},{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),x=b[0],w=b[1];i(String.prototype,e,x),i(RegExp.prototype,m,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&l(RegExp.prototype[m],"sham",!0)}},function(e,t,n){"use strict";var i=n(137).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i=n(42),o=n(93);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(96);t.forgivingBase64Encode=function(t){return e.from(t).toString("base64")},t.forgivingBase64Decode=function(t){return""===t?"":((t=t.replace(i.ASCIIWhiteSpace,"")).length%4==0&&(t.endsWith("==")?t=t.substr(0,t.length-2):t.endsWith("=")&&(t=t.substr(0,t.length-1))),t.length%4==1?null:/[0-9A-Za-z+/]/.test(t)?e.from(t,"base64").toString("utf8"):null)}}).call(this,n(145).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=c(e),s=i[0],l=i[1],u=new a(3*(s+l)/4-l),d=0,f=l>0?s-4:s;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===l&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[d++]=255&t),1===l&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],s=0,l=n-o;s<l;s+=16383)a.push(function(e,t,n){for(var o,a=[],s=t;s<n;s+=3)a.push(i[(o=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}(e,s,s+16383>l?l:s+16383));return 1===o?a.push(i[(t=e[n-1])>>2]+i[t<<4&63]+"=="):2===o&&a.push(i[(t=(e[n-2]<<8)+e[n-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),a.join("")};for(var i=[],o=[],a="u">typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=s.length;l<u;++l)i[l]=s[l],o[s.charCodeAt(l)]=l;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return -1===n&&(n=t),[n,n===t?0:4-n%4]}o[45]=62,o[95]=63},function(e,t){t.read=function(e,t,n,i,o){var a,s,l=8*o-i-1,u=(1<<l)-1,c=u>>1,d=-7,f=n?o-1:0,p=n?-1:1,h=e[t+f];for(f+=p,a=h&(1<<-d)-1,h>>=-d,d+=l;d>0;a=256*a+e[t+f],f+=p,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=i;d>0;s=256*s+e[t+f],f+=p,d-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,i),a-=c}return(h?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,n,i,o,a){var s,l,u,c=8*a-o-1,d=(1<<c)-1,f=d>>1,p=5960464477539062e-23*(23===o),h=i?0:a-1,m=i?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(l=+!!isNaN(t),s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=d?(l=0,s=d):s+f>=1?(l=(t*u-1)*Math.pow(2,o),s+=f):(l=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&l,h+=m,l/=256,o-=8);for(s=s<<o|l,c+=o;c>0;e[n+h]=255&s,h+=m,s/=256,c-=8);e[n+h-m]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);function a(e){var t,n;if(null===e||o.isString(e)||o.isNumber(e))return e;if(o.isArray(e)){var s=[];try{for(var l=i(e),u=l.next();!u.done;u=l.next()){var c=u.value;s.push(a(c))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s}if(o.isObject(e)){for(var d in s=new Map,e)if(e.hasOwnProperty(d)){var f=e[d];s.set(d,a(f))}return s}return e}t.parseJSONFromBytes=function(e){var t=o.utf8Decode(e);return JSON.parse.call(void 0,t)},t.serializeJSONToBytes=function(e){var t=JSON.stringify.call(void 0,e);return o.utf8Encode(t)},t.parseJSONIntoInfraValues=function(e){return a(JSON.parse.call(void 0,e))},t.convertAJSONDerivedJavaScriptValueToAnInfraValue=a},function(e,t,n){"use strict";var i=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){var u=[a,l];if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1);t.append=function(e,t){e.push(t)},t.extend=function(e,t){e.push.apply(e,a(t))},t.prepend=function(e,t){e.unshift(t)},t.replace=function(e,t,n){var i,o,a=0;try{for(var u=s(e),c=u.next();!c.done;c=u.next()){var d=c.value;if(l.isFunction(t))t.call(null,d)&&(e[a]=n);else if(d===t)return void(e[a]=n);a++}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}},t.insert=function(e,t,n){e.splice(n,0,t)},t.remove=function(e,t){for(var n=e.length;n--;){var i=e[n];if(l.isFunction(t))t.call(null,i)&&e.splice(n,1);else if(i===t)return void e.splice(n,1)}},t.empty=function(e){e.length=0},t.contains=function(e,t){var n,i;try{for(var o=s(e),a=o.next();!a.done;a=o.next()){var u=a.value;if(l.isFunction(t)){if(t.call(null,u))return!0}else if(u===t)return!0}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},t.size=function(e,t){if(void 0===t)return e.length;var n,i,o=0;try{for(var a=s(e),l=a.next();!l.done;l=a.next()){var u=l.value;t.call(null,u)&&o++}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o},t.isEmpty=function(e){return 0===e.length},t.forEach=function(e,t){var n,o,a,l,u;return i(this,function(i){switch(i.label){case 0:return void 0!==t?[3,2]:[5,s(e)];case 1:return i.sent(),[3,9];case 2:i.trys.push([2,7,8,9]),o=(n=s(e)).next(),i.label=3;case 3:return o.done?[3,6]:(a=o.value,t.call(null,a)?[4,a]:[3,5]);case 4:i.sent(),i.label=5;case 5:return o=n.next(),[3,3];case 6:return[3,9];case 7:return l={error:i.sent()},[3,9];case 8:try{o&&!o.done&&(u=n.return)&&u.call(n)}finally{if(l)throw l.error}return[7];case 9:return[2]}})},t.clone=function(e){return new(Array.bind.apply(Array,a([void 0],e)))},t.sortInAscendingOrder=function(e,t){return e.sort(function(e,n){return t.call(null,e,n)?-1:1})},t.sortInDescendingOrder=function(e,t){return e.sort(function(e,n){return t.call(null,e,n)?1:-1})}},function(e,t,n){"use strict";var i=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){var u=[a,l];if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1);t.get=function(e,t){return e.get(t)},t.set=function(e,t,n){e.set(t,n)},t.remove=function(e,t){var n,i,a,s;if(l.isFunction(t)){var u=[];try{for(var c=o(e),d=c.next();!d.done;d=c.next()){var f=d.value;t.call(null,f)&&u.push(f[0])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var p=o(u),h=p.next();!h.done;h=p.next()){var m=h.value;e.delete(m)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}else e.delete(t)},t.contains=function(e,t){var n,i;if(l.isFunction(t)){try{for(var a=o(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(t.call(null,u))return!0}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1}return e.has(t)},t.keys=function(e){return new Set(e.keys())},t.values=function(e){return s(e.values())},t.size=function(e,t){if(void 0===t)return e.size;var n,i,a=0;try{for(var s=o(e),l=s.next();!l.done;l=s.next()){var u=l.value;t.call(null,u)&&a++}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.isEmpty=function(e){return 0===e.size},t.forEach=function(e,t){var n,a,s,l,u;return i(this,function(i){switch(i.label){case 0:return void 0!==t?[3,2]:[5,o(e)];case 1:return i.sent(),[3,9];case 2:i.trys.push([2,7,8,9]),a=(n=o(e)).next(),i.label=3;case 3:return a.done?[3,6]:(s=a.value,t.call(null,s)?[4,s]:[3,5]);case 4:i.sent(),i.label=5;case 5:return a=n.next(),[3,3];case 6:return[3,9];case 7:return l={error:i.sent()},[3,9];case 8:try{a&&!a.done&&(u=n.return)&&u.call(n)}finally{if(l)throw l.error}return[7];case 9:return[2]}})},t.clone=function(e){return new Map(e)},t.sortInAscendingOrder=function(e,t){var n=new(Array.bind.apply(Array,s([void 0],e)));return n.sort(function(e,n){return t.call(null,e,n)?-1:1}),new Map(n)},t.sortInDescendingOrder=function(e,t){var n=new(Array.bind.apply(Array,s([void 0],e)));return n.sort(function(e,n){return t.call(null,e,n)?1:-1}),new Map(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTML="http://www.w3.org/1999/xhtml",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/",t.MathML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLink="http://www.w3.org/1999/xlink"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enqueue=function(e,t){e.push(t)},t.dequeue=function(e){return e.shift()||null}},function(e,t,n){"use strict";var i=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){var u=[a,l];if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1);function u(e,t){var n,i;try{for(var a=o(e),s=a.next();!s.done;s=a.next()){var l=s.value;if(!t.has(l))return!1}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!0}t.append=function(e,t){e.add(t)},t.extend=function(e,t){t.forEach(e.add,e)},t.prepend=function(e,t){var n=new Set(e);e.clear(),e.add(t),n.forEach(e.add,e)},t.replace=function(e,t,n){var i,a,s=new Set;try{for(var u=o(e),c=u.next();!c.done;c=u.next()){var d=c.value;l.isFunction(t)?t.call(null,d)?s.add(n):s.add(d):d===t?s.add(n):s.add(d)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}e.clear(),s.forEach(e.add,e)},t.insert=function(e,t,n){var i,a,s=new Set,l=0;try{for(var u=o(e),c=u.next();!c.done;c=u.next()){var d=c.value;l===n&&s.add(t),s.add(d),l++}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}e.clear(),s.forEach(e.add,e)},t.remove=function(e,t){var n,i,a,s;if(l.isFunction(t)){var u=[];try{for(var c=o(e),d=c.next();!d.done;d=c.next()){var f=d.value;t.call(null,f)&&u.push(f)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var p=o(u),h=p.next();!h.done;h=p.next()){var m=h.value;e.delete(m)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}else e.delete(t)},t.empty=function(e){e.clear()},t.contains=function(e,t){var n,i;if(!l.isFunction(t))return e.has(t);try{for(var a=o(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(t.call(null,u))return!0}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},t.size=function(e,t){if(void 0===t)return e.size;var n,i,a=0;try{for(var s=o(e),l=s.next();!l.done;l=s.next()){var u=l.value;t.call(null,u)&&a++}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.isEmpty=function(e){return 0===e.size},t.forEach=function(e,t){var n,a,s,l,u;return i(this,function(i){switch(i.label){case 0:return void 0!==t?[3,2]:[5,o(e)];case 1:return i.sent(),[3,9];case 2:i.trys.push([2,7,8,9]),a=(n=o(e)).next(),i.label=3;case 3:return a.done?[3,6]:(s=a.value,t.call(null,s)?[4,s]:[3,5]);case 4:i.sent(),i.label=5;case 5:return a=n.next(),[3,3];case 6:return[3,9];case 7:return l={error:i.sent()},[3,9];case 8:try{a&&!a.done&&(u=n.return)&&u.call(n)}finally{if(l)throw l.error}return[7];case 9:return[2]}})},t.clone=function(e){return new Set(e)},t.sortInAscendingOrder=function(e,t){var n=new(Array.bind.apply(Array,s([void 0],e)));return n.sort(function(e,n){return t.call(null,e,n)?-1:1}),new Set(n)},t.sortInDescendingOrder=function(e,t){var n=new(Array.bind.apply(Array,s([void 0],e)));return n.sort(function(e,n){return t.call(null,e,n)?1:-1}),new Set(n)},t.isSubsetOf=u,t.isSupersetOf=function(e,t){return u(t,e)},t.intersection=function(e,t){var n,i,a=new Set;try{for(var s=o(e),l=s.next();!l.done;l=s.next()){var u=l.value;t.has(u)&&a.add(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.union=function(e,t){var n=new Set(e);return t.forEach(n.add,n),n},t.range=function(e,t){for(var n=new Set,i=e;i<=t;i++)n.add(i);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.push=function(e,t){e.push(t)},t.pop=function(e){return e.pop()||null}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(96),a=n(147),s=n(146),l=n(1);function u(e,t){for(var n=0;;){var i=n<e.length?e.charCodeAt(n):null,o=n<t.length?t.charCodeAt(n):null;if(null===i)return!0;if(i!==o)return!1;n++}}function c(e){var t,n,o=new Uint8Array(Array.from(e).length),a=0;try{for(var s=i(e),l=s.next();!l.done;l=s.next()){var u=l.value.codePointAt(0);console.assert(void 0!==u&&u<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),void 0!==u&&u<=255&&(o[a++]=u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}function d(e){return/^[\u0000-\u007F]*$/.test(e)}function f(e){var t,n,o="";try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.codePointAt(0);o+=void 0!==u&&u>=65&&u<=90?String.fromCodePoint(u+32):l}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}function p(e){return e.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function h(e,t,n){if(!l.isArray(t))return h(e,Array.from(t),n);for(var i="";n.position<t.length&&e.call(null,t[n.position]);)i+=t[n.position],n.position++;return i}function m(e,t){h(function(e){return o.ASCIIWhiteSpace.test(e)},e,t)}t.isCodeUnitPrefix=u,t.isCodeUnitLessThan=function(e,t){if(u(t,e))return!1;if(u(e,t))return!0;for(var n=0;n<Math.min(e.length,t.length);n++){var i=e.charCodeAt(n),o=t.charCodeAt(n);if(i!==o)return i<o}return!1},t.isomorphicEncode=c,t.isASCIIString=d,t.asciiLowercase=f,t.asciiUppercase=function(e){var t,n,o="";try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.codePointAt(0);o+=void 0!==u&&u>=97&&u<=122?String.fromCodePoint(u-32):l}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},t.asciiCaseInsensitiveMatch=function(e,t){return f(e)===f(t)},t.asciiEncode=function(e){return console.assert(d(e),"asciiEncode requires an ASCII string."),c(e)},t.asciiDecode=function(e){var t,n;try{for(var o=i(e),l=o.next();!l.done;l=o.next()){var u=l.value;console.assert(s.isASCIIByte(u),"asciiDecode requires an ASCII byte sequence.")}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a.isomorphicDecode(e)},t.stripNewlines=function(e){return e.replace(/[\n\r]/g,"")},t.normalizeNewlines=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")},t.stripLeadingAndTrailingASCIIWhitespace=p,t.stripAndCollapseASCIIWhitespace=function(e){return p(e.replace(/[\t\n\f\r ]{2,}/g," "))},t.collectASequenceOfCodePoints=h,t.skipASCIIWhitespace=m,t.strictlySplit=function e(t,n){if(!l.isArray(t))return e(Array.from(t),n);var i={position:0},o=[],a=h(function(e){return n!==e},t,i);for(o.push(a);i.position<t.length;)console.assert(t[i.position]===n,"strictlySplit found no delimiter in input string."),i.position++,o.push(a=h(function(e){return n!==e},t,i));return o},t.splitAStringOnASCIIWhitespace=function e(t){if(!l.isArray(t))return e(Array.from(t));var n={position:0},i=[];for(m(t,n);n.position<t.length;){var a=h(function(e){return!o.ASCIIWhiteSpace.test(e)},t,n);i.push(a),m(t,n)}return i},t.splitAStringOnCommas=function e(t){if(!l.isArray(t))return e(Array.from(t));for(var n={position:0},i=[];n.position<t.length;){var o=h(function(e){return","!==e},t,n);i.push(p(o)),n.position<t.length&&(console.assert(","===t[n.position],"splitAStringOnCommas found no delimiter in input string."),n.position++)}return i},t.concatenate=function(e,t){return void 0===t&&(t=""),0===e.length?"":e.join(t)}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(97);t.abort_add=function(e,t){t._abortedFlag||t._abortAlgorithms.add(e)},t.abort_remove=function(e,t){t._abortAlgorithms.delete(e)},t.abort_signalAbort=function(e){var t,n;if(!e._abortedFlag){e._abortedFlag=!0;try{for(var a=i(e._abortAlgorithms),s=a.next();!s.done;s=a.next())s.value.call(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}e._abortAlgorithms.clear(),o.event_fireAnEvent("abort",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(150);t.Cast=function(){function e(){}return e.asNode=function(e){if(i.Guard.isNode(e))return e;throw Error("Invalid object. Node expected.")},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptySet=function(){function e(){}return Object.defineProperty(e.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.add=function(e){throw Error("Cannot add to an empty set.")},e.prototype.clear=function(){},e.prototype.delete=function(e){return!1},e.prototype.forEach=function(e,t){},e.prototype.has=function(e){return!1},e.prototype[Symbol.iterator]=function(){return new i},e.prototype.entries=function(){return new i},e.prototype.keys=function(){return new i},e.prototype.values=function(){return new i},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),e}();var i=function(){function e(){}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){return{done:!0,value:null}},e}()},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.ParserState||(t.ParserState={}))[i.SchemeStart=0]="SchemeStart",i[i.Scheme=1]="Scheme",i[i.NoScheme=2]="NoScheme",i[i.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",i[i.PathOrAuthority=4]="PathOrAuthority",i[i.Relative=5]="Relative",i[i.RelativeSlash=6]="RelativeSlash",i[i.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",i[i.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",i[i.Authority=9]="Authority",i[i.Host=10]="Host",i[i.Hostname=11]="Hostname",i[i.Port=12]="Port",i[i.File=13]="File",i[i.FileSlash=14]="FileSlash",i[i.FileHost=15]="FileHost",i[i.PathStart=16]="PathStart",i[i.Path=17]="Path",i[i.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",i[i.Query=19]="Query",i[i.Fragment=20]="Fragment",t.OpaqueOrigin=["","",null,null]},function(e,t,n){"use strict";var i=n(245),o=n(247);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return o.isString(e)&&(e=b(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"])),d=["%","/","?",";","#"].concat(c),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(248);function b(e,t,n){if(e&&o.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,n),i}a.prototype.parse=function(e,t,n){if(!o.isString(e))throw TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),l=-1!==a&&a<e.indexOf("#")?"?":"#",b=e.split(l);b[0]=b[0].replace(/\\/g,"/");var x=e=b.join(l);if(x=x.trim(),!n&&1===e.split("#").length){var w=u.exec(x);if(w)return this.path=x,this.href=x,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var A=s.exec(x);if(A){var C=(A=A[0]).toLowerCase();this.protocol=C,x=x.substr(A.length)}if(n||A||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===x.substr(0,2);!S||A&&g[A]||(x=x.substr(2),this.slashes=!0)}if(!g[A]&&(S||A&&!v[A])){for(var _,T,O,P=-1,M=0;M<f.length;M++)-1!==(_=x.indexOf(f[M]))&&(-1===P||_<P)&&(P=_);for(-1!==(O=-1===P?x.lastIndexOf("@"):x.lastIndexOf("@",P))&&(T=x.slice(0,O),x=x.slice(O+1),this.auth=decodeURIComponent(T)),P=-1,M=0;M<d.length;M++)-1!==(_=x.indexOf(d[M]))&&(-1===P||_<P)&&(P=_);-1===P&&(P=x.length),this.host=x.slice(0,P),x=x.slice(P),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var D=this.hostname.split(/\./),I=(M=0,D.length);M<I;M++){var k=D[M];if(k&&!k.match(p)){for(var N="",R=0,B=k.length;R<B;R++)k.charCodeAt(R)>127?N+="x":N+=k[R];if(!N.match(p)){var L=D.slice(0,M),F=D.slice(M+1),V=k.match(h);V&&(L.push(V[1]),F.unshift(V[2])),F.length&&(x="/"+F.join(".")+x),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=i.toASCII(this.hostname));var j=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+j,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!m[C])for(M=0,I=c.length;M<I;M++){var U=c[M];if(-1!==x.indexOf(U)){var z=encodeURIComponent(U);z===U&&(z=escape(U)),x=x.split(U).join(z)}}var W=x.indexOf("#");-1!==W&&(this.hash=x.substr(W),x=x.slice(0,W));var H=x.indexOf("?");if(-1!==H?(this.search=x.substr(H),this.query=x.substr(H+1),t&&(this.query=y.parse(this.query)),x=x.slice(0,H)):t&&(this.search="",this.query={}),x&&(this.pathname=x),v[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var q=this.search||"";this.path=j+q}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":")+"@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",a=!1,s="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var l=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),l&&"?"!==l.charAt(0)&&(l="?"+l),t+a+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(l=l.replace("#","%23"))+i},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(o.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,i=Object.keys(this),s=0;s<i.length;s++){var l=i[s];n[l]=this[l]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];"protocol"!==d&&(n[d]=e[d])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var f=Object.keys(e),p=0;p<f.length;p++){var h=f[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",b=n.search||"";n.path=y+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var x=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),A=w||x||n.host&&e.pathname,C=A,S=n.pathname&&n.pathname.split("/")||[],_=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),A=A&&(""===m[0]||""===S[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=m;else if(m.length)S||(S=[]),S.pop(),S=S.concat(m),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search))return _&&(n.hostname=n.host=S.shift(),(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift())),n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=S.slice(-1)[0],O=(n.host||e.host||S.length>1)&&("."===T||".."===T)||""===T,P=0,M=S.length;M>=0;M--)"."===(T=S[M])?S.splice(M,1):".."===T?(S.splice(M,1),P++):P&&(S.splice(M,1),P--);if(!A&&!C)for(;P--;)S.unshift("..");!A||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),O&&"/"!==S.join("/").substr(-1)&&S.push("");var E,D=""===S[0]||S[0]&&"/"===S[0].charAt(0);return _&&(n.hostname=n.host=D?"":S.length?S.shift():"",(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift())),(A=A||n.host&&S.length)&&!D&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,i){var o;!function(){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function h(e){throw RangeError(d[e])}function m(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function g(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+m((e=e.replace(c,".")).split("."),t).join(".")}function v(e){for(var t,n,i=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function y(e){return m(e,function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)}).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,n){var i=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;i+=36)e=f(e/35);return f(i+36*e/(e+38))}function w(e){var t,n,i,o,a,s,l,u,c,d,p,m=[],g=e.length,v=0,b=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&h("not-basic"),m.push(e.charCodeAt(i));for(o=n>0?n+1:0;o<g;){for(a=v,s=1,l=36;o>=g&&h("invalid-input"),((u=(p=e.charCodeAt(o++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||u>f((0x7fffffff-v)/s))&&h("overflow"),v+=u*s,!(u<(c=l<=w?1:l>=w+26?26:l-w));l+=36)s>f(0x7fffffff/(d=36-c))&&h("overflow"),s*=d;w=x(v-a,t=m.length+1,0==a),f(v/t)>0x7fffffff-b&&h("overflow"),b+=f(v/t),v%=t,m.splice(v++,0,b)}return y(m)}function A(e){var t,n,i,o,a,s,l,u,c,d,m,g,y,w,A,C=[];for(g=(e=v(e)).length,t=128,n=0,a=72,s=0;s<g;++s)(m=e[s])<128&&C.push(p(m));for(i=o=C.length,o&&C.push("-");i<g;){for(l=0x7fffffff,s=0;s<g;++s)(m=e[s])>=t&&m<l&&(l=m);for(l-t>f((0x7fffffff-n)/(y=i+1))&&h("overflow"),n+=(l-t)*y,t=l,s=0;s<g;++s)if((m=e[s])<t&&++n>0x7fffffff&&h("overflow"),m==t){for(u=n,c=36;!(u<(d=c<=a?1:c>=a+26?26:c-a));c+=36)A=u-d,w=36-d,C.push(p(b(d+A%w,0))),u=f(A/w);C.push(p(b(u,0))),a=x(n,y,i==o),n=0,++i}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:v,encode:y},decode:w,encode:A,toASCII:function(e){return g(e,function(e){return u.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return g(e,function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e})}},void 0===(o=(function(){return s}).call(t,n,t,e))||(e.exports=o)}()}).call(this,n(246)(e),n(78))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(249),t.encode=t.stringify=n(250)},function(e,t,n){"use strict";e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,f,p,h,m=e[c].replace(s,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),f=m.substr(g+1)):(d=m,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),Object.prototype.hasOwnProperty.call(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(s(e),function(s){var l=encodeURIComponent(i(s))+n;return o(e[s])?a(e[s],function(e){return l+encodeURIComponent(i(e))}).join(t):l+encodeURIComponent(i(e[s]))}).join(t):l?encodeURIComponent(i(l))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52);t.attr_setAnExistingAttributeValue=function(e,t){null===e._element?e._value=t:i.element_change(e,e._element,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(108),o=n(30),a=n(52);t.tokenList_validationSteps=function(e,t){if(!o.dom_hasSupportedTokens(e._attribute._localName))throw TypeError("There are no supported tokens defined for attribute name: '"+e._attribute._localName+"'.");return o.dom_getSupportedTokens(e._attribute._localName).has(t.toLowerCase())},t.tokenList_updateSteps=function(e){(e._element.hasAttribute(e._attribute._localName)||0!==e._tokenSet.size)&&a.element_setAnAttributeValue(e._element,e._attribute._localName,i.orderedSet_serialize(e._tokenSet))},t.tokenList_serializeSteps=function(e){return a.element_getAnAttributeValue(e._element,e._attribute._localName)}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);function a(e){return o.isBoolean(e)?e:e.capture||!1}t.eventTarget_flatten=a,t.eventTarget_flattenMore=function(e){var t=a(e),n=!1,i=!1;return o.isBoolean(e)||(n=e.once||!1,i=e.passive||!1),[t,i,n]},t.eventTarget_addEventListener=function(e,t){if(null!==t.callback){for(var n=0;n<e._eventListenerList.length;n++){var i=e._eventListenerList[n];if(i.type===t.type&&i.callback.handleEvent===t.callback.handleEvent&&i.capture===t.capture)return}e._eventListenerList.push(t)}},t.eventTarget_removeEventListener=function(e,t,n){t.removed=!0,e._eventListenerList.splice(n,1)},t.eventTarget_removeAllEventListeners=function(e){var t,n;try{for(var o=i(e._eventListenerList),a=o.next();!a.done;a=o.next())a.value.removed=!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e._eventListenerList.length=0}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(29);t.parentNode_convertNodesIntoANode=function(e,t){for(var n,s,l=null,u=0;u<e.length;u++){var c=e[u];if(o.isString(c)){var d=a.create_text(t,c);e[u]=d}}if(1===e.length)l=e[0];else{var f=l=a.create_documentFragment(t);try{for(var p=i(e),h=p.next();!h.done;h=p.next())c=h.value,f.appendChild(c)}catch(e){n={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}}return l}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),l=n(9),u=n(3),c=n(29),d=n(17),f=n(175),p=n(107),h=n(176),m=n(37),g=n(177);function v(e){return e._startNode===e._endNode&&e._startOffset===e._endOffset}function y(e){return d.tree_rootNode(e._startNode)}function b(e,t){return d.tree_rootNode(e)===y(t)&&f.boundaryPoint_position([e,0],t._start)===s.BoundaryPosition.After&&f.boundaryPoint_position([e,d.tree_nodeLength(e)],t._end)===s.BoundaryPosition.Before}function x(e,t){var n=d.tree_isAncestorOf(t._startNode,e,!0),i=d.tree_isAncestorOf(t._endNode,e,!0);return n&&!i||!n&&i}function w(e){var t,n,o,s,f,g,y=c.create_documentFragment(e._startNode._nodeDocument);if(v(e))return y;var A=e._startNode,C=e._startOffset,S=e._endNode,_=e._endOffset;if(A===S&&u.Guard.isCharacterDataNode(A))return(j=h.node_clone(A))._data=p.characterData_substringData(A,C,_-C),m.mutation_append(j,y),p.characterData_replaceData(A,C,_-C,""),y;for(var T=A;!d.tree_isAncestorOf(S,T,!0);){if(null===T._parent)throw Error("Parent node  is null.");T=T._parent}var O=null;if(!d.tree_isAncestorOf(S,A,!0))try{for(var P=i(T._children),M=P.next();!M.done;M=P.next())if(x(k=M.value,e)){O=k;break}}catch(e){t={error:e}}finally{try{M&&!M.done&&(n=P.return)&&n.call(P)}finally{if(t)throw t.error}}var E=null;if(!d.tree_isAncestorOf(A,S,!0)){for(var D=a(T._children),I=D.length-1;I>0;I--)if(x(k=D[I],e)){E=k;break}}var k,N,R,B=[];try{for(var L=i(T._children),F=L.next();!F.done;F=L.next())if(b(W=F.value,e)){if(u.Guard.isDocumentTypeNode(W))throw new l.HierarchyRequestError;B.push(W)}}catch(e){o={error:e}}finally{try{F&&!F.done&&(s=L.return)&&s.call(L)}finally{if(o)throw o.error}}if(d.tree_isAncestorOf(S,A,!0))N=A,R=C;else{for(var V=A;null!==V._parent&&!d.tree_isAncestorOf(S,V._parent);)V=V._parent;if(null===V._parent)throw Error("Parent node is null.");N=V._parent,R=1+d.tree_index(V)}if(u.Guard.isCharacterDataNode(O))(j=h.node_clone(A))._data=p.characterData_substringData(A,C,d.tree_nodeLength(A)-C),m.mutation_append(j,y),p.characterData_replaceData(A,C,d.tree_nodeLength(A)-C,"");else if(null!==O){var j=h.node_clone(O);m.mutation_append(j,y);var G=w(c.create_range([A,C],[O,d.tree_nodeLength(O)]));m.mutation_append(G,j)}try{for(var U=i(B),z=U.next();!z.done;z=U.next()){var W=z.value;m.mutation_append(W,y)}}catch(e){f={error:e}}finally{try{z&&!z.done&&(g=U.return)&&g.call(U)}finally{if(f)throw f.error}}return u.Guard.isCharacterDataNode(E)?((j=h.node_clone(S))._data=p.characterData_substringData(S,0,_),m.mutation_append(j,y),p.characterData_replaceData(S,0,_,"")):null!==E&&(j=h.node_clone(E),m.mutation_append(j,y),G=w(c.create_range([E,0],[S,_])),m.mutation_append(G,j)),e._start=[N,R],e._end=[N,R],y}t.range_collapsed=v,t.range_root=y,t.range_isContained=b,t.range_isPartiallyContained=x,t.range_setTheStart=function(e,t,n){if(u.Guard.isDocumentTypeNode(t))throw new l.InvalidNodeTypeError;if(n>d.tree_nodeLength(t))throw new l.IndexSizeError;var i=[t,n];y(e)===d.tree_rootNode(t)&&f.boundaryPoint_position(i,e._end)!==s.BoundaryPosition.After||(e._end=i),e._start=i},t.range_setTheEnd=function(e,t,n){if(u.Guard.isDocumentTypeNode(t))throw new l.InvalidNodeTypeError;if(n>d.tree_nodeLength(t))throw new l.IndexSizeError;var i=[t,n];y(e)===d.tree_rootNode(t)&&f.boundaryPoint_position(i,e._start)!==s.BoundaryPosition.Before||(e._start=i),e._end=i},t.range_select=function(e,t){var n=e._parent;if(null===n)throw new l.InvalidNodeTypeError;var i=d.tree_index(e);t._start=[n,i],t._end=[n,i+1]},t.range_extract=w,t.range_cloneTheContents=function e(t){var n,o,s,f,g,y,A,C=c.create_documentFragment(t._startNode._nodeDocument);if(v(t))return C;var S=t._startNode,_=t._startOffset,T=t._endNode,O=t._endOffset;S===T&&u.Guard.isCharacterDataNode(S)&&((F=h.node_clone(S))._data=p.characterData_substringData(S,_,O-_),m.mutation_append(F,C));for(var P=S;!d.tree_isAncestorOf(T,P,!0);){if(null===P._parent)throw Error("Parent node  is null.");P=P._parent}var M=null;if(!d.tree_isAncestorOf(T,S,!0))try{for(var E=i(P._children),D=E.next();!D.done;D=E.next())if(x(n=D.value,t)){M=n;break}}catch(e){o={error:e}}finally{try{D&&!D.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}var I=null;if(!d.tree_isAncestorOf(S,T,!0)){for(var k=a(P._children),N=k.length-1;N>0;N--)if(x(n=k[N],t)){I=n;break}}var R=[];try{for(var B=i(P._children),L=B.next();!L.done;L=B.next())if(b(U=L.value,t)){if(u.Guard.isDocumentTypeNode(U))throw new l.HierarchyRequestError;R.push(U)}}catch(e){f={error:e}}finally{try{L&&!L.done&&(g=B.return)&&g.call(B)}finally{if(f)throw f.error}}if(u.Guard.isCharacterDataNode(M))(F=h.node_clone(S))._data=p.characterData_substringData(S,_,d.tree_nodeLength(S)-_),m.mutation_append(F,C);else if(null!==M){var F=h.node_clone(M);m.mutation_append(F,C);var V=e(c.create_range([S,_],[M,d.tree_nodeLength(M)]));m.mutation_append(V,F)}try{for(var j=i(R),G=j.next();!G.done;G=j.next()){var U=G.value;F=h.node_clone(U),m.mutation_append(F,C)}}catch(e){y={error:e}}finally{try{G&&!G.done&&(A=j.return)&&A.call(j)}finally{if(y)throw y.error}}return u.Guard.isCharacterDataNode(I)?((F=h.node_clone(T))._data=p.characterData_substringData(T,0,O),m.mutation_append(F,C)):null!==I&&(F=h.node_clone(I),C.append(F),V=w(c.create_range([I,0],[T,O])),m.mutation_append(V,F)),C},t.range_insert=function(e,t){if(u.Guard.isProcessingInstructionNode(t._startNode)||u.Guard.isCommentNode(t._startNode)||u.Guard.isTextNode(t._startNode)&&null===t._startNode._parent||t._startNode===e)throw new l.HierarchyRequestError;var n,o,a,s=null;if(u.Guard.isTextNode(t._startNode))s=t._startNode;else{var c=0;try{for(var f=i(t._startNode._children),p=f.next();!p.done;p=f.next()){var h=p.value;if(c===t._startOffset){s=h;break}c++}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(null===s)a=t._startNode;else{if(null===s._parent)throw Error("Parent node is null.");a=s._parent}m.mutation_ensurePreInsertionValidity(e,a,s),u.Guard.isTextNode(t._startNode)&&(s=g.text_split(t._startNode,t._startOffset)),e===s&&(s=e._nextSibling),null!==e._parent&&m.mutation_remove(e,e._parent);var y=null===s?d.tree_nodeLength(a):d.tree_index(s);u.Guard.isDocumentFragmentNode(e)?y+=d.tree_nodeLength(e):y++,m.mutation_preInsert(e,a,s),v(t)&&(t._end=[a,y])},t.range_getContainedNodes=function(e){var t;return(t={})[Symbol.iterator]=function(){var t=e.commonAncestorContainer,n=d.tree_getFirstDescendantNode(t);return{next:function(){for(;n&&!b(n,e);)n=d.tree_getNextDescendantNode(t,n);if(null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=d.tree_getNextDescendantNode(t,n),i}}},t},t.range_getPartiallyContainedNodes=function(e){var t;return(t={})[Symbol.iterator]=function(){var t=e.commonAncestorContainer,n=d.tree_getFirstDescendantNode(t);return{next:function(){for(;n&&!x(n,e);)n=d.tree_getNextDescendantNode(t,n);if(null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=d.tree_getNextDescendantNode(t,n),i}}},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.selectors_scopeMatchASelectorsString=function(e,t){throw new i.NotSupportedError}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(105);t.treeWalker_traverseChildren=function(e,t){for(var n=t?e._current._firstChild:e._current._lastChild;null!==n;){var a=o.traversal_filter(e,n);if(a===i.FilterResult.Accept)return e._current=n,n;if(a===i.FilterResult.Skip){var s=t?n._firstChild:n._lastChild;if(null!==s){n=s;continue}}for(;null!==n;){var l=t?n._nextSibling:n._previousSibling;if(null!==l){n=l;break}var u=n._parent;if(null===u||u===e._root||u===e._current)return null;n=u}}return null},t.treeWalker_traverseSiblings=function(e,t){var n=e._current;if(n===e._root)return null;for(;;){for(var a=t?n._nextSibling:n._previousSibling;null!==a;){n=a;var s=o.traversal_filter(e,n);if(s===i.FilterResult.Accept)return e._current=n,n;a=t?n._firstChild:n._lastChild,s!==i.FilterResult.Reject&&null!==a||(a=t?n._nextSibling:n._previousSibling)}if(null===(n=n._parent)||n===e._root||o.traversal_filter(e,n)===i.FilterResult.Accept)return null}}},function(e,t,n){"use strict";n(89),n(74);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),l=n(50),u=n(3);t.XMLWriter=function(e){function t(t,n){var i=e.call(this,t)||this;return i._indentation={},i._lengthToLastNewline=0,i._writerOptions=a.applyDefaults(n,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),i}return o(t,e),t.prototype.serialize=function(e){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},e.nodeType!==s.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(e,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},t.prototype.declaration=function(e,t,n){this._beginLine(),this._refs.markup+='<?xml version="'+e+'"',void 0!==t&&(this._refs.markup+=' encoding="'+t+'"'),void 0!==n&&(this._refs.markup+=' standalone="'+(n?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},t.prototype.docType=function(e,t,n){this._beginLine(),this._refs.markup+=t&&n?"<!DOCTYPE "+e+' PUBLIC "'+t+'" "'+n+'">':t?"<!DOCTYPE "+e+' PUBLIC "'+t+'">':n?"<!DOCTYPE "+e+' SYSTEM "'+n+'">':"<!DOCTYPE "+e+">",this._endLine()},t.prototype.openTagBegin=function(e){this._beginLine(),this._refs.markup+="<"+e},t.prototype.openTagEnd=function(e,t,n){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!t&&!n){for(var i=!0,o=!0,a=this.currentNode.firstChild,s=0,l=0;a;){if(u.Guard.isExclusiveTextNode(a))l++;else{if(!u.Guard.isCDATASectionNode(a)){i=!1,o=!1;break}s++}""!==a.data&&(o=!1),a=a.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&i&&(s<=1&&0===l||0===s),this._refs.emptyNode=o}(n||t||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+e+">":this._refs.markup+=n?" />":t||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},t.prototype.closeTag=function(e){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+e+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},t.prototype.attribute=function(e,t){var n=e+'="'+t+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+n.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+n):this._refs.markup+=" "+n},t.prototype.text=function(e){""!==e&&(this._beginLine(),this._refs.markup+=e,this._endLine())},t.prototype.cdata=function(e){""!==e&&(this._beginLine(),this._refs.markup+="<![CDATA["+e+"]]>",this._endLine())},t.prototype.comment=function(e){this._beginLine(),this._refs.markup+="\x3c!--"+e+"--\x3e",this._endLine()},t.prototype.instruction=function(e,t){this._beginLine(),this._refs.markup+="<?"+(""===t?e:e+" "+t)+"?>",this._endLine()},t.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},t.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},t.prototype._indent=function(e){if(e<=0)return"";if(void 0!==this._indentation[e])return this._indentation[e];var t=this._writerOptions.indent.repeat(e);return this._indentation[e]=t,t},t}(l.BaseWriter)},function(e,t,n){"use strict";var i=n(47),o=n(35);e.exports="".repeat||function(e){var t=String(o(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){"use strict";n(31),n(32),n(33),n(19),n(178),n(20),n(22),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(67),l=n(1);t.JSONWriter=function(e){function t(t,n){var i=e.call(this,t)||this;return i._writerOptions=l.applyDefaults(n,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,group:!1,verbose:!1}),i}return o(t,e),t.prototype.serialize=function(e){var t=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),n=new s.ObjectWriter(this._builderOptions,t).serialize(e);return this._beginLine(this._writerOptions,0)+this._convertObject(n,this._writerOptions)},t.prototype._convertObject=function(e,t,n){var i,o,s=this;void 0===n&&(n=0);var u="",c=this._isLeafNode(e);if(l.isArray(e)){u+="[";var d=e.length,f=0;try{for(var p=a(e),h=p.next();!h.done;h=p.next()){var m=h.value;u+=this._endLine(t,n+1)+this._beginLine(t,n+1)+this._convertObject(m,t,n+1),f<d-1&&(u+=","),f++}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u+=this._endLine(t,n)+this._beginLine(t,n),u+="]"}else if(l.isObject(e)){u+="{";var g=l.objectLength(e),v=0;l.forEachObject(e,function(e,i){c&&t.prettyPrint?u+=" ":u+=s._endLine(t,n+1)+s._beginLine(t,n+1),u+=s._key(e),t.prettyPrint&&(u+=" "),u+=s._convertObject(i,t,n+1),v<g-1&&(u+=","),v++},this),c&&t.prettyPrint?u+=" ":u+=this._endLine(t,n)+this._beginLine(t,n),u+="}"}else u+=this._val(e);return u},t.prototype._beginLine=function(e,t){if(!e.prettyPrint)return"";var n=e.offset+t+1;return n>0?Array(n).join(e.indent):""},t.prototype._endLine=function(e,t){return e.prettyPrint?e.newline:""},t.prototype._key=function(e){return'"'+e+'":'},t.prototype._val=function(e){return JSON.stringify(e)},t.prototype._isLeafNode=function(e){return 1>=this._descendantCount(e)},t.prototype._descendantCount=function(e,t){var n=this;return void 0===t&&(t=0),l.isArray(e)?l.forEachArray(e,function(e){return t+=n._descendantCount(e,t)},this):l.isObject(e)?l.forEachObject(e,function(e,i){return t+=n._descendantCount(i,t)},this):t++,t},t}(n(50).BaseWriter)},function(e,t,n){"use strict";n(31),n(32),n(33),n(19),n(178),n(89),n(20),n(22),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=n(67),l=n(1);t.YAMLWriter=function(e){function t(t,n){var i=e.call(this,t)||this;if(i._writerOptions=l.applyDefaults(n,{wellFormed:!1,indent:"  ",newline:"\n",offset:0,group:!1,verbose:!1}),i._writerOptions.indent.length<2)throw Error("YAML indententation string must be at least two characters long.");if(i._writerOptions.offset<0)throw Error("YAML offset should be zero or a positive number.");return i}return o(t,e),t.prototype.serialize=function(e){var t=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),n=new s.ObjectWriter(this._builderOptions,t).serialize(e),i=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(n,this._writerOptions,0);return i.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(i=i.slice(0,-this._writerOptions.newline.length)),i},t.prototype._convertObject=function(e,t,n,i){var o,s,u=this;void 0===i&&(i=!1);var c="";if(l.isArray(e))try{for(var d=a(e),f=d.next();!f.done;f=d.next()){var p=f.value;c+=this._beginLine(t,n,!0),l.isObject(p)?l.isEmpty(p)?c+='""'+this._endLine(t):c+=this._convertObject(p,t,n,!0):c+=this._val(p)+this._endLine(t)}}catch(e){o={error:e}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}else l.forEachObject(e,function(e,o){i?(c+=u._key(e),i=!1):c+=u._beginLine(t,n)+u._key(e),l.isObject(o)?l.isEmpty(o)?c+=' ""'+u._endLine(t):c+=u._endLine(t)+u._convertObject(o,t,n+1):c+=" "+u._val(o)+u._endLine(t)},this);return c},t.prototype._beginLine=function(e,t,n){void 0===n&&(n=!1);var i=Array(e.offset+t+1).join(e.indent);return n?i.substr(0,i.length-2)+"-"+i.substr(-1,1):i},t.prototype._endLine=function(e){return e.newline},t.prototype._key=function(e){return'"'+e+'":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(n(50).BaseWriter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(110).dom.setFeatures(!0),t.DOMImplementation=n(110).DOMImplementation,t.DOMParser=n(271).DOMParser,t.XMLSerializer=n(274).XMLSerializer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(0);t.ChildNodeImpl=function(){function e(){}return e.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.Cast.asNode(this),a=n._parent;if(null!==a){for(var s=n._previousSibling,l=!0;l&&s;){l=!1;for(var u=0;u<e.length;u++)if(e[u]===s){s=s._previousSibling,l=!0;break}}var c=o.parentNode_convertNodesIntoANode(e,n._nodeDocument);s=null===s?a._firstChild:s._nextSibling,o.mutation_preInsert(c,a,s)}},e.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.Cast.asNode(this),a=n._parent;if(a){for(var s=n._nextSibling,l=!0;l&&s;){l=!1;for(var u=0;u<e.length;u++)if(e[u]===s){s=s._nextSibling,l=!0;break}}var c=o.parentNode_convertNodesIntoANode(e,n._nodeDocument);o.mutation_preInsert(c,a,s)}},e.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.Cast.asNode(this),a=n._parent;if(a){for(var s=n._nextSibling,l=!0;l&&s;){l=!1;for(var u=0;u<e.length;u++)if(e[u]===s){s=s._nextSibling,l=!0;break}}var c=o.parentNode_convertNodesIntoANode(e,n._nodeDocument);n._parent===a?o.mutation_replace(n,c,a):o.mutation_preInsert(c,a,s)}},e.prototype.remove=function(){var e=i.Cast.asNode(this),t=e._parent;t&&o.mutation_remove(e,t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentOrShadowRootImpl=function(){}},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(3),s=n(7);t.MutationObserverImpl=function(){function e(e){this._nodeList=[],this._recordQueue=[],this._callback=e;var t=o.dom.window;s.set.append(t._mutationObservers,this)}return e.prototype.observe=function(e,t){if(void 0===(t=t||{childList:!1,subtree:!1}).attributeOldValue&&void 0===t.attributeFilter||void 0!==t.attributes||(t.attributes=!0),void 0!==t.characterDataOldValue&&void 0===t.characterData&&(t.characterData=!0),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||void 0!==t.attributeFilter&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw TypeError();var n,o,l=!1,u=t,c=function(e){var t,n;if(e.observer===d){l=!0;try{for(var o=(t=void 0,i(d._nodeList)),c=o.next();!c.done;c=o.next()){var f=c.value;s.list.remove(f._registeredObserverList,function(t){return a.Guard.isTransientRegisteredObserver(t)&&t.source===e})}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e.options=u}},d=this;try{for(var f=i(e._registeredObserverList),p=f.next();!p.done;p=f.next())c(p.value)}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}l||(e._registeredObserverList.push({observer:this,options:t}),this._nodeList.push(e))},e.prototype.disconnect=function(){var e,t,n=this;try{for(var o=i(this._nodeList),a=o.next();!a.done;a=o.next()){var l=a.value;s.list.remove(l._registeredObserverList,function(e){return e.observer===n})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this._recordQueue=[]},e.prototype.takeRecords=function(){var e=this._recordQueue;return this._recordQueue=[],e},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.NonDocumentTypeChildNodeImpl=function(){function e(){}return Object.defineProperty(e.prototype,"previousElementSibling",{get:function(){for(var e=i.Cast.asNode(this)._previousSibling;e;){if(i.Guard.isElementNode(e))return e;e=e._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextElementSibling",{get:function(){for(var e=i.Cast.asNode(this)._nextSibling;e;){if(i.Guard.isElementNode(e))return e;e=e._nextSibling}return null},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(0);t.NonElementParentNodeImpl=function(){function e(){}return e.prototype.getElementById=function(e){for(var t=o.tree_getFirstDescendantNode(i.Cast.asNode(this),!1,!1,function(e){return i.Guard.isElementNode(e)});null!==t;){if(t._uniqueIdentifier===e)return t;t=o.tree_getNextDescendantNode(i.Cast.asNode(this),t,!1,!1,function(e){return i.Guard.isElementNode(e)})}return null},e}()},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(0);t.ParentNodeImpl=function(){function e(){}return Object.defineProperty(e.prototype,"children",{get:function(){return a.create_htmlCollection(o.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){for(var e=o.Cast.asNode(this)._firstChild;e;){if(o.Guard.isElementNode(e))return e;e=e._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){for(var e=o.Cast.asNode(this)._lastChild;e;){if(o.Guard.isElementNode(e))return e;e=e._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){var e,t,n=0;try{for(var a=i(o.Cast.asNode(this)._children),s=a.next();!s.done;s=a.next()){var l=s.value;o.Guard.isElementNode(l)&&n++}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),e.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.Cast.asNode(this),i=a.parentNode_convertNodesIntoANode(e,n._nodeDocument);a.mutation_preInsert(i,n,n._firstChild)},e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.Cast.asNode(this),i=a.parentNode_convertNodesIntoANode(e,n._nodeDocument);a.mutation_append(i,n)},e.prototype.querySelector=function(e){var t=o.Cast.asNode(this),n=a.selectors_scopeMatchASelectorsString(e,t);return 0===n.length?null:n[0]},e.prototype.querySelectorAll=function(e){var t=o.Cast.asNode(this),n=a.selectors_scopeMatchASelectorsString(e,t);return a.create_nodeListStatic(t,n)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.SlotableImpl=function(){function e(){}return Object.defineProperty(e.prototype,"_name",{get:function(){return this.__name||""},set:function(e){this.__name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(e){this.__assignedSlot=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assignedSlot",{get:function(){return i.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(102),s=n(9),l=n(3);t.StaticRangeImpl=function(e){function t(t){var n=e.call(this)||this;if(l.Guard.isDocumentTypeNode(t.startContainer)||l.Guard.isAttrNode(t.startContainer)||l.Guard.isDocumentTypeNode(t.endContainer)||l.Guard.isAttrNode(t.endContainer))throw new s.InvalidNodeTypeError;return n._start=[t.startContainer,t.startOffset],n._end=[t.endContainer,t.endOffset],n}return o(t,e),t}(a.AbstractRangeImpl)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMParser=n(272).DOMParserImpl},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(273);t.DOMParserImpl=function(){function e(){}return e.prototype.parseFromString=function(e,t){if("text/html"===t)throw Error("HTML parser not implemented.");try{return(n=(new o.XMLParserImpl).parse(e))._contentType=t,n}catch(e){var n,a="http://www.mozilla.org/newlayout/xml/parsererror.xml",s=(n=i.create_xmlDocument()).createElementNS(a,"parsererror"),l=n.createElementNS(a,"error");return l.setAttribute("message",e.message),s.appendChild(l),n.appendChild(s),n}},e}()},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(180),s=n(111),l=n(7),u=n(0),c=n(69);t.XMLParserImpl=function(){function e(){}return e.prototype.parse=function(e){for(var t,n,d,f,p=new a.XMLStringLexer(e,{skipWhitespaceOnlyText:!0}),h=u.create_document(),m=h,g=p.nextToken();g.type!==s.TokenType.EOF;){switch(g.type){case s.TokenType.Declaration:var v=g;if("1.0"!==v.version)throw Error("Invalid xml version: "+v.version);break;case s.TokenType.DocType:var y=g;if(!u.xml_isPubidChar(y.pubId))throw Error("DocType public identifier does not match PubidChar construct.");if(!u.xml_isLegalChar(y.sysId)||-1!==y.sysId.indexOf('"')&&-1!==y.sysId.indexOf("'"))throw Error("DocType system identifier contains invalid characters.");m.appendChild(h.implementation.createDocumentType(y.name,y.pubId,y.sysId));break;case s.TokenType.CDATA:var b=g;if(!u.xml_isLegalChar(b.data)||-1!==b.data.indexOf("]]>"))throw Error("CDATA contains invalid characters.");m.appendChild(h.createCDATASection(b.data));break;case s.TokenType.Comment:var x=g;if(!u.xml_isLegalChar(x.data)||-1!==x.data.indexOf("--")||x.data.endsWith("-"))throw Error("Comment data contains invalid characters.");m.appendChild(h.createComment(x.data));break;case s.TokenType.PI:var w=g;if(-1!==w.target.indexOf(":")||/^xml$/i.test(w.target))throw Error("Processing instruction target contains invalid characters.");if(!u.xml_isLegalChar(w.data)||-1!==w.data.indexOf("?>"))throw Error("Processing instruction data contains invalid characters.");m.appendChild(h.createProcessingInstruction(w.target,w.data));break;case s.TokenType.Text:var A=g;if(!u.xml_isLegalChar(A.data))throw Error("Text data contains invalid characters.");m.appendChild(h.createTextNode(this._decodeText(A.data)));break;case s.TokenType.Element:var C=g,S=i(u.namespace_extractQName(C.name),2),_=S[0],T=S[1];if(-1!==T.indexOf(":")||!u.xml_isName(T))throw Error("Node local name contains invalid characters.");if("xmlns"===_)throw Error("An element cannot have the 'xmlns' prefix.");var O=m.lookupNamespaceURI(_),P={};try{for(var M=(t=void 0,o(C.attributes)),E=M.next();!E.done;E=M.next()){var D=i(E.value,2),I=D[0],k=D[1];if("xmlns"===I)O=k;else{var N=i(u.namespace_extractQName(I),2),R=N[0],B=N[1];"xmlns"===R&&(B===_&&(O=k),P[B]=k)}}}catch(e){t={error:e}}finally{try{E&&!E.done&&(n=M.return)&&n.call(M)}finally{if(t)throw t.error}}var L=null!==O?h.createElementNS(O,C.name):h.createElement(C.name);m.appendChild(L);var F=new c.LocalNameSet;try{for(var V=(d=void 0,o(C.attributes)),j=V.next();!j.done;j=V.next()){var G=i(j.value,2),U=(I=G[0],k=G[1],i(u.namespace_extractQName(I),2)),z=(R=U[0],B=U[1],null);if("xmlns"===R||null===R&&"xmlns"===B?z=l.namespace.XMLNS:null!==(z=L.lookupNamespaceURI(R))&&L.isDefaultNamespace(z)?z=null:null===z&&null!==R&&(z=P[R]||null),F.has(z,B))throw Error("Element contains duplicate attributes.");if(F.set(z,B),z===l.namespace.XMLNS&&k===l.namespace.XMLNS)throw Error("XMLNS namespace is reserved.");if(-1!==B.indexOf(":")||!u.xml_isName(B))throw Error("Attribute local name contains invalid characters.");if("xmlns"===R&&""===k)throw Error("Empty XML namespace is not allowed.");null!==z?L.setAttributeNS(z,I,this._decodeAttributeValue(k)):L.setAttribute(I,this._decodeAttributeValue(k))}}catch(e){d={error:e}}finally{try{j&&!j.done&&(f=V.return)&&f.call(V)}finally{if(d)throw d.error}}C.selfClosing||(m=L);break;case s.TokenType.ClosingTag:if(g.name!==m.nodeName)throw Error("Closing tag name does not match opening tag name.");m._parent&&(m=m._parent)}g=p.nextToken()}return h},e.prototype._decodeText=function(e){return null==e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},e.prototype._decodeAttributeValue=function(e){return null==e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLSerializer=n(275).XMLSerializerImpl},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(69),s=n(95),l=n(9),u=n(7),c=n(0);t.XMLSerializerImpl=function(){function e(){}return e.prototype.serializeToString=function(e){return this._xmlSerialization(e,!1)},e.prototype._xmlSerialization=function(e,t){if(void 0===e._nodeDocument||e._nodeDocument._hasNamespaces){var n=new s.NamespacePrefixMap;n.set("xml",u.namespace.XML);try{return this._serializeNodeNS(e,null,n,{value:1},t)}catch(e){throw new l.InvalidStateError}}try{return this._serializeNode(e,t)}catch(e){throw new l.InvalidStateError}},e.prototype._serializeNodeNS=function(e,t,n,i,a){switch(e.nodeType){case o.NodeType.Element:return this._serializeElementNS(e,t,n,i,a);case o.NodeType.Document:return this._serializeDocumentNS(e,t,n,i,a);case o.NodeType.Comment:return this._serializeComment(e,a);case o.NodeType.Text:return this._serializeText(e,a);case o.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(e,t,n,i,a);case o.NodeType.DocumentType:return this._serializeDocumentType(e,a);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(e,a);case o.NodeType.CData:return this._serializeCData(e,a);default:throw Error("Unknown node type: "+e.nodeType)}},e.prototype._serializeNode=function(e,t){switch(e.nodeType){case o.NodeType.Element:return this._serializeElement(e,t);case o.NodeType.Document:return this._serializeDocument(e,t);case o.NodeType.Comment:return this._serializeComment(e,t);case o.NodeType.Text:return this._serializeText(e,t);case o.NodeType.DocumentFragment:return this._serializeDocumentFragment(e,t);case o.NodeType.DocumentType:return this._serializeDocumentType(e,t);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(e,t);case o.NodeType.CData:return this._serializeCData(e,t);default:throw Error("Unknown node type: "+e.nodeType)}},e.prototype._serializeElementNS=function(t,n,o,a,s){if(s&&(-1!==t.localName.indexOf(":")||!c.xml_isName(t.localName)))throw Error("Node local name contains invalid characters (well-formed required).");var l,d,f="<",p="",h=!1,m=!1,g=o.copy(),v={},y=this._recordNamespaceInformation(t,g,v),b=n,x=t.namespaceURI;if(b===x)null!==y&&(m=!0),f+=p=x===u.namespace.XML?"xml:"+t.localName:t.localName;else{var w=t.prefix,A=null;if(null===w&&x===y||(A=g.get(w,x)),"xmlns"===w){if(s)throw Error("An element cannot have the 'xmlns' prefix (well-formed required).");A=w}null!==A?(p=A+":"+t.localName,null!==y&&y!==u.namespace.XML&&(b=y||null),f+=p):null!==w?(w in v&&(w=this._generatePrefix(x,g,a)),g.set(w,x),f+=p+=w+":"+t.localName,f+=" xmlns:"+w+'="'+this._serializeAttributeValue(x,s)+'"',null!==y&&(b=y||null)):null===y||null!==y&&y!==x?(m=!0,b=x,f+=p+=t.localName,f+=' xmlns="'+this._serializeAttributeValue(x,s)+'"'):(b=x,f+=p+=t.localName)}f+=this._serializeAttributesNS(t,g,a,v,m,s);var C=x===u.namespace.HTML;if(C&&0===t.childNodes.length&&e._VoidElementNames.has(t.localName)?(f+=" /",h=!0):C||0!==t.childNodes.length||(f+="/",h=!0),f+=">",h)return f;if(C&&"template"===t.localName);else try{for(var S=i(t._children||t.childNodes),_=S.next();!_.done;_=S.next()){var T=_.value;f+=this._serializeNodeNS(T,b,g,a,s)}}catch(e){l={error:e}}finally{try{_&&!_.done&&(d=S.return)&&d.call(S)}finally{if(l)throw l.error}}return f+"</"+p+">"},e.prototype._serializeDocumentNS=function(e,t,n,o,a){if(a&&null===e.documentElement)throw Error("Missing document element (well-formed required).");var s,l,u="";try{for(var c=i(e._children||e.childNodes),d=c.next();!d.done;d=c.next()){var f=d.value;u+=this._serializeNodeNS(f,t,n,o,a)}}catch(e){s={error:e}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return u},e.prototype._serializeComment=function(e,t){if(t&&(!c.xml_isLegalChar(e.data)||-1!==e.data.indexOf("--")||e.data.endsWith("-")))throw Error("Comment data contains invalid characters (well-formed required).");return"\x3c!--"+e.data+"--\x3e"},e.prototype._serializeText=function(e,t){if(t&&!c.xml_isLegalChar(e.data))throw Error("Text data contains invalid characters (well-formed required).");for(var n="",i=0;i<e.data.length;i++){var o=e.data[i];n+="&"===o?"&amp;":"<"===o?"&lt;":">"===o?"&gt;":o}return n},e.prototype._serializeDocumentFragmentNS=function(e,t,n,o,a){var s,l,u="";try{for(var c=i(e._children||e.childNodes),d=c.next();!d.done;d=c.next()){var f=d.value;u+=this._serializeNodeNS(f,t,n,o,a)}}catch(e){s={error:e}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return u},e.prototype._serializeDocumentType=function(e,t){if(t&&!c.xml_isPubidChar(e.publicId))throw Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(t&&(!c.xml_isLegalChar(e.systemId)||-1!==e.systemId.indexOf('"')&&-1!==e.systemId.indexOf("'")))throw Error("DocType system identifier contains invalid characters (well-formed required).");return e.publicId&&e.systemId?"<!DOCTYPE "+e.name+' PUBLIC "'+e.publicId+'" "'+e.systemId+'">':e.publicId?"<!DOCTYPE "+e.name+' PUBLIC "'+e.publicId+'">':e.systemId?"<!DOCTYPE "+e.name+' SYSTEM "'+e.systemId+'">':"<!DOCTYPE "+e.name+">"},e.prototype._serializeProcessingInstruction=function(e,t){if(t&&(-1!==e.target.indexOf(":")||/^xml$/i.test(e.target)))throw Error("Processing instruction target contains invalid characters (well-formed required).");if(t&&(!c.xml_isLegalChar(e.data)||-1!==e.data.indexOf("?>")))throw Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(""===e.data?e.target:e.target+" "+e.data)+"?>"},e.prototype._serializeCData=function(e,t){if(t&&-1!==e.data.indexOf("]]>"))throw Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+e.data+"]]>"},e.prototype._serializeAttributesNS=function(e,t,n,o,s,l){var d,f,p="",h=l?new a.LocalNameSet:void 0;try{for(var m=i(e.attributes),g=m.next();!g.done;g=m.next()){var v=g.value;if(s||l||null!==v.namespaceURI){if(l&&h&&h.has(v.namespaceURI,v.localName))throw Error("Element contains duplicate attributes (well-formed required).");l&&h&&h.set(v.namespaceURI,v.localName);var y=v.namespaceURI,b=null;if(null!==y)if(b=t.get(v.prefix,y),y===u.namespace.XMLNS){if(v.value===u.namespace.XML||null===v.prefix&&s||null!==v.prefix&&(!(v.localName in o)||o[v.localName]!==v.value)&&t.has(v.localName,v.value))continue;if(l&&v.value===u.namespace.XMLNS)throw Error("XMLNS namespace is reserved (well-formed required).");if(l&&""===v.value)throw Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");"xmlns"===v.prefix&&(b="xmlns")}else null===b&&(p+=" xmlns:"+(b=null===v.prefix||t.hasPrefix(v.prefix)&&!t.has(v.prefix,y)?this._generatePrefix(y,t,n):v.prefix)+'="'+this._serializeAttributeValue(y,l)+'"');if(p+=" ",null!==b&&(p+=b+":"),l&&(-1!==v.localName.indexOf(":")||!c.xml_isName(v.localName)||"xmlns"===v.localName&&null===y))throw Error("Attribute local name contains invalid characters (well-formed required).");p+=v.localName+'="'+this._serializeAttributeValue(v.value,l)+'"'}else p+=" "+v.localName+'="'+this._serializeAttributeValue(v.value,l)+'"'}}catch(e){d={error:e}}finally{try{g&&!g.done&&(f=m.return)&&f.call(m)}finally{if(d)throw d.error}}return p},e.prototype._recordNamespaceInformation=function(e,t,n){var o,a,s=null;try{for(var l=i(e.attributes),c=l.next();!c.done;c=l.next()){var d=c.value,f=d.namespaceURI,p=d.prefix;if(f===u.namespace.XMLNS){if(null===p){s=d.value;continue}var h=d.localName,m=d.value;if(m===u.namespace.XML||(""===m&&(m=null),t.has(h,m)))continue;t.set(h,m),n[h]=m||""}}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s},e.prototype._generatePrefix=function(e,t,n){var i="ns"+n.value;return n.value++,t.set(i,e),i},e.prototype._serializeAttributeValue=function(e,t){if(t&&null!==e&&!c.xml_isLegalChar(e))throw Error("Invalid characters in attribute value.");if(null===e)return"";for(var n="",i=0;i<e.length;i++){var o=e[i];n+='"'===o?"&quot;":"&"===o?"&amp;":"<"===o?"&lt;":">"===o?"&gt;":o}return n},e.prototype._serializeElement=function(e,t){if(t&&(-1!==e.localName.indexOf(":")||!c.xml_isName(e.localName)))throw Error("Node local name contains invalid characters (well-formed required).");var n,o,a=!1,s=e.localName,l="<"+s;if(l+=this._serializeAttributes(e,t),0===e._children.size&&(l+="/",a=!0),l+=">",a)return l;try{for(var u=i(e._children),d=u.next();!d.done;d=u.next()){var f=d.value;l+=this._serializeNode(f,t)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return l+"</"+s+">"},e.prototype._serializeDocument=function(e,t){if(t&&null===e.documentElement)throw Error("Missing document element (well-formed required).");var n,o,a="";try{for(var s=i(e._children),l=s.next();!l.done;l=s.next()){var u=l.value;a+=this._serializeNode(u,t)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a},e.prototype._serializeDocumentFragment=function(e,t){var n,o,a="";try{for(var s=i(e._children),l=s.next();!l.done;l=s.next()){var u=l.value;a+=this._serializeNode(u,t)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a},e.prototype._serializeAttributes=function(e,t){var n,o,a="",s=t?{}:void 0;try{for(var l=i(e.attributes),u=l.next();!u.done;u=l.next()){var d=u.value;if(t&&s&&d.localName in s)throw Error("Element contains duplicate attributes (well-formed required).");if(t&&s&&(s[d.localName]=!0),t&&(-1!==d.localName.indexOf(":")||!c.xml_isName(d.localName)))throw Error("Attribute local name contains invalid characters (well-formed required).");a+=" "+d.localName+'="'+this._serializeAttributeValue(d.value,t)+'"'}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return a},e._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLReader=n(277).XMLReader,t.ObjectReader=n(112).ObjectReader,t.JSONReader=n(280).JSONReader,t.YAMLReader=n(281).YAMLReader},function(e,t,n){"use strict";n(31),n(32),n(33),n(19),n(65),n(20),n(22),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var l=n(180),u=n(111),c=n(7),d=n(0);t.XMLReader=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._parse=function(e,t){for(var n,i,o,f,p=new l.XMLStringLexer(t,{skipWhitespaceOnlyText:!0}),h=e,m=e,g=p.nextToken();g.type!==u.TokenType.EOF;){switch(g.type){case u.TokenType.Declaration:var v=g,y=this.sanitize(v.version);if("1.0"!==y)throw Error("Invalid xml version: "+y);var b={version:y};v.encoding&&(b.encoding=this.sanitize(v.encoding)),v.standalone&&(b.standalone="yes"===this.sanitize(v.standalone)),m.set(b);break;case u.TokenType.DocType:var x=g;m=this.docType(m,this.sanitize(x.name),this.sanitize(x.pubId),this.sanitize(x.sysId))||m;break;case u.TokenType.CDATA:var w=g;m=this.cdata(m,this.sanitize(w.data))||m;break;case u.TokenType.Comment:var A=g;m=this.comment(m,this.sanitize(A.data))||m;break;case u.TokenType.PI:var C=g;m=this.instruction(m,this.sanitize(C.target),this.sanitize(C.data))||m;break;case u.TokenType.Text:var S=g;m=this.text(m,this._decodeText(this.sanitize(S.data)))||m;break;case u.TokenType.Element:var _=g,T=this.sanitize(_.name),O=a(d.namespace_extractQName(T),1)[0],P=m.node.lookupNamespaceURI(O),M={};try{for(var E=(n=void 0,s(_.attributes)),D=E.next();!D.done;D=E.next()){var I=a(D.value,2),k=I[0],N=I[1];if(k=this.sanitize(k),N=this.sanitize(N),"xmlns"===k)P=N;else{var R=a(d.namespace_extractQName(k),2),B=R[0],L=R[1];"xmlns"===B&&(L===O&&(P=N),M[L]=N)}}}catch(e){n={error:e}}finally{try{D&&!D.done&&(i=E.return)&&i.call(E)}finally{if(n)throw n.error}}var F=null!==P?this.element(m,P,T):this.element(m,void 0,T);if(void 0===F)break;m.node===e.node&&(h=F);try{for(var V=(o=void 0,s(_.attributes)),j=V.next();!j.done;j=V.next()){var G=a(j.value,2);k=G[0],N=G[1],k=this.sanitize(k),N=this.sanitize(N);var U=a(d.namespace_extractQName(k),2),z=(B=U[0],L=U[1],null);"xmlns"===B||null===B&&"xmlns"===L?z=c.namespace.XMLNS:null!==(z=F.node.lookupNamespaceURI(B))&&F.node.isDefaultNamespace(z)?z=null:null===z&&null!==B&&(z=M[B]||null),null!==z?this.attribute(F,z,k,this._decodeAttributeValue(N)):this.attribute(F,void 0,k,this._decodeAttributeValue(N))}}catch(e){o={error:e}}finally{try{j&&!j.done&&(f=V.return)&&f.call(V)}finally{if(o)throw o.error}}_.selfClosing||(m=F);break;case u.TokenType.ClosingTag:m.node.parentNode&&(m=m.up())}g=p.nextToken()}return h},t}(n(75).BaseReader)},function(e,t,n){var i=n(4),o=n(279);i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){"use strict";var i=n(16),o=n(8),a=n(61),s=n(85),l=n(79),u=n(27),c=n(41),d=Object.assign,f=Object.defineProperty;e.exports=!d||o(function(){if(i&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=d({},e)[n]||"abcdefghijklmnopqrst"!=a(d({},t)).join("")})?function(e,t){for(var n=u(e),o=arguments.length,d=1,f=s.f,p=l.f;o>d;)for(var h,m=c(arguments[d++]),g=f?a(m).concat(f(m)):a(m),v=g.length,y=0;v>y;)h=g[y++],i&&!p.call(m,h)||(n[h]=m[h]);return n}:d},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(112);t.JSONReader=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._parse=function(e,t){return new a.ObjectReader(this._builderOptions).parse(e,JSON.parse(t))},t}(n(75).BaseReader)},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(112),s=n(75),l=n(282);t.YAMLReader=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._parse=function(e,t){var n=l.safeLoad(t);if(void 0===n)throw Error("Unable to parse YAML document.");return new a.ObjectReader(this._builderOptions).parse(e,n)},t}(s.BaseReader)},function(e,t,n){"use strict";e.exports=n(283)},function(e,t,n){"use strict";var i=n(284),o=n(303);function a(e){return function(){throw Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=n(10),e.exports.Schema=n(39),e.exports.FAILSAFE_SCHEMA=n(113),e.exports.JSON_SCHEMA=n(182),e.exports.CORE_SCHEMA=n(181),e.exports.DEFAULT_SAFE_SCHEMA=n(54),e.exports.DEFAULT_FULL_SCHEMA=n(76),e.exports.load=i.load,e.exports.loadAll=i.loadAll,e.exports.safeLoad=i.safeLoad,e.exports.safeLoadAll=i.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=n(53),e.exports.MINIMAL_SCHEMA=n(113),e.exports.SAFE_SCHEMA=n(54),e.exports.DEFAULT_SCHEMA=n(76),e.exports.scan=a("scan"),e.exports.parse=a("parse"),e.exports.compose=a("compose"),e.exports.addConstructor=a("addConstructor")},function(e,t,n){"use strict";var i=n(38),o=n(53),a=n(285),s=n(54),l=n(76),u=Object.prototype.hasOwnProperty,c=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/[\x85\u2028\u2029]/,f=/[,\[\]\{\}]/,p=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(e){return Object.prototype.toString.call(e)}function g(e){return 10===e||13===e}function v(e){return 9===e||32===e}function y(e){return 9===e||32===e||10===e||13===e}function b(e){return 44===e||91===e||93===e||123===e||125===e}function x(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"	":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}for(var w=Array(256),A=Array(256),C=0;C<256;C++)w[C]=+!!x(C),A[C]=x(C);function S(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||l,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function _(e,t){return new o(t,new a(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function T(e,t){throw _(e,t)}function O(e,t){e.onWarning&&e.onWarning.call(null,_(e,t))}var P={YAML:function(e,t,n){var i,o,a;null!==e.version&&T(e,"duplication of %YAML directive"),1!==n.length&&T(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&T(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),1!==o&&T(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&O(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,o;2!==n.length&&T(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],p.test(i)||T(e,"ill-formed tag handle (first argument) of the TAG directive"),u.call(e.tagMap,i)&&T(e,'there is a previously declared suffix for "'+i+'" tag handle'),h.test(o)||T(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[i]=o}};function M(e,t,n,i){var o,a,s,l;if(t<n){if(l=e.input.slice(t,n),i)for(o=0,a=l.length;o<a;o+=1)9===(s=l.charCodeAt(o))||32<=s&&s<=1114111||T(e,"expected valid JSON character");else c.test(l)&&T(e,"the stream contains non-printable characters");e.result+=l}}function E(e,t,n,o){var a,s,l,c;for(i.isObject(n)||T(e,"cannot merge mappings; the provided source object is unacceptable"),l=0,c=(a=Object.keys(n)).length;l<c;l+=1)s=a[l],u.call(t,s)||(t[s]=n[s],o[s]=!0)}function D(e,t,n,i,o,a,s,l){var c,d;if(Array.isArray(o))for(c=0,d=(o=Array.prototype.slice.call(o)).length;c<d;c+=1)Array.isArray(o[c])&&T(e,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===m(o[c])&&(o[c]="[object Object]");if("object"==typeof o&&"[object Object]"===m(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(a))for(c=0,d=a.length;c<d;c+=1)E(e,t,a[c],n);else E(e,t,a,n);else e.json||u.call(n,o)||!u.call(t,o)||(e.line=s||e.line,e.position=l||e.position,T(e,"duplicated mapping key")),t[o]=a,delete n[o];return t}function I(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):T(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function k(e,t,n){for(var i=0,o=e.input.charCodeAt(e.position);0!==o;){for(;v(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do o=e.input.charCodeAt(++e.position);while(10!==o&&13!==o&&0!==o);if(!g(o))break;for(I(e),o=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return -1!==n&&0!==i&&e.lineIndent<n&&O(e,"deficient indentation"),i}function N(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!y(t)))}function R(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function B(e,t){var n,i,o=e.tag,a=e.anchor,s=[],l=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),i=e.input.charCodeAt(e.position);0!==i&&45===i&&y(e.input.charCodeAt(e.position+1));)if(l=!0,e.position++,k(e,!0,-1)&&e.lineIndent<=t)s.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,L(e,t,3,!1,!0),s.push(e.result),k(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)T(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!l&&(e.tag=o,e.anchor=a,e.kind="sequence",e.result=s,!0)}function L(e,t,n,o,a){var s,l,c,d,m,x,C,S,_=1,O=!1,P=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=l=c=4===n||3===n,o&&k(e,!0,-1)&&(O=!0,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)),1===_)for(;function(e){var t,n,i,o,a=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&T(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(a=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do o=e.input.charCodeAt(++e.position);while(0!==o&&62!==o);e.position<e.length?(i=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):T(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!y(o);)33===o&&(s?T(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),p.test(n)||T(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),f.test(i)&&T(e,"tag suffix cannot contain flow indicator characters")}return i&&!h.test(i)&&T(e,"tag name cannot contain such characters: "+i),a?e.tag=i:u.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:T(e,'undeclared tag handle "'+n+'"'),!0}(e)||function(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&T(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!y(n)&&!b(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&T(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}(e);)k(e,!0,-1)?(O=!0,c=s,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)):c=!1;if(c&&(c=O||a),1!==_&&4!==n||(C=1===n||2===n?t:t+1,S=e.position-e.lineStart,1===_?c&&(B(e,S)||function(e,t,n){var i,o,a,s,l,u=e.tag,c=e.anchor,d={},f={},p=null,h=null,m=null,g=!1,b=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(i=e.input.charCodeAt(e.position+1),a=e.line,s=e.position,(63===l||58===l)&&y(i))63===l?(g&&(D(e,d,f,p,h,null),p=h=m=null),b=!0,g=!0,o=!0):g?(g=!1,o=!0):T(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=i;else{if(!L(e,n,2,!1,!0))break;if(e.line===a){for(l=e.input.charCodeAt(e.position);v(l);)l=e.input.charCodeAt(++e.position);if(58===l)y(l=e.input.charCodeAt(++e.position))||T(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(D(e,d,f,p,h,null),p=h=m=null),b=!0,g=!1,o=!1,p=e.tag,h=e.result;else{if(!b)return e.tag=u,e.anchor=c,!0;T(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=c,!0;T(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}if((e.line===a||e.lineIndent>t)&&(L(e,t,4,!0,o)&&(g?h=e.result:m=e.result),g||(D(e,d,f,p,h,m,a,s),p=h=m=null),k(e,!0,-1),l=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==l)T(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&D(e,d,f,p,h,null),b&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=d),b}(e,S,C))||function(e,t){var n,i,o,a,s,l,u,c,d,f,p=!0,h=e.tag,m=e.anchor,g={};if(91===(f=e.input.charCodeAt(e.position)))o=93,l=!1,i=[];else{if(123!==f)return!1;o=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),f=e.input.charCodeAt(++e.position);0!==f;){if(k(e,!0,t),(f=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=m,e.kind=l?"mapping":"sequence",e.result=i,!0;p||T(e,"missed comma between flow collection entries"),d=null,a=s=!1,63===f&&y(e.input.charCodeAt(e.position+1))&&(a=s=!0,e.position++,k(e,!0,t)),n=e.line,L(e,t,1,!1,!0),c=e.tag,u=e.result,k(e,!0,t),f=e.input.charCodeAt(e.position),(s||e.line===n)&&58===f&&(a=!0,f=e.input.charCodeAt(++e.position),k(e,!0,t),L(e,t,1,!1,!0),d=e.result),l?D(e,i,g,c,u,d):a?i.push(D(e,null,g,c,u,d)):i.push(u),k(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}T(e,"unexpected end of the stream within a flow collection")}(e,C)?P=!0:(l&&function(e,t){var n,o,a,s,l,u=1,c=!1,d=!1,f=t,p=0,h=!1;if(124===(s=e.input.charCodeAt(e.position)))o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)1===u?u=43===s?3:2:T(e,"repeat of a chomping mode identifier");else{if(!((a=48<=(l=s)&&l<=57?l-48:-1)>=0))break;0===a?T(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?T(e,"repeat of an indentation width identifier"):(f=t+a-1,d=!0)}if(v(s)){do s=e.input.charCodeAt(++e.position);while(v(s));if(35===s)do s=e.input.charCodeAt(++e.position);while(!g(s)&&0!==s)}for(;0!==s;){for(I(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!d||e.lineIndent<f)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>f&&(f=e.lineIndent),g(s))p++;else{if(e.lineIndent<f){3===u?e.result+=i.repeat("\n",c?1+p:p):1===u&&c&&(e.result+="\n");break}for(o?v(s)?(h=!0,e.result+=i.repeat("\n",c?1+p:p)):h?(h=!1,e.result+=i.repeat("\n",p+1)):0===p?c&&(e.result+=" "):e.result+=i.repeat("\n",p):e.result+=i.repeat("\n",c?1+p:p),c=!0,d=!0,p=0,n=e.position;!g(s)&&0!==s;)s=e.input.charCodeAt(++e.position);M(e,n,e.position,!1)}}return!0}(e,C)||function(e,t){var n,i,o;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(M(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,o=e.position}else g(n)?(M(e,i,o,!0),R(e,k(e,!1,t)),i=o=e.position):e.position===e.lineStart&&N(e)?T(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);T(e,"unexpected end of the stream within a single quoted scalar")}(e,C)||function(e,t){var n,i,o,a,s,l,u,c;if(34!==(l=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(l=e.input.charCodeAt(e.position));){if(34===l)return M(e,n,e.position,!0),e.position++,!0;if(92===l){if(M(e,n,e.position,!0),g(l=e.input.charCodeAt(++e.position)))k(e,!1,t);else if(l<256&&w[l])e.result+=A[l],e.position++;else if((s=120===(u=l)?2:117===u?4:8*(85===u))>0){for(o=s,a=0;o>0;o--)(s=function(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}(l=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+s:T(e,"expected hexadecimal character");e.result+=(c=a)<=65535?String.fromCharCode(c):String.fromCharCode(55296+(c-65536>>10),56320+(c-65536&1023)),e.position++}else T(e,"unknown escape sequence");n=i=e.position}else g(l)?(M(e,n,i,!0),R(e,k(e,!1,t)),n=i=e.position):e.position===e.lineStart&&N(e)?T(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}T(e,"unexpected end of the stream within a double quoted scalar")}(e,C)?P=!0:!function(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!y(i)&&!b(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&T(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||T(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],k(e,!0,-1),!0}(e)?function(e,t,n){var i,o,a,s,l,u,c,d,f=e.kind,p=e.result;if(y(d=e.input.charCodeAt(e.position))||b(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d||(63===d||45===d)&&(y(i=e.input.charCodeAt(e.position+1))||n&&b(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;0!==d;){if(58===d){if(y(i=e.input.charCodeAt(e.position+1))||n&&b(i))break}else if(35===d){if(y(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&N(e)||n&&b(d))break;if(g(d)){if(l=e.line,u=e.lineStart,c=e.lineIndent,k(e,!1,-1),e.lineIndent>=t){s=!0,d=e.input.charCodeAt(e.position);continue}e.position=a,e.line=l,e.lineStart=u,e.lineIndent=c;break}}s&&(M(e,o,a,!1),R(e,e.line-l),o=a=e.position,s=!1),v(d)||(a=e.position+1),d=e.input.charCodeAt(++e.position)}return M(e,o,a,!1),!!e.result||(e.kind=f,e.result=p,!1)}(e,C,1===n)&&(P=!0,null===e.tag&&(e.tag="?")):(P=!0,null===e.tag&&null===e.anchor||T(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===_&&(P=c&&B(e,S))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&T(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,m=e.implicitTypes.length;d<m;d+=1)if((x=e.implicitTypes[d]).resolve(e.result)){e.result=x.construct(e.result),e.tag=x.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else u.call(e.typeMap[e.kind||"fallback"],e.tag)?(x=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&x.kind!==e.kind&&T(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+x.kind+'", not "'+e.kind+'"'),x.resolve(e.result)?(e.result=x.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):T(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):T(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||P}function F(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new S(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,T(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)!function(e){var t,n,i,o,a=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(k(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&T(e,"directive name must not be less than one character in length");0!==o;){for(;v(o);)o=e.input.charCodeAt(++e.position);if(35===o){do o=e.input.charCodeAt(++e.position);while(0!==o&&!g(o));break}if(g(o))break;for(t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==o&&I(e),u.call(P,n)?P[n](e,n,i):O(e,'unknown document directive "'+n+'"')}k(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,k(e,!0,-1)):s&&T(e,"directives end mark is expected"),L(e,e.lineIndent-1,4,!1,!0),k(e,!0,-1),e.checkLineBreaks&&d.test(e.input.slice(a,e.position))&&O(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&N(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,k(e,!0,-1)):e.position<e.length-1&&T(e,"end of the stream or a document separator is expected")}(n);return n.documents}function V(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=F(e,n);if("function"!=typeof t)return i;for(var o=0,a=i.length;o<a;o+=1)t(i[o])}function j(e,t){var n=F(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new o("expected a single document in the stream, but found more")}}e.exports.loadAll=V,e.exports.load=j,e.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),V(e,t,i.extend({schema:s},n))},e.exports.safeLoad=function(e,t){return j(e,i.extend({schema:s},t))}},function(e,t,n){"use strict";var i=n(38);function o(e,t,n,i,o){this.name=e,this.buffer=t,this.position=n,this.line=i,this.column=o}o.prototype.getSnippet=function(e,t){var n,o,a,s,l;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",o=this.position;o>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(o-1));)if(o-=1,this.position-o>t/2-1){n=" ... ",o+=5;break}for(a="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){a=" ... ",s-=5;break}return l=this.buffer.slice(o,s),i.repeat(" ",e)+n+l+a+"\n"+i.repeat(" ",e+this.position-o+n.length)+"^"},o.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},e.exports=o},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var i=n(38);e.exports=new(n(10))("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i,o,a=e.length,s=0,l=!1;if(!a)return!1;if("-"!==(i=e[s])&&"+"!==i||(i=e[++s]),"0"===i){if(s+1===a)return!0;if("b"===(i=e[++s])){for(s++;s<a;s++)if("_"!==(i=e[s])){if("0"!==i&&"1"!==i)return!1;l=!0}return l&&"_"!==i}if("x"===i){for(s++;s<a;s++)if("_"!==(i=e[s])){if(!(48<=(o=e.charCodeAt(s))&&o<=57||65<=o&&o<=70||97<=o&&o<=102))return!1;l=!0}return l&&"_"!==i}for(;s<a;s++)if("_"!==(i=e[s])){if(!(48<=(t=e.charCodeAt(s))&&t<=55))return!1;l=!0}return l&&"_"!==i}if("_"===i)return!1;for(;s<a;s++)if("_"!==(i=e[s])){if(":"===i)break;if(!(48<=(n=e.charCodeAt(s))&&n<=57))return!1;l=!0}return!(!l||"_"===i)&&(":"!==i||/^(:[0-5]?[0-9])+$/.test(e.slice(s)))},construct:function(e){var t,n,i=e,o=1,a=[];return -1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(t=i[0])&&"+"!==t||("-"===t&&(o=-1),t=(i=i.slice(1))[0]),"0"===i?0:"0"===t?"b"===i[1]?o*parseInt(i.slice(2),2):"x"===i[1]?o*parseInt(i,16):o*parseInt(i,8):-1!==i.indexOf(":")?(i.split(":").forEach(function(e){a.unshift(parseInt(e,10))}),i=0,n=1,a.forEach(function(e){i+=e*n,n*=60}),o*i):o*parseInt(i,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!i.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,n){"use strict";var i=n(38),o=n(10),a=RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),s=/^[-+]?[0-9]+e/;e.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!a.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,i,o;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?1/0:-1/0:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){o.unshift(parseFloat(e,10))}),t=0,i=1,o.forEach(function(e){t+=e*i,i*=60}),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||i.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(1/0===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(-1/0===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(e))return"-0.0";return n=e.toString(10),s.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var i=n(10),o=RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),a=RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==o.exec(e)||null!==a.exec(e))},construct:function(e){var t,n,i,s,l,u,c,d,f=0,p=null;if(null===(t=o.exec(e))&&(t=a.exec(e)),null===t)throw Error("Date resolve error");if(n=+t[1],i=t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(n,i,s));if(l=+t[4],u=+t[5],c=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f*=1}return t[9]&&(p=6e4*(60*t[10]+ +(t[11]||0)),"-"===t[9]&&(p=-p)),d=new Date(Date.UTC(n,i,s,l,u,c,f)),p&&d.setTime(d.getTime()-p),d},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,n){"use strict";try{i=n(145).Buffer}catch(e){}var i,o=n(10),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=0,o=e.length;for(n=0;n<o;n++)if(!((t=a.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0},construct:function(e){var t,n,o=e.replace(/[\r\n=]/g,""),s=o.length,l=0,u=[];for(t=0;t<s;t++)t%4==0&&t&&(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)),l=l<<6|a.indexOf(o.charAt(t));return 0==(n=s%4*6)?(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)):18===n?(u.push(l>>10&255),u.push(l>>2&255)):12===n&&u.push(l>>4&255),i?i.from?i.from(u):new i(u):u},predicate:function(e){return i&&i.isBuffer(e)},represent:function(e){var t,n,i="",o=0,s=e.length;for(t=0;t<s;t++)t%3==0&&t&&(i+=a[o>>18&63],i+=a[o>>12&63],i+=a[o>>6&63],i+=a[63&o]),o=(o<<8)+e[t];return 0==(n=s%3)?(i+=a[o>>18&63],i+=a[o>>12&63],i+=a[o>>6&63],i+=a[63&o]):2===n?(i+=a[o>>10&63],i+=a[o>>4&63],i+=a[o<<2&63],i+=a[64]):1===n&&(i+=a[o>>2&63],i+=a[o<<4&63],i+=a[64],i+=a[64]),i}})},function(e,t,n){"use strict";var i=n(10),o=Object.prototype.hasOwnProperty,a=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,s,l,u=[];for(t=0,n=e.length;t<n;t+=1){if(i=e[t],l=!1,"[object Object]"!==a.call(i))return!1;for(s in i)if(o.call(i,s)){if(l)return!1;l=!0}if(!l||-1!==u.indexOf(s))return!1;u.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var i=n(10),o=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){var t,n,i,a,s;if(null===e)return!0;for(s=Array(e.length),t=0,n=e.length;t<n;t+=1){if(i=e[t],"[object Object]"!==o.call(i)||1!==(a=Object.keys(i)).length)return!1;s[t]=[a[0],i[a[0]]]}return!0},construct:function(e){var t,n,i,o,a;if(null===e)return[];for(a=Array(e.length),t=0,n=e.length;t<n;t+=1)o=Object.keys(i=e[t]),a[t]=[o[0],i[o[0]]];return a}})},function(e,t,n){"use strict";var i=n(10),o=Object.prototype.hasOwnProperty;e.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){var t;if(null===e)return!0;for(t in e)if(o.call(e,t)&&null!==e[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,n){"use strict";e.exports=new(n(10))("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e||0===e.length)return!1;var t=/\/([gim]*)$/.exec(e),n="";return("/"!==e[0]||(t&&(n=t[1]),!(n.length>3)&&"/"===e[e.length-n.length-1]))&&!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),i="";return"/"===t[0]&&(n&&(i=n[1]),t=t.slice(1,t.length-i.length-1)),new RegExp(t,i)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,n){"use strict";var i;try{i=n(302)}catch(e){"u">typeof window&&(i=window.esprima)}e.exports=new(n(10))("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t=i.parse("("+e+")",{range:!0});return"Program"===t.type&&1===t.body.length&&"ExpressionStatement"===t.body[0].type&&("ArrowFunctionExpression"===t.body[0].expression.type||"FunctionExpression"===t.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,n="("+e+")",o=i.parse(n,{range:!0}),a=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw Error("Failed to resolve function");return o.body[0].expression.params.forEach(function(e){a.push(e.name)}),t=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?Function(a,n.slice(t[0]+1,t[1]-1)):Function(a,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,n){e.exports=function(){var e=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(3),a=n(8),s=n(15);function l(e,t,n){var s=null,l=function(e,t){n&&n(e,t),s&&s.visit(e,t)},u="function"==typeof n?l:null,c=!1;if(t){c="boolean"==typeof t.comment&&t.comment;var d="boolean"==typeof t.attachComment&&t.attachComment;(c||d)&&((s=new i.CommentHandler).attach=d,t.comment=!0,u=l)}var f,p=!1;t&&"string"==typeof t.sourceType&&(p="module"===t.sourceType),f=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,u):new a.Parser(e,t,u);var h=p?f.parseModule():f.parseScript();return c&&s&&(h.comments=s.comments),f.config.tokens&&(h.tokens=f.tokens),f.config.tolerant&&(h.errors=f.errorHandler.errors),h}t.parse=l,t.parseModule=function(e,t,n){var i=t||{};return i.sourceType="module",l(e,i,n)},t.parseScript=function(e,t,n){var i=t||{};return i.sourceType="script",l(e,i,n)},t.tokenize=function(e,t,n){var i,o=new s.Tokenizer(e,t);i=[];try{for(;;){var a=o.getNextToken();if(!a)break;n&&(a=n(a)),i.push(a)}}catch(e){o.errorHandler.tolerate(e)}return o.errorHandler.tolerant&&(i.errors=o.errors()),i},t.Syntax=n(2).Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.CommentHandler=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===i.Syntax.BlockStatement&&0===e.body.length){for(var n=[],o=this.leading.length-1;o>=0;--o){var a=this.leading[o];t.end.offset>=a.start&&(n.unshift(a.comment),this.leading.splice(o,1),this.trailing.splice(o,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var i=this.trailing[n];i.start>=e.end.offset&&t.unshift(i.comment)}return this.trailing.length=0,t}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var a=o.node.trailingComments[0];a&&a.range[0]>=e.end.offset&&(t=o.node.trailingComments,delete o.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,n,i=[];this.stack.length>0&&(t=this.stack[this.stack.length-1])&&t.start>=e.start.offset;)n=t.node,this.stack.pop();if(n){for(var o=(n.leadingComments?n.leadingComments.length:0)-1;o>=0;--o){var a=n.leadingComments[o];a.range[1]<=e.start.offset&&(i.unshift(a),n.leadingComments.splice(o,1))}return n.leadingComments&&0===n.leadingComments.length&&delete n.leadingComments,i}for(o=this.leading.length-1;o>=0;--o)(t=this.leading[o]).start<=e.start.offset&&(i.unshift(t.comment),this.leading.splice(o,1));return i},e.prototype.visitNode=function(e,t){if(!(e.type===i.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(t),o=this.findLeadingComments(t);o.length>0&&(e.leadingComments=o),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",i={type:n,value:e.value};if(e.range&&(i.range=e.range),e.loc&&(i.loc=e.loc),this.comments.push(i),this.attach){var o={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(o.comment.loc=e.loc),e.type=n,this.leading.push(o),this.trailing.push(o)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=n(5),l=n(6),u=n(7),c=n(8),d=n(13),f=n(14);function p(e){var t;switch(e.type){case l.JSXSyntax.JSXIdentifier:t=e.name;break;case l.JSXSyntax.JSXNamespacedName:t=p(e.namespace)+":"+p(e.name);break;case l.JSXSyntax.JSXMemberExpression:t=p(e.object)+"."+p(e.property)}return t}d.TokenName[100]="JSXIdentifier",d.TokenName[101]="JSXText",t.JSXParser=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return o(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,i=!1,o=!1,s=!1;!this.scanner.eof()&&n&&!i;){var l=this.scanner.source[this.scanner.index];if(l===e)break;if(i=";"===l,t+=l,++this.scanner.index,!i)switch(t.length){case 2:o="#"===l;break;case 3:o&&(n=(s="x"===l)||a.Character.isDecimalDigit(l.charCodeAt(0)),o=o&&!s);break;default:n=(n=n&&!(o&&!a.Character.isDecimalDigit(l.charCodeAt(0))))&&!(s&&!a.Character.isHexDigit(l.charCodeAt(0)))}}if(n&&i&&t.length>2){var u=t.substr(1,t.length-2);o&&u.length>1?t=String.fromCharCode(parseInt(u.substr(1),10)):s&&u.length>2?t=String.fromCharCode(parseInt("0"+u.substr(1),16)):o||s||!f.XHTMLEntities[u]||(t=f.XHTMLEntities[u])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:l=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,n=this.scanner.source[this.scanner.index++],i="";!this.scanner.eof()&&(u=this.scanner.source[this.scanner.index++])!==n;)i+="&"===u?this.scanXHTMLEntity(n):u;return{type:8,value:i,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var o=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),l=46===o&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=l.length,{type:7,value:l,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(a.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var u=this.scanner.source.charCodeAt(this.scanner.index);if(a.Character.isIdentifierPart(u)&&92!==u)++this.scanner.index;else{if(45!==u)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,a.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var i={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(i)),i},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(n,i))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var o=t;this.expectJSX(".");var a=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(o,a))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){this.expectJSX(":");var i=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(n,i))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new u.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,i,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var n=this.parseJSXElementName(),i=this.parseJSXAttributes(),o=this.matchJSX("/");return o&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(n,o,i))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var i=this.getTokenRaw(n),o=this.finalize(t,new s.JSXText(n.value,i));e.push(o)}if("{"!==this.scanner.source[this.scanner.index])break;var a=this.parseJSXExpressionContainer();e.push(a)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),i=this.parseJSXBoundaryElement();if(i.type===l.JSXSyntax.JSXOpeningElement)if(i.selfClosing){var o=this.finalize(n,new s.JSXElement(i,[],null));e.children.push(o)}else t.push(e),e={node:n,opening:i,closing:null,children:[]};if(i.type===l.JSXSyntax.JSXClosingElement){e.closing=i;var a=p(e.opening.name);if(a!==p(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",a),!(t.length>0))break;o=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(o),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],i=null;if(!t.selfClosing){var o=this.parseComplexJSXElement({node:e,opening:t,closing:i,children:n});n=o.children,i=o.closing}return this.finalize(e,new s.JSXElement(t,n,i))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(c.Parser)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,i=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&i.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6);t.JSXClosingElement=function(e){this.type=i.JSXSyntax.JSXClosingElement,this.name=e},t.JSXElement=function(e,t,n){this.type=i.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n},t.JSXEmptyExpression=function(){this.type=i.JSXSyntax.JSXEmptyExpression},t.JSXExpressionContainer=function(e){this.type=i.JSXSyntax.JSXExpressionContainer,this.expression=e},t.JSXIdentifier=function(e){this.type=i.JSXSyntax.JSXIdentifier,this.name=e},t.JSXMemberExpression=function(e,t){this.type=i.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t},t.JSXAttribute=function(e,t){this.type=i.JSXSyntax.JSXAttribute,this.name=e,this.value=t},t.JSXNamespacedName=function(e,t){this.type=i.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t},t.JSXOpeningElement=function(e,t,n){this.type=i.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n},t.JSXSpreadAttribute=function(e){this.type=i.JSXSyntax.JSXSpreadAttribute,this.argument=e},t.JSXText=function(e,t){this.type=i.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.ArrayExpression=function(e){this.type=i.Syntax.ArrayExpression,this.elements=e},t.ArrayPattern=function(e){this.type=i.Syntax.ArrayPattern,this.elements=e},t.ArrowFunctionExpression=function(e,t,n){this.type=i.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1},t.AssignmentExpression=function(e,t,n){this.type=i.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n},t.AssignmentPattern=function(e,t){this.type=i.Syntax.AssignmentPattern,this.left=e,this.right=t},t.AsyncArrowFunctionExpression=function(e,t,n){this.type=i.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0},t.AsyncFunctionDeclaration=function(e,t,n){this.type=i.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0},t.AsyncFunctionExpression=function(e,t,n){this.type=i.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0},t.AwaitExpression=function(e){this.type=i.Syntax.AwaitExpression,this.argument=e},t.BinaryExpression=function(e,t,n){this.type="||"===e||"&&"===e?i.Syntax.LogicalExpression:i.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n},t.BlockStatement=function(e){this.type=i.Syntax.BlockStatement,this.body=e},t.BreakStatement=function(e){this.type=i.Syntax.BreakStatement,this.label=e},t.CallExpression=function(e,t){this.type=i.Syntax.CallExpression,this.callee=e,this.arguments=t},t.CatchClause=function(e,t){this.type=i.Syntax.CatchClause,this.param=e,this.body=t},t.ClassBody=function(e){this.type=i.Syntax.ClassBody,this.body=e},t.ClassDeclaration=function(e,t,n){this.type=i.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n},t.ClassExpression=function(e,t,n){this.type=i.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n},t.ComputedMemberExpression=function(e,t){this.type=i.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t},t.ConditionalExpression=function(e,t,n){this.type=i.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n},t.ContinueStatement=function(e){this.type=i.Syntax.ContinueStatement,this.label=e},t.DebuggerStatement=function(){this.type=i.Syntax.DebuggerStatement},t.Directive=function(e,t){this.type=i.Syntax.ExpressionStatement,this.expression=e,this.directive=t},t.DoWhileStatement=function(e,t){this.type=i.Syntax.DoWhileStatement,this.body=e,this.test=t},t.EmptyStatement=function(){this.type=i.Syntax.EmptyStatement},t.ExportAllDeclaration=function(e){this.type=i.Syntax.ExportAllDeclaration,this.source=e},t.ExportDefaultDeclaration=function(e){this.type=i.Syntax.ExportDefaultDeclaration,this.declaration=e},t.ExportNamedDeclaration=function(e,t,n){this.type=i.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n},t.ExportSpecifier=function(e,t){this.type=i.Syntax.ExportSpecifier,this.exported=t,this.local=e},t.ExpressionStatement=function(e){this.type=i.Syntax.ExpressionStatement,this.expression=e},t.ForInStatement=function(e,t,n){this.type=i.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1},t.ForOfStatement=function(e,t,n){this.type=i.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n},t.ForStatement=function(e,t,n,o){this.type=i.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=o},t.FunctionDeclaration=function(e,t,n,o){this.type=i.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=o,this.expression=!1,this.async=!1},t.FunctionExpression=function(e,t,n,o){this.type=i.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=o,this.expression=!1,this.async=!1},t.Identifier=function(e){this.type=i.Syntax.Identifier,this.name=e},t.IfStatement=function(e,t,n){this.type=i.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n},t.ImportDeclaration=function(e,t){this.type=i.Syntax.ImportDeclaration,this.specifiers=e,this.source=t},t.ImportDefaultSpecifier=function(e){this.type=i.Syntax.ImportDefaultSpecifier,this.local=e},t.ImportNamespaceSpecifier=function(e){this.type=i.Syntax.ImportNamespaceSpecifier,this.local=e},t.ImportSpecifier=function(e,t){this.type=i.Syntax.ImportSpecifier,this.local=e,this.imported=t},t.LabeledStatement=function(e,t){this.type=i.Syntax.LabeledStatement,this.label=e,this.body=t},t.Literal=function(e,t){this.type=i.Syntax.Literal,this.value=e,this.raw=t},t.MetaProperty=function(e,t){this.type=i.Syntax.MetaProperty,this.meta=e,this.property=t},t.MethodDefinition=function(e,t,n,o,a){this.type=i.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=o,this.static=a},t.Module=function(e){this.type=i.Syntax.Program,this.body=e,this.sourceType="module"},t.NewExpression=function(e,t){this.type=i.Syntax.NewExpression,this.callee=e,this.arguments=t},t.ObjectExpression=function(e){this.type=i.Syntax.ObjectExpression,this.properties=e},t.ObjectPattern=function(e){this.type=i.Syntax.ObjectPattern,this.properties=e},t.Property=function(e,t,n,o,a,s){this.type=i.Syntax.Property,this.key=t,this.computed=n,this.value=o,this.kind=e,this.method=a,this.shorthand=s},t.RegexLiteral=function(e,t,n,o){this.type=i.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:o}},t.RestElement=function(e){this.type=i.Syntax.RestElement,this.argument=e},t.ReturnStatement=function(e){this.type=i.Syntax.ReturnStatement,this.argument=e},t.Script=function(e){this.type=i.Syntax.Program,this.body=e,this.sourceType="script"},t.SequenceExpression=function(e){this.type=i.Syntax.SequenceExpression,this.expressions=e},t.SpreadElement=function(e){this.type=i.Syntax.SpreadElement,this.argument=e},t.StaticMemberExpression=function(e,t){this.type=i.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t},t.Super=function(){this.type=i.Syntax.Super},t.SwitchCase=function(e,t){this.type=i.Syntax.SwitchCase,this.test=e,this.consequent=t},t.SwitchStatement=function(e,t){this.type=i.Syntax.SwitchStatement,this.discriminant=e,this.cases=t},t.TaggedTemplateExpression=function(e,t){this.type=i.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t},t.TemplateElement=function(e,t){this.type=i.Syntax.TemplateElement,this.value=e,this.tail=t},t.TemplateLiteral=function(e,t){this.type=i.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t},t.ThisExpression=function(){this.type=i.Syntax.ThisExpression},t.ThrowStatement=function(e){this.type=i.Syntax.ThrowStatement,this.argument=e},t.TryStatement=function(e,t,n){this.type=i.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n},t.UnaryExpression=function(e,t){this.type=i.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0},t.UpdateExpression=function(e,t,n){this.type=i.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n},t.VariableDeclaration=function(e,t){this.type=i.Syntax.VariableDeclaration,this.declarations=e,this.kind=t},t.VariableDeclarator=function(e,t){this.type=i.Syntax.VariableDeclarator,this.id=e,this.init=t},t.WhileStatement=function(e,t){this.type=i.Syntax.WhileStatement,this.test=e,this.body=t},t.WithStatement=function(e,t){this.type=i.Syntax.WithStatement,this.object=e,this.body=t},t.YieldExpression=function(e,t){this.type=i.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(10),a=n(11),s=n(7),l=n(12),u=n(2),c=n(13);t.Parser=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new l.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=Array.prototype.slice.call(arguments,1),a=e.replace(/%(\d)/g,function(e,t){return i.assert(t<o.length,"Message reference must be in range"),o[t]}),s=this.lastMarker.index,l=this.lastMarker.line,u=this.lastMarker.column+1;throw this.errorHandler.createError(s,l,u,a)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=Array.prototype.slice.call(arguments,1),a=e.replace(/%(\d)/g,function(e,t){return i.assert(t<o.length,"Message reference must be in range"),o[t]}),s=this.lastMarker.index,l=this.scanner.lineNumber,u=this.lastMarker.column+1;this.errorHandler.tolerateError(s,l,u,a)},e.prototype.unexpectedTokenError=function(e,t){var n,i=t||a.Messages.UnexpectedToken;if(e?(t||(i=2===e.type?a.Messages.UnexpectedEOS:3===e.type?a.Messages.UnexpectedIdentifier:6===e.type?a.Messages.UnexpectedNumber:8===e.type?a.Messages.UnexpectedString:10===e.type?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?i=a.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(i=a.Messages.StrictReservedWord))),n=e.value):n="ILLEGAL",i=i.replace("%0",n),e&&"number"==typeof e.lineNumber){var o=e.start,s=e.lineNumber,l=this.lastMarker.index-this.lastMarker.column,u=e.start-l+1;return this.errorHandler.createError(o,s,u,i)}return o=this.lastMarker.index,s=this.lastMarker.line,u=this.lastMarker.column+1,this.errorHandler.createError(o,s,u,i)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],i=void 0;i={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(i.range=n.range),this.config.loc&&(i.loc=n.loc);var o={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(i,o)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:c.TokenName[e.type],value:this.getTokenRaw(e)};return this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type&&(t.regex={pattern:e.pattern,flags:e.flags}),t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,i=e.lineNumber;return n<0&&(n+=t,i--),{index:e.start,line:i,column:n}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,a.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,i=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=i,o},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,i=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=i||this.context.firstCoverInitializedNameError,o},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,n,i=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(i,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(i,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(i,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var i=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,i},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters(),i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var i=this.parseFormalParameters(),o=this.parsePropertyMethod(i);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new s.AsyncFunctionExpression(null,i.params,o))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),n=this.nextToken();switch(n.type){case 8:case 6:this.context.strict&&n.octal&&this.tolerateUnexpectedToken(n,a.Messages.StrictOctalLiteral);var i=this.getTokenRaw(n);e=this.finalize(t,new s.Literal(n.value,i));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(n.value));break;case 7:"["===n.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(n);break;default:e=this.throwUnexpectedToken(n)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===u.Syntax.Identifier&&e.name===t||e.type===u.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n=this.createNode(),i=this.lookahead,o=null,l=null,u=!1,c=!1,d=!1,f=!1;if(3===i.type){var p=i.value;this.nextToken(),u=this.match("["),o=(f=!(this.hasLineTerminator||"async"!==p||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new s.Identifier(p))}else this.match("*")?this.nextToken():(u=this.match("["),o=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(3===i.type&&!f&&"get"===i.value&&h)t="get",u=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,l=this.parseGetterMethod();else if(3===i.type&&!f&&"set"===i.value&&h)t="set",u=this.match("["),o=this.parseObjectPropertyKey(),l=this.parseSetterMethod();else if(7===i.type&&"*"===i.value&&h)t="init",u=this.match("["),o=this.parseObjectPropertyKey(),l=this.parseGeneratorMethod(),c=!0;else if(o||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!f)!u&&this.isPropertyKey(o,"__proto__")&&(e.value&&this.tolerateError(a.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),l=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))l=f?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0;else if(3===i.type)if(p=this.finalize(n,new s.Identifier(i.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),d=!0;var m=this.isolateCoverGrammar(this.parseAssignmentExpression);l=this.finalize(n,new s.AssignmentPattern(p,m))}else d=!0,l=p;else this.throwUnexpectedToken(this.nextToken());return this.finalize(n,new s.Property(t,o,u,l,c,d))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){i.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,o=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:o},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,i=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:i},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],i=this.parseTemplateHead();for(n.push(i);!i.tail;)t.push(this.parseExpression()),i=this.parseTemplateElement(),n.push(i);return this.finalize(e,new s.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case u.Syntax.Identifier:case u.Syntax.MemberExpression:case u.Syntax.RestElement:case u.Syntax.AssignmentPattern:break;case u.Syntax.SpreadElement:e.type=u.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case u.Syntax.ArrayExpression:e.type=u.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case u.Syntax.ObjectExpression:for(e.type=u.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case u.Syntax.AssignmentExpression:e.type=u.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[e],async:!1};else{var i=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var o=[];for(this.context.isAssignmentTarget=!1,o.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var a=0;a<o.length;a++)this.reinterpretExpressionAsPattern(o[a]);i=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),o.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,a=0;a<o.length;a++)this.reinterpretExpressionAsPattern(o[a]);i=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(i)break}i||(e=this.finalize(this.startNode(t),new s.SequenceExpression(o)))}if(!i){if(this.expect(")"),this.match("=>")&&(e.type===u.Syntax.Identifier&&"yield"===e.name&&(i=!0,e={type:"ArrowParameterPlaceHolder",params:[e],async:!1}),!i)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===u.Syntax.SequenceExpression)for(a=0;a<e.expressions.length;a++)this.reinterpretExpressionAsPattern(e.expressions[a]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",params:e.type===u.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(i.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var o=this.parseIdentifierName();e=new s.MetaProperty(n,o)}else this.throwUnexpectedToken(this.lookahead);else{var a=this.isolateCoverGrammar(this.parseLeftHandSideExpression),l=this.match("(")?this.parseArguments():[];e=new s.NewExpression(a,l),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.matchContextualKeyword("async"),i=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var o=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,o))}else if(this.match("(")){var a=n&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var l=a?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,l)),a&&this.match("=>")){for(var u=0;u<l.length;++u)this.reinterpretExpressionAsPattern(l[u]);e={type:"ArrowParameterPlaceHolder",params:l,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),o=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,o));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var c=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,c))}return this.context.allowIn=i,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){i.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,n));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var o=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,o))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),i=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(a.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(n,new s.UpdateExpression(i.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(a.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var l=this.nextToken().value;o=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(l,e,o))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===u.Syntax.Identifier&&this.tolerateError(a.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==u.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,i=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",n,i))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,i=this.binaryPrecedence(n);if(i>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var o=[e,this.lookahead],a=t,l=this.isolateCoverGrammar(this.parseExponentiationExpression),u=[a,n.value,l],c=[i];!((i=this.binaryPrecedence(this.lookahead))<=0);){for(;u.length>2&&i<=c[c.length-1];){l=u.pop();var d=u.pop();c.pop(),a=u.pop(),o.pop();var f=this.startNode(o[o.length-1]);u.push(this.finalize(f,new s.BinaryExpression(d,a,l)))}u.push(this.nextToken().value),c.push(i),o.push(this.lookahead),u.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=u.length-1;t=u[p];for(var h=o.pop();p>1;){var m=o.pop(),g=h&&h.lineStart;f=this.startNode(m,g),d=u[p-1],t=this.finalize(f,new s.BinaryExpression(d,u[p-2],t)),p-=2,h=m}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var o=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,i,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case u.Syntax.Identifier:this.validateParam(e,t,t.name);break;case u.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case u.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case u.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case u.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n,i=[e],o=!1;switch(e.type){case u.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":i=e.params,o=e.async;break;default:return null}n={simple:!0,paramSet:{}};for(var s=0;s<i.length;++s)(t=i[s]).type===u.Syntax.AssignmentPattern?t.right.type===u.Syntax.YieldExpression&&(t.right.argument&&this.throwUnexpectedToken(this.lookahead),t.right.type=u.Syntax.Identifier,t.right.name="yield",delete t.right.argument,delete t.right.delegate):o&&t.type===u.Syntax.Identifier&&"await"===t.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(n,t),i[s]=t;if(this.context.strict||!this.context.allowYield)for(s=0;s<i.length;++s)(t=i[s]).type===u.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead);if(n.message===a.Messages.StrictParamDupe){var l=this.context.strict?n.stricted:n.firstRestricted;this.throwUnexpectedToken(l,n.message)}return{simple:n.simple,params:i,stricted:n.stricted,firstRestricted:n.firstRestricted,message:n.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if(e=this.parseConditionalExpression(),3===n.type&&n.lineNumber===this.lookahead.lineNumber&&"async"===n.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var i=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(i),e={type:"ArrowParameterPlaceHolder",params:[i],async:!0}}if("ArrowParameterPlaceHolder"===e.type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=e.async,l=this.reinterpretAsCoverFormalsList(e);if(l){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var c=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=l.simple;var f=this.context.allowYield,p=this.context.await;this.context.allowYield=!0,this.context.await=o;var h=this.startNode(t);this.expect("=>");var m=void 0;if(this.match("{")){var g=this.context.allowIn;this.context.allowIn=!0,m=this.parseFunctionSourceElements(),this.context.allowIn=g}else m=this.isolateCoverGrammar(this.parseAssignmentExpression);var v=m.type!==u.Syntax.BlockStatement;this.context.strict&&l.firstRestricted&&this.throwUnexpectedToken(l.firstRestricted,l.message),this.context.strict&&l.stricted&&this.tolerateUnexpectedToken(l.stricted,l.message),e=o?this.finalize(h,new s.AsyncArrowFunctionExpression(l.params,m,v)):this.finalize(h,new s.ArrowFunctionExpression(l.params,m,v)),this.context.strict=c,this.context.allowStrictDirective=d,this.context.allowYield=f,this.context.await=p}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===u.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(n,a.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(n,a.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var b=(n=this.nextToken()).value,x=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(b,e,x)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),i=this.parsePattern([],e);this.context.strict&&i.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(i.name)&&this.tolerateError(a.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(a.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&i.type!==u.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new s.VariableDeclarator(i,o))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;i.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var o=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(o,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var i=this.parsePattern(e,t);return this.finalize(n,new s.RestElement(i))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var i=[];!this.match("]");)if(this.match(","))this.nextToken(),i.push(null);else{if(this.match("...")){i.push(this.parseBindingRestElement(e,t));break}i.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new s.ArrayPattern(i))},e.prototype.parsePropertyPattern=function(e,t){var n,i,o=this.createNode(),a=!1,l=!1;if(3===this.lookahead.type){var u=this.lookahead;n=this.parseVariableIdentifier();var c=this.finalize(o,new s.Identifier(u.value));if(this.match("=")){e.push(u),l=!0,this.nextToken();var d=this.parseAssignmentExpression();i=this.finalize(this.startNode(u),new s.AssignmentPattern(c,d))}else this.match(":")?(this.expect(":"),i=this.parsePatternWithDefault(e,t)):(e.push(u),l=!0,i=c)}else a=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),i=this.parsePatternWithDefault(e,t);return this.finalize(o,new s.Property("init",n,a,i,!1,l))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),i=[];for(this.expect("{");!this.match("}");)i.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new s.ObjectPattern(i))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(this.matchKeyword("let")&&("const"===t||"let"===t)&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,i=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var o=this.context.allowYield;this.context.allowYield=!0;var a=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=o,i=this.finalize(this.startNode(n),new s.AssignmentPattern(i,a))}return i},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,a.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,a.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new s.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(a.Messages.StrictVarName);var i=null;return this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===u.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(n,i))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(a.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var i=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new s.IfStatement(i,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var i=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(n,i))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var i=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=i}return this.finalize(t,new s.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,i=null,o=null,l=null,c=!0,d=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){i=this.createNode(),this.nextToken();var f=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=f,1===p.length&&this.matchKeyword("in")){var h=p[0];h.init&&(h.id.type===u.Syntax.ArrayPattern||h.id.type===u.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),i=this.finalize(i,new s.VariableDeclaration(p,"var")),this.nextToken(),e=i,t=this.parseExpression(),i=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(i=this.finalize(i,new s.VariableDeclaration(p,"var")),this.nextToken(),e=i,t=this.parseAssignmentExpression(),i=null,c=!1):(i=this.finalize(i,new s.VariableDeclaration(p,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){i=this.createNode();var m=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(f=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(m,{inFor:!0}),this.context.allowIn=f,1===p.length&&null===p[0].init&&this.matchKeyword("in")?(i=this.finalize(i,new s.VariableDeclaration(p,m)),this.nextToken(),e=i,t=this.parseExpression(),i=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(i=this.finalize(i,new s.VariableDeclaration(p,m)),this.nextToken(),e=i,t=this.parseAssignmentExpression(),i=null,c=!1):(this.consumeSemicolon(),i=this.finalize(i,new s.VariableDeclaration(p,m)))):(i=this.finalize(i,new s.Identifier(m)),this.nextToken(),e=i,t=this.parseExpression(),i=null)}else{var g=this.lookahead;if(f=this.context.allowIn,this.context.allowIn=!1,i=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=f,this.matchKeyword("in"))this.context.isAssignmentTarget&&i.type!==u.Syntax.AssignmentExpression||this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(i),e=i,t=this.parseExpression(),i=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&i.type!==u.Syntax.AssignmentExpression||this.tolerateError(a.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(i),e=i,t=this.parseAssignmentExpression(),i=null,c=!1;else{if(this.match(",")){for(var v=[i];this.match(",");)this.nextToken(),v.push(this.isolateCoverGrammar(this.parseAssignmentExpression));i=this.finalize(this.startNode(g),new s.SequenceExpression(v))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(l=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(d,new s.ForStatement(i,o,l,n)):c?this.finalize(d,new s.ForInStatement(e,t,n)):this.finalize(d,new s.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var i="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)||this.throwError(a.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(a.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),i="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)||this.throwError(a.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(a.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(a.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(n,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var i=[],o=!1;for(this.expect("{");!this.match("}");){var l=this.parseSwitchCase();null===l.test&&(o&&this.throwError(a.Messages.MultipleDefaultsInSwitch),o=!0),i.push(l)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new s.SwitchStatement(t,i))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===u.Syntax.Identifier&&this.match(":")){this.nextToken();var i="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)&&this.throwError(a.Messages.Redeclaration,"Label",n.name),this.context.labelSet[i]=!0;var o=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),o=this.parseClassDeclaration();else if(this.matchKeyword("function")){var l=this.lookahead,c=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(l,a.Messages.StrictFunction):c.generator&&this.tolerateUnexpectedToken(l,a.Messages.GeneratorInLegacyContext),o=c}else o=this.parseStatement();delete this.context.labelSet[i],e=new s.LabeledStatement(n,o)}else this.consumeSemicolon(),e=new s.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(a.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),i={},o=0;o<t.length;o++){var l="$"+t[o].value;Object.prototype.hasOwnProperty.call(i,l)&&this.tolerateError(a.Messages.DuplicateBinding,t[o].value),i[l]=!0}this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(a.Messages.StrictCatchVariable),this.expect(")");var c=this.parseBlock();return this.finalize(e,new s.CatchClause(n,c))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,i=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||i||this.throwError(a.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,n,i))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,i=this.context.inIteration,o=this.context.inSwitch,a=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=i,this.context.inSwitch=o,this.context.inFunctionBody=a,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var i="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=a.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=a.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=a.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=a.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=a.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,i,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[i]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(a.Messages.DefaultRestParameter),this.match(")")||this.throwError(a.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),i=0;i<t.length;i++)this.validateParam(e,t[i],t[i].value);e.simple=e.simple&&n instanceof s.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&4===n.type&&"function"===n.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var i,o=!n&&this.match("*");o&&this.nextToken();var l=null,u=null;if(!e||!this.match("(")){var c=this.lookahead;l=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(u=c,i=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(u=c,i=a.Messages.StrictReservedWord)}var d=this.context.await,f=this.context.allowYield;this.context.await=n,this.context.allowYield=!o;var p=this.parseFormalParameters(u),h=p.params,m=p.stricted;u=p.firstRestricted,p.message&&(i=p.message);var g=this.context.strict,v=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&u&&this.throwUnexpectedToken(u,i),this.context.strict&&m&&this.tolerateUnexpectedToken(m,i),this.context.strict=g,this.context.allowStrictDirective=v,this.context.await=d,this.context.allowYield=f,n?this.finalize(t,new s.AsyncFunctionDeclaration(l,h,y)):this.finalize(t,new s.FunctionDeclaration(l,h,y,o))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n,i=!t&&this.match("*");i&&this.nextToken();var o,l=null,u=this.context.await,c=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!i,!this.match("(")){var d=this.lookahead;l=this.context.strict||i||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(d.value)&&this.tolerateUnexpectedToken(d,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(d.value)?(o=d,n=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(d.value)&&(o=d,n=a.Messages.StrictReservedWord)}var f=this.parseFormalParameters(o),p=f.params,h=f.stricted;o=f.firstRestricted,f.message&&(n=f.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=f.simple;var v=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,n),this.context.strict&&h&&this.tolerateUnexpectedToken(h,n),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=u,this.context.allowYield=c,t?this.finalize(e,new s.AsyncFunctionExpression(l,p,v)):this.finalize(e,new s.FunctionExpression(l,p,v,i))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),i=n.type===u.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,i?new s.Directive(n,i):new s.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var i=this.parseDirective();t.push(i);var o=i.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,a.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,a.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();n.params.length>0&&this.tolerateError(a.Messages.BadGetterArity);var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();1!==n.params.length?this.tolerateError(a.Messages.BadSetterArity):n.params[0]instanceof s.RestElement&&this.tolerateError(a.Messages.BadSetterRestParameter);var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var i=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=i}return this.finalize(e,new s.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),i="",o=null,l=null,u=!1,c=!1,d=!1,f=!1;if(this.match("*"))this.nextToken();else if(u=this.match("["),"static"===(o=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,d=!0,u=this.match("["),this.match("*")?this.nextToken():o=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var p=this.lookahead.value;":"!==p&&"("!==p&&"*"!==p&&(f=!0,t=this.lookahead,o=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,a.Messages.ConstructorIsAsync))}var h=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&h?(i="get",u=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,l=this.parseGetterMethod()):"set"===t.value&&h&&(i="set",u=this.match("["),o=this.parseObjectPropertyKey(),l=this.parseSetterMethod()):7===t.type&&"*"===t.value&&h&&(i="init",u=this.match("["),o=this.parseObjectPropertyKey(),l=this.parseGeneratorMethod(),c=!0),!i&&o&&this.match("(")&&(i="init",l=f?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0),i||this.throwUnexpectedToken(this.lookahead),"init"===i&&(i="method"),u||(d&&this.isPropertyKey(o,"prototype")&&this.throwUnexpectedToken(t,a.Messages.StaticPrototype),!d&&this.isPropertyKey(o,"constructor")&&(("method"!==i||!c||l&&l.generator)&&this.throwUnexpectedToken(t,a.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,a.Messages.DuplicateConstructor):e.value=!0,i="constructor")),this.finalize(n,new s.MethodDefinition(o,u,l,i,d))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var i=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),o=null;this.matchKeyword("extends")&&(this.nextToken(),o=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var a=this.parseClassBody();return this.context.strict=n,this.finalize(t,new s.ClassDeclaration(i,o,a))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=3===this.lookahead.type?this.parseVariableIdentifier():null,i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(n,i,o))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(a.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(a.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var i=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(i,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?n=this.parseClassDeclaration(!0):this.matchContextualKeyword("async")?n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression():(this.matchContextualKeyword("from")&&this.throwError(a.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon()),e=this.finalize(t,new s.ExportDefaultDeclaration(n));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var i=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(i,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(o))}else if(4===this.lookahead.type){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction())n=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null));else{var l=[],u=null,c=!1;for(this.expect("{");!this.match("}");)c=c||this.matchKeyword("default"),l.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),u=this.parseModuleSpecifier(),this.consumeSemicolon()):c?(i=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,l,u))}return e},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&Object.defineProperty(n=Object.create(e),"column",{value:t})}return n},e.prototype.createError=function(e,t,n,i){var o=this.constructError("Line "+t+": "+i,n);return o.index=e,o.lineNumber=t,o.description=i,o},e.prototype.throwError=function(e,t,n,i){throw this.createError(e,t,n,i)},e.prototype.tolerateError=function(e,t,n,i){var o=this.createError(e,t,n,i);if(!this.tolerant)throw o;this.recordError(o)},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(4),a=n(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function l(e){return"01234567".indexOf(e)}t.Scanner=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=+(e.length>0),this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=a.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=a.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,n,i=[];for(this.trackComment&&(i=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var a=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(a)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:n};i.push(s)}return 13===a&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,i}}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:n},i.push(s)),i},e.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(i))13===i&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===i){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var a={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};n.push(a)}return n}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(a)),this.tolerateUnexpectedToken(),n},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(n))++this.index;else if(o.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var i=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(i)),t=!0}else{if(42!==n)break;this.index+=2,i=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(i))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,i=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(i))}else{if(60!==n||this.isModule||"!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,i=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(i))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,i=0;i<t;++i){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+s(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t||t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=o.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)n+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=l(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+l(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+l(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3)&&t+n.length!==this.index){var i=this.index;this.index=t,this.tolerateUnexpectedToken(a.Messages.InvalidEscapedReservedWord),this.index=i}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",i=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(i=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return i||0!==n.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))break}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];i.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t||t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];i.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,s="";!this.eof();){var l=this.source[this.index++];if(l===t){t="";break}if("\\"===l)if((l=this.source[this.index++])&&o.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var u=this.scanHexEscape(l);null===u&&this.throwUnexpectedToken(),s+=u}break;case"x":var c=this.scanHexEscape(l);null===c&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),s+=c;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="	";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=l,this.tolerateUnexpectedToken();break;default:if(l&&o.Character.isOctalDigit(l.charCodeAt(0))){var d=this.octalToDecimal(l);n=d.octal||n,s+=String.fromCharCode(d.code)}else s+=l}else{if(o.Character.isLineTerminator(l.charCodeAt(0)))break;s+=l}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,i="`"===this.source[n],s=!1,l=2;for(++this.index;!this.eof();){var u=this.source[this.index++];if("`"===u){l=1,s=!0,t=!0;break}if("$"===u){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=u}else if("\\"===u)if(u=this.source[this.index++],o.Character.isLineTerminator(u.charCodeAt(0)))++this.lineNumber,"\r"===u&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(u){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var c=this.index,d=this.scanHexEscape(u);null!==d?e+=d:(this.index=c,e+=u)}break;case"x":var f=this.scanHexEscape(u);null===f&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),e+=f;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===u?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(u.charCodeAt(0))?this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral):e+=u}else o.Character.isLineTerminator(u.charCodeAt(0))?(++this.lineNumber,"\r"===u&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=u}return t||this.throwUnexpectedToken(),i||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-l),cooked:e,head:i,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,i=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,n){var o=parseInt(t||n,16);return o>1114111&&i.throwUnexpectedToken(a.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(n)}catch(e){this.throwUnexpectedToken(a.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];i.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(a.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){s=!0;break}"["===e&&(n=!0)}return s||this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!o.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var n=this.index,i=this.scanHexEscape("u");if(null!==i)for(e+=i;n<this.index;++n)this.source[n];else this.index=n,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=n(12),a=n(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e,t=this.values[this.values.length-1],n=null!==t;switch(t){case"this":case"]":n=!1;break;case")":var i=this.values[this.paren-1];n="if"===i||"while"===i||"for"===i||"with"===i;break;case"}":(n=!1,"function"===this.values[this.curly-3])?n=!!(e=this.values[this.curly-4])&&!this.beforeFunctionExpression(e):"function"===this.values[this.curly-4]&&(n=!(e=this.values[this.curly-5])||!this.beforeFunctionExpression(e))}return n},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}();t.Tokenizer=function(){function e(e,t){this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],i=this.scanner.source.slice(n.slice[0],n.slice[1]),o={type:n.multiLine?"BlockComment":"LineComment",value:i};this.trackRange&&(o.range=n.range),this.trackLoc&&(o.loc=n.loc),this.buffer.push(o)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var l="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(l);var u={type:a.TokenName[l.type],value:this.scanner.source.slice(l.start,l.end)};this.trackRange&&(u.range=[l.start,l.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},u.loc=s),9===l.type&&(u.regex={pattern:l.pattern,flags:l.flags}),this.buffer.push(u)}}return this.buffer.shift()},e}()}],t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}()},function(e,t,n){"use strict";var i=n(38),o=n(53),a=n(76),s=n(54),l=Object.prototype.toString,u=Object.prototype.hasOwnProperty,c={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},d=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function f(e){var t,n,a;if(t=e.toString(16).toUpperCase(),e<=255)n="x",a=2;else if(e<=65535)n="u",a=4;else{if(!(e<=0xffffffff))throw new o("code point within a string may not be greater than 0xFFFFFFFF");n="U",a=8}return"\\"+n+i.repeat("0",a-t.length)+t}function p(e){this.schema=e.schema||a,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=i.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,i,o,a,s,l,c;if(null===t)return{};for(n={},o=0,a=(i=Object.keys(t)).length;o<a;o+=1)l=String(t[s=i[o]]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(c=e.compiledTypeMap.fallback[s])&&u.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[s]=l;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function h(e,t){for(var n,o=i.repeat(" ",t),a=0,s=-1,l="",u=e.length;a<u;)-1===(s=e.indexOf("\n",a))?(n=e.slice(a),a=u):(n=e.slice(a,s+1),a=s+1),n.length&&"\n"!==n&&(l+=o),l+=n;return l}function m(e,t){return"\n"+i.repeat(" ",e.indent*t)}function g(e){return 32===e||9===e}function v(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function y(e,t){var n;return v(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&(35!==e||t&&v(n=t)&&!g(n)&&65279!==n&&13!==n&&10!==n)}function b(e){return/^\n* /.test(e)}function x(e,t){var n=b(e)?String(t):"",i="\n"===e[e.length-1];return n+(i&&("\n"===e[e.length-2]||"\n"===e)?"+":i?"":"-")+"\n"}function w(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function A(e,t){if(""===e||" "===e[0])return e;for(var n,i,o=/ [^ ]/g,a=0,s=0,l=0,u="";n=o.exec(e);)(l=n.index)-a>t&&(i=s>a?s:l,u+="\n"+e.slice(a,i),a=i+1),s=l;return u+="\n",e.length-a>t&&s>a?u+=e.slice(a,s)+"\n"+e.slice(s+1):u+=e.slice(a),u.slice(1)}function C(e,t,n){var i,a,s,c,d,f;for(s=0,c=(a=n?e.explicitTypes:e.implicitTypes).length;s<c;s+=1)if(((d=a[s]).instanceOf||d.predicate)&&(!d.instanceOf||"object"==typeof t&&t instanceof d.instanceOf)&&(!d.predicate||d.predicate(t))){if(e.tag=n?d.tag:"?",d.represent){if(f=e.styleMap[d.tag]||d.defaultStyle,"[object Function]"===l.call(d.represent))i=d.represent(t,f);else{if(!u.call(d.represent,f))throw new o("!<"+d.tag+'> tag resolver accepts not "'+f+'" style');i=d.represent[f](t,f)}e.dump=i}return!0}return!1}function S(e,t){var n=new p(t=t||{});return n.noRefs||function(e,t){var n,i,o=[],a=[];for(function e(t,n,i){var o,a,s;if(null!==t&&"object"==typeof t)if(-1!==(a=n.indexOf(t)))-1===i.indexOf(a)&&i.push(a);else if(n.push(t),Array.isArray(t))for(a=0,s=t.length;a<s;a+=1)e(t[a],n,i);else for(a=0,s=(o=Object.keys(t)).length;a<s;a+=1)e(t[o[a]],n,i)}(e,o,a),n=0,i=a.length;n<i;n+=1)t.duplicates.push(o[a[n]]);t.usedDuplicates=Array(i)}(e,n),!function e(t,n,i,a,s,u){t.tag=null,t.dump=i,C(t,i,!1)||C(t,i,!0);var p=l.call(t.dump);a&&(a=t.flowLevel<0||t.flowLevel>n);var S,_,T="[object Object]"===p||"[object Array]"===p;if(T&&(_=-1!==(S=t.duplicates.indexOf(i))),(null!==t.tag&&"?"!==t.tag||_||2!==t.indent&&n>0)&&(s=!1),_&&t.usedDuplicates[S])t.dump="*ref_"+S;else{if(T&&_&&!t.usedDuplicates[S]&&(t.usedDuplicates[S]=!0),"[object Object]"===p)a&&0!==Object.keys(t.dump).length?(function(t,n,i,a){var s,l,u,c,d,f,p="",h=t.tag,g=Object.keys(i);if(!0===t.sortKeys)g.sort();else if("function"==typeof t.sortKeys)g.sort(t.sortKeys);else if(t.sortKeys)throw new o("sortKeys must be a boolean or a function");for(s=0,l=g.length;s<l;s+=1)f="",a&&0===s||(f+=m(t,n)),c=i[u=g[s]],e(t,n+1,u,!0,!0,!0)&&((d=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&10===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=m(t,n)),e(t,n+1,c,!0,d)&&(t.dump&&10===t.dump.charCodeAt(0)?f+=":":f+=": ",p+=f+=t.dump));t.tag=h,t.dump=p||"{}"}(t,n,t.dump,s),_&&(t.dump="&ref_"+S+t.dump)):(function(t,n,i){var o,a,s,l,u,c="",d=t.tag,f=Object.keys(i);for(o=0,a=f.length;o<a;o+=1)u="",0!==o&&(u+=", "),t.condenseFlow&&(u+='"'),l=i[s=f[o]],e(t,n,s,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),e(t,n,l,!1,!1)&&(c+=u+=t.dump));t.tag=d,t.dump="{"+c+"}"}(t,n,t.dump),_&&(t.dump="&ref_"+S+" "+t.dump));else if("[object Array]"===p){var O,P=t.noArrayIndent&&n>0?n-1:n;a&&0!==t.dump.length?(function(t,n,i,o){var a,s,l="",u=t.tag;for(a=0,s=i.length;a<s;a+=1)e(t,n+1,i[a],!0,!0)&&(o&&0===a||(l+=m(t,n)),t.dump&&10===t.dump.charCodeAt(0)?l+="-":l+="- ",l+=t.dump);t.tag=u,t.dump=l||"[]"}(t,P,t.dump,s),_&&(t.dump="&ref_"+S+t.dump)):(function(t,n,i){var o,a,s="",l=t.tag;for(o=0,a=i.length;o<a;o+=1)e(t,n,i[o],!1,!1)&&(0!==o&&(s+=","+(t.condenseFlow?"":" ")),s+=t.dump);t.tag=l,t.dump="["+s+"]"}(t,P,t.dump),_&&(t.dump="&ref_"+S+" "+t.dump))}else{if("[object String]"!==p){if(t.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+p)}"?"!==t.tag&&(O=t.dump,t.dump=function(){if(0===O.length)return"''";if(!t.noCompatMode&&-1!==d.indexOf(O))return"'"+O+"'";var e=t.indent*Math.max(1,n),i=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-e);switch(function(e,t,n,i,o){var a,s,l,u,c=!1,d=!1,f=-1!==i,p=-1,h=v(u=e.charCodeAt(0))&&65279!==u&&!g(u)&&45!==u&&63!==u&&58!==u&&44!==u&&91!==u&&93!==u&&123!==u&&125!==u&&35!==u&&38!==u&&42!==u&&33!==u&&124!==u&&61!==u&&62!==u&&39!==u&&34!==u&&37!==u&&64!==u&&96!==u&&!g(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(!v(s=e.charCodeAt(a)))return 5;l=a>0?e.charCodeAt(a-1):null,h=h&&y(s,l)}else{for(a=0;a<e.length;a++){if(10===(s=e.charCodeAt(a)))c=!0,f&&(d=d||a-p-1>i&&" "!==e[p+1],p=a);else if(!v(s))return 5;l=a>0?e.charCodeAt(a-1):null,h=h&&y(s,l)}d=d||f&&a-p-1>i&&" "!==e[p+1]}return c||d?n>9&&b(e)?5:d?4:3:h&&!o(e)?1:2}(O,u||t.flowLevel>-1&&n>=t.flowLevel,t.indent,i,function(e){var n,i;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1})){case 1:return O;case 2:return"'"+O.replace(/'/g,"''")+"'";case 3:return"|"+x(O,t.indent)+w(h(O,e));case 4:return">"+x(O,t.indent)+w(h(function(e,t){for(var n,i,o,a=/(\n+)([^\n]*)/g,s=(a.lastIndex=o=-1!==(o=e.indexOf("\n"))?o:e.length,A(e.slice(0,o),t)),l="\n"===e[0]||" "===e[0];i=a.exec(e);){var u=i[1],c=i[2];n=" "===c[0],s+=u+(l||n||""===c?"":"\n")+A(c,t),l=n}return s}(O,i),e));case 5:return'"'+function(e){for(var t,n,i,o="",a=0;a<e.length;a++)(t=e.charCodeAt(a))>=55296&&t<=56319&&(n=e.charCodeAt(a+1))>=56320&&n<=57343?(o+=f(1024*(t-55296)+n-56320+65536),a++):o+=!(i=c[t])&&v(t)?e[a]:i||f(t);return o}(O)+'"';default:throw new o("impossible error: invalid scalar style")}}())}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}(n,0,e,!0,!0)?"":n.dump+"\n"}e.exports.dump=S,e.exports.safeDump=function(e,t){return S(e,i.extend({schema:s},t))}},function(e,t,n){"use strict";n(31),n(32),n(33),n(64),n(19),n(65),n(20),n(68),n(92),n(144),n(22),n(94),n(23);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(91),u=n(1),c=n(183),d=n(0),f=n(7),p=n(95),h=n(69),m=n(3),g=n(305),v=n(306),y=n(307);t.XMLBuilderCBImpl=function(e){function t(t,n){void 0===n&&(n=!1);var i=e.call(this)||this;return i._hasDeclaration=!1,i._docTypeName="",i._hasDocumentElement=!1,i._currentElementSerialized=!1,i._openTags=[],i._ended=!1,i._fragment=n,i._options=u.applyDefaults(t||{},l.DefaultXMLBuilderCBOptions),i._builderOptions={defaultNamespace:i._options.defaultNamespace,namespaceAlias:i._options.namespaceAlias},"json"===i._options.format?i._writer=new v.JSONCBWriter(i._options):"yaml"===i._options.format?i._writer=new y.YAMLCBWriter(i._options):i._writer=new g.XMLCBWriter(i._options),void 0!==i._options.data&&i.on("data",i._options.data),void 0!==i._options.end&&i.on("end",i._options.end),void 0!==i._options.error&&i.on("error",i._options.error),i._prefixMap=new p.NamespacePrefixMap,i._prefixMap.set("xml",f.namespace.XML),i._prefixIndex={value:1},i._push(i._writer.frontMatter()),i}return o(t,e),t.prototype.ele=function(e,t,n){var i,o;if(u.isObject(e)||u.isString(e)&&(/^\s*</.test(e)||/^\s*[\{\[]/.test(e)||/^(\s*|(#.*)|(%.*))*---/.test(e))){var s=c.fragment().set(this._options);try{s.ele(e)}catch(e){return this.emit("error",e),this}try{for(var l=a(s.node.childNodes),d=l.next();!d.done;d=l.next()){var f=d.value;this._fromNode(f)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&0===this._writer.level)return this.emit("error",Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=c.fragment(this._builderOptions).ele(e,t,n)}catch(e){return this.emit("error",e),this}return this._fragment||this._hasDocumentElement||""===this._docTypeName||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0)):this.emit("error",Error("Document element name does not match DocType declaration name.")),this},t.prototype.att=function(e,t,n){if(void 0===this._currentElement)return this.emit("error",Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(e,t,n)}catch(e){return this.emit("error",e),this}return this},t.prototype.com=function(e){var t;this._serializeOpenTag(!0);try{t=c.fragment(this._builderOptions).com(e).first().node}catch(e){return this.emit("error",e),this}return!this._options.wellFormed||d.xml_isLegalChar(t.data)&&-1===t.data.indexOf("--")&&!t.data.endsWith("-")?this._push(this._writer.comment(t.data)):this.emit("error",Error("Comment data contains invalid characters (well-formed required).")),this},t.prototype.txt=function(e){if(!this._fragment&&void 0===this._currentElement)return this.emit("error",Error("Cannot insert a text node as child of a document node.")),this;this._serializeOpenTag(!0);try{t=c.fragment(this._builderOptions).txt(e).first().node}catch(e){return this.emit("error",e),this}if(this._options.wellFormed&&!d.xml_isLegalChar(t.data))return this.emit("error",Error("Text data contains invalid characters (well-formed required).")),this;var t,n=t.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(n)),this},t.prototype.ins=function(e,t){var n;void 0===t&&(t=""),this._serializeOpenTag(!0);try{n=c.fragment(this._builderOptions).ins(e,t).first().node}catch(e){return this.emit("error",e),this}return this._options.wellFormed&&(-1!==n.target.indexOf(":")||/^xml$/i.test(n.target))?this.emit("error",Error("Processing instruction target contains invalid characters (well-formed required).")):this._options.wellFormed&&!d.xml_isLegalChar(n.data)?this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")):this._push(this._writer.instruction(n.target,n.data)),this},t.prototype.dat=function(e){var t;this._serializeOpenTag(!0);try{t=c.fragment(this._builderOptions).dat(e).first().node}catch(e){return this.emit("error",e),this}return this._push(this._writer.cdata(t.data)),this},t.prototype.dec=function(e){return void 0===e&&(e={version:"1.0"}),this._fragment?this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")):this._hasDeclaration?this.emit("error",Error("XML declaration is already inserted.")):(this._push(this._writer.declaration(e.version||"1.0",e.encoding,e.standalone)),this._hasDeclaration=!0),this},t.prototype.dtd=function(e){var t;if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(""!==this._docTypeName)return this.emit("error",Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",Error("Cannot insert DocType declaration after document element.")),this;try{t=c.create().dtd(e).first().node}catch(e){return this.emit("error",e),this}return this._options.wellFormed&&!d.xml_isPubidChar(t.publicId)?this.emit("error",Error("DocType public identifier does not match PubidChar construct (well-formed required).")):this._options.wellFormed&&(!d.xml_isLegalChar(t.systemId)||-1!==t.systemId.indexOf('"')&&-1!==t.systemId.indexOf("'"))?this.emit("error",Error("DocType system identifier contains invalid characters (well-formed required).")):(this._docTypeName=e.name,this._push(this._writer.docType(e.name,t.publicId,t.systemId))),this},t.prototype.import=function(e){var t,n,i=c.fragment().set(this._options);try{i.import(e)}catch(e){return this.emit("error",e),this}try{for(var o=a(i.node.childNodes),s=o.next();!s.done;s=o.next()){var l=s.value;this._fromNode(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},t.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},t.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},t.prototype._serializeOpenTag=function(e){if(!this._currentElementSerialized&&void 0!==this._currentElement){var n=this._currentElement.node;if(!this._options.wellFormed||-1===n.localName.indexOf(":")&&d.xml_isName(n.localName)){var i="",o=!1,a=this._prefixMap.copy(),s={},l=this._recordNamespaceInformation(n,a,s),u=0===this._openTags.length?null:this._openTags[this._openTags.length-1][1],c=n.namespaceURI;if(null===c&&(c=u),u===c)null!==l&&(o=!0),i=c===f.namespace.XML?"xml:"+n.localName:n.localName,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i));else{var p=n.prefix,h=null;if(null===p&&c===l||(h=a.get(p,c)),"xmlns"===p){if(this._options.wellFormed)return void this.emit("error",Error("An element cannot have the 'xmlns' prefix (well-formed required)."));h=p}null!==h?(i=h+":"+n.localName,null!==l&&l!==f.namespace.XML&&(u=l||null),this._writer.beginElement(i),this._push(this._writer.openTagBegin(i))):null!==p?(p in s&&(p=this._generatePrefix(c,a,this._prefixIndex)),a.set(p,c),i+=p+":"+n.localName,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)),this._push(this._writer.attribute("xmlns:"+p,this._serializeAttributeValue(c,this._options.wellFormed))),null!==l&&(u=l||null)):null===l||null!==l&&l!==c?(o=!0,i+=n.localName,u=c,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(c,this._options.wellFormed)))):(i+=n.localName,u=c,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)))}this._serializeAttributes(n,a,this._prefixIndex,s,o,this._options.wellFormed);var m=c===f.namespace.HTML;m&&!e&&t._VoidElementNames.has(n.localName)?(this._push(this._writer.openTagEnd(i,!0,!0)),this._writer.endElement(i)):m||e?this._push(this._writer.openTagEnd(i,!1,!1)):(this._push(this._writer.openTagEnd(i,!0,!1)),this._writer.endElement(i)),this._currentElementSerialized=!0,this._openTags.push([i,u,this._prefixMap,e]),this._isPrefixMapModified(this._prefixMap,a)&&(this._prefixMap=a),this._writer.level++}else this.emit("error",Error("Node local name contains invalid characters (well-formed required)."))}},t.prototype._serializeCloseTag=function(){this._writer.level--;var e=this._openTags.pop();if(void 0!==e){var t=s(e,4),n=t[0],i=(t[1],t[2]),o=t[3];this._prefixMap=i,o&&(this._push(this._writer.closeTag(n)),this._writer.endElement(n))}else this.emit("error",Error("Last element is undefined."))},t.prototype._push=function(e){null===e?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",Error("Cannot push to ended stream.")):0!==e.length&&(this._writer.hasData=!0,this.emit("data",e,this._writer.level))},t.prototype._fromNode=function(e){var t,n,i,o;if(m.Guard.isElementNode(e)){var s=e.prefix?e.prefix+":"+e.localName:e.localName;null!==e.namespaceURI?this.ele(e.namespaceURI,s):this.ele(s);try{for(var l=a(e.attributes),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.prefix?c.prefix+":"+c.localName:c.localName;null!==c.namespaceURI?this.att(c.namespaceURI,d,c.value):this.att(d,c.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}try{for(var f=a(e.childNodes),p=f.next();!p.done;p=f.next()){var h=p.value;this._fromNode(h)}}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}this.up()}else m.Guard.isExclusiveTextNode(e)&&e.data?this.txt(e.data):m.Guard.isCommentNode(e)?this.com(e.data):m.Guard.isCDATASectionNode(e)?this.dat(e.data):m.Guard.isProcessingInstructionNode(e)&&this.ins(e.target,e.data)},t.prototype._serializeAttributes=function(e,t,n,i,o,s){var l,u,c=s?new h.LocalNameSet:void 0;try{for(var p=a(e.attributes),m=p.next();!m.done;m=p.next()){var g=m.value;if(s||o||null!==g.namespaceURI){if(s&&c&&c.has(g.namespaceURI,g.localName))return void this.emit("error",Error("Element contains duplicate attributes (well-formed required)."));s&&c&&c.set(g.namespaceURI,g.localName);var v=g.namespaceURI,y=null;if(null!==v)if(y=t.get(g.prefix,v),v===f.namespace.XMLNS){if(g.value===f.namespace.XML||null===g.prefix&&o||null!==g.prefix&&(!(g.localName in i)||i[g.localName]!==g.value)&&t.has(g.localName,g.value))continue;if(s&&g.value===f.namespace.XMLNS)return void this.emit("error",Error("XMLNS namespace is reserved (well-formed required)."));if(s&&""===g.value)return void this.emit("error",Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));"xmlns"===g.prefix&&(y="xmlns")}else null===y&&(y=null===g.prefix||t.hasPrefix(g.prefix)&&!t.has(g.prefix,v)?this._generatePrefix(v,t,n):g.prefix,this._push(this._writer.attribute("xmlns:"+y,this._serializeAttributeValue(v,this._options.wellFormed))));if(s&&(-1!==g.localName.indexOf(":")||!d.xml_isName(g.localName)||"xmlns"===g.localName&&null===v))return void this.emit("error",Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((null!==y?y+":":"")+g.localName,this._serializeAttributeValue(g.value,this._options.wellFormed)))}else this._push(this._writer.attribute(g.localName,this._serializeAttributeValue(g.value,this._options.wellFormed)))}}catch(e){l={error:e}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}},t.prototype._serializeAttributeValue=function(e,t){return t&&null!==e&&!d.xml_isLegalChar(e)?(this.emit("error",Error("Invalid characters in attribute value.")),""):null===e?"":e.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.prototype._recordNamespaceInformation=function(e,t,n){var i,o,s=null;try{for(var l=a(e.attributes),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.namespaceURI,p=c.prefix;if(d===f.namespace.XMLNS){if(null===p){s=c.value;continue}var h=c.localName,m=c.value;if(m===f.namespace.XML||(""===m&&(m=null),t.has(h,m)))continue;t.set(h,m),n[h]=m||""}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return s},t.prototype._generatePrefix=function(e,t,n){var i="ns"+n.value;return n.value++,t.set(i,e),i},t.prototype._isPrefixMapModified=function(e,t){var n=e._items,i=t._items,o=e._nullItems,a=t._nullItems;for(var s in i){var l=n[s];if(void 0===l)return!0;var u=i[s];if(l.length!==u.length)return!0;for(var c=0;c<l.length;c++)if(l[c]!==u[c])return!0}if(o.length!==a.length)return!0;for(c=0;c<o.length;c++)if(o[c]!==a[c])return!0;return!1},t._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),t}(n(308).EventEmitter)},function(e,t,n){"use strict";n(74);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.XMLCBWriter=function(e){function t(t){var n=e.call(this,t)||this;return n._lineLength=0,n}return o(t,e),t.prototype.frontMatter=function(){return""},t.prototype.declaration=function(e,t,n){var i=this._beginLine()+"<?xml";return i+=' version="'+e+'"',void 0!==t&&(i+=' encoding="'+t+'"'),void 0!==n&&(i+=' standalone="'+(n?"yes":"no")+'"'),i+"?>"},t.prototype.docType=function(e,t,n){return this._beginLine()+(t&&n?"<!DOCTYPE "+e+' PUBLIC "'+t+'" "'+n+'">':t?"<!DOCTYPE "+e+' PUBLIC "'+t+'">':n?"<!DOCTYPE "+e+' SYSTEM "'+n+'">':"<!DOCTYPE "+e+">")},t.prototype.comment=function(e){return this._beginLine()+"\x3c!--"+e+"--\x3e"},t.prototype.text=function(e){return this._beginLine()+e},t.prototype.instruction=function(e,t){return t?this._beginLine()+"<?"+e+" "+t+"?>":this._beginLine()+"<?"+e+"?>"},t.prototype.cdata=function(e){return this._beginLine()+"<![CDATA["+e+"]]>"},t.prototype.openTagBegin=function(e){return this._lineLength+=1+e.length,this._beginLine()+"<"+e},t.prototype.openTagEnd=function(e,t,n){return n?" />":t?this._writerOptions.allowEmptyTags?"></"+e+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},t.prototype.closeTag=function(e){return this._beginLine()+"</"+e+">"},t.prototype.attribute=function(e,t){var n=e+'="'+t+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+n.length>this._writerOptions.width?(n=this._beginLine()+this._indent(1)+n,this._lineLength=n.length,n):(this._lineLength+=1+n.length," "+n)},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){},t.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var e=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=e.length,e}return""},t.prototype._indent=function(e){return e<=0?"":this._writerOptions.indent.repeat(e)},t}(n(114).BaseCBWriter)},function(e,t,n){"use strict";n(74);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.JSONCBWriter=function(e){function t(t){var n=e.call(this,t)||this;return n._hasChildren=[],n._additionalLevel=0,n}return o(t,e),t.prototype.frontMatter=function(){return""},t.prototype.declaration=function(e,t,n){return""},t.prototype.docType=function(e,t,n){return""},t.prototype.comment=function(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(e)+this._sep()+"}"},t.prototype.text=function(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(e)+this._sep()+"}"},t.prototype.instruction=function(e,t){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(t?e+" "+t:e)+this._sep()+"}"},t.prototype.cdata=function(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(e)+this._sep()+"}"},t.prototype.attribute=function(e,t){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+e)+this._sep()+this._val(t)+this._sep()+"}"},t.prototype.openTagBegin=function(e){var t=this._comma()+this._beginLine()+"{"+this._sep()+this._key(e)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,t+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),t},t.prototype.openTagEnd=function(e,t,n){if(t){var i=this._sep()+"]";return this._additionalLevel--,i+(this._beginLine()+"}")+this._sep()+"}"}return""},t.prototype.closeTag=function(e){var t=this._beginLine()+"]";return this._additionalLevel--,t+(this._beginLine()+"}")+this._sep()+"}"},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){this._hasChildren.pop()},t.prototype._beginLine=function(e){return void 0===e&&(e=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+e):""},t.prototype._indent=function(e){return e+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(e+this._additionalLevel)},t.prototype._comma=function(){var e=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),e},t.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},t.prototype._key=function(e){return'"'+e+'":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(n(114).BaseCBWriter)},function(e,t,n){"use strict";n(74);var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLCBWriter=function(e){function t(t){var n=e.call(this,t)||this;if(n._rootWritten=!1,n._additionalLevel=0,t.indent.length<2)throw Error("YAML indententation string must be at least two characters long.");if(t.offset<0)throw Error("YAML offset should be zero or a positive number.");return n}return o(t,e),t.prototype.frontMatter=function(){return this._beginLine()+"---"},t.prototype.declaration=function(e,t,n){return""},t.prototype.docType=function(e,t,n){return""},t.prototype.comment=function(e){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(e)},t.prototype.text=function(e){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(e)},t.prototype.instruction=function(e,t){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(t?e+" "+t:e)},t.prototype.cdata=function(e){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(e)},t.prototype.attribute=function(e,t){this._additionalLevel++;var n=this._beginLine()+this._key(this._builderOptions.convert.att+e)+" "+this._val(t);return this._additionalLevel--,n},t.prototype.openTagBegin=function(e){var t=this._beginLine()+this._key(e);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,t+(this._beginLine(!0)+this._key(this._builderOptions.convert.text))},t.prototype.openTagEnd=function(e,t,n){return t?" "+this._val(""):""},t.prototype.closeTag=function(e){return this._additionalLevel--,""},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){},t.prototype._beginLine=function(e){return void 0===e&&(e=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,e)},t.prototype._indent=function(e,t){if(e+this._additionalLevel<=0)return"";var n=this._writerOptions.indent.repeat(e+this._additionalLevel);return!t&&this._rootWritten?n.substr(0,n.length-2)+"-"+n.substr(-1,1):n},t.prototype._key=function(e){return'"'+e+'":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(n(114).BaseCBWriter)},function(e,t,n){"use strict";var i,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,n,i){var o,a,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=d(e))>0&&s.length>o&&!s.warned){s.warned=!0;var l=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,console&&console.warn&&console.warn(l)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=p.bind(i);return o.listener=n,i.wrapFn=o,o}function m(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,l=Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var c=u.length,d=v(u,c);for(n=0;n<c;++n)a(d[n],this,t)}return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,i,o,a,s;if(c(t),void 0===(i=this._events)||void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var o,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(o=a[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},l.prototype.listeners=function(e){return m(this,e,!0)},l.prototype.rawListeners=function(e){return m(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(77);t.createCB=function(e){return new i.XMLBuilderCBImpl(e)},t.fragmentCB=function(e){return new i.XMLBuilderCBImpl(e,!0)}}])},1234:function(){},5172:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},6993:function(e,t,n){var i=n(5546);function o(){var t,n,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.toStringTag||"@@toStringTag";function u(e,o,a,s){var l=Object.create((o&&o.prototype instanceof d?o:d).prototype);return i(l,"_invoke",function(e,i,o){var a,s,l,u=0,d=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,s=0,l=t,p.n=n,c}};function h(e,i){for(s=e,l=i,n=0;!f&&u&&!o&&n<d.length;n++){var o,a=d[n],h=p.p,m=a[2];e>3?(o=m===i)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=h&&((o=e<2&&h<a[1])?(s=0,p.v=i,p.n=a[1]):h<m&&(o=e<3||a[0]>i||i>m)&&(a[4]=e,a[5]=i,p.n=m,s=0))}if(o||e>1)return c;throw f=!0,i}return function(o,d,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===d&&h(d,m),s=d,l=m;(n=s<2?t:l)||!f;){a||(s?s<3?(s>1&&(p.n=-1),h(s,l)):p.n=l:p.v=l);try{if(u=2,a){if(s||(o="next"),n=a[o]){if(!(n=n.call(a,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,s<2&&(s=0)}else 1===s&&(n=a.return)&&n.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((n=(f=p.n<0)?l:e.call(i,p))!==c)break}catch(e){a=t,s=1,l=e}finally{u=1}}return{value:n,done:f}}}(e,a,s),!0),l}var c={};function d(){}function f(){}function p(){}n=Object.getPrototypeOf;var h=p.prototype=d.prototype=Object.create([][s]?n(n([][s]())):(i(n={},s,function(){return this}),n));function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,l,"GeneratorFunction")),e.prototype=Object.create(h),e}return f.prototype=p,i(h,"constructor",p),i(p,"constructor",f),f.displayName="GeneratorFunction",i(p,l,"GeneratorFunction"),i(h),i(h,l,"Generator"),i(h,s,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(e.exports=o=function(){return{w:u,m:m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},5869:function(e,t,n){var i=n(887);e.exports=function(e,t,n,o,a){var s=i(e,t,n,o,a);return s.next().then(function(e){return e.done?e.value:s.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},887:function(e,t,n){var i=n(6993),o=n(1791);e.exports=function(e,t,n,a,s){return new o(i().w(e,t,n,a),s||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},1791:function(e,t,n){var i=n(5172),o=n(5546);e.exports=function e(t,n){var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(e,o,s){function l(){return new n(function(o,a){!function e(o,a,s,l){try{var u=t[o](a),c=u.value;return c instanceof i?n.resolve(c.v).then(function(t){e("next",t,s,l)},function(t){e("throw",t,s,l)}):n.resolve(c).then(function(e){u.value=e,s(u)},function(t){return e("throw",t,s,l)})}catch(e){l(e)}}(e,s,o,a)})}return a=a?a.then(l,l):l()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},5546:function(e){function t(n,i,o,a){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}e.exports=t=function(e,n,i,o){function a(n,i){t(e,n,function(e){return this._invoke(n,i,e)})}n?s?s(e,n,{value:i,enumerable:!o,configurable:!o,writable:!o}):e[n]=i:(a("next",0),a("throw",1),a("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,o,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4373:function(e){e.exports=function(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4633:function(e,t,n){var i=n(5172),o=n(6993),a=n(5869),s=n(887),l=n(1791),u=n(4373),c=n(579);function d(){"use strict";var t=o(),n=t.m(d),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function m(e){var t,n;return function(i){t||(t={stop:function(){return n(i.a,2)},catch:function(){return i.v},abrupt:function(e,t){return n(i.a,h[e],t)},delegateYield:function(e,o,a){return t.resultName=o,n(i.d,c(e),a)},finish:function(e){return n(i.f,e)}},n=function(e,n,o){i.p=t.prev,i.n=t.next;try{return e(n,o)}finally{t.next=i.n}}),t.resultName&&(t[t.resultName]=i.v,t.resultName=void 0),t.sent=i.v,t.next=i.n;try{return e.call(this,t)}finally{i.p=t.prev,i.n=t.next}}}return(e.exports=d=function(){return{wrap:function(e,n,i,o){return t.w(m(e),n,i,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new i(e,t)},AsyncIterator:l,async:function(e,t,n,i,o){return(p(t)?s:a)(m(e),t,n,i,o)},keys:u,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports},579:function(e,t,n){var i=n(3738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw TypeError(i(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},3738:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4756:function(e,t,n){var i=n(4633)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.amdD=function(){throw Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{LUFactor3x3:function(){return tk},LUSolve3x3:function(){return tN},Pi:function(){return eH},add:function(){return ti},angleBetweenVectors:function(){return tw},areBoundsInitialized:function(){return nd},areEquals:function(){return tU},areMatricesEqual:function(){return tz},arrayMax:function(){return e1},arrayMin:function(){return e0},arrayRange:function(){return e2},beginCombination:function(){return e9},binomial:function(){return e8},boundsIsWithinOtherBounds:function(){return nb},ceil:function(){return eJ},ceilLog2:function(){return e3},clampAndNormalizeValue:function(){return nm},clampValue:function(){return np},clampVector:function(){return nh},columnsToMat3:function(){return tD},columnsToMat4:function(){return tM},computeBoundsFromPoints:function(){return nf},createArray:function(){return eW},createUninitializedBounds:function(){return nP},cross:function(){return tf},default:function(){return nR},degreesFromRadians:function(){return eX},determinant2x2:function(){return tI},determinant3x3:function(){return tG},diagonalize3x3:function(){return t1},distance2BetweenPoints:function(){return tx},dot:function(){return tc},dot2D:function(){return ty},estimateMatrixCondition:function(){return t8},extentIsWithinOtherExtent:function(){return ny},factorial:function(){return e4},float2CssRGBA:function(){return nN},floatRGB2HexCode:function(){return nI},floatToHex2:function(){return nD},floor:function(){return eZ},gaussian:function(){return tr},gaussianAmplitude:function(){return tC},gaussianWeight:function(){return tS},getAdjustedScalarRange:function(){return nv},getMajorAxisIndex:function(){return nM},getScalarTypeFittingRange:function(){return ng},getSeed:function(){return tt},getSparseOrthogonalMatrix:function(){return nE},hex2float:function(){return nt},hsv2rgb:function(){return nr},identity:function(){return tH},identity3x3:function(){return tW},inf:function(){return nA},invert3x3:function(){return tj},invertMatrix:function(){return t6},isFinite:function(){return n_},isIdentity:function(){return tq},isIdentity3x3:function(){return tK},isInf:function(){return nS},isNaN:function(){return nT},isNan:function(){return nO},isPowerOfTwo:function(){return e6},jacobi:function(){return t9},jacobiN:function(){return tJ},lab2rgb:function(){return nu},lab2xyz:function(){return ni},ldexp:function(){return eq},linearSolve3x3:function(){return tR},luFactorLinearSystem:function(){return t3},luSolveLinearSystem:function(){return t4},matrix3x3ToQuaternion:function(){return tQ},max:function(){return e$},min:function(){return eQ},multiply3x3_mat3:function(){return tL},multiply3x3_vect3:function(){return tB},multiplyAccumulate:function(){return tl},multiplyAccumulate2D:function(){return tu},multiplyMatrix:function(){return tF},multiplyQuaternion:function(){return t$},multiplyScalar:function(){return ta},multiplyScalar2D:function(){return ts},nearestPowerOfTwo:function(){return e5},negInf:function(){return nC},nextCombination:function(){return e7},norm:function(){return tp},norm2D:function(){return tT},normalize:function(){return th},normalize2D:function(){return tO},normalize4D:function(){return tm},orthogonalize3x3:function(){return t0},outer:function(){return td},outer2D:function(){return t_},perpendiculars:function(){return tg},pointIsWithinBounds:function(){return nx},projectVector:function(){return tv},projectVector2D:function(){return tb},quaternionToMatrix3x3:function(){return tX},radiansFromDegrees:function(){return eK},random:function(){return tn},randomSeed:function(){return te},rgb2hsv:function(){return nn},rgb2lab:function(){return nl},rgb2xyz:function(){return ns},round:function(){return eY},roundNumber:function(){return tY},roundVector:function(){return tZ},rowsToMat3:function(){return tE},rowsToMat4:function(){return tP},signedAngleBetweenVectors:function(){return tA},singularValueDecomposition3x3:function(){return t2},solve3PointCircle:function(){return nw},solveHomogeneousLeastSquares:function(){return t7},solveLeastSquares:function(){return ne},solveLinearSystem:function(){return t5},subtract:function(){return to},transpose3x3:function(){return tV},uninitializeBounds:function(){return nc},xyz2lab:function(){return no},xyz2rgb:function(){return na}});var t={};n.r(t),n.d(t,{add:function(){return ri},angle:function(){return rk},bezier:function(){return r_},ceil:function(){return rl},clone:function(){return n7},copy:function(){return rn},create:function(){return n9},cross:function(){return rA},dist:function(){return rU},distance:function(){return rm},div:function(){return rG},divide:function(){return rs},dot:function(){return rw},equals:function(){return rL},exactEquals:function(){return rB},floor:function(){return ru},forEach:function(){return rq},fromValues:function(){return rt},hermite:function(){return rS},inverse:function(){return rb},len:function(){return rW},length:function(){return re},lerp:function(){return rC},max:function(){return rd},min:function(){return rc},mul:function(){return rj},multiply:function(){return ra},negate:function(){return ry},normalize:function(){return rx},random:function(){return rT},rotateX:function(){return rE},rotateY:function(){return rD},rotateZ:function(){return rI},round:function(){return rf},scale:function(){return rp},scaleAndAdd:function(){return rh},set:function(){return rr},sqrDist:function(){return rz},sqrLen:function(){return rH},squaredDistance:function(){return rg},squaredLength:function(){return rv},str:function(){return rR},sub:function(){return rV},subtract:function(){return ro},transformMat3:function(){return rP},transformMat4:function(){return rO},transformQuat:function(){return rM},zero:function(){return rN}});var i={};n.r(i),n.d(i,{add:function(){return oY},adjoint:function(){return oh},clone:function(){return os},copy:function(){return ol},create:function(){return oa},determinant:function(){return om},equals:function(){return o0},exactEquals:function(){return o$},frob:function(){return oX},fromQuat:function(){return oB},fromQuat2:function(){return oE},fromRotation:function(){return o_},fromRotationTranslation:function(){return oM},fromRotationTranslationScale:function(){return oN},fromRotationTranslationScaleOrigin:function(){return oR},fromScaling:function(){return oS},fromTranslation:function(){return oC},fromValues:function(){return ou},fromXRotation:function(){return oT},fromYRotation:function(){return oO},fromZRotation:function(){return oP},frustum:function(){return oL},getRotation:function(){return ok},getScaling:function(){return oI},getTranslation:function(){return oD},identity:function(){return od},invert:function(){return op},lookAt:function(){return oH},mul:function(){return o1},multiply:function(){return og},multiplyScalar:function(){return oJ},multiplyScalarAndAdd:function(){return oQ},ortho:function(){return oz},orthoNO:function(){return oU},orthoZO:function(){return oW},perspective:function(){return oV},perspectiveFromFieldOfView:function(){return oG},perspectiveNO:function(){return oF},perspectiveZO:function(){return oj},rotate:function(){return ob},rotateX:function(){return ox},rotateY:function(){return ow},rotateZ:function(){return oA},scale:function(){return oy},set:function(){return oc},str:function(){return oK},sub:function(){return o2},subtract:function(){return oZ},targetTo:function(){return oq},translate:function(){return ov},transpose:function(){return of}});var o={};n.r(o),n.d(o,{add:function(){return av},adjoint:function(){return an},clone:function(){return o5},copy:function(){return o6},create:function(){return o3},determinant:function(){return ar},equals:function(){return aA},exactEquals:function(){return aw},frob:function(){return ag},fromMat2d:function(){return ad},fromMat4:function(){return o4},fromQuat:function(){return af},fromRotation:function(){return au},fromScaling:function(){return ac},fromTranslation:function(){return al},fromValues:function(){return o8},identity:function(){return o7},invert:function(){return at},mul:function(){return aC},multiply:function(){return ai},multiplyScalar:function(){return ab},multiplyScalarAndAdd:function(){return ax},normalFromMat4:function(){return ap},projection:function(){return ah},rotate:function(){return aa},scale:function(){return as},set:function(){return o9},str:function(){return am},sub:function(){return aS},subtract:function(){return ay},translate:function(){return ao},transpose:function(){return ae}});var a=[];a[45]=62,a[95]=63;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;l++)a[s.charCodeAt(l)]=l;function u(e){return void 0!==a[e.charCodeAt(0)]}function c(e,t,n){var i=(e<<16)+(t<<8)+n;return s[i>>18]+s[i>>12&63]+s[i>>6&63]+s[63&i]}function d(e){for(var t=new Uint8Array(e),n=e.byteLength%3,i=e.byteLength-n,o=Array(i/3),a=0;a<o.length;a++){var s=3*a;o[a]=c(t[s],t[s+1],t[s+2])}if(n>0){var l=c(t[i],t[i+1]||0,t[i+2]||0);1===n?o.push("".concat(l.substr(0,2),"==")):2===n&&o.push("".concat(l.substr(0,3),"="))}return o.join("")}var f={toArrayBuffer:function(e){for(var t=function(e){for(var t=e.length,n=[],i=null,o=0;o<t;o++)u(e[o])?(i||(i={start:o,count:0}),i.count++,i.end=o):"="===e[o]&&i&&(n.push(i),i=null);return i&&n.push(i),n}(e),n=t[t.length-1].end+1,i=(4-n%4)%4,o=new ArrayBuffer(3*(n+i)/4-i),s=new Uint8Array(o),l=0,c=0;c<t.length;c++)l+=function(e,t,n,i){for(var o=t.start,s=t.count,l=Math.floor(s/4),c=o,d=null,f=n,p=0;p<l;p++){for(;!u(e[c]);)c++;for(d=a[e.charCodeAt(c++)]<<18;!u(e[c]);)c++;for(d|=a[e.charCodeAt(c++)]<<12;!u(e[c]);)c++;for(d|=a[e.charCodeAt(c++)]<<6;!u(e[c]);)c++;d|=a[e.charCodeAt(c++)],i[f++]=d>>16&255,i[f++]=d>>8&255,i[f++]=255&d}switch(s%4){case 3:for(;!u(e[c]);)c++;for(d=a[e.charCodeAt(c++)]<<10;!u(e[c]);)c++;for(d|=a[e.charCodeAt(c++)]<<4;!u(e[c]);)c++;d|=a[e.charCodeAt(c++)]>>2,i[f++]=d>>8&255,i[f++]=255&d;break;case 2:for(;!u(e[c]);)c++;for(d=a[e.charCodeAt(c++)]<<2;!u(e[c]);)c++;d|=a[e.charCodeAt(c++)]>>4,i[f++]=255&d;break;case 1:throw Error("BASE64: remain 1 should not happen")}return f}(e,t[c],l,s),l+=(4-t[c].count%4)%4;return o},fromArrayBuffer:d};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=g(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||h(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){if(x())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var o=new(e.bind.apply(e,i));return n&&w(o,n.prototype),o}var C=n(2017),S=n.n(C),_=n(170);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var O=n.n(_)()(),P={vtkObject:function(){return null}};function M(e){if(null==e||e.isA)return e;if(!e.vtkClass)return O.console&&O.console.error&&O.console.error("Invalid VTK object"),null;var t=P[e.vtkClass];if(!t)return O.console&&O.console.error&&O.console.error("No vtk class found for Object of type ".concat(e.vtkClass)),null;var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);Object.keys(n).forEach(function(e){n[e]&&"object"===g(n[e])&&n[e].vtkClass&&(n[e]=M(n[e]))});var i=t(n);return i&&i.modified&&i.modified(),i}function E(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function I(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(){return(N="u">typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(null,arguments)}function R(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function B(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return B(e)}function F(e){var t="function"==typeof Map?new Map:void 0;return(F=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)})(e)}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(V=function(){return!!e})()}M.register=function(e,t){P[e]=t};var j=function(e){R(i,e);var t,n=(t=V(),function(){var e,n=k(i);return e=t?Reflect.construct(n,arguments,k(this).constructor):n.apply(this,arguments),L(this,e)});function i(){return E(this,i),n.apply(this,arguments)}return I(i,[{key:"push",value:function(){for(var e=0;e<arguments.length;e++)this.includes(arguments[e])||N(k(i.prototype),"push",this).call(this,arguments[e]);return this.length}}]),i}(F(Array));function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=0,W=function(e){throw Error("Named parameter '".concat(e,"' is missing"))},H=Symbol("void"),q={};function K(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(function(e){q[e]=K}),O.console=console.hasOwnProperty("log")?console:q;var X={debug:K,error:O.console.error||K,info:O.console.info||K,log:O.console.log||K,warn:O.console.warn||K};function Y(){X.debug.apply(X,arguments)}function Z(){X.error.apply(X,arguments)}function J(){X.warn.apply(X,arguments)}var Q={},$=Object.create(null);$.Float32Array=Float32Array,$.Float64Array=Float64Array,$.Uint8Array=Uint8Array,$.Int8Array=Int8Array,$.Uint16Array=Uint16Array,$.Int16Array=Int16Array,$.Uint32Array=Uint32Array,$.Int32Array=Int32Array,$.Uint8ClampedArray=Uint8ClampedArray;try{$.BigInt64Array=BigInt64Array,$.BigUint64Array=BigUint64Array}catch(e){}function ee(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return A($[e]||Float64Array,n)}function et(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(t=$[e]||Float64Array).from.apply(t,i)}function en(e){return e.charAt(0).toUpperCase()+e.slice(1)}function er(e){return en("_"===e[0]?e.slice(1):e)}function ei(e){Object.keys(e).forEach(function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))})}function eo(e){return e&&e.isA?e.getState():e}function ea(e){setTimeout(e,0)}function es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ei(t);var n=[];if(Number.isInteger(t.mtime)||(t.mtime=++z),"classHierarchy"in t){if(!(t.classHierarchy instanceof j)){for(var i=new j,o=0;o<t.classHierarchy.length;o++)i.push(t.classHierarchy[o]);t.classHierarchy=i}}else t.classHierarchy=new j("vtkObject");return e.isDeleted=function(){return!!t.deleted},e.modified=function(i){t.deleted?Z("instance deleted - cannot call any method"):i&&i<e.getMTime()||(t.mtime=++z,n.forEach(function(t){return t&&t(e)}))},e.onModified=function(e){if(t.deleted)return Z("instance deleted - cannot call any method"),null;var i=n.length;return n.push(e),Object.freeze({unsubscribe:function(){n[i]=null}})},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var n=t.classHierarchy.length;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return Object.keys(n).forEach(function(s){var l=o?null:e["set".concat(en(s))];l&&Array.isArray(n[s])&&l.length>1?a=l.apply(void 0,m(n[s]))||a:l?a=l(n[s])||a:(-1!==["mtime"].indexOf(s)||i||J("Warning: Set value to model directly ".concat(s,", ").concat(n[s])),a=t[s]!==n[s]||a,t[s]=n[s])}),a},e.get=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return t;var o={};return n.forEach(function(e){o[e]=t[e]}),o},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach(function(e){return delete t[e]}),n.forEach(function(e,t){n[t]=null}),t.deleted=!0},e.getState=function(){if(t.deleted)return null;var n=U(U({},t),{},{vtkClass:e.getClassName()});Object.keys(n).forEach(function(e){var t;null===n[e]||void 0===n[e]||"_"===e[0]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])?n[e]=n[e].map(eo):(t=n[e],Object.values($).some(function(e){return t instanceof e})&&(n[e]=Array.from(n[e])))});var i={};return Object.keys(n).sort().forEach(function(e){i[e]=n[e]}),i.mtime&&delete i.mtime,i},e.shallowCopy=function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));var o=n.get(),a=Object.keys(t).sort();Object.keys(o).sort().forEach(function(e){var n=a.indexOf(e);-1===n?i&&Y("add ".concat(e," in shallowCopy")):a.splice(n,1),t[e]=o[e]}),a.length&&i&&Y("Untouched keys: ".concat(a.join(", "))),e.modified()},e.toJSON=function(){return e.getState()},e}var el={object:function(e,t,n){return function(){return U({},t[n.name])}}};function eu(e,t,n){n.forEach(function(n){if("object"===g(n)){var i=el[n.type];e["get".concat(er(n.name))]=i?i(e,t,n):function(){return t[n.name]}}else e["get".concat(er(n))]=function(){return t[n]}})}var ec={enum:function(e,t,n){var i="_on".concat(er(n.name),"Changed");return function(o){if("string"==typeof o){if(void 0!==n.enum[o])return t[n.name]!==n.enum[o]&&(t[n.name]=n.enum[o],e.modified(),!0);throw Z("Set Enum with invalid argument ".concat(n,", ").concat(o)),RangeError("Set Enum with invalid string argument")}if("number"==typeof o){if(t[n.name]!==o){if(-1!==Object.keys(n.enum).map(function(e){return n.enum[e]}).indexOf(o)){var a,s=t[n.name];return t[n.name]=o,null==(a=t[i])||a.call(t,e,t,o,s),e.modified(),!0}throw Z("Set Enum outside numeric range ".concat(n,", ").concat(o)),RangeError("Set Enum outside numeric range")}return!1}throw Z("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(o)),TypeError("Set Enum with invalid argument (String/Number)")}},object:function(e,t,n){1===(null==(i=n.params)?void 0:i.length)&&J('Setter of type "object" with a single "param" field is not supported');var i,o="_on".concat(er(n.name),"Changed");return function(){for(var i,a,s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];if(a=l.length>1&&null!=(i=n.params)&&i.length?n.params.reduce(function(e,t,n){return Object.assign(e,y({},t,l[n]))},{}):l[0],!S()(t[n.name],a)){var c,d=t[n.name];return t[n.name]=a,null==(c=t[o])||c.call(t,e,t,a,d),e.modified(),!0}return!1}}};function ed(e){if("object"===g(e)){var t=ec[e.type];if(t)return function(n,i){return t(n,i,e)};throw Z("No setter for field ".concat(e)),TypeError("No setter for field")}return function(t,n){var i="_on".concat(er(e),"Changed");return function(o){if(n.deleted)return Z("instance deleted - cannot call any method"),!1;if(n[e]!==o){var a,s=n[e.name];return n[e]=o,null==(a=n[i])||a.call(n,t,n,o,s),t.modified(),!0}return!1}}}function ef(e,t,n){n.forEach(function(n){"object"===g(n)?e["set".concat(er(n.name))]=ed(n)(e,t):e["set".concat(er(n))]=ed(n)(e,t)})}function ep(e,t,n){eu(e,t,n),ef(e,t,n)}function eh(e,t,n){n.forEach(function(n){e["get".concat(er(n))]=function(){return t[n]?Array.from(t[n]):t[n]},e["get".concat(er(n),"ByReference")]=function(){return t[n]}})}function em(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach(function(n){if(t[n]&&i&&t[n].length!==i)throw RangeError("Invalid initial number of values for array (".concat(n,")"));var a="_on".concat(er(n),"Changed");e["set".concat(er(n))]=function(){if(t.deleted)return Z("instance deleted - cannot call any method"),!1;for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];var c,d=l,f=!1;if(1===d.length&&(null==d[0]||d[0].length>=0)&&(d=d[0],f=!0),null==d)c=t[n]!==d;else{if(i&&d.length!==i){if(!(d.length<i&&void 0!==o))throw RangeError("Invalid number of values for array setter (".concat(n,")"));for(d=Array.from(d),f=!1;d.length<i;)d.push(o)}c=null==t[n]||t[n].length!==d.length;for(var p=0;!c&&p<d.length;++p)c=t[n][p]!==d[p];c&&f&&(d=Array.from(d))}if(c){var h,m=t[n.name];t[n]=d,null==(h=t[a])||h.call(t,e,t,d,m),e.modified()}return c},e["set".concat(er(n),"From")]=function(e){var i=t[n];e.forEach(function(e,t){i[t]=e})}})}function eg(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;eh(e,t,n),em(e,t,n,i,o)}function ev(e,t,n){for(var i=0;i<n.length;i++){var o=n[i];void 0!==t[o]&&(t["_".concat(o)]=t[o],delete t[o])}}function ey(e,t,n,i){function o(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?Z("instance deleted - cannot call any method"):i>=t.numberOfInputs?Z("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[i]!==n||t.inputConnection[i])&&(t.inputData[i]=n,t.inputConnection[i]=null,e.modified&&e.modified())}function a(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)Z("instance deleted - cannot call any method");else{if(i>=t.numberOfInputs){var o="algorithm ".concat(e.getClassName()," only has ");return o+="".concat(t.numberOfInputs),void Z(o+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[i]=null,t.inputConnection[i]=n}}function s(){for(var e=t.numberOfInputs;e&&!t.inputData[e-1]&&!t.inputConnection[e-1];)e--;return e===t.numberOfInputs&&t.numberOfInputs++,e}function l(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(Z("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(M):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(M):t.inputConnection=[],t.output?t.output=t.output.map(M):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(M):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=function(){for(var n,o,a=e.getMTime(),s=1/0,l=i;l--;){if(!t.output[l]||t.output[l].isDeleted())return!0;var u=t.output[l].getMTime();if(u<a)return!0;u<s&&(s=u)}for(l=t.numberOfInputs;l--;)if(null!=(n=t.inputConnection[l])&&n.filter.shouldUpdate()||(null==(o=e.getInputData(l))?void 0:o.getMTime())>s)return!0;return!1},t.numberOfInputs){for(var u=t.numberOfInputs;u--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=o,e.setInputConnection=a,e.addInputData=function(e){t.deleted?Z("instance deleted - cannot call any method"):o(e,s())},e.addInputConnection=function(e){t.deleted?Z("instance deleted - cannot call any method"):a(e,s())},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}i&&(e.getOutputData=l,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(){return l(t)};return n.filter=e,n}),e.update=function(){var n=[];if(t.numberOfInputs)for(var i=0;i<t.numberOfInputs;)n[i]=e.getInputData(i),i++;e.requestData&&!e.isDeleted()&&e.shouldUpdate()&&e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return i||t.output.length},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],i=t.inputData[e];return n&&i?i["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:i,attributeType:o}}}var eb=Symbol("Event abort");function ex(e,t,n){var i=[],o=e.delete,a=1;function s(e){for(var t=0;t<i.length;++t)if(b(i[t],1)[0]===e)return void i.splice(t,1)}e["invoke".concat(er(n))]=function(){var n=arguments;if(t.deleted)Z("instance deleted - cannot call any method");else for(var o,a=i.slice(),s=0;s<a.length&&(0===(o=function(){var t=b(a[s],3),i=t[1],o=t[2];if(!i)return 0;if(o<0)setTimeout(function(){return i.apply(e,n)},1-o);else if(i.apply(e,n)===eb)return 1}())||1!==o);++s);},e["on".concat(er(n))]=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return Z("instance deleted - cannot call any method"),null;var l=a++;return i.push([l,e,o]),i.sort(function(e,t){return t[2]-e[2]}),Object.freeze({unsubscribe:function(){s(l)}})},e.delete=function(){o(),i.forEach(function(e){return s(b(e,1)[0])})}}function ew(e,t){var n=function(){var t={};return e(t,{},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Object.freeze(t)};return t&&M.register(t,n),n}function eA(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.filter(function(e){return!!e}).map(function(e){return e.apply(void 0,n)})}}function eC(e){return e&&e.isA&&e.isA("vtkObject")}function eS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(eC(e)){if(i.indexOf(e)>=0)return n;i.push(e);var o=t(e);void 0!==o&&n.push(o);var a=e.get();Object.keys(a).forEach(function(e){var o=a[e];Array.isArray(o)?o.forEach(function(e){eS(e,t,n,i)}):eS(o,t,n,i)})}return n}function e_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=function(e,n){t.keystore[e]=n},e.getKey=function(e){return t.keystore[e]},e.getAllKeys=function(){return Object.keys(t.keystore)},e.deleteKey=function(e){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach(function(e){return delete t.keystore[e]})}}var eT=1,eO="__root__";function eP(e,t){e_(e,t);var n=e.delete;t.proxyId="".concat(eT++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),eu(e,t,["proxyId","proxyGroup","proxyName"]),ep(e,t,["proxyManager"]);var i={},o={};function a(e,t){o[t]||(o[t]=[]);for(var n=o[t],s=0;s<e.length;s++)n.push(e[s].name),i[e[s].name]=e[s],e[s].children&&e[s].children.length&&a(e[s].children,e[s].name)}function s(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eO,i=[],a=t.proxyId,l=function(){return o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:eO]}(n)||[],u=0;u<l.length;u++){var c=l[u],d=e["get".concat(er(c))],f={id:a,name:c,value:d?d():void 0},p=s(c);p.length&&(f.children=p),i.push(f)}return i}a(t.ui,eO),e.updateUI=function(n){t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(i).forEach(function(e){return delete i[e]}),Object.keys(o).forEach(function(e){return delete o[e]}),a(t.ui,eO),e.modified()},e.updateProxyProperty=function(e,t){var n=i[e];n?Object.assign(n,t):i[e]=U({},t)},e.activate=function(){if(t.proxyManager){var n="setActive".concat(er(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,n){n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=function(n){for(var i=t.propertyLinkSubscribers[n]||[];i.length;)i.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var i=null,o=[],a=0,s=!1;function l(n){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s)return null;var u=[],c=null;for(a=o.length;a--;){var d=o[a];d.instance===n?c=d:u.push(d)}if(!c)return null;var f=c.instance["get".concat(er(c.propertyName))]();if(!function(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}(f,i)||l){for(i=f,s=!0;u.length;){var p=u.pop();p.instance.set(y({},p.propertyName,i))}s=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=f),f}function u(e,t){var n=[];for(a=o.length;a--;){var i=o[a];i.instance!==e||i.propertyName!==t&&void 0!==t||(i.subscription.unsubscribe(),n.push(a))}for(;n.length;)o.splice(n.pop(),1)}var c={bind:function(n,i){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=n.onModified(l),c=o[0];return o.push({instance:n,propertyName:i,subscription:s}),a&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set(y({},i,t.propertyLinkMap[e].value)):c&&l(c.instance,!0)),{unsubscribe:function(){return u(n,i)}}},unbind:u,unsubscribe:function(){for(;o.length;)o.pop().subscription.unsubscribe()},persistent:n};return t.propertyLinkMap[e]=c,c},e.listPropertyNames=function(){return s().map(function(e){return e.name})},e.getPropertyByName=function(e){return s().find(function(t){return t.name===e})},e.getPropertyDomainByName=function(e){return(i[e]||{}).domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:s()}},e.delete=function(){for(var i=Object.keys(t.propertyLinkMap),o=i.length;o--;)t.propertyLinkMap[i[o]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},e.getState=function(){return null},ea(function(){if(t.links)for(var n=0;n<t.links.length;n++){var i=t.links[n],o=i.link,a=i.property,s=i.persistent,l=i.updateOnBind;if("application"===i.type){var u=t.proxyManager.getPropertyLink(o,s);e.registerPropertyLinkForGC(u,"application"),u.bind(e,a,l)}}})}function eM(e,t,n){for(var i=e.delete,o=[],a=Object.keys(n),s=a.length;s--;){var l=a[s],u=n[l],c=u.modelKey,d=u.property,f=u.modified,p=void 0===f||f,h=er(d),m=er(l);e["get".concat(m)]=t[c]["get".concat(h)],e["set".concat(m)]=t[c]["set".concat(h)],p&&o.push(t[c].onModified(e.modified))}e.delete=function(){for(;o.length;)o.pop().unsubscribe();i()}}var eE={algo:ey,capitalize:en,chain:eA,debounce:function(e,t,n){var i,o=this,a=function(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(o,s)},t),u&&e.apply(o,s)};return a.cancel=function(){return clearTimeout(i)},a},enumToString:function(e,t){return Object.keys(e).find(function(n){return e[n]===t})},event:ex,EVENT_ABORT:eb,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=["TB","GB","MB","KB"],o=Number(e),a="B";o>n;)o/=n,a=i.pop();return"".concat(o.toFixed(t)," ").concat(a)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],i=e;i>1e3;)n.push("000".concat(i%1e3).slice(-3)),i=Math.floor(i/1e3);return i>0&&n.push(i),n.reverse(),n.join(t)},get:eu,getArray:eh,getCurrentGlobalMTime:function(){return z},getStateArrayMapFunc:eo,isVtkObject:eC,keystore:e_,measurePromiseExecution:function(e,t){var n=performance.now();e.finally(function(){t(performance.now()-n)})},moveToProtected:ev,newInstance:ew,newTypedArray:ee,newTypedArrayFrom:et,normalizeWheel:function(e){var t=0,n=0,i=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||o)&&e.deltaMode&&(1===e.deltaMode?(i*=40,o*=40):(i*=800,o*=800)),i&&!t&&(t=i<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n||t,pixelX:i,pixelY:o||i}},obj:es,proxy:eP,proxyPropertyMapping:eM,proxyPropertyState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.this=e;for(var o=Object.keys(i),a=o.length;a--;)!function(){var s=o[a];t[s]=i[s];var l=n[s];e["set".concat(er(s))]=function(n){n!==t[s]&&(t[s]=n,function(e){for(var n=Object.keys(e),i=n.length;i--;){var o=n[i];t[o].set(e[o])}}(l[n]),e.modified())}}();o.length&&eu(e,t,o)},safeArrays:ei,set:ef,setArray:em,setGet:ep,setGetArray:eg,setImmediate:ea,setLoggerFunction:function(e,t){X[e]&&(X[e]=t||K)},throttle:function(e,t){var n=!1,i=null;function o(){n=!1,null!==i&&(a.apply(void 0,m(i)),i=null)}function a(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];n?i=s:(n=!0,e.apply(void 0,s),setTimeout(o,t))}return a},traverseInstanceTree:eS,TYPED_ARRAYS:$,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:H,vtkDebugMacro:Y,vtkErrorMacro:Z,vtkInfoMacro:function(){X.info.apply(X,arguments)},vtkLogMacro:function(){X.log.apply(X,arguments)},vtkOnceErrorMacro:function(e){Q[e]||(X.error(e),Q[e]=!0)},vtkWarningMacro:J,objectSetterMap:ec,requiredParam:W},eD={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},eI={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},ek={DefaultDataType:eI.FLOAT,DataTypeByteSize:eD,VtkDataTypes:eI},eN=n(7391),eR=n.n(eN),eB=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],eL=[1,0,0,0,1,0,0,0,1],eF=eE.vtkErrorMacro,eV=eE.vtkWarningMacro,ej=0;function eG(e){return function(){return eF("vtkMath::".concat(e," - NOT IMPLEMENTED"))}}function eU(e,t,n,i){for(var o,a=0;a<t;a++)o=e[n*t+a],e[n*t+a]=e[i*t+a],e[i*t+a]=o}function ez(e,t,n,i){for(var o,a=0;a<t;a++)o=e[a*t+n],e[a*t+n]=e[a*t+i],e[a*t+i]=o}function eW(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=Array(e),n=0;n<e;++n)t[n]=0;return t}var eH=function(){return Math.PI};function eq(e,t){return t>1023?898846567431158e293*e*Math.pow(2,t-1023):t<-1074?5e-324*e*Math.pow(2,t+1074):e*Math.pow(2,t)}function eK(e){return e/180*Math.PI}function eX(e){return 180*e/Math.PI}var eY=Math.round,eZ=Math.floor,eJ=Math.ceil,eQ=Math.min,e$=Math.max;function e0(e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=1/0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.length;i<o;i+=t)e[i]<n&&(n=e[i]);return n}function e1(e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=-1/0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.length;i<o;i+=t)n<e[i]&&(n=e[i]);return n}function e2(e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=1/0,i=-1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.length;o<a;o+=t)e[o]<n&&(n=e[o]),i<e[o]&&(i=e[o]);return[n,i]}var e3=eG("ceilLog2"),e4=eG("factorial");function e5(e){for(var t=1;t<e;)t*=2;return t}function e6(e){return e===e5(e)}function e8(e,t){for(var n=1,i=1;i<=t;++i)n*=(e-i+1)/i;return Math.floor(n)}function e9(e,t){if(e<t)return 0;for(var n=eW(t),i=0;i<t;++i)n[i]=i;return n}function e7(e,t,n){for(var i=0,o=t-1;o>=0;--o)if(n[o]<e-t+o){for(var a=n[o]+1;o<t;)n[o++]=a++;i=1;break}return i}function te(e){eR()("".concat(e),{global:!0}),ej=e}function tt(){return ej}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-e)*Math.random()}var tr=eG("gaussian");function ti(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function to(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function ta(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function ts(e,t){return e[0]*=t,e[1]*=t,e}function tl(e,t,n,i){return i[0]=e[0]+t[0]*n,i[1]=e[1]+t[1]*n,i[2]=e[2]+t[2]*n,i}function tu(e,t,n,i){return i[0]=e[0]+t[0]*n,i[1]=e[1]+t[1]*n,i}function tc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function td(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[0]*t[2],n[3]=e[1]*t[0],n[4]=e[1]*t[1],n[5]=e[1]*t[2],n[6]=e[2]*t[0],n[7]=e[2]*t[1],n[8]=e[2]*t[2]}function tf(e,t,n){var i=e[1]*t[2]-e[2]*t[1],o=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return n[0]=i,n[1]=o,n[2]=a,n}function tp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,i=0;i<t;i++)n+=e[i]*e[i];return Math.sqrt(n)}}function th(e){var t=tp(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function tm(e){var t=tp(e,3);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t,e[3]/=t),t}function tg(e,t,n,i){var o,a,s,l=e[0]*e[0],u=e[1]*e[1],c=e[2]*e[2],d=Math.sqrt(l+u+c);l>u&&l>c?(o=0,a=1,s=2):u>c?(o=1,a=2,s=0):(o=2,a=0,s=1);var f=e[o]/d,p=e[a]/d,h=e[s]/d,m=Math.sqrt(f*f+h*h);if(0!==i){var g=Math.sin(i),v=Math.cos(i);t&&(t[o]=(h*v-f*p*g)/m,t[a]=g*m,t[s]=(-f*v-p*h*g)/m),n&&(n[o]=(-h*g-f*p*v)/m,n[a]=v*m,n[s]=(f*g-p*h*v)/m)}else t&&(t[o]=h/m,t[a]=0,t[s]=-f/m),n&&(n[o]=-f*p/m,n[a]=m,n[s]=-p*h/m)}function tv(e,t,n){var i=tc(t,t);if(0===i)return n[0]=0,n[1]=0,n[2]=0,!1;for(var o=tc(e,t)/i,a=0;a<3;a++)n[a]=t[a];return ta(n,o),!0}function ty(e,t){return e[0]*t[0]+e[1]*t[1]}function tb(e,t,n){var i=ty(t,t);if(0===i)return n[0]=0,n[1]=0,!1;for(var o=ty(e,t)/i,a=0;a<2;a++)n[a]=t[a];return ts(n,o),!0}function tx(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function tw(e,t){var n=[0,0,0];return tf(e,t,n),Math.atan2(tp(n),tc(e,t))}function tA(e,t,n){var i=[0,0,0];tf(e,t,i);var o=Math.atan2(tp(i),tc(e,t));return tc(i,n)>=0?o:-o}function tC(e,t,n){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-Math.pow(Math.abs(e-n),2)/(2*t))}function tS(e,t,n){return Math.exp(-Math.pow(Math.abs(e-n),2)/(2*t))}function t_(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[1]*t[0],n[3]=e[1]*t[1]}function tT(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function tO(e){var t=tT(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function tP(e,t,n,i,o){for(var a=0;a<4;a++)o[a]=e[a],o[4+a]=t[a],o[8+a]=n[a],o[12+a]=i[a];return o}function tM(e,t,n,i,o){for(var a=0;a<4;a++)o[4*a]=e[a],o[4*a+1]=t[a],o[4*a+2]=n[a],o[4*a+3]=i[a];return o}function tE(e,t,n,i){for(var o=0;o<3;o++)i[o]=e[o],i[3+o]=t[o],i[6+o]=n[o];return i}function tD(e,t,n,i){for(var o=0;o<3;o++)i[3*o]=e[o],i[3*o+1]=t[o],i[3*o+2]=n[o];return i}function tI(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:NaN}function tk(e,t){for(var n,i,o,a=[0,0,0],s=0;s<3;s++)o=Math.abs(e[3*s]),(i=Math.abs(e[3*s+1]))>o&&(o=i),(i=Math.abs(e[3*s+2]))>o&&(o=i),a[s]=1/o;o=a[0]*Math.abs(e[0]),n=0,(i=a[1]*Math.abs(e[3]))>=o&&(o=i,n=1),(i=a[2]*Math.abs(e[6]))>=o&&(n=2),0!==n&&(eU(e,3,n,0),a[n]=a[0]),t[0]=n,e[3]/=e[0],e[6]/=e[0],e[4]-=e[3]*e[1],e[7]-=e[6]*e[1],o=a[1]*Math.abs(e[4]),n=1,(i=a[2]*Math.abs(e[7]))>=o&&(n=2,eU(e,3,1,2),a[2]=a[1]),t[1]=n,e[7]/=e[4],e[5]-=e[3]*e[2],e[8]-=e[6]*e[2]+e[7]*e[5],t[2]=2}function tN(e,t,n){var i=n[t[0]];n[t[0]]=n[0],n[0]=i,i=n[t[1]],n[t[1]]=n[1],n[1]=i-e[3]*n[0],i=n[t[2]],n[t[2]]=n[2],n[2]=i-e[6]*n[0]-e[7]*n[1],n[2]/=e[8],n[1]=(n[1]-e[5]*n[2])/e[4],n[0]=(n[0]-e[1]*n[1]-e[2]*n[2])/e[0]}function tR(e,t,n){var i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5],c=e[6],d=e[7],f=e[8],p=+tI(l,d,u,f),h=-tI(s,c,u,f),m=+tI(s,c,l,d),g=-tI(o,d,a,f),v=+tI(i,c,a,f),y=-tI(i,c,o,d),b=+tI(o,l,a,u),x=-tI(i,s,a,u),w=+tI(i,s,o,l),A=i*p+o*h+a*m,C=p*t[0]+g*t[1]+b*t[2],S=h*t[0]+v*t[1]+x*t[2],_=m*t[0]+y*t[1]+w*t[2];n[0]=C/A,n[1]=S/A,n[2]=_/A}function tB(e,t,n){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],o=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],a=e[6]*t[0]+e[7]*t[1]+e[8]*t[2];n[0]=i,n[1]=o,n[2]=a}function tL(e,t,n){for(var i=m(e),o=m(t),a=0;a<3;a++)n[a]=i[0]*o[a]+i[1]*o[a+3]+i[2]*o[a+6],n[a+3]=i[3]*o[a]+i[4]*o[a+3]+i[5]*o[a+6],n[a+6]=i[6]*o[a]+i[7]*o[a+3]+i[8]*o[a+6]}function tF(e,t,n,i,o,a,s){i!==o&&eF("Number of columns of A must match number of rows of B.");for(var l=m(e),u=m(t),c=0;c<n;c++)for(var d=0;d<a;d++){s[c*a+d]=0;for(var f=0;f<i;f++)s[c*a+d]+=l[c*i+f]*u[d+a*f]}}function tV(e,t){var n;n=e[3],t[3]=e[1],t[1]=n,n=e[6],t[6]=e[2],t[2]=n,n=e[7],t[7]=e[5],t[5]=n,t[0]=e[0],t[4]=e[4],t[8]=e[8]}function tj(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=+tI(s,c,l,d),p=-tI(a,u,l,d),h=+tI(a,u,s,c),m=-tI(i,c,o,d),g=+tI(n,u,o,d),v=-tI(n,u,i,c),y=+tI(i,s,o,l),b=-tI(n,a,o,l),x=+tI(n,a,i,s),w=n*f+i*p+o*h;0===w&&eV("Matrix has 0 determinant"),t[0]=f/w,t[3]=p/w,t[6]=h/w,t[1]=m/w,t[4]=g/w,t[7]=v/w,t[2]=y/w,t[5]=b/w,t[8]=x/w}function tG(e){return e[0]*e[4]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]-e[6]*e[4]*e[2]}function tU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return e.length===t.length&&e.every(function(e,i){return Math.abs(e-t[i])<=n})}var tz=tU;function tW(e){for(var t=0;t<3;t++)e[3*t]=e[3*t+1]=e[3*t+2]=0,e[3*t+t]=1}function tH(e,t){for(var n=0;n<e;n++){for(var i=0;i<e;i++)t[n*e+i]=0;t[n*e+n]=1}return t}function tq(e){return tz(e,eB,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6)}function tK(e){return tz(e,eL,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6)}function tX(e,t){var n=e[0]*e[0],i=e[0]*e[1],o=e[0]*e[2],a=e[0]*e[3],s=e[1]*e[1],l=e[2]*e[2],u=e[3]*e[3],c=e[1]*e[2],d=e[1]*e[3],f=e[2]*e[3],p=s+l+u,h=1/(n+p),m=(n-p)*h;h*=2,t[0]=s*h+m,t[3]=(c+a)*h,t[6]=(d-o)*h,t[1]=(c-a)*h,t[4]=l*h+m,t[7]=(f+i)*h,t[2]=(d+o)*h,t[5]=(f-i)*h,t[8]=u*h+m}function tY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);var n="".concat(e).split("e"),i="";return+n[1]+t>0&&(i="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(i).concat(+n[1]+t)),"e-").concat(t)}function tZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=tY(e[0],n),t[1]=tY(e[1],n),t[2]=tY(e[2],n),t}function tJ(e,t,n,i){var o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w=eW(t),A=eW(t),C=function(e,t,n){y=e[t],v=e[n],e[t]=y-g*(v+y*h),e[n]=v+g*(y-v*h)};for(tH(t,i),u=0;u<t;u++)w[u]=n[u]=e[u+u*t],A[u]=0;for(o=0;o<20;o++){for(m=0,u=0;u<t-1;u++)for(l=u+1;l<t;l++)m+=Math.abs(e[u*t+l]);if(0===m)break;for(d=o<3?.2*m/(t*t):0,u=0;u<t-1;u++)for(l=u+1;l<t;l++)if(y=100*Math.abs(e[u*t+l]),o>3&&Math.abs(n[u])+y===Math.abs(n[u])&&Math.abs(n[l])+y===Math.abs(n[l]))e[u*t+l]=0;else if(Math.abs(e[u*t+l])>d){for(Math.abs(v=n[l]-n[u])+y===Math.abs(v)?p=e[u*t+l]/v:(p=1/(Math.abs(f=.5*v/e[u*t+l])+Math.sqrt(1+f*f)),f<0&&(p=-p)),b=1/Math.sqrt(1+p*p),h=(g=p*b)/(1+b),v=p*e[u*t+l],A[u]-=v,A[l]+=v,n[u]-=v,n[l]+=v,e[u*t+l]=0,a=0;a<=u-1;a++)C(e,a*t+u,a*t+l);for(a=u+1;a<=l-1;a++)C(e,u*t+a,a*t+l);for(a=l+1;a<t;a++)C(e,u*t+a,l*t+a);for(a=0;a<t;a++)C(i,a*t+u,a*t+l)}for(u=0;u<t;u++)w[u]+=A[u],n[u]=w[u],A[u]=0}if(o>=20)return eV("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(a=0;a<t-1;a++){for(x=n[s=a],o=a+1;o<t;o++)(n[o]>=x||1e-12>Math.abs(n[o]-x))&&(x=n[s=o]);s!==a&&(n[s]=n[a],n[a]=x,ez(i,t,a,s))}var S=(t>>1)+(1&t);for(c=0,o=0;o<t*t;o++)i[o]>=0&&c++;if(c<S)for(o=0;o<t;o++)i[o*t+a]*=-1;return 1}function tQ(e,t){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=e[0]+e[4]+e[8],n[5]=e[0]-e[4]-e[8],n[10]=-e[0]+e[4]-e[8],n[15]=-e[0]-e[4]+e[8],n[1]=n[4]=e[7]-e[5],n[2]=n[8]=e[2]-e[6],n[3]=n[12]=e[3]-e[1],n[6]=n[9]=e[3]+e[1],n[7]=n[13]=e[2]+e[6],n[11]=n[14]=e[7]+e[5];var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];tJ([].concat(n),4,[0,0,0,0],i),t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12]}function t$(e,t,n){var i=e[0]*t[0],o=e[0]*t[1],a=e[0]*t[2],s=e[0]*t[3],l=e[1]*t[0],u=e[1]*t[1],c=e[1]*t[2],d=e[1]*t[3],f=e[2]*t[0],p=e[2]*t[1],h=e[2]*t[2],m=e[2]*t[3],g=e[3]*t[0],v=e[3]*t[1],y=e[3]*t[2],b=e[3]*t[3];n[0]=i-u-h-b,n[1]=o+l+m-y,n[2]=a-d+f+v,n[3]=s+c-p+g}function t0(e,t){for(var n=0;n<9;n++)t[n]=e[n];for(var i,o=eW(3),a=eW(3),s=0;s<3;s++){var l=Math.abs(t[3*s]),u=Math.abs(t[3*s+1]),c=Math.abs(t[3*s+2]);i=c>(i=u>l?u:l)?c:i,o[s]=1,0!==i&&(o[s]/=i)}var d=Math.abs(t[0])*o[0],f=Math.abs(t[3])*o[1],p=Math.abs(t[6])*o[2];a[0]=0,f>=(i=d)&&(i=f,a[0]=1),p>=i&&(a[0]=2),0!==a[0]&&(ez(t,3,a[0],0),o[a[0]]=o[0]);var h=Math.abs(t[4])*o[1],m=Math.abs(t[7])*o[2];a[1]=1,m>=(i=h)&&(a[1]=2,ez(t,3,1,2)),a[2]=2;var g=0;if(0>tG(t)){g=1;for(var v=0;v<9;v++)t[v]=-t[v]}var y=eW(4);if(tQ(t,y),tX(y,t),g)for(var b=0;b<9;b++)t[b]=-t[b];1!==a[1]&&ez(t,3,a[1],1),0!==a[0]&&ez(t,3,a[0],0)}function t1(e,t,n){var i,o,a,s,l,u;if(tJ(m(e),3,t,n),t[0]!==t[1]||t[0]!==t[2]){for(tV(n,n),i=0;i<3;i++)if(t[(i+1)%3]===t[(i+2)%3]){for(u=Math.abs(n[3*i]),s=0,o=1;o<3;o++)u<(l=Math.abs(n[3*i+o]))&&(u=l,s=o);s!==i&&(l=t[s],t[s]=t[i],t[i]=l,eU(n,3,i,s)),n[3*s+s]<0&&(n[3*s]=-n[3*s],n[3*s+1]=-n[3*s+1],n[3*s+2]=-n[3*s+2]),a=(s+2)%3,n[3*(o=(s+1)%3)]=0,n[3*o+1]=0,n[3*o+2]=0,n[3*o+o]=1;var c=tf([n[3*s],n[3*s+1],n[3*s+2]],[n[3*o],n[3*o+1],n[3*o+2]],[]);th(c);for(var d=tf(c,[n[3*s],n[3*s+1],n[3*s+2]],[]),f=0;f<3;f++)n[3*a+f]=c[f],n[3*o+f]=d[f];return void tV(n,n)}for(u=Math.abs(n[0]),s=0,i=1;i<3;i++)u<(l=Math.abs(n[3*i]))&&(u=l,s=i);if(0!==s){var p=t[s];t[s]=t[0],t[0]=p,eU(n,3,s,0)}if(Math.abs(n[4])<Math.abs(n[7])){var h=t[2];t[2]=t[1],t[1]=h,eU(n,3,1,2)}for(i=0;i<2;i++)n[3*i+i]<0&&(n[3*i]=-n[3*i],n[3*i+1]=-n[3*i+1],n[3*i+2]=-n[3*i+2]);0>tG(n)&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),tV(n,n)}else tW(n)}function t2(e,t,n,i){var o,a=m(e),s=tG(a);if(s<0)for(o=0;o<9;o++)a[o]=-a[o];t0(a,t),tV(a,a),tL(a,t,i),t1(i,n,i),tL(t,i,t),tV(i,i),s<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function t3(e,t,n){var i,o,a,s,l,u,c,d=0,f=eW(n);for(i=0;i<n;i++){for(s=0,o=0;o<n;o++)(c=Math.abs(e[i*n+o]))>s&&(s=c);if(0===s)return eV("Unable to factor linear system"),0;f[i]=1/s}for(o=0;o<n;o++){for(i=0;i<o;i++){for(l=e[i*n+o],a=0;a<i;a++)l-=e[i*n+a]*e[a*n+o];e[i*n+o]=l}for(s=0,i=o;i<n;i++){for(l=e[i*n+o],a=0;a<o;a++)l-=e[i*n+a]*e[a*n+o];e[i*n+o]=l,(u=f[i]*Math.abs(l))>=s&&(s=u,d=i)}if(o!==d){for(a=0;a<n;a++)u=e[d*n+a],e[d*n+a]=e[o*n+a],e[o*n+a]=u;f[d]=f[o]}if(t[o]=d,1e-12>=Math.abs(e[o*n+o]))return eV("Unable to factor linear system"),0;if(o!==n-1)for(u=1/e[o*n+o],i=o+1;i<n;i++)e[i*n+o]*=u}return 1}function t4(e,t,n,i){var o,a,s,l,u;for(s=-1,o=0;o<i;o++){if(u=n[l=t[o]],n[l]=n[o],s>=0)for(a=s;a<=o-1;a++)u-=e[o*i+a]*n[a];else 0!==u&&(s=o);n[o]=u}for(o=i-1;o>=0;o--){for(u=n[o],a=o+1;a<i;a++)u-=e[o*i+a]*n[a];n[o]=u/e[o*i+o]}}function t5(e,t,n){if(2===n){var i=eW(2),o=tI(e[0],e[1],e[2],e[3]);return 0===o?0:(i[0]=(e[3]*t[0]-e[1]*t[1])/o,i[1]=(-e[2]*t[0]+e[0]*t[1])/o,t[0]=i[0],t[1]=i[1],1)}if(1===n)return 0===e[0]?0:(t[0]/=e[0],1);var a=eW(n);return 0===t3(e,a,n)?0:(t4(e,a,t,n),1)}function t6(e,t,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||eW(n),a=i||eW(n);if(0===t3(e,o,n))return null;for(var s=0;s<n;s++){for(var l=0;l<n;l++)a[l]=0;a[s]=1,t4(e,o,a,n);for(var u=0;u<n;u++)t[u*n+s]=a[u]}return t}function t8(e,t){for(var n=+Number.MAX_VALUE,i=-Number.MAX_VALUE,o=0;o<t;o++)for(var a=o;a<t;a++)Math.abs(e[o*t+a])>i&&(i=Math.abs(e[o*t+a]));for(var s=0;s<t;s++)Math.abs(e[s*t+s])<n&&(n=Math.abs(e[s*t+s]));return 0===n?Number.MAX_VALUE:i/n}function t9(e,t,n){return tJ(e,3,t,n)}function t7(e,t,n,i){if(e<n)return eV("Insufficient number of samples. Underdetermined."),0;var o,a,s,l=eW(n*n),u=eW(n),c=eW(n*n);for(s=0;s<e;s++)for(o=0;o<n;o++)for(a=o;a<n;a++)l[o*n+a]+=t[s*n+o]*t[s*n+a];for(o=0;o<n;o++)for(a=0;a<o;a++)l[o*n+a]=l[a*n+o];for(tJ(l,n,u,c),o=0;o<n;o++)i[o]=c[o*n+n-1];return 1}function ne(e,t,n,i,o,a){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<n||e<o)return eV("Insufficient number of samples. Underdetermined."),0;var l,u,c,d,f=eW(o),p=1,h=0,m=0;if(s){for(c=0;c<o;c++)f[c]=1;for(u=0;u<e;u++)for(c=0;c<o;c++)Math.abs(i[u*o+c])>1e-12&&(p=0,f[c]=0);if(p&&1===o)return eV("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),t7(e,t,n,a);if(p)m=1;else for(c=0;c<o;c++)f[c]&&(m=1)}m&&(h=t7(e,t,n,l=eW(n)));var g=eW(n*n),v=eW(n*n),y=eW(n*o);for(d=0;d<e;d++)for(u=0;u<n;u++){for(c=u;c<n;c++)g[u*n+c]+=t[d*n+u]*t[d*n+c];for(c=0;c<o;c++)y[u*o+c]+=t[d*n+u]*i[d*o+c]}for(u=0;u<n;u++)for(c=0;c<u;c++)g[u*n+c]=g[c*n+u];var b=t6(g,v,n);if(b)for(u=0;u<n;u++)for(c=0;c<o;c++)for(a[u*o+c]=0,d=0;d<n;d++)a[u*o+c]+=v[u*n+d]*y[d*o+c];if(m){for(c=0;c<o;c++)if(f[c])for(u=0;u<n;u++)a[u*o+c]=l[u*o]}return m?h&&b:b}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,.5,1];switch(e.length){case 3:return t[0]=17*parseInt(e[0],16)/255,t[1]=17*parseInt(e[1],16)/255,t[2]=17*parseInt(e[2],16)/255,t;case 4:return t[0]=17*parseInt(e[1],16)/255,t[1]=17*parseInt(e[2],16)/255,t[2]=17*parseInt(e[3],16)/255,t;case 6:return t[0]=parseInt(e.substr(0,2),16)/255,t[1]=parseInt(e.substr(2,2),16)/255,t[2]=parseInt(e.substr(4,2),16)/255,t;case 7:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t;case 9:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t[3]=parseInt(e.substr(7,2),16)/255,t;default:return t}}function nn(e,t){var n,i,o=b(e,3),a=o[0],s=o[1],l=o[2],u=1/6,c=a,d=a;s>c?c=s:s<d&&(d=s),l>c?c=l:l<d&&(d=l);var f=c;(i=f>0?(c-d)/c:0)>0?(n=a===c?u*(s-l)/(c-d):s===c?1/3+u*(l-a)/(c-d):2/3+u*(a-s)/(c-d))<0&&(n+=1):n=0,t[0]=n,t[1]=i,t[2]=f}function nr(e,t){var n,i,o,a=b(e,3),s=a[0],l=a[1],u=a[2],c=1/3,d=1/6,f=2/3,p=5/6;s>1/6&&s<=c?(i=1,n=(c-s)/d,o=0):s>c&&s<=.5?(i=1,o=(s-c)/d,n=0):s>.5&&s<=f?(o=1,i=(f-s)/d,n=0):s>f&&s<=p?(o=1,n=(s-f)/d,i=0):s>p&&s<=1?(n=1,o=(1-s)/d,i=0):(n=1,i=s/d,o=0),n=l*n+(1-l),i=l*i+(1-l),o=l*o+(1-l),n*=u,i*=u,o*=u,t[0]=n,t[1]=i,t[2]=o}function ni(e,t){var n=b(e,3),i=(n[0]+16)/116,o=n[1]/500+i,a=i-n[2]/200;i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,o=Math.pow(o,3)>.008856?Math.pow(o,3):(o-16/116)/7.787,a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787,t[0]=.9505*o,t[1]=+i,t[2]=1.089*a}function no(e,t){var n=b(e,3),i=n[0]/.9505,o=n[1]/1,a=n[2]/1.089;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t[0]=116*o-16,t[1]=500*(i-o),t[2]=200*(o-a)}function na(e,t){var n=b(e,3),i=n[0],o=n[1],a=n[2],s=3.2406*i+-1.5372*o+-.4986*a,l=-.9689*i+1.8758*o+.0415*a,u=.0557*i+-.204*o+1.057*a;s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92,l>.0031308?l=1.055*Math.pow(l,1/2.4)-.055:l*=12.92,u>.0031308?u=1.055*Math.pow(u,1/2.4)-.055:u*=12.92;var c=s;c<l&&(c=l),c<u&&(c=u),c>1&&(s/=c,l/=c,u/=c),s<0&&(s=0),l<0&&(l=0),u<0&&(u=0),t[0]=s,t[1]=l,t[2]=u}function ns(e,t){var n=b(e,3),i=n[0],o=n[1],a=n[2];i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,o>.04045?o=Math.pow((o+.055)/1.055,2.4):o/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,t[0]=.4124*i+.3576*o+.1805*a,t[1]=.2126*i+.7152*o+.0722*a,t[2]=.0193*i+.1192*o+.9505*a}function nl(e,t){var n=[0,0,0];ns(e,n),no(n,t)}function nu(e,t){var n=[0,0,0];ni(e,n),na(n,t)}function nc(e){return e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1,e}function nd(e){return!(e[1]-e[0]<0)}function nf(e,t,n){return n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2]),n}function np(e,t,n){return e<t?t:e>n?n:e}function nh(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return i[0]=np(e[0],t[0],n[0]),i[1]=np(e[1],t[1],n[1]),i[2]=np(e[2],t[2],n[2]),i}function nm(e,t){var n=0;return t[0]!==t[1]&&(n=((n=e<t[0]?t[0]:e>t[1]?t[1]:e)-t[0])/(t[1]-t[0])),n}var ng=eG("GetScalarTypeFittingRange"),nv=eG("GetAdjustedScalarRange");function ny(e,t){if(!e||!t)return 0;for(var n=0;n<6;n+=2)if(e[n]<t[n]||e[n]>t[n+1]||e[n+1]<t[n]||e[n+1]>t[n+1])return 0;return 1}function nb(e,t,n){if(!e||!t)return 0;for(var i=0;i<6;i+=2)if(e[i]+n[i/2]<t[i]||e[i]-n[i/2]>t[i+1]||e[i+1]+n[i/2]<t[i]||e[i+1]-n[i/2]>t[i+1])return 0;return 1}function nx(e,t,n){if(!e||!t||!n)return 0;for(var i=0;i<3;i++)if(e[i]+n[i]<t[2*i]||e[i]-n[i]>t[2*i+1])return 0;return 1}function nw(e,t,n,i){for(var o=eW(3),a=eW(3),s=eW(3),l=eW(3),u=eW(3),c=eW(3),d=0;d<3;++d)o[d]=e[d]-t[d],a[d]=t[d]-n[d],s[d]=n[d]-e[d],l[d]=-o[d],u[d]=-a[d],c[d]=-s[d];var f=tp(l),p=tp(u),h=tp(s),m=eW(3);tf(o,a,m);for(var g=tp(m),v=2*g*g,y=p*p*tc(o,c)/v,b=h*h*tc(l,a)/v,x=f*f*tc(s,u)/v,w=0;w<3;++w)i[w]=y*e[w]+b*t[w]+x*n[w];return f*p*h/(2*g)}var nA=1/0,nC=-1/0,nS=function(e){return!Number.isFinite(e)},n_=Number.isFinite,nT=Number.isNaN,nO=nT;function nP(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function nM(e){for(var t=-1,n=-1,i=0;i<e.length;i++){var o=Math.abs(e[i]);o>t&&(n=i,t=o)}return n}function nE(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Array(t),i=Array(t),o=0;o<t;++o)n[o]=o,i[o]=o;for(var a=t-1;a>0;a--){for(var s=-1/0,l=0,u=0,c=0;c<=a;++c)for(var d=n[c],f=0;f<=a;++f){var p=Math.abs(e[d+t*i[f]]);p>s&&(s=p,l=c,u=f)}var h=[n[l],n[a]];n[a]=h[0],n[l]=h[1];var m=[i[u],i[a]];i[a]=m[0],i[u]=m[1]}for(var g=Array(t*t).fill(0),v=0;v<t;++v){var y=n[v]+t*i[v];g[y]=e[y]<0?-1:1}return g}function nD(e){var t=Math.floor(255*e);return t>15?t.toString(16):"0".concat(t.toString(16))}function nI(e){return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#").concat(e.map(nD).join(""))}function nk(e){return Math.round(255*e)}function nN(e){return 3===e.length?"rgb(".concat(e.map(nk).join(", "),")"):"rgba(".concat(nk(e[0]||0),", ").concat(nk(e[1]||0),", ").concat(nk(e[2]||0),", ").concat(e[3]||0,")")}var nR={Pi:eH,ldexp:eq,radiansFromDegrees:eK,degreesFromRadians:eX,round:eY,floor:eZ,ceil:eJ,ceilLog2:e3,min:eQ,max:e$,arrayMin:e0,arrayMax:e1,arrayRange:e2,isPowerOfTwo:e6,nearestPowerOfTwo:e5,factorial:e4,binomial:e8,beginCombination:e9,nextCombination:e7,randomSeed:te,getSeed:tt,random:tn,gaussian:tr,add:ti,subtract:to,multiplyScalar:ta,multiplyScalar2D:ts,multiplyAccumulate:tl,multiplyAccumulate2D:tu,dot:tc,outer:td,cross:tf,norm:tp,normalize:th,perpendiculars:tg,projectVector:tv,projectVector2D:tb,distance2BetweenPoints:tx,angleBetweenVectors:tw,gaussianAmplitude:tC,gaussianWeight:tS,dot2D:ty,outer2D:t_,norm2D:tT,normalize2D:tO,determinant2x2:tI,LUFactor3x3:tk,LUSolve3x3:tN,linearSolve3x3:tR,multiply3x3_vect3:tB,multiply3x3_mat3:tL,multiplyMatrix:tF,transpose3x3:tV,invert3x3:tj,identity3x3:tW,identity:tH,isIdentity:tq,isIdentity3x3:tK,determinant3x3:tG,quaternionToMatrix3x3:tX,areEquals:tU,areMatricesEqual:tz,roundNumber:tY,roundVector:tZ,matrix3x3ToQuaternion:tQ,multiplyQuaternion:t$,orthogonalize3x3:t0,diagonalize3x3:t1,singularValueDecomposition3x3:t2,solveLinearSystem:t5,invertMatrix:t6,luFactorLinearSystem:t3,luSolveLinearSystem:t4,estimateMatrixCondition:t8,jacobi:t9,jacobiN:tJ,solveHomogeneousLeastSquares:t7,solveLeastSquares:ne,hex2float:nt,rgb2hsv:nn,hsv2rgb:nr,lab2xyz:ni,xyz2lab:no,xyz2rgb:na,rgb2xyz:ns,rgb2lab:nl,lab2rgb:nu,uninitializeBounds:nc,areBoundsInitialized:nd,computeBoundsFromPoints:nf,clampValue:np,clampVector:nh,clampAndNormalizeValue:nm,getScalarTypeFittingRange:ng,getAdjustedScalarRange:nv,extentIsWithinOtherExtent:ny,boundsIsWithinOtherBounds:nb,pointIsWithinBounds:nx,solve3PointCircle:nw,inf:1/0,negInf:nC,isInf:nS,isNan:nT,isNaN:nT,isFinite:n_,createUninitializedBounds:nP,getMajorAxisIndex:nM,getSparseOrthogonalMatrix:nE,floatToHex2:nD,floatRGB2HexCode:nI,float2CssRGBA:nN};function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function nL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nF(e,t,n){var i,o,a=e.length,s=Number.MAX_VALUE,l=-Number.MAX_VALUE;for(o=t;o<a;o+=n)if(!Number.isNaN(e[o])){l=s=e[o];break}for(;o<a;o+=n)(i=e[o])<s?s=i:i>l&&(l=i);return{min:s,max:l}}function nV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t<0&&n>1){for(var i=e.length/n,o=new Float64Array(i),a=0,s=0;a<i;++a){for(var l,u=s+n;s<u;++s)o[a]+=e[s]*e[s];o[l=a]=Math.pow(o[l],.5)}return nF(o,0,1)}return nF(e,t<0?0:t,n)}function nj(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}function nG(e){return Object.prototype.toString.call(e).slice(8,-1)}var nU={name:"",numberOfComponents:1,dataType:ek.DefaultDataType,rangeTuple:[0,0]};function nz(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,nU,i),Array.isArray(i.values)&&void 0===i.dataType&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!t.empty&&!t.values&&!t.size)throw TypeError("Cannot create vtkDataArray object without: size > 0, values");if(t.values?Array.isArray(t.values)&&(t.values=et(t.dataType,t.values)):t.values=ee(t.dataType,t.size),t.values&&(t.size=null!=(n=t.size)?n:t.values.length,t.dataType=nG(t.values)),es(e,t),ef(e,t,["name","numberOfComponents"]),t.size%t.numberOfComponents!=0)throw RangeError("model.size is not a multiple of model.numberOfComponents");function o(n){if(n<0)return!1;var i=e.getNumberOfComponents(),o=t.values.length/(i>0?i:1);if(n===o)return!0;if(n>o){var a=t.values;return t.values=ee(t.dataType,(n+o)*i),t.values.set(a),!0}return t.size>n*i&&(t.size=n*i,e.dataChange()),!0}t.classHierarchy.push("vtkDataArray"),e.dataChange=function(){t.ranges=null,e.modified()},e.allocate=function(t){o(e.getNumberOfTuples()+t)},e.resize=function(n){o(n);var i=n*e.getNumberOfComponents();return t.size!==i&&(t.size=i,e.dataChange(),!0)},e.initialize=function(){return e.resize(0),e},e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,i,o){o!==t.values[n*t.numberOfComponents+i]&&(t.values[n*t.numberOfComponents+i]=o,e.dataChange())},e.getValue=function(n){var i=n/t.numberOfComponents,o=n%t.numberOfComponents;return e.getComponent(i,o)},e.setValue=function(n,i){var o=n/t.numberOfComponents,a=n%t.numberOfComponents;e.setComponent(o,a,i)},e.getData=function(){return t.size===t.values.length?t.values:t.values.subarray(0,t.size)},e.getRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=n;i<0&&(i=1===t.numberOfComponents?0:t.numberOfComponents);var o=null;return t.ranges||(t.ranges=nj(t.ranges,t.numberOfComponents)),(o=t.ranges[i])||(o=nV(e.getData(),n,t.numberOfComponents),t.ranges[i]=o),t.rangeTuple[0]=o.min,t.rangeTuple[1]=o.max,t.rangeTuple},e.setRange=function(e,n){t.ranges||(t.ranges=nj(t.ranges,t.numberOfComponents));var i={min:e.min,max:e.max};return t.ranges[n]=i,t.rangeTuple[0]=i.min,t.rangeTuple[1]=i.max,t.rangeTuple},e.getRanges=function(){if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0])return structuredClone(t.ranges);for(var n=[],i=0;i<t.numberOfComponents;i++){var o=b(e.getRange(i),2),a={min:o[0],max:o[1]};n.push(a)}if(t.numberOfComponents>1){var s=b(e.getRange(-1),2),l={min:s[0],max:s[1]};n.push(l)}return n},e.setTuple=function(e,n){for(var i=e*t.numberOfComponents,o=0;o<t.numberOfComponents;o++)t.values[i+o]=n[o]},e.setTuples=function(e,n){for(var i=e*t.numberOfComponents,o=Math.min(n.length,t.size-i),a=0;a<o;)t.values[i++]=n[a++]},e.insertTuple=function(n,i){return t.size<=n*t.numberOfComponents&&(t.size=(n+1)*t.numberOfComponents,o(n+1)),e.setTuple(n,i),n},e.insertTuples=function(n,i){var a=n+i.length/t.numberOfComponents;return t.size<a*t.numberOfComponents&&(t.size=a*t.numberOfComponents,o(a)),e.setTuples(n,i),a},e.insertNextTuple=function(n){var i=t.size/t.numberOfComponents;return e.insertTuple(i,n)},e.insertNextTuples=function(n){var i=t.size/t.numberOfComponents;return e.insertTuples(i,n)},e.findTuple=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,i=0;i<t.size;i+=t.numberOfComponents)if(Math.abs(e[0]-t.values[i])<=n){for(var o=!0,a=1;a<t.numberOfComponents;++a)if(Math.abs(e[a]-t.values[i+a])>n){o=!1;break}if(o)return i/t.numberOfComponents}return -1},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.numberOfComponents||1,o=e*i;switch(i){case 4:n[3]=t.values[o+3];case 3:n[2]=t.values[o+2];case 2:n[1]=t.values[o+1];case 1:n[0]=t.values[o];break;default:for(var a=i-1;a>=0;--a)n[a]=t.values[o+a]}return n},e.getTuples=function(n,i){var o=(null!=n?n:0)*t.numberOfComponents,a=(null!=i?i:e.getNumberOfTuples())*t.numberOfComponents,s=e.getData().subarray(o,a);return s.length>0?s:null},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.size},e.getNumberOfTuples=function(){return t.size/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return nW({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(n,i){t.values=n,t.size=n.length,t.dataType=nG(n),i&&(t.numberOfComponents=i),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.dataChange()},e.getState=function(){if(t.deleted)return null;var n=nL(nL({},t),{},{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(function(e){n[e]||delete n[e]});var i={};return Object.keys(n).sort().forEach(function(e){i[e]=n[e]}),i.mtime&&delete i.mtime,i},e.deepCopy=function(n){var i=e.getDataType(),o=t.values;e.shallowCopy(n),t.ranges=structuredClone(n.getRanges()),(null==o?void 0:o.length)>=n.getNumberOfValues()&&i===n.getDataType()?(o.set(n.getData()),t.values=o,e.dataChange()):e.setData(n.getData().slice())},e.interpolateTuple=function(n,i,o,a,s,l){var u=t.numberOfComponents||1;u===i.getNumberOfComponents()&&u===a.getNumberOfComponents()||Z("numberOfComponents must match");var c=i.getTuple(o),d=a.getTuple(s),f=[];switch(f.length=u,u){case 4:f[3]=c[3]+(d[3]-c[3])*l;case 3:f[2]=c[2]+(d[2]-c[2])*l;case 2:f[1]=c[1]+(d[1]-c[1])*l;case 1:f[0]=c[0]+(d[0]-c[0])*l;break;default:for(var p=0;p<u;p++)f[p]=c[p]+(d[p]-c[p])*l}return e.insertTuple(n,f)}}var nW=ew(nz,"vtkDataArray"),nH=nL(nL({newInstance:nW,extend:nz},{computeRange:nV,createRangeHelper:function(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,i=0;return{add:function(o){e>o&&(e=o),t<o&&(t=o),n++,i+=o},get:function(){return{min:e,max:t,count:n,sum:i,mean:i/n}},getRange:function(){return{min:e,max:t}}}},fastComputeRange:nF,getDataType:nG,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),n=0,i=Array(t),o=0;o<e.getNumberOfTuples();++o){e.getTuple(o,i);var a=tp(i,t);a>n&&(n=a)}return n}}),ek);function nq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function nK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nq(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nX=eE.isVtkObject;function nY(e){var t=0;return e.filter(function(e,n){return n===t&&(t+=e+1,!0)})}function nZ(e){for(var t=0,n=0;n<e.length;)n+=e[n]+1,t++;return t}function nJ(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nH.extend(e,t,nK({empty:!0,numberOfComponents:1,dataType:eI.UNSIGNED_INT},i)),t.classHierarchy.push("vtkCellArray"),n=nK({},e),e.getNumberOfCells=function(n){return(void 0===t.numberOfCells||n)&&(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=nZ(e.getData())),t.numberOfCells},e.getCellSizes=function(n){return(void 0===t.cellSizes||n)&&(t.cellSizes=nY(e.getData())),t.cellSizes},e.resize=function(i){var o=e.getNumberOfTuples();n.resize(i);var a=e.getNumberOfTuples();a<o&&(0===a?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=function(e){n.setData(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=function(e){var n=e,i=t.values[n++];return t.values.subarray(n,n+i)},e.insertNextCell=function(n){var i=nX(n)?n.getPointsIds():n,o=e.getNumberOfCells();return e.insertNextTuples([i.length].concat(m(i))),++t.numberOfCells,null!=t.cellSizes&&t.cellSizes.push(i.length),o},e.getMaxCellSize=function(){return e.getCellSizes().reduce(function(e,t){return Math.max(e,t)},0)}}var nQ=nK({newInstance:eE.newInstance(nJ,"vtkCellArray"),extend:nJ},{extractCellSizes:nY,getNumberOfCells:nZ});function n$(){var e=new ArrayBuffer(4),t=new Uint8Array(e),n=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,0xd4c3b2a1===n[0]?"LittleEndian":0xa1b2c3d4===n[0]?"BigEndian":null}var n0={ENDIANNESS:n$(),getEndianness:n$,swapBytes:function(e,t){if(!(t<2))for(var n=new Int8Array(e),i=n.length,o=[],a=0;a<i;a+=t){for(var s=0;s<t;s++)o.push(n[a+s]);for(var l=0;l<t;l++)n[a+l]=o.pop()}}},n1=new Float32Array(1),n2=new Int32Array(n1.buffer),n3={fromHalf:function(e){var t=(32768&e)>>15,n=(31744&e)>>10,i=1023&e;return 0===n?(t?-1:1)*6103515625e-14*(i/1024):31===n?i?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+i/1024)},toHalf:function(e){n1[0]=e;var t=n2[0],n=t>>16&32768,i=t>>12&2047,o=t>>23&255;return o<103?n:o>142?(n|=31744,n|=+(255!==o)&&8388607&t):o<113?n|=((i|=2048)>>114-o)+(i>>113-o&1):(n|=o-112<<10|i>>1,n+=1&i)}},n4="u">typeof Float32Array?Float32Array:Array,n5=Math.random,n6=Math.PI/180;function n8(e){return e*n6}function n9(){var e=new n4(3);return n4!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function n7(e){var t=new n4(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function re(e){return Math.hypot(e[0],e[1],e[2])}function rt(e,t,n){var i=new n4(3);return i[0]=e,i[1]=t,i[2]=n,i}function rn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rr(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function ri(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ro(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function ra(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function rs(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function rl(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ru(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function rc(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function rd(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function rf(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function rp(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function rh(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function rm(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])}function rg(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return n*n+i*i+o*o}function rv(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}function ry(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function rb(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function rx(e,t){var n=t[0],i=t[1],o=t[2],a=n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function rw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rA(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2];return e[0]=o*u-a*l,e[1]=a*s-i*u,e[2]=i*l-o*s,e}function rC(e,t,n,i){var o=t[0],a=t[1],s=t[2];return e[0]=o+i*(n[0]-o),e[1]=a+i*(n[1]-a),e[2]=s+i*(n[2]-s),e}function rS(e,t,n,i,o,a){var s=a*a,l=s*(2*a-3)+1,u=s*(a-2)+a,c=s*(a-1),d=s*(3-2*a);return e[0]=t[0]*l+n[0]*u+i[0]*c+o[0]*d,e[1]=t[1]*l+n[1]*u+i[1]*c+o[1]*d,e[2]=t[2]*l+n[2]*u+i[2]*c+o[2]*d,e}function r_(e,t,n,i,o,a){var s=1-a,l=s*s,u=a*a,c=l*s,d=3*a*l,f=3*u*s,p=u*a;return e[0]=t[0]*c+n[0]*d+i[0]*f+o[0]*p,e[1]=t[1]*c+n[1]*d+i[1]*f+o[1]*p,e[2]=t[2]*c+n[2]*d+i[2]*f+o[2]*p,e}function rT(e,t){t=t||1;var n=2*n5()*Math.PI,i=2*n5()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=i*t,e}function rO(e,t,n){var i=t[0],o=t[1],a=t[2],s=n[3]*i+n[7]*o+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*i+n[4]*o+n[8]*a+n[12])/s,e[1]=(n[1]*i+n[5]*o+n[9]*a+n[13])/s,e[2]=(n[2]*i+n[6]*o+n[10]*a+n[14])/s,e}function rP(e,t,n){var i=t[0],o=t[1],a=t[2];return e[0]=i*n[0]+o*n[3]+a*n[6],e[1]=i*n[1]+o*n[4]+a*n[7],e[2]=i*n[2]+o*n[5]+a*n[8],e}function rM(e,t,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=t[0],u=t[1],c=t[2],d=o*c-a*u,f=a*l-i*c,p=i*u-o*l,h=o*p-a*f,m=a*d-i*p,g=i*f-o*d,v=2*s;return d*=v,f*=v,p*=v,h*=2,m*=2,g*=2,e[0]=l+d+h,e[1]=u+f+m,e[2]=c+p+g,e}function rE(e,t,n,i){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),a[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function rD(e,t,n,i){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),a[1]=o[1],a[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function rI(e,t,n,i){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),a[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),a[2]=o[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function rk(e,t){var n=e[0],i=e[1],o=e[2],a=t[0],s=t[1],l=t[2],u=Math.sqrt(n*n+i*i+o*o)*Math.sqrt(a*a+s*s+l*l);return Math.acos(Math.min(Math.max(u&&rw(e,t)/u,-1),1))}function rN(e){return e[0]=0,e[1]=0,e[2]=0,e}function rR(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function rB(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function rL(e,t){var n=e[0],i=e[1],o=e[2],a=t[0],s=t[1],l=t[2];return Math.abs(n-a)<=1e-6*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=1e-6*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-l)<=1e-6*Math.max(1,Math.abs(o),Math.abs(l))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var rF,rV=ro,rj=ra,rG=rs,rU=rm,rz=rg,rW=re,rH=rv,rq=(rF=n9(),function(e,t,n,i,o,a){var s,l;for(t||(t=3),n||(n=0),l=i?Math.min(i*t+n,e.length):e.length,s=n;s<l;s+=t)rF[0]=e[s],rF[1]=e[s+1],rF[2]=e[s+2],o(rF,rF,a),e[s]=rF[0],e[s+1]=rF[1],e[s+2]=rF[2];return e}),rK={};function rX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rK,n),eE.obj(e,t),eE.setGet(e,t,["transform"]),t.classHierarchy.push("vtkImplicitFunction"),e.functionValue=function(n){if(!t.transform)return e.evaluateFunction(n);var i=[];return t.transform.transformPoint(n,i),e.evaluateFunction(i)},e.evaluateFunction=function(e){eE.vtkErrorMacro("not implemented")}}var rY={newInstance:eE.newInstance(rX,"vtkImplicitFunction"),extend:rX};function rZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var rJ="coincide",rQ="disjoint";function r$(e,t,n){return Math.abs(n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]))}function r0(e,t,n,i){var o=[];to(e,t,o);var a=tc(n,o);i[0]=e[0]-a*n[0],i[1]=e[1]-a*n[1],i[2]=e[2]-a*n[2]}function r1(e,t,n){var i=tc(e,t),o=tc(t,t);return 0===o&&(o=1),n[0]=e[0]-i*t[0]/o,n[1]=e[1]-i*t[1]/o,n[2]=e[2]-i*t[2]/o,n}function r2(e,t,n,i){var o=[];to(e,t,o);var a=tc(n,o),s=tc(n,n);0!==s?(i[0]=e[0]-a*n[0]/s,i[1]=e[1]-a*n[1]/s,i[2]=e[2]-a*n[2]/s):(i[0]=e[0],i[1]=e[1],i[2]=e[2])}function r3(e,t,n,i){var o={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},a=[],s=[];to(t,e,a),to(n,e,s);var l=tc(i,s),u=tc(i,a);return(u<0?-u:u)<=(l<0?-(1e-6*l):1e-6*l)||(o.t=l/u,o.x[0]=e[0]+o.t*a[0],o.x[1]=e[1]+o.t*a[1],o.x[2]=e[2]+o.t*a[2],o.intersection=!0,o.betweenPoints=o.t>=0&&o.t<=1),o}function r4(e,t,n,i){var o={intersection:!1,l0:[],l1:[],error:null},a=[];tf(t,i,a);var s,l=a.map(function(e){return Math.abs(e)});if(l[0]+l[1]+l[2]<1e-6){var u=[];return to(e,n,u),0===tc(t,u)?o.error=rJ:o.error=rQ,o}s=l[0]>l[1]&&l[0]>l[2]?"x":l[1]>l[2]?"y":"z";var c=[],d=-tc(t,e),f=-tc(i,n);switch(s){case"x":c[0]=0,c[1]=(f*t[2]-d*i[2])/a[0],c[2]=(d*i[1]-f*t[1])/a[0];break;case"y":c[0]=(d*i[2]-f*t[2])/a[1],c[1]=0,c[2]=(f*t[0]-d*i[0])/a[1];break;case"z":c[0]=(f*t[1]-d*i[1])/a[2],c[1]=(d*i[0]-f*t[0])/a[2],c[2]=0}return o.l0=c,ti(c,a,o.l1),o.intersection=!0,o}var r5={normal:[0,0,1],origin:[0,0,0]};function r6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,r5,n),rY.extend(e,t,n),eE.setGetArray(e,t,["normal","origin"],3),t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return r$(e,t.origin,t.normal)},e.projectPoint=function(e,n){r0(e,t.origin,t.normal,n)},e.projectVector=function(e,n){return r1(e,t.normal,n)},e.push=function(e){if(0!==e)for(var n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=function(e,n){r2(e,t.origin,t.normal,n)},e.evaluateFunction=function(e,n,i){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(i-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,n){return r3(e,n,t.origin,t.normal)},e.intersectWithPlane=function(e,n){return r4(e,n,t.origin,t.normal)}}var r8=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(r6,"vtkPlane"),extend:r6},{evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:r$,projectPoint:r0,projectVector:r1,generalizedProjectPoint:r2,intersectWithLine:r3,intersectWithPlane:r4,DISJOINT:rQ,COINCIDE:rJ});function r9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var r7=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function ie(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function it(e){return(null==e?void 0:e.length)>=6&&e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function ir(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ii(e){return ir(e,r7)}function io(e,t,n,i){var o=b(e,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return e[0]=a<t?a:t,e[1]=s>t?s:t,e[2]=l<n?l:n,e[3]=u>n?u:n,e[4]=c<i?c:i,e[5]=d>i?d:i,e}function ia(e,t){if(0===t.length)return e;if(Array.isArray(t[0]))for(var n=0;n<t.length;++n)io.apply(void 0,[e].concat(m(t[n])));else for(var i=0;i<t.length;i+=3)io.apply(void 0,[e].concat(m(t.slice(i,i+3))));return e}function is(e,t,n,i,o,a,s){var l=b(e,6),u=l[0],c=l[1],d=l[2],f=l[3],p=l[4],h=l[5];return void 0===s?(e[0]=Math.min(t[0],u),e[1]=Math.max(t[1],c),e[2]=Math.min(t[2],d),e[3]=Math.max(t[3],f),e[4]=Math.min(t[4],p),e[5]=Math.max(t[5],h)):(e[0]=Math.min(t,u),e[1]=Math.max(n,c),e[2]=Math.min(i,d),e[3]=Math.max(o,f),e[4]=Math.min(a,p),e[5]=Math.max(s,h)),e}function il(e,t,n,i){var o=b(e,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return e[0]=t,e[1]=t>s?t:s,e[2]=n,e[3]=n>u?n:u,e[4]=i,e[5]=i>d?i:d,a!==t||l!==n||c!==i}function iu(e,t,n,i){var o=b(e,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return e[0]=t<a?t:a,e[1]=t,e[2]=n<l?n:l,e[3]=n,e[4]=i<c?i:c,e[5]=i,s!==t||u!==n||d!==i}function ic(e,t){return null==t?function(e){for(var t=[0,0,0],n=-1,i=0,o=0,a=0;a<3;++a)(o=e[2*a+1]-e[2*a])>i&&(i=o,n=a),t[a]=+(o>0);if(n<0)return ic(e,.5);for(var s=0;s<3;++s)if(!t[s]){var l=.005*i;e[2*s]-=l,e[2*s+1]+=l}return e}(e):(e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t,e)}function id(e,t,n,i){return!!it(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),i>=0?(e[4]*=i,e[5]*=i):(e[4]=i*e[5],e[5]=i*e[4]),!0)}function ip(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function ih(e,t){return e[2*t+1]-e[2*t]}function im(e){return[ih(e,0),ih(e,1),ih(e,2)]}function ig(e){return e.slice(0,2)}function iv(e){return e.slice(2,4)}function iy(e){return e.slice(4,6)}function ib(e){var t=im(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function ix(e){if(it(e)){var t=im(e);return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}return null}function iw(e){var t=ix(e);return null!==t?Math.sqrt(t):null}function iA(e){return[e[0],e[2],e[4]]}function iC(e){return[e[1],e[3],e[5]]}function iS(e,t){return e<=0&&t>=0||e>=0&&t<=0}function i_(e,t){return t[0]=[e[0],e[2],e[4]],t[1]=[e[0],e[2],e[5]],t[2]=[e[0],e[3],e[4]],t[3]=[e[0],e[3],e[5]],t[4]=[e[1],e[2],e[4]],t[5]=[e[1],e[2],e[5]],t[6]=[e[1],e[3],e[4]],t[7]=[e[1],e[3],e[5]],t}function iT(e,t,n){return t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5],t}function iO(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=i_(e,[]),o=0;o<i.length;++o)rO(i[o],i[o],t);return ii(n),ia(n,i)}function iP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=.5*(e[1]-e[0]),t[1]=.5*(e[3]-e[2]),t[2]=.5*(e[5]-e[4]),t}function iM(e,t,n,i){for(var o=[].concat(r7),a=e.getData(),s=0;s<a.length;s+=3){var l=[a[s],a[s+1],a[s+2]],u=tc(l,t);o[0]=Math.min(u,o[0]),o[1]=Math.max(u,o[1]);var c=tc(l,n);o[2]=Math.min(c,o[2]),o[3]=Math.max(c,o[3]);var d=tc(l,i);o[4]=Math.min(d,o[4]),o[5]=Math.max(d,o[5])}return o}function iE(e,t,n,i,o){for(var a=!0,s=[],l=0,u=[],c=[0,0,0],d=0;d<3;d++)t[d]<e[2*d]?(s[d]=1,c[d]=e[2*d],a=!1):t[d]>e[2*d+1]?(s[d]=0,c[d]=e[2*d+1],a=!1):s[d]=2;if(a)return i[0]=t[0],i[1]=t[1],i[2]=t[2],o[0]=0,1;for(var f=0;f<3;f++)2!==s[f]&&0!==n[f]?u[f]=(c[f]-t[f])/n[f]:u[f]=-1;for(var p=0;p<3;p++)u[l]<u[p]&&(l=p);if(u[l]>1||u[l]<0)return 0;o[0]=u[l];for(var h=0;h<3;h++)if(l!==h){if(i[h]=t[h]+u[l]*n[h],i[h]<e[2*h]||i[h]>e[2*h+1])return 0}else i[h]=c[h];return 1}function iD(e,t,n){for(var i=[],o=0,a=1,s=1,l=4;l<=5;++l){i[2]=e[l];for(var u=2;u<=3;++u){i[1]=e[u];for(var c=0;c<=1;++c)if(i[0]=e[c],o=r8.evaluate(n,t,i),s&&(a=o>=0?1:-1,s=0),0===o||a>0&&o<0||a<0&&o>0)return 1}}return 0}function iI(e,t){if(!it(e)||!it(t))return!1;for(var n,i=[0,0,0,0,0,0],o=0;o<3;o++)if(n=!1,t[2*o]>=e[2*o]&&t[2*o]<=e[2*o+1]?(n=!0,i[2*o]=t[2*o]):e[2*o]>=t[2*o]&&e[2*o]<=t[2*o+1]&&(n=!0,i[2*o]=e[2*o]),t[2*o+1]>=e[2*o]&&t[2*o+1]<=e[2*o+1]?(n=!0,i[2*o+1]=t[2*o+1]):e[2*o+1]>=t[2*o]&&e[2*o+1]<=t[2*o+1]&&(n=!0,i[2*o+1]=e[2*o+1]),!n)return!1;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],!0}function ik(e,t){if(!it(e)||!it(t))return!1;for(var n=0;n<3;n++)if(!(t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1]||e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1]||t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1]||e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]))return!1;return!0}function iN(e,t,n,i){return!(t<e[0]||t>e[1])&&!(n<e[2]||n>e[3])&&!(i<e[4]||i>e[5])}function iR(e,t,n){for(var i=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],o=[0,0,0,0,0,0,0,0],a=0,s=0;s<2;s++)for(var l=2;l<4;l++)for(var u=4;u<6;u++){var c=[e[s],e[l],e[u]];o[a++]=r8.evaluate(n,t,c)}for(var d=2;d--&&!(iS(o[i[d][0]],o[i[d][4]])&&iS(o[i[d][1]],o[i[d][5]])&&iS(o[i[d][2]],o[i[d][6]])&&iS(o[i[d][3]],o[i[d][7]])););if(d<0)return!1;for(var f=Math.sign(n[d]),p=Math.abs((e[2*d+1]-e[2*d])*n[d]),h=+(f>0),m=0;m<4;m++)if(0!==p){var g=Math.abs(o[i[d][m]])/p;f>0&&g<h&&(h=g),f<0&&g>h&&(h=g)}var v=(1-h)*e[2*d]+h*e[2*d+1];return f>0?e[2*d]=v:e[2*d+1]=v,!0}function iB(e,t){for(var n=0;n<3;++n)t[n]=t[n]<1?1:t[n];for(var i=t[0]*t[1]*t[2];i>e;){for(var o=0;o<3;++o)t[o]=t[o]>1?t[o]-1:1;i=t[0]*t[1]*t[2]}}function iL(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t=t<=0?1:t;for(var o=0,a=[0,0,0],s=-1,l=0,u=im(e),c=u[0]+u[1]+u[2],d=.001/3*c,f=0;f<3;++f)u[f]>l&&(s=f,l=u[f]),u[f]>d?(a[f]=1,o++):a[f]=0;var p=iA(e),h=iC(e);if(o<1)return n[0]=1,n[1]=1,n[2]=1,i[0]=p[0]-.5,i[1]=h[0]+.5,i[2]=p[1]-.5,i[3]=h[1]+.5,i[4]=p[2]-.5,i[5]=h[2]+.5,1;var m=t;m/=a[0]?u[0]/c:1,m/=a[1]?u[1]/c:1,m/=a[2]?u[2]/c:1,m=Math.pow(m,1/o);for(var g=0;g<3;++g)n[g]=a[g]?Math.floor(m*u[g]/c):1,n[g]=n[g]<1?1:n[g];iB(t,n);for(var v=.5*u[s]/n[s],y=0;y<3;++y)a[y]?(i[2*y]=p[y],i[2*y+1]=h[y]):(i[2*y]=p[y]-v,i[2*y+1]=h[y]+v);return n[0]*n[1]*n[2]}function iF(e,t){if(e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[2]&&e[1]<=t[3]&&e[2]>=t[4]&&e[2]<=t[5])return 0;var n=[0,0,0];return e[0]<t[0]?n[0]=t[0]-e[0]:e[0]>t[1]&&(n[0]=e[0]-t[1]),e[1]<t[2]?n[1]=t[2]-e[1]:e[1]>t[3]&&(n[1]=e[1]-t[3]),e[2]<t[4]?n[2]=t[4]-e[2]:e[2]>t[5]&&(n[2]=e[2]-t[5]),tc(n,n)}var iV=function(){function e(t){E(this,e),this.bounds=t,this.bounds||(this.bounds=new Float64Array(r7))}return I(e,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(e){return ie(this.bounds,e)}},{key:"isValid",value:function(){return it(this.bounds)}},{key:"setBounds",value:function(e){return ir(this.bounds,e)}},{key:"reset",value:function(){return ii(this.bounds)}},{key:"addPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return io.apply(void 0,[this.bounds].concat(t))}},{key:"addPoints",value:function(e){return ia(this.bounds,e)}},{key:"addBounds",value:function(e,t,n,i,o,a){return is(this.bounds,e,t,n,i,o,a)}},{key:"setMinPoint",value:function(e,t,n){return il(this.bounds,e,t,n)}},{key:"setMaxPoint",value:function(e,t,n){return iu(this.bounds,e,t,n)}},{key:"inflate",value:function(e){return ic(this.bounds,e)}},{key:"scale",value:function(e,t,n){return id(this.bounds,e,t,n)}},{key:"getCenter",value:function(){return ip(this.bounds)}},{key:"getLength",value:function(e){return ih(this.bounds,e)}},{key:"getLengths",value:function(){return im(this.bounds)}},{key:"getMaxLength",value:function(){return ib(this.bounds)}},{key:"getDiagonalLength",value:function(){return iw(this.bounds)}},{key:"getDiagonalLength2",value:function(){return ix(this.bounds)}},{key:"getMinPoint",value:function(){return iA(this.bounds)}},{key:"getMaxPoint",value:function(){return iC(this.bounds)}},{key:"getXRange",value:function(){return ig(this.bounds)}},{key:"getYRange",value:function(){return iv(this.bounds)}},{key:"getZRange",value:function(){return iy(this.bounds)}},{key:"getCorners",value:function(e){return i_(this.bounds,e)}},{key:"computeCornerPoints",value:function(e,t){return iT(this.bounds,e,t)}},{key:"computeLocalBounds",value:function(e,t,n){return iM(this.bounds,e,t,n)}},{key:"transformBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return iO(this.bounds,e,t)}},{key:"computeScale3",value:function(e){return iP(this.bounds,e)}},{key:"cutWithPlane",value:function(e,t){return iR(this.bounds,e,t)}},{key:"intersectBox",value:function(e,t,n,i){return iE(this.bounds,e,t,n,i)}},{key:"intersectPlane",value:function(e,t){return iD(this.bounds,e,t)}},{key:"intersect",value:function(e){return iI(this.bounds,e)}},{key:"intersects",value:function(e){return ik(this.bounds,e)}},{key:"containsPoint",value:function(e,t,n){return iN(this.bounds,e,t,n)}},{key:"contains",value:function(e){return ik(this.bounds,e)}},{key:"computeDivisions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return iL(this.bounds,e,t,n)}},{key:"distance2ToBounds",value:function(e){return iF(e,this.bounds)}}]),e}(),ij={equals:ie,isValid:it,setBounds:ir,reset:ii,addPoint:io,addPoints:ia,addBounds:is,setMinPoint:il,setMaxPoint:iu,inflate:ic,scale:id,scaleAboutCenter:function(e,t,n,i){if(!it(e))return!1;var o=ip(e);return e[0]-=o[0],e[1]-=o[0],e[2]-=o[1],e[3]-=o[1],e[4]-=o[2],e[5]-=o[2],id(e,t,n,i),e[0]+=o[0],e[1]+=o[0],e[2]+=o[1],e[3]+=o[1],e[4]+=o[2],e[5]+=o[2],!0},getCenter:ip,getLength:ih,getLengths:im,getMaxLength:ib,getDiagonalLength:iw,getDiagonalLength2:ix,getMinPoint:iA,getMaxPoint:iC,getXRange:ig,getYRange:iv,getZRange:iy,getCorners:i_,computeCornerPoints:iT,computeLocalBounds:iM,transformBounds:iO,computeScale3:iP,cutWithPlane:iR,intersectBox:iE,intersectPlane:iD,intersect:iI,intersects:ik,containsPoint:iN,contains:function(e,t){return!!ik(e,t)&&!!iN.apply(void 0,[e].concat(m(iA(t))))&&!!iN.apply(void 0,[e].concat(m(iC(t))))},computeDivisions:iL,clampDivisions:iB,distance2ToBounds:iF,INIT_BOUNDS:r7},iG=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r9(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:function(e){return new iV(e&&e.bounds)}},ij),iU=eE.vtkErrorMacro,iz=eE.vtkWarningMacro,iW={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function iH(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,iW,i),eE.obj(e,t),t.classHierarchy.push("vtkFieldData"),n=e.getState,t.arrays&&(t.arrays=t.arrays.map(function(e){return{data:M(e.data)}})),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(n){e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map(function(e){return e}),t.arrays=n.getArrays().map(function(e){return{data:e}})},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(n){var i=n.getName(),o=e.getArrayWithIndex(i),a=o.array,s=o.index;return null!=a?(t.arrays[s]={data:n},s):(t.arrays=[].concat(t.arrays,{data:n}),t.arrays.length-1)},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(n){var i=t.arrays.findIndex(function(e){return e.data.getName()===n});return e.removeArrayByIndex(i)},e.removeArrayByIndex=function(e){return -1!==e&&e<t.arrays.length&&(t.arrays.splice(e,1),!0)},e.getArrays=function(){return t.arrays.map(function(e){return e.data})},e.getArray=function(t){return"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce(function(t,n,i){return n.data.getName()===e?n.data:t},null)},e.getArrayWithIndex=function(e){var n=t.arrays.findIndex(function(t){return t.data.getName()===e});return{array:-1!==n?t.arrays[n].data:null,index:n}},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach(function(a){var s=e.getFlag(a.getName());if(!1!==s&&(!t.doCopyAllOff||!0===s)&&a){var l=e.getArrayByName(a.getName());if(l)if(a.getNumberOfComponents()===l.getNumberOfComponents())if(i>-1&&i<a.getNumberOfTuples()){var u=o>-1?o:i;l.insertTuple(u,a.getTuple(i))}else l.insertTuples(0,a.getTuples());else iU("Unhandled case in passData");else if(i<0||i>a.getNumberOfTuples())e.addArray(a),n.getAttributes(a).forEach(function(t){e.setAttribute(a,t)});else{var c=a.getNumberOfComponents(),d=a.getNumberOfValues(),f=o>-1?o:i;d<=f*c&&(d=(f+1)*c),(l=nH.newInstance({name:a.getName(),dataType:a.getDataType(),numberOfComponents:c,values:eE.newTypedArray(a.getDataType(),d),size:0})).insertTuple(f,a.getTuple(i)),e.addArray(l),n.getAttributes(a).forEach(function(t){e.setAttribute(l,t)})}}})},e.interpolateData=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;n.getArrays().forEach(function(l){var u=e.getFlag(l.getName());if(!1!==u&&(!t.doCopyAllOff||!0===u)&&l){var c=e.getArrayByName(l.getName());if(c)if(l.getNumberOfComponents()===c.getNumberOfComponents())if(i>-1&&i<l.getNumberOfTuples()){var d=a>-1?a:i;c.interpolateTuple(d,l,i,l,o,s),iz("Unexpected case in interpolateData")}else c.insertTuples(l.getTuples());else iU("Unhandled case in interpolateData");else if(i<0||o<0||i>l.getNumberOfTuples())e.addArray(l),n.getAttributes(l).forEach(function(t){e.setAttribute(l,t)});else{var f=l.getNumberOfComponents(),p=l.getNumberOfValues(),h=a>-1?a:i;p<=h*f&&(p=(h+1)*f),(c=nH.newInstance({name:l.getName(),dataType:l.getDataType(),numberOfComponents:f,values:eE.newTypedArray(l.getDataType(),p),size:0})).interpolateTuple(h,l,i,l,o,s),e.addArray(c),n.getAttributes(l).forEach(function(t){e.setAttribute(c,t)})}}})},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map(function(e){var t=e.newClone();return t.deepCopy(e),{data:t}})},e.copyFlags=function(e){return e.getCopyFieldFlags().map(function(e){return e})},e.reset=function(){return t.arrays.forEach(function(e){return e.data.reset()})},e.getMTime=function(){return t.arrays.reduce(function(e,t){return t.data.getMTime()>e?t.data.getMTime():e},t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce(function(e,t){return e+t.data.getNumberOfComponents()},0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=n();return e&&(e.arrays=t.arrays.map(function(e){return{data:e.data.getState()}})),e}}var iq={newInstance:eE.newInstance(iH,"vtkFieldData"),extend:iH},iK={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},iX={DEFAULT:0,SINGLE:1,DOUBLE:2},iY={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:iK,CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:iX,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};function iZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function iJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iQ=iY.AttributeTypes,i$=iY.AttributeCopyOperations,i0=eE.vtkWarningMacro,i1={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function i2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,i1,n),iq.extend(e,t,n),eE.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),function(e,t){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function i(e){var t=n.find(function(t){return iQ[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase()});return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes");var o=iJ({},e);e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(n,o){var a=i(o);if(n&&"PEDIGREEIDS"===a.toUpperCase()&&!n.isA("vtkDataArray"))return i0("Cannot set attribute ".concat(a,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,a))return i0("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1;if(n){var s=e.addArray(n);t["active".concat(a)]=s}else t["active".concat(a)]=-1;return e.modified(),t["active".concat(a)]},e.getAttributes=function(t){return n.filter(function(n){return e["get".concat(n)]()===t})},e.setActiveAttributeByName=function(t,n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e.setActiveAttributeByIndex=function(n,o){var a=i(o);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==a.toUpperCase()){var s=e.getArrayByIndex(n);if(!s.isA("vtkDataArray"))return i0("Cannot set attribute ".concat(a,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(s,a))return i0("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1}return t["active".concat(a)]=n,e.modified(),n}return -1===n&&(t["active".concat(a)]=n,e.modified()),-1},e.getActiveAttribute=function(t){var n=i(t);return e["get".concat(n)]()},e.removeAllArrays=function(){n.forEach(function(e){t["active".concat(e)]=-1}),o.removeAllArrays()},e.removeArrayByIndex=function(e){return -1!==e&&n.forEach(function(n){e===t["active".concat(n)]?t["active".concat(n)]=-1:e<t["active".concat(n)]&&(t["active".concat(n)]-=1)}),o.removeArrayByIndex(e)},n.forEach(function(n){var i="active".concat(n);e["get".concat(n)]=function(){return e.getArrayByIndex(t[i])},e["set".concat(n)]=function(t){return e.setAttribute(t,n)},e["setActive".concat(n)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e["copy".concat(n,"Off")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[i$.PASSDATA][iQ[e]]=!1},e["copy".concat(n,"On")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[i$.PASSDATA][iQ[e]]=!0}}),e.initializeAttributeCopyFlags=function(){t.copyAttributeFlags=[],Object.keys(i$).filter(function(e){return"ALLCOPY"!==e}).forEach(function(e){t.copyAttributeFlags[i$[e]]=Object.keys(iQ).filter(function(e){return"NUM_ATTRIBUTES"!==e}).reduce(function(e,t){return e[iQ[t]]=!0,e},[])}),t.copyAttributeFlags[i$.COPYTUPLE][iQ.GLOBALIDS]=!1,t.copyAttributeFlags[i$.INTERPOLATE][iQ.GLOBALIDS]=!1,t.copyAttributeFlags[i$.COPYTUPLE][iQ.PEDIGREEIDS]=!1},e.initialize=eE.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(nH.newInstance(t.dataArrays[n]))});var a=e.shallowCopy;e.shallowCopy=function(e,n){a(e,n),t.arrays=e.getArrays().map(function(e){var t=e.newClone();return t.shallowCopy(e,n),{data:t}})},e.initializeAttributeCopyFlags()}(e,t)}var i3=iJ({newInstance:eE.newInstance(i2,"vtkDataSetAttributes"),extend:i2},iY),i4={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},i5={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};function i6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var i8=["pointData","cellData","fieldData"],i9={};function i7(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,i9,o),eE.obj(e,t),eE.setGet(e,t,i8),eE.getArray(e,t,["bounds"],6),t.classHierarchy.push("vtkDataSet"),i8.forEach(function(e){t[e]?t[e]=M(t[e]):t[e]=i3.newInstance()}),e.computeBounds=function(){if(t.modifiedTime&&t.computeTime&&t.modifiedTime>t.computeTime||!t.computeTime){var n=e.getPoints();null!=n&&n.getNumberOfPoints()?iG.setBounds(t.bounds,n.getBoundsByReference()):t.bounds=nR.createUninitializedBounds(),t.computeTime=eE.getCurrentGlobalMTime()}},e.getLength2=function(){var t=e.getBoundsByReference();return t&&6===t.length?iG.getDiagonalLength2(t):0},e.getLength=function(){return Math.sqrt(e.getLength2())},e.getCenter=function(){var t=e.getBoundsByReference();return t&&6===t.length?iG.getCenter(t):[0,0,0]},e.getCellBounds=function(t){var n=e.getCell(t);return n?n.getBounds():nR.createUninitializedBounds()},e.getBounds=eE.chain(function(){return e.computeBounds},e.getBounds),e.getBoundsByReference=eE.chain(function(){return e.computeBounds},e.getBoundsByReference),n=e.shallowCopy,e.shallowCopy=function(e){n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),i8.forEach(function(n){t[n]=i3.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})},i=e.getMTime,e.getMTime=function(){return i8.reduce(function(e,n){var i,o;return Math.max(e,null!=(i=null==(o=t[n])?void 0:o.getMTime())?i:e)},i())},e.initialize=function(){return i8.forEach(function(e){var n;return null==(n=t[e])?void 0:n.initialize()}),e}}var oe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i6(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(i7,"vtkDataSet"),extend:i7},{FieldDataTypes:i4,FieldAssociations:i5}),ot={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},on={StructuredType:ot};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var oi=on.StructuredType,oo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({getDataDescriptionFromExtent:function(e){for(var t=0,n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?oi.EMPTY:3===t?oi.XYZ_GRID:2===t?e[0]===e[1]?oi.YZ_PLANE:e[2]===e[3]?oi.XZ_PLANE:oi.XY_PLANE:1===t?e[0]<e[1]?oi.X_LINE:e[2]<e[3]?oi.Y_LINE:oi.Z_LINE:oi.SINGLE_POINT}},on);function oa(){var e=new n4(16);return n4!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function os(e){var t=new n4(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ol(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ou(e,t,n,i,o,a,s,l,u,c,d,f,p,h,m,g){var v=new n4(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=o,v[5]=a,v[6]=s,v[7]=l,v[8]=u,v[9]=c,v[10]=d,v[11]=f,v[12]=p,v[13]=h,v[14]=m,v[15]=g,v}function oc(e,t,n,i,o,a,s,l,u,c,d,f,p,h,m,g,v){return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e[4]=a,e[5]=s,e[6]=l,e[7]=u,e[8]=c,e[9]=d,e[10]=f,e[11]=p,e[12]=h,e[13]=m,e[14]=g,e[15]=v,e}function od(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function of(e,t){if(e===t){var n=t[1],i=t[2],o=t[3],a=t[6],s=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=o,e[13]=s,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function op(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*l-i*s,x=n*u-o*s,w=n*c-a*s,A=i*u-o*l,C=i*c-a*l,S=o*c-a*u,_=d*g-f*m,T=d*v-p*m,O=d*y-h*m,P=f*v-p*g,M=f*y-h*g,E=p*y-h*v,D=b*E-x*M+w*P+A*O-C*T+S*_;return D?(D=1/D,e[0]=(l*E-u*M+c*P)*D,e[1]=(o*M-i*E-a*P)*D,e[2]=(g*S-v*C+y*A)*D,e[3]=(p*C-f*S-h*A)*D,e[4]=(u*O-s*E-c*T)*D,e[5]=(n*E-o*O+a*T)*D,e[6]=(v*w-m*S-y*x)*D,e[7]=(d*S-p*w+h*x)*D,e[8]=(s*M-l*O+c*_)*D,e[9]=(i*O-n*M-a*_)*D,e[10]=(m*C-g*w+y*b)*D,e[11]=(f*w-d*C-h*b)*D,e[12]=(l*T-s*P-u*_)*D,e[13]=(n*P-i*T+o*_)*D,e[14]=(g*x-m*A-v*b)*D,e[15]=(d*A-f*x+p*b)*D,e):null}function oh(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15];return e[0]=l*(p*y-h*v)-f*(u*y-c*v)+g*(u*h-c*p),e[1]=-(i*(p*y-h*v)-f*(o*y-a*v)+g*(o*h-a*p)),e[2]=i*(u*y-c*v)-l*(o*y-a*v)+g*(o*c-a*u),e[3]=-(i*(u*h-c*p)-l*(o*h-a*p)+f*(o*c-a*u)),e[4]=-(s*(p*y-h*v)-d*(u*y-c*v)+m*(u*h-c*p)),e[5]=n*(p*y-h*v)-d*(o*y-a*v)+m*(o*h-a*p),e[6]=-(n*(u*y-c*v)-s*(o*y-a*v)+m*(o*c-a*u)),e[7]=n*(u*h-c*p)-s*(o*h-a*p)+d*(o*c-a*u),e[8]=s*(f*y-h*g)-d*(l*y-c*g)+m*(l*h-c*f),e[9]=-(n*(f*y-h*g)-d*(i*y-a*g)+m*(i*h-a*f)),e[10]=n*(l*y-c*g)-s*(i*y-a*g)+m*(i*c-a*l),e[11]=-(n*(l*h-c*f)-s*(i*h-a*f)+d*(i*c-a*l)),e[12]=-(s*(f*v-p*g)-d*(l*v-u*g)+m*(l*p-u*f)),e[13]=n*(f*v-p*g)-d*(i*v-o*g)+m*(i*p-o*f),e[14]=-(n*(l*v-u*g)-s*(i*v-o*g)+m*(i*u-o*l)),e[15]=n*(l*p-u*f)-s*(i*p-o*f)+d*(i*u-o*l),e}function om(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],h=e[12],m=e[13],g=e[14],v=e[15];return(t*s-n*a)*(f*v-p*g)-(t*l-i*a)*(d*v-p*m)+(t*u-o*a)*(d*g-f*m)+(n*l-i*s)*(c*v-p*h)-(n*u-o*s)*(c*g-f*h)+(i*u-o*l)*(c*m-d*h)}function og(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=t[9],h=t[10],m=t[11],g=t[12],v=t[13],y=t[14],b=t[15],x=n[0],w=n[1],A=n[2],C=n[3];return e[0]=x*i+w*l+A*f+C*g,e[1]=x*o+w*u+A*p+C*v,e[2]=x*a+w*c+A*h+C*y,e[3]=x*s+w*d+A*m+C*b,x=n[4],w=n[5],A=n[6],C=n[7],e[4]=x*i+w*l+A*f+C*g,e[5]=x*o+w*u+A*p+C*v,e[6]=x*a+w*c+A*h+C*y,e[7]=x*s+w*d+A*m+C*b,x=n[8],w=n[9],A=n[10],C=n[11],e[8]=x*i+w*l+A*f+C*g,e[9]=x*o+w*u+A*p+C*v,e[10]=x*a+w*c+A*h+C*y,e[11]=x*s+w*d+A*m+C*b,x=n[12],w=n[13],A=n[14],C=n[15],e[12]=x*i+w*l+A*f+C*g,e[13]=x*o+w*u+A*p+C*v,e[14]=x*a+w*c+A*h+C*y,e[15]=x*s+w*d+A*m+C*b,e}function ov(e,t,n){var i,o,a,s,l,u,c,d,f,p,h,m,g=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*y+t[12],e[13]=t[1]*g+t[5]*v+t[9]*y+t[13],e[14]=t[2]*g+t[6]*v+t[10]*y+t[14],e[15]=t[3]*g+t[7]*v+t[11]*y+t[15]):(i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=t[9],h=t[10],m=t[11],e[0]=i,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=u,e[6]=c,e[7]=d,e[8]=f,e[9]=p,e[10]=h,e[11]=m,e[12]=i*g+l*v+f*y+t[12],e[13]=o*g+u*v+p*y+t[13],e[14]=a*g+c*v+h*y+t[14],e[15]=s*g+d*v+m*y+t[15]),e}function oy(e,t,n){var i=n[0],o=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ob(e,t,n,i){var o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T,O,P,M=i[0],E=i[1],D=i[2],I=Math.hypot(M,E,D);return I<1e-6?null:(M*=I=1/I,E*=I,D*=I,o=Math.sin(n),s=1-(a=Math.cos(n)),l=t[0],u=t[1],c=t[2],d=t[3],f=t[4],p=t[5],h=t[6],m=t[7],g=t[8],v=t[9],y=t[10],b=t[11],x=M*M*s+a,w=E*M*s+D*o,A=D*M*s-E*o,C=M*E*s-D*o,S=E*E*s+a,_=D*E*s+M*o,T=M*D*s+E*o,O=E*D*s-M*o,P=D*D*s+a,e[0]=l*x+f*w+g*A,e[1]=u*x+p*w+v*A,e[2]=c*x+h*w+y*A,e[3]=d*x+m*w+b*A,e[4]=l*C+f*S+g*_,e[5]=u*C+p*S+v*_,e[6]=c*C+h*S+y*_,e[7]=d*C+m*S+b*_,e[8]=l*T+f*O+g*P,e[9]=u*T+p*O+v*P,e[10]=c*T+h*O+y*P,e[11]=d*T+m*O+b*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ox(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+c*i,e[5]=s*o+d*i,e[6]=l*o+f*i,e[7]=u*o+p*i,e[8]=c*o-a*i,e[9]=d*o-s*i,e[10]=f*o-l*i,e[11]=p*o-u*i,e}function ow(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[0],s=t[1],l=t[2],u=t[3],c=t[8],d=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-c*i,e[1]=s*o-d*i,e[2]=l*o-f*i,e[3]=u*o-p*i,e[8]=a*i+c*o,e[9]=s*i+d*o,e[10]=l*i+f*o,e[11]=u*i+p*o,e}function oA(e,t,n){var i=Math.sin(n),o=Math.cos(n),a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+c*i,e[1]=s*o+d*i,e[2]=l*o+f*i,e[3]=u*o+p*i,e[4]=c*o-a*i,e[5]=d*o-s*i,e[6]=f*o-l*i,e[7]=p*o-u*i,e}function oC(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function oS(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o_(e,t,n){var i,o,a,s=n[0],l=n[1],u=n[2],c=Math.hypot(s,l,u);return c<1e-6?null:(s*=c=1/c,l*=c,u*=c,i=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=s*s*a+o,e[1]=l*s*a+u*i,e[2]=u*s*a-l*i,e[3]=0,e[4]=s*l*a-u*i,e[5]=l*l*a+o,e[6]=u*l*a+s*i,e[7]=0,e[8]=s*u*a+l*i,e[9]=l*u*a-s*i,e[10]=u*u*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function oT(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oO(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oP(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oM(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,u=o+o,c=a+a,d=i*l,f=i*u,p=i*c,h=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c;return e[0]=1-(h+g),e[1]=f+b,e[2]=p-y,e[3]=0,e[4]=f-b,e[5]=1-(d+g),e[6]=m+v,e[7]=0,e[8]=p+y,e[9]=m-v,e[10]=1-(d+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function oE(e,t){var n=new n4(3),i=-t[0],o=-t[1],a=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=i*i+o*o+a*a+s*s;return f>0?(n[0]=2*(l*s+d*i+u*a-c*o)/f,n[1]=2*(u*s+d*o+c*i-l*a)/f,n[2]=2*(c*s+d*a+l*o-u*i)/f):(n[0]=2*(l*s+d*i+u*a-c*o),n[1]=2*(u*s+d*o+c*i-l*a),n[2]=2*(c*s+d*a+l*o-u*i)),oM(e,t,n),e}function oD(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function oI(e,t){var n=t[0],i=t[1],o=t[2],a=t[4],s=t[5],l=t[6],u=t[8],c=t[9],d=t[10];return e[0]=Math.hypot(n,i,o),e[1]=Math.hypot(a,s,l),e[2]=Math.hypot(u,c,d),e}function ok(e,t){var n=new n4(3);oI(n,t);var i=1/n[0],o=1/n[1],a=1/n[2],s=t[0]*i,l=t[1]*o,u=t[2]*a,c=t[4]*i,d=t[5]*o,f=t[6]*a,p=t[8]*i,h=t[9]*o,m=t[10]*a,g=s+d+m,v=0;return g>0?(v=2*Math.sqrt(g+1),e[3]=.25*v,e[0]=(f-h)/v,e[1]=(p-u)/v,e[2]=(l-c)/v):s>d&&s>m?(v=2*Math.sqrt(1+s-d-m),e[3]=(f-h)/v,e[0]=.25*v,e[1]=(l+c)/v,e[2]=(p+u)/v):d>m?(v=2*Math.sqrt(1+d-s-m),e[3]=(p-u)/v,e[0]=(l+c)/v,e[1]=.25*v,e[2]=(f+h)/v):(v=2*Math.sqrt(1+m-s-d),e[3]=(l-c)/v,e[0]=(p+u)/v,e[1]=(f+h)/v,e[2]=.25*v),e}function oN(e,t,n,i){var o=t[0],a=t[1],s=t[2],l=t[3],u=o+o,c=a+a,d=s+s,f=o*u,p=o*c,h=o*d,m=a*c,g=a*d,v=s*d,y=l*u,b=l*c,x=l*d,w=i[0],A=i[1],C=i[2];return e[0]=(1-(m+v))*w,e[1]=(p+x)*w,e[2]=(h-b)*w,e[3]=0,e[4]=(p-x)*A,e[5]=(1-(f+v))*A,e[6]=(g+y)*A,e[7]=0,e[8]=(h+b)*C,e[9]=(g-y)*C,e[10]=(1-(f+m))*C,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function oR(e,t,n,i,o){var a=t[0],s=t[1],l=t[2],u=t[3],c=a+a,d=s+s,f=l+l,p=a*c,h=a*d,m=a*f,g=s*d,v=s*f,y=l*f,b=u*c,x=u*d,w=u*f,A=i[0],C=i[1],S=i[2],_=o[0],T=o[1],O=o[2],P=(1-(g+y))*A,M=(h+w)*A,E=(m-x)*A,D=(h-w)*C,I=(1-(p+y))*C,k=(v+b)*C,N=(m+x)*S,R=(v-b)*S,B=(1-(p+g))*S;return e[0]=P,e[1]=M,e[2]=E,e[3]=0,e[4]=D,e[5]=I,e[6]=k,e[7]=0,e[8]=N,e[9]=R,e[10]=B,e[11]=0,e[12]=n[0]+_-(P*_+D*T+N*O),e[13]=n[1]+T-(M*_+I*T+R*O),e[14]=n[2]+O-(E*_+k*T+B*O),e[15]=1,e}function oB(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,c=n*s,d=i*s,f=i*l,p=o*s,h=o*l,m=o*u,g=a*s,v=a*l,y=a*u;return e[0]=1-f-m,e[1]=d+y,e[2]=p-v,e[3]=0,e[4]=d-y,e[5]=1-c-m,e[6]=h+g,e[7]=0,e[8]=p+v,e[9]=h-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oL(e,t,n,i,o,a,s){var l=1/(n-t),u=1/(o-i),c=1/(a-s);return e[0]=2*a*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*l,e[9]=(o+i)*u,e[10]=(s+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*c,e[15]=0,e}function oF(e,t,n,i,o){var a,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(i-o),e[10]=(o+i)*a,e[14]=2*o*i*a):(e[10]=-1,e[14]=-2*i),e}var oV=oF;function oj(e,t,n,i,o){var a,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(i-o),e[10]=o*a,e[14]=o*i*a):(e[10]=-1,e[14]=-i),e}function oG(e,t,n,i){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+l),c=2/(o+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-l)*u*.5,e[9]=(o-a)*c*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}function oU(e,t,n,i,o,a,s){var l=1/(t-n),u=1/(i-o),c=1/(a-s);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*l,e[13]=(o+i)*u,e[14]=(s+a)*c,e[15]=1,e}var oz=oU;function oW(e,t,n,i,o,a,s){var l=1/(t-n),u=1/(i-o),c=1/(a-s);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*l,e[13]=(o+i)*u,e[14]=a*c,e[15]=1,e}function oH(e,t,n,i){var o,a,s,l,u,c,d,f,p,h,m=t[0],g=t[1],v=t[2],y=i[0],b=i[1],x=i[2],w=n[0],A=n[1],C=n[2];return 1e-6>Math.abs(m-w)&&1e-6>Math.abs(g-A)&&1e-6>Math.abs(v-C)?od(e):(d=m-w,f=g-A,p=v-C,o=b*(p*=h=1/Math.hypot(d,f,p))-x*(f*=h),(h=Math.hypot(o,a=x*(d*=h)-y*p,s=y*f-b*d))?(o*=h=1/h,a*=h,s*=h):(o=0,a=0,s=0),(h=Math.hypot(l=f*s-p*a,u=p*o-d*s,c=d*a-f*o))?(l*=h=1/h,u*=h,c*=h):(l=0,u=0,c=0),e[0]=o,e[1]=l,e[2]=d,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=s,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*m+a*g+s*v),e[13]=-(l*m+u*g+c*v),e[14]=-(d*m+f*g+p*v),e[15]=1,e)}function oq(e,t,n,i){var o=t[0],a=t[1],s=t[2],l=i[0],u=i[1],c=i[2],d=o-n[0],f=a-n[1],p=s-n[2],h=d*d+f*f+p*p;h>0&&(d*=h=1/Math.sqrt(h),f*=h,p*=h);var m=u*p-c*f,g=c*d-l*p,v=l*f-u*d;return(h=m*m+g*g+v*v)>0&&(m*=h=1/Math.sqrt(h),g*=h,v*=h),e[0]=m,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-p*g,e[5]=p*m-d*v,e[6]=d*g-f*m,e[7]=0,e[8]=d,e[9]=f,e[10]=p,e[11]=0,e[12]=o,e[13]=a,e[14]=s,e[15]=1,e}function oK(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function oX(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function oY(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function oZ(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function oJ(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function oQ(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e}function o$(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function o0(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=e[9],p=e[10],h=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=t[0],x=t[1],w=t[2],A=t[3],C=t[4],S=t[5],_=t[6],T=t[7],O=t[8],P=t[9],M=t[10],E=t[11],D=t[12],I=t[13],k=t[14],N=t[15];return Math.abs(n-b)<=1e-6*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-x)<=1e-6*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=1e-6*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-A)<=1e-6*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(s-C)<=1e-6*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(l-S)<=1e-6*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-_)<=1e-6*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-T)<=1e-6*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(d-O)<=1e-6*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(f-P)<=1e-6*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-M)<=1e-6*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(h-E)<=1e-6*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(m-D)<=1e-6*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-I)<=1e-6*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(v-k)<=1e-6*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(y-N)<=1e-6*Math.max(1,Math.abs(y),Math.abs(N))}var o1=og,o2=oZ;function o3(){var e=new n4(9);return n4!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function o4(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function o5(e){var t=new n4(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function o6(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o8(e,t,n,i,o,a,s,l,u){var c=new n4(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=o,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c}function o9(e,t,n,i,o,a,s,l,u,c){return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e[4]=a,e[5]=s,e[6]=l,e[7]=u,e[8]=c,e}function o7(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ae(e,t){if(e===t){var n=t[1],i=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function at(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=d*s-l*c,p=-d*a+l*u,h=c*a-s*u,m=n*f+i*p+o*h;return m?(m=1/m,e[0]=f*m,e[1]=(-d*i+o*c)*m,e[2]=(l*i-o*s)*m,e[3]=p*m,e[4]=(d*n-o*u)*m,e[5]=(-l*n+o*a)*m,e[6]=h*m,e[7]=(-c*n+i*u)*m,e[8]=(s*n-i*a)*m,e):null}function an(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return e[0]=s*d-l*c,e[1]=o*c-i*d,e[2]=i*l-o*s,e[3]=l*u-a*d,e[4]=n*d-o*u,e[5]=o*a-n*l,e[6]=a*c-s*u,e[7]=i*u-n*c,e[8]=n*s-i*a,e}function ar(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t*(c*a-s*u)+n*(-c*o+s*l)+i*(u*o-a*l)}function ai(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=n[0],h=n[1],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],x=n[7],w=n[8];return e[0]=p*i+h*s+m*c,e[1]=p*o+h*l+m*d,e[2]=p*a+h*u+m*f,e[3]=g*i+v*s+y*c,e[4]=g*o+v*l+y*d,e[5]=g*a+v*u+y*f,e[6]=b*i+x*s+w*c,e[7]=b*o+x*l+w*d,e[8]=b*a+x*u+w*f,e}function ao(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=n[0],h=n[1];return e[0]=i,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=u,e[6]=p*i+h*s+c,e[7]=p*o+h*l+d,e[8]=p*a+h*u+f,e}function aa(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=Math.sin(n),h=Math.cos(n);return e[0]=h*i+p*s,e[1]=h*o+p*l,e[2]=h*a+p*u,e[3]=h*s-p*i,e[4]=h*l-p*o,e[5]=h*u-p*a,e[6]=c,e[7]=d,e[8]=f,e}function as(e,t,n){var i=n[0],o=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function al(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function au(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ac(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ad(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function af(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,c=n*s,d=i*s,f=i*l,p=o*s,h=o*l,m=o*u,g=a*s,v=a*l,y=a*u;return e[0]=1-f-m,e[3]=d-y,e[6]=p+v,e[1]=d+y,e[4]=1-c-m,e[7]=h-g,e[2]=p-v,e[5]=h+g,e[8]=1-c-f,e}function ap(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*l-i*s,x=n*u-o*s,w=n*c-a*s,A=i*u-o*l,C=i*c-a*l,S=o*c-a*u,_=d*g-f*m,T=d*v-p*m,O=d*y-h*m,P=f*v-p*g,M=f*y-h*g,E=p*y-h*v,D=b*E-x*M+w*P+A*O-C*T+S*_;return D?(D=1/D,e[0]=(l*E-u*M+c*P)*D,e[1]=(u*O-s*E-c*T)*D,e[2]=(s*M-l*O+c*_)*D,e[3]=(o*M-i*E-a*P)*D,e[4]=(n*E-o*O+a*T)*D,e[5]=(i*O-n*M-a*_)*D,e[6]=(g*S-v*C+y*A)*D,e[7]=(v*w-m*S-y*x)*D,e[8]=(m*C-g*w+y*b)*D,e):null}function ah(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function am(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function ag(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function av(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function ay(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function ab(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function ax(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e}function aw(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function aA(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=t[0],p=t[1],h=t[2],m=t[3],g=t[4],v=t[5],y=t[6],b=t[7],x=t[8];return Math.abs(n-f)<=1e-6*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-p)<=1e-6*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-h)<=1e-6*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-m)<=1e-6*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=1e-6*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=1e-6*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=1e-6*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=1e-6*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-x)<=1e-6*Math.max(1,Math.abs(d),Math.abs(x))}var aC=ai,aS=ay,a_=eE.vtkErrorMacro,aT={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:ot.EMPTY};function aO(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,aT,i),oe.extend(e,t,i),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=o7(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),eE.get(e,t,["indexToWorld","worldToIndex"]),eE.setGetArray(e,t,["origin","spacing"],3),eE.setGetArray(e,t,["direction"],9),eE.getArray(e,t,["extent"],6),t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return a_("instance deleted - cannot call any method"),!1;for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=1===i.length?i[0]:i;if(6!==a.length)return!1;var s=t.extent.some(function(e,t){return e!==a[t]});return s&&(t.extent=a.slice(),t.dataDescription=oo.getDataDescriptionFromExtent(t.extent),e.modified()),s},e.setDimensions=function(){var n,i,o;if(t.deleted)a_("instance deleted - cannot call any method");else{if(1==arguments.length){var a=arguments.length<=0?void 0:arguments[0];n=a[0],i=a[1],o=a[2]}else{if(3!=arguments.length)return void a_("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,i-1,0,o-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),n=1,i=0;i<3;i++){if(0===t[i])return 0;t[i]>1&&(n*=t[i]-1)}return n},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(n){var i=e.getDimensions();if(0===i[0]||0===i[1]||0===i[2])return a_("Requesting a point from an empty image."),null;var o=new Float64Array(3);switch(t.dataDescription){case ot.EMPTY:return null;case ot.SINGLE_POINT:break;case ot.X_LINE:o[0]=n;break;case ot.Y_LINE:o[1]=n;break;case ot.Z_LINE:o[2]=n;break;case ot.XY_PLANE:o[0]=n%i[0],o[1]=n/i[0];break;case ot.YZ_PLANE:o[1]=n%i[1],o[2]=n/i[1];break;case ot.XZ_PLANE:o[0]=n%i[0],o[2]=n/i[0];break;case ot.XYZ_GRID:o[0]=n%i[0],o[1]=n/i[0]%i[1],o[2]=n/(i[0]*i[1]);break;default:a_("Invalid dataDescription")}var a=[0,0,0];return e.indexToWorld(o,a),a},e.getBounds=function(){return e.extentToBounds(e.getSpatialExtent())},e.extentToBounds=function(e){return iG.transformBounds(e,t.indexToWorld)},e.getSpatialExtent=function(){return iG.inflate(m(t.extent),.5)},e.computeTransforms=function(){oC(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],oy(t.indexToWorld,t.indexToWorld,t.spacing),op(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return rO(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return rO(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return iG.transformBounds(e,t.indexToWorld,n)},e.worldToIndexBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return iG.transformBounds(e,t.worldToIndex,n)},t._onOriginChanged=e.computeTransforms,t._onDirectionChanged=e.computeTransforms,t._onSpacingChanged=e.computeTransforms,e.computeTransforms(),e.getCenter=function(){return iG.getCenter(e.getBounds())},e.computeHistogram=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[0,0,0,0,0,0];e.worldToIndexBounds(t,i);var o=[0,0,0],a=[0,0,0];iG.computeCornerPoints(i,o,a),tZ(o,o),tZ(a,a);var s=e.getDimensions();nh(o,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],o),nh(a,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],a);for(var l=s[0],u=s[0]*s[1],c=e.getPointData().getScalars().getData(),d=-1/0,f=1/0,p=0,h=0,m=0,g=o[2];g<=a[2];g++)for(var v=o[1];v<=a[1];v++)for(var y=o[0]+v*l+g*u,b=o[0];b<=a[0];b++){if(!n||n([b,v,g],i)){var x=c[y];x>d&&(d=x),x<f&&(f=x),p+=x*x,h+=x,m+=1}++y}var w=m>0?h/m:0,A=m?Math.abs(p/m-w*w):0;return{minimum:f,maximum:d,average:w,variance:A,sigma:Math.sqrt(A),count:m}},e.computeIncrements=function(e){for(var t=[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0;i<3;++i)t[i]=n,n*=e[2*i+1]-e[2*i]+1;return t},e.computeOffsetIndex=function(t){var n=b(t,3),i=n[0],o=n[1],a=n[2],s=e.getExtent(),l=e.getPointData().getScalars().getNumberOfComponents(),u=e.computeIncrements(s,l);return Math.floor((Math.round(i)-s[0])*u[0]+(Math.round(o)-s[2])*u[1]+(Math.round(a)-s[4])*u[2])},e.getOffsetIndexFromWorld=function(t){for(var n=e.getExtent(),i=e.worldToIndex(t),o=0;o<3;++o)if(i[o]<n[2*o]||i[o]>n[2*o+1])return a_("GetScalarPointer: Pixel ".concat(i," is not in memory. Current extent = ").concat(n)),NaN;return e.computeOffsetIndex(i)},e.getScalarValueFromWorld=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=i)return a_("GetScalarPointer: Scalar Component ".concat(n," is not within bounds. Current Scalar numberOfComponents: ").concat(i)),NaN;var o=e.getOffsetIndexFromWorld(t);return Number.isNaN(o)?o:e.getPointData().getScalars().getComponent(o,n)},n=e.initialize,e.initialize=function(){return e.set({direction:o7(t.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:ot.EMPTY}),n()}}var aP={newInstance:eE.newInstance(aO,"vtkImageData"),extend:aO};function aM(e){var t=b(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0],4),n=t[0],i=t[1],o=t[2],a=t[3],s=e.getContext("2d").getImageData(n,i,o||e.width,a||e.height),l=aP.newInstance({type:"vtkImageData"});l.setOrigin(0,0,0),l.setSpacing(1,1,1),l.setExtent(0,(o||e.width)-1,0,(a||e.height)-1,0,0);var u=nH.newInstance({numberOfComponents:4,values:new Uint8Array(s.data.buffer)});return u.setName("scalars"),l.getPointData().setScalars(u),l}var aE={canvasToImageData:aM,imageToImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flipX:!1,flipY:!1,rotate:0},n=document.createElement("canvas");n.width=e.width,n.height=e.height;var i=n.getContext("2d"),o=t.flipX,a=t.flipY,s=t.rotate;return i.translate(n.width/2,n.height/2),i.scale(o?-1:1,a?-1:1),i.rotate(s*Math.PI/180),i.drawImage(e,-e.width/2,-e.height/2),aM(n)}},aD={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},aI={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:aD,Scale:{LINEAR:0,LOG10:1}},ak={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},aN={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:ak};function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var aB=aI.ScalarMappingTarget,aL=aI.Scale,aF=aI.VectorMode,aV=nH.VtkDataTypes,aj=aN.ColorMode,aG=eE.vtkErrorMacro;function aU(e){return e}function az(e){return Math.floor(255*e+.5)}var aW={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:aF.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:aL.LINEAR};function aH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,aW,n),eE.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],eE.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),eE.setArray(e,t,["mappingRange"],2),eE.getArray(e,t,["mappingRange"]),t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(aF.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(aF.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(aF.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(n,i){if(!(n&&!i||!n&&i))if(n&&i&&n.length!==i.length)aG("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],i&&n)for(var o=i.length,a=0;a<o;a++)t.annotationArray.push({value:n[a],annotation:String(i[a])});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(n,i){var o=e.checkForAnnotatedValue(n),a=!1;return o>=0?t.annotationArray[o].annotation!==i&&(t.annotationArray[o].annotation=i,a=!0):(t.annotationArray.push({value:n,annotation:i}),o=t.annotationArray.length-1,a=!0),a&&(e.updateAnnotatedValueMap(),e.modified()),o},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(n){return t.annotationArray.length?e.checkForAnnotatedValue(n):-1},e.removeAnnotation=function(n){var i=e.checkForAnnotatedValue(n),o=i>=0;return o&&(t.annotationArray.splice(i,1),e.updateAnnotatedValueMap(),e.modified()),o},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(n,i){if(t.indexedLookup){var o=e.getAnnotatedValueIndex(n);e.getIndexedColor(o,i)}else e.getColor(parseFloat(n),i),i[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return -1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=function(t,n,i){var o=t.getNumberOfComponents(),a=null;if(n===aj.DEFAULT&&(t.getDataType()===aV.UNSIGNED_CHAR||t.getDataType()===aV.UNSIGNED_CHAR_CLAMPED)||n===aj.DIRECT_SCALARS&&t)a=e.convertToRGBA(t,o,t.getNumberOfTuples());else{var s={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:aV.UNSIGNED_CHAR},l=eE.newTypedArray(s.dataType,4*t.getNumberOfTuples());s.values=l,s.size=l.length,a=nH.newInstance(s);var u=i;u<0&&o>1?e.mapVectorsThroughTable(t,a,aB.RGBA,-1,-1):(u<0&&(u=0),u>=o&&(u=o-1),e.mapScalarsThroughTable(t,a,aB.RGBA,u))}return a},e.mapVectorsToMagnitude=function(e,t,n){for(var i=e.getNumberOfTuples(),o=e.getNumberOfComponents(),a=t.getData(),s=e.getData(),l=0;l<i;l++){for(var u=0,c=0;c<n;c++)u+=s[l*o+c]*s[l*o+c];a[l]=Math.sqrt(u)}},e.mapVectorsThroughTable=function(t,n,i,o,a){var s=e.getVectorMode(),l=a,u=o,c=t.getNumberOfComponents();s===aF.COMPONENT?(-1===u&&(u=e.getVectorComponent()),u<0&&(u=0),u>=c&&(u=c-1)):(-1===l&&(l=e.getVectorSize()),l<=0?(u=0,l=c):(u<0&&(u=0),u>=c&&(u=c-1),u+l>c&&(l=c-u)),s!==aF.MAGNITUDE||1!==c&&1!==l||(s=aF.COMPONENT));var d=0;switch(u>0&&(d=u),s){case aF.COMPONENT:e.mapScalarsThroughTable(t,n,i,d);break;case aF.RGBCOLORS:break;case aF.MAGNITUDE:default:var f=nH.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,f,l),e.mapScalarsThroughTable(f,n,i,0)}},e.luminanceToRGBA=function(e,t,n,i){for(var o=i(n),a=t.getData(),s=e.getData(),l=a.length,u=0,c=0;c<l;c+=1){var d=i(a[c]);s[4*u]=d,s[4*u+1]=d,s[4*u+2]=d,s[4*u+3]=o,u++}},e.luminanceAlphaToRGBA=function(e,t,n,i){for(var o=t.getData(),a=e.getData(),s=o.length,l=0,u=0;u<s;u+=2){var c=i(o[u]);a[l]=c,a[l+1]=c,a[l+2]=c,a[l+3]=i(o[u+1])*n,l+=4}},e.rGBToRGBA=function(e,t,n,i){for(var o=az(n),a=t.getData(),s=e.getData(),l=a.length,u=0,c=0;c<l;c+=3)s[4*u]=i(a[c]),s[4*u+1]=i(a[c+1]),s[4*u+2]=i(a[c+2]),s[4*u+3]=o,u++},e.rGBAToRGBA=function(e,t,n,i){for(var o=t.getData(),a=e.getData(),s=o.length,l=0,u=0;u<s;u+=4)a[4*l]=i(o[u]),a[4*l+1]=i(o[u+1]),a[4*l+2]=i(o[u+2]),a[4*l+3]=i(o[u+3])*n,l++},e.convertToRGBA=function(n,i,o){var a=t.alpha;if(4===i&&a>=1&&n.getDataType()===aV.UNSIGNED_CHAR)return n;var s=nH.newInstance({numberOfComponents:4,empty:!0,size:4*o,dataType:aV.UNSIGNED_CHAR});if(o<=0)return s;a=(a=a>0?a:0)<1?a:1;var l=aU;switch(n.getDataType()!==aV.FLOAT&&n.getDataType()!==aV.DOUBLE||(l=az),i){case 1:e.luminanceToRGBA(s,n,a,l);break;case 2:e.luminanceAlphaToRGBA(s,n,l);break;case 3:e.rGBToRGBA(s,n,a,l);break;case 4:e.rGBAToRGBA(s,n,a,l);break;default:return aG("Cannot convert colors"),null}return s},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 0x1000000},e.setRange=function(t,n){return e.setMappingRange(t,n)},e.getRange=function(){return e.getMappingRange()},e.areScalarsOpaque=function(n,i,o){if(!n)return e.isOpaque();var a=n.getNumberOfComponents();return(i!==aj.DEFAULT||n.getDataType()!==aV.UNSIGNED_CHAR)&&i!==aj.DIRECT_SCALARS||(3===a||1===a?t.alpha>=1:255===n.getRange(a-1)[0])}}var aq=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aR(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(aH,"vtkScalarsToColors"),extend:aH},aI),aK=eE.vtkErrorMacro,aX={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function aY(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,aX,n),aq.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},eE.obj(t.buildTime),t.opaqueFlagBuildTime={},eE.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},eE.obj(t.insertTime,{mtime:0}),eE.get(e,t,["buildTime"]),eE.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),eE.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),eE.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),eE.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var n=!0;t.nanColor[3]<1&&(n=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(n=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(n=0);for(var i=3;i<t.table.length&&n;i+=4)t.table[i]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length/4-3},e.linearIndexLookup=function(e,t){var n=0,i=Number(e);return Math.floor(n=i<t.range[0]?t.maxIndex+0+1.5:i>t.range[1]?t.maxIndex+1+1.5:(n=(i+t.shift)*t.scale)<t.maxIndex?n:t.maxIndex)},e.linearLookup=function(t,n,i){var o=4*(nO(t)?Math.floor(i.maxIndex+1.5+2):e.linearIndexLookup(t,i));return n.slice(o,o+4)},e.indexedLookupFunction=function(n,i,o){var a=e.getAnnotatedValueIndexInternal(n);-1===a&&(a=t.numberOfColors+2);var s=4*a;return[i[s],i[s+1],i[s+2],i[s+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,i,o,a){var s=e.linearLookup;t.indexedLookup&&(s=e.indexedLookupFunction);var l=e.getMappingRange(),u={maxIndex:e.getNumberOfColors()-1,range:l,shift:0,scale:0};e.lookupShiftAndScale(l,u);var c=e.getAlpha(),d=n.getNumberOfTuples(),f=n.getNumberOfComponents(),p=i.getData(),h=n.getData();if(c>=1){if(o===aD.RGBA)for(var m=0;m<d;m++){var g=s(h[m*f+a],t.table,u);p[4*m]=g[0],p[4*m+1]=g[1],p[4*m+2]=g[2],p[4*m+3]=g[3]}}else if(o===aD.RGBA)for(var v=0;v<d;v++){var y=s(h[v*f+a],t.table,u);p[4*v]=y[0],p[4*v+1]=y[1],p[4*v+2]=y[2],p[4*v+3]=Math.floor(y[3]*c+.5)}},e.forceBuild=function(){var n=0,i=0,o=0,a=0,s=t.numberOfColors-1;s&&(n=(t.hueRange[1]-t.hueRange[0])/s,i=(t.saturationRange[1]-t.saturationRange[0])/s,o=(t.valueRange[1]-t.valueRange[0])/s,a=(t.alphaRange[1]-t.alphaRange[0])/s),t.table.length=4*s+16;for(var l=[],u=[],c=0;c<=s;c++)l[0]=t.hueRange[0]+c*n,l[1]=t.saturationRange[0]+c*i,l[2]=t.valueRange[0]+c*o,nr(l,u),u[3]=t.alphaRange[0]+c*a,t.table[4*c]=255*u[0]+.5,t.table[4*c+1]=255*u[1]+.5,t.table[4*c+2]=255*u[2]+.5,t.table[4*c+3]=255*u[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=function(n){if(Array.isArray(n)){var i=n[0].length;t.numberOfColors=n.length;for(var o=4-i,a=0,s=0;s<t.numberOfColors;s++)t.table[4*s]=255,t.table[4*s+1]=255,t.table[4*s+2]=255,t.table[4*s+3]=255;for(var l=0;l<n.length;l++){for(var u=n[l],c=0;c<i;c++)t.table[a++]=u[c];a+=o}return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0}if(4!==n.getNumberOfComponents())return aK("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==eI.UNSIGNED_CHAR)return aK("Expected unsigned char values for RGBA colors"),!1;t.numberOfColors=n.getNumberOfTuples();var d=n.getData();t.table.length=d.length;for(var f=0;f<d.length;f++)t.table[f]=d[f];return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0},e.buildSpecialColors=function(){var e=t.numberOfColors,n=t.table,i=4*(e+0);t.useBelowRangeColor||0===e?(n[i]=255*t.belowRangeColor[0]+.5,n[i+1]=255*t.belowRangeColor[1]+.5,n[i+2]=255*t.belowRangeColor[2]+.5,n[i+3]=255*t.belowRangeColor[3]+.5):(n[i]=n[0],n[i+1]=n[1],n[i+2]=n[2],n[i+3]=n[3]),i=4*(e+1),t.useAboveRangeColor||0===e?(n[i]=255*t.aboveRangeColor[0]+.5,n[i+1]=255*t.aboveRangeColor[1]+.5,n[i+2]=255*t.aboveRangeColor[2]+.5,n[i+3]=255*t.aboveRangeColor[3]+.5):(n[i]=n[4*(e-1)+0],n[i+1]=n[4*(e-1)+1],n[i+2]=n[4*(e-1)+2],n[i+3]=n[4*(e-1)+3]),n[i=4*(e+2)]=255*t.nanColor[0]+.5,n[i+1]=255*t.nanColor[1]+.5,n[i+2]=255*t.nanColor[2]+.5,n[i+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&(e.buildSpecialColors(),t.insertTime.modified())}var aZ={newInstance:eE.newInstance(aY,"vtkLookupTable"),extend:aY},aJ=function(e){return e},aQ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(this,e),this.matrix=od(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=t?n8:aJ}return I(e,[{key:"rotateFromDirections",value:function(e,t){var n=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(16);rr(n,e[0],e[1],e[2]),rr(i,t[0],t[1],t[2]),rx(n,n),rx(i,i);var a=rw(n,i);return a>=1||(rA(this.tmp,n,i),1e-6>re(this.tmp)&&(rA(this.tmp,[1,0,0],e),1e-6>re(this.tmp)&&rA(this.tmp,[0,1,0],e)),o_(o,Math.acos(a),this.tmp),og(this.matrix,this.matrix,o)),this}},{key:"rotate",value:function(e,n){return rr.apply(t,[this.tmp].concat(m(n))),rx(this.tmp,this.tmp),ob(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return ox(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return ow(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return oA(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,n){return rr(this.tmp,e,t,n),ov(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,n){return rr(this.tmp,e,t,n),oy(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(e){return og(this.matrix,this.matrix,e),this}},{key:"multiply3x3",value:function(e){return og(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}},{key:"invert",value:function(){return op(this.matrix,this.matrix),this}},{key:"identity",value:function(){return od(this.matrix),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(tz(eB,this.matrix))return this;for(var i=-1===n?e.length:t+3*n,o=t;o<i;o+=3)rr(this.tmp,e[o],e[o+1],e[o+2]),rO(this.tmp,this.tmp,this.matrix),e[o]=this.tmp[0],e[o+1]=this.tmp[1],e[o+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&ol(this.matrix,e),this}}]),e}(),a$={buildFromDegree:function(){return new aQ(!0)},buildFromRadian:function(){return new aQ(!1)}},a0=eE.vtkErrorMacro,a1={empty:!0,numberOfComponents:3,dataType:eI.FLOAT,bounds:[1,-1,1,-1,1,-1]};function a2(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a1,a),nH.extend(e,t,a),eE.getArray(e,t,["bounds"],6),n=0,t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*i,t.values=eE.newTypedArray(t.dataType,t.size),e.setNumberOfComponents(i),e.modified())},e.setPoint=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.setTuple(t,i)},e.getPoint=e.getTuple,e.findPoint=e.findTuple,e.insertNextPoint=function(t,n,i){return e.insertNextTuple([t,n,i])},e.insertPoint=function(t,n){return e.insertTuple(t,n)},i=e.getBounds,e.getBounds=function(){return n<t.mtime&&e.computeBounds(),i()},o=e.getBoundsByReference,e.getBoundsByReference=function(){return n<t.mtime&&e.computeBounds(),o()},e.computeBounds=function(){if(3===e.getNumberOfComponents()){var i=e.getRange(0);t.bounds[0]=i[0],t.bounds[1]=i[1];var o=e.getRange(1);t.bounds[2]=o[0],t.bounds[3]=o[1];var a=e.getRange(2);t.bounds[4]=a[0],t.bounds[5]=a[1]}else if(2===e.getNumberOfComponents()){var s=e.getRange(0);t.bounds[0]=s[0],t.bounds[1]=s[1];var l=e.getRange(1);t.bounds[2]=l[0],t.bounds[3]=l[1],t.bounds[4]=0,t.bounds[5]=0}else a0("getBounds called on an array with components of ".concat(e.getNumberOfComponents())),nc(t.bounds);n=eE.getCurrentGlobalMTime()},e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}var a3={newInstance:eE.newInstance(a2,"vtkPoints"),extend:a2},a4={workCount:0};function a5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a4,n),eE.obj(e,t),eE.event(e,t,"change"),eE.get(e,t,["workCount"]),t.classHierarchy.push("vtkProgressHandler"),e.startWork=function(){t.workCount+=1,1===t.workCount&&e.invokeChange(!0)},e.stopWork=function(){t.workCount-=1,0===t.workCount&&e.invokeChange(!1)},e.isWorking=function(){return!!t.workCount},e.wrapPromise=function(t){return e.startWork(),new Promise(function(n,i){t.then(function(){e.stopWork(),n.apply(void 0,arguments)},function(t){e.stopWork(),i(t)})})},e.wrapPromiseFunction=function(t){return function(){return e.wrapPromise(t.apply(void 0,arguments))}}}var a6={newInstance:eE.newInstance(a5,"vtkProgressHandler"),extend:a5},a8={name:"",numberOfComponents:1,size:0,dataType:"string"};function a9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,a8,n),!t.empty&&!t.values&&!t.size)throw TypeError("Cannot create vtkStringArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=m(t.values)):t.values=[],t.values&&(t.size=t.values.length),eE.obj(e,t),eE.set(e,t,["name"]),t.classHierarchy.push("vtkStringArray"),e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,i,o){o!==t.values[n*t.numberOfComponents+i]&&(t.values[n*t.numberOfComponents+i]=o,e.modified())},e.getData=function(){return t.values},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.numberOfComponents||1;n.length&&(n.length=i);for(var o=e*i,a=0;a<i;a++)n[a]=t.values[o+a];return n},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return a7({name:t.name,numberOfComponents:t.numberOfComponents,empty:!0})},e.getName=function(){return t.name||e.setName("vtkStringArray".concat(e.getMTime())),t.name},e.setData=function(n,i){t.values=n,t.size=n.length,i&&(t.numberOfComponents=i),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}var a7=eE.newInstance(a9,"vtkStringArray"),se={newInstance:a7,extend:a9};function st(e){return e}function sn(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(void 0!==e&&"undefined"!==e?"["===e[0]&&"]"===e[e.length-1]?e.substring(1,e.length-1).split(",").map(function(e){return sn(e.trim())}):""===e||Number.isNaN(Number(e))?e:Number(e):void 0)}var sr={toNativeType:sn,extractURLParameters:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n={},i=e?sn:st;return new URLSearchParams(t).forEach(function(e,t){t&&(n[t]=!e||i(e))}),n}},si={name:"",numberOfComponents:1,size:0,dataType:"JSON"};function so(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,si,n),!t.empty&&!t.values&&!t.size)throw TypeError("Cannot create vtkVariantArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=m(t.values)):t.values=[],t.values&&(t.size=t.values.length),eE.obj(e,t),eE.set(e,t,["name"]),t.classHierarchy.push("vtkVariantArray"),e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,i,o){o!==t.values[n*t.numberOfComponents+i]&&(t.values[n*t.numberOfComponents+i]=o,e.modified())},e.getData=function(){return t.values},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.numberOfComponents||1;n.length&&(n.length=i);for(var o=e*i,a=0;a<i;a++)n[a]=t.values[o+a];return n},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return sa({name:t.name,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkVariantArray".concat(e.getMTime())),t.name},e.setData=function(n,i){t.values=n,t.size=n.length,i&&(t.numberOfComponents=i),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}var sa=eE.newInstance(so,"vtkVariantArray");function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function sl(e,t,n){for(var i=-1,o=-1,a=0,s=1,l=0;l<3;l++)for(var u=0;u<2;u++){var c=2*l+u,d=(e[c]-t[l])*(1-2*u),f=(e[c]-n[l])*(1-2*u);if(d>0&&f>0)return;if(d>0||f>0){var p=0;if(0!==d&&(p=d/(d-f)),d>0?p>=a&&(a=p,i=c):p<=s&&(s=p,o=c),a>s&&(i<0||o<0))return}}function h(i,o){for(var a=[0,0,0],s=0;s<2;s++)for(var l=0;l<3;l++)i===2*l||i===2*l+1?a[l]=e[i]:(a[l]=t[l]*(1-o)+n[l]*o,a[l]<e[2*l]&&(a[l]=e[2*l]),a[l]>e[2*l+1]&&(a[l]=e[2*l+1]));return a}return{t1:a,t2:s,x1:h(i,a),x2:h(o,s)}}var su={bbox:m(iG.INIT_BOUNDS)};function sc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,su,n),rY.extend(e,t,n),t.classHierarchy.push("vtkBox"),e.setBounds=function(){for(var e=[],n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];if(Array.isArray(i[0]))e=i[0];else for(var a=0;a<i.length;a++)e.push(i[a]);6===e.length?iG.setBounds(t.bbox,e):console.log("vtkBox.setBounds",e,i)},e.getBounds=function(){return t.bbox},e.evaluateFunction=function(e,n,i){for(var o,a,s,l=Array.isArray(e)?e:[e,n,i],u=-Number.MAX_VALUE,c=0,d=iG.getMinPoint(t.bbox),f=iG.getMaxPoint(t.bbox),p=1,h=0;h<3;h++)0!==(o=iG.getLength(t.bbox,h))?(s=(l[h]-d[h])/o)<0?(p=0,a=d[h]-l[h]):s>1?(p=0,a=l[h]-f[h]):(a=s<=.5?d[h]-l[h]:l[h]-f[h])>u&&(u=a):(a=Math.abs(l[h]-d[h]))>0&&(p=0),a>0&&(c+=a*a);return c=Math.sqrt(c),p?u:c},e.addBounds=function(){var n=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))n=arguments.length<=0?void 0:arguments[0];else for(var i=0;i<arguments.length;i++)n.push(i<0||arguments.length<=i?void 0:arguments[i]);6===n.length&&(iG.addBounds.apply(iG,[t.bbox].concat(m(n))),e.modified())},e.addBox=function(t){return e.addBounds(t.getBounds())},e.intersectWithLine=function(e,n){return sl(t.bbox,e,n)}}var sd=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(sc,"vtkBox"),extend:sc,intersectWithLine:sl},{}),sf={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function sp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sf,n),eE.obj(e,t),t.points||(t.points=a3.newInstance()),eE.get(e,t,["points","pointsIds"]),t.classHierarchy.push("vtkCell"),e.initialize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){t.pointsIds=n;var i=t.points.getData();i.length!==3*t.pointsIds.length&&(i=eE.newTypedArray(e.getDataType(),3*t.pointsIds.length));var o=e.getData();t.pointsIds.forEach(function(e,t){var n=3*e,a=3*t;i[a]=o[n],i[++a]=o[++n],i[++a]=o[++n]}),t.points.setData(i)}else{t.points=e,t.pointsIds=Array(e.getNumberOfPoints());for(var a=e.getNumberOfPoints()-1;a>=0;--a)t.pointsIds[a]=a}},e.getBounds=function(){return t.points.getBounds()},e.getLength2=function(){var t=iG.getLengths(e.getBounds());return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},e.getParametricDistance=function(e){for(var t,n=0,i=0;i<3;i++)(t=e[i]<0?-e[i]:e[i]>1?e[i]-1:0)>n&&(n=t);return n},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points,t.pointsIds)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,n,i,o,a,s){},e.evaluatePosition=function(e,t,n,i,o,a){eE.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}var sh={newInstance:eE.newInstance(sp,"vtkCell"),extend:sp},sm={angle:15};function sg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sm,n),rY.extend(e,t,n),eE.setGet(e,t,["angle"]),t.classHierarchy.push("vtkCone"),e.evaluateFunction=function(e){var n=Math.tan(eK(t.angle));return e[1]*e[1]+e[2]*e[2]-e[0]*e[0]*n*n},e.evaluateGradient=function(e){var n=Math.tan(eK(t.angle));return[-2*e[0]*n*n,2*e[1],2*e[2]]}}var sv={newInstance:eE.newInstance(sg,"vtkCone"),extend:sg};function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var sb={radius:.5,center:[0,0,0],axis:[0,1,0]};function sx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sb,n),rY.extend(e,t,n),eE.setGet(e,t,["radius"]),eE.setGetArray(e,t,["center","axis"],3),t.classHierarchy.push("vtkCylinder"),e.evaluateFunction=function(e){var n=[e[0]-t.center[0],e[1]-t.center[1],e[2]-t.center[2]],i=tc(t.axis,n);return tc(n,n)-i*i-t.radius*t.radius},e.evaluateGradient=function(e){var n=t.axis[0]*(e[0]-t.center[0])+t.axis[1]*(e[1]-t.center[1])+t.axis[2]*(e[2]-t.center[2]),i=[t.center[0]+n*t.axis[0],t.center[1]+n*t.axis[1],t.center[2]+n*t.axis[2]];return[2*(e[0]-i[0]),2*(e[1]-i[1]),2*(e[2]-i[2])]}}var sw=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(sx,"vtkCylinder"),extend:sx},{evaluate:function(e,t,n,i){var o=new Float32Array(3);o[0]=i[0]-t[0],o[1]=i[1]-t[1],o[2]=i[2]-t[2];var a=tc(n,o);return tc(o,o)-a*a-e*e}}),sA={array:null,maxId:0,extend:0};function sC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sA,n),eE.obj(e,t),t.classHierarchy.push("vtkCellLinks"),e.buildLinks=function(n){var i=n.getPoints().getNumberOfPoints(),o=n.getNumberOfCells(),a=new Uint32Array(i);if(n.isA("vtkPolyData")){for(var s=0;s<o;++s)n.getCellPoints(s).cellPointIds.forEach(function(t){e.incrementLinkCount(t)});e.allocateLinks(i),t.maxId=i-1;for(var l=function(t){n.getCellPoints(t).cellPointIds.forEach(function(n){e.insertCellReference(n,a[n]++,t)})},u=0;u<o;++u)l(u)}else{for(var c=0;c<o;c++)sh.newInstance().getPointsIds().forEach(function(t){e.incrementLinkCount(t)});e.allocateLinks(i),t.maxId=i-1;for(var d=function(t){sh.newInstance().getPointsIds().forEach(function(n){e.insertCellReference(n,a[n]++,t)})},f=0;f<o;++f)d(f)}},e.allocate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map(function(){return{ncells:0,cells:null}}),t.extend=n,t.maxId=-1},e.initialize=function(){t.array=null},e.getLink=function(e){return t.array[e]},e.getNcells=function(e){return t.array[e].ncells},e.getCells=function(e){return t.array[e].cells},e.insertNextPoint=function(e){t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=function(e,n){t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=function(e){t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=function(e,n){t.array[n].cells=t.array[n].cells.filter(function(t){return t!==e}),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=function(e,n){t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=function(e,n){t.array[e].cells.length=n},e.squeeze=function(){var e=t.maxId+1,n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n},e.reset=function(){t.maxId=-1},e.deepCopy=function(e){t.array=m(e.array),t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=function(e){++t.array[e].ncells},e.allocateLinks=function(e){for(var n=0;n<e;++n)t.array[n].cells=Array(t.array[n].ncells)},e.insertCellReference=function(e,n,i){t.array[e].cells[n]=i}}var sS={newInstance:eE.newInstance(sC,"vtkCellLinks"),extend:sC},s_=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var sO={size:0,maxId:-1,extend:1e3};function sP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sO,n),eE.obj(e,t),eE.get(e,t,["size","maxId","extend"]),eE.getArray(e,t,["typeArray","locationArray"]),t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=function(e,n,i){t.typeArray[e]=n,t.locationArray[e]=i,e>t.maxId&&(t.maxId=e)},e.insertNextCell=function(n,i){return e.insertCell(++t.maxId,n,i),t.maxId},e.setCellTypes=function(e,n,i){t.size=e,t.typeArray=n,t.locationArray=i,t.maxId=e-1},e.getCellLocation=function(e){return t.locationArray[e]},e.deleteCell=function(e){t.typeArray[e]=0},e.getNumberOfTypes=function(){return t.maxId+1},e.isType=function(t){for(var n=e.getNumberOfTypes(),i=0;i<n;++i)if(t===e.getCellType(i))return!0;return!1},e.insertNextType=function(t){return e.insertNextCell(t,-1)},e.getCellType=function(e){return t.typeArray[e]},e.reset=function(){t.maxId=-1},e.deepCopy=function(n){e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}var sM=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(sP,"vtkCellTypes"),extend:sP},{getClassNameFromTypeId:function(e){return e<s_.length?s_[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return s_.findIndex(e)},isLinear:function(e){return e<21||41===e||42===e},hasSubCells:function(e){return 6===e||4===e||2===e}}),sE={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2},sD={IntersectionState:sE};function sI(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function sk(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=n[0]*i+n[4]*o+n[8]*a+n[12]*s,e[1]=n[1]*i+n[5]*o+n[9]*a+n[13]*s,e[2]=n[2]*i+n[6]*o+n[10]*a+n[14]*s,e[3]=n[3]*i+n[7]*o+n[11]*a+n[15]*s,e}function sN(){var e=new n4(4);return n4!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function sR(e,t,n){var i=Math.sin(n*=.5);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function sB(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>1e-6?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function sL(e,t,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=n[0],u=n[1],c=n[2],d=n[3];return e[0]=i*d+s*l+o*c-a*u,e[1]=o*d+s*u+a*l-i*c,e[2]=a*d+s*c+i*u-o*l,e[3]=s*d-i*l-o*u-a*c,e}function sF(e,t,n,i){var o,a,s,l,u,c=t[0],d=t[1],f=t[2],p=t[3],h=n[0],m=n[1],g=n[2],v=n[3];return(a=c*h+d*m+f*g+p*v)<0&&(a=-a,h=-h,m=-m,g=-g,v=-v),1-a>1e-6?(s=Math.sin(o=Math.acos(a)),l=Math.sin((1-i)*o)/s,u=Math.sin(i*o)/s):(l=1-i,u=i),e[0]=l*c+u*h,e[1]=l*d+u*m,e[2]=l*f+u*g,e[3]=l*p+u*v,e}sV=new n4(4),n4!=Float32Array&&(sV[0]=0,sV[1]=0,sV[2]=0,sV[3]=0);var sV,sj=function(e,t,n,i){var o=new n4(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o},sG=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=n*n+i*i+o*o+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=i*s,e[2]=o*s,e[3]=a*s,e};function sU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function sz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sU(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n9(),rt(1,0,0),rt(0,1,0),sN(),sN(),o3();var sW=sD.IntersectionState;function sH(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={t:5e-324,distance:0},s=[];s[0]=n[0]-t[0],s[1]=n[1]-t[1],s[2]=n[2]-t[2];var l=s[0]*(e[0]-t[0])+s[1]*(e[1]-t[1])+s[2]*(e[2]-t[2]),u=tc(s,s),c=1e-5*l;return 0!==u&&(a.t=l/u),c<0&&(c=-c),-c<u&&u<c||u<=0||a.t<0?i=t:a.t>1?i=n:(i=s,s[0]=t[0]+a.t*s[0],s[1]=t[1]+a.t*s[1],s[2]=t[2]+a.t*s[2]),o&&(o[0]=i[0],o[1]=i[1],o[2]=i[2]),a.distance=tx(i,e),a}function sq(e,t,n,i,o,a){var s=[],l=[],u=[];o[0]=0,a[0]=0,to(t,e,s),to(i,n,l),to(n,e,u);var c=[tc(s,s),-tc(s,l),-tc(s,l),tc(l,l)],d=[];if(d[0]=tc(s,u),d[1]=-tc(l,u),0===t5(c,d,2)){for(var f,p=Number.MAX_VALUE,h=[e,t,n,i],m=[n,n,e,e],g=[i,i,t,t],v=[a[0],a[0],o[0],o[0]],y=[o[0],o[0],a[0],a[0]],b=0;b<4;b++)(f=sH(h[b],m[b],g[b])).distance<p&&(p=f.distance,v[b]=f.t,y[b]=b%2);return sW.ON_LINE}return o[0]=d[0],a[0]=d[1],o[0]>=0&&o[0]<=1&&a[0]>=0&&a[0]<=1?sW.YES_INTERSECTION:sW.NO_INTERSECTION}var sK={orientations:null};function sX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sK,n),sh.extend(e,t,n),eE.setGet(e,t,["orientations"]),t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){return 1},e.intersectWithLine=function(e,n,i,o,a){var s,l={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};a[1]=0,a[2]=0;var u=[],c=[],d=[];t.points.getPoint(0,c),t.points.getPoint(1,d);var f,p=[],h=[],m=sq(e,n,c,d,p,h);if(l.t=p[0],l.betweenPoints=(f=l.t)>=0&&f<=1,a[0]=h[0],m===sW.YES_INTERSECTION){for(var g=0;g<3;g++)o[g]=c[g]+a[0]*(d[g]-c[g]),u[g]=e[g]+l.t*(n[g]-e[g]);if(tx(o,u)<=i*i)return l.intersect=1,l}else{if(l.t<0)return(s=sH(e,c,d,o)).distance<=i*i&&(l.t=0,l.intersect=1,l.betweenPoints=!0),l;if(l.t>1)return(s=sH(n,c,d,o)).distance<=i*i&&(l.t=1,l.intersect=1,l.betweenPoints=!0),l;if(a[0]<0)return a[0]=0,l.t=(s=sH(c,e,n,o)).t,s.distance<=i*i&&(l.intersect=1),l;if(a[0]>1)return a[0]=1,l.t=(s=sH(d,e,n,o)).t,s.distance<=i*i&&(l.intersect=1),l}return l},e.evaluateLocation=function(e,n,i){var o=[],a=[];t.points.getPoint(0,o),t.points.getPoint(1,a);for(var s=0;s<3;s++)n[s]=o[s]+e[0]*(a[s]-o[s]);i[0]=1-e[0],i[1]=e[0]},e.evaluateOrientation=function(e,n,i){return!!t.orientations&&(sF(n,t.orientations[0],t.orientations[1],e[0]),i[0]=1-e[0],i[1]=e[0],!0)}}var sY=sz(sz({newInstance:eE.newInstance(sX,"vtkLine"),extend:sX},{distanceToLine:sH,intersection:sq}),sD),sZ={};function sJ(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sZ,a),oe.extend(e,t,a),eE.setGet(e,t,["points"]),t.classHierarchy.push("vtkPointSet"),t.points?t.points=M(t.points):t.points=a3.newInstance(),e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()},n=e.shallowCopy,e.shallowCopy=function(e){n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),t.points=a3.newInstance(),t.points.shallowCopy(e.getPoints())},i=e.getMTime,e.getMTime=function(){var e,n,o=i();return Math.max(o,null!=(e=null==(n=t.points)?void 0:n.getMTime())?e:o)},o=e.initialize,e.initialize=function(){var e;return null==(e=t.points)||e.initialize(),o()}}var sQ={newInstance:eE.newInstance(sJ,"vtkPointSet"),extend:sJ},s$={orientations:null,distanceFunction:rU};function s0(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s$,i),sh.extend(e,t,i),eE.setGet(e,t,["orientations","distanceFunction"]),t.distancesTime={},eE.obj(t.distancesTime,{mtime:0}),t.classHierarchy.push("vtkPolyLine"),(n=sY.newInstance()).getPoints().setNumberOfPoints(2),e.getCellDimension=function(){return 1},e.intersectWithLine=function(i,o,a,s,l,u,c){for(var d={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},f=e.getNumberOfPoints()-1,p=Number.MAX_VALUE,h=[0,0,0],m=[0,0,0],g=0;g<f;g++){var v=[0,0,0];n.getPoints().getData().set(t.points.getData().subarray(3*g,3*(g+2)));var y=n.intersectWithLine(a,s,l,u,c);if(1===y.intersect&&y.t<=d.t+l&&y.t>=i&&y.t<=o){d.intersect=1;var b=n.getParametricDistance(v);if(b<p||b===p&&y.t<d.t){d.subId=g,d.t=y.t,p=b;for(var x=0;x<3;x++)h[x]=u[x],m[x]=v[x]}}}return d},e.evaluateLocation=function(e,i,o,a){return n.getPoints().getData().set(t.points.getData().subarray(3*e,3*(e+2))),n.evaluateLocation(i,o,a)},e.evaluateOrientation=function(e,i,o,a){return t.orientations?n.setOrientations([t.orientations[e],t.orientations[e+1]]):n.setOrientations(null),n.evaluateOrientation(i,o,a)},e.getDistancesToFirstPoint=function(){var n=t.distancesTime.getMTime();if(n<t.points.getMTime()||n<e.getMTime()){var i=e.getNumberOfPoints();if(t.distances?t.distances.length=i:t.distances=Array(i),i>0){var o=[,,,],a=[,,,],s=0;t.distances[0]=s,t.points.getPoint(0,o);for(var l=1;l<i;++l)t.points.getPoint(l,a),s+=t.distanceFunction(o,a),t.distances[l]=s,rn(o,a)}t.distancesTime.modified()}return t.distances},e.findPointIdAtDistanceFromFirstPoint=function(t){var n=e.getDistancesToFirstPoint();if(n.length<2)return -1;var i=0,o=n.length-1;if(t<n[i]||t>n[o]||0===n[o])return -1;for(;o-i>1;){var a=Math.floor((i+o)/2);n[a]<=t?i=a:o=a}return i}}var s1={newInstance:eE.newInstance(s0,"vtkPolyLine"),extend:s0},s2={elements:[]};function s3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s2,n),eE.obj(e,t),t.classHierarchy.push("vtkPriorityQueue"),e.push=function(e,n){var i=t.elements.findIndex(function(t){return t.priority>e});t.elements.splice(i,0,{priority:e,element:n})},e.pop=function(){return t.elements.length>0?t.elements.shift().element:null},e.deleteById=function(e){t.elements=t.elements.filter(function(t){return t.element.id!==e})},e.length=function(){return t.elements.length}}var s4={newInstance:eE.newInstance(s3,"vtkPriorityQueue"),extend:s3},s5={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function s6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function s8(e,t,n,i,o){return(i[e]-n[e])*(o[t]-n[t])-(o[e]-n[e])*(i[t]-n[t])}var s9={firstPoint:null,pointCount:0,tris:[]};function s7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s9,n),eE.obj(e,t),function(e,t){function n(e){var n=[0,0,0],i=[0,0,0],o=[0,0,0],a=[0,0,0];to(e.point,e.previous.point,n),to(e.next.point,e.point,i),to(e.previous.point,e.next.point,o),tf(n,i,a);var s=tc(a,t.normal);if(s<=0)return -1;var l=tp(n)+tp(i)+tp(o);return l*l/s}function i(e,i){t.pointCount-=1;var o=e.previous,a=e.next;t.tris=t.tris.concat(e.point),t.tris=t.tris.concat(a.point),t.tris=t.tris.concat(o.point),o.next=a,a.previous=o,i.deleteById(o.id),i.deleteById(a.id);var s=n(o);s>0&&i.push(s,o);var l=n(a);l>0&&i.push(l,a),e.id===t.firstPoint.id&&(t.firstPoint=a)}t.classHierarchy.push("vtkPolygon"),e.triangulate=function(){return t.firstPoint?function(){!function(){var e=[0,0,0],n=[0,0,0];t.normal=[0,0,0];for(var i=m(t.firstPoint.point),o=t.firstPoint,a=0;a<t.pointCount;a++){to(o.point,i,e),to(o.next.point,i,n);var s=[0,0,0];tf(e,n,s),ti(t.normal,s,t.normal),o=o.next}th(t.normal)}();for(var e=s4.newInstance(),o=t.firstPoint,a=0;a<t.pointCount;a++){var s=n(o);s>0&&e.push(s,o),o=o.next}for(;t.pointCount>2&&e.length()>0;)if(t.pointCount===e.length())i(e.pop(),e);else{var l=e.pop();(function(e){if(t.pointCount<=3)return!0;var n=e.previous,i=e.next,o=[0,0,0];to(i.point,n.point,o);var a=[0,0,0];if(tf(o,t.normal,a),th(a),0===tp(a))return!1;for(var s=r8.evaluate(a,n.point,i.next.point),l=s>1e-6?1:s<-1e-6?-1:0,u=+(l<0),c=i.next.next;c.id!==n.id;c=c.next){var d=c.previous,f=(s=r8.evaluate(a,n.point,c.point))>1e-6?1:s<-1e-6?-1:0;if(f!==l){if(u||(u=+(f<=0)),sY.intersection(n.point,i.point,c.point,d.point,[0],[0])===sE.YES_INTERSECTION)return!1;l=f}}return 1===u})(l)&&i(l,e)}return t.pointCount<=2}():null},e.setPoints=function(e){t.pointCount=e.length,t.firstPoint={id:0,point:e[0],next:null,previous:null};for(var n=t.firstPoint,i=1;i<t.pointCount;i++)n.next={id:i,point:e[i],next:null,previous:n},n=n.next;t.firstPoint.previous=n,n.next=t.firstPoint},e.getPointArray=function(){return t.tris}}(e,t)}var le=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s6(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(s7,"vtkPolygon"),extend:s7},{PolygonWithPointIntersectionState:s5,pointInPolygon:function(e,t,n,i){if(e[0]<n[0]||e[0]>n[1]||e[1]<n[2]||e[1]>n[3]||e[2]<n[4]||e[2]>n[5])return s5.OUTSIDE;if(11920929e-14>=th(i))return s5.FAILURE;var o=1e-8*((n[1]-n[0])*(n[1]-n[0])+(n[3]-n[2])*(n[3]-n[2])+(n[5]-n[4])*(n[5]-n[4]));o=0==(o*=o)?11920929e-14:o;for(var a,s,l=[],u=[],c=0;c<t.length;){if(l[0]=t[c++],l[1]=t[c++],l[2]=t[c++],tx(e,l)<=o)return s5.INSIDE;var d=sY.distanceToLine(e,l,u),f=d.distance,p=d.t;if(f<=o&&p>0&&p<1)return s5.INSIDE}Math.abs(i[0])>Math.abs(i[1])?Math.abs(i[0])>Math.abs(i[2])?(a=1,s=2):(a=0,s=1):Math.abs(i[1])>Math.abs(i[2])?(a=0,s=2):(a=0,s=1);for(var h=0,m=0;m<t.length;)l[0]=t[m++],l[1]=t[m++],l[2]=t[m++],m<t.length?(u[0]=t[m],u[1]=t[m+1],u[2]=t[m+2]):(u[0]=t[0],u[1]=t[1],u[2]=t[2]),l[s]<=e[s]?u[s]>e[s]&&s8(a,s,l,u,e)>0&&++h:u[s]<=e[s]&&0>s8(a,s,l,u,e)&&--h;return 0===h?s5.OUTSIDE:s5.INSIDE},getBounds:function(e,t,n){var i=e.length,o=[];t.getPoint(e[0],o),n[0]=o[0],n[1]=o[0],n[2]=o[1],n[3]=o[1],n[4]=o[2],n[5]=o[2];for(var a=1;a<i;a++)t.getPoint(e[a],o),iG.addPoint.apply(iG,[n].concat(o));var s=iG.getLengths(n);return tc(s,s)},getNormal:function(e,t,n){n.length=3,n[0]=0,n[1]=0,n[2]=0;var i=[],o=[],a=[],s=[],l=[];t.getPoint(e[0],i),t.getPoint(e[1],o);for(var u=2;u<e.length;u++){t.getPoint(e[u],a),to(a,o,s),to(i,o,l);var c=[0,0,0];tf(s,l,c),ti(n,c,n);var d=[a,o];o=d[0],a=d[1]}return th(n)},computeCentroid:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];n[0]=0,n[1]=0,n[2]=0;for(var i=e.length,o=[],a=0;a<i;a++)t.getPoint(e[a],o),n[0]+=o[0],n[1]+=o[1],n[2]+=o[2];return n[0]/=i,n[1]/=i,n[2]/=i,n}});function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ln(e,t,n,i){var o=n[0]-t[0],a=n[1]-t[1],s=n[2]-t[2],l=e[0]-t[0],u=e[1]-t[1],c=e[2]-t[2];i[0]=a*c-s*u,i[1]=s*l-o*c,i[2]=o*u-a*l}function lr(e,t,n,i){ln(e,t,n,i);var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);0!==o&&(i[0]/=o,i[1]/=o,i[2]/=o)}function li(e){e[0]=-1,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=1}var lo={};function la(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lo,n),sh.extend(e,t,n),t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){return 2},e.intersectWithLine=function(n,i,o,a,s){var l={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};s[2]=0;var u=o*o,c=[],d=[],f=[];t.points.getPoint(0,c),t.points.getPoint(1,d),t.points.getPoint(2,f);var p=[];if(lr(c,d,f,p),0!==p[0]||0!==p[1]||0!==p[2]){var h=r8.intersectWithLine(n,i,c,p);if(l.betweenPoints=h.betweenPoints,l.t=h.t,a[0]=h.x[0],a[1]=h.x[1],a[2]=h.x[2],!h.intersection)return s[0]=0,s[1]=0,l.intersect=0,l;var m=e.evaluatePosition(a,[],s,[]);if(m.evaluation>=0)return m.dist2<=u?l.intersect=1:l.intersect=m.evaluation,l}var g=tx(c,d),v=tx(d,f),y=tx(f,c);t.line||(t.line=sY.newInstance()),g>v&&g>y?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,d)):v>y&&v>g?(t.line.getPoints().setPoint(0,d),t.line.getPoints().setPoint(1,f)):(t.line.getPoints().setPoint(0,f),t.line.getPoints().setPoint(1,c));var b=t.line.intersectWithLine(n,i,o,a,s);if(l.betweenPoints=b.betweenPoints,l.t=b.t,b.intersect){for(var x=[],w=[],A=[],C=0;C<3;C++)x[C]=c[C]-f[C],w[C]=d[C]-f[C],A[C]=a[C]-f[C];return s[0]=tc(A,x)/y,s[1]=tc(A,w)/v,l.intersect=1,l}return s[0]=0,s[1]=0,l.intersect=0,l},e.evaluatePosition=function(e,n,i,o){var a,s,l,u,c,d,f,p,h={subId:0,dist2:0,evaluation:-1},m=[],g=[],v=[],y=[],b=[],x=[],w=[],A=0,C=[],S=[],_=[],T=[],O=[];h.subId=0,i[2]=0,t.points.getPoint(1,m),t.points.getPoint(2,g),t.points.getPoint(0,v),ln(m,g,v,y),r8.generalizedProjectPoint(e,m,y,O);var P=0;for(s=0;s<3;s++)(u=y[s]<0?-y[s]:y[s])>P&&(P=u,A=s);for(l=0,s=0;s<3;s++)s!==A&&(C[l++]=s);for(s=0;s<2;s++)b[s]=O[C[s]]-v[C[s]],x[s]=m[C[s]]-v[C[s]],w[s]=g[C[s]]-v[C[s]];if(0===(c=tI(x,w)))return i[0]=0,i[1]=0,h.evaluation=-1,h;if(i[0]=tI(b,w)/c,i[1]=tI(x,b)/c,o[0]=1-(i[0]+i[1]),o[1]=i[0],o[2]=i[1],o[0]>=0&&o[0]<=1&&o[1]>=0&&o[1]<=1&&o[2]>=0&&o[2]<=1)n&&(h.dist2=tx(O,e),n[0]=O[0],n[1]=O[1],n[2]=O[2]),h.evaluation=1;else{if(n)if(o[1]<0&&o[2]<0)for(d=tx(e,v),f=sY.distanceToLine(e,m,v,a,_),p=sY.distanceToLine(e,v,g,a,T),d<f?(h.dist2=d,S=v):(h.dist2=f,S=_),p<h.dist2&&(h.dist2=p,S=T),s=0;s<3;s++)n[s]=S[s];else if(o[2]<0&&o[0]<0)for(d=tx(e,m),f=sY.distanceToLine(e,m,v,a,_),p=sY.distanceToLine(e,m,g,a,T),d<f?(h.dist2=d,S=m):(h.dist2=f,S=_),p<h.dist2&&(h.dist2=p,S=T),s=0;s<3;s++)n[s]=S[s];else if(o[1]<0&&o[0]<0)for(d=tx(e,g),f=sY.distanceToLine(e,g,v,a,_),p=sY.distanceToLine(e,m,g,a,T),d<f?(h.dist2=d,S=g):(h.dist2=f,S=_),p<h.dist2&&(h.dist2=p,S=T),s=0;s<3;s++)n[s]=S[s];else o[0]<0?h.dist2=sY.distanceToLine(e,m,g,n).distance:o[1]<0?h.dist2=sY.distanceToLine(e,g,v,n).distance:o[2]<0&&(h.dist2=sY.distanceToLine(e,m,v,n).distance);h.evaluation=0}return h},e.evaluateLocation=function(e,n,i){var o=[],a=[],s=[];t.points.getPoint(0,o),t.points.getPoint(1,a),t.points.getPoint(2,s);for(var l=1-e[0]-e[1],u=0;u<3;u++)n[u]=o[u]*l+a[u]*e[0]+s[u]*e[1];i[0]=l,i[1]=e[0],i[2]=e[1]},e.getParametricDistance=function(e){var t,n=0,i=[];i[0]=e[0],i[1]=e[1],i[2]=1-e[0]-e[1];for(var o=0;o<3;o++)(t=i[o]<0?-i[o]:i[o]>1?i[o]-1:0)>n&&(n=t);return n},e.derivatives=function(e,n,i,o,a){var s=t.points.getPoint(0),l=t.points.getPoint(1),u=t.points.getPoint(2),c=[],d=[],f=[],p=[];lr(s,l,u,c),to(l,s,d),to(u,s,p),tf(c,d,f);var h=th(d);if(h<=0||0>=th(f))for(var m=0;m<o;m++)for(var g=0;g<3;g++)a[m*o+g]=0;else{var v=[h,0],y=[tc(p,d),tc(p,f)],b=Array(6);li(b);var x=[v[0]-0,v[1]-0,y[0]-0,y[1]-0],w=eE.newTypedArray($.Float64Array,4);t6(x,w,2);for(var A=0;A<o;A++){for(var C=0,S=0,_=0;_<3;_++)C+=b[_]*i[o*_+A],S+=b[3+_]*i[o*_+A];var T=C*w[0]+S*w[1],O=C*w[2]+S*w[3];a[3*A]=T*d[0]+O*f[0],a[3*A+1]=T*d[1]+O*f[1],a[3*A+2]=T*d[2]+O*f[2]}}},e.cellBoundary=function(e,n,i){var o=n[0]-n[1],a=.5*(1-n[0])-n[1],s=2*n[0]+n[1]-1;return o>=0&&a>=0?(i[0]=t.pointsIds[0],i[1]=t.pointsIds[1]):a<0&&s>=0?(i[0]=t.pointsIds[1],i[1]=t.pointsIds[2]):(i[0]=t.pointsIds[2],i[1]=t.pointsIds[0]),!(n[0]<0||n[1]<0||n[0]>1||n[1]>1||1-n[0]-n[1]<0)}}var ls=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(la,"vtkTriangle"),extend:la},{computeNormalDirection:ln,computeNormal:lr,interpolationDerivs:li,intersectWithTriangle:function(e,t,n,i,o,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e-6,l=!1,u=[],c=[],d=[],f=[],p=[];lr(e,t,n,f),lr(i,o,a,p);var h=-tc(f,e),m=-tc(p,i),g=[tc(p,e)+m,tc(p,t)+m,tc(p,n)+m];if(g[0]*g[1]>s&&g[0]*g[2]>s)return{intersect:!1,coplanar:l,pt1:u,pt2:c,surfaceId:d};var v=[tc(f,i)+h,tc(f,o)+h,tc(f,a)+h];if(v[0]*v[1]>s&&v[0]*v[2]>s)return{intersect:!1,coplanar:l,pt1:u,pt2:c,surfaceId:d};if(1e-9>Math.abs(f[0]-p[0])&&1e-9>Math.abs(f[1]-p[1])&&1e-9>Math.abs(f[2]-p[2])&&1e-9>Math.abs(h-m))return{intersect:!1,coplanar:l=!0,pt1:u,pt2:c,surfaceId:d};var y=[e,t,n],b=[i,o,a],x=tc(f,p),w=(h-m*x)/(x*x-1),A=(m-h*x)/(x*x-1),C=[w*f[0]+A*p[0],w*f[1]+A*p[1],w*f[2]+A*p[2]],S=tf(f,p,[]);th(S);for(var _,T,O=0,P=0,M=[],E=[],D=50,I=50,k=0;k<3;k++){var N=k,R=(k+1)%3,B=r8.intersectWithLine(y[N],y[R],i,p);B.intersection&&B.t>0-s&&B.t<1+s&&(B.t<1+s&&B.t>1-s&&(D=O),M[O++]=tc(B.x,S)-tc(C,S));var L=r8.intersectWithLine(b[N],b[R],e,f);L.intersection&&L.t>0-s&&L.t<1+s&&(L.t<1+s&&L.t>1-s&&(I=P),E[P++]=tc(L.x,S)-tc(C,S))}if(O>2){O--;var F=M[2];M[2]=M[D],M[D]=F}if(P>2){P--;var V=E[2];E[2]=E[I],E[I]=V}if(2!==O||2!==P||Number.isNaN(M[0])||Number.isNaN(M[1])||Number.isNaN(E[0])||Number.isNaN(E[1]))return{intersect:!1,coplanar:l,pt1:u,pt2:c,surfaceId:d};if(M[0]>M[1]){var j=M[1];M[1]=M[0],M[0]=j}if(E[0]>E[1]){var G=E[1];E[1]=E[0],E[0]=G}return M[1]<E[0]||E[1]<M[0]?{intersect:!1,coplanar:l,pt1:u,pt2:c,surfaceId:d}:(M[0]<E[0]?M[1]<E[1]?(d[0]=2,d[1]=1,_=E[0],T=M[1]):(d[0]=2,d[1]=2,_=E[0],T=E[1]):M[1]<E[1]?(d[0]=1,d[1]=1,_=M[0],T=M[1]):(d[0]=1,d[1]=2,_=M[0],T=E[1]),tl(C,S,_,u),tl(C,S,T,c),{intersect:!0,coplanar:l,pt1:u,pt2:c,surfaceId:d})}}),ll={};function lu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ll,n),sh.extend(e,t,n),t.classHierarchy.push("vtkQuad"),e.getCellDimension=function(){return 2},e.getCellType=function(){return 9},e.getNumberOfEdges=function(){return 4},e.getNumberOfFaces=function(){return 0},e.intersectWithLine=function(e,n,i,o,a){var s,l,u,c,d,f,p,h,g,v,y,b,x,w={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1},A=t.points.getPoint(0,[]),C=t.points.getPoint(1,[]),S=t.points.getPoint(2,[]),_=t.points.getPoint(3,[]),T=tx(A,S),O=tx(C,_);if(T===O){for(var P,M=0,E=0,D=0;D<4;D++)(P=t.pointsIds[D])>M&&(M=P,E=D);x=+(0!==E&&2!==E)}else x=T<O?0:1;var I,k=null;t.triangle?k=t.triangle.getPoints():(t.triangle=ls.newInstance(),(k=a3.newInstance()).setNumberOfPoints(3),t.triangle.initialize(k));var N,R,B,L=[0,0,0],F=[0,0,0],V=[0,0,0],j=[0,0,0];switch(x){case 0:(s=k).setPoint.apply(s,[0].concat(m(A))),(l=k).setPoint.apply(l,[1].concat(m(C))),(u=k).setPoint.apply(u,[2].concat(m(S))),I=t.triangle.intersectWithLine(e,n,i,L,F),(c=k).setPoint.apply(c,[0].concat(m(S))),(d=k).setPoint.apply(d,[1].concat(m(_))),(f=k).setPoint.apply(f,[2].concat(m(A))),N=t.triangle.intersectWithLine(e,n,i,V,j),R=I.intersect&&N.intersect?I.t<=N.t:I.intersect,B=I.intersect&&N.intersect?N.t<I.t:N.intersect,R?(w=I,o[0]=L[0],o[1]=L[1],o[2]=L[2],a[0]=F[0]+F[1],a[1]=F[1],a[2]=F[2]):B&&(w=N,o[0]=V[0],o[1]=V[1],o[2]=V[2],a[0]=1-(j[0]+j[1]),a[1]=1-j[1],a[2]=j[2]);break;case 1:(p=k).setPoint.apply(p,[0].concat(m(A))),(h=k).setPoint.apply(h,[1].concat(m(C))),(g=k).setPoint.apply(g,[2].concat(m(_))),I=t.triangle.intersectWithLine(e,n,i,L,F),(v=k).setPoint.apply(v,[0].concat(m(S))),(y=k).setPoint.apply(y,[1].concat(m(_))),(b=k).setPoint.apply(b,[2].concat(m(C))),N=t.triangle.intersectWithLine(e,n,i,V,j),R=I.intersect&&N.intersect?I.t<=N.t:I.intersect,B=I.intersect&&N.intersect?N.t<I.t:N.intersect,R?(w=I,o[0]=L[0],o[1]=L[1],o[2]=L[2],a[0]=F[0],a[1]=F[1],a[2]=F[2]):B&&(w=N,o[0]=V[0],o[1]=V[1],o[2]=V[2],a[0]=1-j[0],a[1]=1-j[1],a[2]=j[2])}return w},e.interpolationFunctions=function(e,t){var n=1-e[0],i=1-e[1];t[0]=n*i,t[1]=e[0]*i,t[2]=e[0]*e[1],t[3]=n*e[1]},e.evaluateLocation=function(n,i,o){var a=[];e.interpolationFunctions(n,o),i[0]=0,i[1]=0,i[2]=0;for(var s=0;s<4;s++){t.points.getPoint(s,a);for(var l=0;l<3;l++)i[l]+=a[l]*o[s]}}}var lc={newInstance:eE.newInstance(lu,"vtkQuad"),extend:lu};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var lf=eE.vtkErrorMacro;function lp(e){return function(){return lf("vtkTriangleStrip.".concat(e," - NOT IMPLEMENTED"))}}var lh={line:null,triangle:null,tris:null};function lm(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lh,i),sh.extend(e,t,i),t.line||(t.line=sY.newInstance()),t.triangle||(t.triangle=ls.newInstance()),t.classHierarchy.push("vtkTriangleStrip"),n=e.initialize,e.initialize=function(e,i){t.triangle.initialize(e,i),n(e,i)},e.getCellType=function(){return 6},e.getCellDimension=function(){return 2},e.getNumberOfEdges=function(){return t.pointsIds.length},e.getNumberOfFaces=function(){return 0},e.evaluatePosition=function(e,n,i,o,a){var s=[0,0,0],l=Number.MAX_VALUE,u=0,c=[],d=[],f=[];i[2]=0,d[0]=0,d[1]=0,d[2]=0;var p=t.triangle.getPoints();p.setNumberOfPoints(3);for(var h=t.triangle.getPointsIds().length,m=0;m<h;m++)a[m]=0;for(var g=0;g<h-2;g++){var v=[];p.getPoint(g,v);var y=[];p.getPoint(g+1,y);var b=[];p.getPoint(g+2,b),p.setData(Float32Array.from([].concat(v,y,b)),3);var x=t.triangle.evaluatePosition(e,f,s,c),w=x.dist2;x.evaluation>=0&&(w<l||w===l&&0===u)&&(u=x,n&&(n[0]=f[0],n[1]=f[1],n[2]=f[2]),i[0]=s[0],i[1]=s[1],l=w,d[0]=c[0],d[1]=c[1],d[2]=c[2])}return o[0]=l,a[0]=d[0],a[1]=d[1],a[2]=d[2],u},e.evaluateLocation=function(e,n,i,o){for(var a=[[0,1,2],[1,0,2]],s=e%2,l=t.pointsIds.length,u=0;u<l;u++)o[u]=0;var c=1-n[0]-n[1];o[e]=c,o[e+1]=n[0],o[e+2]=n[1];var d=[];t.points.getPoint(e+a[s][0],d);var f=[];t.points.getPoint(e+a[s][1],f);var p=[];t.points.getPoint(e+a[s][2],p);for(var h=0;h<3;h++)i[h]=d[h]*o[e]+f[h]*o[e+1]+p[h]*o[e+2]},e.cellBoundary=function(e,n,i){var o=[[0,1,2],[1,0,2]],a=e%2,s=t.triangle.getPointsIds();return s[0]=t.pointsIds[o[a][0]],s[1]=t.pointsIds[o[a][1]],s[2]=t.pointsIds[o[a][2]],t.triangle.cellBoundary(0,n,i)},e.getEdge=function(e){var n,i,o=t.pointsIds.length;return 0===e?(n=0,i=1):e===o-1?(n=e-1,i=e):(n=e-1,i=e+1),t.line.getPointsIds()[0]=t.pointsIds[n],t.line.getPointsIds()[1]=t.pointsIds[i],t.line.getPoints().setPoint(0,t.points.getPoint(n)),t.line.getPoints().setPoint(1,t.points.getPoint(i)),t.line},e.intersectWithLine=function(e,n,i,o,a){var s=t.pointsIds.length-2,l=t.triangle.getPoints();l.setNumberOfPoints(3);for(var u=0;u<s;u++){var c=[];t.points.getPoint(t.pointsIds[u],c);var d=[];t.points.getPoint(t.pointsIds[u+1],d);var f=[];t.points.getPoint(t.pointsIds[u+2],f),l.setData(Float32Array.from([].concat(c,d,f)),3);var p=t.triangle.intersectWithLine(e,n,i,o,a);if(p.intersect)return p}return!1},e.triangulate=function(){var e=t.points.getNumberOfPoints()-2;t.tris=Array(3*e);for(var n=[[0,1,2],[1,0,2]],i=0;i<e;i++)for(var o=i%2,a=0;a<3;a++)t.tris[3*i+a]=i+n[o][a];return!0},e.getPointArray=function(){return t.tris},e.derivatives=function(e,n,i,o,a){var s=[];t.points.getPoint(e,s);var l=[];t.points.getPoint(e+1,l);var u=[];t.points.getPoint(e+2,u);var c=t.triangle.getPoints();c.setPoint.apply(c,[0].concat(s)),c.setPoint.apply(c,[1].concat(l)),c.setPoint.apply(c,[2].concat(u)),t.triangle.derivatives(0,n,i,o,a)},e.getParametricCenter=function(e){return e[0]=.333333,e[1]=.333333,e[2]=0,Math.floor((t.pointsIds.length-2)/2)},e.contour=function(e,t,n,i,o,a,s,l,u,c,d){return lp("contour")()},e.clip=function(e,t,n,i,o,a,s,l,u,c){return lp("clip")()}}var lg,lv=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(lm,"vtkTriangleStrip"),extend:lm},{decomposeStrip:function(e,t){if(!Array.isArray(e)||e.length<3)lf("decomposeStrip - Invalid points array");else for(var n=e[0],i=e[1],o=0;o<e.length-2;o++){var a=e[o+2];o%2?t.insertNextCell([i,n,a]):t.insertNextCell([n,i,a]),n=i,i=a}}}),ly=["verts","lines","polys","strips"],lb=eE.vtkWarningMacro,lx=(y(lg={},3,sY),y(lg,9,lc),y(lg,4,sY),y(lg,5,ls),y(lg,6,lv),y(lg,4,s1),y(lg,7,le),lg),lw={};function lA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lw,n),sQ.extend(e,t,n),eE.get(e,t,["cells","links"]),eE.setGet(e,t,["verts","lines","polys","strips"]),function(e,t){function n(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e){return e.toUpperCase()}).replace(/\s+/g,"")}function i(){t.cells=void 0,t.links=void 0}t.classHierarchy.push("vtkPolyData"),ly.forEach(function(o){e["getNumberOf".concat(n(o))]=function(){return t[o].getNumberOfCells()},t[o]?t[o]=M(t[o]):t[o]=nQ.newInstance(),t["_on".concat(n(o),"Changed")]=i}),e.getNumberOfCells=function(){return ly.reduce(function(e,n){return e+t[n].getNumberOfCells()},0)};var o=e.shallowCopy;e.shallowCopy=function(e){o(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),ly.forEach(function(n){t[n]=nQ.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})};var a=e.getMTime;e.getMTime=function(){return ly.reduce(function(e,n){var i,o;return Math.max(e,null!=(i=null==(o=t[n])?void 0:o.getMTime())?i:e)},a())};var s=e.initialize;e.initialize=function(){return ly.forEach(function(e){var n;return null==(n=t[e])?void 0:n.initialize()}),i(),s()},e.buildCells=function(){var n=e.getNumberOfVerts(),i=e.getNumberOfLines(),o=e.getNumberOfPolys(),a=e.getNumberOfStrips(),s=n+i+o+a,l=new Uint8Array(s),u=l,c=new Uint32Array(s),d=c;if(n){var f=0;t.verts.getCellSizes().forEach(function(e,t){d[t]=f,u[t]=e>1?2:1,f+=e+1}),d=d.subarray(n),u=u.subarray(n)}if(i){var p=0;t.lines.getCellSizes().forEach(function(e,t){d[t]=p,u[t]=e>2?4:3,1===e&&lb("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),p+=e+1}),d=d.subarray(i),u=u.subarray(i)}if(o){var h=0;t.polys.getCellSizes().forEach(function(e,t){switch(d[t]=h,e){case 3:u[t]=5;break;case 4:u[t]=9;break;default:u[t]=7}e<3&&lb("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),h+=e+1}),d+=d.subarray(o),u+=u.subarray(o)}if(a){var m=0;u.fill(6,0,a),t.strips.getCellSizes().forEach(function(e,t){d[t]=m,m+=e+1})}t.cells=sM.newInstance(),t.cells.setCellTypes(s,l,c)},e.buildLinks=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null==t.cells&&e.buildCells(),t.links=sS.newInstance(),n>0?t.links.allocate(n):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellType=function(e){return t.cells.getCellType(e)},e.getCellPoints=function(n){var i=e.getCellType(n),o=null;switch(i){case 1:case 2:o=t.verts;break;case 3:case 4:o=t.lines;break;case 5:case 9:case 7:o=t.polys;break;case 6:o=t.strips;break;default:return o=null,{type:0,cellPointIds:null}}var a=t.cells.getCellLocation(n);return{cellType:i,cellPointIds:o.getCell(a)}},e.getPointCells=function(e){return t.links.getCells(e)},e.getCellEdgeNeighbors=function(e,n,i){var o=t.links.getLink(n),a=t.links.getLink(i);return o.cells.filter(function(t){return t!==e&&-1!==a.cells.indexOf(t)})},e.getCell=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e.getCellPoints(t),o=n||lx[i.cellType].newInstance();return o.initialize(e.getPoints(),i.cellPointIds),o},e.getMaxCellSize=function(){return ly.reduce(function(e,n){var i,o,a;return Math.max(e,null!=(i=null==(o=t[n])||null==(a=o.getMaxCellSize)?void 0:a.call(o))?i:0)},0)}}(e,t)}var lC={newInstance:eE.newInstance(lA,"vtkPolyData"),extend:lA},lS=eE.vtkErrorMacro,l_={Unknown:0,Scalar:1,RGB:2,RGBA:3,Offset:4,Vector:5,Point:6,CovariantVector:7,SymmetricSecondRankTensor:8,DiffusionTensor3D:9,Complex:10,FixedArray:11,Array:12,Matrix:13,VariableLengthVector:14,VariableSizeMatrix:15},lT={Unknown:"Unknown",Scalar:"Scalar",RGB:"RGB",RGBA:"RGBA",Offset:"Offset",Vector:"Vector",Point:"Point",CovariantVector:"CovariantVector",SymmetricSecondRankTensor:"SymmetricSecondRankTensor",DiffusionTensor3D:"DiffusionTensor3D",Complex:"Complex",FixedArray:"FixedArray",Array:"Array",Matrix:"Matrix",VariableLengthVector:"VariableLengthVector",VariableSizeMatrix:"VariableSizeMatrix"},lO=new Map([["Uint8Array","uint8"],["Int8Array","int8"],["Uint16Array","uint16"],["Int16Array","int16"],["Uint32Array","uint32"],["Int32Array","int32"],["Float32Array","float32"],["Float64Array","float64"]]),lP=new Map([["uint8","Uint8Array"],["int8","Int8Array"],["uint16","Uint16Array"],["int16","Int16Array"],["uint32","Uint32Array"],["int32","Int32Array"],["float32","Float32Array"],["float64","Float64Array"]]),lM={convertItkToVtkImage:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={origin:[0,0,0],spacing:[1,1,1]},i=[1,1,1],o=[1,0,0,0,1,0,0,0,1],a=void 0===e.direction.data,s=a?lT:l_,l=0;l<e.imageType.dimension;++l){n.origin[l]=e.origin[l],n.spacing[l]=e.spacing[l],i[l]=e.size[l];for(var u=0;u<e.imageType.dimension;++u)o[u+3*l]=a?e.direction[l+u*e.imageType.dimension]:e.direction.data[l+u*e.imageType.dimension]}var c=aP.newInstance(n),d=nH.newInstance({name:t.scalarArrayName||"Scalars",values:e.data,numberOfComponents:e.imageType.components});switch(c.setDirection(o),c.setDimensions.apply(c,i),c.getPointData().setScalars(d),a?s[e.imageType.pixelType]:e.imageType.pixelType){case s.Scalar:case s.RGB:case s.RGBA:case s.Offset:break;case s.Vector:3===e.imageType.dimension&&3===e.imageType.components&&c.getPointData().setVectors(d);break;case s.Point:break;case s.CovariantVector:3===e.imageType.dimension&&3===e.imageType.components&&c.getPointData().setVectors(d);break;case s.SymmetricSecondRankTensor:case s.DiffusionTensor3D:3===e.imageType.dimension&&6===e.imageType.components&&c.getPointData().setTensors(d);break;case s.Complex:case s.FixedArray:case s.Array:case s.Matrix:case s.VariableLengthVector:case s.VariableSizeMatrix:break;default:return lS("Cannot handle unexpected itk-wasm pixel type ".concat(e.imageType.pixelType)),null}return c},convertVtkToItkImage:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={imageType:{dimension:3,pixelType:lT.Scalar,componentType:"",components:1},name:"vtkImageData",origin:e.getOrigin(),spacing:e.getSpacing(),direction:new Float64Array(9),size:e.getDimensions()},i=e.getDirection(),o=0;o<3;++o)for(var a=0;a<3;++a)n.direction[o+3*a]=i[a+3*o];var s,l=e.getPointData();return null!==l.getTensors()?(n.imageType.pixelType=lT.DiffusionTensor3D,s=l.getTensors()):null!=l.getVectors()?(n.imageType.pixelType=lT.Vector,s=l.getVectors()):s=l.getScalars(),n.imageType.componentType=lO.get(s.getDataType()),n.data=t?s.getData().slice(0):s.getData(),n},convertItkToVtkPolyData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];e.pointData.length&&n.push({data:{vtkClass:"vtkDataArray",name:t.pointDataName||"PointData",numberOfComponents:e.polyDataType.pointPixelComponents,size:e.pointData.length,dataType:lP.get(e.polyDataType.pointPixelComponentType),buffer:e.pointData.buffer,values:e.pointData}});var i=[];e.cellData.length&&i.push({data:{vtkClass:"vtkDataArray",name:t.cellDataName||"CellData",numberOfComponents:e.polyDataType.pointPixelComponents,size:e.cellData.length,dataType:lP.get(e.polyDataType.pointPixelComponentType),buffer:e.cellData.buffer,values:e.cellData}});var o={points:{vtkClass:"vtkPoints",name:"_points",numberOfComponents:3,size:e.points.length,dataType:"Float32Array",buffer:e.points.buffer,values:e.points},verts:{vtkClass:"vtkCellArray",name:"_verts",numberOfComponents:1,size:e.verticesBufferSize,dataType:"Uint32Array",buffer:e.vertices.buffer,values:e.vertices},lines:{vtkClass:"vtkCellArray",name:"_lines",numberOfComponents:1,size:e.linesBufferSize,dataType:"Uint32Array",buffer:e.lines.buffer,values:e.lines},polys:{vtkClass:"vtkCellArray",name:"_polys",numberOfComponents:1,size:e.polygonsBufferSize,dataType:"Uint32Array",buffer:e.polygons.buffer,values:e.polygons},strips:{vtkClass:"vtkCellArray",name:"_strips",numberOfComponents:1,size:e.triangleStripsBufferSize,dataType:"Uint32Array",buffer:e.triangleStrips.buffer,values:e.triangleStrips},pointData:{vtkClass:"vtkDataSetAttributes",activeGlobalIds:-1,activeNormals:-1,activePedigreeIds:-1,activeScalars:-1,activeTCoords:-1,activeTensors:-1,activeVectors:-1,copyFieldFlags:[],doCopyAllOff:!1,doCopyAllOn:!0,arrays:n},cellData:{vtkClass:"vtkDataSetAttributes",activeGlobalIds:-1,activeNormals:-1,activePedigreeIds:-1,activeScalars:-1,activeTCoords:-1,activeTensors:-1,activeVectors:-1,copyFieldFlags:[],doCopyAllOff:!1,doCopyAllOn:!0,arrays:i}},a=lC.newInstance(o),s=a.getPointData(),l=a.getCellData();if(e.pointData.length)switch(lT[e.polyDataType.pointPixelType]){case lT.Scalar:s.setScalars(s.getArrayByIndex(0));break;case lT.RGB:case lT.RGBA:case lT.Offset:break;case lT.Vector:3===e.polyDataType.pointPixelComponents&&s.setVectors(s.getArrayByIndex(0));break;case lT.Point:break;case lT.CovariantVector:3===e.polyDataType.pointPixelComponents&&s.setVectors(s.getArrayByIndex(0));break;case lT.SymmetricSecondRankTensor:case lT.DiffusionTensor3D:6===e.polyDataType.pointPixelComponents&&s.setTensors(s.getArrayByIndex(0));break;case lT.Complex:case lT.FixedArray:case lT.Array:case lT.Matrix:case lT.VariableLengthVector:case lT.VariableSizeMatrix:break;default:return lS("Cannot handle unexpected itk-wasm pixel type ".concat(e.polyDataType.pointPixelType)),null}if(e.cellData.length)switch(lT[e.polyDataType.cellPixelType]){case lT.Scalar:l.setScalars(l.getArrayByIndex(0));break;case lT.RGB:case lT.RGBA:case lT.Offset:break;case lT.Vector:3===e.polyDataType.pointPixelComponents&&l.setVectors(l.getArrayByIndex(0));break;case lT.Point:break;case lT.CovariantVector:3===e.polyDataType.pointPixelComponents&&l.setVectors(l.getArrayByIndex(0));break;case lT.SymmetricSecondRankTensor:case lT.DiffusionTensor3D:6===e.polyDataType.pointPixelComponents&&l.setTensors(l.getArrayByIndex(0));break;case lT.Complex:case lT.FixedArray:case lT.Array:case lT.Matrix:case lT.VariableLengthVector:case lT.VariableSizeMatrix:break;default:return lS("Cannot handle unexpected itk-wasm pixel type ".concat(e.polyDataType.pointPixelType)),null}return a},convertVtkToItkPolyData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={polyDataType:{pointPixelComponentType:"float32",pointPixelComponents:1,pointPixelType:"Scalar",cellPixelComponentType:"float32",cellPixelComponents:1,cellPixelType:"Scalar"},numberOfPoints:e.getNumberOfPoints(),points:e.getPoints().getData(),verticesBufferSize:e.getVerts().getNumberOfValues(),vertices:e.getVerts().getData(),linesBufferSize:e.getLines().getNumberOfValues(),lines:e.getLines().getData(),polygonsBufferSize:e.getPolys().getNumberOfValues(),polygons:e.getPolys().getData(),triangleStripsBufferSize:e.getStrips().getNumberOfValues(),triangleStrips:e.getStrips().getData(),numberOfPointPixels:0,pointData:new Float32Array,numberOfCellPixels:0,cellData:new Float32Array},i=e.getPointData();if(i.getNumberOfArrays()){var o=t.pointDataName?i.getArrayByName(t.pointDataName):i.getArrayByIndex(0);n.numberOfPointPixels=o.getNumberOfTuples(),n.pointData=o.getData(),n.polyDataType.pointPixelComponentType=lO.get(o.getDataType()),n.polyDataType.cellPixelComponentType=n.polyDataType.pointPixelComponentType,n.polyDataType.pointPixelComponents=o.getNumberOfComponents(),n.polyDataType.cellPixelComponents=n.polyDataType.pointPixelComponents,i.getTensors()===o?n.polyDataType.pointPixelType=lT.SymmetricSecondRankTensor:i.getVectors()===o&&(n.polyDataType.pointPixelType=lT.Vector),n.polyDataType.cellPixelType=n.polyDataType.pointPixelType}var a=e.getCellData();if(a.getNumberOfArrays()){var s=t.cellDataName?i.getArrayByName(t.cellDataName):i.getArrayByIndex(0);n.numberOfCellPixels=s.getNumberOfTuples(),n.cellData=s.getData(),n.polyDataType.cellPixelComponentType=lO.get(s.getDataType()),n.polyDataType.cellPixelComponents=s.getNumberOfComponents(),a.getTensors()===s?n.polyDataType.cellPixelType=lT.SymmetricSecondRankTensor:a.getVectors()===s?n.polyDataType.cellPixelType=lT.Vector:n.polyDataType.cellPixelType=lT.Scalar}return n}},lE={Operation:{UNION:0,INTERSECTION:1,DIFFERENCE:2}};function lD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function lI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lD(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lk=lE.Operation,lN={operation:0,functions:[]};function lR(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lN,i),rY.extend(e,t,i),eE.setGet(e,t,["operation"]),t.classHierarchy.push("vtkImplicitBoolean"),n=lI({},e),e.getMTime=function(){var e=n.getMTime();if(!t.functions||t.functions.length<=0)return e;for(var i=0;i<t.functions.length;++i)e=Math.max(e,t.functions[i].getMTime());return e},e.getOperationAsString=function(){return eE.enumToString(lk,t.operation)},e.setOperationToUnion=function(){return e.setOperation(0)},e.setOperationToIntersection=function(){return e.setOperation(1)},e.setOperationToDifference=function(){return e.setOperation(2)},e.getFunctions=function(){return t.functions},e.hasFunction=function(e){return!!t.functions.filter(function(t){return t===e}).length},e.addFunction=function(n){n&&!e.hasFunction(n)&&(t.functions=t.functions.concat(n))},e.removeFunction=function(e){var n=t.functions.filter(function(t){return t!==e});t.functions.length!==n.length&&(t.functions=n)},e.removeAllFunctions=function(){t.functions=[]},e.evaluateFunction=function(e){var n=0;if(t.functions.length<=0)return n;if(t.operation===lk.UNION){n=Number.MAX_VALUE;for(var i=0;i<t.functions.length;++i){var o=t.functions[i].functionValue(e);o<n&&(n=o)}}else if(t.operation===lk.INTERSECTION){n=-Number.MAX_VALUE;for(var a=0;a<t.functions.length;++a){var s=t.functions[a].functionValue(e);s>n&&(n=s)}}else{n=t.functions[0].functionValue(e);for(var l=1;l<t.functions.length;++l){var u=-1*t.functions[l].evaluateFunction(e);u>n&&(n=u)}}return n},e.evaluateGradient=function(e){var n=t.axis[0]*(e[0]-t.center[0])+t.axis[1]*(e[1]-t.center[1])+t.axis[2]*(e[2]-t.center[2]),i=new Float32Array(3);return i[0]=t.center[0]+n*t.axis[0],i[1]=t.center[1]+n*t.axis[1],i[2]=t.center[2]+n*t.axis[2],[2*(e[0]-i[0]),2*(e[1]-i[1]),2*(e[2]-i[2])]}}var lB=lI({newInstance:eE.newInstance(lR,"vtkImplicitBoolean"),extend:lR},lE),lL=["chemical json","name","inchi","formula","atoms","bonds","properties"],lF={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function lV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lF,n),eE.obj(e,t),t.atoms||(t.atoms={}),t.bonds||(t.bonds={}),t.properties||(t.properties={}),eE.setGet(e,t,lL),t.classHierarchy.push("vtkMolecule")}var lj={newInstance:eE.newInstance(lV,"vtkMolecule"),extend:lV},lG=eE.vtkErrorMacro,lU={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function lz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lU,n),eE.obj(e,t),t.nodes=[],eE.setGet(e,t,["allowDuplicateScalars","clamping"]),eE.setArray(e,t,["range"],2),eE.getArray(e,t,["range"]),t.classHierarchy.push("vtkPiecewiseFunction"),e.getSize=function(){return t.nodes.length},e.getType=function(){var e,n=0,i=0;t.nodes.length>0&&(n=t.nodes[0].y);for(var o=1;o<t.nodes.length;o++){if((e=t.nodes[o].y)!==n)if(e>n)switch(i){case 0:case 1:i=1;break;default:i=3}else switch(i){case 0:case 2:i=2;break;default:i=3}if(n=e,3===i)break}switch(i){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";default:return"Varied"}},e.getDataPointer=function(){var e=t.nodes.length;if(t.function=null,e>0){t.function=[];for(var n=0;n<e;n++)t.function[2*n]=t.nodes[n].x,t.function[2*n+1]=t.nodes[n].y}return t.function},e.getFirstNonZeroValue=function(){if(0===t.nodes.length)return 0;for(var e=1,n=0;n<t.nodes.length;n++)if(0!==t.nodes[n].y){e=0;break}return e?Number.MAX_VALUE:n>0?t.nodes[n-1].x:t.clamping?-Number.MAX_VALUE:t.nodes[0].x},e.getNodeValue=function(e,n){var i=t.nodes.length;return e<0||e>=i?(lG("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].y,n[2]=t.nodes[e].midpoint,n[3]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,i){var o=t.nodes.length;if(n<0||n>=o)return lG("Index out of range!"),-1;var a=t.nodes[n].x;return t.nodes[n].x=i[0],t.nodes[n].y=i[1],t.nodes[n].midpoint=i[2],t.nodes[n].sharpness=i[3],a!==i[0]?e.sortAndUpdateRange():e.modified(),1},e.addPoint=function(t,n){return e.addPointLong(t,n,.5,0)},e.addPointLong=function(n,i,o,a){var s;if(o<0||o>1)return lG("Midpoint outside range [0.0, 1.0]"),-1;if(a<0||a>1)return lG("Sharpness outside range [0.0, 1.0]"),-1;for(t.allowDuplicateScalars||e.removePoint(n),t.nodes.push({x:n,y:i,midpoint:o,sharpness:a}),e.sortAndUpdateRange(),s=0;s<t.nodes.length&&t.nodes[s].x!==n;s++);return s<t.nodes.length?s:-1},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort(function(e,t){return e.x-t.x}),e.updateRange()||e.modified()},e.updateRange=function(){var n=t.range.slice(),i=t.nodes.length;return i?(t.range[0]=t.nodes[0].x,t.range[1]=t.nodes[i-1].x):(t.range[0]=0,t.range[1]=0),(n[0]!==t.range[0]||n[1]!==t.range[1])&&(e.modified(),!0)},e.removePoint=function(n){for(i=0;i<t.nodes.length&&t.nodes[i].x!==n;i++);if(i>=t.nodes.length)return -1;var i,o=i,a=!1;return t.nodes.splice(i,1),0!==i&&i!==t.nodes.length||(a=e.updateRange()),a||e.modified(),o},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addSegment=function(n,i,o,a){e.sortAndUpdateRange();for(var s=0;s<t.nodes.length;)t.nodes[s].x>=n&&t.nodes[s].x<=o?t.nodes.splice(s,1):s++;e.addPoint(n,i,.5,0),e.addPoint(o,a,.5,0)},e.getValue=function(t){var n=[];return e.getTable(t,t,1,n),n[0]},e.adjustRange=function(n){if(n.length<2)return 0;var i=e.getRange();i[0]<n[0]?e.addPoint(n[0],e.getValue(n[0])):e.addPoint(n[0],e.getValue(i[0])),i[1]>n[1]?e.addPoint(n[1],e.getValue(n[1])):e.addPoint(n[1],e.getValue(i[1])),e.sortAndUpdateRange();for(var o=0;o<t.nodes.length;)t.nodes[o].x>=n[0]&&t.nodes[o].x<=n[1]?t.nodes.splice(o,1):++o;return e.sortAndUpdateRange(),1},e.estimateMinNumberOfSamples=function(t,n){return Math.ceil((n-t)/e.findMinimumXDistance())},e.findMinimumXDistance=function(){var e=t.nodes.length;if(e<2)return -1;for(var n=t.nodes[1].x-t.nodes[0].x,i=0;i<e-1;i++){var o=t.nodes[i+1].x-t.nodes[i].x;o<n&&(n=o)}return n},e.getTable=function(e,n,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=0,u=t.nodes.length,c=0;0!==u&&(c=t.nodes[u-1].y);var d=0,f=0,p=0,h=0,m=0,g=0,v=0;for(a=0;a<i;a++){var y=s*a;for(d=i>1?e+a/(i-1)*(n-e):.5*(e+n);l<u&&d>t.nodes[l].x;)++l<u&&(f=t.nodes[l-1].x,p=t.nodes[l].x,h=t.nodes[l-1].y,m=t.nodes[l].y,g=t.nodes[l-1].midpoint,v=t.nodes[l-1].sharpness,g<1e-5&&(g=1e-5),g>.99999&&(g=.99999));if(l>=u)o[y]=t.clamping?c:0;else if(0===l)o[y]=t.clamping?t.nodes[0].y:0;else{var b=(d-f)/(p-f);if(b=b<g?.5*b/g:.5+.5*(b-g)/(1-g),v>.99){if(b<.5){o[y]=h;continue}o[y]=m;continue}if(v<.01){o[y]=(1-b)*h+b*m;continue}b<.5?b=.5*Math.pow(2*b,1+10*v):b>.5&&(b=1-.5*Math.pow(2*(1-b),1+10*v));var x=b*b,w=x*b,A=2*w-3*x+1,C=-2*w+3*x,S=w-2*x+b,_=w-x,T=(1-v)*(m-h);o[y]=A*h+C*m+S*T+_*T;var O=h<m?h:m,P=h>m?h:m;o[y]=o[y]<O?O:o[y],o[y]=o[y]>P?P:o[y]}}}}var lW={newInstance:eE.newInstance(lz,"vtkPiecewiseFunction"),extend:lz},lH=eE.vtkErrorMacro,lq=eE.vtkWarningMacro,lK={points:null,normals:null,planes:null,bounds:null};function lX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lK,n),rY.extend(e,t,n),eE.setGet(e,t,["points","normals"]),eE.get(e,t,["bounds","planes"]),t.classHierarchy.push("vtkPlanes"),t.planes=t.planes||eE.newTypedArray($.Float64Array,24),t.bounds=t.bounds||eE.newTypedArray($.Float64Array,6),t.plane=r8.newInstance(),e.setNormals=function(n){return n&&3!==n.getNumberOfComponents()&&lq("This array does not have 3 components. Ignoring normals."),t.normals=n,e.modified(),!0},e.evaluateFunction=function(e){if(!t.points||!t.normals)return lH("Please define points and/or normals!"),Number.MAX_VALUE;var n=t.points.getNumberOfPoints();if(n!==t.normals.getNumberOfTuples())return lH("Number of normals/points inconsistent!"),Number.MAX_VALUE;for(var i=-Number.MAX_VALUE,o=[],a=[],s=0;s<n;s++){t.normals.getTuple(s,o),t.points.getPoint(s,a);var l=r8.evaluate(o,a,e);l>i&&(i=l)}return i},e.evaluateGradient=function(e){var n=[0,0,0];if(!t.points||!t.normals)return lH("Define points and/or normals first!"),n;var i=t.points.getNumberOfPoints();if(i!==t.normals.getNumberOfTuples())return lH("The number of normals/points is inconsistent!"),n;for(var o=-Number.MAX_VALUE,a=[],s=[],l=0;l<i;l++){t.normals.getTuple(l,a),t.points.getPoint(l,s);var u=r8.evaluate(a,s,e);u>o&&(o=u,n[0]=a[0],n[1]=a[1],n[2]=a[2])}return n},e.setFrustumPlanes=function(n){if(nR.areEquals(t.planes,n))return!1;t.planes=m(n);var i=a3.newInstance({dataType:eI.DOUBLE}),o=nH.newInstance({numberOfComponents:3,size:18,dataType:eI.DOUBLE});i.setNumberOfPoints(6),e.setPoints(i),e.setNormals(o);for(var a=[],s=[],l=0;l<6;l++){var u=4*l;a[0]=-n[u],a[1]=-n[u+1],a[2]=-n[u+2],s[0]=0,s[1]=0,s[2]=0,0!==a[0]?s[0]=n[u+3]/a[0]:0!==a[1]?s[1]=n[u+3]/a[1]:s[2]=n[u+3]/a[2],i.setPoint.apply(i,[l].concat(s)),o.setTuple(l,a)}return e.modified(),!0},e.setBounds=function(n){if(nR.areEquals(t.bounds,n))return!1;t.bounds=m(n);var i=a3.newInstance(),o=nH.newInstance({numberOfComponents:3,size:18,dataType:eI.DOUBLE});i.setNumberOfPoints(6),e.setPoints(i),e.setNormals(o);var a=[],s=[];return a[0]=-1,a[1]=0,a[2]=0,s[0]=n[0],s[1]=0,s[2]=0,i.setPoint.apply(i,[0].concat(s)),o.setTuple(0,a),a[0]=1,s[0]=n[1],i.setPoint.apply(i,[1].concat(s)),o.setTuple(1,a),a[0]=0,a[1]=-1,a[2]=0,s[0]=0,s[1]=n[2],s[2]=0,i.setPoint.apply(i,[2].concat(s)),o.setTuple(2,a),a[1]=1,s[1]=n[3],i.setPoint.apply(i,[3].concat(s)),o.setTuple(3,a),a[0]=0,a[1]=0,a[2]=-1,s[0]=0,s[1]=0,s[2]=n[4],i.setPoint.apply(i,[4].concat(s)),o.setTuple(4,a),a[2]=1,s[2]=n[5],i.setPoint.apply(i,[5].concat(s)),o.setTuple(5,a),e.modified(),!0},e.getNumberOfPlanes=function(){return t.points&&t.normals?Math.min(t.points.getNumberOfPoints(),t.normals.getNumberOfTuples()):0},e.getPlane=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.plane;if(n>=0&&n<e.getNumberOfPlanes()){var o=t.normals.getTuple(n),a=t.points.getPoint(n);i.setNormal(o),i.setOrigin(a)}return i}}var lY={newInstance:eE.newInstance(lX,"vtkPlanes"),extend:lX};function lZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var lJ={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function lQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lJ,n),eE.obj(e,t),t.properties={},eE.setGet(e,t,["contentType","fieldType","properties","selectionList"]),t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}var l$=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(lQ,"vtkSelectionNode"),extend:lQ},{SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}});function l0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l1(e,t,n){if(!Array.isArray(e))return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])+(n[2]-t[2])*(n[2]-t[2])-e*e;var i=[(n[0]-t[0])/e[0],(n[1]-t[1])/e[1],(n[2]-t[2])/e[2]];return i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-1}var l2={radius:.5,center:[0,0,0]};function l3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l2,n),rY.extend(e,t,n),eE.setGet(e,t,["radius"]),eE.setGetArray(e,t,["center"],3),t.classHierarchy.push("vtkSphere"),e.evaluateFunction=function(e){return l1(t.radius,t.center,e)},e.evaluateGradient=function(e){return[2-(e[0]-t.center[0]),2-(e[1]-t.center[1]),2-(e[2]-t.center[2])]}}var l4=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l0(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(l3,"vtkSphere"),extend:l3},{evaluate:l1}),l5={Mode:{RIGID_BODY:0,SIMILARITY:1,AFFINE:2}};function l6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var l8=l5.Mode,l9={mode:l8.SIMILARITY};function l7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l9,n),eE.obj(e,t),t.matrix=od(new Float64Array(16)),eE.setGet(e,t,["sourceLandmark","targetLandmark","mode"]),eE.get(e,t,["matrix"]),t.classHierarchy.push("vtkLandmarkTransform"),e.update=function(){od(t.matrix);var e=t.sourceLandmark.getNumberOfPoints();if(t.targetLandmark.getNumberOfPoints()!==e||null===t.sourceLandmark||null===t.targetLandmark||0===e)return console.error("Error : Bad inputs of vtkLandmarkTransform"),t.matrix;for(var n=[0,0,0],i=[0,0,0],o=[0,0,0],a=0;a<e;a++)t.sourceLandmark.getPoint(a,o),n[0]+=o[0],n[1]+=o[1],n[2]+=o[2],t.targetLandmark.getPoint(a,o),i[0]+=o[0],i[1]+=o[1],i[2]+=o[2];if(n[0]/=e,n[1]/=e,n[2]/=e,i[0]/=e,i[1]/=e,i[2]/=e,1===e)return od(t.matrix),t.matrix[12]=i[0]-n[0],t.matrix[13]=i[1]-n[1],t.matrix[14]=i[2]-n[2],t.matrix;for(var s=new Float64Array(9),l=new Float64Array(9),u=[0,0,0],c=[0,0,0],d=0,f=0,p=0;p<e;p++){t.sourceLandmark.getPoint(p,u),u[0]-=n[0],u[1]-=n[1],u[2]-=n[2],t.targetLandmark.getPoint(p,c),c[0]-=i[0],c[1]-=i[1],c[2]-=i[2];for(var h=0;h<3;h++)s[0+h]+=u[h]*c[0],s[3+h]+=u[h]*c[1],s[6+h]+=u[h]*c[2],t.mode===l8.AFFINE&&(l[0+h]+=u[h]*u[0],l[3+h]+=u[h]*u[1],l[6+h]+=u[h]*u[2]);d+=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],f+=c[0]*c[0]+c[1]*c[1]+c[2]*c[2]}if(t.mode===l8.AFFINE){at(l,l),ai(s,l,s);for(var m=0;m<3;++m)for(var g=0;g<3;++g)t.matrix[4*g+m]=s[4*m+g]}else{var v=Math.sqrt(f/d),y=new Float64Array(16);y[0]=s[0]+s[4]+s[8],y[5]=s[0]-s[4]-s[8],y[10]=-s[0]+s[4]-s[8],y[15]=-s[0]-s[4]+s[8],y[4]=y[1]=s[7]-s[5],y[8]=y[2]=s[2]-s[6],y[12]=y[3]=s[3]-s[1],y[9]=y[6]=s[3]+s[1],y[13]=y[7]=s[2]+s[6],y[14]=y[11]=s[7]+s[5];var b,x,w,A,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=[0,0,0,0];if(tJ(y,4,S,C),S[0]===S[1]||2===e){var _=[0,0,0],T=[0,0,0],O=[0,0,0],P=[0,0,0];t.sourceLandmark.getPoint(0,_),t.targetLandmark.getPoint(0,T),t.sourceLandmark.getPoint(1,O),t.targetLandmark.getPoint(1,P);for(var M=[0,0,0],E=[0,0,0],D=0,I=0,k=0;k<3;k++)M[k]=O[k]-_[k],D=M[k]*M[k]+D,E[k]=P[k]-T[k],I=E[k]*E[k]+I;D=Math.sqrt(D),M[0]/=D,M[1]/=D,M[2]/=D,I=Math.sqrt(I),E[0]/=I,E[1]/=I,E[2]/=I,b=M[0]*E[0]+M[1]*E[1]+M[2]*E[2],x=M[1]*E[2]-M[2]*E[1];var N=Math.sqrt(x*x+(w=M[2]*E[0]-M[0]*E[2])*w+(A=M[0]*E[1]-M[1]*E[0])*A),R=Math.atan2(N,b);b=Math.cos(R/2),0!==N?(x*=N=Math.sin(R/2)/N,w*=N,A*=N):(tg(M,E,0,0),N=Math.sin(R/2),x=E[0]*N,w=E[1]*N,A=E[2]*N)}else b=C[0],x=C[4],w=C[8],A=C[12];var B=b*b,L=b*x,F=b*w,V=b*A,j=x*x,G=w*w,U=A*A,z=x*w,W=x*A,H=w*A;if(t.matrix[0]=B+j-G-U,t.matrix[1]=2*(V+z),t.matrix[2]=2*(-F+W),t.matrix[4]=2*(-V+z),t.matrix[5]=B-j+G-U,t.matrix[6]=2*(L+H),t.matrix[8]=2*(F+W),t.matrix[9]=2*(-L+H),t.matrix[10]=B-j-G+U,t.mode!==l8.RIGID_BODY)for(var q=0;q<3;q++)t.matrix[0+q]=t.matrix[0+q]*v,t.matrix[4+q]=t.matrix[4+q]*v,t.matrix[8+q]=t.matrix[8+q]*v}var K=t.matrix[0]*n[0]+t.matrix[4]*n[1]+t.matrix[8]*n[2],X=t.matrix[1]*n[0]+t.matrix[5]*n[1]+t.matrix[9]*n[2],Y=t.matrix[2]*n[0]+t.matrix[6]*n[1]+t.matrix[10]*n[2];return t.matrix[12]=i[0]-K,t.matrix[13]=i[1]-X,t.matrix[14]=i[2]-Y,t.matrix[3]=0,t.matrix[7]=0,t.matrix[11]=0,t.matrix[15]=1,t.matrix}}var ue,ut=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l6(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(l7,"vtkLandmarkTransform"),extend:l7},l5),un=eE.vtkWarningMacro,ur={preMultiplyFlag:!1,matrix:m(eB)};function ui(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ur,n),eE.obj(e,t),eE.setGet(e,t,["preMultiplyFlag"]),eE.setGetArray(e,t,["matrix"],16),t.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),e.transformPoint=function(e,n){return rO(n,e,t.matrix),n},e.transformPoints=function(e,n){for(var i=new Float64Array(3),o=new Float64Array(3),a=0;a<e.length;a+=3)i[0]=e[a],i[1]=e[a+1],i[2]=e[a+2],rO(o,i,t.matrix),n[a]=o[0],n[a+1]=o[1],n[a+2]=o[2];return n},e.preMultiply=function(){e.setPreMultiplyFlag(!0)},e.postMultiply=function(){e.setPreMultiplyFlag(!1)},e.transformMatrix=function(e,n){return t.preMultiplyFlag?og(n,t.matrix,e):og(n,e,t.matrix),n},e.transformMatrices=function(e,n){for(var i=new Float64Array(16),o=new Float64Array(16),a=t.preMultiplyFlag?function(){return og(o,t.matrix,i)}:function(){return og(o,i,t.matrix)},s=0;s<e.length;s+=16){for(var l=0;l<16;++l)i[l]=e[s+l];a();for(var u=0;u<16;++u)n[s+u]=o[u]}return n},e.getInverse=function(){return ue({matrix:nR.invertMatrix(Array.from(t.matrix),[],4),preMultiplyFlag:t.preMultiplyFlag})},e.translate=function(n,i,o){if(0!==n||0!==i||0!==o){var a=oa();oC(a,[n,i,o]),t.preMultiplyFlag?og(t.matrix,t.matrix,a):og(t.matrix,a,t.matrix),e.modified()}},e.rotateWXYZ=function(n,i,o,a){if(0!==i||0!==o||0!==a){if(0!==n){var s=nR.radiansFromDegrees(n),l=sN();sR(l,[i,o,a],s);var u=new Float64Array(16);oB(u,l),t.preMultiplyFlag?og(t.matrix,t.matrix,u):og(t.matrix,u,t.matrix),e.modified()}}else un("No rotation applied, axis is zero vector.")},e.rotateX=function(t){e.rotateWXYZ(t,1,0,0)},e.rotateY=function(t){e.rotateWXYZ(t,0,1,0)},e.rotateZ=function(t){e.rotateWXYZ(t,0,0,1)},e.scale=function(n,i,o){if(1!==n||1!==i||1!==o){var a=oa();oS(a,[n,i,o]),t.preMultiplyFlag?og(t.matrix,t.matrix,a):og(t.matrix,a,t.matrix),e.modified()}},e.transformNormal=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=o4(o3(),t.matrix),a=o3();at(a,o);var s=o3();return ae(s,a),e.transformVector(n,i,s),nR.normalize(i),i},e.transformNormals=function(n,i){var o=n.getData(),a=i.getData(),s=[0,0,0],l=o4(o3(),t.matrix),u=o3();at(u,l);var c=o3();ae(c,u);for(var d=0;d<o.length;d+=3)s[0]=o[d],s[1]=o[d+1],s[2]=o[d+2],e.transformVector(s,s,c),nR.normalize(s),a[d]=s[0],a[d+1]=s[1],a[d+2]=s[2]},e.transformVector=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return rP(n,e,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||o4(o3(),t.matrix)),n},e.transformVectors=function(t,n){for(var i=t.getData(),o=n.getData(),a=[0,0,0],s=0;s<i.length;s+=3)a[0]=i[s],a[1]=i[s+1],a[2]=i[s+2],e.transformVector(a,a),nR.normalize(a),o[s]=a[0],o[s+1]=a[1],o[s+2]=a[2]},e.transformPointsNormalsVectors=function(t,n,i,o,a,s){for(var l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=t.getNumberOfPoints(),f=null!=(l=null==u?void 0:u.length)?l:0,p=new Float64Array(3),h=new Float64Array(3),g=new Float64Array(3),v=new Float64Array(3),y=!1,b=!1,x=!1,w=[],A=0;A<d;A++){if(t.getPoint(A,p),h.set(p),e.transformPoint(p,p),n.setPoint.apply(n,[A].concat(m(p))),nR.areEquals(h,p)||(y=!0),a){var C=a.getData(),S=s.getData();p[0]=C[3*A],p[1]=C[3*A+1],p[2]=C[3*A+2],g.set(p),e.transformVector(p,p),S[3*A]=p[0],S[3*A+1]=p[1],S[3*A+2]=p[2],nR.areEquals(g,p)||(b=!0)}if(i){var _=i.getData(),T=o.getData();p[0]=_[3*A],p[1]=_[3*A+1],p[2]=_[3*A+2],v.set(p),e.transformNormal(p,p),T[3*A]=p[0],T[3*A+1]=p[1],T[3*A+2]=p[2],nR.areEquals(v,p)||(x=!0)}if(u)for(var O=0;O<f;O++){var P=u[O].getData(),M=c[O].getData();p[0]=P[3*A],p[1]=P[3*A+1],p[2]=P[3*A+2],g.set(p),e.transformVector(p,p),M[3*A]=p[0],M[3*A+1]=p[1],M[3*A+2]=p[2],nR.arrayEqual(g,p)||w.includes(O)||w.push(O)}}y&&n.modified(),b&&s.modified(),x&&o.modified(),w.forEach(function(e){return c[e].modified()})}}for(var uo={newInstance:ue=eE.newInstance(ui,"vtkTransform"),extend:ui},ua=JSON.parse('{"y0":[{"type":"android","rules":[{"mdmh":"asus/*/Nexus 7/*"},{"ua":"Nexus 7"}],"dpi":[320.8,323],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"asus/*/ASUS_Z00AD/*"},{"ua":"ASUS_Z00AD"}],"dpi":[403,404.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Google/*/Pixel XL/*"},{"ua":"Pixel XL"}],"dpi":[537.9,533],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Google/*/Pixel/*"},{"ua":"Pixel"}],"dpi":[432.6,436.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"HTC/*/HTC6435LVW/*"},{"ua":"HTC6435LVW"}],"dpi":[449.7,443.3],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"HTC/*/HTC One XL/*"},{"ua":"HTC One XL"}],"dpi":[315.3,314.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"htc/*/Nexus 9/*"},{"ua":"Nexus 9"}],"dpi":289,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"HTC/*/HTC One M9/*"},{"ua":"HTC One M9"}],"dpi":[442.5,443.3],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"HTC/*/HTC One_M8/*"},{"ua":"HTC One_M8"}],"dpi":[449.7,447.4],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"HTC/*/HTC One/*"},{"ua":"HTC One"}],"dpi":472.8,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Huawei/*/Nexus 6P/*"},{"ua":"Nexus 6P"}],"dpi":[515.1,518],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LENOVO/*/Lenovo PB2-690Y/*"},{"ua":"Lenovo PB2-690Y"}],"dpi":[457.2,454.713],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"LGE/*/Nexus 5X/*"},{"ua":"Nexus 5X"}],"dpi":[422,419.9],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/LGMS345/*"},{"ua":"LGMS345"}],"dpi":[221.7,219.1],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"LGE/*/LG-D800/*"},{"ua":"LG-D800"}],"dpi":[422,424.1],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"LGE/*/LG-D850/*"},{"ua":"LG-D850"}],"dpi":[537.9,541.9],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"LGE/*/VS985 4G/*"},{"ua":"VS985 4G"}],"dpi":[537.9,535.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/Nexus 5/*"},{"ua":"Nexus 5 B"}],"dpi":[442.4,444.8],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/Nexus 4/*"},{"ua":"Nexus 4"}],"dpi":[319.8,318.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/LG-P769/*"},{"ua":"LG-P769"}],"dpi":[240.6,247.5],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/LGMS323/*"},{"ua":"LGMS323"}],"dpi":[206.6,204.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"LGE/*/LGLS996/*"},{"ua":"LGLS996"}],"dpi":[403.4,401.5],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Micromax/*/4560MMX/*"},{"ua":"4560MMX"}],"dpi":[240,219.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Micromax/*/A250/*"},{"ua":"Micromax A250"}],"dpi":[480,446.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Micromax/*/Micromax AQ4501/*"},{"ua":"Micromax AQ4501"}],"dpi":240,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/G5/*"},{"ua":"Moto G (5) Plus"}],"dpi":[403.4,403],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/DROID RAZR/*"},{"ua":"DROID RAZR"}],"dpi":[368.1,256.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT830C/*"},{"ua":"XT830C"}],"dpi":[254,255.9],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT1021/*"},{"ua":"XT1021"}],"dpi":[254,256.7],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/XT1023/*"},{"ua":"XT1023"}],"dpi":[254,256.7],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/XT1028/*"},{"ua":"XT1028"}],"dpi":[326.6,327.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT1034/*"},{"ua":"XT1034"}],"dpi":[326.6,328.4],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/XT1053/*"},{"ua":"XT1053"}],"dpi":[315.3,316.1],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT1562/*"},{"ua":"XT1562"}],"dpi":[403.4,402.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/Nexus 6/*"},{"ua":"Nexus 6 B"}],"dpi":[494.3,489.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT1063/*"},{"ua":"XT1063"}],"dpi":[295,296.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/XT1064/*"},{"ua":"XT1064"}],"dpi":[295,295.6],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/XT1092/*"},{"ua":"XT1092"}],"dpi":[422,424.1],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"motorola/*/XT1095/*"},{"ua":"XT1095"}],"dpi":[422,423.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"motorola/*/G4/*"},{"ua":"Moto G (4)"}],"dpi":401,"bw":4,"ac":1000},{"type":"android","rules":[{"mdmh":"OnePlus/*/A0001/*"},{"ua":"A0001"}],"dpi":[403.4,401],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"OnePlus/*/ONE E1005/*"},{"ua":"ONE E1005"}],"dpi":[442.4,441.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"OnePlus/*/ONE A2005/*"},{"ua":"ONE A2005"}],"dpi":[391.9,405.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"OnePlus/*/ONEPLUS A5000/*"},{"ua":"ONEPLUS A5000 "}],"dpi":[403.411,399.737],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"OnePlus/*/ONE A5010/*"},{"ua":"ONEPLUS A5010"}],"dpi":[403,400],"bw":2,"ac":1000},{"type":"android","rules":[{"mdmh":"OPPO/*/X909/*"},{"ua":"X909"}],"dpi":[442.4,444.1],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9082/*"},{"ua":"GT-I9082"}],"dpi":[184.7,185.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G360P/*"},{"ua":"SM-G360P"}],"dpi":[196.7,205.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/Nexus S/*"},{"ua":"Nexus S"}],"dpi":[234.5,229.8],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9300/*"},{"ua":"GT-I9300"}],"dpi":[304.8,303.9],"bw":5,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-T230NU/*"},{"ua":"SM-T230NU"}],"dpi":216,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SGH-T399/*"},{"ua":"SGH-T399"}],"dpi":[217.7,231.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SGH-M919/*"},{"ua":"SGH-M919"}],"dpi":[440.8,437.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N9005/*"},{"ua":"SM-N9005"}],"dpi":[386.4,387],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SAMSUNG-SM-N900A/*"},{"ua":"SAMSUNG-SM-N900A"}],"dpi":[386.4,387.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9500/*"},{"ua":"GT-I9500"}],"dpi":[442.5,443.3],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9505/*"},{"ua":"GT-I9505"}],"dpi":439.4,"bw":4,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G900F/*"},{"ua":"SM-G900F"}],"dpi":[415.6,431.6],"bw":5,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G900M/*"},{"ua":"SM-G900M"}],"dpi":[415.6,431.6],"bw":5,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G800F/*"},{"ua":"SM-G800F"}],"dpi":326.8,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G906S/*"},{"ua":"SM-G906S"}],"dpi":[562.7,572.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9300/*"},{"ua":"GT-I9300"}],"dpi":[306.7,304.8],"bw":5,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-T535/*"},{"ua":"SM-T535"}],"dpi":[142.6,136.4],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N920C/*"},{"ua":"SM-N920C"}],"dpi":[515.1,518.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N920P/*"},{"ua":"SM-N920P"}],"dpi":[386.3655,390.144],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N920W8/*"},{"ua":"SM-N920W8"}],"dpi":[515.1,518.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9300I/*"},{"ua":"GT-I9300I"}],"dpi":[304.8,305.8],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-I9195/*"},{"ua":"GT-I9195"}],"dpi":[249.4,256.7],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SPH-L520/*"},{"ua":"SPH-L520"}],"dpi":[249.4,255.9],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SAMSUNG-SGH-I717/*"},{"ua":"SAMSUNG-SGH-I717"}],"dpi":285.8,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SPH-D710/*"},{"ua":"SPH-D710"}],"dpi":[217.7,204.2],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/GT-N7100/*"},{"ua":"GT-N7100"}],"dpi":265.1,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SCH-I605/*"},{"ua":"SCH-I605"}],"dpi":265.1,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/Galaxy Nexus/*"},{"ua":"Galaxy Nexus"}],"dpi":[315.3,314.2],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N910H/*"},{"ua":"SM-N910H"}],"dpi":[515.1,518],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-N910C/*"},{"ua":"SM-N910C"}],"dpi":[515.2,520.2],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G130M/*"},{"ua":"SM-G130M"}],"dpi":[165.9,164.8],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G928I/*"},{"ua":"SM-G928I"}],"dpi":[515.1,518.4],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G920F/*"},{"ua":"SM-G920F"}],"dpi":580.6,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G920P/*"},{"ua":"SM-G920P"}],"dpi":[522.5,577],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G925F/*"},{"ua":"SM-G925F"}],"dpi":580.6,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G925V/*"},{"ua":"SM-G925V"}],"dpi":[522.5,576.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G930F/*"},{"ua":"SM-G930F"}],"dpi":576.6,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G935F/*"},{"ua":"SM-G935F"}],"dpi":533,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G950F/*"},{"ua":"SM-G950F"}],"dpi":[562.707,565.293],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"samsung/*/SM-G955U/*"},{"ua":"SM-G955U"}],"dpi":[522.514,525.762],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"Sony/*/C6903/*"},{"ua":"C6903"}],"dpi":[442.5,443.3],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"Sony/*/D6653/*"},{"ua":"D6653"}],"dpi":[428.6,427.6],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Sony/*/E6653/*"},{"ua":"E6653"}],"dpi":[428.6,425.7],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Sony/*/E6853/*"},{"ua":"E6853"}],"dpi":[403.4,401.9],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Sony/*/SGP321/*"},{"ua":"SGP321"}],"dpi":[224.7,224.1],"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{"ua":"ALCATEL ONE TOUCH Fierce"}],"dpi":[240,247.5],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"THL/*/thl 5000/*"},{"ua":"thl 5000"}],"dpi":[480,443.3],"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"Fly/*/IQ4412/*"},{"ua":"IQ4412"}],"dpi":307.9,"bw":3,"ac":1000},{"type":"android","rules":[{"mdmh":"ZTE/*/ZTE Blade L2/*"},{"ua":"ZTE Blade L2"}],"dpi":240,"bw":3,"ac":500},{"type":"android","rules":[{"mdmh":"BENEVE/*/VR518/*"},{"ua":"VR518"}],"dpi":480,"bw":3,"ac":500},{"type":"ios","rules":[{"res":[640,960]}],"dpi":[325.1,328.4],"bw":4,"ac":1000},{"type":"ios","rules":[{"res":[640,1136]}],"dpi":[317.1,320.2],"bw":3,"ac":1000},{"type":"ios","rules":[{"res":[750,1334]}],"dpi":326.4,"bw":4,"ac":1000},{"type":"ios","rules":[{"res":[1242,2208]}],"dpi":[453.6,458.4],"bw":4,"ac":1000},{"type":"ios","rules":[{"res":[1125,2001]}],"dpi":[410.9,415.4],"bw":4,"ac":1000},{"type":"ios","rules":[{"res":[1125,2436]}],"dpi":458,"bw":4,"ac":1000}]}'),us=[{label:"Choose a headset"},{id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},{id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-9904169e-10,6183535e-11,-16981803e-13]}],ul=navigator.userAgent||navigator.vendor||window.opera,uu=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(ul)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(ul.substr(0,4)),uc=/iPad|iPhone|iPod/.test(navigator.platform),ud=-1!==ul.indexOf("Version")&&-1!==ul.indexOf("Android")&&-1!==ul.indexOf("Chrome"),uf=/^((?!chrome|android).)*safari/i.test(ul),up=-1!==ul.indexOf("Firefox")&&-1!==ul.indexOf("Android"),uh=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,um=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,ug={width:uh,height:um},uv=0;uv<ua.y0.length;uv++){var uy=ua.y0[uv];if(uy.rules)if("ios"===uy.type||"android"===uy.type){if(uc===("ios"===uy.type)){for(var ub=!1,ux=0;ux<uy.rules.length;ux++)if(function(e,t,n,i){if(!e.ua&&!e.res||e.ua&&0>t.indexOf(e.ua))return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var o=b(e.res,2),a=o[0],s=o[1];if(Math.min(n,i)!==Math.min(a,s)||Math.max(n,i)!==Math.max(a,s))return!1}return!0}(uy.rules[ux],ul,uh,um)){ub=!0;break}ub&&(ug.xdpi=uy.dpi[0]||uy.dpi,ug.ydpi=uy.dpi[1]||uy.dpi,ug.bevelMm=uy.bw)}}else console.warn("Device[".concat(uv,"] has invalid type."));else console.warn("Device[".concat(uv,"] has no rules section."))}var uw=eE.vtkErrorMacro,uA={imageId:"default-image-id",sliceIndex:0};function uC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uA,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["imageId","sliceIndex"]),eE.algo(e,t,1,1),t.classHierarchy.push("vtkImageDataToCornerstoneImage"),e.requestData=function(e,n){var i=e[0];if(i){var o=i.getSpacing(),a=i.getDimensions(),s=i.getPointData().getScalars(),l=s.getRange(0),u=s.getData(),c=null;if(1===a[2])c=s.data?s.data:u;else{var d=t.sliceIndex*a[0]*a[1]*u.BYTES_PER_ELEMENT;c=eE.newTypedArray(s.getDataType(),u.buffer,d,a[0]*a[1])}var f={imageId:t.imageId,color:s.getNumberOfComponents()>1,columnPixelSpacing:o[0],columns:a[0],width:a[0],rowPixelSpacing:o[1],rows:a[1],height:a[1],intercept:0,invert:!1,minPixelValue:l[0],maxPixelValue:l[1],sizeInBytes:c.length*c.BYTES_PER_ELEMENT,slope:1,windowCenter:Math.round((l[0]+l[1])/2),windowWidth:l[1]-l[0],decodeTimeInMS:0,getPixelData:function(){return c}};n[0]=f}else uw("Invalid or missing input")}}var uS={vtkImageDataToCornerstoneImage:{newInstance:eE.newInstance(uC,"vtkImageDataToCornerstoneImage"),extend:uC}},u_={dataSet:null,maxLevel:8,level:8,automatic:!1,tolerance:0,useExistingSearchStructure:!1},uT=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u_,n),eE.obj(e,t),eE.get(e,t,["level"]),eE.setGet(e,t,["dataSet","maxLevel","automatic","tolerance","useExistingSearchStructure"]),t.classHierarchy.push("vtkLocator")};function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var uP=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uT(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({bounds:null,numberOfBuckets:0},n)),eE.obj(e,t),eE.get(e,t,["numberOfBuckets"]),eE.setGetArray(e,t,["bounds"],6),t.classHierarchy.push("vtkAbstractPointLocator")};function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var uE=eE.vtkErrorMacro;function uD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uP(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({divisions:[50,50,50],numberOfPointsPerBucket:3,bounds:[0,0,0,0,0,0],tolerance:.001,automatic:!0},n)),eE.setGet(e,t,["numberOfPointsPerBucket","points"]),eE.setGetArray(e,t,["divisions"],3),nR.uninitializeBounds(t.bounds),t.points=t.points||a3.newInstance(),t.hashTable=new Map,t.H=[0,0,0],t.insertionPointId=0,t.insertionTol2=1e-4,t.insertionLevel=0,function(e,t){function n(e,t,n){var i=[];if(0===n)return i.push(m(e)),i;for(var o=[],a=[],s=0;s<3;s++){var l=e[s]-n,u=e[s]+n;o[s]=l>0?l:0,a[s]=u<t[s]-1?u:t[s]-1}for(var c=o[0];c<=a[0];c++)for(var d=o[1];d<=a[1];d++)for(var f=o[2];f<=a[2];f++)c!==e[0]+n&&c!==e[0]-n&&d!==e[1]+n&&d!==e[1]-n&&f!==e[2]+n&&f!==e[2]-n||i.push([c,d,f]);return i}function i(e){return e[0]+e[1]*t.XD+e[2]*t.sliceSize}t.classHierarchy.push("vtkPointLocator"),e.getBucketIndices=function(e){var n=Math.floor((e[0]-t.BX)*t.FX),i=Math.floor((e[1]-t.BY)*t.FY),o=Math.floor((e[2]-t.BZ)*t.FZ),a=[];return a[0]=Math.max(0,Math.min(n,t.XD-1)),a[1]=Math.max(0,Math.min(i,t.YD-1)),a[2]=Math.max(0,Math.min(o,t.ZD-1)),a},e.getBucketIndex=function(t){return i(e.getBucketIndices(t))},e.buildLocator=function(){t.level=1;var n=t.dataSet.getBounds(),i=t.dataSet.getNumberOfPoints(),o=Math.ceil(i/t.numberOfPointsPerBucket),a=[0,0,0],s=iG.newInstance();if(s.setBounds(n),t.automatic)s.computeDivisions(o,a,t.bounds);else{t.bounds=s.inflate();for(var l=0;l<3;l++)a[l]=Math.max(1,t.divisions[l])}t.divisions=a,t.numberOfBuckets=o=a[0]*a[1]*a[2];for(var u=0;u<3;++u)t.H[u]=(t.bounds[2*u+1]-t.bounds[2*u])/a[u];t.hashTable.clear(),e.computePerformanceFactors();for(var c=0;c<i;++c){var d=t.dataSet.getPoints().getPoint(c),f=e.getBucketIndex(d);t.hashTable.has(f)||t.hashTable.set(f,[]),t.hashTable.get(f).push(c)}},e.initialize=function(){t.points=null,e.freeSearchStructure()},e.initPointInsertion=function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==n)return uE("A valid vtkPoints object is required for point insertion"),!1;if(!i||6!==i.length)return uE("A valid bounds array of length 6 is required"),!1;if(!n)return uE("A valid vtkPoints is required for point insertion"),!1;e.freeSearchStructure(),t.insertionPointId=0,t.points=n,t.points.setNumberOfComponents(3),t.points.initialize();var a=0,s=[0,0,0],l=iG.newInstance();if(l.setBounds(i),t.automatic&&o>0)a=Math.ceil(o/t.numberOfPointsPerBucket),l.computeDivisions(a,s,t.bounds);else{t.bounds=l.inflate();for(var u=0;u<3;u++)s[u]=Math.max(1,t.divisions[u])}t.divisions=s,t.numberOfBuckets=a=s[0]*s[1]*s[2];for(var c=0;c<3;++c)t.H[c]=(t.bounds[2*c+1]-t.bounds[2*c])/s[c];t.insertionTol2=t.tolerance*t.tolerance;for(var d=0,f=Number.MAX_VALUE,p=0;p<3;p++)f=t.H[p]<f?t.H[p]:f,d=d>t.divisions[p]?d:t.divisions[p];return t.insertionLevel=Math.ceil(t.tolerance/f),t.insertionLevel=t.insertionLevel>d?d:t.insertionLevel,e.computePerformanceFactors(),!0},e.insertPoint=function(n,i){var o=e.getBucketIndex(i);return t.hashTable.has(o)||t.hashTable.set(o,[]),t.hashTable.get(o).push(n),t.points.insertPoint(n,i),{inserted:!0,id:n}},e.insertNextPoint=function(n){var i=e.getBucketIndex(n);return t.hashTable.has(i)||t.hashTable.set(i,[]),t.hashTable.get(i).push(t.insertionPointId),t.points.insertPoint(t.insertionPointId,n),{inserted:!0,id:t.insertionPointId++}},e.insertUniquePoint=function(t){var n=e.isInsertedPoint(t);return n>-1?{inserted:!1,id:n}:e.insertNextPoint(t)},e.isInsertedPoint=function(o){for(var a,s=e.getBucketIndices(o),l=null!=(a=t.insertionLevel)?a:1,u=t.divisions,c=0;c<=l;c++)for(var d=n(s,u,c),f=0;f<d.length;f++){var p=i(d[f]),h=t.hashTable.get(p);if(h)for(var m=0;m<h.length;m++){var g=h[m],v=t.points.getPoint(g);if(nR.distance2BetweenPoints(o,v)<=t.insertionTol2)return g}}return -1},e.findClosestPoint=function(o){e.buildLocator();for(var a=e.getBucketIndices(o),s=t.divisions,l=Number.MAX_VALUE,u=-1,c=Math.max.apply(Math,m(s)),d=0;d<c&&-1===u;d++)for(var f=n(a,s,d),p=0;p<f.length;p++){var h=i(f[p]),g=t.hashTable.get(h);if(g)for(var v=0;v<g.length;v++){var y=g[v],b=t.dataSet.getPoints().getPoint(y),x=nR.distance2BetweenPoints(o,b);x<l&&(l=x,u=y)}}return u},e.findClosestPointWithinRadius=function(n,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.buildLocator();var s,l,u=-1,c=n*n,d=1.01*c,f=-1,p=e.getBucketIndices(o),h=i(p),m=t.hashTable.get(h);if(m)for(var g=0;g<m.length;g++){var v=m[g],y=t.dataSet.getPoints().getPoint(v),b=nR.distance2BetweenPoints(o,y);b<d&&(u=v,d=b,f=b)}if(d<c?(s=Math.sqrt(f),l=f):(s=n,l=c),0!==a){var x=Math.sqrt(iG.distance2ToBounds(o,t.bounds))+a;s>x&&(s=x,l=x*x)}for(var w=[0,0,0],A=0;A<3;A++)w[A]=Math.floor(s/t.H[A]),w[A]>t.divisions[A]/2&&(w[A]=Math.floor(t.divisions[A]/2));var C=Math.max.apply(Math,w);0===C&&(C=1);for(var S=C;S>=1;S--){for(var _=s,T=function(t,n,i,o){var a=[],s=[t[0],t[0],t[1],t[1],t[2],t[2]],l=iG.newInstance();l.setBounds(s),l.inflate(i);var u=[n[0],n[0],n[1],n[1],n[2],n[2]],c=iG.newInstance();c.setBounds(u),c.inflate(o);for(var d=e.getBucketIndices([l.getBounds()[0],l.getBounds()[2],l.getBounds()[4]]),f=e.getBucketIndices([l.getBounds()[1],l.getBounds()[3],l.getBounds()[5]]),p=d[0];p<=f[0];p++)for(var h=d[1];h<=f[1];h++)for(var m=d[2];m<=f[2];m++)c.containsPoint(p,h,m)||a.push([p,h,m]);return a}(o,p,s/S,S),O=0;O<T.length;O++){var P=T[O];if(function(e,n){var i=[n[0]*t.HX+t.BX,(n[0]+1)*t.HX+t.BX,n[1]*t.HY+t.BY,(n[1]+1)*t.HY+t.BY,n[2]*t.HZ+t.BZ,(n[2]+1)*t.HZ+t.BZ];return iG.distance2ToBounds(e,i)}(o,P)<l){var M=i(P),E=t.hashTable.get(M);if(E)for(var D=0;D<E.length;D++){var I=E[D],k=t.dataSet.getPoints().getPoint(I);if(k){var N=nR.distance2BetweenPoints(o,k);N<d&&(u=I,s=Math.sqrt(d=N),l=d,f=N)}}}}s<_&&S>2&&(S=Math.floor(s/_*S)+1)<2&&(S=2)}return -1!==u&&d<=n*n?f=d:u=-1,{id:u,dist2:f}},e.findClosestInsertedPoint=function(i){for(var o=0;o<3;o++)if(i[o]<t.bounds[2*o]||i[o]>t.bounds[2*o+1])return -1;for(var a=e.getBucketIndices(i),s=t.divisions,l=-1,u=Number.MAX_VALUE,c=0,d=Math.max(s[0],s[1],s[2]),f=t.points;-1===l&&c<d;c++)for(var p=n(a,s,c),h=0;h<p.length;h++){var m=p[h],g=m[0]+m[1]*t.XD+m[2]*t.sliceSize,v=t.hashTable.get(g);if(v)for(var y=0;y<v.length;y++){var b=v[y],x=f.getPoint(b),w=nR.distance2BetweenPoints(i,x);w<u&&(l=b,u=w)}}for(var A=n(a,s,c),C=0;C<A.length;C++){for(var S=A[C],_=0,T=0;T<3;T++)if(a[T]!==S[T]){var O=a[T]>S[T]?S[T]+1:S[T],P=t.bounds[2*T]+O*t.H[T]-i[T];_+=P*P}if(_<u){var M=S[0]+S[1]*t.XD+S[2]*t.sliceSize,E=t.hashTable.get(M);if(E)for(var D=0;D<E.length;D++){var I=E[D],k=f.getPoint(I),N=nR.distance2BetweenPoints(i,k);N<u&&(l=I,u=N)}}}return l},e.getPointsInBucket=function(n){e.buildLocator();var i=e.getBucketIndex(n);return t.hashTable.get(i)||[]},e.freeSearchStructure=function(){t.hashTable.clear(),t.points=a3.newInstance(),t.divisions=[50,50,50],nR.uninitializeBounds(t.bounds)},e.computePerformanceFactors=function(){t.HX=t.H[0],t.HY=t.H[1],t.HZ=t.H[2],t.FX=1/t.H[0],t.FY=1/t.H[1],t.FZ=1/t.H[2],t.BX=t.bounds[0],t.BY=t.bounds[2],t.BZ=t.bounds[4],t.XD=t.divisions[0],t.YD=t.divisions[1],t.ZD=t.divisions[2],t.sliceSize=t.divisions[0]*t.divisions[1]},e.generateRepresentation=function(e){if(t.hashTable&&0!==t.hashTable.size){var n=[];n.length=4;var i=a3.newInstance();i.allocate(5e3);var o=nQ.newInstance();o.allocate(2048);for(var a=t.divisions,s=a[0]*a[1],l=0;l<a[2];l++)for(var u=0;u<a[1];u++)for(var c=0;c<a[0];c++){for(var d=c+u*a[0]+l*s,f=t.hashTable.has(d),p=0;p<3;p++){var h=c,g=u,v=l;0===p&&(h=c-1),1===p&&(g=u-1),2===p&&(v=l-1);var y=function(e,n,i){if(e<0||e>=a[0]||n<0||n>=a[1]||i<0||i>=a[2])return!1;var o=e+n*a[0]+i*s;return t.hashTable.has(o)}(h,g,v);h<0||g<0||v<0?f&&b(p,c,u,l,i,o):(y&&!f||!y&&f)&&b(p,c,u,l,i,o)}c+1>=a[0]&&f&&b(0,c+1,u,l,i,o),u+1>=a[1]&&f&&b(1,c,u+1,l,i,o),l+1>=a[2]&&f&&b(2,c,u,l+1,i,o)}e.setPoints(i),e.setPolys(o)}else uE("Can't build representation, no data provided!");function b(e,i,o,a,s,l){var u=t.bounds[0]+i*t.HX,c=t.bounds[2]+o*t.HY,d=t.bounds[4]+a*t.HZ,f=u+t.HX,p=c+t.HY,h=d+t.HZ;0===e?(n[0]=[u,c,d],n[1]=[u,p,d],n[2]=[u,p,h],n[3]=[u,c,h]):1===e?(n[0]=[u,c,d],n[1]=[f,c,d],n[2]=[f,c,h],n[3]=[u,c,h]):2===e&&(n[0]=[u,c,d],n[1]=[f,c,d],n[2]=[f,p,d],n[3]=[u,p,d]);var g=n.map(function(e){return s.insertNextPoint.apply(s,m(e))});l.insertNextCell([g[0],g[1],g[2],g[3]])}}}(e,t)}var uI={newInstance:eE.newInstance(uD,"vtkPointLocator"),extend:uD};function uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var uN=eE.vtkErrorMacro;function uR(e,t,n){for(var i=t.getData(),o=0;o<e.length;++o){var a=e[o],s=3*a;if(n[0]===i[s]&&n[1]===i[s+1]&&n[2]===i[s+2])return a}return -1}function uB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uI.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uk(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n)),eE.obj(e,t),t.classHierarchy.push("vtkMergePoints"),e.isInsertedPoint=function(n){var i=e.getBucketIndex(n),o=t.hashTable.get(i);return o?uR(o,t.points,n):-1},e.insertUniquePoint=function(n){if(!n||3!==n.length)return uN("Point must be a Vector3."),{inserted:!1,id:-1};var i,o=e.getBucketIndex(n),a=t.hashTable.get(o);if(void 0!==a){var s=uR(a,t.points,n);if(-1!==s)return{inserted:!1,id:s}}else a=[],t.hashTable.set(o,a);return a.push(t.insertionPointId),(i=t.points).insertNextPoint.apply(i,m(n)),{inserted:!0,id:t.insertionPointId++}}}var uL={newInstance:eE.newInstance(uB,"vtkMergePoints"),extend:uB},uF={pointMerging:!0,toleranceIsAbsolute:!1,tolerance:0,absoluteTolerance:1,convertLinesToPoints:!0,convertPolysToLines:!0,convertStripsToPolys:!0,locator:null,outputPointsPrecision:iX.DEFAULT};function uV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uF,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["pointMerging","toleranceIsAbsolute","tolerance","absoluteTolerance","convertPolysToLines","convertLinesToPoints","convertStripsToPolys","outputPointsPrecision"]),t.copiedPoints=new Set,function(e,t){t.classHierarchy.push("vtkCleanPolyData");var n=[];function i(i,o,a,s,l,u,c){var d=[0,0,0];if(o.getPoint(i,n),e.operateOnPoint(n,d),!t.pointMerging)return -1===u[i]&&(u[i]=c.value++,a.setPoint(u[i],d),l.passData(s,i,u[i])),u[i];var f=t._locator.insertUniquePoint(d).id;return t.copiedPoints.has(f)||(t.copiedPoints.add(f),l.passData(s,i,f)),f}e.operateOnPoint=function(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2]},e.operateOnBounds=function(e,t){iG.setBounds(t,e)},e.createDefaultLocator=function(e){var n,i,o;o=t.toleranceIsAbsolute?t.absoluteTolerance:e?t.tolerance*e.getLength():t.tolerance,t._locator?0===o&&0!==(null==(n=t._locator)?void 0:n.getTolerance())?t._locator=uL.newInstance():o>0&&!((null==(i=t._locator)?void 0:i.getTolerance())>0)&&(t._locator=uI.newInstance()):t._locator=0===o?uL.newInstance():uI.newInstance()},e.requestData=function(n,o){var a,s=n[0],l=(null==(a=o[0])?void 0:a.initialize())||lC.newInstance();o[0]=l;var u=s.getPoints(),c=s.getNumberOfPoints();if(u&&!(c<1)){var d=Array(s.getMaxCellSize()),f={value:0},p=t.outputPointsPrecision,h=u.getDataType();p&&(h=p===iX.DOUBLE?eI.DOUBLE:eI.FLOAT);var m=a3.newInstance({dataType:h}),g=s.getVerts(),v=s.getLines(),y=s.getPolys(),b=s.getStrips(),x=null,w=null,A=null,C=null,S=s.getPointData(),_=s.getCellData(),T=l.getPointData(),O=l.getCellData(),P=null;if(t.pointMerging){e.createDefaultLocator(s),t.toleranceIsAbsolute?t._locator.setTolerance(t.absoluteTolerance):t._locator.setTolerance(t.tolerance*s.getLength());var M=s.getBounds(),E=[];e.operateOnBounds(M,E),t._locator.initPointInsertion(m,E)}else P=Array(c).fill(-1);T.copyStructure(S),O.copyStructure(_),t.copiedPoints.clear();var D=null,I=null,k=null,N=0,R=0,B=0,L=0,F=0;if(g&&g.getNumberOfCells()>0){x=nQ.newInstance();for(var V=0,j=g.getData();V<j.length;){var G=j[V++],U=j.slice(V,V+G);V+=G;for(var z=0,W=0;W<U.length;W++){var H=i(U[W],u,m,S,T,P,f);d[z++]=H}z>0&&(x.insertNextCell(d.slice(0,z)),O.passData(_,F,N),N++),F++}}if(v&&v.getNumberOfCells()>0){w=nQ.newInstance();for(var q=0,K=v.getData();q<K.length;){var X=K[q++],Y=K.slice(q,q+X);q+=X;for(var Z=0,J=0;J<Y.length;J++){var Q=i(Y[J],u,m,S,T,P,f);0!==J&&Q===d[Z-1]||(d[Z++]=Q)}Z>=2?(w.insertNextCell(d.slice(0,Z)),D||(D=[]),D.push({inputId:F,outputId:R}),R++):1!==Z||Y.length!==Z&&!t.convertLinesToPoints||(x||(x=nQ.newInstance()),x.insertNextCell(d.slice(0,Z)),O.passData(_,F,N),N++),F++}}if(y&&y.getNumberOfCells()>0){A=nQ.newInstance();for(var $=0,ee=y.getData();$<ee.length;){var et=ee[$++],en=ee.slice($,$+et);$+=et;for(var er=0,ei=0;ei<en.length;ei++){var eo=i(en[ei],u,m,S,T,P,f);0!==ei&&eo===d[er-1]||(d[er++]=eo)}er>2&&d[0]===d[er-1]&&er--,er>2?(A.insertNextCell(d.slice(0,er)),I||(I=[]),I.push({inputId:F,outputId:B}),B++):2===er&&(en.length===er||t.convertPolysToLines)?(w||(w=nQ.newInstance(),D=[]),w.insertNextCell(d.slice(0,er)),D.push({inputId:F,outputId:R}),R++):1!==er||en.length!==er&&!t.convertLinesToPoints||(x||(x=nQ.newInstance()),x.insertNextCell(d.slice(0,er)),O.passData(_,F,N),N++),F++}}if(b&&b.getNumberOfCells()>0){C=nQ.newInstance();for(var ea=0,es=b.getData();ea<es.length;){var el=es[ea++],eu=es.slice(ea,ea+el);ea+=el;for(var ec=0,ed=0;ed<eu.length;ed++){var ef=i(eu[ed],u,m,S,T,P,f);0!==ed&&ef===d[ec-1]||(d[ec++]=ef)}ec>1&&d[0]===d[ec-1]&&ec--,ec>3?(C.insertNextCell(d.slice(0,ec)),k||(k=[]),k.push({inputId:F,outputId:L}),L++):3===ec&&(eu.length===ec||t.convertStripsToPolys)?(A||(A=nQ.newInstance(),I=[]),A.insertNextCell(d.slice(0,ec)),I.push({inputId:F,outputId:B}),B++):2===ec&&(eu.length===ec||t.convertPolysToLines)?(w||(w=nQ.newInstance(),D=[]),w.insertNextCell(d.slice(0,ec)),D.push({inputId:F,outputId:R}),R++):1!==ec||eu.length!==ec&&!t.convertLinesToPoints||(x||(x=nQ.newInstance()),x.insertNextCell(d.slice(0,ec)),O.passData(_,F,N),N++),F++}}t.pointMerging?t._locator.initialize():m.setNumberOfPoints(f.value);var ep=N;D&&D.forEach(function(e){O.passData(_,e.inputId,ep),ep++}),I&&I.forEach(function(e){O.passData(_,e.inputId,ep),ep++}),k&&k.forEach(function(e){O.passData(_,e.inputId,ep),ep++}),l.setPoints(m),x&&l.setVerts(x),w&&l.setLines(w),A&&l.setPolys(A),C&&l.setStrips(C)}}}(e,t)}var uj={newInstance:eE.newInstance(uV,"vtkCleanPolyData"),extend:uV};function uG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var uU={cutFunction:null,cutScalars:null,cutValue:0};function uz(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uU,i),es(e,t),ey(e,t,1,1),ep(e,t,["cutFunction","cutValue"]),t.classHierarchy.push("vtkCutter"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uG(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getMTime=function(){var e=n.getMTime();return t.cutFunction?e=Math.max(e,t.cutFunction.getMTime()):e},e.requestData=function(e,n){var i,o=e[0];if(o)if(t.cutFunction){var a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();(function(e,n){for(var i,o,a,s=e.getPoints(),l=s.getData(),u=e.getPointData(),c=s.getNumberOfPoints(),d=[],f=[],p=[],h={},g=u.getNumberOfArrays(),v=0;v<g;v++)h[u.getArrayName(v)]=[];(!t.cutScalars||t.cutScalars.length<c)&&(t.cutScalars=new Float32Array(c));for(var y=0,b=0;y<l.length;)t.cutScalars[b++]=t.cutFunction.evaluateFunction(l[y++],l[y++],l[y++]);for(var x=[],w=[,,,],A=[,,,],C=[],S=(i=e.getPolys().getData(),o=e.getStrips().getData(),(a={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next:function(){if(a.polyIdx<i.length){a.cellSize=i[a.polyIdx];var e=a.polyIdx+1,t=e+a.cellSize;a.polyIdx=t;for(var n=0,s=e;s<t;++s)a.cell[n++]=i[s]}else if(a.stripIdx<o.length){a.cellSize=3,0===a.remainingStripLength&&(a.remainingStripLength=o[a.stripIdx]-2,a.stripIdx+=3);var l=a.stripIdx-2,u=a.stripIdx+1;a.stripIdx++,a.remainingStripLength--;for(var c=0,d=l;d<u;++d)a.cell[c++]=o[d]}else{if(a.done)throw Error("Iterator is done");a.done=!0}}}).next(),a);!S.done;S.next())if(!(S.cellSize<=2)){for(var _=0;_<S.cellSize;)C[_]=t.cutScalars[S.cell[_++]];for(var T=C[0]>0,O=!0,P=1;P<S.cell.length;P++)if(C[P]>0!==T){O=!1;break}if(!O){for(var M=[],E=0;E<S.cellSize;E++){var D=E+1===S.cellSize?0:E+1,I=C[E]>0;if(C[D]>0!==I){var k=E,N=D,R=C[N]-C[k];R<=0&&(k=D,N=E,R*=-1);var B=0;0!==R&&(B=(t.cutValue-C[k])/R);var L=S.cell[k],F=S.cell[N];w[0]=l[3*L],w[1]=l[3*L+1],w[2]=l[3*L+2],A[0]=l[3*F],A[1]=l[3*F+1],A[2]=l[3*F+2];for(var V=[w[0]+B*(A[0]-w[0]),w[1]+B*(A[1]-w[1]),w[2]+B*(A[2]-w[2])],j={},G=0;G<g;G++){for(var U=u.getArrayByIndex(G),z=u.getArrayName(G),W=U.getData(),H=U.getNumberOfComponents(),q=Array(H),K=0;K<H;K++){var X=W[H*L+K],Y=W[H*F+K];q.push(X+B*(Y-X))}j[z]=q}M.push({pointEdge1:L,pointEdge2:F,intersectedPoint:V,intersectedArrays:j,newPointID:-1})}}for(var Z=0;Z<M.length;Z++)!function(){for(var e=M[Z],t=!1,n=0;n<x.length;n++){var i=x[n],o=e.pointEdge1===i.pointEdge1&&e.pointEdge2===i.pointEdge2,a=e.intersectedPoint[0]===i.intersectedPoint[0]&&e.intersectedPoint[1]===i.intersectedPoint[1]&&e.intersectedPoint[2]===i.intersectedPoint[2];if(o||a){t=!0,M[Z].newPointID=x[n].newPointID;break}}t||(d.push(e.intersectedPoint[0]),d.push(e.intersectedPoint[1]),d.push(e.intersectedPoint[2]),Object.keys(e.intersectedArrays).forEach(function(t){var n;(n=h[t]).push.apply(n,m(e.intersectedArrays[t]))}),M[Z].newPointID=d.length/3-1,x.push(M[Z]))}();var J=M.length;2===J?f.push(J,M[0].newPointID,M[1].newPointID):J>2&&(p.push(J),M.forEach(function(e){p.push(e.newPointID)}))}}n.getPoints().setData(et(s.getDataType(),d),3);for(var Q=n.getPointData(),$=0;$<g;$++){var ee=u.getArrayName($),en=nH.newInstance({name:ee,dataType:u.getArrayByIndex($).getDataType(),values:h[ee],numberOfComponents:u.getArrayByIndex($).getNumberOfComponents()});Q.addArray(en)}0!==f.length&&n.getLines().setData(Uint16Array.from(f)),0!==p.length&&n.getPolys().setData(Uint16Array.from(p))})(o,a),n[0]=a}else Z("Missing cut function");else Z("Invalid or missing input")}}var uW={newInstance:ew(uz,"vtkCutter"),extend:uz};function uH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function uq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uH(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({computeCellNormals:!1,computePointNormals:!0},n)),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["computeCellNormals","computePointNormals"]),t.classHierarchy.push("vtkPolyDataNormals"),e.vtkPolyDataNormalsExecute=function(e,n,i){if(!i)return null;for(var o=new Float32Array(i.length),a=new Float32Array(3*e),s=0,l=0,u=n.length,c=[0,0,0],d=[0,0,0],f=0;f<u;f+=l+1)if(!((l=n[f])<3)){for(var p=1;p<=3;++p)c[p-1]=3*n[f+p];if(ls.computeNormal(i.slice(c[0],c[0]+3),i.slice(c[1],c[1]+3),i.slice(c[2],c[2]+3),d),a[s++]=d[0],a[s++]=d[1],a[s++]=d[2],t.computePointNormals)for(var h=1;h<=l;++h){var m=3*n[f+h];o[m]+=d[0],o[++m]+=d[1],o[++m]+=d[2]}}if(t.computePointNormals)for(var g=[0,0,0],v=0;v<i.length;)g[0]=o[v],g[1]=o[v+1],g[2]=o[v+2],nR.normalize(g),o[v++]=g[0],o[v++]=g[1],o[v++]=g[2];return[a,o]},e.requestData=function(n,i){var o;if(e.getNumberOfInputPorts()){var a=n[0];if(a){var s=(null==(o=i[0])?void 0:o.initialize())||lC.newInstance();s.setPoints(a.getPoints()),s.setVerts(a.getVerts()),s.setLines(a.getLines()),s.setPolys(a.getPolys()),s.setStrips(a.getStrips()),s.getPointData().passData(a.getPointData()),s.getCellData().passData(a.getCellData()),s.getFieldData().passData(a.getFieldData());var l=b(e.vtkPolyDataNormalsExecute(a.getNumberOfPolys(),a.getPolys().getData(),a.getPoints().getData()),2),u=l[0],c=l[1];if(t.computePointNormals){var d=nH.newInstance({numberOfComponents:3,name:"Normals",values:c});s.getPointData().setNormals(d)}if(t.computeCellNormals){var f=nH.newInstance({numberOfComponents:3,name:"Normals",values:u});s.getCellData().setNormals(f)}i[0]=s}}}}var uK={newInstance:eE.newInstance(uq,"vtkPolyDataNormals"),extend:uq};function uX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var uY=eE.vtkErrorMacro,uZ={Below:"Below",Above:"Above"};function uJ(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e){return e.toUpperCase()}).replace(/\s+/g,"")}function uQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({criterias:[]},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}(e,t,n)),eE.setGet(e,t,[]),eE.get(e,t,[]),eE.setGetArray(e,t,["criterias"]),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkThresholdPoints"),e.requestData=function(e,n){var i,o=e[0],a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();if(n[0]=a,0!==t.criterias.length){for(var s=o.getPoints(),l=s.getNumberOfPoints(),u=o.getPointData(),c=s.getData(),d=eE.newTypedArray(o.getPoints().getDataType(),3*l),f=[],p=[],h=u.getNumberOfArrays(),m=0;m<h;++m){var g=u.getArrayByIndex(m);f.push(g),p.push(eE.newTypedArray(g.getDataType(),l*g.getNumberOfComponents()))}for(var v=t.criterias.map(function(e){var t=null,n=0,i=1;"PointData"===e.fieldAssociation?i=(t=f.find(function(t){return t.getName()===e.arrayName})).getNumberOfComponents():"Points"===e.fieldAssociation?(t=s,n="z"===e.arrayName?2:+("y"===e.arrayName),i=3):uY("No field association");var o=t.getData(),a=e.operation===uZ.Below?function(e,t){return e<t}:function(e,t){return e>t};return function(t){return a(o[i*t+n],e.value)}}),y=[],b=0,x=function(e){if(v.reduce(function(t,n){return t&&n(e)},!0)){for(var t=3*e,n=3*b,i=0;i<3;++i)d[n++]=c[t++];for(var o=0;o<h;++o){var a=f[o].getData(),s=p[o],l=f[o].getNumberOfComponents();t=l*e,n=l*b;for(var u=0;u<l;++u)s[n++]=a[t++]}++b}else y.push(e)},w=0;w<l;++w)x(w);if(0!==y.length){a.setPoints(a3.newInstance({values:d,size:3*b}));for(var A=0;A<h;++A)!function(){var e=f[A],t=nH.newInstance({name:e.getName(),values:p[A],dataType:e.getDataType(),numberOfComponents:e.getNumberOfComponents(),size:b*e.getNumberOfComponents()});a.getPointData().addArray(t),u.getAttributes(e).forEach(function(e){a.getPointData().setAttribute(t,e)})}();ly.forEach(function(e){for(var t=o["get".concat(uJ(e))]().getData(),n=eE.newTypedArray(o.getPolys().getDataType(),t.length),i=[],s=+("verts"!==e),l=1,u=0,c=0;c<t.length;c+=l+s){1===s&&(l=t[c]);for(var d=!0,f=s;f<=l;++f){var p=function(e,t){for(var n=0,i=e.length-1,o=Math.floor((i+n)/2);e[o]!==t&&n<i;)t<e[o]?i=o-1:t>e[o]&&(n=o+1),o=Math.floor((i+n)/2);return{found:e[o]===t,index:Math.max(e[o]<t?o+1:o,0)}}(y,t[c+f]),h=p.found,m=p.index;if(h){d=!1;break}i[f]=t[c+f]-m}if(d){n[u++]=l;for(var g=s;g<=l;)n[u++]=i[g++]}}a["set".concat(uJ(e))](nQ.newInstance({values:n,size:u,dataType:o.getPolys().getDataType()}))})}else a.shallowCopy(o)}else a.shallowCopy(o)}}var u$=eE.newInstance(uQ,"vtkThresholdPoints"),u0=eE.vtkErrorMacro;function u1(e,t,n,i){var o;e.set((o=0,t.map(function(e,t){return t===o?(o+=e+1,e):e+n})),i)}var u2={outputPointsPrecision:iX.DEFAULT};function u3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u2,n),eE.setGet(e,t,["outputPointsPrecision"]),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkAppendPolyData"),e.requestData=function(n,i){var o=e.getNumberOfInputPorts();if(o)if(1!==o){for(var a=i[0]&&n[0]!==i[0]?i[0].initialize():lC.newInstance(),s=0,l=0,u=1,c=1,d=0,f=0,p=0,h=0,m=!0,g=!0,v=!0,y=0;y<o;y++){var b=n[y];if(b){var x=b.getPoints().getNumberOfPoints();s+=x,d+=b.getVerts().getNumberOfValues(),f+=b.getLines().getNumberOfValues(),p+=b.getStrips().getNumberOfValues(),h+=b.getPolys().getNumberOfValues(),x&&(c&&(c=0,l=b.getPoints().getDataType()),l=l>(u=b.getPoints().getDataType())?l:u);var w=b.getPointData();w?(m=m&&null!==w.getNormals(),g=g&&null!==w.getTCoords(),v=v&&null!==w.getScalars()):(m=!1,g=!1,v=!1)}}t.outputPointsPrecision===iX.SINGLE?l=eI.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(l=eI.DOUBLE);var A=a3.newInstance({dataType:l});A.setNumberOfPoints(s);var C=A.getData(),S=new Uint32Array(d),_=new Uint32Array(f),T=new Uint32Array(p),O=new Uint32Array(h),P=null,M=null,E=null,D=n[o-1];if(m){var I=D.getPointData().getNormals();P=nH.newInstance({numberOfComponents:3,numberOfTuples:s,size:3*s,dataType:I.getDataType(),name:I.getName()})}if(g){var k=D.getPointData().getTCoords();M=nH.newInstance({numberOfComponents:2,numberOfTuples:s,size:2*s,dataType:k.getDataType(),name:k.getName()})}if(v){var N=D.getPointData().getScalars();E=nH.newInstance({numberOfComponents:N.getNumberOfComponents(),numberOfTuples:s,size:s*N.getNumberOfComponents(),dataType:N.getDataType(),name:N.getName()})}s=0,d=0,f=0,p=0,h=0;for(var R=0;R<o;R++){var B=n[R];C.set(B.getPoints().getData(),3*s),u1(S,B.getVerts().getData(),s,d),d+=B.getVerts().getNumberOfValues(),u1(_,B.getLines().getData(),s,f),f+=B.getLines().getNumberOfValues(),u1(T,B.getStrips().getData(),s,p),p+=B.getStrips().getNumberOfValues(),u1(O,B.getPolys().getData(),s,h),h+=B.getPolys().getNumberOfValues();var L=B.getPointData();if(m){var F=L.getNormals();P.getData().set(F.getData(),3*s)}if(g){var V=L.getTCoords();M.getData().set(V.getData(),2*s)}if(v){var j=L.getScalars();E.getData().set(j.getData(),s*E.getNumberOfComponents())}s+=B.getPoints().getNumberOfPoints()}a.setPoints(A),a.getVerts().setData(S),a.getLines().setData(_),a.getStrips().setData(T),a.getPolys().setData(O),P&&a.getPointData().setNormals(P),M&&a.getPointData().setTCoords(M),E&&a.getPointData().setScalars(E),i[0]=a}else i[0]=n[0];else u0("No input specified.")}}var u4={newInstance:eE.newInstance(u3,"vtkAppendPolyData"),extend:u3};function u5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var u6=eE.vtkWarningMacro,u8={formula:{getArrays:function(){return{input:[],output:[]}},evaluate:function(){return null}}};function u9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u8,n),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkCalculator"),e.setFormula=function(n){return n!==t.formula&&(t.formula=n,e.modified(),!0)},e.getFormula=function(){return t.formula},e.augmentInputArrays=function(e,t){var n=t.slice(0);return e!==i4.POINT&&e!==i4.VERTEX||n.push({location:i4.COORDINATE}),n},e.createSimpleFormulaObject=function(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{getArrays:function(o){var s;return{input:null!=(s=o[0])&&s.isA("vtkImageData")?n.map(function(e){return{location:t,name:e}}):e.augmentInputArrays(t,n.map(function(e){return{location:t,name:e}})),output:[{location:t,name:i,attribute:"outputAttributeType"in a?a.outputAttributeType:iK.SCALARS,numberOfComponents:"numberOfOutputComponents"in a?a.numberOfOutputComponents:1}]}},evaluate:function(e,t){var n=Array(e.length),i=e.map(function(e,t){var i=e.getNumberOfComponents(),o=e.getData();return 1===i?function(e){return o[e]}:function(i){return e.getTuple(i,n[t])}}),a=t[0],s=a.getData(),l=a.getNumberOfComponents(),u=Array(l);if(1===l)s.forEach(function(e,t){s[t]=o.apply(void 0,m(i.map(function(e){return e(t)})).concat([t,u]))});else for(var c=a.getNumberOfTuples(),d=function(e){u=o.apply(void 0,m(i.map(function(t){return t(e)})).concat([e,u])),a.setTuple(e,u)},f=0;f<c;++f)d(f)}}},e.setFormulaSimple=function(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e.setFormula(e.createSimpleFormulaObject(t,n,i,o,a))},e.prepareArrays=function(e,t,n){var i=[],o=[];return e.input.forEach(function(e){if(e.location===i4.COORDINATE)i.push(t.getPoints());else{var n=[[i4.UNIFORM,function(e){return e.getFieldData()}],[i4.POINT,function(e){return e.getPointData()}],[i4.CELL,function(e){return e.getCellData()}],[i4.VERTEX,function(e){return e.getVertexData()}],[i4.EDGE,function(e){return e.getEdgeData()}],[i4.ROW,function(e){return e.getRowData()}]].reduce(function(e,t){return e[t[0]]=t[1],e},{}),o="location"in e&&e.location in n?n[e.location](t):null;o?e.name?i.push(o.getArrayByName(e.name)):"index"in e?i.push(o.getArrayByIndex(e.index)):"attribute"in e&&e.location!==i4.UNIFORM?i.push(o.getActiveAttribute(e.attribute)):(u6('No matching array for specifier "'.concat(JSON.stringify(e),'".')),i.push(null)):(u6('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),i.push(null))}}),e.output.forEach(function(e){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u5(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),a="numberOfComponents"in i?i.numberOfComponents:1;if(e.location===i4.UNIFORM&&"tuples"in i&&(i.size=a*i.tuples),e.location===i4.COORDINATE){var s=t.getPoints(),l=a3.newInstance({dataType:s.getDataType()});l.setNumberOfPoints(s.getNumberOfPoints(),s.getNumberOfComponents()),n.setPoints(l),o.push(l)}else{var u=[[i4.UNIFORM,function(e){return e.getFieldData()},function(e,t){return"tuples"in t?t.tuples:0}],[i4.POINT,function(e){return e.getPointData()},function(e){return e.getNumberOfPoints()}],[i4.CELL,function(e){return e.getCellData()},function(e){return e.getNumberOfCells()}],[i4.VERTEX,function(e){return e.getVertexData()},function(e){return e.getNumberOfVertices()}],[i4.EDGE,function(e){return e.getEdgeData()},function(e){return e.getNumberOfEdges()}],[i4.ROW,function(e){return e.getRowData()},function(e){return e.getNumberOfRows()}]].reduce(function(e,t){return e[t[0]]={getData:t[1],getSize:t[2]},e},{}),c=null,d=0;if("location"in e&&e.location in u&&(c=u[e.location].getData(n),d=u[e.location].getSize(t,i)),d<=0)u6("Output array size could not be determined for ".concat(JSON.stringify(e),".")),o.push(null);else if(c){i.size=a*d;var f=nH.newInstance(i),p=c.addArray(f);"attribute"in i&&e.location!==i4.UNIFORM&&c.setActiveAttributeByIndex(p,i.attribute),o.push(f)}else u6('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),o.push(null)}}),{arraysIn:i,arraysOut:o}},e.requestData=function(n,i){if(!t.formula)return 0;var o,a=t.formula.getArrays(n),s=(null==(o=i[0])?void 0:o.initialize())||M({vtkClass:n[0].getClassName()});s.shallowCopy(n[0]),i[0]=s;var l=e.prepareArrays(a,n[0],i[0]);return t.formula.evaluate(l.arraysIn,l.arraysOut),1}}var u7={newInstance:eE.newInstance(u9,"vtkCalculator"),extend:u9},ce=eE.vtkErrorMacro,ct=[function(e,t,n){return t},function(e,t,n){return e.setTuple(t,n),t},function(e,t,n){return e.insertNextTuple(n)}],cn=[[[0,1],[0,1],[0,1]],[[1,2],[0,1],[0,1]],[[0,1],[1,2],[0,1]],[[1,2],[1,2],[0,1]],[[0,1],[0,1],[1,2]],[[1,2],[0,1],[1,2]],[[0,1],[1,2],[1,2]],[[1,2],[1,2],[1,2]]],cr={pointIdSet:null,minBounds:null,maxBounds:null,minDataBounds:null,maxDataBounds:null,parent:null,children:null},ci=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cr,n),eE.obj(e,t),eE.setGetArray(e,t,["minBounds","maxBounds","minDataBounds","maxDataBounds"],6),eE.get(e,t,["pointIdSet","numberOfPoints"]),eE.set(e,t,["parent"]),t.classHierarchy.push("vtkIncrementalOctreeNode"),e.createPointIdSet=function(e,n){null==t.pointIdSet&&(t.pointIdSet=[])},e.setBounds=function(e,n,i,o,a,s){null==t.minBounds&&(t.minBounds=[]),null==t.maxBounds&&(t.maxBounds=[]),null==t.minDataBounds&&(t.minDataBounds=[]),null==t.maxDataBounds&&(t.maxDataBounds=[]),t.minBounds[0]=e,t.maxBounds[0]=n,t.minBounds[1]=i,t.maxBounds[1]=o,t.minBounds[2]=a,t.maxBounds[2]=s,t.minDataBounds[0]=n,t.maxDataBounds[0]=e,t.minDataBounds[1]=o,t.maxDataBounds[1]=i,t.minDataBounds[2]=s,t.maxDataBounds[2]=a},e.getBounds=function(e){e[0]=t.minBounds[0],e[1]=t.maxBounds[0],e[2]=t.minBounds[1],e[3]=t.maxBounds[1],e[4]=t.minBounds[2],e[5]=t.maxBounds[2]},e.getChildIndex=function(e){return Number(e[0]>t.children[0].getMaxBoundsByReference()[0])+(Number(e[1]>t.children[0].getMaxBoundsByReference()[1])<<1)+(Number(e[2]>t.children[0].getMaxBoundsByReference()[2])<<2)},e.containsPoint=function(e){return+(t.minBounds[0]<e[0]&&e[0]<=t.maxBounds[0]&&t.minBounds[1]<e[1]&&e[1]<=t.maxBounds[1]&&t.minBounds[2]<e[2]&&e[2]<=t.maxBounds[2])},e.containsPointByData=function(e){return+(t.minDataBounds[0]<=e[0]&&e[0]<=t.maxDataBounds[0]&&t.minDataBounds[1]<=e[1]&&e[1]<=t.maxDataBounds[1]&&t.minDataBounds[2]<=e[2]&&e[2]<=t.maxDataBounds[2])},e.updateCounterAndDataBounds=function(e,n,i){if(t.numberOfPoints+=n,!i)return!1;var o=!1;return e[0]<t.minDataBounds[0]&&(o=!0,t.minDataBounds[0]=e[0]),e[0]>t.maxDataBounds[0]&&(o=!0,t.maxDataBounds[0]=e[0]),e[1]<t.minDataBounds[1]&&(o=!0,t.minDataBounds[1]=e[1]),e[1]>t.maxDataBounds[1]&&(o=!0,t.maxDataBounds[1]=e[1]),e[2]<t.minDataBounds[2]&&(o=!0,t.minDataBounds[2]=e[2]),e[2]>t.maxDataBounds[2]&&(o=!0,t.maxDataBounds[2]=e[2]),o},e.updateCounterAndDataBoundsRecursively=function(n,i,o,a){var s=e.updateCounterAndDataBounds(n,i,o);return t.parent===a?s:t.parent.updateCounterAndDataBoundsRecursively(n,i,s,a)},e.containsDuplicatePointsOnly=function(e){return t.minDataBounds[0]===e[0]&&e[0]===t.maxDataBounds[0]&&t.minDataBounds[1]===e[1]&&e[1]===t.maxDataBounds[1]&&t.minDataBounds[2]===e[2]&&e[2]===t.maxDataBounds[2]},e.isLeaf=function(){return null==t.children},e.getChild=function(e){return t.children[e]},e.separateExactlyDuplicatePointsFromNewInsertion=function(t,n,i,o,a,s){var l,u=o,c=[0,0,0],d=[0,0,0],f=[0,0,0],p=[0,0,0],h=[null,null,null],m=null,g=e,v=e;for(t.getPoint(n[0],c);g===v;){for(m=g,f[0]=.5*(m.minBounds[0]+m.maxBounds[0]),f[1]=.5*(m.minBounds[1]+m.maxBounds[1]),f[2]=.5*(m.minBounds[2]+m.maxBounds[2]),h[0]=m.minBounds,h[1]=f,h[2]=m.maxBounds,m.children=[ci(),ci(),ci(),ci(),ci(),ci(),ci(),ci()],l=0;l<8;l++)d[0]=h[cn[l][0][0]][0],p[0]=h[cn[l][0][1]][0],d[1]=h[cn[l][1][0]][1],p[1]=h[cn[l][1][1]][1],d[2]=h[cn[l][2][0]][2],p[2]=h[cn[l][2][1]][2],m.children[l]=ci(),m.children[l].setParent(m),m.children[l].setBounds(d[0],p[0],d[1],p[1],d[2],p[2]);g=m.children[m.getChildIndex(c)],v=m.children[m.getChildIndex(i)]}return u=ct[s](t,u,i),v.createPointIdSet(a>>2,a>>1),v.getPointIdSet().push(u),v.updateCounterAndDataBoundsRecursively(i,1,1,null),g.setPointIdSet(n),g.updateCounterAndDataBoundsRecursively(c,n.length,1,e),u},e.createChildNodes=function(n,i,o,a,s,l,u){var c,d,f=u,p=a,h=[];if(n.getPoint(i[0],h),e.containsDuplicatePointsOnly(h))return{success:!1,nbNodes:f,pointIdx:p=e.separateExactlyDuplicatePointsFromNewInsertion(n,i,o,p,s,l)};var m,g=-1,v=-1,y=[0,0,0,0,0,0,0,0],b=[],x=[],w=[],A=[.5*(t.minBounds[0]+t.maxBounds[0]),.5*(t.minBounds[1]+t.maxBounds[1]),.5*(t.minBounds[2]+t.maxBounds[2])],C=[t.minBounds,A,t.maxBounds];for(t.children=[],c=0;c<8;c++)b[0]=C[cn[c][0][0]][0],x[0]=C[cn[c][0][1]][0],b[1]=C[cn[c][1][0]][1],x[1]=C[cn[c][1][1]][1],b[2]=C[cn[c][2][0]][2],x[2]=C[cn[c][2][1]][2],t.children[c]=ci(),t.children[c].setParent(e),t.children[c].setBounds(b[0],x[0],b[1],x[1],b[2],x[2]),t.children[c].createPointIdSet(s>>2,s>>1);for(C[0]=null,C[1]=null,C[2]=null,c=0;c<s;c++)m=i[c],n.getPoint(m,w),d=e.getChildIndex(w),t.children[d].getPointIdSet().push(m),t.children[d].updateCounterAndDataBounds(w),y[d]++;for(c=0;c<8;c++)if(y[c]===s){v=c;break}if(v===(d=e.getChildIndex(o))){var S=t.children[d].createChildNodes(n,i,o,p,s,l,f);f=S.numberOfNodes,p=S.pointIdx,g=v}else p=ct[l](n,p,o),t.children[d].getPointIdSet().push(p),t.children[d].updateCounterAndDataBoundsRecursively(o,1,1,null),y[d]++;for(c=0;c<8;c++)0!==y[c]&&c!==g||(t.children[c].getPointIdSet().length=0);return{success:!0,numberOfNodes:f,pointIdx:p}},e.insertPoint=function(n,i,o,a,s,l){var u=0,c=a;if(t.pointIdSet)if(t.pointIdSet.length<o||e.containsDuplicatePointsOnly(i))c=ct[s](n,c,i),t.pointIdSet.push(c),e.updateCounterAndDataBoundsRecursively(i,1,1,null);else{var d=e.createChildNodes(n,t.pointIdSet,i,c,o,s,l);u=d.numberOfNodes,c=d.pointIdx,t.pointIdSet=null}else c=ct[s](n,c,i),t.pointIdSet=[],t.pointIdSet.push(c),e.updateCounterAndDataBoundsRecursively(i,1,1,null);return{numberOfNodes:l+u,pointIdx:c}},e.getDistance2ToBoundary=function(n,i,o,a,s){var l=null,u=null,c=null,d=null,f=Number.MAX_VALUE;s?(l=e.getMinDataBounds(),u=e.getMaxDataBounds(),c=a.getMinDataBounds(),d=a.getMaxDataBounds()):(l=t.minBounds,u=t.maxBounds,c=a.getMinBounds(),d=a.getMaxBounds());var p=0,h=Number(n[0]<l[0]),m=Number(n[0]>u[0]),g=Number(n[1]<l[1]),v=Number(n[1]>u[1]),y=Number(n[2]<l[2]),b=Number(n[2]>u[2]),x=Number(!h&&!m),w=Number(!g&&!v);switch((Number(!y&&!b)<<2)+(w<<1)+x){case 0:i[0]=h?l[0]:u[0],i[1]=g?l[1]:u[1],i[2]=y?l[2]:u[2],f=tx(n,i);break;case 1:i[0]=n[0],i[1]=g?l[1]:u[1],i[2]=y?l[2]:u[2],f=tx(n,i);break;case 2:i[0]=h?l[0]:u[0],i[1]=n[1],i[2]=y?l[2]:u[2],f=tx(n,i);break;case 3:y?(f=l[2]-n[2],i[2]=l[2]):(f=n[2]-u[2],i[2]=u[2]),f*=f,i[0]=n[0],i[1]=n[1];break;case 4:i[0]=h?l[0]:u[0],i[1]=g?l[1]:u[1],i[2]=n[2],f=tx(n,i);break;case 5:g?(f=l[1]-n[1],i[1]=l[1]):(f=n[1]-u[1],i[1]=u[1]),f*=f,i[0]=n[0],i[2]=n[2];break;case 6:h?(f=l[0]-n[0],i[0]=l[0]):(f=n[0]-u[0],i[0]=u[0]),f*=f,i[1]=n[1],i[2]=n[2];break;case 7:if(o)A=n[0]-l[0],l[0]!==c[0]&&A<f&&(p=0,f=A),A=u[0]-n[0],u[0]!==d[0]&&A<f&&(p=1,f=A),A=n[1]-l[1],l[1]!==c[1]&&A<f&&(p=2,f=A),A=u[1]-n[1],u[1]!==d[1]&&A<f&&(p=3,f=A),A=n[2]-l[2],l[2]!==c[2]&&A<f&&(p=4,f=A),A=u[2]-n[2],u[2]!==d[2]&&A<f&&(p=5,f=A);else for(var A,C=[n[0]-l[0],u[0]-n[0],n[1]-l[1],u[1]-n[1],n[2]-l[2],u[2]-n[2]],S=0;S<6;S++)C[S]<f&&(p=S,f=C[S]);f!==Number.MAX_VALUE&&(f*=f),i[0]=n[0],i[1]=n[1],i[2]=n[2];var _=[l,u],T=p>>1;i[T]=_[1&p][T];break;default:ce("unexpected case in getDistance2ToBoundary")}return f},e.getDistance2ToInnerBoundary=function(t,n){return e.getDistance2ToBoundary(t,[],0,n,0)}},"vtkIncrementalOctreeNode");function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var ca=eE.vtkErrorMacro;function cs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uP(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({fudgeFactor:0,octreeMaxDimSize:0,buildCubicOctree:!1,maxPointsPerLeaf:128,insertTolerance2:1e-6,locatorPoints:null,octreeRootNode:null,numberOfNodes:0},n)),eE.obj(e,t),eE.setGet(e,t,["fudgeFactor","octreeMaxDimSize","buildCubicOctree","maxPointsPerLeaf","insertTolerance2","locatorPoints","octreeRootNode","numberOfNodes"]),function(e,t){function n(e,t){return e.isLeaf()?e:n(e.getChild(e.getChildIndex(t)),t)}t.classHierarchy.push("vtkIncrementalOctreePointLocator"),e.freeSearchStructure=function(){t.octreeRootNode=null,t.numberOfNodes=0,t.locatorPoints=null},e.findClosestPointInLeafNode=function(e,n){var i=Number.MAX_VALUE;if(null==e.getPointIdSet())return[-1,i];var o,a=0,s=[],l=-1,u=-1,c=e.getPointIdSet();o=c.length;for(var d=0;d<o&&(l=c[d],t.locatorPoints.getPoint(l,s),(a=nR.distance2BetweenPoints(s,n))<i&&(i=a,u=l),0!==i);d++);return c=null,[u,i]},e.findClosestPointInSphere=function(e,n,i,o){var a=Number.MAX_VALUE,s=[];return s.push(t.octreeRootNode),s.length,[-1,a]},e.initPointInsertion=function(n,i){var o,a=0,s=0;if(null==n)return ca("a valid vtkPoints object required for point insertion"),!1;e.freeSearchStructure(),t.locatorPoints=n,t.insertTolerance2=t.tolerance*t.tolerance,t.octreeMaxDimSize=0;var l=m(i),u=iG.getLengths(i);if(t.octreeMaxDimSize=Math.max.apply(Math,m(u)),t.buildCubicOctree){for(a=0;a<3;a++)if(u[a]!==t.octreeMaxDimSize){var c=t.octreeMaxDimSize-u[a];l[2*a]-=.5*c,l[2*a+1]+=.5*c,u[a]=t.octreeMaxDimSize}}t.fudgeFactor=1e-5*t.octreeMaxDimSize;var d=.1*t.octreeMaxDimSize;for(a=0;a<3;a++)if(u[a]<d){var f=l[s=2*a];l[s]=l[s+1]-d,l[s+1]=f+d}else l[2*a]-=t.fudgeFactor;return t.octreeRootNode=ci(),++t.numberOfNodes,(o=t.octreeRootNode).setBounds.apply(o,m(l)),!0},e.findClosestPointInSphereWithTolerance=function(n,i,o){return e.findClosestPointInSphere(n,i,o,t.octreeMaxDimSize*t.octreeMaxDimSize*4,i)},e.findDuplicateFloatTypePointInVisitedLeafNode=function(e,n){for(var i,o=-1,a=-1,s=e.getPointIdSet(),l=t.locatorPoints.getData(),u=0;u<s.length;u++)if(i=((o=s[u])<<1)+o,n[0]===l[i]&&n[1]===l[i+1]&&n[2]===l[i+2]){a=o;break}return a},e.findDuplicateDoubleTypePointInVisitedLeafNode=function(e,n){for(var i,o=-1,a=-1,s=e.getPointIdSet(),l=t.locatorPoints.getData(),u=0;u<s.length;u++)if(i=((o=s[u])<<1)+o,n[0]===l[i]&&n[1]===l[i+1]&&n[2]===l[i+2]){a=o;break}return a},e.findDuplicatePointInLeafNode=function(n,i){return null==n.getPointIdSet()?-1:t.locatorPoints.getDataType()===eI.FLOAT?e.findDuplicateFloatTypePointInVisitedLeafNode(n,i):e.findDuplicateDoubleTypePointInVisitedLeafNode(n,i)},e.insertPoint=function(e,i){var o=n(t.octreeRootNode,i).insertPoint(t.locatorPoints,i,t.maxPointsPerLeaf,e,1,t.numberOfNodes);t.numberOfNodes=o.numberOfNodes},e.insertUniquePoint=function(n){var i,o=e.isInsertedPoint(n),a=o.pointIdx,s=o.leafContainer;if(a>-1)return{success:!1,idx:a};var l=s.insertPoint(t.locatorPoints,n,t.maxPointsPerLeaf,a,2,t.numberOfNodes);return i=l.numberOfNodes,a=l.pointIdx,t.numberOfNodes=i,{success:!0,idx:a}},e.insertNextPoint=function(e){var i=n(t.octreeRootNode,e).insertPoint(t.locatorPoints,e,t.maxPointsPerLeaf,-1,2,t.numberOfNodes),o=i.numberOfNodes,a=i.pointIdx;return t.numberOfNodes=o,a},e.isInsertedPointForZeroTolerance=function(i){var o=n(t.octreeRootNode,i);return{pointIdx:e.findDuplicatePointInLeafNode(o,i),leafContainer:o}},e.isInsertedPointForNonZeroTolerance=function(i){var o,a,s=n(t.octreeRootNode,i),l=b(e.findClosestPointInLeafNode(s,i),2),u=l[0],c=l[1];return 0===c?{pointIdx:u,leafContainer:s}:(s.getDistance2ToInnerBoundary(i,t.octreeRootNode)<t.insertTolerance2&&(a=e.findClosestPointInSphereWithTolerance(i,t.insertTolerance2,s,o),o<c&&(c=o,u=a)),{pointIdx:u=c<=t.insertTolerance2?u:-1,leafContainer:s})},e.isInsertedPoint=function(n,i){return 0===t.insertTolerance2?e.isInsertedPointForZeroTolerance(n,i):e.isInsertedPointForNonZeroTolerance(n,i)}}(e,t)}var cl={newInstance:eE.newInstance(cs,"vtkIncrementalOctreePointLocator"),extend:cs},cu=eE.vtkErrorMacro;function cc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=null!=t?t:0,o=null!=n?n:e.length-1,a=i+Math.floor((o-i)/2),s=i;s<=a;++s){var l=[e[o-(s-i)],e[s]];e[s]=l[0],e[o-(s-i)]=l[1]}}function cd(e,t,n,i){var o=[],a=[],s=[];to(t,e,o),to(n,t,a),to(e,n,s);var l=(o[1]*a[2]-o[2]*a[1])*i[0]+(o[2]*a[0]-o[0]*a[2])*i[1]+(o[0]*a[1]-o[1]*a[0])*i[2],u=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])+Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])+Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);return l/(u=0!=(u*=u)?u:1)*10.392304845413264}function cf(e,t,n,i,o){for(var a=[1,2,0],s=0,l=[-1,-1,-1],u=0;u<3;u++){var c=n[u],d=i[c];if(d>=0){var f=c+1;f===t.length&&(f=0),f===n[a[u]]&&(l[u]=d,s++)}}if(0===s)e.insertNextCell([t[n[0]],t[n[1]],t[n[2]]]);else{for(var p=[[t[n[0]],t[n[1]]],[t[n[1]],t[n[2]]],[t[n[2]],t[n[0]]]],h=0,m=0,g=0;g<3;g++)if(l[g]>=0){var v=l[g],y=o[v],b=o.slice(v+1,v+1+y);p[g][0]!==b[0]&&p[g][1]!==b[y-1]&&cu("assertion error in vtkCCSInsertTriangle"),y>h&&(h=y,m=g),p[g]=b}var x=(m+2)%3,w=(m+1)%3,A=p[x].length>2,C=p[w].length>2,S=[];S[x]=p[m][1],S[m]=p[x][0],S[w]=p[m][p[m].length-2];for(var _=0;_<3;_++)if((_!==x||A)&&(_!==w||C)){var T=0,O=p[_].length-1;_===m&&(T+=A,O-=C);for(var P=T;P<O;P++)e.insertNextCell([p[_][P],p[_][P+1],S[_]])}}}function cp(e,t,n,i,o,a){var s=e.length;if(s<3)return!0;if(3===s)return cf(o,e,[0,1,2],n,i),!0;var l=!1,u=[],c=[],d=[],f=0,p=0,h=0,m=[];for(m.length=s,f=0;f<s;f++)m[f]=[f,0];h=s-2,t.getPoint(e[m[h][0]],c),f=s-1,t.getPoint(e[m[f][0]],d);var g,v=0,y=0,b=0;for(p=0;p<s;p++){var x=[c,d,u];u=x[0],c=x[1],d=x[2],t.getPoint(e[m[p][0]],d);var w=cd(u,c,d,a);w>y&&(b=f,y=w),v+=w<0,m[f][1]=w,f=p}for(;;){if(y<=5e-324){l=!0;break}if(p=(f=b)+1!==s?f+1:0,h=0!==f?f-1:s-1,m[f][1]>0){if(g=!0,t.getPoint(e[m[p][0]],d),t.getPoint(e[m[h][0]],u),v){var A=[],C=[];to(d,u,A),tf(A,a,C);var S=tc(u,C),_=p+1!==s?p+1:0,T=[];t.getPoint(e[m[_][0]],T);var O=tc(T,C)<S,P=O;_=_+1!==s?_+1:0;for(var M=[],E=[],D=[];g&&_!==h;_=_+1!==s?_+1:0){var I=[M,T];T=I[0],M=I[1],t.getPoint(e[m[_][0]],T);var k=tc(T,C)<S;(O?!k:k)&&(O=!O,P=!0,g=sY.intersection(u,d,T,M,E,D)===sY.IntersectionState.NO_INTERSECTION)}g&&(g=P)}if(g){if(cf(o,e,[m[f][0],m[p][0],m[h][0]],n,i),m.splice(f,1),h-=0===f,p-=0!==p,--s<3)break;var N=0!==h?h-1:s-1;t.getPoint(e[m[N][0]],c);var R=cd(c,u,d,a);v-=m[h][1]<0&&R>=0,m[h][1]=R;var B=p+1!==s?p+1:0;t.getPoint(e[m[B][0]],c);var L=cd(u,d,c,a);v-=m[p][1]<0&&L>=0,m[p][1]=L}else m[f][1]=5e-324}for(b=0,y=m[0][1],f=1;f<s;f++){var F=m[f][1];F>y&&(b=f,y=F)}}return!l}function ch(e,t,n,i,o){var a=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],s=[n[0]-e[0],n[1]-e[1],n[2]-e[2]],l=[i[0]-e[0],i[1]-e[1],i[2]-e[2]],u=[],c=[];tf(s,a,u),tf(s,l,c);var d=tc(u,o),f=tc(c,o);if(0!==d&&0!==f){var p=d<0,h=f<0;if(p?!h:h)return 1-2*h;var m=tc(s,a),g=tp(a),v=(tc(s,l)*tp(l)-m*g)*(1-2*p);if(0!==v)return 1-2*(v<0)}return 0}function cm(e,t,n,i){for(var o,a,s=[],l=[],u=[],c=[],d=[],f=0;f<e.length;f++){var p=e[f],h=p.length,m=[];if(n.push(m),h<4)m[0]=-1,m[1]=-1,m[2]=-1;else{var g=h,v=10000000000000002e-26*le.getBounds(p,t,[]),y=[],b=0,x=-1,w=[],A=0;t.getPoint(p[h-1],s),t.getPoint(p[0],l),to(l,s,c),o=tc(c,c);for(var C=0;C<h;C++){var S=C+1;S>=h&&(S-=h),t.getPoint(p[S],u),to(u,l,d),a=tc(d,d);var _=tc(c,d),T=o*a-_*_,O=p[C];if(g<=3||o>v&&(_<0||o<v||a<v||T>o*a*10000000000000002e-26)){if(A>1){O!==x&&(i.push(O),A++);var P=i.length-A-1;i[P]=A,m.push(P)}else 0===A?w.push(O):m.push(-1);y.push(O),b=O,x=O,A=1,s[0]=u[0],s[1]=u[1],s[2]=u[2],l[0]=u[0],l[1]=u[1],l[2]=u[2],c[0]=d[0],c[1]=d[1],c[2]=d[2],o=a}else A>0&&O!==x?(1===A&&(i.push(1),i.push(b)),i.push(O),x=O,A++):w.push(O),g--,l[0]=u[0],l[1]=u[1],l[2]=u[2],to(u,s,c),o=tc(c,c)}for(var M=0;M<w.length;M++){var E=w[M];E!==x&&(1===A&&(i.push(1),i.push(b)),i.push(E),x=E,A++)}if(A>1){var D=i.length-A-1;i[D]=A,m.push(D)}e[f]=y}}}function cg(e,t,n){cc(e,1,e.length-1),t.reverse();for(var i=0;i<t.length;i++)if(t[i]>=0){var o=t[i]+1;cc(n,o,o+n[t[i]]-1)}}function cv(e,t,n,i,o,a,s){for(var l=e.length,u=t.length,c=[],d=[],f=[],p=0;p<u;p++){var h=(p>>1)+(1&p)*(u+1>>1);n.getPoint(t[h],c);var m=le.pointInPolygon(c,o,a,i);if(m===s5.FAILURE&&cu("Error finding point in polygon in vtkCCSPolyInPoly"),m!==s5.OUTSIDE){var g=0;n.getPoint(e[l-1],d);for(var v=0;v<l;v++){if(n.getPoint(e[v],f),sY.distanceToLine(c,d,f).distance<s){g=1;break}d[0]=f[0],d[1]=f[1],d[2]=f[2]}if(!g)return!0}}return!1}function cy(e,t,n,i){var o=e.length;if(0===o)return 0;for(var a=[],s=0,l=0;l<o;l++)t.getPoint(e[l],a),n[s++]=a[0],n[s++]=a[1],n[s++]=a[2];return 10000000000000002e-26*le.getBounds(e,t,i)}function cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var cx=eE.vtkErrorMacro;function cw(e,t,n,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!1;if(n<=0)return!1;var l=e.getPoints(),u=[],c=[],d=(null==o?void 0:o.length)<3;!function(e,t,n,i,o,a){var s=0,l=[],u=new Uint8Array(n-t);e.buildLinks(e.getPoints().getNumberOfPoints());for(var c=0,d=n-t;d>0;){var f=c++,p=[];o.push(p);var h=0,m=!1;for(h=t;h<n;h++)if(!u[h-t]){var g=s=(l=e.getCellPoints(h).cellPointIds).length;s>2&&l[0]===l[s-1]&&(g=s-1,m=!0),p.length=g;for(var v=0;v<g;v++)p[v]=l[v];break}u[h-t]=1;for(var y=0==--d&&!m;!m&&!y&&d>0;){y=!0;for(var b=p.length,x=[],w=[p[b-1],p[0]],A=0;A<2;A++){for(var C=[],S=e.getPointCells(w[A]),_=0;_<S.length;_++)(h=S[_])>=t&&h<n&&!u[h-t]&&(s=(l=e.getCellPoints(h).cellPointIds).length,x[0]=l[0],x[1]=l[s-1],w[A]!==x[A]&&(i||w[A]!==x[1-A])||C.push(h));if(C.length>0){if(C.length>1){var T=C.length;do{h=C[--T],s=(l=e.getCellPoints(h).cellPointIds).length,x[0]=l[0],x[1]=l[s-1];var O=w[A]!==x[A];(!O&&(0===A&&p[b-2]===l[1]||1===A&&p[1]===l[s-2])||O&&(0===A&&p[b-2]===l[s-2]||1===A&&p[1]===l[1]))&&C.splice(T,1)}while(T>0&&C.length>1)}if(h=C[0],s=(l=e.getCellPoints(h).cellPointIds).length,x[0]=l[0],x[1]=l[s-1],m=w[A]===x[A]?w[1-A]===x[1-A]:w[1-A]===x[A],0===A)for(var P=1;P<s-!!m;P++)p.push(l[P]);else for(var M=+!!m;M<s-1;M++)p.unshift(l[M]);if(w[A]!==x[A]){var E=p.length,D=+!!m,I=s-1;for(1===A&&(E=s-1-!!m,D=1,I=s-!!m);D!==I;)p[--E]=p[D++]}u[h-t]=1,d--,y=!1}}}y&&a.push(f)}}(e,t,t+n,d,u,c);var f=o;if(!d){f=[0,0,1];for(var p=0,h=[],g=0;g<u.length;g++){var v=le.getNormal(u[g],l,h);v>p&&(p=v,f[0]=h[0],f[1]=h[1],f[2]=h[2])}}!function(e,t,n,i){for(var o,a,s,l,u,c,d,f=[],p=[],h=[],g=t.length;0!==g;){a=(o=e[t[g-1]])[o.length-1],n.getPoint(a,p),l=Number.MAX_VALUE,u=0;for(var v=0;v<g;v++){s=e[t[v]][0],n.getPoint(s,h),0!==(d=tp(c=[h[0]-p[0],h[1]-p[1],h[2]-p[2]]))&&(c[0]/=d,c[1]/=d,c[2]/=d);var y=[.5*(p[0]+h[0]),.5*(p[1]+h[1]),.5*(p[2]+h[2])],b=[];tf(i,c,b),b[3]=-tc(b,y);for(var x=!1,w=e.length,A=[],C=0;C<w&&!x;C++){for(var S=e[C],_=S.length,T=0;T<_;T++){var O=S[T];if(O!==a&&O!==s){n.getPoint(O,A);var P=A[0]*b[0]+A[1]*b[1]+A[2]*b[2]+b[3],M=tx(A,y);if(P<0&&P*P>1e-5*1e-5*M){x=!0;break}}}!x&&d<l&&(l=d,u=v)}}if(l<Number.MAX_VALUE)if(u===g-1)t.pop();else{var E=t[u];o.push.apply(o,m(e[E])),f.push(E),t.splice(u,1)}else f.push(t[g-1]),t.pop();g=t.length}f.sort(function(e,t){return e-t});for(var D=f.length;D>0;)e.splice(f[--D],1);t.length=0}(u,c,l,f);var y=[],b=[];cm(u,l,y,b);for(var x=u.length,w=Array(x),A=0;A<x;A++)w[A]=[A];!function(e,t,n,i,o,a,s){var l=e.length;if(!(l<=1)){var u,c=[],d=[];s||(u=new Int32Array(l));for(var f=1,p=0;p<l;p++)f=Math.max(f,e[p].length);for(var h,m=new Float64Array(3*f),g=[0,0,0,0,0,0],v=0;v<l;v++){var y=e[v].length;if(!(y<3)){var b=function(e,t,n){var i=[0,0,0],o=[],a=[],s=[],l=[],u=[],c=[];t.getPoint(e[0],o),t.getPoint(e[1],a),to(a,o,l);for(var d=2;d<e.length;d++)t.getPoint(e[d],s),to(s,o,u),tf(l,u,c),ti(i,c,i),a[0]=s[0],a[1]=s[1],a[2]=s[2],l[0]=u[0],l[1]=u[1],l[2]=u[2];var f=tc(i,n);return{isNormalNotZero:0!==f,sense:f>0}}(e[v],t,a),x=b.isNormalNotZero,w=b.sense;x&&(c[v]=!w),h=cy(e[v],t,m,g);for(var A=0;A<l;A++)A!==v&&e[A].length>=3&&(n[A].includes(v)||cv(e[v],e[A],t,a,m.subarray(3*y),g,h)&&(n[v].push(A),u&&(u[A]+=1)))}}if(s){for(var C=0;C<l;C++)if(c[C])n[C].length=0;else if(n[C].length>1){d.length=0;for(var S=1;S<n[C].length;S++)d[n[C][S]]=!0;for(var _=1;_<n[C].length;_++){var T=n[C][_];if(!c[T])for(var O=0;O<n[T].length;O++)d[n[T][O]]=!1}n[C].length=0,n[C].push(C);for(var P=0;P<l;P++)d[P]&&n[C].push(P)}}else{for(var M,E=[],D=0;D<l;D++)0===u[D]&&E.push(D);for(;E.length>0;)if(M=E.length-1,E.pop(),c[M]&&(cg(e[M],i[M],o),c[M]=!1),n[M].length>1){d.length=0;for(var I=1;I<n[M].length;I++){var k=n[M][I];u[k]>1?(u[k]-=2,0===u[k]&&E.push(k)):(d[k]=1,n[k].length=0,c[k]||(cg(e[k],i[k],o),c[k]=!1))}n[M].length=0,n[M].push(M);for(var N=0;N<l;N++)d[N]&&n[M].push(N)}}}}(u,l,w,y,b,f,d),function(e,t,n,i,o){for(var a=0,s=0;s<n.length;){var l=n[s];if(l.length>1){for(var u=l[0],c=l[1],d=Array(l.length),f=1;f<l.length;f++)d[f]=[e[l[f]].length,f];cc(d=[d[0]].concat(m(d.splice(1).sort(function(e,t){return e[0]-t[0]}))),1,d.length-1);for(var p=0,h=0,g=[[0,0],[0,0]],v=0;v<2&&!p;v++)for(var y=1;y<l.length;y++)if(function(e,t,n,i,o,a,s,l){var u=e[n],c=e[i],d=c.length,f=[];!function(e,t,n,i){var o,a,s=[],l=[],u=[],c=[],d=[],f=[0,0];i[0]=0,i[1]=0;var p=e.length;t.getPoint(e[p-1],l),t.getPoint(e[0],s),to(s,l,u),o=Math.sqrt(tc(u,u));for(var h=0;h<p;h++){var m=h+1;if(m===p&&(m=0),t.getPoint(e[m],l),to(l,s,c),a=Math.sqrt(tc(c,c)),tf(u,c,d),0>tc(d,n)&&o*a>0){var g=tc(u,c)/(o*a);g<f[0]&&(f[1]=f[0],f[0]=g,i[1]=i[0],i[0]=h)}s[0]=l[0],s[1]=l[1],s[2]=l[2],u[0]=c[0],u[1]=c[1],u[2]=c[2],o=a}}(c,o,a,f);var p=[];p.length=u.length;var h=0;s[0][0]=0,s[0][1]=0,s[1][0]=0,s[1][1]=0;var m=!1;for(h=0;h<2;h++){for(var g=l?d:3,v=0;v<g&&!m;v++){var y=(v>>1)+(1&v)*(d+1>>1);y=(y+f[h])%d;for(var b=0;b<u.length;b++){var x=function(e,t,n,i,o){var a=e.length,s=t.length,l=[],u=[],c=[];o.getPoint(e[n],u),o.getPoint(t[i],c);var d=[],f=[];to(c,u,d);var p,h,m=tc(d,d),g=0;return o.getPoint(e[n>0?n-1:a-1],l),to(l,u,f),(p=tc(f,f))>0&&(h=tc(d,f),(h*=h/p)>g&&(g=h)),o.getPoint(e[n<a-1?n+1:0],l),to(l,u,f),(p=tc(f,f))>0&&(h=tc(d,f),(h*=h/p)>g&&(g=h)),o.getPoint(t[i>0?i-1:s-1],l),to(c,l,f),(p=tc(f,f))>0&&(h=tc(d,f),(h*=h/p)>g&&(g=h)),o.getPoint(t[i<s-1?i+1:0],l),to(c,l,f),(p=tc(f,f))>0&&(h=tc(d,f),(h*=h/p)>g&&(g=h)),m>0?g/m:Number.MAX_VALUE}(u,c,b,y,o);p[b]=[x,b]}p.sort(function(e,t){return e[0]-t[0]});for(var w=0;w<p.length;w++){var A=p[w][1];if(h>0){if(y===s[0][1]||A===s[0][0])continue;var C=[],S=[];o.getPoint(u[s[0][0]],C),o.getPoint(c[s[0][1]],S);var _=[],T=[];if(o.getPoint(u[A],_),o.getPoint(c[y],T),sY.intersection(C,S,_,T,void 0,void 0)===sY.IntersectionState.YES_INTERSECTION)continue}if(function(e,t,n,i,o,a,s,l){var u=e[o][s],c=e[a][l],d=[],f=[];t.getPoint(u,d),t.getPoint(c,f);var p=[];to(f,d,p);var h=th(p);if(0===h)return!0;for(var m=h*h*1e-5*1e-5,g=o,v=s,y=d,b=[],x=f,w=[],A=0;A<2;A++){var C=e[g],S=C.length,_=S-v-1,T=v+1;if(_>=S&&(_-=S),T>=S&&(T-=S),t.getPoint(C[_],b),t.getPoint(C[T],w),ch(y,b,x,w,n)>0)return!1;g=a,v=l,y=f,x=d}var O=[];tf(n,p,O),O[3]=-tc(O,d);for(var P=0;P<i.length;P++){var M=e[i[P]],E=M.length,D=[],I=[],k=M[E-1];t.getPoint(k,D);for(var N=O[0]*D[0]+O[1]*D[1]+O[2]*D[2]+O[3],R=N>0,B=0;B<E;B++){var L=M[B];t.getPoint(L,I);var F=O[0]*I[0]+O[1]*I[1]+O[2]*I[2]+O[3],V=F>0;if(u!==k&&u!==L&&c!==k&&c!==L&&((R?!V:V)||N*N<m||F*F<m)&&(to(I,D,p),tc(p,p)>0)){var j=[];tf(p,n,j),j[3]=-tc(j,D);var G=j[0]*d[0]+j[1]*d[1]+j[2]*d[2]+j[3],U=j[0]*f[0]+j[1]*f[1]+j[2]*f[2]+j[3],z=U>0;if(G>0?!z:z){var W=d,H=D;if(F*F<N*N&&(W=f),U*U<G*G&&(H=I),tx(W,H)>m)return!1}}k=L,D[0]=I[0],D[1]=I[1],D[2]=I[2],N=F,R=V}}return!0}(e,o,a,t,n,i,A,y)){s[h][0]=A,s[h][1]=y,m=!0;break}}}if(!m)return!1}return!0}(e,l,u,c=l[h=d[y][1]],t,o,g,v)){(function(e,t,n,i,o,a){for(var s=[],l=[],u=0;u<2;u++){var c=e[n][a[u][0]],d=e[i][a[u][1]];o.getPoint(c,s),o.getPoint(d,l)}var f,p=e[n],h=e[i],m=t[n],g=t[i],v=p.length,y=h.length,b=v*(a[1][0]<a[0][0])+a[1][0]-a[0][0]+1,x=b+y*(a[0][1]<a[1][1])+a[0][1]-a[1][1]+1,w=[];w.length=x;var A=Array(x);f=a[0][0];for(var C=0;C<b;C++){var S=f++;w[C]=p[S],A[C]=m[S],f*=f!==v}A[b-1]=-1,f=a[1][1];for(var _=b;_<x;_++){var T=f++;w[_]=h[T],A[_]=g[T],f*=f!==y}A[x-1]=-1;var O=v*(a[0][0]<a[1][0])+a[0][0]-a[1][0]+1,P=O+y*(a[1][1]<a[0][1])+a[1][1]-a[0][1]+1,M=[];M.length=P;var E=Array(P);f=a[1][0];for(var D=0;D<O;D++){var I=f++;M[D]=p[I],E[D]=m[I],f*=f!==v}E[O-1]=-1,f=a[0][1];for(var k=O;k<P;k++){var N=f++;M[k]=h[N],E[k]=g[N],f*=f!==y}E[P-1]=-1,e[n]=w,e[i]=M,t[n]=A,t[i]=E})(e,i,u,c,t,g),p=1;break}if(p)l.splice(h,1),0===n[c].length&&n[c].push(c);else{for(var b=1;b<l.length;b++)0===n[c=l[b]].length&&n[c].push(c);l.length=1,a=1}if(l.length>1){for(var x=e[u],w=new Float64Array(3*x.length),A=[0,0,0,0,0,0],C=cy(x,t,w,A),S=s,_=1;_<l.length;)cv(x,e[l[_]],t,o,w,A,C)?_++:(n[c].push(l[_]),l.splice(_,1),c<S&&(S=c));s=S;continue}}s++}return!a}(u,l,w,y,f)||(s=!0),function(e,t,n,i,o,a){for(var s,l,u,c,d=a3.newInstance({dataType:eI.DOUBLE,empty:!0}),f=cl.newInstance(),p=0;p<e.length;p++)if(l=(s=e[p]).length,u=[],0!=(c=1e-5*Math.sqrt(le.getBounds(s,t,u)))){d.initialize(),f.setTolerance(c),f.initPointInsertion(d,u);var h=!1,m=0,g=0,v=0,y=[],b=[],x=[],w=[];for(g=0;g<l;g++){t.getPoint(s[g],y);var A=f.insertUniquePoint(y,0),C=A.success,S=A.pointIdx;if(!C&&(f.insertNextPoint(y),g>(m=S)+2-(v=s[g]!==s[m])&&l+m>g+2-v)){if(!a){h=!0;break}var _=l+m-1,T=m+1,O=g+1;if(_>=l&&(_-=l),T>=l&&(T-=l),O>=l&&(O-=l),t.getPoint(s[_],b),t.getPoint(s[T],x),t.getPoint(s[O],w),ch(y,b,x,w,o)>0){h=!0;break}}}if(h){var P=g-m,M=e[p],E=i[p],D=M.slice(m,m+P+v),I=E.slice(m,m+P+v),k=Array(l-P+v),N=Array(l-P+v);v&&(I[P]=-1);for(var R=0;R<m+v;R++)k[R]=M[R],N[R]=E[R];v&&(N[m]=-1);for(var B=g;B<l;B++)k[B-P+v]=M[B],N[B-P+v]=E[B];e[p]=D,i[p]=I,e.push(k),i.push(N),n.length=e.length,n[p].length>0&&n[e.length-1].push(e.length-1)}}}(u,l,w,y,f,d);for(var C=0;C<w.length;C++)0!==w[C].length&&(a?cp(u[C],l,y[C],b,i,f)||(s=!1):i.insertNextCell(b.slice(1,b.length)));return!s}var cA={triangulatePolys:!0};function cC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cA,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["triangulatePolys"]),t.classHierarchy.push("vtkContourTriangulator"),e.requestData=function(e,n){var i,o=e[0],a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();if(n[0]=a,!o)return cx("Invalid or missing input"),!1;var s=o.getLines();if(null==s||0===s.getNumberOfCells())return!0;o.buildCells();var l=nQ.newInstance({dataType:eI.DOUBLE,empty:!0});return a.setPolys(l),a.setPoints(o.getPoints()),a.getPointData().passData(o.getPointData()),cw(o,o.getNumberOfVerts(),s.getNumberOfCells(),l,null,t.triangulatePolys),!0}}var cS=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cb(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(cC,"vtkContourTriangulator"),extend:cC},{triangulateContours:cw,triangulatePolygon:function(e,t,n){var i=m(e),o=[],a=[];cm([i],t,a,o);var s=a[0],l=!0,u=[];return 0!==le.getNormal(i,t,u)&&(l=cp(i,t,s,o,n,u)),l}}),c_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(this,e),this.oriented=t,this.edgeMap=new Map}return I(e,[{key:"initialize",value:function(){this.edgeMap.clear()}},{key:"computeEdgeKey",value:function(e,t){return this.oriented||e<t?e*t*.5*(e*t+1)+t:t*e*.5*(t*e+1)+e}},{key:"insertUniqueEdge",value:function(e,t,n){var i=this.computeEdgeKey(e,t),o=this.edgeMap.get(i);return o||(o={key:i,edgeId:this.edgeMap.size,value:n},this.edgeMap.set(i,o)),o}},{key:"insertEdge",value:function(e,t,n){var i=this.computeEdgeKey(e,t),o={key:i,edgeId:this.edgeMap.size,value:n};return this.edgeMap.set(i,o),o}},{key:"isInsertedEdge",value:function(e,t){var n=this.computeEdgeKey(e,t);return this.edgeMap.get(n)}}],[{key:"getEdgePointIds",value:function(e){var t=.5*(-1+Math.sqrt(8*e.key+1)),n=e.key-.5*(t+1)*t;return[n,t-n]}}]),e}(),cT=function(){return new c_((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).oriented)},cO={ScalarMode:{NONE:0,COLORS:1,LABELS:2}};function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var cM=eE.vtkErrorMacro,cE=eE.capitalize,cD=cO.ScalarMode,cI={clippingPlanes:null,tolerance:1e-6,passPointData:!1,triangulatePolys:!1,scalarMode:cD.NONE,generateOutline:!1,generateFaces:!0,activePlaneId:-1,baseColor:[1,99/255,71/255],clipColor:[244/255,164/255,96/255],activePlaneColor:[227/255,207/255,87/255],triangulationErrorDisplay:!1};function ck(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cI,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["clippingPlanes","tolerance","passPointData","triangulatePolys","scalarMode","generateOutline","generateFaces","activePlaneId","triangulationErrorDisplay"]),eE.setGetArray(e,t,["baseColor","clipColor","activePlaneColor"],3),function(e,t){function n(e,t,n,i,o,a,s,l){if(l>0){var u=[a,o];o=u[0],a=u[1];var c=[l,s];s=c[0],l=c[1]}var d=n.insertUniqueEdge(o,a);if(null!=d.value)return d.value;var f=e.getPoint(o),p=e.getPoint(a),h=1-s/(s-l),m=1-h,g=[h*f[0]+m*p[0],h*f[1]+m*p[1],h*f[2]+m*p[2]],v=i*i;return tx(g,f)<v?(d.value=o,o):tx(g,p)<v?(d.value=a,a):(d.value=e.insertNextTuple(g),t.interpolateData(t,o,a,d.value,m),d.value)}t.classHierarchy.push("vtkClipClosedSurface"),e.getMTime=function(){return t.clippingPlanes.reduce(function(e,t){return t.getMTime()>e?t.getMTime():e},t.mtime)},e.requestData=function(e,i){var o,a,s,l=e[0],u=(null==(o=i[0])?void 0:o.initialize())||lC.newInstance();if(i[0]=u,l){null==t._idList?t._idList=[]:t._idList.length=0;var c=l.getPoints(),d=0,f=eI.FLOAT;c&&(d=c.getNumberOfPoints(),f=c.getDataType());var p=a3.newInstance({size:3*d,dataType:eI.DOUBLE}),h=i3.newInstance(),g=null;t.passPointData&&(g=l.getPointData());for(var v=[],y=0;y<d;y++)c.getPoint(y,v),p.setTuple(y,v),g&&h.passData(g,y,y);var b,x,w,A=cT(),C=lC.newInstance(),S=0,_=0,T=0,O=1,P=[[0,0,0],[0,0,0],[0,0,0]];t.scalarMode===cD.COLORS?(O=3,function(e,t,n,i){for(var o=[e,t,n],a=0;a<3;a++)for(var s=0;s<3;s++)i[a][s]=Math.round(255*Math.min(Math.max(o[a][s],0),1))}(t.baseColor,t.clipColor,t.activePlaneColor,P)):t.scalarMode===cD.LABELS&&(P[0][0]=0,P[1][0]=1,P[2][0]=2);var M,E=(null==(a=l.getVerts())?void 0:a.getNumberOfCells())||0,D=l.getLines(),I=(null==D?void 0:D.getNumberOfCells())||0,k=l.getPolys(),N=(null==k?void 0:k.getNumberOfCells())||0,R=(null==(s=l.getStrips())?void 0:s.getNumberOfCells())||0;if(t.scalarMode!==cD.NONE){b=nH.newInstance({dataType:eI.UNSIGNED_CHAR,empty:!0,numberOfComponents:O});var B=l.getCellData().getScalars();B&&B.getDataType()===eI.UNSIGNED_CHAR&&3===O&&3===B.getNumberOfComponents()&&(w=l.getCellData().getScalars(),S=E,_=E+I,T=E+I+N)}I>0?(M=nQ.newInstance({dataType:D.getDataType(),values:new Uint8Array(3*I),size:0}),function(e,t,n,i,o,a){for(var s,l=m(a),u=0,c=e.getData(),d=0;d<c.length;d+=s+1){s=c[d],n&&n.getTuple(i+u++,l);for(var f=1;f<s;f++)t.insertNextCell([c[d+f],c[d+f+1]]),o&&o.insertNextTuple(l)}}(D,M,w,S,b,P[0])):M=nQ.newInstance({empty:!0});var L=null,F=3;(N>0||R>0)&&(b&&(x=nH.newInstance({dataType:eI.UNSIGNED_CHAR,empty:!0,numberOfComponents:O})),function(e,t,n,i,o,a){if(e&&(t.deepCopy(e),o)){var s=m(a),l=t.getNumberOfCells();if(o.insertTuple(l-1,s),n)for(var u=0;u<l;u++)n.getTuple(u+i,s),o.setTuple(u,s);else for(var c=0;c<l;c++)o.setTuple(c,s)}}(k,L=nQ.newInstance(),w,_,x,P[0]),function(e,t,n,i,o,a){if(0!==e.getNumberOfCells())for(var s,l=e.getData(),u=i,c=0;c<l.length;c+=s+1,u++){s=l[c];for(var d=l[c+1],f=l[c+2],p=0;p<s-2;p++){var h=l[c+p+3];p%2?t.insertNextCell([f,d,h]):t.insertNextCell([d,f,h]),d=f,f=h}if(o){var g=m(a);n&&n.getTuple(u,g);var v=s-3,y=o.getNumberOfTuples();if(v>=0){o.insertTuple(y+v,g);for(var b=0;b<v;b++)o.setTuple(y+b,g)}}}}(l.getStrips(),L,w,T,x,P[0]),F=k.getCellSizes().reduce(function(e,t){return e>t?e:t},0));var V=nQ.newInstance({dataType:M.getDataType(),empty:!0}),j=null;L&&(j=nQ.newInstance({dataType:L.getDataType(),empty:!0}));var G=i3.newInstance();G.copyScalarsOn(),G.setScalars(b);var U=i3.newInstance();U.copyScalarsOn(),U.setScalars(x);var z=i3.newInstance();z.copyScalarsOn();var W=i3.newInstance();W.copyScalarsOn();for(var H=t.clippingPlanes,q=0;q<H.length;q++){var K=H[q],X=5;q===H.length-1&&(X=F);var Y=q===t.activePlaneId,Z=K.getNormal();Z[3]=-tc(Z,K.getOrigin());for(var J=p.getNumberOfPoints(),Q=nH.newInstance({dataType:eI.DOUBLE,size:J}),$=Q.getData(),ee=p.getData(),et=0,en=0;en<J;)$[en++]=ee[et++]*Z[0]+ee[et++]*Z[1]+ee[et++]*Z[2]+Z[3];if(A.initialize(),function(e,i,o,a,s,l,u,c){for(var d,f,p,h,m,g,v,y=[],b=s.getData(),x=0,w=0;w<b.length;w+=d+1,x++){d=b[w],p=b[w+1],v=(m=i.getData()[p])>0;for(var A=2;A<=d;A++)if(f=p,h=m,g=v,p=b[w+A],v=(m=i.getData()[p])>0,(g||v)&&((g?!v:v)&&(y[+!!g]=n(e,o,a,t.tolerance,f,p,h,m)),f!==p)){y[0]=f,y[1]=p;var C=l.insertNextCell(y);c.passData(u,x,C)}}}(p,Q,h,A,M,V,G,z),L){var er,ei,eo=V.getNumberOfCells();!function(e,i,o,a,s,l,u,c,d,f,p){var h=t._idList,m=Number.MAX_VALUE;s&&(s<4?m=3:4===s&&(m=4));for(var g,v=!1,y=l.getData(),b=[],x=0,w=0;w<y.length;w+=g+1,x++){var A=y[w+(g=y[w])],C=i.getData()[A],S=C>0,_=S?A:-1,T=0;b[0]=0,b[1]=0;for(var O=0,P=1;P<=g;P++){var M=A,E=C,D=S;A=y[w+P],S=(C=i.getData()[A])>0,(D||S)&&((D?!S:S)&&((T=n(e,o,a,t.tolerance,M,A,E,C))!==_&&(h[O++]=T,_=T),b[+!!D]=T),S&&(T=A)!==_&&(h[O++]=T,_=T))}var I=O;if(h.length=I,t.triangulatePolys&&I>m){var k=u.getNumberOfCells();cS.triangulatePolygon(h,e,u)||(v=!0);for(var N=u.getNumberOfCells();k<N;k++)f.passData(d,x,k)}else if(I>2){var R=u.insertNextCell(h);f.passData(d,x,R)}if(b[0]!==b[1]){var B=c.insertNextCell(b);p.passData(d,x,B)}}v&&t.triangulationErrorDisplay&&cM("Triangulation failed, output may not be watertight")}(p,Q,h,A,X,L,j,V,U,W,z);var ea=z.getScalars();if(ea)for(var es=P[1+ +!!Y],el=P[2],eu=V.getNumberOfCells(),ec=[],ed=eo;ed<eu;ed++)ea.getTuple(ed,ec),3===O&&ec[0]===el[0]&&ec[1]===el[1]&&ec[2]===el[2]||ea.setTuple(ed,es);var ef=j.getNumberOfCells(),ep=V.getNumberOfCells();if(C.setPoints(p),C.setLines(V),C.buildCells(),er=ep-eo,ei=j,er<=0||!cS.triangulateContours(C,eo,er,ei,[-Z[0],-Z[1],-Z[2]])&&t.triangulationErrorDisplay&&cM("Triangulation failed, polyData may not be watertight."),ea=W.getScalars()){var eh=P[1+ +!!Y],em=j.getNumberOfCells();if(em>ef)for(ea.insertTuple(em-1,eh);ef<em;ef++)ea.setTuple(ef,eh)}if(ea=z.getScalars()){var eg=[0,255,255],ev=V.getNumberOfCells();if(ev>ep){ea.insertTuple(ev-1,eg);for(var ey=ep;ey<ev;ey++)ea.setTuple(ey,eg)}}}var eb=[V,M];if(M=eb[0],(V=eb[1]).initialize(),L){var ex=[j,L];L=ex[0],(j=ex[1]).initialize()}var ew=[z,G];G=ew[0],(z=ew[1]).initialize();var eA=[W,U];U=eA[0],(W=eA[1]).initialize()}var eC=G.getScalars();if(t.generateOutline?u.setLines(M):eC&&eC.initialize(),t.generateFaces&&(u.setPolys(L),L&&eC)){var eS=U.getScalars(),e_=eC.getNumberOfTuples(),eT=eS.getNumberOfTuples();if(eT>0){var eO=[0,0,0];eC.insertTuple(eT+e_-1,eO);for(var eP=0;eP<eT;eP++)eS.getTuple(eP,eO),eC.setTuple(eP+e_,eO)}}if(eC&&t.scalarMode===cD.COLORS)eC.setName("Colors"),u.getCellData().setScalars(eC);else if(t.scalarMode===cD.LABELS){var eM=eC.newClone();eM.setData(eC.getData().slice()),eM.setName("Labels"),u.getCellData().setScalars(eM)}else u.getCellData().setScalars(null);!function(e,t,n,i){var o=t.getNumberOfPoints(),a=0,s=e.getPointData(),l=[];l.length=o;var u=[e.getVerts(),e.getLines(),e.getPolys(),e.getStrips()];u.forEach(function(e){if(e)for(var t,n,i=e.getData(),o=0;o<i.length;o+=t+1){t=i[o];for(var s=1;s<=t;s++)void 0===l[n=i[o+s]]&&(l[n]=a++)}});for(var c,d=a3.newInstance({size:3*a,dataType:i}),f=[],p=0;p<o;p++)void 0!==(c=l[p])&&(t.getPoint(p,f),d.setTuple(c,f),s.passData(n,p,c));u.forEach(function(e){if(e)for(var t,n,i=e.getData(),o=0;o<i.length;o+=t+1){t=i[o];for(var a=1;a<=t;a++)n=i[o+a],i[o+a]=l[n]}}),e.setPoints(d)}(u,p,h,f)}else cM("Invalid or missing input")},Object.keys(cD).forEach(function(n){var i=cE(n.toLowerCase());e["setScalarModeTo".concat(i)]=function(){t.scalarMode=cD[n]}})}(e,t)}var cN=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(ck,"vtkClipClosedSurface"),extend:ck},cO),cR=eE.vtkErrorMacro,cB=function(){function e(){E(this,e),this.segmentMapping={},this.segments=[null],this.faces=[]}return I(e,[{key:"addSegment",value:function(e){var t=e[0],n=e[e.length-1];if(!(t===n||e.length<2)){var i=this.segmentMapping[t],o=this.segmentMapping[n];if(void 0!==i&&void 0!==o)if(Math.abs(i)===Math.abs(o)){var a=i<o?o:i,s=this.segments[a];if(i>0)for(var l=1;l<e.length-1;l++)s.push(e[l]);else for(var u=1;u<e.length-1;u++)s.unshift(e[e.length-1-u]);this.faces.push(s),this.segments[a]=null,this.segmentMapping[t]=void 0,this.segmentMapping[n]=void 0}else{var c=Math.abs(i),d=Math.abs(o),f=this.segments[c],p=this.segments[d];this.segments[c]=null,this.segments[d]=null,this.segmentMapping[f[0]]=void 0,this.segmentMapping[p[0]]=void 0,this.segmentMapping[f[f.length-1]]=void 0,this.segmentMapping[p[p.length-1]]=void 0,this.addSegment(e),this.addSegment(f),this.addSegment(p)}else if(void 0!==i){if(i>0){for(var h=this.segments[i],m=1;m<e.length;m++)h.push(e[m]);this.segmentMapping[n]=i}else{var g=this.segments[-i];this.segmentMapping[n]=i;for(var v=1;v<e.length;v++)g.unshift(e[v])}this.segmentMapping[t]=void 0}else if(void 0!==o){if(o>0){for(var y=this.segments[o],b=1;b<e.length;b++)y.push(e[e.length-1-b]);this.segmentMapping[t]=o}else{var x=this.segments[-o];this.segmentMapping[t]=o;for(var w=1;w<e.length;w++)x.unshift(e[e.length-w-1])}this.segmentMapping[n]=void 0}else{var A=this.segments.length;this.segments.push(e),this.segmentMapping[t]=-A,this.segmentMapping[n]=A}}}}]),e}(),cL={};function cF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cL,n),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),e.requestData=function(e,t){var n,i=e[0];if(i){var o=(null==(n=t[0])?void 0:n.initialize())||lC.newInstance();o.shallowCopy(i);for(var a=new cB,s=i.getLines().getData(),l=0;l<s.length;){for(var u=s[l++],c=[],d=0;d<u;d++)c.push(s[l+d]);a.addSegment(c),l+=u}for(var f=a.faces,p=f.length,h=0;h<f.length;h++)p+=f[h].length;var m=new Uint16Array(p);l=0;for(var g=0;g<f.length;g++){var v=f[g];m[l++]=v.length;for(var y=0;y<v.length;y++)m[l++]=v[y]}o.setPolys(nQ.newInstance({values:m,name:"faces"})),t[0]=o}else cR("Invalid or missing input")}}var cV={newInstance:eE.newInstance(cF,"vtkClosedPolyLineToSurfaceFilter"),extend:cF},cj=eE.vtkErrorMacro,cG={};function cU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cG,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGetArray(e,t,["croppingPlanes"],6),t.classHierarchy.push("vtkImageCropFilter"),e.reset=function(){var t=e.getInputData();t&&e.setCroppingPlanes.apply(e,m(t.getExtent()))},e.requestData=function(e,n){var i,o=e[0];if(o){var a=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance();n[0]=a;var s=o.getPointData().getScalars();if(s){var l=o.getExtent(),u=t.croppingPlanes&&6===t.croppingPlanes.length?l.map(function(e,n){return n%2==0?Math.max(e,Math.round(t.croppingPlanes[n])):Math.min(e,Math.round(t.croppingPlanes[n]))}):l.slice();if(u[0]!==l[0]||u[1]!==l[1]||u[2]!==l[2]||u[3]!==l[3]||u[4]!==l[4]||u[5]!==l[5]){for(var c=0;c<3;++c)if(u[2*c]>u[2*c+1]){var d=[u[2*c+1],u[2*c]];u[2*c]=d[0],u[2*c+1]=d[1]}for(var f=0;f<6;f+=2)u[f]=Math.max(u[f],l[f]),u[f+1]=Math.min(u[f+1],l[f+1]);for(var p=s.getNumberOfComponents(),h=(u[1]-u[0]+1)*(u[3]-u[2]+1)*(u[5]-u[4]+1)*p,m=s.getData(),g=o.getDimensions(),v=p*g[0],y=p*g[0]*g[1],b=(u[0]-l[0])*p,x=(u[1]-u[0]+1)*p,w=new m.constructor(h),A=0,C=u[4];C<=u[5];++C)for(var S=u[2];S<=u[3];++S){var _=b+(S-l[2])*v+(C-l[4])*y,T=_+x,O=m.subarray(_,T);w.set(O,A),A+=O.length}a.setExtent(u),a.setOrigin(o.getOrigin()),a.setSpacing(o.getSpacing()),a.setDirection(o.getDirection());var P=nH.newInstance({name:s.getName(),numberOfComponents:p,values:w});a.getPointData().setScalars(P)}else a.shallowCopy(o)}else cj("No scalars from input")}else cj("Invalid or missing input")},e.isResetAvailable=function(){if(null==t.croppingPlanes||0===t.croppingPlanes.length)return!1;var n=e.getInputData();return!!n&&void 0!==n.getExtent().find(function(e,n){return Math.abs(t.croppingPlanes[n]-e)>Number.EPSILON})}}var cz={newInstance:eE.newInstance(cU,"vtkImageCropFilter"),extend:cU},cW=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,11,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,8,2,8,11,11,8,9,-1,-1,-1,-1,-1,-1,-1],[3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,8,0,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,1,10,9,9,10,8,-1,-1,-1,-1,-1,-1,-1],[3,1,11,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,11,0,11,8,8,11,10,-1,-1,-1,-1,-1,-1,-1],[3,0,9,3,9,10,10,9,11,-1,-1,-1,-1,-1,-1,-1],[9,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,7,4,3,4,0,1,11,2,-1,-1,-1,-1,-1,-1,-1],[9,11,2,9,2,0,8,7,4,-1,-1,-1,-1,-1,-1,-1],[2,9,11,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1],[8,7,4,3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,7,4,10,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1],[9,1,0,8,7,4,2,10,3,-1,-1,-1,-1,-1,-1,-1],[4,10,7,9,10,4,9,2,10,9,1,2,-1,-1,-1,-1],[3,1,11,3,11,10,7,4,8,-1,-1,-1,-1,-1,-1,-1],[1,11,10,1,10,4,1,4,0,7,4,10,-1,-1,-1,-1],[4,8,7,9,10,0,9,11,10,10,3,0,-1,-1,-1,-1],[4,10,7,4,9,10,9,11,10,-1,-1,-1,-1,-1,-1,-1],[9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,11,2,4,5,9,-1,-1,-1,-1,-1,-1,-1],[5,11,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1],[2,5,11,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1],[9,4,5,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,0,10,8,4,5,9,-1,-1,-1,-1,-1,-1,-1],[0,4,5,0,5,1,2,10,3,-1,-1,-1,-1,-1,-1,-1],[2,5,1,2,8,5,2,10,8,4,5,8,-1,-1,-1,-1],[11,10,3,11,3,1,9,4,5,-1,-1,-1,-1,-1,-1,-1],[4,5,9,0,1,8,8,1,11,8,11,10,-1,-1,-1,-1],[5,0,4,5,10,0,5,11,10,10,3,0,-1,-1,-1,-1],[5,8,4,5,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1],[9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1],[0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1],[1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,7,9,7,5,11,2,1,-1,-1,-1,-1,-1,-1,-1],[11,2,1,9,0,5,5,0,3,5,3,7,-1,-1,-1,-1],[8,2,0,8,5,2,8,7,5,11,2,5,-1,-1,-1,-1],[2,5,11,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1],[7,5,9,7,9,8,3,2,10,-1,-1,-1,-1,-1,-1,-1],[9,7,5,9,2,7,9,0,2,2,10,7,-1,-1,-1,-1],[2,10,3,0,8,1,1,8,7,1,7,5,-1,-1,-1,-1],[10,1,2,10,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1],[9,8,5,8,7,5,11,3,1,11,10,3,-1,-1,-1,-1],[5,0,7,5,9,0,7,0,10,1,11,0,10,0,11,-1],[10,0,11,10,3,0,11,0,5,8,7,0,5,0,7,-1],[10,5,11,7,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,1,0,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,1,8,9,5,6,11,-1,-1,-1,-1,-1,-1,-1],[1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,5,6,1,6,2,3,8,0,-1,-1,-1,-1,-1,-1,-1],[9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1],[5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1],[2,10,3,11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,8,0,10,0,2,11,5,6,-1,-1,-1,-1,-1,-1,-1],[0,9,1,2,10,3,5,6,11,-1,-1,-1,-1,-1,-1,-1],[5,6,11,1,2,9,9,2,10,9,10,8,-1,-1,-1,-1],[6,10,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1],[0,10,8,0,5,10,0,1,5,5,6,10,-1,-1,-1,-1],[3,6,10,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1],[6,9,5,6,10,9,10,8,9,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,4,3,7,6,11,5,-1,-1,-1,-1,-1,-1,-1],[1,0,9,5,6,11,8,7,4,-1,-1,-1,-1,-1,-1,-1],[11,5,6,1,7,9,1,3,7,7,4,9,-1,-1,-1,-1],[6,2,1,6,1,5,4,8,7,-1,-1,-1,-1,-1,-1,-1],[1,5,2,5,6,2,3,4,0,3,7,4,-1,-1,-1,-1],[8,7,4,9,5,0,0,5,6,0,6,2,-1,-1,-1,-1],[7,9,3,7,4,9,3,9,2,5,6,9,2,9,6,-1],[3,2,10,7,4,8,11,5,6,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,2,7,4,0,2,2,10,7,-1,-1,-1,-1],[0,9,1,4,8,7,2,10,3,5,6,11,-1,-1,-1,-1],[9,1,2,9,2,10,9,10,4,7,4,10,5,6,11,-1],[8,7,4,3,5,10,3,1,5,5,6,10,-1,-1,-1,-1],[5,10,1,5,6,10,1,10,0,7,4,10,0,10,4,-1],[0,9,5,0,5,6,0,6,3,10,3,6,8,7,4,-1],[6,9,5,6,10,9,4,9,7,7,9,10,-1,-1,-1,-1],[11,9,4,6,11,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,6,11,4,11,9,0,3,8,-1,-1,-1,-1,-1,-1,-1],[11,1,0,11,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1],[8,1,3,8,6,1,8,4,6,6,11,1,-1,-1,-1,-1],[1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,9,2,2,9,4,2,4,6,-1,-1,-1,-1],[0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1],[11,9,4,11,4,6,10,3,2,-1,-1,-1,-1,-1,-1,-1],[0,2,8,2,10,8,4,11,9,4,6,11,-1,-1,-1,-1],[3,2,10,0,6,1,0,4,6,6,11,1,-1,-1,-1,-1],[6,1,4,6,11,1,4,1,8,2,10,1,8,1,10,-1],[9,4,6,9,6,3,9,3,1,10,3,6,-1,-1,-1,-1],[8,1,10,8,0,1,10,1,6,9,4,1,6,1,4,-1],[3,6,10,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1],[6,8,4,10,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,6,11,7,11,8,8,11,9,-1,-1,-1,-1,-1,-1,-1],[0,3,7,0,7,11,0,11,9,6,11,7,-1,-1,-1,-1],[11,7,6,1,7,11,1,8,7,1,0,8,-1,-1,-1,-1],[11,7,6,11,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1],[1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1],[2,9,6,2,1,9,6,9,7,0,3,9,7,9,3,-1],[7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1],[7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,10,3,11,8,6,11,9,8,8,7,6,-1,-1,-1,-1],[2,7,0,2,10,7,0,7,9,6,11,7,9,7,11,-1],[1,0,8,1,8,7,1,7,11,6,11,7,2,10,3,-1],[10,1,2,10,7,1,11,1,6,6,1,7,-1,-1,-1,-1],[8,6,9,8,7,6,9,6,1,10,3,6,1,6,3,-1],[0,1,9,10,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,0,8,7,6,0,3,0,10,10,0,6,-1,-1,-1,-1],[7,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,9,1,8,1,3,10,6,7,-1,-1,-1,-1,-1,-1,-1],[11,2,1,6,7,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,8,0,6,7,10,-1,-1,-1,-1,-1,-1,-1],[2,0,9,2,9,11,6,7,10,-1,-1,-1,-1,-1,-1,-1],[6,7,10,2,3,11,11,3,8,11,8,9,-1,-1,-1,-1],[7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1],[2,6,7,2,7,3,0,9,1,-1,-1,-1,-1,-1,-1,-1],[1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1],[11,6,7,11,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1],[11,6,7,1,11,7,1,7,8,1,8,0,-1,-1,-1,-1],[0,7,3,0,11,7,0,9,11,6,7,11,-1,-1,-1,-1],[7,11,6,7,8,11,8,9,11,-1,-1,-1,-1,-1,-1,-1],[6,4,8,10,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1],[8,10,6,8,6,4,9,1,0,-1,-1,-1,-1,-1,-1,-1],[9,6,4,9,3,6,9,1,3,10,6,3,-1,-1,-1,-1],[6,4,8,6,8,10,2,1,11,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,10,0,0,10,6,0,6,4,-1,-1,-1,-1],[4,8,10,4,10,6,0,9,2,2,9,11,-1,-1,-1,-1],[11,3,9,11,2,3,9,3,4,10,6,3,4,3,6,-1],[8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1],[0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,4,3,2,6,4,4,8,3,-1,-1,-1,-1],[1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1],[8,3,1,8,1,6,8,6,4,6,1,11,-1,-1,-1,-1],[11,0,1,11,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1],[4,3,6,4,8,3,6,3,11,0,9,3,11,3,9,-1],[11,4,9,6,4,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,5,9,7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,5,9,10,6,7,-1,-1,-1,-1,-1,-1,-1],[5,1,0,5,0,4,7,10,6,-1,-1,-1,-1,-1,-1,-1],[10,6,7,8,4,3,3,4,5,3,5,1,-1,-1,-1,-1],[9,4,5,11,2,1,7,10,6,-1,-1,-1,-1,-1,-1,-1],[6,7,10,1,11,2,0,3,8,4,5,9,-1,-1,-1,-1],[7,10,6,5,11,4,4,11,2,4,2,0,-1,-1,-1,-1],[3,8,4,3,4,5,3,5,2,11,2,5,10,6,7,-1],[7,3,2,7,2,6,5,9,4,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,6,8,0,2,6,6,7,8,-1,-1,-1,-1],[3,2,6,3,6,7,1,0,5,5,0,4,-1,-1,-1,-1],[6,8,2,6,7,8,2,8,1,4,5,8,1,8,5,-1],[9,4,5,11,6,1,1,6,7,1,7,3,-1,-1,-1,-1],[1,11,6,1,6,7,1,7,0,8,0,7,9,4,5,-1],[4,11,0,4,5,11,0,11,3,6,7,11,3,11,7,-1],[7,11,6,7,8,11,5,11,4,4,11,8,-1,-1,-1,-1],[6,5,9,6,9,10,10,9,8,-1,-1,-1,-1,-1,-1,-1],[3,10,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1],[0,8,10,0,10,5,0,5,1,5,10,6,-1,-1,-1,-1],[6,3,10,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,10,5,9,8,10,10,6,5,-1,-1,-1,-1],[0,3,10,0,10,6,0,6,9,5,9,6,1,11,2,-1],[10,5,8,10,6,5,8,5,0,11,2,5,0,5,2,-1],[6,3,10,6,5,3,2,3,11,11,3,5,-1,-1,-1,-1],[5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1],[9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1],[1,8,5,1,0,8,5,8,6,3,2,8,6,8,2,-1],[1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,6,3,1,11,6,3,6,8,5,9,6,8,6,9,-1],[11,0,1,11,6,0,9,0,5,5,0,6,-1,-1,-1,-1],[0,8,3,5,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,7,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,10,5,7,8,0,3,-1,-1,-1,-1,-1,-1,-1],[5,7,10,5,10,11,1,0,9,-1,-1,-1,-1,-1,-1,-1],[11,5,7,11,7,10,9,1,8,8,1,3,-1,-1,-1,-1],[10,2,1,10,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,7,2,1,5,7,7,10,2,-1,-1,-1,-1],[9,5,7,9,7,2,9,2,0,2,7,10,-1,-1,-1,-1],[7,2,5,7,10,2,5,2,9,3,8,2,9,2,8,-1],[2,11,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1],[8,0,2,8,2,5,8,5,7,11,5,2,-1,-1,-1,-1],[9,1,0,5,3,11,5,7,3,3,2,11,-1,-1,-1,-1],[9,2,8,9,1,2,8,2,7,11,5,2,7,2,5,-1],[1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1],[9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1],[9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,4,8,5,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1],[5,4,0,5,0,10,5,10,11,10,0,3,-1,-1,-1,-1],[0,9,1,8,11,4,8,10,11,11,5,4,-1,-1,-1,-1],[11,4,10,11,5,4,10,4,3,9,1,4,3,4,1,-1],[2,1,5,2,5,8,2,8,10,4,8,5,-1,-1,-1,-1],[0,10,4,0,3,10,4,10,5,2,1,10,5,10,1,-1],[0,5,2,0,9,5,2,5,10,4,8,5,10,5,8,-1],[9,5,4,2,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,11,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1],[5,2,11,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1],[3,2,11,3,11,5,3,5,8,4,8,5,0,9,1,-1],[5,2,11,5,4,2,1,2,9,9,2,4,-1,-1,-1,-1],[8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1],[0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,5,4,8,3,5,9,5,0,0,5,3,-1,-1,-1,-1],[9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,10,4,10,9,9,10,11,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,7,9,9,7,10,9,10,11,-1,-1,-1,-1],[1,10,11,1,4,10,1,0,4,7,10,4,-1,-1,-1,-1],[3,4,1,3,8,4,1,4,11,7,10,4,11,4,10,-1],[4,7,10,9,4,10,9,10,2,9,2,1,-1,-1,-1,-1],[9,4,7,9,7,10,9,10,1,2,1,10,0,3,8,-1],[10,4,7,10,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1],[10,4,7,10,2,4,8,4,3,3,4,2,-1,-1,-1,-1],[2,11,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1],[9,7,11,9,4,7,11,7,2,8,0,7,2,7,0,-1],[3,11,7,3,2,11,7,11,4,1,0,11,4,11,0,-1],[1,2,11,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,0,1,8,8,1,7,-1,-1,-1,-1],[4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,10,11,9,-1,-1,-1,-1,-1,-1,-1],[0,11,1,0,8,11,8,10,11,-1,-1,-1,-1,-1,-1,-1],[3,11,1,10,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,10,2,1,9,10,9,8,10,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,1,9,2,2,9,10,-1,-1,-1,-1],[0,10,2,8,10,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,11,9,8,-1,-1,-1,-1,-1,-1,-1],[9,2,11,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,0,8,1,1,8,11,-1,-1,-1,-1],[1,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]],cH=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[2,6],[3,7]],cq=eE.vtkErrorMacro,cK=eE.vtkDebugMacro,cX={contourValue:0,computeNormals:!1,mergePoints:!1};function cY(e,t){var n,i,o,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cX,l),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["contourValue","computeNormals","mergePoints"]),eE.algo(e,t,1,1),t.classHierarchy.push("vtkImageMarchingCubes"),n=[],i=[],o=[],a=[],s=cT(),e.getVoxelScalars=function(e,t,o,a,s,l,u,c){n[0]=o*a+t*s[0]+e,n[1]=n[0]+1,n[2]=n[0]+s[0],n[3]=n[2]+1,n[4]=n[0]+a,n[5]=n[4]+1,n[6]=n[4]+s[0],n[7]=n[6]+1;for(var d=0;d<8;++d)i[d]=c[n[d]]},e.getVoxelPoints=function(e,t,n,i,o){a[0]=i[0]+e*o[0],a[1]=i[1]+t*o[1],a[2]=i[2]+n*o[2],a[3]=a[0]+o[0],a[4]=a[1],a[5]=a[2],a[6]=a[0],a[7]=a[1]+o[1],a[8]=a[2],a[9]=a[3],a[10]=a[7],a[11]=a[2],a[12]=a[0],a[13]=a[1],a[14]=a[2]+o[2],a[15]=a[3],a[16]=a[1],a[17]=a[14],a[18]=a[0],a[19]=a[7],a[20]=a[14],a[21]=a[3],a[22]=a[7],a[23]=a[14]},e.getPointGradient=function(e,t,n,i,o,a,s,l){var u,c;0===e?(u=s[e+1+t*i[0]+n*o],c=s[e+t*i[0]+n*o],l[0]=(c-u)/a[0]):e===i[0]-1?(u=s[e+t*i[0]+n*o],c=s[e-1+t*i[0]+n*o],l[0]=(c-u)/a[0]):(u=s[e+1+t*i[0]+n*o],c=s[e-1+t*i[0]+n*o],l[0]=.5*(c-u)/a[0]),0===t?(u=s[e+(t+1)*i[0]+n*o],c=s[e+t*i[0]+n*o],l[1]=(c-u)/a[1]):t===i[1]-1?(u=s[e+t*i[0]+n*o],c=s[e+(t-1)*i[0]+n*o],l[1]=(c-u)/a[1]):(u=s[e+(t+1)*i[0]+n*o],c=s[e+(t-1)*i[0]+n*o],l[1]=.5*(c-u)/a[1]),0===n?(u=s[e+t*i[0]+(n+1)*o],c=s[e+t*i[0]+n*o],l[2]=(c-u)/a[2]):n===i[2]-1?(u=s[e+t*i[0]+n*o],c=s[e+t*i[0]+(n-1)*o],l[2]=(c-u)/a[2]):(u=s[e+t*i[0]+(n+1)*o],c=s[e+t*i[0]+(n-1)*o],l[2]=.5*(c-u)/a[2])},e.getVoxelGradients=function(t,n,i,a,s,l,u){var c=[];e.getPointGradient(t,n,i,a,s,l,u,c),o[0]=c[0],o[1]=c[1],o[2]=c[2],e.getPointGradient(t+1,n,i,a,s,l,u,c),o[3]=c[0],o[4]=c[1],o[5]=c[2],e.getPointGradient(t,n+1,i,a,s,l,u,c),o[6]=c[0],o[7]=c[1],o[8]=c[2],e.getPointGradient(t+1,n+1,i,a,s,l,u,c),o[9]=c[0],o[10]=c[1],o[11]=c[2],e.getPointGradient(t,n,i+1,a,s,l,u,c),o[12]=c[0],o[13]=c[1],o[14]=c[2],e.getPointGradient(t+1,n,i+1,a,s,l,u,c),o[15]=c[0],o[16]=c[1],o[17]=c[2],e.getPointGradient(t,n+1,i+1,a,s,l,u,c),o[18]=c[0],o[19]=c[1],o[20]=c[2],e.getPointGradient(t+1,n+1,i+1,a,s,l,u,c),o[21]=c[0],o[22]=c[1],o[23]=c[2]},e.produceTriangles=function(l,u,c,d,f,p,h,m,g,v,y,b,x){var w,A=[1,2,4,8,16,32,64,128],C=[0,1,3,2,4,5,7,6],S=[],_=[];e.getVoxelScalars(u,c,d,p,h,m,g,v);for(var T=0,O=0;O<8;O++)i[C[O]]>=l&&(T|=A[O]);var P=cW[T];if(!(P[0]<0)){e.getVoxelPoints(u+f[0],c+f[2],d+f[4],m,g),t.computeNormals&&e.getVoxelGradients(u,c,d,h,p,g,v);for(var M=0;P[M]>=0;M+=3){b.push(3);for(var E=0;E<3;E++){var D,I=cH[P[M+E]];if(w=void 0,t.mergePoints&&(w=null==(D=s.isInsertedEdge(n[I[0]],n[I[1]]))?void 0:D.value),void 0===w){var k=(l-i[I[0]])/(i[I[1]]-i[I[0]]),N=a.slice(3*I[0],3*(I[0]+1)),R=a.slice(3*I[1],3*(I[1]+1));if(S[0]=N[0]+k*(R[0]-N[0]),S[1]=N[1]+k*(R[1]-N[1]),S[2]=N[2]+k*(R[2]-N[2]),w=y.length/3,y.push(S[0],S[1],S[2]),t.computeNormals){var B=o.slice(3*I[0],3*(I[0]+1)),L=o.slice(3*I[1],3*(I[1]+1));_[0]=B[0]+k*(L[0]-B[0]),_[1]=B[1]+k*(L[1]-B[1]),_[2]=B[2]+k*(L[2]-B[2]),th(_),x.push(_[0],_[1],_[2])}t.mergePoints&&s.insertEdge(n[I[0]],n[I[1]],w)}b.push(w)}}}},e.requestData=function(n,i){var o,a=n[0];if(a){console.time("mcubes");for(var l=a.getOrigin(),u=a.getSpacing(),c=a.getDimensions(),d=a.getPointData().getScalars().getData(),f=[],p=[],h=[],m=a.getExtent(),g=c[0]*c[1],v=0;v<c[2]-1;++v)for(var y=0;y<c[1]-1;++y)for(var b=0;b<c[0]-1;++b)e.produceTriangles(t.contourValue,b,y,v,m,g,c,l,u,d,f,p,h);s.initialize();var x=(null==(o=i[0])?void 0:o.initialize())||lC.newInstance();if(x.getPoints().setData(new Float32Array(f),3),x.getPolys().setData(new Uint32Array(p)),t.computeNormals){var w=new Float32Array(h),A=nH.newInstance({numberOfComponents:3,values:w,name:"Normals"});x.getPointData().setNormals(A)}i[0]=x,cK("Produced output"),console.timeEnd("mcubes")}else cq("Invalid or missing input")}}var cZ={newInstance:eE.newInstance(cY,"vtkImageMarchingCubes"),extend:cY},cJ=[[-1,-1,-1,-1,-1],[0,3,-1,-1,-1],[1,0,-1,-1,-1],[1,3,-1,-1,-1],[2,1,-1,-1,-1],[0,3,2,1,-1],[2,0,-1,-1,-1],[2,3,-1,-1,-1],[3,2,-1,-1,-1],[0,2,-1,-1,-1],[1,0,3,2,-1],[1,2,-1,-1,-1],[3,1,-1,-1,-1],[0,1,-1,-1,-1],[3,0,-1,-1,-1],[-1,-1,-1,-1,-1]],cQ=[[0,1],[1,3],[2,3],[0,2]],c$=eE.vtkErrorMacro,c0=eE.vtkDebugMacro,c1={contourValues:[],slicingMode:2,slice:0,mergePoints:!1};function c2(e,t){var n,i,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c1,s),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["slicingMode","slice","mergePoints"]),eE.algo(e,t,1,1),t.classHierarchy.push("vtkImageMarchingSquares"),e.getContourValues=function(){return t.contourValues},e.setContourValues=function(n){t.contourValues=n,e.modified()},n=[],i=[],o=[],a=cT(),e.getPixelScalars=function(e,t,o,a,s,l){var u=b(e,3),c=u[0],d=u[1],f=u[2];n[0]=f*t[1]*t[0]+d*t[0]+c,n[1]=n[0]+a[s],n[2]=n[0]+a[l],n[3]=n[2]+a[s];for(var p=0;p<4;++p)i[p]=o[n[p]]},e.getPixelPoints=function(e,t,n,i){var a=m(e);i(a,o),a[t]+=1;var s=i(a,[]);o[3]=s[0],o[4]=s[1],o[5]=s[2],a[n]+=1,i(a,s),o[9]=s[0],o[10]=s[1],o[11]=s[2],a[t]-=1,i(a,s),o[6]=s[0],o[7]=s[1],o[8]=s[2]},e.produceLines=function(s,l,u,c,d,f,p,h,m,g){var v,y=[1,2,8,4],b=[];e.getPixelScalars(l,u,c,p,h,m);for(var x=0,w=0;w<4;w++)i[w]>=s&&(x|=y[w]);var A=cJ[x];if(!(A[0]<0)){e.getPixelPoints(l,h,m,g);for(var C=0;A[C]>=0;C+=2){f.push(2);for(var S=0;S<2;S++){var _,T=cQ[A[C+S]];if(v=void 0,t.mergePoints&&(v=null==(_=a.isInsertedEdge(n[T[0]],n[T[1]]))?void 0:_.value),void 0===v){var O=(s-i[T[0]])/(i[T[1]]-i[T[0]]),P=o.slice(3*T[0],3*(T[0]+1)),M=o.slice(3*T[1],3*(T[1]+1));b[0]=P[0]+O*(M[0]-P[0]),b[1]=P[1]+O*(M[1]-P[1]),b[2]=P[2]+O*(M[2]-P[2]),v=d.length/3,d.push(b[0],b[1],b[2]),t.mergePoints&&a.insertEdge(n[T[0]],n[T[1]],v)}f.push(v)}}}},e.requestData=function(n,i){var o,s=n[0];if(s)if(null==t.slicingMode||t.slicingMode<0||t.slicingMode>2)c$("Invalid or missing slicing mode");else{console.time("msquares");var l,u,c=s.getDimensions(),d=s.getExtent(),f=s.computeIncrements(d),p=s.getPointData().getScalars().getData(),h=b((l=0,u=1,1===t.slicingMode?(l=0,u=2):0===t.slicingMode&&(l=1,u=2),[l,u]),2),m=h[0],g=h[1],v=s.indexToWorld,y=[],x=[],w=Math.round(t.slice);w>=c[t.slicingMode]&&(w=0);var A=[0,0,0];A[t.slicingMode]=w;for(var C=0;C<t.contourValues.length;++C){for(var S=0;S<c[g]-1;++S){A[g]=S;for(var _=0;_<c[m]-1;++_)A[m]=_,e.produceLines(t.contourValues[C],A,c,p,y,x,f,m,g,v)}a.initialize()}var T=(null==(o=i[0])?void 0:o.initialize())||lC.newInstance();T.getPoints().setData(new Float32Array(y),3),T.getLines().setData(new Uint32Array(x)),i[0]=T,c0("Produced output"),console.timeEnd("msquares")}else c$("Invalid or missing input")}}var c3={newInstance:eE.newInstance(c2,"vtkImageMarchingSquares"),extend:c2},c4=eE.vtkErrorMacro,c5={slicingMode:2,background:0};function c6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c5,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["slicingMode","background"]),t.classHierarchy.push("vtkImageOutlineFilter"),e.requestData=function(e,n){var i,o=e[0];if(o&&"vtkImageData"===o.getClassName()){var a=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance();a.set(o.get("spacing","origin","direction"));var s=o.getDimensions();a.setDimensions(s),a.computeTransforms();var l=new Uint8Array(o.getNumberOfPoints()),u=o.getPointData().getScalars().getData(),c=0,d=1;1===t.slicingMode?(c=0,d=2):0===t.slicingMode&&(c=1,d=2),u.forEach(function(e,n){if(e!==t.background){for(var i=((p=[0,0,0])[0]=n%s[0],p[1]=Math.floor(n/s[0])%s[1],p[2]=Math.floor(n/(s[0]*s[1])),p),o=!1,a=-1;a<=1&&!o;a++)for(var f=-1;f<=1&&!o;f++){var p,h,m=a,g=f,v=0;1===t.slicingMode?(m=a,g=0,v=f):0===t.slicingMode&&(m=0,g=f,v=a);var y=i[c]+m,b=i[d]+g;y>=0&&y<s[c]&&b>=0&&b<s[d]&&u[h=[i[0]+m,i[1]+g,i[2]+v],h[0]+h[1]*s[0]+h[2]*s[0]*s[1]]!==e&&(o=!0)}l[n]=o?e:t.background}else l[n]=t.background});var f=nH.newInstance({numberOfComponents:1,values:l});a.getPointData().setScalars(f),n[0]=a}else c4("Invalid or missing input")}}var c8={newInstance:eE.newInstance(c6,"vtkImageOutlineFilter"),extend:c6},c9=eE.vtkErrorMacro,c7={sliceIndex:0};function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c7,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["sliceIndex","orientation"]),t.classHierarchy.push("vtkImageSliceFilter"),e.requestData=function(e,n){var i,o=e[0];if(o){var a=o.getPointData().getScalars();if(a){var s=o.get("extent","spacing","origin");s.extent[4]=t.sliceIndex,s.extent[5]=s.extent[4];var l=a.getNumberOfComponents(),u=(s.extent[1]-s.extent[0]+1)*(s.extent[3]-s.extent[2]+1)*l,c=u*t.sliceIndex,d=a.getData().slice(c,c+u),f=nH.newInstance({name:a.getName(),numberOfComponents:l,values:d}),p=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance();p.set(s),p.getPointData().setScalars(f),n[0]=p}else c9("No scalars from input")}else c9("Invalid or missing input")}}var dt={newInstance:eE.newInstance(de,"vtkImageSliceFilter"),extend:de},dn=eE.vtkErrorMacro,dr={integrationStep:1,maximumNumberOfSteps:1e3};function di(e,t){var n,i,o,a,s,l,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dr,c),eE.obj(e,t),eE.algo(e,t,2,1),eE.setGet(e,t,["integrationStep","maximumNumberOfSteps"]),t.classHierarchy.push("vtkImageStreamline"),n=new Int32Array(3),i=new Float32Array(3),o=new Float32Array(8),a=new Uint32Array(8),s=new Uint32Array(3),l=new Float32Array(3),u=new Float32Array(3),e.interpolationFunctions=function(e,t){var n=e[0],i=e[1],o=e[2],a=1-n,s=1-i,l=1-o;t[0]=a*s*l,t[1]=n*s*l,t[2]=a*i*l,t[3]=n*i*l,t[4]=a*s*o,t[5]=n*s*o,t[6]=a*i*o,t[7]=n*i*o},e.computeStructuredCoordinates=function(e,t,n,i,o,a,s){for(var l=!0,u=0;u<3;u++){var c=(e[u]-a[u])/o[u];t[u]=Math.floor(c),n[u]=c-t[u];var d=!1,f=i[2*u],p=i[2*u+1];if(f===p){var h=e[u]-s[2*u];h*h<=o[u]*o[u]*1e-12&&(n[u]=0,t[u]=f,d=!0)}else t[u]<f?(o[u]>=0&&e[u]>=s[2*u]||o[u]<0&&e[u]<=s[2*u+1])&&(n[u]=0,t[u]=f,d=!0):t[u]>=p?(o[u]>=0&&e[u]<=s[2*u+1]||o[u]<0&&e[u]>=s[2*u])&&(n[u]=1,t[u]=p-1,d=!0):d=!0;l=l&&d}return l},e.getVoxelIndices=function(e,t,n){n[0]=e[2]*t[0]*t[1]+e[1]*t[0]+e[0],n[1]=n[0]+1,n[2]=n[0]+t[0],n[3]=n[2]+1,n[4]=n[0]+t[0]*t[1],n[5]=n[4]+1,n[6]=n[4]+t[0],n[7]=n[6]+1},e.vectorAt=function(t,l,u,c){if(!e.computeStructuredCoordinates(t,n,i,u.getExtent(),u.getSpacing(),u.getOrigin(),u.getBounds()))return!1;e.interpolationFunctions(i,o);var d=u.getExtent();s[0]=d[1]-d[0]+1,s[1]=d[3]-d[2]+1,s[2]=d[5]-d[4]+1,e.getVoxelIndices(n,s,a),c[0]=0,c[1]=0,c[2]=0;for(var f=[,,,],p=0;p<8;p++){l.getTuple(a[p],f);for(var h=0;h<3;h++)c[h]+=o[p]*f[h]}return!0},e.computeNextStep=function(t,n,i,o){if(!e.vectorAt(o,t,n,l))return!1;for(var a=0;a<3;a++)u[a]=o[a]+i/2*l[a];if(!e.vectorAt(u,t,n,l))return!1;for(var s=0;s<3;s++)o[s]+=i*l[s];return!!e.vectorAt(o,t,n,l)},e.streamIntegrate=function(n,i,o,a){var s=[],l=t.maximumNumberOfSteps,u=t.integrationStep,c=new Float32Array(3);c[0]=o[0],c[1]=o[1],c[2]=o[2];var d=[],f=0;for(f=0;f<l&&e.computeNextStep(n,i,u,c);f++)for(var p=0;p<3;p++)d[3*f+p]=c[p];var h=lC.newInstance(),m=new Float32Array(d);s[0]=m,h.getPoints().setData(m,3);var g=m.length/3,v=new Uint32Array(g+1);v[0]=g;for(var y=0;y<g;y++)v[y+1]=y+a;return s[1]=v,h.getLines().setData(v),s},e.requestData=function(t,n){var i,o=t[0],a=t[1];if(o)if(a){for(var s=a.getPoints(),l=s.getNumberOfPoints(),u=0,c=[],d=o.getPointData().getVectors(),f=[],p=0;p<l;p++){s.getTuple(p,f);var h=e.streamIntegrate(d,o,f,u);u+=h[0].length/3,c.push(h)}var m=0,g=0;c.forEach(function(e){m+=e[1].length,g+=e[0].length}),u=0;var v=0,y=new Uint32Array(m),b=new Float32Array(g);c.forEach(function(e){y.set(e[1],u),u+=e[1].length,b.set(e[0],v),v+=e[0].length});var x=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();x.getPoints().setData(b,3),x.getLines().setData(y),n[0]=x}else dn("Invalid or missing seeds");else dn("Invalid or missing input")}}var da={newInstance:eE.newInstance(di,"vtkImageStreamline"),extend:di},ds={};function dl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ds,n),eE.setGet(e,t,[]),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkLineFilter"),e.requestData=function(e,t){var n,i=(null==(n=t[0])?void 0:n.initialize())||lC.newInstance();i.getPoints().setData(e[0].getPoints().getData()),i.getLines().setData(e[0].getLines().getData()),t[0]=i}}var du={newInstance:eE.newInstance(dl,"vtkLineFilter"),extend:dl},dc=JSON.parse('{"F":[{"id":"Xx","atomicNumber":0,"mass":0,"exactMass":0,"radiusCovalent":0,"radiusVDW":0,"symbol":"Xx","name":"Dummy","elementColor":[0.07,0.5,0.7]},{"id":"H","atomicNumber":1,"mass":1.00794,"exactMass":1.007825032,"ionization":13.5984,"electronAffinity":0.75420375,"electronegativityPauling":2.2,"nameOrigin":"Greek \'hydro\' and \'gennao\' for \'forms water\'","radiusCovalent":0.37,"radiusVDW":1.2,"boilingpoint":20.28,"meltingpoint":14.01,"periodTableBlock":"s","discoveryDate":"1766","period":"1","group":"1","electronicConfiguration":"1s1","family":"Non-Metal","symbol":"H","name":"Hydrogen","elementColor":[1,1,1],"discoveryCountry":["uk"],"discoverers":["C.","Cavendish"]},{"id":"He","atomicNumber":2,"mass":4.002602,"exactMass":4.002603254,"ionization":24.5874,"electronAffinity":0,"nameOrigin":"The Greek word for the sun was \'helios\'","radiusCovalent":0.32,"radiusVDW":1.4,"boilingpoint":4.216,"meltingpoint":0.95,"periodTableBlock":"p","discoveryDate":"1895","period":"1","group":"8","electronicConfiguration":"1s2","family":"Noblegas","symbol":"He","name":"Helium","elementColor":[0.85,1,1],"discoveryCountry":["se","uk"],"discoverers":["P. J. Janssen","J. N. Lockyer"]},{"id":"Li","atomicNumber":3,"mass":6.941,"exactMass":7.01600455,"ionization":5.3917,"electronAffinity":0.618049,"electronegativityPauling":0.98,"nameOrigin":"Greek \'lithos\' means \'stone\'","radiusCovalent":1.34,"radiusVDW":2.2,"boilingpoint":1615,"meltingpoint":453.7,"periodTableBlock":"s","discoveryDate":"1817","period":"2","group":"1","electronicConfiguration":"He 2s1","family":"Alkali_Earth","symbol":"Li","name":"Lithium","elementColor":[0.8,0.5,1],"discoveryCountry":["se"],"discoverers":["A.","Arfvedson"]},{"id":"Be","atomicNumber":4,"mass":9.012182,"exactMass":9.0121822,"ionization":9.3227,"electronAffinity":0,"electronegativityPauling":1.57,"nameOrigin":"Greek \'beryllos\' for \'light-green stone\'","radiusCovalent":0.9,"radiusVDW":1.9,"boilingpoint":3243,"meltingpoint":1560,"periodTableBlock":"s","discoveryDate":"1797","period":"2","group":"2","electronicConfiguration":"He 2s2","family":"Alkaline_Earth","symbol":"Be","name":"Beryllium","elementColor":[0.76,1,0],"discoveryCountry":["fr"],"discoverers":["Nicholas","Louis","Vauquelin"]},{"id":"B","atomicNumber":5,"mass":10.811,"exactMass":11.0093054,"ionization":8.298,"electronAffinity":0.279723,"electronegativityPauling":2.04,"nameOrigin":"Boron means \'Bor(ax) + (carb)on\'. It is found in borax and behaves a lot like carbon","radiusCovalent":0.82,"radiusVDW":1.8,"boilingpoint":4275,"meltingpoint":2365,"periodTableBlock":"p","discoveryDate":"1808","period":"2","group":"3","electronicConfiguration":"He 2s2 2p1","family":"Metalloids","symbol":"B","name":"Boron","elementColor":[1,0.71,0.71],"discoveryCountry":["uk","fr"],"discoverers":["Louis Joseph Gay-Lussac","Louis Jacques Thenard"]},{"id":"C","atomicNumber":6,"mass":12.0107,"exactMass":12,"ionization":11.2603,"electronAffinity":1.262118,"electronegativityPauling":2.55,"nameOrigin":"Latin \'carboneum\' for carbon","radiusCovalent":0.77,"radiusVDW":1.7,"boilingpoint":5100,"meltingpoint":3825,"periodTableBlock":"p","discoveryDate":"0","period":"2","group":"4","electronicConfiguration":"He 2s2 2p2","family":"Non-Metal","symbol":"C","name":"Carbon","elementColor":[0.5,0.5,0.5],"discoveryCountry":["ancient"]},{"id":"N","atomicNumber":7,"mass":14.0067,"exactMass":14.003074,"ionization":14.5341,"electronAffinity":-0.07,"electronegativityPauling":3.04,"nameOrigin":"Latin \'nitrogenium\' (\'forms saltpeter\')","radiusCovalent":0.75,"radiusVDW":1.6,"boilingpoint":77.344,"meltingpoint":63.15,"periodTableBlock":"p","discoveryDate":"1772","period":"2","group":"5","electronicConfiguration":"He 2s2 2p3","family":"Non-Metal","symbol":"N","name":"Nitrogen","elementColor":[0.05,0.05,1],"discoveryCountry":["uk"],"discoverers":["D.","Rutherford"]},{"id":"O","atomicNumber":8,"mass":15.9994,"exactMass":15.99491462,"ionization":13.6181,"electronAffinity":1.461112,"electronegativityPauling":3.44,"nameOrigin":"Latin \'oxygenium\' (forms acids)","radiusCovalent":0.73,"radiusVDW":1.55,"boilingpoint":90.188,"meltingpoint":54.8,"periodTableBlock":"p","discoveryDate":"1774","period":"2","group":"6","electronicConfiguration":"He 2s2 2p4","family":"Non-Metal","symbol":"O","name":"Oxygen","elementColor":[1,0.05,0.05],"discoveryCountry":["se","uk"],"discoverers":["J.","Priestley"]},{"id":"F","atomicNumber":9,"mass":18.9984032,"exactMass":18.99840322,"ionization":17.4228,"electronAffinity":3.4011887,"electronegativityPauling":3.98,"nameOrigin":"Latin \'fluere\' (\'floats\')","radiusCovalent":0.71,"radiusVDW":1.5,"boilingpoint":85,"meltingpoint":53.55,"periodTableBlock":"p","discoveryDate":"1886","period":"2","group":"7","electronicConfiguration":"He 2s2 2p5","family":"Halogen","symbol":"F","name":"Fluorine","elementColor":[0.7,1,1],"discoveryCountry":["fr"],"discoverers":["H.","F.","Moissan"]},{"id":"Ne","atomicNumber":10,"mass":20.1797,"exactMass":19.99244018,"ionization":21.5645,"electronAffinity":0,"nameOrigin":"Greek \'neo\'. meaning \'new\'","radiusCovalent":0.69,"radiusVDW":1.54,"boilingpoint":27.1,"meltingpoint":24.55,"periodTableBlock":"p","discoveryDate":"1898","period":"2","group":"8","electronicConfiguration":"He 2s2 2p6","family":"Noblegas","symbol":"Ne","name":"Neon","elementColor":[0.7,0.89,0.96],"discoveryCountry":["uk"],"discoverers":["W. Ramsay","M.W. Travers"]},{"id":"Na","atomicNumber":11,"mass":22.98976928,"exactMass":22.98976928,"ionization":5.1391,"electronAffinity":0.547926,"electronegativityPauling":0.93,"nameOrigin":"Arabic \'natrun\' for \'soda\'","radiusCovalent":1.54,"radiusVDW":2.4,"boilingpoint":1156,"meltingpoint":371,"periodTableBlock":"s","discoveryDate":"1807","period":"3","group":"1","electronicConfiguration":"Ne 3s1","family":"Alkali_Earth","symbol":"Na","name":"Sodium","elementColor":[0.67,0.36,0.95],"discoveryCountry":["uk"],"discoverers":["Sir","Humphrey","Davy"]},{"id":"Mg","atomicNumber":12,"mass":24.305,"exactMass":23.9850417,"ionization":7.6462,"electronAffinity":0,"electronegativityPauling":1.31,"nameOrigin":"Named after the city of Magnesia","radiusCovalent":1.3,"radiusVDW":2.2,"boilingpoint":1380,"meltingpoint":922,"periodTableBlock":"s","discoveryDate":"1808","period":"3","group":"2","electronicConfiguration":"Ne 3s2","family":"Alkaline_Earth","symbol":"Mg","name":"Magnesium","elementColor":[0.54,1,0],"discoveryCountry":["uk"],"discoverers":["H.","B.","Davy"]},{"id":"Al","atomicNumber":13,"mass":26.9815386,"exactMass":26.98153863,"ionization":5.9858,"electronAffinity":0.43283,"electronegativityPauling":1.61,"nameOrigin":"Latin \'alumen\'","radiusCovalent":1.18,"radiusVDW":2.1,"boilingpoint":2740,"meltingpoint":933.5,"periodTableBlock":"p","discoveryDate":"1825","period":"3","group":"3","electronicConfiguration":"Ne 3s2 3p1","family":"Other_Metal","symbol":"Al","name":"Aluminium","elementColor":[0.75,0.65,0.65],"discoveryCountry":["dk"],"discoverers":["H.","Ch.","Oersted"]},{"id":"Si","atomicNumber":14,"mass":28.0855,"exactMass":27.97692653,"ionization":8.1517,"electronAffinity":1.389521,"electronegativityPauling":1.9,"nameOrigin":"Latin \'silex\'","radiusCovalent":1.11,"radiusVDW":2.1,"boilingpoint":2630,"meltingpoint":1683,"periodTableBlock":"p","discoveryDate":"1823","period":"3","group":"4","electronicConfiguration":"Ne 3s2 3p2","family":"Metalloids","symbol":"Si","name":"Silicon","elementColor":[0.5,0.6,0.6],"discoveryCountry":["se"],"discoverers":["J.","J.","Berzelius"]},{"id":"P","atomicNumber":15,"mass":30.973762,"exactMass":30.97376163,"ionization":10.4867,"electronAffinity":0.7465,"electronegativityPauling":2.19,"nameOrigin":"Greek \'phosphoros\' for \'carries light\'","radiusCovalent":1.06,"radiusVDW":1.95,"boilingpoint":553,"meltingpoint":317.3,"periodTableBlock":"p","discoveryDate":"1669","period":"3","group":"5","electronicConfiguration":"Ne 3s2 3p3","family":"Non-Metal","symbol":"P","name":"Phosphorus","elementColor":[1,0.5,0],"discoveryCountry":["de"],"discoverers":["H.","Brandt"]},{"id":"S","atomicNumber":16,"mass":32.065,"exactMass":31.972071,"ionization":10.36,"electronAffinity":2.0771029,"electronegativityPauling":2.58,"nameOrigin":"In sanskrit \'sweb\' means \'to sleep\'","radiusCovalent":1.02,"radiusVDW":1.8,"boilingpoint":717.82,"meltingpoint":392.2,"periodTableBlock":"p","discoveryDate":"0","period":"3","group":"6","electronicConfiguration":"Ne 3s2 3p4","family":"Non-Metal","symbol":"S","name":"Sulfur","elementColor":[1,1,0.19],"discoveryCountry":["ancient"]},{"id":"Cl","atomicNumber":17,"mass":35.453,"exactMass":34.96885268,"ionization":12.9676,"electronAffinity":3.612724,"electronegativityPauling":3.16,"nameOrigin":"Greek \'chloros\' for \'yellow-green\'","radiusCovalent":0.99,"radiusVDW":1.8,"boilingpoint":239.18,"meltingpoint":172.17,"periodTableBlock":"p","discoveryDate":"1774","period":"3","group":"7","electronicConfiguration":"Ne 3s2 3p5","family":"Halogen","symbol":"Cl","name":"Chlorine","elementColor":[0.12,0.94,0.12],"discoveryCountry":["se"],"discoverers":["C.","W.","Scheele"]},{"id":"Ar","atomicNumber":18,"mass":39.948,"exactMass":39.96238312,"ionization":15.7596,"electronAffinity":0,"nameOrigin":"Greek \'aergon\' for \'inactive\'","radiusCovalent":0.97,"radiusVDW":1.88,"boilingpoint":87.45,"meltingpoint":83.95,"periodTableBlock":"p","discoveryDate":"1894","period":"3","group":"8","electronicConfiguration":"Ne 3s2 3p6","family":"Noblegas","symbol":"Ar","name":"Argon","elementColor":[0.5,0.82,0.89],"discoveryCountry":["uk"],"discoverers":["W. Ramsay","J. Rayleigh"]},{"id":"K","atomicNumber":19,"mass":39.0983,"exactMass":38.96370668,"ionization":4.3407,"electronAffinity":0.501459,"electronegativityPauling":0.82,"nameOrigin":"Arabic \'al qaliy\' for potash","radiusCovalent":1.96,"radiusVDW":2.8,"boilingpoint":1033,"meltingpoint":336.8,"periodTableBlock":"s","discoveryDate":"1807","period":"4","group":"1","electronicConfiguration":"Ar 4s1","family":"Alkali_Earth","symbol":"K","name":"Potassium","elementColor":[0.56,0.25,0.83],"discoveryCountry":["uk"],"discoverers":["H.","B.","Davy"]},{"id":"Ca","atomicNumber":20,"mass":40.078,"exactMass":39.96259098,"ionization":6.1132,"electronAffinity":0.02455,"electronegativityPauling":1,"nameOrigin":"Latin \'calx\' for \'lime\'","radiusCovalent":1.74,"radiusVDW":2.4,"boilingpoint":1757,"meltingpoint":1112,"periodTableBlock":"s","discoveryDate":"1808","period":"4","group":"2","electronicConfiguration":"Ar 4s2","family":"Alkaline_Earth","symbol":"Ca","name":"Calcium","elementColor":[0.24,1,0],"discoveryCountry":["uk"],"discoverers":["H.","B.","Davy"]},{"id":"Sc","atomicNumber":21,"mass":44.955912,"exactMass":44.9559119,"ionization":6.5615,"electronAffinity":0.188,"electronegativityPauling":1.36,"nameOrigin":"Named because it was found in Scandinavia","radiusCovalent":1.44,"radiusVDW":2.3,"boilingpoint":3109,"meltingpoint":1814,"periodTableBlock":"d","discoveryDate":"1879","period":"4","group":"3","electronicConfiguration":"Ar 3d1 4s2","family":"Transition","symbol":"Sc","name":"Scandium","elementColor":[0.9,0.9,0.9],"discoveryCountry":["se"],"discoverers":["L.","Nilson"]},{"id":"Ti","atomicNumber":22,"mass":47.867,"exactMass":47.9479463,"ionization":6.8281,"electronAffinity":0.084,"electronegativityPauling":1.54,"nameOrigin":"The Titans were giants in Greek mythology","radiusCovalent":1.36,"radiusVDW":2.15,"boilingpoint":3560,"meltingpoint":1935,"periodTableBlock":"d","discoveryDate":"1791","period":"4","group":"4","electronicConfiguration":"Ar 3d2 4s2","family":"Transition","symbol":"Ti","name":"Titanium","elementColor":[0.75,0.76,0.78],"discoveryCountry":["uk"],"discoverers":["W.","Gregor"]},{"id":"V","atomicNumber":23,"mass":50.9415,"exactMass":50.9439595,"ionization":6.7462,"electronAffinity":0.525,"electronegativityPauling":1.63,"nameOrigin":"\'Vanadis\' is another name for the Nordic goddess Freyja","radiusCovalent":1.25,"radiusVDW":2.05,"boilingpoint":3650,"meltingpoint":2163,"periodTableBlock":"d","discoveryDate":"1830","period":"4","group":"5","electronicConfiguration":"Ar 3d3 4s2","family":"Transition","symbol":"V","name":"Vanadium","elementColor":[0.65,0.65,0.67],"discoveryCountry":["se"],"discoverers":["N.","Sefstr\xf6m"]},{"id":"Cr","atomicNumber":24,"mass":51.9961,"exactMass":51.9405075,"ionization":6.7665,"electronAffinity":0.67584,"electronegativityPauling":1.66,"nameOrigin":"Greek \'chroma\' means \'color\'","radiusCovalent":1.27,"radiusVDW":2.05,"boilingpoint":2945,"meltingpoint":2130,"periodTableBlock":"d","discoveryDate":"1797","period":"4","group":"6","electronicConfiguration":"Ar 3d5 4s1","family":"Transition","symbol":"Cr","name":"Chromium","elementColor":[0.54,0.6,0.78],"discoveryCountry":["fr"],"discoverers":["Nicholas","Louis","Vauquelin"]},{"id":"Mn","atomicNumber":25,"mass":54.938045,"exactMass":54.9380451,"ionization":7.434,"electronAffinity":0,"electronegativityPauling":1.55,"nameOrigin":"It was discovered near a town named Magnesia in black earth. Thus, it was named \'magnesia nigra\', or for short, Manganese.","radiusCovalent":1.39,"radiusVDW":2.05,"boilingpoint":2235,"meltingpoint":1518,"periodTableBlock":"d","discoveryDate":"1774","period":"4","group":"7","electronicConfiguration":"Ar 3d5 4s2","family":"Transition","symbol":"Mn","name":"Manganese","elementColor":[0.61,0.48,0.78],"discoveryCountry":["se"],"discoverers":["C.","W.","Scheele"]},{"id":"Fe","atomicNumber":26,"mass":55.845,"exactMass":55.9349375,"ionization":7.9024,"electronAffinity":0.151,"electronegativityPauling":1.83,"nameOrigin":"Latin \'ferrum\'","radiusCovalent":1.25,"radiusVDW":2.05,"boilingpoint":3023,"meltingpoint":1808,"periodTableBlock":"d","discoveryDate":"0","period":"4","group":"8","electronicConfiguration":"Ar 3d6 4s2","family":"Transition","symbol":"Fe","name":"Iron","elementColor":[0.5,0.48,0.78],"discoveryCountry":["ancient"]},{"id":"Co","atomicNumber":27,"mass":58.933195,"exactMass":58.933195,"ionization":7.881,"electronAffinity":0.6633,"electronegativityPauling":1.88,"nameOrigin":"Named after the German word \'Kobold\' for \'goblin\'","radiusCovalent":1.26,"radiusVDW":2,"boilingpoint":3143,"meltingpoint":1768,"periodTableBlock":"d","discoveryDate":"1737","period":"4","group":"8","electronicConfiguration":"Ar 3d7 4s2","family":"Transition","symbol":"Co","name":"Cobalt","elementColor":[0.44,0.48,0.78],"discoveryCountry":["se"],"discoverers":["G.","Brandt"]},{"id":"Ni","atomicNumber":28,"mass":58.6934,"exactMass":57.9353429,"ionization":7.6398,"electronAffinity":1.15716,"electronegativityPauling":1.91,"nameOrigin":"\'Nickel\' was the name of a mountain goblin","radiusCovalent":1.21,"radiusVDW":2,"boilingpoint":3005,"meltingpoint":1726,"periodTableBlock":"d","discoveryDate":"1751","period":"4","group":"8","electronicConfiguration":"Ar 3d8 4s2","family":"Transition","symbol":"Ni","name":"Nickel","elementColor":[0.36,0.48,0.76],"discoveryCountry":["se"],"discoverers":["A.","F.","Cronstedt"]},{"id":"Cu","atomicNumber":29,"mass":63.546,"exactMass":62.9295975,"ionization":7.7264,"electronAffinity":1.23578,"electronegativityPauling":1.9,"nameOrigin":"Greek \'cuprum\' for Cypres","radiusCovalent":1.38,"radiusVDW":2,"boilingpoint":2840,"meltingpoint":1356.6,"periodTableBlock":"d","discoveryDate":"0","period":"4","group":"1","electronicConfiguration":"Ar 3d10 4s1","family":"Transition","symbol":"Cu","name":"Copper","elementColor":[1,0.48,0.38],"discoveryCountry":["ancient"]},{"id":"Zn","atomicNumber":30,"mass":65.38,"exactMass":63.9291422,"ionization":9.3942,"electronAffinity":0,"electronegativityPauling":1.65,"nameOrigin":"German \'zinking\' for \'rough\', because zinc ore is very rough","radiusCovalent":1.31,"radiusVDW":2.1,"boilingpoint":1180,"meltingpoint":692.73,"periodTableBlock":"d","discoveryDate":"1746","period":"4","group":"2","electronicConfiguration":"Ar 3d10 4s2","family":"Transition","symbol":"Zn","name":"Zinc","elementColor":[0.49,0.5,0.69],"discoveryCountry":["de"],"discoverers":["Andreas","Marggraf"]},{"id":"Ga","atomicNumber":31,"mass":69.723,"exactMass":68.9255736,"ionization":5.9993,"electronAffinity":0.41,"electronegativityPauling":1.81,"nameOrigin":"\'Gallia\' is an old name for France","radiusCovalent":1.26,"radiusVDW":2.1,"boilingpoint":2478,"meltingpoint":302.92,"periodTableBlock":"p","discoveryDate":"1875","period":"4","group":"3","electronicConfiguration":"Ar 3d10 4s2 4p1","family":"Other_Metal","symbol":"Ga","name":"Gallium","elementColor":[0.76,0.56,0.56],"discoveryCountry":["fr"],"discoverers":["P.","E.","Lecoq","de","Boisbaudran"]},{"id":"Ge","atomicNumber":32,"mass":72.64,"exactMass":73.9211778,"ionization":7.8994,"electronAffinity":1.232712,"electronegativityPauling":2.01,"nameOrigin":"Latin \'germania\' is an old name for Germany","radiusCovalent":1.22,"radiusVDW":2.1,"boilingpoint":3107,"meltingpoint":1211.5,"periodTableBlock":"p","discoveryDate":"1886","period":"4","group":"4","electronicConfiguration":"Ar 3d10 4s2 4p2","family":"Metalloids","symbol":"Ge","name":"Germanium","elementColor":[0.4,0.56,0.56],"discoveryCountry":["de"],"discoverers":["C.","A.","Winkler"]},{"id":"As","atomicNumber":33,"mass":74.9216,"exactMass":74.9215965,"ionization":9.7886,"electronAffinity":0.814,"electronegativityPauling":2.18,"nameOrigin":"Greek \'arsenikos\' for \'male\' or \'bold\'","radiusCovalent":1.19,"radiusVDW":2.05,"boilingpoint":876,"meltingpoint":1090,"periodTableBlock":"p","discoveryDate":"0","period":"4","group":"5","electronicConfiguration":"Ar 3d10 4s2 4p3","family":"Metalloids","symbol":"As","name":"Arsenic","elementColor":[0.74,0.5,0.89],"discoveryCountry":["ancient"]},{"id":"Se","atomicNumber":34,"mass":78.96,"exactMass":79.9165213,"ionization":9.7524,"electronAffinity":2.02067,"electronegativityPauling":2.55,"nameOrigin":"Greek \'selena\' for \'moon\'","radiusCovalent":1.16,"radiusVDW":1.9,"boilingpoint":958,"meltingpoint":494,"periodTableBlock":"p","discoveryDate":"1817","period":"4","group":"6","electronicConfiguration":"Ar 3d10 4s2 4p4","family":"Non-Metal","symbol":"Se","name":"Selenium","elementColor":[1,0.63,0],"discoveryCountry":["se"],"discoverers":["J.","J.","Berzelius"]},{"id":"Br","atomicNumber":35,"mass":79.904,"exactMass":78.9183371,"ionization":11.8138,"electronAffinity":3.363588,"electronegativityPauling":2.96,"nameOrigin":"Greek \'bromos\' for \'smells badly\'","radiusCovalent":1.14,"radiusVDW":1.9,"boilingpoint":331.85,"meltingpoint":265.95,"periodTableBlock":"p","discoveryDate":"1826","period":"4","group":"7","electronicConfiguration":"Ar 3d10 4s2 4p5","family":"Halogen","symbol":"Br","name":"Bromine","elementColor":[0.65,0.16,0.16],"discoveryCountry":["fr"],"discoverers":["A.","J.","Balard"]},{"id":"Kr","atomicNumber":36,"mass":83.798,"exactMass":83.911507,"ionization":13.9996,"electronAffinity":0,"electronegativityPauling":3,"nameOrigin":"Greek \'kryptos\' for \'hidden\'","radiusCovalent":1.1,"radiusVDW":2.02,"boilingpoint":120.85,"meltingpoint":116,"periodTableBlock":"p","discoveryDate":"1898","period":"4","group":"8","electronicConfiguration":"Ar 3d10 4s2 4p6","family":"Noblegas","symbol":"Kr","name":"Krypton","elementColor":[0.36,0.72,0.82],"discoveryCountry":["uk"],"discoverers":["W. Ramsay","M. W. Travers"]},{"id":"Rb","atomicNumber":37,"mass":85.4678,"exactMass":84.91178974,"ionization":4.1771,"electronAffinity":0.485916,"electronegativityPauling":0.82,"nameOrigin":"Latin \'rubidus\' for \'dark red\'","radiusCovalent":2.11,"radiusVDW":2.9,"boilingpoint":961,"meltingpoint":312.63,"periodTableBlock":"s","discoveryDate":"1861","period":"5","group":"1","electronicConfiguration":"Kr 5s1","family":"Alkali_Earth","symbol":"Rb","name":"Rubidium","elementColor":[0.44,0.18,0.69],"discoveryCountry":["de"],"discoverers":["Robert W. Bunsen","Gustav R. Kirchhoff"]},{"id":"Sr","atomicNumber":38,"mass":87.62,"exactMass":87.9056121,"ionization":5.6949,"electronAffinity":0.05206,"electronegativityPauling":0.95,"nameOrigin":"Named after the mineral Strontianit","radiusCovalent":1.92,"radiusVDW":2.55,"boilingpoint":1655,"meltingpoint":1042,"periodTableBlock":"s","discoveryDate":"1790","period":"5","group":"2","electronicConfiguration":"Kr 5s2","family":"Alkaline_Earth","symbol":"Sr","name":"Strontium","elementColor":[0,1,0],"discoveryCountry":["uk"],"discoverers":["H.","B.","Davy"]},{"id":"Y","atomicNumber":39,"mass":88.90585,"exactMass":88.9058483,"ionization":6.2173,"electronAffinity":0.307,"electronegativityPauling":1.22,"nameOrigin":"Named after the small town of Ytterby near Stockholm in Sweden. Terbium. Ytterbium and Gadolinium are also named after this town.","radiusCovalent":1.62,"radiusVDW":2.4,"boilingpoint":3611,"meltingpoint":1795,"periodTableBlock":"d","discoveryDate":"1794","period":"5","group":"3","electronicConfiguration":"Kr 4d1 5s2","family":"Transition","symbol":"Y","name":"Yttrium","elementColor":[0.58,1,1],"discoveryCountry":["fi"],"discoverers":["Johann","Gadolin"]},{"id":"Zr","atomicNumber":40,"mass":91.224,"exactMass":89.9047044,"ionization":6.6339,"electronAffinity":0.426,"electronegativityPauling":1.33,"nameOrigin":"Named after the mineral zircon","radiusCovalent":1.48,"radiusVDW":2.3,"boilingpoint":4682,"meltingpoint":2128,"periodTableBlock":"d","discoveryDate":"1789","period":"5","group":"4","electronicConfiguration":"Kr 4d2 5s2","family":"Transition","symbol":"Zr","name":"Zirconium","elementColor":[0.58,0.88,0.88],"discoveryCountry":["de"],"discoverers":["Martin","Heinrich","Klaproth"]},{"id":"Nb","atomicNumber":41,"mass":92.90638,"exactMass":92.9063781,"ionization":6.7589,"electronAffinity":0.893,"electronegativityPauling":1.6,"nameOrigin":"Named after Niobe, the daughter of the Greek god Tantalus.","radiusCovalent":1.37,"radiusVDW":2.15,"boilingpoint":5015,"meltingpoint":2742,"periodTableBlock":"d","discoveryDate":"1801","period":"5","group":"5","electronicConfiguration":"Kr 4d4","family":"Transition","symbol":"Nb","name":"Niobium","elementColor":[0.45,0.76,0.79],"discoveryCountry":["uk"],"discoverers":["Ch.","Hatchett"]},{"id":"Mo","atomicNumber":42,"mass":95.96,"exactMass":97.9054082,"ionization":7.0924,"electronAffinity":0.7472,"electronegativityPauling":2.16,"nameOrigin":"This name has Greek roots. It means \'like Platinum\' - it was difficult to distinguish Molybdenum from Platinum.","radiusCovalent":1.45,"radiusVDW":2.1,"boilingpoint":4912,"meltingpoint":2896,"periodTableBlock":"d","discoveryDate":"1778","period":"5","group":"6","electronicConfiguration":"Kr 4d5 5s1","family":"Transition","symbol":"Mo","name":"Molybdenum","elementColor":[0.33,0.71,0.71],"discoveryCountry":["se"],"discoverers":["C.","W.","Scheele"]},{"id":"Tc","atomicNumber":43,"mass":98,"exactMass":97.907216,"ionization":7.28,"electronAffinity":0.55,"electronegativityPauling":1.9,"nameOrigin":"Greek \'technetos\' for artificial","radiusCovalent":1.56,"radiusVDW":2.05,"boilingpoint":4538,"meltingpoint":2477,"periodTableBlock":"d","discoveryDate":"1937","period":"5","group":"7","electronicConfiguration":"Kr 4d6 5s1","family":"Transition","symbol":"Tc","name":"Technetium","elementColor":[0.23,0.62,0.62],"discoveryCountry":["it"],"discoverers":["C. Perrier","E. G. Segre"]},{"id":"Ru","atomicNumber":44,"mass":101.07,"exactMass":101.9043493,"ionization":7.3605,"electronAffinity":1.04638,"electronegativityPauling":2.2,"nameOrigin":"Ruthenia is the old name of Russia","radiusCovalent":1.26,"radiusVDW":2.05,"boilingpoint":4425,"meltingpoint":2610,"periodTableBlock":"d","discoveryDate":"1844","period":"5","group":"8","electronicConfiguration":"Kr 4d7 5s1","family":"Transition","symbol":"Ru","name":"Ruthenium","elementColor":[0.14,0.56,0.56],"discoveryCountry":["ru"],"discoverers":["K.","Klaus"]},{"id":"Rh","atomicNumber":45,"mass":102.9055,"exactMass":102.905504,"ionization":7.4589,"electronAffinity":1.14289,"electronegativityPauling":2.28,"nameOrigin":"Greek \'rhodeos\' means \'red like a rose\'","radiusCovalent":1.35,"radiusVDW":2,"boilingpoint":3970,"meltingpoint":2236,"periodTableBlock":"d","discoveryDate":"1803","period":"5","group":"8","electronicConfiguration":"Kr 4d8 5s1","family":"Transition","symbol":"Rh","name":"Rhodium","elementColor":[0.04,0.49,0.55],"discoveryCountry":["uk"],"discoverers":["W.","Wollaston"]},{"id":"Pd","atomicNumber":46,"mass":106.42,"exactMass":105.903486,"ionization":8.3369,"electronAffinity":0.56214,"electronegativityPauling":2.2,"nameOrigin":"Named after the asteroid Pallas","radiusCovalent":1.31,"radiusVDW":2.05,"boilingpoint":3240,"meltingpoint":1825,"periodTableBlock":"d","discoveryDate":"1803","period":"5","group":"8","electronicConfiguration":"Kr 4d10","family":"Transition","symbol":"Pd","name":"Palladium","elementColor":[0,0.41,0.52],"discoveryCountry":["uk"]},{"id":"Ag","atomicNumber":47,"mass":107.8682,"exactMass":106.905097,"ionization":7.5762,"electronAffinity":1.30447,"electronegativityPauling":1.93,"nameOrigin":"Latin \'argentum\' for silver","radiusCovalent":1.53,"radiusVDW":2.1,"boilingpoint":2436,"meltingpoint":1235.1,"periodTableBlock":"d","discoveryDate":"0","period":"5","group":"1","electronicConfiguration":"Kr 4d10 5s1","family":"Transition","symbol":"Ag","name":"Silver","elementColor":[0.88,0.88,1],"discoveryCountry":["ancient"]},{"id":"Cd","atomicNumber":48,"mass":112.411,"exactMass":113.9033585,"ionization":8.9938,"electronAffinity":0,"electronegativityPauling":1.69,"nameOrigin":"Greek \'kadmia\' (\'Galmei\' = Zinc carbonate)","radiusCovalent":1.48,"radiusVDW":2.2,"boilingpoint":1040,"meltingpoint":594.26,"periodTableBlock":"d","discoveryDate":"1817","period":"5","group":"2","electronicConfiguration":"Kr 4d10 5s2","family":"Transition","symbol":"Cd","name":"Cadmium","elementColor":[1,0.85,0.56],"discoveryCountry":["de"],"discoverers":["F.","Stromeyer"]},{"id":"In","atomicNumber":49,"mass":114.818,"exactMass":114.903878,"ionization":5.7864,"electronAffinity":0.404,"electronegativityPauling":1.78,"nameOrigin":"Named after \'Indigo\' because of its blue spectrum","radiusCovalent":1.44,"radiusVDW":2.2,"boilingpoint":2350,"meltingpoint":429.78,"periodTableBlock":"p","discoveryDate":"1863","period":"5","group":"3","electronicConfiguration":"Kr 4d10 5s2 5p1","family":"Other_Metal","symbol":"In","name":"Indium","elementColor":[0.65,0.46,0.45],"discoveryCountry":["de"],"discoverers":["F. Reich","H.T. Richter"]},{"id":"Sn","atomicNumber":50,"mass":118.71,"exactMass":119.9021947,"ionization":7.3439,"electronAffinity":1.112066,"electronegativityPauling":1.96,"nameOrigin":"Latin \'stannum\' for tin","radiusCovalent":1.41,"radiusVDW":2.25,"boilingpoint":2876,"meltingpoint":505.12,"periodTableBlock":"p","discoveryDate":"0","period":"5","group":"4","electronicConfiguration":"Kr 4d10 5s2 5p2","family":"Other_Metal","symbol":"Sn","name":"Tin","elementColor":[0.4,0.5,0.5],"discoveryCountry":["ancient"]},{"id":"Sb","atomicNumber":51,"mass":121.76,"exactMass":120.9038157,"ionization":8.6084,"electronAffinity":1.047401,"electronegativityPauling":2.05,"nameOrigin":"Arabic \'anthos ammonos\' for \'blossom of the god Ammon\'","radiusCovalent":1.38,"radiusVDW":2.2,"boilingpoint":1860,"meltingpoint":903.91,"periodTableBlock":"p","discoveryDate":"0","period":"5","group":"5","electronicConfiguration":"Kr 4d10 5s2 5p3","family":"Metalloids","symbol":"Sb","name":"Antimony","elementColor":[0.62,0.39,0.71],"discoveryCountry":["ancient"]},{"id":"Te","atomicNumber":52,"mass":127.6,"exactMass":129.9062244,"ionization":9.0096,"electronAffinity":1.970875,"electronegativityPauling":2.1,"nameOrigin":"Latin \'tellus\' or \'telluris\' for \'Planet Earth\'","radiusCovalent":1.35,"radiusVDW":2.1,"boilingpoint":1261,"meltingpoint":722.72,"periodTableBlock":"p","discoveryDate":"1782","period":"5","group":"6","electronicConfiguration":"Kr 4d10 5s2 5p4","family":"Metalloids","symbol":"Te","name":"Tellurium","elementColor":[0.83,0.48,0],"discoveryCountry":["de"],"discoverers":["Franz","Joseph","Muller","von","Reichstein"]},{"id":"I","atomicNumber":53,"mass":126.90447,"exactMass":126.904473,"ionization":10.4513,"electronAffinity":3.059038,"electronegativityPauling":2.66,"nameOrigin":"Greek \'ioeides\' for \'violet\'.","radiusCovalent":1.33,"radiusVDW":2.1,"boilingpoint":457.5,"meltingpoint":386.7,"periodTableBlock":"p","discoveryDate":"1811","period":"5","group":"7","electronicConfiguration":"Kr 4d10 5s2 5p5","family":"Halogen","symbol":"I","name":"Iodine","elementColor":[0.58,0,0.58],"discoveryCountry":["fr"],"discoverers":["Bernard","Courtois"]},{"id":"Xe","atomicNumber":54,"mass":131.293,"exactMass":131.9041535,"ionization":12.1298,"electronAffinity":0,"electronegativityPauling":2.6,"nameOrigin":"Greek \'xenos\' for \'foreigner\'","radiusCovalent":1.3,"radiusVDW":2.16,"boilingpoint":165.1,"meltingpoint":161.39,"periodTableBlock":"p","discoveryDate":"1898","period":"5","group":"8","electronicConfiguration":"Kr 4d10 5s2 5p6","family":"Noblegas","symbol":"Xe","name":"Xenon","elementColor":[0.26,0.62,0.69],"discoveryCountry":["uk"],"discoverers":["W. Ramsay","M. W. Travers"]},{"id":"Cs","atomicNumber":55,"mass":132.9054519,"exactMass":132.9054519,"ionization":3.8939,"electronAffinity":0.471626,"electronegativityPauling":0.79,"nameOrigin":"Latin \'caesius\' for \'heaven blue\'.","radiusCovalent":2.25,"radiusVDW":3,"boilingpoint":944,"meltingpoint":301.54,"periodTableBlock":"s","discoveryDate":"1860","period":"6","group":"1","electronicConfiguration":"Xe 6s1","family":"Alkali_Earth","symbol":"Cs","name":"Caesium","elementColor":[0.34,0.09,0.56],"discoveryCountry":["de"],"discoverers":["Robert Wilhelm Bunsen","Gustav Robert Kirchhoff"]},{"id":"Ba","atomicNumber":56,"mass":137.327,"exactMass":137.9052472,"ionization":5.2117,"electronAffinity":0.14462,"electronegativityPauling":0.89,"nameOrigin":"Greek \'barys\' for \'heavy\'","radiusCovalent":1.98,"radiusVDW":2.7,"boilingpoint":2078,"meltingpoint":1002,"periodTableBlock":"s","discoveryDate":"1808","period":"6","group":"2","electronicConfiguration":"Xe 6s2","family":"Alkaline_Earth","symbol":"Ba","name":"Barium","elementColor":[0,0.79,0],"discoveryCountry":["uk"],"discoverers":["Humphry","Bartholomew","Davy"]},{"id":"La","atomicNumber":57,"mass":138.90547,"exactMass":138.9063533,"ionization":5.5769,"electronAffinity":0.47,"electronegativityPauling":1.1,"nameOrigin":"Greek \'lanthanein\' for \'hidden\'. The Lanthanoids are also called the \'rare earth\' elements.","radiusCovalent":1.69,"radiusVDW":2.5,"boilingpoint":3737,"meltingpoint":1191,"periodTableBlock":"f","discoveryDate":"1839","period":"6","group":"3","electronicConfiguration":"Xe 5d1 6s2","family":"Rare_Earth","symbol":"La","name":"Lanthanum","elementColor":[0.44,0.83,1],"discoveryCountry":["se"],"discoverers":["K.","G.","Mosander"]},{"id":"Ce","atomicNumber":58,"mass":140.116,"exactMass":139.9054387,"ionization":5.5387,"electronAffinity":0.5,"electronegativityPauling":1.12,"nameOrigin":"Named after the planetoid Ceres","radiusVDW":2.48,"boilingpoint":3715,"meltingpoint":1071,"periodTableBlock":"f","discoveryDate":"1803","period":"6","group":"4","electronicConfiguration":"Xe 4f1 5d1 6s2","family":"Rare_Earth","symbol":"Ce","name":"Cerium","elementColor":[1,1,0.78],"discoverers":["J\xf6ns Jacob Berzelius","W. Hisinger","M. Klaproth"]},{"id":"Pr","atomicNumber":59,"mass":140.90765,"exactMass":140.9076528,"ionization":5.473,"electronAffinity":0.5,"electronegativityPauling":1.13,"nameOrigin":"Greek \'prasinos didymos\' for \'green twin\'","radiusVDW":2.47,"boilingpoint":3785,"meltingpoint":1204,"periodTableBlock":"f","discoveryDate":"1885","period":"6","group":"5","electronicConfiguration":"Xe 4f3 6s2","family":"Rare_Earth","symbol":"Pr","name":"Praseodymium","elementColor":[0.85,1,0.78],"discoverers":["Carl","F.","Auer","von","Welsbach"]},{"id":"Nd","atomicNumber":60,"mass":144.242,"exactMass":141.9077233,"ionization":5.525,"electronAffinity":0.5,"electronegativityPauling":1.14,"nameOrigin":"Greek \'neos didymos\' for \'new twin\'","radiusVDW":2.45,"boilingpoint":3347,"meltingpoint":1294,"periodTableBlock":"f","discoveryDate":"1885","period":"6","group":"6","electronicConfiguration":"Xe 4f4 6s2","family":"Rare_Earth","symbol":"Nd","name":"Neodymium","elementColor":[0.78,1,0.78],"discoverers":["Carl","F.","Auer","von","Welsbach"]},{"id":"Pm","atomicNumber":61,"mass":145,"exactMass":144.912749,"ionization":5.582,"electronAffinity":0.5,"nameOrigin":"Named after the Greek Prometheus. Prometheus stole the fire from the gods and gave it to mankind.","radiusVDW":2.43,"boilingpoint":3273,"meltingpoint":1315,"periodTableBlock":"f","discoveryDate":"1945","period":"6","group":"7","electronicConfiguration":"Xe 4f5 6s2","family":"Rare_Earth","symbol":"Pm","name":"Promethium","elementColor":[0.64,1,0.78],"discoverers":["J. A. Marinsky","C. D. Coryell","L. E. Glendenin"]},{"id":"Sm","atomicNumber":62,"mass":150.36,"exactMass":151.9197324,"ionization":5.6437,"electronAffinity":0.5,"electronegativityPauling":1.17,"nameOrigin":"Named after the mineral Samarskit","radiusVDW":2.42,"boilingpoint":2067,"meltingpoint":1347,"periodTableBlock":"f","discoveryDate":"1879","period":"6","group":"8","electronicConfiguration":"Xe 4f6 6s2","family":"Rare_Earth","symbol":"Sm","name":"Samarium","elementColor":[0.56,1,0.78],"discoverers":["P.","Lecoq","de","Boisbaudran"]},{"id":"Eu","atomicNumber":63,"mass":151.964,"exactMass":152.9212303,"ionization":5.6704,"electronAffinity":0.5,"nameOrigin":"Named after Europe","radiusVDW":2.4,"boilingpoint":1800,"meltingpoint":1095,"periodTableBlock":"f","discoveryDate":"1901","period":"6","group":"8","electronicConfiguration":"Xe 4f7 6s2","family":"Rare_Earth","symbol":"Eu","name":"Europium","elementColor":[0.38,1,0.78],"discoverers":["E.","A.","Demarcay"]},{"id":"Gd","atomicNumber":64,"mass":157.25,"exactMass":157.9241039,"ionization":6.1498,"electronAffinity":0.5,"electronegativityPauling":1.2,"nameOrigin":"Named after the Finnish chemist Johan Gadolin","radiusVDW":2.38,"boilingpoint":3545,"meltingpoint":1585,"periodTableBlock":"f","discoveryDate":"1880","period":"6","group":"8","electronicConfiguration":"Xe 4f7 5d1 6s2","family":"Rare_Earth","symbol":"Gd","name":"Gadolinium","elementColor":[0.27,1,0.78],"discoverers":["Jean","de","Marignac"]},{"id":"Tb","atomicNumber":65,"mass":158.92535,"exactMass":158.9253468,"ionization":5.8638,"electronAffinity":0.5,"nameOrigin":"Named after the Swedish town of Ytterby","radiusVDW":2.37,"boilingpoint":3500,"meltingpoint":1629,"periodTableBlock":"f","discoveryDate":"1843","period":"6","group":"1","electronicConfiguration":"Xe 4f9 6s2","family":"Rare_Earth","symbol":"Tb","name":"Terbium","elementColor":[0.19,1,0.78],"discoverers":["K.","G.","Mosander"]},{"id":"Dy","atomicNumber":66,"mass":162.5,"exactMass":163.9291748,"ionization":5.9389,"electronAffinity":0.5,"electronegativityPauling":1.22,"nameOrigin":"Greek \'dysprositor\' for \'difficult to reach\'","radiusVDW":2.35,"boilingpoint":2840,"meltingpoint":1685,"periodTableBlock":"f","discoveryDate":"1886","period":"6","group":"2","electronicConfiguration":"Xe 4f10 6s2","family":"Rare_Earth","symbol":"Dy","name":"Dysprosium","elementColor":[0.12,1,0.78],"discoverers":["F.","E.","Lecoq","de","Boisbaudran"]},{"id":"Ho","atomicNumber":67,"mass":164.93032,"exactMass":164.9303221,"ionization":6.0215,"electronAffinity":0.5,"electronegativityPauling":1.23,"nameOrigin":"Latin \'holmia\' for the old name of Stockholm","radiusVDW":2.33,"boilingpoint":2968,"meltingpoint":1747,"periodTableBlock":"f","discoveryDate":"1878","period":"6","group":"3","electronicConfiguration":"Xe 4f11 6s2","family":"Rare_Earth","symbol":"Ho","name":"Holmium","elementColor":[0,1,0.61],"discoverers":["J. L. Soret","P.T. Cleve"]},{"id":"Er","atomicNumber":68,"mass":167.259,"exactMass":165.9302931,"ionization":6.1077,"electronAffinity":0.5,"electronegativityPauling":1.24,"nameOrigin":"Named ofter the Swedish town of Ytterby. Terbium and Ytterbium are also named after this town.","radiusVDW":2.32,"boilingpoint":3140,"meltingpoint":1802,"periodTableBlock":"f","discoveryDate":"1843","period":"6","group":"4","electronicConfiguration":"Xe 4f12 6s2","family":"Rare_Earth","symbol":"Er","name":"Erbium","elementColor":[0,0.9,0.46],"discoverers":["K.","G.","Mosander"]},{"id":"Tm","atomicNumber":69,"mass":168.93421,"exactMass":168.9342133,"ionization":6.1843,"electronAffinity":0.5,"electronegativityPauling":1.25,"nameOrigin":"Named after the old name of Scandinavia, \'Thule\'.","radiusVDW":2.3,"boilingpoint":2223,"meltingpoint":1818,"periodTableBlock":"f","discoveryDate":"1879","period":"6","group":"5","electronicConfiguration":"Xe 4f13 6s2","family":"Rare_Earth","symbol":"Tm","name":"Thulium","elementColor":[0,0.83,0.32],"discoverers":["P.","T.","Cleve"]},{"id":"Yb","atomicNumber":70,"mass":173.054,"exactMass":173.9388621,"ionization":6.2542,"electronAffinity":0.5,"nameOrigin":"Like Terbium and Gadolinium, this is named after the Swedish town of Ytterby.","radiusVDW":2.28,"boilingpoint":1469,"meltingpoint":1092,"periodTableBlock":"f","discoveryDate":"1878","period":"6","group":"6","electronicConfiguration":"Xe 4f14 6s2","family":"Rare_Earth","symbol":"Yb","name":"Ytterbium","elementColor":[0,0.75,0.22],"discoverers":["J.","Ch.","Marignac"]},{"id":"Lu","atomicNumber":71,"mass":174.9668,"exactMass":174.9407718,"ionization":5.4259,"electronAffinity":0.5,"electronegativityPauling":1.27,"nameOrigin":"Named after the Roman name \'Lutetia\' for Paris","radiusCovalent":1.6,"radiusVDW":2.27,"boilingpoint":3668,"meltingpoint":1936,"periodTableBlock":"f","discoveryDate":"1907","period":"6","group":"7","electronicConfiguration":"Xe 4f14 5d1 6s2","family":"Rare_Earth","symbol":"Lu","name":"Lutetium","elementColor":[0,0.67,0.14],"discoverers":["Carl F. Auer von Welsbach","G. Urbain"]},{"id":"Hf","atomicNumber":72,"mass":178.49,"exactMass":179.94655,"ionization":6.8251,"electronAffinity":0,"electronegativityPauling":1.3,"nameOrigin":"\'Hafnia\' is the old name of Kopenhagen (Denmark)","radiusCovalent":1.5,"radiusVDW":2.25,"boilingpoint":4875,"meltingpoint":2504,"periodTableBlock":"d","discoveryDate":"1923","period":"6","group":"4","electronicConfiguration":"Xe 4f14 5d2 6s2","family":"Transition","symbol":"Hf","name":"Hafnium","elementColor":[0.3,0.76,1],"discoveryCountry":["dk"],"discoverers":["D. Coster","G. Hevesy"]},{"id":"Ta","atomicNumber":73,"mass":180.94788,"exactMass":180.9479958,"ionization":7.5496,"electronAffinity":0.322,"electronegativityPauling":1.5,"nameOrigin":"Named after the Greek myth of Tantalos","radiusCovalent":1.38,"radiusVDW":2.2,"boilingpoint":5730,"meltingpoint":3293,"periodTableBlock":"d","discoveryDate":"1802","period":"6","group":"5","electronicConfiguration":"Xe 4f14 5d3 6s2","family":"Transition","symbol":"Ta","name":"Tantalum","elementColor":[0.3,0.65,1],"discoveryCountry":["se"],"discoverers":["A.","Ekeberg"]},{"id":"W","atomicNumber":74,"mass":183.84,"exactMass":183.9509312,"ionization":7.864,"electronAffinity":0.815,"electronegativityPauling":2.36,"nameOrigin":"\'tung sten\' means \'heavy stone\' in Swedish. The old name (and thus the symbol \'W\') was Wolfram, named after a mineral.","radiusCovalent":1.46,"radiusVDW":2.1,"boilingpoint":5825,"meltingpoint":3695,"periodTableBlock":"d","discoveryDate":"1783","period":"6","group":"6","electronicConfiguration":"Xe 4f14 5d4 6s2","family":"Transition","symbol":"W","name":"Tungsten","elementColor":[0.13,0.58,0.84],"discoveryCountry":["es"],"discoverers":["C.","W.","Scheele"]},{"id":"Re","atomicNumber":75,"mass":186.207,"exactMass":186.9557531,"ionization":7.8335,"electronAffinity":0.15,"electronegativityPauling":1.9,"nameOrigin":"Named after the German river Rhine (latin \'Rhenium\').","radiusCovalent":1.59,"radiusVDW":2.05,"boilingpoint":5870,"meltingpoint":3455,"periodTableBlock":"d","discoveryDate":"1925","period":"6","group":"7","electronicConfiguration":"Xe 4f14 5d5 6s2","family":"Transition","symbol":"Re","name":"Rhenium","elementColor":[0.15,0.49,0.67],"discoveryCountry":["de"],"discoverers":["Walter Noddack","Ida Tacke-Noddack","Otto Berg"]},{"id":"Os","atomicNumber":76,"mass":190.23,"exactMass":191.9614807,"ionization":8.4382,"electronAffinity":1.0778,"electronegativityPauling":2.2,"nameOrigin":"Greek for \'smell\'. Its oxides smell strongly like radishes.","radiusCovalent":1.28,"radiusVDW":2,"boilingpoint":5300,"meltingpoint":3300,"periodTableBlock":"d","discoveryDate":"1804","period":"6","group":"8","electronicConfiguration":"Xe 4f14 5d6 6s2","family":"Transition","symbol":"Os","name":"Osmium","elementColor":[0.15,0.4,0.59],"discoveryCountry":["uk"],"discoverers":["S.","Tennant"]},{"id":"Ir","atomicNumber":77,"mass":192.217,"exactMass":192.9629264,"ionization":8.967,"electronAffinity":1.56436,"electronegativityPauling":2.2,"nameOrigin":"Greek \'iris\' for \'rainbow\'","radiusCovalent":1.37,"radiusVDW":2,"boilingpoint":4700,"meltingpoint":2720,"periodTableBlock":"d","discoveryDate":"1804","period":"6","group":"8","electronicConfiguration":"Xe 4f14 5d7 6s2","family":"Transition","symbol":"Ir","name":"Iridium","elementColor":[0.09,0.33,0.53],"discoveryCountry":["uk"],"discoverers":["S.","Tennant"]},{"id":"Pt","atomicNumber":78,"mass":195.084,"exactMass":194.9647911,"ionization":8.9588,"electronAffinity":2.1251,"electronegativityPauling":2.28,"nameOrigin":"Spanish \'platina\' means \'small silver\'","radiusCovalent":1.28,"radiusVDW":2.05,"boilingpoint":4100,"meltingpoint":2042.1,"periodTableBlock":"d","discoveryDate":"1735","period":"6","group":"8","electronicConfiguration":"Xe 4f14 5d9 6s1","family":"Transition","symbol":"Pt","name":"Platinum","elementColor":[0.96,0.93,0.82],"discoveryCountry":["uk"],"discoverers":["A.","de","Ulloa"]},{"id":"Au","atomicNumber":79,"mass":196.966569,"exactMass":196.9665687,"ionization":9.2255,"electronAffinity":2.30861,"electronegativityPauling":2.54,"nameOrigin":"Latin \'aurum\'. Named after Aurora, the goddess of sunrise","radiusCovalent":1.44,"radiusVDW":2.1,"boilingpoint":3130,"meltingpoint":1337.58,"periodTableBlock":"d","discoveryDate":"0","period":"6","group":"1","electronicConfiguration":"Xe 4f14 5d10 6s1","family":"Transition","symbol":"Au","name":"Gold","elementColor":[0.8,0.82,0.12],"discoveryCountry":["ancient"]},{"id":"Hg","atomicNumber":80,"mass":200.59,"exactMass":201.970643,"ionization":10.4375,"electronAffinity":0,"electronegativityPauling":2,"nameOrigin":"Graeco-Latin \'hydrargyrum\' for \'liquid silver\'","radiusCovalent":1.49,"radiusVDW":2.05,"boilingpoint":629.88,"meltingpoint":234.31,"periodTableBlock":"d","discoveryDate":"0","period":"6","group":"2","electronicConfiguration":"Xe 4f14 5d10 6s2","family":"Transition","symbol":"Hg","name":"Mercury","elementColor":[0.71,0.71,0.76],"discoveryCountry":["ancient"]},{"id":"Tl","atomicNumber":81,"mass":204.3833,"exactMass":204.9744275,"ionization":6.1082,"electronAffinity":0.377,"electronegativityPauling":1.62,"nameOrigin":"Greek \'tallos\' for \'young twig\'","radiusCovalent":1.48,"radiusVDW":2.2,"boilingpoint":1746,"meltingpoint":577,"periodTableBlock":"p","discoveryDate":"1861","period":"6","group":"3","electronicConfiguration":"Xe 4f14 5d10 6s2 6p1","family":"Other_Metal","symbol":"Tl","name":"Thallium","elementColor":[0.65,0.33,0.3],"discoveryCountry":["uk"],"discoverers":["W.","Crookes"]},{"id":"Pb","atomicNumber":82,"mass":207.2,"exactMass":207.9766521,"ionization":7.4167,"electronAffinity":0.364,"electronegativityPauling":2.33,"nameOrigin":"Latin \'plumbum\' for Lead","radiusCovalent":1.47,"radiusVDW":2.3,"boilingpoint":2023,"meltingpoint":600.65,"periodTableBlock":"p","discoveryDate":"0","period":"6","group":"4","electronicConfiguration":"Xe 4f14 5d10 6s2 6p2","family":"Other_Metal","symbol":"Pb","name":"Lead","elementColor":[0.34,0.35,0.38],"discoveryCountry":["ancient"]},{"id":"Bi","atomicNumber":83,"mass":208.9804,"exactMass":208.9803987,"ionization":7.2855,"electronAffinity":0.942363,"electronegativityPauling":2.02,"nameOrigin":"The old name of Bismuth is \'Wismut\', which stood for \'white mass\'.","radiusCovalent":1.46,"radiusVDW":2.3,"boilingpoint":1837,"meltingpoint":544.59,"periodTableBlock":"p","discoveryDate":"0","period":"6","group":"5","electronicConfiguration":"Xe 4f14 5d10 6s2 6p3","family":"Other_Metal","symbol":"Bi","name":"Bismuth","elementColor":[0.62,0.31,0.71],"discoveryCountry":["ancient"]},{"id":"Po","atomicNumber":84,"mass":209,"exactMass":208.9824304,"ionization":8.414,"electronAffinity":1.9,"electronegativityPauling":2,"nameOrigin":"Named after Poland to honor Marie Curie","radiusVDW":2,"meltingpoint":527,"periodTableBlock":"p","discoveryDate":"1898","period":"6","group":"6","electronicConfiguration":"Xe 4f14 5d10 6s2 6p4","family":"Metalloids","symbol":"Po","name":"Polonium","elementColor":[0.67,0.36,0],"discoveryCountry":["fr"],"discoverers":["M. Sklodowska-Curie","P. Curie"]},{"id":"At","atomicNumber":85,"mass":210,"exactMass":209.987148,"ionization":0,"electronAffinity":2.8,"electronegativityPauling":2.2,"nameOrigin":"Greek \'astator\' for \'changing\'","radiusVDW":2,"boilingpoint":610,"meltingpoint":575,"periodTableBlock":"p","discoveryDate":"1940","period":"6","group":"7","electronicConfiguration":"Xe 4f14 5d10 6s2 6p5","family":"Halogen","symbol":"At","name":"Astatine","elementColor":[0.46,0.31,0.27],"discoveryCountry":["us"],"discoverers":["D. R. Corson","K. R. McKenzie","E. Segre"]},{"id":"Rn","atomicNumber":86,"mass":222,"exactMass":222.0175777,"ionization":10.7485,"electronAffinity":0,"nameOrigin":"Named after Radium. It ends with \'on\' to make it clear that it is a noble gas.","radiusCovalent":1.45,"radiusVDW":2,"boilingpoint":211.4,"meltingpoint":202,"periodTableBlock":"p","discoveryDate":"1898","period":"6","group":"8","electronicConfiguration":"Xe 4f14 5d10 6s2 6p6","family":"Noblegas","symbol":"Rn","name":"Radon","elementColor":[0.26,0.51,0.59],"discoveryCountry":["de"],"discoverers":["E.","Dorn"]},{"id":"Fr","atomicNumber":87,"mass":223,"exactMass":223.0197359,"ionization":4.0727,"electronegativityPauling":0.7,"nameOrigin":"Named after France to honor Marguerite Perey","radiusVDW":2,"boilingpoint":950,"meltingpoint":300,"periodTableBlock":"s","discoveryDate":"1939","period":"7","group":"1","electronicConfiguration":"Rn 7s1","family":"Alkali_Earth","symbol":"Fr","name":"Francium","elementColor":[0.26,0,0.4],"discoveryCountry":["fr"],"discoverers":["M.","Perey"]},{"id":"Ra","atomicNumber":88,"mass":226,"exactMass":226.0254098,"ionization":5.2784,"electronegativityPauling":0.9,"nameOrigin":"Latin \'radius\' for \'beam\', as it is radioactive","radiusVDW":2,"boilingpoint":1413,"meltingpoint":973,"periodTableBlock":"s","discoveryDate":"1898","period":"7","group":"2","electronicConfiguration":"Rn 7s2","family":"Alkaline_Earth","symbol":"Ra","name":"Radium","elementColor":[0,0.49,0],"discoveryCountry":["fr"],"discoverers":["M. Sklodowska-Curie","P. Curie"]},{"id":"Ac","atomicNumber":89,"mass":227,"exactMass":227.0277521,"ionization":5.17,"electronegativityPauling":1.1,"nameOrigin":"Greek \'aktis\' for \'beam\' - actinium is radioactive","radiusVDW":2,"boilingpoint":3470,"meltingpoint":1324,"periodTableBlock":"f","discoveryDate":"1899","period":"7","group":"3","electronicConfiguration":"Rn 6d1 7s2","family":"Other_Metal","symbol":"Ac","name":"Actinium","elementColor":[0.44,0.67,0.98],"discoveryCountry":["fr"],"discoverers":["A.","L.","Debierne"]},{"id":"Th","atomicNumber":90,"mass":232.03806,"exactMass":232.0380553,"ionization":6.3067,"electronegativityPauling":1.3,"nameOrigin":"Named after the German god of thunder: Thor","radiusVDW":2.4,"boilingpoint":5060,"meltingpoint":2028,"periodTableBlock":"f","discoveryDate":"1828","period":"7","group":"4","electronicConfiguration":"Rn 6d2 7s2","family":"Other_Metal","symbol":"Th","name":"Thorium","elementColor":[0,0.73,1],"discoverers":["J.","J.","Berzelius"]},{"id":"Pa","atomicNumber":91,"mass":231.03588,"exactMass":231.035884,"ionization":5.89,"electronegativityPauling":1.5,"nameOrigin":"Greek \'protos\' for \'ancester\'. Protactinium is before Actinium in the periodic table.","radiusVDW":2,"boilingpoint":4300,"meltingpoint":1845,"periodTableBlock":"f","discoveryDate":"1917","period":"7","group":"5","electronicConfiguration":"Rn 5f2 6d1 7s2","family":"Other_Metal","symbol":"Pa","name":"Protactinium","elementColor":[0,0.63,1],"discoverers":["O. Hahn","L. Meitern","W. Wollaston"]},{"id":"U","atomicNumber":92,"mass":238.02891,"exactMass":238.0507882,"ionization":6.1941,"electronegativityPauling":1.38,"nameOrigin":"Greek \'ouranos\' for \'heaven\'. Named after the planet Uranus.","radiusVDW":2.3,"boilingpoint":4407,"meltingpoint":1408,"periodTableBlock":"f","discoveryDate":"1789","period":"7","group":"6","electronicConfiguration":"Rn 5f3 6d1 7s2","family":"Other_Metal","symbol":"U","name":"Uranium","elementColor":[0,0.56,1],"discoverers":["M.","M.","Klaproth"]},{"id":"Np","atomicNumber":93,"mass":237,"exactMass":237.0481734,"ionization":6.2657,"electronegativityPauling":1.36,"nameOrigin":"Named after the planet Neptune.","radiusVDW":2,"boilingpoint":4175,"meltingpoint":912,"periodTableBlock":"f","discoveryDate":"1940","period":"7","group":"7","electronicConfiguration":"Rn 5f4 6d1 7s2","family":"Other_Metal","symbol":"Np","name":"Neptunium","elementColor":[0,0.5,1],"discoverers":["E. M. McMillan","P. Aberson"]},{"id":"Pu","atomicNumber":94,"mass":244,"exactMass":244.064204,"ionization":6.026,"electronegativityPauling":1.28,"nameOrigin":"Named after the planet Pluto.","radiusVDW":2,"boilingpoint":3505,"meltingpoint":913,"periodTableBlock":"f","discoveryDate":"1940","period":"7","group":"8","electronicConfiguration":"Rn 5f6 7s2","family":"Other_Metal","symbol":"Pu","name":"Plutonium","elementColor":[0,0.42,1],"discoverers":["Glenn T. Seaborg","E. M. McMillan","J. W. Kennedy","A.C. Wahl"]},{"id":"Am","atomicNumber":95,"mass":243,"exactMass":243.0613811,"ionization":5.9738,"electronegativityPauling":1.3,"nameOrigin":"Named after America.","radiusVDW":2,"boilingpoint":2880,"meltingpoint":1449,"periodTableBlock":"f","discoveryDate":"1945","period":"7","group":"8","electronicConfiguration":"Rn 5f7 7s2","family":"Other_Metal","symbol":"Am","name":"Americium","elementColor":[0.33,0.36,0.95],"discoverers":["Glenn T. Seaborg","L. O. Morgan","R. A. James","A. Ghiors"]},{"id":"Cm","atomicNumber":96,"mass":247,"exactMass":247.070354,"ionization":5.9914,"electronegativityPauling":1.3,"nameOrigin":"Named after Marie Curie.","radiusVDW":2,"boilingpoint":3383,"meltingpoint":1620,"periodTableBlock":"f","discoveryDate":"1944","period":"7","group":"8","electronicConfiguration":"Rn 5f7 6d1 7s2","family":"Other_Metal","symbol":"Cm","name":"Curium","elementColor":[0.47,0.36,0.89],"discoverers":["Glenn T. Seaborg","R. A. James","A. Ghiors"]},{"id":"Bk","atomicNumber":97,"mass":247,"exactMass":247.070307,"ionization":6.1979,"electronegativityPauling":1.3,"nameOrigin":"Named after the town Berkeley where it was discovered.","radiusVDW":2,"boilingpoint":983,"meltingpoint":1258,"periodTableBlock":"f","discoveryDate":"1949","period":"7","group":"1","electronicConfiguration":"Rn 5f9 7s2","family":"Other_Metal","symbol":"Bk","name":"Berkelium","elementColor":[0.54,0.31,0.89],"discoverers":["Glenn T. Seaborg","A. Ghiors","S. G. Thompson"]},{"id":"Cf","atomicNumber":98,"mass":251,"exactMass":251.079587,"ionization":6.2817,"electronegativityPauling":1.3,"nameOrigin":"Named after the US-State of California.","radiusVDW":2,"boilingpoint":1173,"meltingpoint":1172,"periodTableBlock":"f","discoveryDate":"1950","period":"7","group":"2","electronicConfiguration":"Rn 5f10 7s2","family":"Other_Metal","symbol":"Cf","name":"Californium","elementColor":[0.63,0.21,0.83],"discoverers":["Glenn T. Seaborg","A. Ghiors","S. G. Thompson"]},{"id":"Es","atomicNumber":99,"mass":252,"exactMass":252.08298,"ionization":6.42,"electronegativityPauling":1.3,"nameOrigin":"Named after the scientist Albert Einstein.","radiusVDW":2,"meltingpoint":1130,"periodTableBlock":"f","discoveryDate":"1952","period":"7","group":"3","electronicConfiguration":"Rn 5f11 7s2","family":"Other_Metal","symbol":"Es","name":"Einsteinium","elementColor":[0.7,0.12,0.83],"discoverers":["Glenn T. Seaborg","et al."]},{"id":"Fm","atomicNumber":100,"mass":257,"exactMass":257.095105,"ionization":6.5,"electronegativityPauling":1.3,"nameOrigin":"Named after the scientist Enrico Fermi.","radiusVDW":2,"meltingpoint":1800,"periodTableBlock":"f","discoveryDate":"1953","period":"7","group":"4","electronicConfiguration":"Rn 5f12 7s2","family":"Other_Metal","symbol":"Fm","name":"Fermium","elementColor":[0.7,0.12,0.73],"discoverers":["Glenn T. Seaborg","et al."]},{"id":"Md","atomicNumber":101,"mass":258,"exactMass":258.098431,"ionization":6.58,"electronegativityPauling":1.3,"nameOrigin":"Named after the scientist D.I. Mendeleev.","radiusVDW":2,"meltingpoint":1100,"periodTableBlock":"f","discoveryDate":"1955","period":"7","group":"5","electronicConfiguration":"Rn 5f13 7s2","family":"Other_Metal","symbol":"Md","name":"Mendelevium","elementColor":[0.7,0.05,0.65],"discoverers":["Glenn T. Seaborg","Albert Ghiorso","Bernard Harvey","Gregory Choppin","Stanley G. Thompson"]},{"id":"No","atomicNumber":102,"mass":259,"exactMass":259.10103,"ionization":6.65,"electronegativityPauling":1.3,"nameOrigin":"Named after the scientist Alfred Nobel.","radiusVDW":2,"meltingpoint":1100,"periodTableBlock":"f","discoveryDate":"1958","period":"7","group":"6","electronicConfiguration":"Rn 5f14 7s2","family":"Other_Metal","symbol":"No","name":"Nobelium","elementColor":[0.74,0.05,0.53]},{"id":"Lr","atomicNumber":103,"mass":262,"exactMass":262.10963,"ionization":4.9,"nameOrigin":"Named after the scientist Ernest Orlando Lawrence.","radiusVDW":2,"meltingpoint":1900,"periodTableBlock":"f","discoveryDate":"1961","period":"7","group":"7","electronicConfiguration":"Rn 5f14 7s2 7p1","family":"Other_Metal","symbol":"Lr","name":"Lawrencium","elementColor":[0.78,0,0.4],"discoverers":["Albert Ghiorso","Torbjorn Sikkeland","Almon Larsh","Robert M. Latimer"]},{"id":"Rf","atomicNumber":104,"mass":267,"exactMass":261.10877,"ionization":6,"nameOrigin":"Named after the scientist Ernest Rutherford","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1964","period":"7","group":"4","electronicConfiguration":"Rn 5f14 6d2 7s2","family":"Transition","symbol":"Rf","name":"Rutherfordium","elementColor":[0.8,0,0.35],"discoveryCountry":["ru","us"]},{"id":"Db","atomicNumber":105,"mass":268,"exactMass":262.11408,"nameOrigin":"Named after the science-town Dubna in Russia","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1967","period":"7","group":"5","electronicConfiguration":"Rn 5f14 6d3 7s2","family":"Transition","symbol":"Db","name":"Dubnium","elementColor":[0.82,0,0.31],"discoveryCountry":["ru","us"]},{"id":"Sg","atomicNumber":106,"mass":271,"exactMass":263.11832,"nameOrigin":"Named after the scientist G. Theodore Seaborg.","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1974","period":"7","group":"6","family":"Transition","symbol":"Sg","name":"Seaborgium","elementColor":[0.85,0,0.27],"discoveryCountry":["ru","us"],"discoverers":["Albert Ghiorso","et al."]},{"id":"Bh","atomicNumber":107,"mass":272,"exactMass":264.1246,"nameOrigin":"Named after the scientist Niels Bohr.","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1981","period":"7","group":"7","family":"Transition","symbol":"Bh","name":"Bohrium","elementColor":[0.88,0,0.22],"discoveryCountry":["ru"],"discoverers":["Peter Armbruster","Gottfried M\xfcnzenber","et al."]},{"id":"Hs","atomicNumber":108,"mass":270,"exactMass":265.13009,"nameOrigin":"Latin \'hassia\' for the German county Hessen. In Hessen a lot elements have been discovered.","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1984","period":"7","group":"8","family":"Transition","symbol":"Hs","name":"Hassium","elementColor":[0.9,0,0.18],"discoveryCountry":["de"],"discoverers":["Peter Armbruster","Gottfried M\xfcnzenber","et al."]},{"id":"Mt","atomicNumber":109,"mass":276,"exactMass":268.13873,"nameOrigin":"Named after the scientist Lise Meitner.","radiusVDW":2,"periodTableBlock":"d","discoveryDate":"1982","period":"7","group":"8","family":"Transition","symbol":"Mt","name":"Meitnerium","elementColor":[0.91,0,0.15],"discoveryCountry":["de"],"discoverers":["Peter Armbruster","Gottfried M\xfcnzenber","et al."]},{"id":"Ds","atomicNumber":110,"mass":281,"exactMass":271.14606,"nameOrigin":"Named after the German city Darmstadt where many elements have been discovered.","periodTableBlock":"d","discoveryDate":"1994","period":"7","group":"8","family":"Transition","symbol":"Ds","name":"Darmstadtium","elementColor":[0.92,0,0.14],"discoveryCountry":["de"],"discoverers":["S. Hofmann","V. Ninov","F. P. Hessberger","P. Armbruster","H. Folger","G. M\xfcnzenberg","H. J. Sch\xf6tt","et al."]},{"id":"Rg","atomicNumber":111,"mass":280,"exactMass":272.15362,"nameOrigin":"Named after Wilhelm Conrad R\xf6ntgen.","periodTableBlock":"d","discoveryDate":"1994","period":"7","group":"1","family":"Transition","symbol":"Rg","name":"Roentgenium","elementColor":[0.93,0,0.13],"discoveryCountry":["de"],"discoverers":["S. Hofmann","V. Ninov","F. P. Hessberger","P. Armbruster","H. Folger","G. M\xfcnzenberg","et al."]},{"id":"Cn","atomicNumber":112,"mass":285,"exactMass":285.17411,"nameOrigin":"Historically known as eka-mercury. Ununbium is a temporary IUPAC systematic element name.","periodTableBlock":"d","discoveryDate":"1996","period":"7","family":"Transition","symbol":"Cn","name":"Copernicium","elementColor":[0.94,0,0.12],"discoveryCountry":["de"],"discoverers":["First","created","at","the","Gesellschaft","f\xfcr","Schwerionenforschung"]},{"id":"Uut","atomicNumber":113,"mass":284,"exactMass":284.17808,"nameOrigin":"Historically known as eka-thallium. Ununtrium is a temporary IUPAC systematic element name.","periodTableBlock":"p","discoveryDate":"2003","period":"7","family":"Other_Metal","symbol":"Uut","name":"Ununtrium","elementColor":[0.95,0,0.11],"discoveryCountry":["ru","us"],"discoverers":["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]},{"id":"Uuq","atomicNumber":114,"mass":289,"exactMass":289.18728,"nameOrigin":"Historically known as eka-lead. Ununquadium is a temporary IUPAC systematic element name.","periodTableBlock":"p","discoveryDate":"1998","period":"7","family":"Other_Metal","symbol":"Uuq","name":"Ununquadium","elementColor":[0.96,0,0.1],"discoveryCountry":["ru","us"],"discoverers":["Joint","Institute","for","Nuclear","Research"]},{"id":"Uup","atomicNumber":115,"mass":288,"exactMass":288.19249,"nameOrigin":"Historically known as eka-bismuth. Ununpentium is a temporary IUPAC systematic element name.","periodTableBlock":"p","discoveryDate":"2004","period":"7","family":"Other_Metal","symbol":"Uup","name":"Ununpentium","elementColor":[0.97,0,0.09],"discoveryCountry":["ru","us"],"discoverers":["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]},{"id":"Uuh","atomicNumber":116,"mass":293,"exactMass":292.19979,"nameOrigin":"Historically known as eka-polonium. Ununhexium is a temporary IUPAC systematic element name.","periodTableBlock":"p","discoveryDate":"2000","period":"7","family":"Other_Metal","symbol":"Uuh","name":"Ununhexium","elementColor":[0.98,0,0.08],"discoveryCountry":["ru"],"discoverers":["Joint","Institute","for","Nuclear","Research"]},{"id":"Uus","atomicNumber":117,"nameOrigin":"Temporary symbol and name. Can also be referred to as eka-astatine.","periodTableBlock":"p","discoveryDate":"0","period":"7","family":"Halogen","symbol":"Uus","name":"Ununseptium","elementColor":[0.99,0,0.07]},{"id":"Uuo","atomicNumber":118,"mass":294,"nameOrigin":"Historically known as eka-radon, eka-emanation before 1960. Ununoctium is a temporary IUPAC systematic element name.","periodTableBlock":"p","discoveryDate":"2002","period":"7","family":"Noblegas","symbol":"Uuo","name":"Ununoctium","elementColor":[1,0,0.06],"discoveryCountry":["ru","us"],"discoverers":["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]}]}'),dd=eE.vtkErrorMacro,df=eE.vtkDebugMacro,dp={};dc.F.forEach(function(e){dp[e.atomicNumber]=e});var dh={sphereScaleArrayName:"radius",tolerance:.45,atomicRadiusScaleFactor:.3,bondRadius:.075,deltaBondFactor:.6,radiusType:"radiusVDW",hideElements:""};function dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dh,n),eE.obj(e,t),eE.setGet(e,t,["atomicRadiusScaleFactor","bondRadius","deltaBondFactor","hideElements","radiusType","sphereScaleArrayName","tolerance"]),eE.algo(e,t,1,2),function(e,t){var n=[],i=[],o=[],a=[];function s(e,s,l){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.bondRadius;i.push(l),i.push(c),o.push(s[0]),o.push(s[1]),o.push(s[2]),n.push(e[0]),n.push(e[1]),n.push(e[2]);for(var d=0;d<u.length;++d)a.push(255*u[d])}t.classHierarchy.push("vtkMoleculeToRepresentation"),e.requestData=function(l,u){var c,d,f=l[0];if(!f)return dd("Invalid or missing input"),1;var p=(null==(c=u[0])?void 0:c.initialize())||lC.newInstance(),h=(null==(d=u[1])?void 0:d.initialize())||lC.newInstance(),m=0,g=0,v=null,y=null,b=null,x=null;n.length=0,i.length=0,o.length=0,a.length=0,f.getAtoms()&&(void 0!==f.getAtoms().coords&&void 0!==f.getAtoms().coords["3d"]&&(m=(v=f.getAtoms().coords["3d"]).length/3),void 0!==f.getAtoms().elements&&void 0!==f.getAtoms().elements.number&&(y=f.getAtoms().elements.number)),f.getBonds()&&(void 0!==f.getBonds().connections&&void 0!==f.getBonds().connections.index&&(g=(b=f.getBonds().connections.index).length/2),void 0!==f.getBonds().order&&(x=f.getBonds().order));var w=[],A=[],C=[],S=[],_=[],T=[];df("Checking for bonds with tolerance ",t.tolerance);for(var O=0,P=0;P<m;P++)y&&(S.push(dp[y[P]][t.radiusType]),_.push(dp[y[P]].radiusCovalent),T.push(dp[y[P]].elementColor[0]),T.push(dp[y[P]].elementColor[1]),T.push(dp[y[P]].elementColor[2])),-1===t.hideElements.indexOf(dp[y[P]].id)&&(O=3*P,w.push(v[O]),w.push(v[O+1]),w.push(v[O+2]),S.length>0&&A.push(S[P]*t.atomicRadiusScaleFactor),T.length>0&&(O=3*P,C.push(255*T[O]),C.push(255*T[O+1]),C.push(255*T[O+2])));if(!b){b=[],x=[];for(var M=0;M<m;M++)for(var E=M+1;E<m;E++){var D=_[M]+_[E]+t.tolerance,I=3*E,k=3*M,N=[v[I],v[I+1],v[I+2]];if(N[0]-=v[k],N[1]-=v[k+1],N[2]-=v[k+2],!(Math.abs(N[0])>D||Math.abs(N[1])>D||Math.abs(N[2])>D)){var R=D*D,B=N[0]*N[0]+N[1]*N[1]+N[2]*N[2];B<R&&B>.1&&(b.push(M),b.push(E),x.push(1))}}g=b.length/2}for(var L=0;L<g;L++){var F=b[2*L],V=b[2*L+1];if(-1===t.hideElements.indexOf(dp[y[F]].id)&&-1===t.hideElements.indexOf(dp[y[V]].id)){var j=3*V,G=3*F,U=[v[j],v[j+1],v[j+2]];U[0]-=v[G],U[1]-=v[G+1],U[2]-=v[G+2];var z=U[0]*U[0]+U[1]*U[1]+U[2]*U[2],W=(2+t.deltaBondFactor)*t.bondRadius,H=Math.min(S[F]*t.atomicRadiusScaleFactor,S[V]*t.atomicRadiusScaleFactor),q=(x[L]-1)*W+2*t.bondRadius;q>2*H*.6&&(t.bondRadius*=2*H*.6/q,W=(2+t.deltaBondFactor)*t.bondRadius);for(var K=x[L]%2,X=K;X<x[L]+K;X++){for(var Y=(2*Math.floor(X/2)+1-K)*W/2,Z=[U[0]/Math.sqrt(z),U[1]/Math.sqrt(z),U[2]/Math.sqrt(z)],J=[0,0,0],Q=0;Q<3;Q++)if(!(1e-6>Math.abs(Z[Q]))){J[Q]=-(Z[(Q+2)%3]*Z[(Q+2)%3]+Z[(Q+1)%3]*Z[(Q+1)%3])/Z[Q],J[(Q+1)%3]=Z[(Q+1)%3],J[(Q+2)%3]=Z[(Q+2)%3],th(J);break}Y*=Math.pow(-1,X%2);var $=void 0;if(y&&y[F]!==y[V]&&T.length>0){var ee=Math.sqrt(z)/2;s($=[v[j]-ee*Z[0]/2+Y*J[0],v[j+1]-ee*Z[1]/2+Y*J[1],v[j+2]-ee*Z[2]/2+Y*J[2]],Z,ee,T.slice(j,j+3)),s($=[v[G]+ee*Z[0]/2+Y*J[0],v[G+1]+ee*Z[1]/2+Y*J[1],v[G+2]+ee*Z[2]/2+Y*J[2]],Z,ee,T.slice(G,G+3))}else{var et=Math.sqrt(z);$=[v[j]-U[0]/2+Y*J[0],v[j+1]-U[1]/2+Y*J[1],v[j+2]-U[2]/2+Y*J[2]],T.length>0?s($,Z,et,T.slice(G,G+3)):s($,Z,et)}}}}if(p.getPoints().setData(w,3),S){var en=nH.newInstance({numberOfComponents:1,values:A,name:e.getSphereScaleArrayName()});p.getPointData().addArray(en)}if(T.length>0){var er=nH.newInstance({numberOfComponents:3,values:Uint8Array.from(C),name:"colors"});p.getPointData().setScalars(er)}h.getPoints().setData(n,3);var ei=nH.newInstance({numberOfComponents:2,values:i,name:"stickScales"});h.getPointData().addArray(ei);var eo=nH.newInstance({numberOfComponents:3,values:o,name:"orientation"});if(h.getPointData().addArray(eo),T.length>0){var ea=nH.newInstance({numberOfComponents:3,values:Uint8Array.from(a),name:"colors"});h.getPointData().setScalars(ea)}return u[0]=p,u[1]=h,1}}(e,t)}var dg={newInstance:eE.newInstance(dm,"vtkMoleculeToRepresentation"),extend:dm};function dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function dy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dv(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({corner:[0,0,0],axes:[[0,0,0],[0,0,0],[0,0,0]],cells:[]},n)),t.corner=[0,0,0],t.axes=[[0,0,0],[0,0,0],[0,0,0]],t.parent=null,t.kids=null,t.cells=[],eE.setGet(e,t,["parent","cells","kids"]),eE.setGetArray(e,t,["corner","axes"],3),eE.obj(e,t),function e(t,n){n.classHierarchy.push("vtkOBBNode"),t.deepCopy=function(n){t.setCorner(n.getCorner());var i=n.getAxes();if(t.setAxes([m(i[0]),m(i[1]),m(i[2])]),t.setCells(m(n.getCells())),n.getKids()){var o=e.newInstance();o.setParent(t);var a=e.newInstance();a.setParent(t),o.deepCopy(n.getKids()[0]),a.deepCopy(n.getKids()[1],a),t.setKids(o,a)}},t.getAxis=function(e){return n.axes[e]}}(e,t)}var db={newInstance:eE.newInstance(dy,"vtkOBBNode"),extend:dy},dx={};function dw(e){return!!dx[e]}var dA={get:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dx[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http"](e)},has:dw,registerType:function(e,t){dx[e]=t}},dC=eE.vtkErrorMacro,dS=eE.vtkDebugMacro,d_=function(){return dC("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."))},dT=0;function dO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new XMLHttpRequest;return i.open(e,t,!0),n.headers&&Object.entries(n.headers).forEach(function(e){var t=b(e,2),n=t[0],o=t[1];return i.setRequestHeader(n,o)}),n.progressCallback&&i.addEventListener("progress",n.progressCallback),i}var dP={fetchArray:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i&&i.compression?d_():n.ref&&!n.ref.pending?new Promise(function(o,a){var s=dO("GET",[t,n.ref.basepath,n.ref.id].join("/"),i);s.onreadystatechange=function(t){1===s.readyState&&(n.ref.pending=!0,1==++dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!0)),4===s.readyState&&(n.ref.pending=!1,200===s.status||0===s.status?(n.buffer=s.response,"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(n0.ENDIANNESS!==n.ref.encode&&n0.ENDIANNESS&&(dS("Swap bytes of ".concat(n.name)),n0.swapBytes(n.buffer,eD[n.dataType])),n.values=eE.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&dC("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),o(n)):a({xhr:s,e:t}))},s.responseType="string"!==n.dataType?"arraybuffer":"text",s.send()}):Promise.resolve(n)},fetchJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression?d_():new Promise(function(i,o){var a=dO("GET",t,n);a.onreadystatechange=function(t){1===a.readyState&&1==++dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===a.readyState&&(0==--dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===a.status||0===a.status?i(JSON.parse(a.responseText)):o({xhr:a,e:t}))},a.responseType="text",a.send()})},fetchText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression?d_():new Promise(function(i,o){var a=dO("GET",t,n);a.onreadystatechange=function(t){1===a.readyState&&1==++dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===a.readyState&&(0==--dT&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===a.status||0===a.status?i(a.responseText):o({xhr:a,e:t}))},a.responseType="text",a.send()})},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var o=dO("GET",e,t);o.onreadystatechange=function(e){4===o.readyState&&(200===o.status||0===o.status?n(o.response):i({xhr:o,e:e}))},o.responseType="arraybuffer",o.send()})},fetchImage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(e,i){var o=new Image;n.crossOrigin&&(o.crossOrigin=n.crossOrigin),o.onload=function(){return e(o)},o.onerror=i,o.src=t})}};function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}dw("http")||(dx.http=function(e){return dP});var dE={};function dD(e,t,n,i,o){for(var a=0;a<o;a++)n[i+a]=e[t+a]}function dI(e){if("#"!==e[0]){var t=e.split(/[ \t]+/);if(t[0]===dE.splitOn)t.shift(),dE.pieces.push(t.join(" ").trim()),dE.f.push([]),dE.size++;else if("v"===t[0])dE.v.push(Number(t[1])),dE.v.push(Number(t[2])),dE.v.push(Number(t[3]));else if("vt"===t[0])dE.vt.push(Number(t[1])),dE.vt.push(Number(t[2]));else if("vn"===t[0])dE.vn.push(Number(t[1])),dE.vn.push(Number(t[2])),dE.vn.push(Number(t[3]));else if("f"===t[0]){0===dE.size&&dE.size++;var n=dE.f[dE.size-1];t.shift();var i=t.filter(function(e){return e.length>0&&"\r"!==e}),o=i.length;n.push(o);for(var a=0;a<o;a++)n.push(function(e){var t=e.split("/").map(function(e){return Number(e)}),n=t[0]-1;n=n<0?n+1+dE.v.length/3:n;var i=t[1]?t[1]-1:n;i=i<0?i+1+dE.vt.length/2:i;var o=t[2]?t[2]-1:n;return[n,i,o=o<0?o+1+dE.vn.length/3:o]}(i[a]))}}}var dk={numberOfOutputs:1,requestCount:0,splitMode:null,trackDuplicates:!1};function dN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dk,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper","splitMode","trackDuplicates"]),eE.algo(e,t,0,1),eE.event(e,t,"busy"),t.classHierarchy.push("vtkOBJReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".obj")||i.fullpath){t.url=n;var o=n.split("/");o.pop(),t.baseURL=o.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.obj");return e.loadData(i)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,i)})(t.url,n).then(function(t){return!e.isDeleted()&&e.parseAsText(t)})},e.parseAsText=function(n){return!n||(n!==t.parseData&&e.modified(),t.parseData=n,t.numberOfOutputs=0,dE.splitOn=t.splitMode,dE.pieces=[],dE.v=[],dE.vt=[],dE.vn=[],dE.f=[[]],dE.size=0,n.split("\n").forEach(dI),function(e){var t=!!dE.vt.length,n=!!dE.vn.length;if(e.splitMode){e.numberOfOutputs=dE.size;for(var i=0;i<dE.size;i++){var o=dE.f[i],a=o.length,s=dE.v.length/3,l={},u=void 0;if(e.trackDuplicates){for(var c=[],d=0,f=0;f<a;)for(var p=o[f++],h=0;h<p;h++){var m=b(o[f++],3),g=m[0],v=m[1],y=m[2],x="".concat(g,"/").concat(v,"/").concat(y);void 0===l[x]&&(void 0===c[g]?c[g]=[x]:(c[g].push(x),++d),l[x]=g)}u=new Uint16Array(s+d);for(var w=0,A=0;A<c.length;++A){var C=c[A]?c[A].length:0;u[A]=C>1?s+w:A;for(var S=1;S<C;++S){var _=s+w++;u[_]=A,l[c[A][S]]=_}}}for(var T={},O=lC.newInstance({name:dE.pieces[i]}),P=[],M=[],E=[],D=[],I=0;I<a;){var k=o[I];D.push(k);for(var N=0;N<k;N++){var R=b(o[I+N+1],3),B=R[0],L=R[1],F=R[2],V="".concat(B,"/").concat(L,"/").concat(F);if(void 0===T[V]){var j=e.trackDuplicates?l[V]:P.length/3;T[V]=j,dD(dE.v,3*B,P,3*j,3),t&&dD(dE.vt,2*L,M,2*j,2),n&&dD(dE.vn,3*F,E,3*j,3)}D.push(T[V])}I+=k+1}if(O.getPoints().setData(Float32Array.from(P),3),e.trackDuplicates){var G=nH.newInstance({name:"Duplicates",values:u});O.getPointData().addArray(G)}if(O.getPolys().setData(Uint32Array.from(D)),t){var U=nH.newInstance({numberOfComponents:2,values:Float32Array.from(M),name:"TextureCoordinates"});O.getPointData().setTCoords(U)}if(n){var z=nH.newInstance({numberOfComponents:3,values:Float32Array.from(E),name:"Normals"});O.getPointData().setNormals(z)}e.output[i]=O}}else{e.numberOfOutputs=1;var W=lC.newInstance();if(W.getPoints().setData(Float32Array.from(dE.v),3),t&&dE.v.length/3==dE.vt.length/2){var H=nH.newInstance({numberOfComponents:2,values:Float32Array.from(dE.vt),name:"TextureCoordinates"});W.getPointData().setTCoords(H)}if(n&&dE.v.length===dE.vn.length){var q=nH.newInstance({numberOfComponents:3,values:Float32Array.from(dE.vn),name:"Normals"});W.getPointData().setNormals(q)}for(var K=[],X=dE.f[0],Y=X.length,Z=0;Z<Y;){var J=X[Z];K.push(J);for(var Q=0;Q<J;Q++){var $=b(X[Z+Q+1],1)[0];K.push($)}Z+=J+1}W.getPolys().setData(Uint32Array.from(K)),e.output[0]=W}}(t),!0)},e.requestData=function(n,i){e.parseAsText(t.parseData)},e.isBusy=function(){return!!t.requestCount},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var dR=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(dN,"vtkOBJReader"),extend:dN},{getPointDuplicateIds:function(e,t){var n=[],i=e.getPointData().getArrayByName("Duplicates");if(null==i)return n;var o=i.getData(),a=Math.min(t,o[t]);n.push(a);var s=o[a];if(s!==a)for(;s<o.length&&o[s]===a;)n.push(s++);return n}});function dB(e,t){var n=e.length,i=new e.constructor(n+t.length);return i.set(e),i.set(t,n),i}var dL=eE.vtkErrorMacro,dF=Number.MAX_SAFE_INTEGER,dV={tolerance:.01,automatic:!0,numberOfCellsPerNode:32,dataset:null,tree:null,pointsList:[],insertedPoints:[],OBBCount:0,level:8,maxLevel:8,retainCellLists:1};function dj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dV,n),eE.setGet(e,t,["tolerance","automatic","numberOfCellsPerNode","dataset","tree","maxLevel","level","retainCellLists"]),eE.obj(e,t),function(e,t){function n(e,n,i,o,a,s){t.OBBCount++,t.pointsList=[];var l=e.length,u=[0,0,0],c=0,d=[0,0,0],f=[0,0,0],p=[0,0,0],h=[0,0,0,0,0,0,0,0,0],m=[0,0,0],g=[0,0,0],v=[0,0,0],y=0;t.dataset.getCells()||t.dataset.buildCells();for(var b=0;b<l;b++){for(var x=e[b],w=t.dataset.getCells().getCellType(x),A=t.dataset.getCellPoints(x).cellPointIds,C=A.length,S=0;S<C-2;S++){var _=function(e,t,n){var i=-1,o=-1,a=-1,s=e.length;switch(t){case 5:case 7:case 9:if(n>s)break;i=e[0],o=e[n+1],a=e[n+2];break;case 6:var l=n+1+(1&n),u=n+2-(1&n);if(l>s||u>s)break;i=e[n],o=e[l],a=e[u];break;default:i=-1,o=-1,a=-1}return{ptId0:i,ptId1:o,ptId2:a}}(A,w,S),T=_.ptId0,O=_.ptId1,P=_.ptId2;if(!(T<0)){var M=[],E=[],D=[];t.dataset.getPoints().getPoint(T,M),t.dataset.getPoints().getPoint(O,E),t.dataset.getPoints().getPoint(P,D);for(var I=0;I<3;I++)m[I]=E[I]-M[I],g[I]=D[I]-M[I],v[I]=(M[I]+E[I]+D[I])/3;c+=y=.5*tp(tf(m,g,[]));for(var k=0;k<3;k++)u[k]+=y*v[k];d[0]+=y*(9*v[0]*v[0]+M[0]*M[0]+E[0]*E[0]+D[0]*D[0])/12,f[1]+=y*(9*v[1]*v[1]+M[1]*M[1]+E[1]*E[1]+D[1]*D[1])/12,p[2]+=y*(9*v[2]*v[2]+M[2]*M[2]+E[2]*E[2]+D[2]*D[2])/12,d[1]+=y*(9*v[0]*v[1]+M[0]*M[1]+E[0]*E[1]+D[0]*D[1])/12,d[2]+=y*(9*v[0]*v[2]+M[0]*M[2]+E[0]*E[2]+D[0]*D[2])/12,f[2]+=y*(9*v[1]*v[2]+M[1]*M[2]+E[1]*E[2]+D[1]*D[2])/12}}for(var N=0;N<C;N++)if(t.insertedPoints[A[N]]!==t.OBBCount){t.insertedPoints[A[N]]=t.OBBCount;var R=[];t.dataset.getPoints().getPoint(A[N],R),t.pointsList.push(R)}}for(var B=0;B<3;B++)u[B]/=c;f[0]=d[1],p[0]=d[2],p[1]=f[2],h=[d[0],d[1],d[2],f[0],f[1],f[2],p[0],p[1],p[2]];for(var L=0;L<3;L++)for(var F=0;F<3;F++)h[3*L+F]=h[3*L+F]/c-u[L]*u[F];var V=[0,0,0,0,0,0,0,0,0];t9(h,s,V),i[0]=V[0],i[1]=V[3],i[2]=V[6],o[0]=V[1],o[1]=V[4],o[2]=V[7],a[0]=V[2],a[1]=V[5],a[2]=V[8];for(var j=0;j<3;j++)h[j]=u[j]+i[j],h[3+j]=u[j]+o[j],h[6+j]=u[j]+a[j];for(var G=[dF,dF,dF],U=[-dF,-dF,-dF],z=t.pointsList.length,W=0;W<z;W++)for(var H=t.pointsList[W],q=0;q<3;q++){var K=sY.distanceToLine(H,u,h.slice(3*q,3*(q+1)),[]);K.t<G[q]&&(G[q]=K.t),K.t>U[q]&&(U[q]=K.t)}for(var X=0;X<3;X++)n[X]=u[X]+G[0]*i[X]+G[1]*o[X]+G[2]*a[X],i[X]*=U[0]-G[0],o[X]*=U[1]-G[1],a[X]*=U[2]-G[2]}t.classHierarchy.push("vtkOBBTree"),e.transform=function(e){var n=oa();ol(n,e.getMatrix()),n[12]=0,n[13]=0,n[14]=0,n[15]=1;var i=a$.buildFromRadian().setMatrix(n),o=Array(t.level+1);o[0]=t.tree;for(var a=1;a>0;){var s=o[a-=1],l=s.getCorner(),u=s.getAxis(0),c=s.getAxis(1),d=s.getAxis(2);e.apply(l),i.apply(u),i.apply(c),i.apply(d),s.setCorner(l),s.setAxes([u,c,d]),null!==s.getKids()&&(o[a]=s.getKids()[0],o[a+1]=s.getKids()[1],a+=2)}},e.deepCopy=function(n){if(n){e.setLevel(n.getLevel()),e.setRetainCellLists(n.getRetainCellLists()),e.setDataset(n.getDataset()),e.setAutomatic(n.getAutomatic()),e.setNumberOfCellsPerNode(n.getNumberOfCellsPerNode()),e.setTolerance(n.getTolerance());var i=n.getTree();i&&(t.tree=db.newInstance(),t.tree.deepCopy(i))}},e.computeOBBFromDataset=function(e,i,o,a,s,l){if(e){var u=e.getPoints().getNumberOfPoints(),c=e.getNumberOfCells();u<1||c<1?dL("Can't compute OBB - no data available!"):(t.dataset=e,t.OBBCount=0,t.insertedPoints=Array.from({length:u},function(e){return 0}),t.pointsList=[],n(Array.from({length:c},function(e,t){return t}),i,o,a,s,l))}},e.disjointOBBNodes=function(e,n,i){if(!e||!n)return 5;var o=[,,,,],a=[,,,,],s=t.tolerance,l=db.newInstance(),u=[0,0,0,0,0,0,0,0,0];if(i){o[0]=n.getCorner()[0],o[1]=n.getCorner()[1],o[2]=n.getCorner()[2],o[3]=1,sk(a,o,i),l.setCorner([a[0]/a[3],a[1]/a[3],a[2]/a[3]]);for(var c=0;c<3;c++)l.getAxis(0)[c]=n.getCorner()[c]+n.getAxis(0)[c],l.getAxis(1)[c]=n.getCorner()[c]+n.getAxis(1)[c],l.getAxis(2)[c]=n.getCorner()[c]+n.getAxis(2)[c];for(var d=0;d<3;d++)o[0]=l.getAxis(d)[0],o[1]=l.getAxis(d)[1],o[2]=l.getAxis(d)[2],o[3]=1,sk(a,o,i),l.getAxis(d)[0]=a[0]/a[3],l.getAxis(d)[1]=a[1]/a[3],l.getAxis(d)[2]=a[2]/a[3];for(var f=0;f<3;f++)l.getAxis(0)[f]=l.getAxis(0)[f]-l.getCorner()[f],l.getAxis(1)[f]=l.getAxis(1)[f]-l.getCorner()[f],l.getAxis(2)[f]=l.getAxis(2)[f]-l.getCorner()[f]}else l=n;for(var p=[0,0,0],h=[0,0,0],m=[0,0,0],g=0;g<3;g++)p[g]=e.getCorner()[g]+.5*(e.getAxis(0)[g]+e.getAxis(1)[g]+e.getAxis(2)[g]),h[g]=l.getCorner()[g]+.5*(l.getAxis(0)[g]+l.getAxis(1)[g]+l.getAxis(2)[g]),m[g]=h[g]-p[g];for(var v=tc(e.getCorner(),m),y=v,b=tc(l.getCorner(),m),x=b,w=0,A=0,C=0;C<3;C++)(w=tc(e.getAxis(C),m))>0?y+=w:v+=w,(A=tc(l.getAxis(C),m))>0?x+=A:b+=A;if(y+s<b||x+s<v)return 1;for(var S=0;S<3;S++){x=(b=tc(l.getCorner(),l.getAxis(S)))+tc(l.getAxis(S),l.getAxis(S)),y=v=tc(e.getCorner(),l.getAxis(S));for(var _=0;_<3;_++)w=tc(l.getAxis(S),e.getAxis(_)),u[3*S+_]=w,w>0?y+=w:v+=w;if(y+s<b||x+s<v)return 2}for(var T=0;T<3;T++){y=(v=tc(e.getCorner(),e.getAxis(T)))+tc(e.getAxis(T),e.getAxis(T)),x=b=tc(l.getCorner(),e.getAxis(T));for(var O=0;O<3;O++)(A=u[3*O+T])>0?x+=A:b+=A;if(y+s<b||x+s<v)return 3}for(var P=0;P<3;P++)for(var M=0;M<3;M++){tf(e.getAxis(P),l.getAxis(M),m),y=v=tc(e.getCorner(),m),x=b=tc(l.getCorner(),m);for(var E=0;E<3;E++)(w=tc(e.getAxis(E),m))>0?y+=w:v+=w,(A=tc(l.getAxis(E),m))>0?x+=A:b+=A;if(y+s<b||x+s<v)return 4}return 0},e.intersectWithOBBTree=function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return -1},a=t.level,s=n.getLevel();s>a&&(s=a,a=n.getLevel());var l=3*s+2*(a-s)+1,u=Array(l),c=Array(l);u[0]=t.tree,c[0]=n.getTree();for(var d=1,f=0,p=0;d>0&&p>-1;){var h=u[--d],m=c[d];e.disjointOBBNodes(h,m,i)||(h.getKids()?m.getKids()?(u[d]=h.getKids()[0],c[d]=m.getKids()[0],u[d+1]=h.getKids()[1],c[d+1]=m.getKids()[0],u[d+2]=h.getKids()[0],c[d+2]=m.getKids()[1],u[d+3]=h.getKids()[1],c[d+3]=m.getKids()[1],d+=4):(c[d]=m,u[d]=h.getKids()[0],c[d+1]=m,u[d+1]=h.getKids()[1],d+=2):m.getKids()?(u[d]=h,c[d]=m.getKids()[0],u[d+1]=h,c[d+1]=m.getKids()[1],d+=2):f+=Math.abs(p=o(h,m,i)))}return f},e.triangleIntersectsNode=function(e,n,i,o,a){var s=t.tolerance,l=[m(n),m(i),m(o)];if(a)for(var u=[0,0,0,1],c=[],d=0;d<3;d++)u[0]=l[d][0],u[1]=l[d][1],u[2]=l[d][2],sk(c,u,a),l[d][0]=c[0]/c[3],l[d][1]=c[1]/c[3],l[d][2]=c[2]/c[3];for(var f=[],p=[],h=0;h<3;h++)f[h]=l[1][h]-l[0][h],p[h]=l[2][h]-l[0][h];for(var g,v=tf(f,p,[]),y=tc(l[0],v),b=y,x=tc(e.getCorner(),v),w=x,A=0;A<3;A++)(g=tc(v,e.getAxis(A)))>0?x+=g:w+=g;if(x+s<b||y+s<w)return 0;for(var C=0;C<3;C++){w=x=tc(e.getCorner(),e.getAxis(C)),x+=tc(e.getAxis(C),e.getAxis(C)),b=y=tc(l[0],e.getAxis(C));var S=tc(l[1],e.getAxis(C));if(S>y?y=S:b=S,(S=tc(l[2],e.getAxis(C)))>y?y=S:S<b&&(b=S),x+s<b||y+s<w)return 0}for(var _,T=[],O=0;O<3;O++)for(var P=0;P<3;P++){f[0]=l[(P+1)%3][0]-l[P][0],f[1]=l[(P+1)%3][1]-l[P][1],f[2]=l[(P+1)%3][2]-l[P][2],tf(e.getAxis(O),f,T),w=x=tc(e.getCorner(),T),b=y=tc(l[P],T);for(var M=0;M<3;M++)(g=tc(e.getAxis(M),T))>0?x+=g:w+=g;if((_=tc(l[(P+2)%3],T))>y?y=_:b=_,x+s<b||y+s<w)return 0}return 1},e.findTriangleIntersections=function(n,i,o,a){for(var s=e.getDataset(),l=n.obbTree1.getDataset(),u=n.intersectionLines.getPoints().getNumberOfPoints(),c=[],d=[],f=i.getCells().length,p=0;p<f;p++){var h=i.getCells()[p];if(5===s.getCellType(h)){for(var g=s.getCellPoints(h).cellPointIds,v=[[],[],[]],y=0;y<g.length;y++)s.getPoints().getPoint(g[y],v[y]);if(n.obbTree1.triangleIntersectsNode(o,v[0],v[1],v[2],a))for(var b=o.getCells().length,x=0;x<b;x++){var w=o.getCells()[x];if(5===l.getCellType(w)){for(var A=l.getCellPoints(w).cellPointIds,C=[[],[],[]],S=0;S<A.length;S++)l.getPoints().getPoint(A[S],C[S]);var _=ls.intersectWithTriangle.apply(ls,v.concat(C,[t.tolerance])),T=_.intersect,O=_.coplanar,P=_.pt1,M=_.pt2;if(T&&!O){var E=c.length/3;c.push.apply(c,m(P).concat(m(M))),d.push(2,u+E,u+E+1)}}}}}if(c.length){var D=a3.newInstance();D.setData(dB(n.intersectionLines.getPoints().getData(),c)),n.intersectionLines.setPoints(D);var I=nQ.newInstance();I.setData(dB(n.intersectionLines.getLines().getData(),d)),n.intersectionLines.setLines(I)}return d.length/3},e.generateRepresentation=function(e){if(!t.tree)return dL("No tree to generate representation for"),null;var n=a3.newInstance(),i=nQ.newInstance();!function e(t,n,i,o,a){if(n===i||i<0&&t.getKids()){var s=o.getNumberOfPoints(),l=[],u=[],c=[];l.push.apply(l,m(t.getCorner())),c[0]=s++;var d=[];l.push.apply(l,m(ti(t.getCorner(),t.getAxis(0),d))),c[1]=s++;var f=[];l.push.apply(l,m(ti(t.getCorner(),t.getAxis(1),f))),c[2]=s++;var p=[];l.push.apply(l,m(ti(d,t.getAxis(1),p))),c[3]=s++,l.push.apply(l,m(ti(t.getCorner(),t.getAxis(2),[]))),c[4]=s++,l.push.apply(l,m(ti(d,t.getAxis(2),[]))),c[5]=s++,l.push.apply(l,m(ti(f,t.getAxis(2),[]))),c[6]=s++,l.push.apply(l,m(ti(p,t.getAxis(2),[]))),c[7]=s++,u.push(4,c[0],c[2],c[3],c[1]),u.push(4,c[0],c[1],c[5],c[4]),u.push(4,c[0],c[4],c[6],c[2]),u.push(4,c[1],c[3],c[7],c[5]),u.push(4,c[4],c[5],c[7],c[6]),u.push(4,c[2],c[6],c[7],c[3]),o.setData(dB(o.getData(),l)),a.setData(dB(a.getData(),u))}else(n<i||i<0)&&t.getKids()&&(e(t.getKids()[0],n+1,i,o,a),e(t.getKids()[1],n+1,i,o,a))}(t.tree,0,e,n,i);var o=lC.newInstance();return o.setPoints(n),o.setPolys(i),o},e.buildLocator=function(){if(null!==t.dataset){var i=t.dataset.getPoints().getNumberOfPoints(),o=t.dataset.getNumberOfCells();if(i<1||o<1)dL("Can't build OBB tree - no data available!");else{t.OBBCount=0,t.insertedPoints=Array.from({length:i},function(e){return 0}),t.pointsList=[];var a=Array.from({length:o},function(e,t){return t});t.tree=db.newInstance(),t.level=0,function e(i,o,a){var s=i.length;a>t.level&&(t.level=a);var l=o.getAxes(),u=o.getCorner();if(n(i,u,l[0],l[1],l[2],[0,0,0]),o.setAxes(l),o.setCorner(u),a<t.maxLevel&&s>t.numberOfCellsPerNode){for(var c=[],d=[],f=[0,0,0],p=[0,0,0],h=0;h<3;h++)f[h]=u[h]+l[0][h]/2+l[1][h]/2+l[2][h]/2;for(var m=0,g=0,v=1,y=0,b=0;!g&&m<3;){for(var x=0;x<3;x++)p[x]=l[m][x];th(p);for(var w=0;w<s;w++)!function(){var e=i[w],n=t.dataset.getCellPoints(e).cellPointIds,o=[];n.forEach(function(e){var i=[];t.dataset.getPoints().getPoint(n[e],i),o.push(i)});for(var a=[0,0,0],s=o.length,l=0,u=0,h=0;h<s;h++){var m=n[h],g=t.dataset.getPoints().getPoint(m),v=p[0]*(g[0]-f[0])+p[1]*(g[1]-f[1])+p[2]*(g[2]-f[2]);a[0]+=g[0],a[1]+=g[1],a[2]+=g[2],v<0?l=1:u=1}l&&u?(a[0]/=s,a[1]/=s,a[2]/=s,p[0]*(a[0]-f[0])+p[1]*(a[1]-f[1])+p[2]*(a[2]-f[2])<0?c.push(e):d.push(e)):l?c.push(e):d.push(e)}();var A=c.length,C=Math.abs((d.length-A)/s);C<.6||y?g=1:(c=[],d=[],C<v&&(v=C,b=m),3==++m&&v<.95&&(m=b,y=1))}if(g){var S=db.newInstance(),_=db.newInstance();o.setKids([S,_]),S.setParent(o),_.setParent(o),i.length=0,e(c,S,a+1),e(d,_,a+1)}else c=[],d=[]}i&&t.retainCellLists?o.setCells(i):i&&(i.length=0)}(a,t.tree,0),t.insertedPoints=[],t.pointsList=[],e.modified()}}else dL("Can't build OBB tree - no data available!")}}(e,t)}var dG={newInstance:eE.newInstance(dj,"vtkOBBTree"),extend:dj},dU=eE.vtkErrorMacro,dz=[0,2,4,1,2,4,0,3,4,1,3,4,0,2,5,1,2,5,0,3,5,1,3,5],dW=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],dH={};function dq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dH,n),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkOutlineFilter"),e.requestData=function(e,t){var n,i=e[0];if(i){var o=i.getBounds(),a=(null==(n=t[0])?void 0:n.initialize())||lC.newInstance();a.getPoints().setData(Float32Array.from(dz.map(function(e){return o[e]})),3),a.getLines().setData(Uint16Array.from(dW)),t[0]=a}else dU("Invalid or missing input")}}var dK={newInstance:eE.newInstance(dq,"vtkOutlineFilter"),extend:dq,BOUNDS_MAP:dz,LINE_ARRAY:dW},dX=n(910),dY=n.n(dX),dZ=n(5512),dJ=n.n(dZ);function dQ(){return dJ()('/*! For license information please see PaintFilter.worker.worker.js.LICENSE.txt */\n!function(){"use strict";var t={54:function(t,n,e){var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var i=Object.getPrototypeOf(n);return null===i?void 0:t(i,e,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var f=e(478),u="main";var l=function t(n,e){s(this,t),this.payload=n,this.transferable=e};t.exports=function(t){var n,e,c,h=(c=t,(e=u)in(n={})?Object.defineProperty(n,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[e]=c,n),p=self.postMessage.bind(self),y=new(function(t){function n(){return s(this,n),function(t,n){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,t),r(n,[{key:"emit",value:function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return 1==e.length&&e[0]instanceof l?p({eventName:t,args:e},e[0].transferable):p({eventName:t,args:e}),this}},{key:"emitLocally",value:function(t){for(var e,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];(e=o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"emit",this)).call.apply(e,[this,t].concat(i))}},{key:"operation",value:function(t,n){return h[t]=n,this}}]),n}(f)),d=function(t,n,e){var r,o=function(n){n&&n instanceof l?v(t,1,n.payload,n.transferable):v(t,1,n)},a=function(n){v(t,0,{message:n.message,stack:n.stack})};try{var s=m(t,n,e);"object"===(void 0===(r=s)?"undefined":i(r))&&null!==r&&"function"==typeof r.then&&"function"==typeof r.catch?s.then(o).catch(a):o(s)}catch(t){a(t)}},m=function(t,n,e){var r=h[e||u];if(!r)throw new Error("Not found handler for this request");return r(n,b.bind(null,t))},v=function(t,n,e){p([0,t,n,e],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])},b=function(t,n,e){if(!n)throw new Error("eventName is required");if("string"!=typeof n)throw new Error("eventName should be string");p([1,t,n,e])};return self.addEventListener("message",(function(t){var n=t.data;Array.isArray(n)?d.apply(void 0,a(n)):n&&n.eventName&&y.emitLocally.apply(y,[n.eventName].concat(a(n.args)))})),y},t.exports.TransferableResponse=l},478:function(t){var n=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var e=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(t,[{key:"emit",value:function(t){if(!this.__listeners[t])return this;for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o=!0,i=!1,a=void 0;try{for(var s,f=this.__listeners[t][Symbol.iterator]();!(o=(s=f.next()).done);o=!0){s.value.apply(void 0,e)}}catch(t){i=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(t,n){var e=this,r=function r(){e.off(t,r),n.apply(void 0,arguments)};return this.on(t,r)}},{key:"on",value:function(t,n){return this.__listeners[t]||(this.__listeners[t]=[]),this.__listeners[t].push(n),this}},{key:"off",value:function(t,n){return this.__listeners[t]=n?this.__listeners[t].filter((function(t){return t!==n})):[],this}}]),t}();t.exports=e}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return t[r](i,i.exports,e),i.exports}e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)};var r=e(54),o=e.n(r),i={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5},a="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function s(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function f(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function u(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var l,c;l=new a(3),a!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),c=l;const h={buffer:null,dimensions:[0,0,0],prevPoint:null,slicingMode:null};function p({center:t,scale3:n}){const e=[...n],r=t.map((t=>Math.round(t)));let o=-1;null!=h.slicingMode&&h.slicingMode!==i.NONE&&(o=h.slicingMode%3);const a=h.dimensions[0],s=h.dimensions[0]*h.dimensions[1];let[f,u,l]=r,[c,p,y]=r;2!==o&&(l=Math.round(Math.max(r[2]-e[2],0)),y=Math.round(Math.min(r[2]+e[2],h.dimensions[2]-1)));for(let t=l;t<=y;t++){let n=0;2!==o&&(n=(r[2]-t)/e[2]);const i=n*n;if(i<=1){const n=e[1]*Math.sqrt(1-i);1!==o&&(u=Math.round(Math.max(r[1]-n,0)),p=Math.round(Math.min(r[1]+n,h.dimensions[1]-1)));for(let n=u;n<=p;n++){let u=0;1!==o&&(u=(r[1]-n)/e[1]);const l=u*u;if(l+i<=1){if(0!==o){const t=e[0]*Math.sqrt(1-l-i);f=Math.round(Math.max(r[0]-t,0)),c=Math.round(Math.min(r[0]+t,h.dimensions[0]-1))}if(f<=c){const e=n*a+t*s;h.buffer.fill(1,e+f,e+c+1)}}}}}}o()().operation("start",(({bufferType:t,dimensions:n,slicingMode:e})=>{if(!h.buffer){const r=n[0]*n[1]*n[2];h.buffer=new self[t](r),h.dimensions=n,h.prevPoint=null,h.slicingMode=e}})).operation("paint",(function({point:t,radius:n}){h.prevPoint||(h.prevPoint=t);const e=[t[0]-h.prevPoint[0],t[1]-h.prevPoint[1],t[2]-h.prevPoint[2]],r=[1,1,1];for(let t=0;t<3;t++)e[t]<0&&(e[t]=-e[t],r[t]=-1);const o=Math.max(...e),i=[o,o,o],a=[...h.prevPoint];for(let t=0;t<=o;t++){p({center:a,scale3:n});for(let t=0;t<3;t++)i[t]-=e[t],i[t]<=0&&(i[t]+=o,a[t]+=r[t])}h.prevPoint=t})).operation("paintRectangle",(function({point1:t,point2:n}){const[e,r,o]=t,[i,a,s]=n,f=Math.max(Math.min(e,i),0),u=Math.min(Math.max(e,i),h.dimensions[0]-1);if(f<=u){const t=Math.max(Math.min(r,a),0),n=Math.min(Math.max(r,a),h.dimensions[1]-1),e=Math.max(Math.min(o,s),0),i=Math.min(Math.max(o,s),h.dimensions[2]-1),l=h.dimensions[0],c=h.dimensions[0]*h.dimensions[1];for(let r=e;r<=i;r++)for(let e=t;e<=n;e++){const t=e*l+r*c;h.buffer.fill(1,t+f,t+u+1)}}})).operation("paintEllipse",p).operation("paintTriangles",(function({triangleList:t}){const n=Math.floor(t.length/9);for(let e=0;e<n;e++){const n=t.subarray(9*e+0,9*e+3),r=t.subarray(9*e+3,9*e+6),o=t.subarray(9*e+6,9*e+9),i=[0,0,0],a=[0,0,0];s(i,r,n),s(a,o,n);const l=[0,0,0],c=2*Math.max(Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2]));f(l,i,1/c);const p=[0,0,0],y=2*Math.max(Math.abs(a[0]),Math.abs(a[1]),Math.abs(a[2]));f(p,a,1/y);const d=h.dimensions[0],m=h.dimensions[0]*h.dimensions[1];for(let t=0;t<=c+1;t++){const e=y-t*(y/c);for(let r=0;r<=e+1;r++){const e=[...n];u(e,e,l,t),u(e,e,p,r),e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),e[0]>=0&&e[0]<h.dimensions[0]&&e[1]>=0&&e[1]<h.dimensions[1]&&e[2]>=0&&e[2]<h.dimensions[2]&&(h.buffer[e[0]+d*e[1]+m*e[2]]=1)}}}})).operation("end",(()=>{const t=new(o().TransferableResponse)(h.buffer.buffer,[h.buffer.buffer]);return h.buffer=null,t}))}();\n',"Worker",void 0,void 0)}var d$=eE.vtkErrorMacro,d0={backgroundImage:null,labelMap:null,maskWorldToIndex:null,voxelFunc:null,radius:1,label:0,slicingMode:null};function d1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d0,n),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["backgroundImage","labelMap","maskWorldToIndex","voxelFunc","label","radius","slicingMode"]),function(e,t){t.classHierarchy.push("vtkPaintFilter");var n=null,i=null,o={};function a(){o.index=-1,o.snapshots=[],o.labels=[]}function s(e,t){var n=o.index+1,i=o.snapshots.length-o.index;o.snapshots.splice(n,i),o.labels.splice(n,i),o.snapshots.push(e),o.labels.push(t),o.index++}e.startStroke=function(){t.labelMap&&(i||(n=new dQ,i=new(dY())(n)),i.exec("start",{bufferType:"Uint8Array",dimensions:t.labelMap.getDimensions(),slicingMode:t.slicingMode}))},e.endStroke=function(){var t;return i&&(t=i.exec("end")).then(function(t){e.applyBinaryMask(t),n.terminate(),n=null,i=null}),t},e.applyBinaryMask=function(n){for(var i=t.labelMap.getPointData().getScalars(),o=i.getData(),a=new Uint8Array(n),l=0,u=0;u<a.length;u++)l+=a[u];var c=Array(l),d=t.label,f=0;if(t.voxelFunc)for(var p=t.backgroundImage.getPointData().getScalars(),h=[],m=0;m<a.length;m++)a[m]&&(p.getTuple(m,h),t.voxelFunc(h,m,d)&&(c[f++]=[m,o[m]],o[m]=d));else for(var g=0;g<a.length;g++)a[g]&&o[g]!==d&&(c[f++]=[g,o[g]],o[g]=d);s(c,d),i.setData(o),i.modified(),t.labelMap.modified(),e.modified()},e.addPoint=function(e){if(i){var n=[0,0,0];rO(n,[e[0],e[1],e[2]],t.maskWorldToIndex),n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]);var o=t.labelMap.getSpacing().map(function(e){return t.radius/e});i.exec("paint",{point:n,radius:o})}},e.paintRectangle=function(e,n){if(i){var o=[0,0,0],a=[0,0,0];rO(o,e,t.maskWorldToIndex),rO(a,n,t.maskWorldToIndex),o[0]=Math.round(o[0]),o[1]=Math.round(o[1]),o[2]=Math.round(o[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),i.exec("paintRectangle",{point1:o,point2:a})}},e.paintEllipse=function(e,n){if(i){var o=[0,0,0],a=[0,0,0],s=[0,0,0];rO(o,e,t.maskWorldToIndex),rO(a,a,t.maskWorldToIndex),rO(s,n,t.maskWorldToIndex),ro(s,s,a),s=s.map(function(e){return 0===e?.25:Math.abs(e)}),i.exec("paintEllipse",{center:o,scale3:s})}},e.canUndo=function(){return o.index>-1},e.paintPolygon=function(e){if(i&&e.length>0){for(var n=le.newInstance(),o=[],a=0;a<e.length/3;a++)o.push([e[3*a+0],e[3*a+1],e[3*a+2]]);n.setPoints(o),n.triangulate()||console.log("triangulation failed!");for(var s=n.getPointArray(),l=new Float32Array(s.length),u=Math.floor(l.length/3),c=0;c<u;c++){var d=s.slice(3*c,3*c+3);rO(l.subarray(3*c,3*c+3),d,t.maskWorldToIndex)}i.exec("paintTriangles",{triangleList:l})}},e.applyLabelMap=function(n){for(var i=t.labelMap.getPointData().getScalars().getData(),o=n.getPointData().getScalars().getData(),a=[],l=0;l<o.length;++l)i[l]!==o[l]&&a.push([l,i[l]]);s(a,t.label),t.labelMap=n,e.modified()},e.undo=function(){if(o.index>-1){for(var n=t.labelMap.getPointData().getScalars(),i=n.getData(),a=o.snapshots[o.index],s=0;s<a.length&&a[s];s++){var l=b(a[s],2),u=l[0],c=l[1];i[u]=c}o.index--,n.setData(i),n.modified(),t.labelMap.modified(),e.modified()}},e.canRedo=function(){return o.index<o.labels.length-1},e.redo=function(){if(o.index<o.labels.length-1){for(var n=t.labelMap.getPointData().getScalars(),i=n.getData(),a=o.labels[o.index+1],s=o.snapshots[o.index+1],l=0;l<s.length&&s[l];l++)i[b(s[l],1)[0]]=a;o.index++,n.setData(i),n.modified(),t.labelMap.modified(),e.modified()}};var l=e.setLabelMap;e.setLabelMap=function(e){return!!l(e)&&(t.maskWorldToIndex=t.labelMap.getWorldToIndex(),a(),!0)},e.requestData=function(n,i){if(t.backgroundImage)if(t.backgroundImage.getPointData().getScalars()){if(!t.labelMap){var o=aP.newInstance(t.backgroundImage.get("spacing","origin","direction"));o.setDimensions(t.backgroundImage.getDimensions()),o.computeTransforms();var a=new Uint8Array(t.backgroundImage.getNumberOfPoints()),s=nH.newInstance({numberOfComponents:1,values:a});o.getPointData().setScalars(s),e.setLabelMap(o)}t.maskWorldToIndex||(t.maskWorldToIndex=t.labelMap.getWorldToIndex()),t.labelMap.getPointData().getScalars()?(t.labelMap.modified(),i[0]=t.labelMap):d$("Mask image has no scalars")}else d$("Background image has no scalars");else d$("No background image")},a()}(e,t)}var d2={newInstance:eE.newInstance(d1,"vtkPaintFilter"),extend:d1},d3=eE.vtkErrorMacro,d4={};function d5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d4,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["lookupTable","piecewiseFunction"]),t.classHierarchy.push("vtkScalarToRGBA"),e.requestData=function(e,n){var i,o=e[0];if(o){var a=o.getPointData().getScalars();if(a)if(t.lookupTable)if(t.piecewiseFunction){for(var s=[0,0,0,0],l=a.getData(),u=new Uint8ClampedArray(4*l.length),c=0,d=0;d<l.length;d++){var f=l[d];t.lookupTable.getColor(f,s),s[3]=t.piecewiseFunction.getValue(f),u[c++]=255*s[0],u[c++]=255*s[1],u[c++]=255*s[2],u[c++]=255*s[3]}var p=nH.newInstance({name:"rgba",numberOfComponents:4,values:u}),h=o.get("extent","spacing","origin","direction"),m=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance();m.set(h),m.getPointData().setScalars(p),n[0]=m}else d3("No piecewiseFunction available");else d3("No lookupTable available");else d3("No scalars from input")}else d3("Invalid or missing input")}}var d6={newInstance:eE.newInstance(d5,"vtkScalarToRGBA"),extend:d5},d8=eE.vtkErrorMacro,d9={shrinkFactor:.5};function d7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d9,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["shrinkFactor"]),function(e,t){function n(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return i[0]=t[0]+n*(e[0]-t[0]),i[1]=t[1]+n*(e[1]-t[1]),i[2]=t[2]+n*(e[2]-t[2]),i}function i(e,t,i,o,a){var s=t.getData(),l=[0,0,0],u=[],c=[0,0,0],d=[0,0,0],f=a,p=e.length;if(0===p)return{newPointIds:u,outCount:f};if(1===p){var h=e[0];o[3*f]=s[3*h],o[3*f+1]=s[3*h+1],o[3*f+2]=s[3*h+2],u.push(f),f++}else if(2===p){le.computeCentroid(e,t,l);for(var m=0;m<2;m++){var g=e[m];d[0]=s[3*g],d[1]=s[3*g+1],d[2]=s[3*g+2],n(d,l,i,c),o[3*f]=c[0],o[3*f+1]=c[1],o[3*f+2]=c[2],u.push(f),f++}}else{le.computeCentroid(e,t,l);for(var v=0;v<p;v++){var y=e[v];d[0]=s[3*y],d[1]=s[3*y+1],d[2]=s[3*y+2],n(d,l,i,c),o[3*f]=c[0],o[3*f+1]=c[1],o[3*f+2]=c[2],u.push(f),f++}}return{newPointIds:u,outCount:f}}t.classHierarchy.push("vtkShrinkPolyData"),e.requestData=function(e,n){var o,a=e[0],s=(null==(o=n[0])?void 0:o.initialize())||lC.newInstance();a?a.getPoints()?(!function(e,n){var o=e.getPoints(),a=e.getVerts(),s=e.getLines(),l=e.getPolys(),u=e.getStrips(),c=t.shrinkFactor,d=0;if(a)for(var f=a.getCellSizes(),p=0;p<f.length;p++)d+=f[p];if(s)for(var h=s.getCellSizes(),g=0;g<h.length;g++)d+=2*(h[g]-1);if(l)for(var v=l.getCellSizes(),y=0;y<v.length;y++)d+=v[y];if(u)for(var b=u.getCellSizes(),x=0;x<b.length;x++)d+=3*(b[x]-2);var w=new Float32Array(3*d),A=a3.newInstance();A.setData(w,3);var C=nQ.newInstance(),S=nQ.newInstance(),_=nQ.newInstance(),T=0;if(a){for(var O=a.getData(),P=[],M=[],E=0;E<O.length;){M.length=0;for(var D=O[E],I=1;I<=D;I++)M.push(O[E+I]);var k=i(M,o,c,w,T);T=k.outCount,P.push(D),P.push.apply(P,m(k.newPointIds)),E+=D+1}C.setData(new Uint32Array(P))}if(s){for(var N=s.getData(),R=[],B=0;B<N.length;){for(var L=N[B],F=0;F<L-1;F++){var V=i([N[B+F+1],N[B+F+2]],o,c,w,T);T=V.outCount,R.push(2,V.newPointIds[0],V.newPointIds[1])}B+=L+1}S.setData(new Uint32Array(R))}if(l){for(var j=l.getData(),G=[],U=[],z=0;z<j.length;){U.length=0;for(var W=j[z],H=1;H<=W;H++)U.push(j[z+H]);var q=i(U,o,c,w,T);T=q.outCount,G.push(W),G.push.apply(G,m(q.newPointIds)),z+=W+1}_.setData(new Uint32Array(G))}if(u){for(var K=u.getData(),X=[],Y=0;Y<K.length;){for(var Z=K[Y],J=0;J<Z-2;J++){var Q=i([K[Y+J+1],K[Y+J+2],K[Y+J+3]],o,c,w,T);T=Q.outCount;var $=m(Q.newPointIds);if(J%2){var ee=$[0];$[0]=$[2],$[2]=ee}X.push(3,$[0],$[1],$[2])}Y+=Z+1}if(X.length>0){var et=_.getData(),en=new Uint32Array(et.length+X.length);en.set(et),en.set(X,et.length),_.setData(en)}}n.setPoints(A),n.setVerts(C),n.setLines(S),n.setPolys(_),n.getCellData().passData(e.getCellData())}(a,s),n[0]=s):d8("Input has no points!"):d8("No input!")},e.setShrinkFactor=function(n){n!==t.shrinkFactor&&(t.shrinkFactor=Math.max(0,Math.min(1,n)),e.modified())}}(e,t)}var fe={newInstance:eE.newInstance(d7,"vtkShrinkPolyData"),extend:d7},ft=eE.vtkErrorMacro,fn={transform:null,outputPointsPrecision:iX.DEFAULT};function fr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fn,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["transform","outputPointsPrecision"]),t.classHierarchy.push("vtkTransformPolyDataFilter"),e.requestData=function(e,n){var i,o=e[0],a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();!function(e,n){if(!t.transform)return ft("No transform defined!"),!1;var i=e.getPoints(),o=e.getPointData(),a=n.getPointData(),s=e.getCellData(),l=n.getCellData();if(!i)return!0;var u=i.getNumberOfPoints(),c=o.getVectors(),d=o.getNormals(),f=s.getVectors(),p=s.getNormals(),h=i.getDataType();t.outputPointsPrecision===iX.SINGLE?h=eI.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(h=eI.DOUBLE);var m=a3.newInstance({dataType:h}),g=i.getData();m.setNumberOfPoints(u);var v=m.getData(),y=null;c&&(y=nH.newInstance({name:c.getName(),numberOfComponents:3,size:3*u}));var b=null;d&&(b=nH.newInstance({name:d.getName(),numberOfComponents:3,size:3*u})),c||d?t.transform.transformPointsNormalsVectors(i,m,d,b,c,y):t.transform.transformPoints(g,v);var x=null;if(f){var w=f.getNumberOfTuples();x=nH.newInstance({name:f.getName(),numberOfComponents:3,size:3*w}),t.transform.transformVectors(f,x)}var A=null;if(p){var C=p.getNumberOfTuples();A=nH.newInstance({name:p.getName(),numberOfComponents:3,size:3*C}),t.transform.transformNormals(p,A)}return n.setPoints(m),n.setVerts(e.getVerts()),n.setLines(e.getLines()),n.setPolys(e.getPolys()),n.setStrips(e.getStrips()),b&&(a.setNormals(b),a.copyFieldOff(b.getName())),y&&(a.setVectors(y),a.copyFieldOff(y.getName())),A&&(l.setNormals(A),l.copyFieldOff(A.getName())),x&&(l.setVectors(x),l.copyFieldOff(x.getName())),a.passData(o),l.passData(s),!0}(o,a)?ft("TransformPolyDataFilter failed to transform input data."):n[0]=a}}var fi={newInstance:eE.newInstance(fr,"vtkTransformPolyDataFilter"),extend:fr},fo=eE.vtkWarningMacro,fa={errorCount:0};function fs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fa,n),eE.setGet(e,t,[]),eE.get(e,t,["errorCount"]),eE.obj(e,t),eE.algo(e,t,1,1),t.classHierarchy.push("vtkTriangleFilter"),e.requestData=function(e,n){var i,o=e[0],a=o.getPoints().getData(),s=o.getPolys().getData(),l=o.getPolys().getDataType(),u=o.getPoints().getDataType(),c=[],d=[];if(t.errorCount=0,s)for(var f=0,p=!1,h=0;h<s.length;h+=f+1){f=s[h],(p=s[h+1]===s[h+f])&&--f;var g=[];g.length=f;for(var v=0;v<f;v++){var y=s[h+v+1];g[v]=[a[3*y],a[3*y+1],a[3*y+2]]}if(3===f){var b=d.length/3;c.push(3,b,b+1,b+2),d.push.apply(d,m(g[0]).concat(m(g[1]),m(g[2])))}else if(f>3){var x=le.newInstance();x.setPoints(g),x.triangulate()||(fo("Triangulation failed at cellOffset ".concat(h)),++t.errorCount);var w=x.getPointArray(),A=Math.floor(w.length/9),C=[];C.length=9;for(var S=0;S<A;S++){for(var _=0;_<9;_++)C[_]=w[9*S+_];var T=d.length/3;c.push(3,T,T+1,T+2),d.push.apply(d,C)}}p&&++f}var O=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();O.getPoints().setData(eE.newTypedArrayFrom(u,d)),O.getPolys().setData(eE.newTypedArrayFrom(l,c)),n[0]=O}}var fl={newInstance:eE.newInstance(fs,"vtkTriangleFilter"),extend:fs},fu=eE.vtkDebugMacro,fc=eE.vtkErrorMacro,fd=eE.vtkWarningMacro,ff={outputPointsPrecision:iX.DEFAULT,radius:.5,varyRadius:0,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:0,textureLength:1};function fp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ff,n),eE.setGet(e,t,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),eE.obj(e,t),eE.algo(e,t,1,1),function(e,t){function n(e,n){var i=e;return t.sidesShareVertices?i+=t.numberOfSides*n:i+=2*t.numberOfSides*n,t.capping&&(i+=2*t.numberOfSides),i}function i(e,t,n){for(var i=t[n],o=e.slice(3*i,3*(i+1)),a=n+1;a<t.length;){var s=t[a];if(o!==e.slice(3*s,3*(s+1)))return a-1;++a}return t.length}t.classHierarchy.push("vtkTubeFilter"),e.requestData=function(o,a){var s,l=(null==(s=a[0])?void 0:s.initialize())||lC.newInstance();a[0]=l;var u=o[0];if(u){var c=u.getPoints();if(c){var d=c.getNumberOfPoints();if(!(d<1)){var f=u.getLines();if(f&&!(1>f.getNumberOfCells())){for(var p=0,h=0,m=f.getData(),g=m[0],v=0;v<m.length;v+=g+1)p=n(p,g=m[v]),h+=(2*g+1)*Math.ceil(t.numberOfSides/t.onRatio),t.capping&&(h+=2*(t.numberOfSides+1));var y=c.getDataType();t.outputPointsPrecision===iX.SINGLE?y=eI.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(y=eI.DOUBLE);var b=a3.newInstance({dataType:y,size:3*p,numberOfComponents:3}),x=new Float32Array(3*p),w=nH.newInstance({numberOfComponents:3,values:x,name:"TubeNormals"}),A=new Uint32Array(h),C=nQ.newInstance({values:A}),S=0,_=u.getPointData().getNormals(),T=null,O=!1;_&&!t.useDefaultNormal||(T=new Float32Array(3*d),_=nH.newInstance({numberOfComponents:3,values:T,name:"Normals"}),t.useDefaultNormal?T=T.map(function(e,n){return t.defaultNormal[n%3]}):O=!0);for(var P=u.getPointData().getNumberOfArrays(),M=null,E=null,D=0;D<P;D++)M=u.getPointData().getArrayByIndex(D),E=nH.newInstance({name:M.getName(),dataType:M.getDataType(),numberOfComponents:M.getNumberOfComponents(),size:p*M.getNumberOfComponents()}),l.getPointData().addArray(E);var I=f.getNumberOfCells()*t.numberOfSides;t.capping&&(I+=2);for(var k=u.getCellData().getNumberOfArrays(),N=0;N<k;N++)M=u.getCellData().getArrayByIndex(N),E=nH.newInstance({name:M.getName(),dataType:M.getDataType(),numberOfComponents:M.getNumberOfComponents(),size:I*M.getNumberOfComponents()}),l.getCellData().addArray(E);var R=e.getInputArrayToProcess(0),B=null,L=[];R&&(B=nH.newInstance({name:R.getName(),dataType:R.getDataType(),numberOfComponents:R.getNumberOfComponents(),size:p*R.getNumberOfComponents()}),(L=R.getRange())[1]-L[0]==0&&(1===t.varyRadius&&fd("Scalar range is zero!"),L[1]=L[0]+1));var F=e.getInputArrayToProcess(1),V=0;F&&(V=F.getMaxNorm());var j=l.getCellData();j.copyNormalsOff(),j.passData(u.getCellData());var G=l.getPointData();null!==G.getNormals()&&G.copyNormalsOff(),R&&B&&G.setScalars(B);var U=null;if(3===t.generateTCoords&&R||2===t.generateTCoords||1===t.generateTCoords){var z=new Float32Array(2*p);U=nH.newInstance({numberOfComponents:2,values:z,name:"TCoords"}),G.copyTCoordsOff()}G.passData(u.getPointData());var W=2*Math.PI/t.numberOfSides;g=m[0];for(var H=0,q=u.getVerts().getNumberOfCells(),K=0;K<m.length;K+=g+1){g=m[K];var X=m.slice(K+1,K+1+g);if(g>1&&O){var Y=m.slice(K,K+g+1);!function(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[0,0,1],s=t[0],l=0;l<t.length;l+=s+1)!function(){if(1===(s=t[l]))n.setTuple(t[l+1],a);else if(s>1){var u=0,c=[0,0,0],d=[0,0,0],f=t.slice(l+1,l+1+s);if((u=i(e,f,0))!==s){var p=f[u],h=e.slice(3*p,3*(p+1)),m=f[u+1],g=e.slice(3*m,3*(m+1));if(th(c=g.map(function(e,t){return e-h[t]})),o)a=o;else{for(;++u<s;)if((u=i(e,f,u))!==s){p=f[u],h=e.slice(3*p,3*(p+1)),m=f[u+1],g=e.slice(3*m,3*(m+1));for(var v=0;v<3;++v)d[v]=g[v]-h[v];th(d);var y=[0,0,0];if(tf(c,d,y),tp(y)>.001){a=y,c=d;break}}if(u>=s){for(var b=0;b<3;++b)if(0!==c[b]){a[(b+2)%3]=0,a[(b+1)%3]=1,a[b]=-c[(b+1)%3]/c[b];break}}}th(a);for(var x=0;++u<s&&(u=i(e,f,u))!==s;){p=f[u],h=e.slice(3*p,3*(p+1)),m=f[u+1],g=e.slice(3*m,3*(m+1));for(var w=0;w<3;++w)d[w]=g[w]-h[w];th(d);var A=[0,0,0];if(tf(c,a,A),0!==th(A)){var C=[0,0,0];if(tf(d,c,C),0!==th(C)){var S=tc(C,a),_=1-S*S;_=_>0?Math.sqrt(_):0;for(var T=[0,0,0],O=0;O<3;++O)T[O]=d[O]+c[O];th(T),tf(T,C,A),tf(c,C,T),tc(a,T)*tc(A,T)<0&&(_*=-1);for(var P=x;P<u;++P)n.setTuple(f[P],a);x=u,c=d,a=S*C+_*A}}}for(var M=x;M<s;++M)n.setTuple(f[M],a)}else for(var E=0;E<s;++E)n.setTuple(f[E],a)}}()}(c.getData(),Y,_)}!function(e,n,i,o,a,s,l,u,c,d,f,p,h,m){for(var g=[0,0,0],v=[0,0,0],y=[0,0,0],b=[0,0,0],x=[0,0,0],w=[0,0,0],A=[0,0,0],C=[0,0,0],S=[0,0,0],_=[0,0,0],T=[0,0,0],O=1,P=e,M=[],E=0;E<n;++E){if(0===E){x=o.slice(3*i[0],3*(i[0]+1)),w=o.slice(3*i[1],3*(i[1]+1));for(var D=0;D<3;++D)g[D]=w[D]-x[D],v[D]=g[D],y[D]=-v[D];th(y)}else if(E===n-1){for(var I=0;I<3;++I)v[I]=g[I],x[I]=w[I],b[I]=g[I];th(b)}else{for(var k=0;k<3;++k)x[k]=w[k];w=o.slice(3*i[E+1],3*(i[E+1]+1));for(var N=0;N<3;++N)v[N]=g[N],g[N]=w[N]-x[N]}if(0===th(g))return fd("Coincident points!"),0;for(var R=0;R<3;++R)A[R]=(v[R]+g[R])/2;if(C=h.slice(3*i[E],3*(i[E]+1)),0===th(A)&&(tf(v,C,A),0===th(A)&&fu("Using alternate bevel vector")),tf(A,C,S),0===th(S)){var B="Bad normal: s = ";return B+="".concat(A[0],",  ").concat(A[1],", ").concat(A[2]),fd(B+=" n = ".concat(C[0],",  ").concat(C[1],", ").concat(C[2])),0}if(tf(S,A,_),th(_),c&&1===t.varyRadius)O=1+(t.radiusFactor-1)*(c.getComponent(i[E],0)-d[0])/(d[1]-d[0]);else if(f&&2===t.varyRadius)(O=Math.sqrt(p/tp(f.getTuple(i[E],M))))>t.radiusFactor&&(O=t.radiusFactor);else if(c&&3===t.varyRadius&&(O=c.getComponent(i[E],0))<0)return fd("Scalar value less than zero, skipping line"),0;if(t.sidesShareVertices)for(var L=0;L<t.numberOfSides;++L){for(var F=0;F<3;++F)T[F]=S[F]*Math.cos(L*m)+_[F]*Math.sin(L*m),A[F]=x[F]+t.radius*O*T[F],a[3*P+F]=A[F],u[3*P+F]=T[F];l.passData(s,i[E],P),P++}else for(var V=[0,0,0],j=[0,0,0],G=0;G<t.numberOfSides;++G){for(var U=0;U<3;++U)T[U]=S[U]*Math.cos(G*m)+_[U]*Math.sin(G*m),V[U]=S[U]*Math.cos((G-.5)*m)+_[U]*Math.sin((G-.5)*m),j[U]=S[U]*Math.cos((G+.5)*m)+_[U]*Math.sin((G+.5)*m),A[U]=x[U]+t.radius*O*T[U],a[3*P+U]=A[U],u[3*P+U]=V[U],a[3*(P+1)+U]=A[U],u[3*(P+1)+U]=j[U];l.passData(s,i[E],P+1),P+=2}}if(t.capping){var z=t.numberOfSides,W=1;t.sidesShareVertices||(z=2*t.numberOfSides,W=2);for(var H=0;H<z;H+=W){A=a.slice(3*(e+H),3*(e+H+1));for(var q=0;q<3;++q)a[3*P+q]=A[q],u[3*P+q]=y[q];l.passData(s,i[0],P),P++}var K=e+(n-1)*t.numberOfSides;t.sidesShareVertices||(K=e+2*(n-1)*t.numberOfSides);for(var X=0;X<z;X+=W){A=a.slice(3*(K+X),3*(K+X+1));for(var Y=0;Y<3;++Y)a[3*P+Y]=A[Y],u[3*P+Y]=b[Y];l.passData(s,i[n-1],P),P++}}return 1}(H,g,X,c.getData(),b.getData(),u.getPointData(),G,x,R,L,F,V,T,W)?fd("Could not generate points"):(S=function(e,n,i,o,a,s,l){for(var u=0,c=0,d=0,f=o,p=0,h=l.getData(),m=0;p<h.length&&m!==o;)p+=h[p]+1,m++;if(t.sidesShareVertices)for(var g=e;g<t.numberOfSides+e;g+=t.onRatio){u=g%t.numberOfSides,c=(g+1)%t.numberOfSides,h[p++]=2*n;for(var v=0;v<n;++v)d=v*t.numberOfSides,h[p++]=e+c+d,h[p++]=e+u+d;s.passData(a,i,f++)}else for(var y=e;y<t.numberOfSides+e;y+=t.onRatio){u=y%t.numberOfSides*2+1,c=(y+1)%t.numberOfSides*2,h[p]=2*n,p++;for(var b=0;b<n;++b)d=2*b*t.numberOfSides,h[p++]=e+c+d,h[p++]=e+u+d;s.passData(a,i,f++)}if(t.capping){var x=e+n*t.numberOfSides,w=0;t.sidesShareVertices||(x=e+2*n*t.numberOfSides),h[p++]=t.numberOfSides,h[p++]=x,h[p++]=x+1;var A=0;for(u=t.numberOfSides-1,c=2,A=0;A<t.numberOfSides-2;++A)A%2?(w=x+c,h[p++]=w,c++):(w=x+u,h[p++]=w,u--);for(s.passData(a,i,f++),x+=t.numberOfSides,h[p++]=t.numberOfSides,h[p++]=x,h[p++]=x+t.numberOfSides-1,u=t.numberOfSides-2,c=1,A=0;A<t.numberOfSides-2;++A)A%2?(w=x+u,h[p++]=w,u--):(w=x+c,h[p++]=w,c++);s.passData(a,i,f++)}return f}(H,g,q,S,u.getCellData(),j,C),U&&function(e,n,i,o,a,s){var l=t.numberOfSides;t.sidesShareVertices||(l=2*t.numberOfSides);var u=0,c=0,d=a.getData();if(3===t.generateTCoords){c=d[i[0]];for(var f=0;f<n;++f){u=(d[i[f]]-c)/t.textureLength;for(var p=0;p<l;++p){var h=p/(l-1),m=2*(e+f*l+p);s[m]=u,s[m+1]=h}}}else if(2===t.generateTCoords)for(var g=0,v=o.slice(3*i[0],3*(i[0]+1)),y=0;y<n;++y){var b=o.slice(3*i[y],3*(i[y]+1));u=(g+=Math.sqrt(tx(b,v)))/t.textureLength;for(var x=0;x<l;++x){var w=x/(l-1),A=2*(e+y*l+x);s[A]=u,s[A+1]=w}for(var C=0;C<3;++C)v[C]=b[C]}else if(1===t.generateTCoords){for(var S=0,_=0,T=o.slice(3*i[0],3*(i[0]+1)),O=0;O<n;++O){var P=o.slice(3*i[O],3*(i[O]+1));_+=Math.sqrt(tx(P,T));for(var M=0;M<3;++M)T[M]=P[M]}T=o.slice(3*i[0],3*(i[0]+1));for(var E=0;E<n;++E){var D=o.slice(3*i[E],3*(i[E]+1));u=(S+=Math.sqrt(tx(D,T)))/_;for(var I=0;I<l;++I){var k=I/(l-1),N=2*(e+E*l+I);s[N]=u,s[N+1]=k}for(var R=0;R<3;++R)T[R]=D[R]}}if(t.capping){for(var B=e+n*l,L=0;L<t.numberOfSides;++L){var F=2*(B+L);s[F]=0,s[F+1]=0}for(var V=0;V<t.numberOfSides;++V){var j=2*(B+t.numberOfSides+V);s[j]=0,s[j+1]=0}}}(H,g,X,c.getData(),R,U.getData())),H=n(H,g),q++}l.setPoints(b),l.setStrips(C),l.setPointData(G),G.setNormals(w)}}}}else fc("Invalid or missing input")}}(e,t)}var fh={newInstance:eE.newInstance(fp,"vtkTubeFilter"),extend:fp},fm=eE.vtkDebugMacro,fg=eE.vtkErrorMacro,fv={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};function fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fv,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["scaleFactor","useNormal","xyPlane"]),eE.setGetArray(e,t,["normal"],3),t.classHierarchy.push("vtkWarpScalar"),e.requestData=function(n,i){var o=n[0];if(!o)return fg("Invalid or missing input"),1;var a=o.getPoints(),s=o.getPointData().getNormals(),l=e.getInputArrayToProcess(0);if(!a||!l)return fm("No data to warp",!!a,!!l),i[0]=n[0],1;var u=a.getNumberOfPoints(),c=null,d=[0,0,1];s&&!t.useNormal?(c=function(e,t){return[t.getData()[3*e],t.getData()[3*e+1],t.getData()[3*e+2]]},fm("Using data normals")):e.getXyPlane()?(c=function(e,t){return d},fm("Using x-y plane normal")):(c=function(e,n){return t.normal},fm("Using Normal instance variable"));for(var f=new Float32Array(3*u),p=a.getData(),h=0,m=[0,0,1],g=1,v=l.getData(),y=l.getNumberOfComponents(),b=0;b<u;++b)h=3*b,m=c(b,s),g=t.xyPlane?p[h+2]:v[b*y],f[h]=p[h]+t.scaleFactor*g*m[0],f[h+1]=p[h+1]+t.scaleFactor*g*m[1],f[h+2]=p[h+2]+t.scaleFactor*g*m[2];var x=i[0]&&i[0]!==n[0]?i[0].initialize():M({vtkClass:o.getClassName()});x.shallowCopy(o);var w=a3.newInstance();return w.setData(f,3),x.setPoints(w),i[0]=x,1}}var fb={newInstance:eE.newInstance(fy,"vtkWarpScalar"),extend:fy},fx={numberOfIterations:20,passBand:.1,featureAngle:45,edgeAngle:15,featureEdgeSmoothing:0,boundarySmoothing:1,nonManifoldSmoothing:0,generateErrorScalars:0,generateErrorVectors:0,normalizeCoordinates:0};function fw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fx,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["numberOfIterations","passBand","featureAngle","edgeAngle","featureEdgeSmoothing","boundarySmoothing","nonManifoldSmoothing","generateErrorScalars","generateErrorVectors","normalizeCoordinates"]),t.classHierarchy.push("vtkWindowedSincPolyDataFilter"),e.vtkWindowedSincPolyDataFilterExecute=function(e,n,i){if(!e||t.numberOfIterations<=0)return e;for(var o,a=e.getData(),s=n.getVerts().getData(),l=n.getLines().getData(),u=n.getPolys().getData(),c=n.getStrips().getData(),d=Math.cos(nR.radiansFromDegrees(t.featureAngle)),f=Math.cos(nR.radiansFromDegrees(t.edgeAngle)),p=e.getNumberOfPoints(),h=Array(p),m=0;m<p;++m)h[m]={type:0,edges:null};for(var g=0,v=0;v<s.length;v+=g+1){g=s[v];for(var y=s.slice(v+1,v+1+g),b=0;b<y.length;++b)h[y[b]].type=1}for(var x=0;x<l.length;x+=g+1){g=l[x];for(var w=l.slice(x+1,x+1+g),A=w[0]===w[g-1]&&g>3,C=0;C<g;++C)0===h[w[C]].type?0===C?A?(h[w[0]].type=2,h[w[0]].edges=[w[g-2],w[1]]):h[w[0]].type=1:C!==g-1||A?(h[w[C]].type=2,h[w[C]].edges=[w[C-1],w[A&&C===g-2?0:C+1]]):h[w[C]].type=1:2!==h[w[C]].type||A&&C===g-1||(h[w[C]].type=1,h[w[C]].edges=null)}var S=u.length,_=c.length;if(S>0||_>0){var T=lC.newInstance();T.setPoints(n.getPoints()),T.setPolys(n.getPolys());var O=[],P=0,M=[],E=[];T.buildLinks();for(var D=T.getPolys().getData(),I=0,k=0;k<D.length;k+=g+1,++I){g=D[k];for(var N=D.slice(k+1,k+1+g),R=0;R<g;++R){var B=N[R],L=N[(R+1)%g];null===h[B].edges&&(h[B].edges=[]),null==h[L].edges&&(h[L].edges=[]);var F=(O=T.getCellEdgeNeighbors(I,B,L)).length,V=0;if(0===F)V=3;else if(F>=2){if(!t.nonManifoldSmoothing){for(var j=0;j<F&&!(O[j]<I);++j);j>=F&&(V=2)}}else{if(!(1===F&&(P=O[0])>I))continue;if(t.featureEdgeSmoothing){ls.computeNormal(e.getPoint(N[0]),e.getPoint(N[1]),e.getPoint(N[2]),M);var G=T.getCellPoints(P).cellPointIds;ls.computeNormal(e.getPoint(G[0]),e.getPoint(G[1]),e.getPoint(G[2]),E),nR.dot(M,E)<=d&&(V=2)}}V&&0===h[B].type?(h[B].edges=[L],h[B].type=V):(V&&3===h[B].type||V&&2===h[B].type||!V&&0===h[B].type)&&(h[B].edges.push(L),h[B].type&&3===V&&(h[B].type=3)),V&&0===h[L].type?(h[L].edges=[B],h[L].type=V):(V&&3===h[L].type||V&&2===h[L].type||!V&&0===h[L].type)&&(h[L].edges.push(B),h[L].type&&3===V&&(h[L].type=3))}}}for(var U=0;U<p;++U)if(0===h[U].type);else if(1===h[U].type);else if(2===h[U].type||3===h[U].type)if(t.boundarySmoothing||3!==h[U].type)if(2!==(g=h[U].edges.length))h[U].type=1;else{for(var z=e.getPoint(h[U].edges[0]),W=e.getPoint(U),H=e.getPoint(h[U].edges[1]),q=[0,0,0],K=[0,0,0],X=0;X<3;++X)q[X]=W[X]-z[X],K[X]=H[X]-W[X];nR.normalize(q)>=0&&nR.normalize(K)>=0&&nR.dot(q,K)<f?h[U].type=1:h[U].type}else h[U].type=1;var Y=0,Z=1,J=2,Q=[];Q.push(a3.newInstance()),Q[Y].setNumberOfPoints(p),Q.push(a3.newInstance()),Q[Z].setNumberOfPoints(p),Q.push(a3.newInstance()),Q[J].setNumberOfPoints(p),Q.push(a3.newInstance()),Q[3].setNumberOfPoints(p);var $=iG.getCenter(n.getBounds()),ee=iG.getDiagonalLength(n.getBounds());if(t.normalizeCoordinates)for(var et=[0,0,0],en=0;en<p;++en)e.getPoint(en,et),et[0]=(et[0]-$[0])/ee,et[1]=(et[1]-$[1])/ee,et[2]=(et[2]-$[2])/ee,(eR=Q[Y]).setPoint.apply(eR,[en].concat(et));else{var er=eE.newTypedArray(Q[Y].getDataType(),a);Q[Y].setData(er,3)}for(var ei=t.passBand,eo=Math.acos(1-.5*ei),ea=Array(t.numberOfIterations+1),es=Array(t.numberOfIterations+1),el=Array(t.numberOfIterations+1),eu=[0,0,0],ec=0;ec<=t.numberOfIterations;++ec)ea[ec]=.54+.46*Math.cos(ec*Math.PI/(t.numberOfIterations+1));for(var ed=0,ef=0,ep=!1,eh=0,em=0;!ep&&em<500;++em){es[0]=ea[0]*(eo+eh)/Math.PI;for(var eg=1;eg<=t.numberOfIterations;++eg)es[eg]=2*ea[eg]*Math.sin(eg*(eo+eh))/(eg*Math.PI);el[t.numberOfIterations]=0,el[t.numberOfIterations-1]=0,t.numberOfIterations>1&&(el[t.numberOfIterations-2]=2*(t.numberOfIterations-1)*es[t.numberOfIterations-1]);for(var ev=t.numberOfIterations-3;ev>=0;--ev)el[ev]=el[ev+2]+2*(ev+1)*es[ev+1];ef=0,ed=0+es[0],ef+=el[0];for(var ey=1;ey<=t.numberOfIterations;++ey)1===ey?(ed+=es[ey]*(1-.5*ei),ef+=el[ey]*(1-.5*ei)):(ed+=es[ey]*Math.cos(ey*Math.acos(1-.5*ei)),ef+=el[ey]*Math.cos(ey*Math.acos(1-.5*ei)));t.numberOfIterations>1?Math.abs(ed-1)>=.001?eh-=(ed-1)/ef:ep=!0:(ep=!0,eh=0)}Math.abs(ed-1)>=.001&&console.log("An optimal offset for the smoothing filter could not be found.  Unpredictable smoothing/shrinkage may result.");for(var eb=[0,0,0],ex=[0,0,0],ew=[0,0,0],eA=[0,0,0],eC=[0,0,0],eS=[0,0,0],e_=0;e_<p;++e_)if(null!=h[e_].edges&&(g=h[e_].edges.length)>0){Q[Y].getPoint(e_,eb),ew[0]=0,ew[1]=0,ew[2]=0;for(var eT=0;eT<g;++eT){Q[Y].getPoint(h[e_].edges[eT],ex);for(var eO=0;eO<3;++eO)ew[eO]+=(eb[eO]-ex[eO])/g}for(var eP=0;eP<3;++eP)ew[eP]=eb[eP]-.5*ew[eP];if((eB=Q[Z]).setPoint.apply(eB,[e_].concat(ew)),1===h[e_].type)Q[Y].getPoint(e_,ew);else for(var eM=0;eM<3;++eM)ew[eM]=es[0]*eb[eM]+es[1]*ew[eM];(eL=Q[3]).setPoint.apply(eL,[e_].concat(ew))}else(eF=Q[Z]).setPoint.apply(eF,[e_].concat(eu)),Q[Y].getPoint(e_,ew),(eV=Q[3]).setPoint.apply(eV,[e_].concat(ew));for(var eD=[0,0,0],eI=[0,0,0],ek=[0,0,0],eN=2;eN<=t.numberOfIterations;eN++){for(var eR,eB,eL,eF,eV,ej,eG,eU,ez,eW=0;eW<p;++eW)if((g=null!=h[eW].edges?h[eW].edges.length:0)>0){Q[Y].getPoint(eW,eD),Q[Z].getPoint(eW,eI),ew[0]=0,ew[1]=0,ew[2]=0;for(var eH=0;eH<g;++eH){Q[Z].getPoint(h[eW].edges[eH],ex);for(var eq=0;eq<3;++eq)ew[eq]+=(eI[eq]-ex[eq])/g}for(var eK=0;eK<3;++eK)ew[eK]=eI[eK]-eD[eK]+eI[eK]-ew[eK];(ej=Q[J]).setPoint.apply(ej,[eW].concat(ew)),Q[3].getPoint(eW,ek);for(var eX=0;eX<3;++eX)eA[eX]=ek[eX]+es[eN]*ew[eX];1!==h[eW].type&&(eG=Q[3]).setPoint.apply(eG,[eW].concat(eA))}else(eU=Q[Z]).setPoint.apply(eU,[eW].concat(eu)),(ez=Q[J]).setPoint.apply(ez,[eW].concat(eu));Y=(1+Y)%3,Z=(1+Z)%3,J=(1+J)%3}if(--eN,Y=3,t.normalizeCoordinates)for(var eY=[0,0,0],eZ=0;eZ<p;++eZ){Q[Y].getPoint(eZ,eY);for(var eJ=0;eJ<3;++eJ)eY[eJ]=eY[eJ]*ee+$[eJ];(o=Q[Y]).setPoint.apply(o,[eZ].concat(eY))}if(t.generateErrorScalars){for(var eQ=new Float32Array(p),e$=0;e$<p;++e$)e.getPoint(e$,eC),Q[Y].getPoint(e$,eS),eQ[e$]=Math.sqrt(Math.distance2BetweenPoints(eC,eS));var e0=nH.newInstance({numberOfComponents:1,values:eQ}),e1=i.getPointData().addArray(e0);i.getPointData().setActiveAttribute(e1,iK.SCALARS)}if(t.generateErrorVectors){for(var e2=new Float32Array(3*p),e3=0;e3<p;++e3){e.getPoint(e3,eC),Q[Y].getPoint(e3,eS);for(var e4=0;e4<3;++e4)e2[3*e3+e4]=eS[e4]-eC[e4]}var e5=nH.newInstance({numberOfComponents:3,values:e2});i.getPointData().setVectors(e5)}return Q[Y]},e.requestData=function(t,n){var i;if(e.getNumberOfInputPorts()){var o=t[0];if(o){var a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),s=e.vtkWindowedSincPolyDataFilterExecute(o.getPoints(),o,a);a.setPointData(o.getPointData()),a.setCellData(o.getCellData()),a.setFieldData(o.getFieldData()),a.setPoints(s),a.setVerts(o.getVerts()),a.setLines(o.getLines()),a.setPolys(o.getPolys()),a.setStrips(o.getStrips()),n[0]=a}}}}var fA=eE.newInstance(fw,"vtkWindowedSincPolyDataFilter"),fC=nH.VtkDataTypes,fS={point1:[0,.5,0],point2:[.5,0,0],center:[0,0,0],normal:[0,0,1],polarVector:[1,0,0],angle:90,resolution:6,negative:!1,useNormalAndAngle:!1,outputPointsPrecision:iX.SINGLE};function f_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fS,n),t.resolution<1&&(t.resolution=1),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["resolution","angle","negative","useNormalAndAngle","outputPointsPrecision"]),eE.setGetArray(e,t,["point1","point2","center","normal","polarVector"],3),t.classHierarchy.push("vtkArcSource"),e.requestData=function(e,n){var i,o=t.resolution,a=t.resolution+1,s=[0,0],l=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),u=0,c=.5,d=[0,0,0],f=[0,0,0];if(t.useNormalAndAngle)u=nR.radiansFromDegrees(t.angle),f[0]=t.polarVector[0],f[1]=t.polarVector[1],f[2]=t.polarVector[2],nR.cross(t.normal,t.polarVector,d),c=nR.normalize(f);else{nR.subtract(t.point1,t.center,f);var p=[0,0,0];nR.subtract(t.point2,t.center,p);var h=[0,0,0];nR.cross(f,p,h),nR.cross(h,f,d),u=Math.acos(nR.dot(f,p)/(nR.norm(f)*nR.norm(p))),t.negative&&(u-=2*Math.PI),c=nR.normalize(f)}var m=u/t.resolution;nR.normalize(d);var g=0;t.outputPointsPrecision===iX.SINGLE?g=fC.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(g=fC.DOUBLE);var v=a3.newInstance({dataType:g});v.setNumberOfPoints(a);var y=nH.newInstance({numberOfComponents:2,size:2*a,dataType:fC.FLOAT,name:"TextureCoordinates"}),b=nQ.newInstance();b.allocate(o);for(var x=0,w=0;w<=t.resolution;++w,x+=m){var A=Math.cos(x),C=Math.sin(x),S=[t.center[0]+A*c*f[0]+C*c*d[0],t.center[1]+A*c*f[1]+C*c*d[1],t.center[2]+A*c*f[2]+C*c*d[2]];s[0]=w/t.resolution,s[1]=0,v.setPoint.apply(v,[w].concat(S)),y.setTuple(w,s)}var _=Array.from({length:a},function(e,t){return t});b.insertNextCell(_),l.setPoints(v),l.getPointData().setTCoords(y),l.setLines(b),n[0]=l}}var fT={newInstance:eE.newInstance(f_,"vtkArcSource"),extend:f_},fO={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function fP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fO,n),eE.obj(e,t),eE.setGet(e,t,["height","radius","resolution","capping"]),eE.setGetArray(e,t,["center","direction"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){var i,o,a=2*Math.PI/t.resolution,s=-t.height/2,l=t.resolution+1,u=4*t.resolution+1+t.resolution,c=0,d=eE.newTypedArray(t.pointType,3*l),f=0,p=new Uint32Array(u);d[0]=t.height/2,d[1]=0,d[2]=0,t.capping&&(p[f++]=t.resolution);for(var h=0;h<t.resolution;h++)d[3*++c+0]=s,d[3*c+1]=t.radius*Math.cos(h*a),d[3*c+2]=t.radius*Math.sin(h*a),t.capping&&(p[t.resolution-f+++1]=c);for(var g=0;g<t.resolution;g++)p[f++]=3,p[f++]=0,p[f++]=g+1,p[f++]=g+2>t.resolution?1:g+2;(i=a$.buildFromRadian()).translate.apply(i,m(t.center)).rotateFromDirections([1,0,0],t.direction).apply(d);var v=(null==(o=n[0])?void 0:o.initialize())||lC.newInstance();v.getPoints().setData(d,3),v.getPolys().setData(p,1),n[0]=v}}var fM={newInstance:eE.newInstance(fP,"vtkConeSource"),extend:fP},fE={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function fD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fE,n),eE.obj(e,t),eE.setGet(e,t,["height","initAngle","otherRadius","radius","resolution","capping"]),eE.setGetArray(e,t,["center","direction"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){var i,o,a,s=2*Math.PI/t.resolution,l=2*t.resolution,u=5*t.resolution;t.capping&&(l=4*t.resolution,u=7*t.resolution+2);for(var c=eE.newTypedArray(t.pointType,3*l),d=0,f=new Uint32Array(u),p=new Float32Array(3*l),h=nH.newInstance({numberOfComponents:3,values:p,name:"Normals"}),g=new Float32Array(2*l),v=nH.newInstance({numberOfComponents:2,values:g,name:"TCoords"}),y=[0,0,0],b=[0,0,0],x=[0,0,0],w=[0,0,0],A=[0,0],C=[0,0],S=null==t.otherRadius?t.radius:t.otherRadius,_=0;_<t.resolution;_++){y[0]=Math.cos(_*s+t.initAngle),b[0]=y[0],x[0]=t.radius*y[0]+t.center[0],w[0]=x[0],A[0]=Math.abs(2*_/t.resolution-1),C[0]=A[0],x[1]=.5*t.height+t.center[1],w[1]=-.5*t.height+t.center[1],A[1]=0,C[1]=1,y[2]=-Math.sin(_*s+t.initAngle),b[2]=y[2],x[2]=S*y[2]+t.center[2],w[2]=x[2];for(var T=2*_,O=0;O<3;O++)p[3*T+O]=y[O],p[3*(T+1)+O]=b[O],c[3*T+O]=x[O],c[3*(T+1)+O]=w[O],O<2&&(g[2*T+O]=A[O],g[2*(T+1)+O]=C[O])}for(var P=0;P<t.resolution;P++){f[d++]=4,f[d++]=2*P,f[d++]=2*P+1;var M=(2*P+3)%(2*t.resolution);f[d++]=M,f[d++]=M-1}if(t.capping){for(var E=0;E<t.resolution;E++){x[0]=t.radius*Math.cos(E*s+t.initAngle),w[0]=x[0],A[0]=x[0],C[0]=x[0],x[0]+=t.center[0],w[0]+=t.center[0],y[1]=1,b[1]=-1,x[1]=.5*t.height+t.center[1],w[1]=-.5*t.height+t.center[1],x[2]=-S*Math.sin(E*s+t.initAngle),w[2]=x[2],A[1]=x[2],C[1]=x[2],x[2]+=t.center[2],w[2]+=t.center[2];for(var D=2*t.resolution+E,I=3*t.resolution+t.resolution-E-1,k=0;k<3;k++)p[3*D+k]=y[k],p[3*I+k]=b[k],c[3*D+k]=x[k],c[3*I+k]=w[k],k<2&&(g[2*D+k]=A[k],g[2*I+k]=C[k])}f[d++]=t.resolution;for(var N=0;N<t.resolution;N++)f[d++]=2*t.resolution+N;f[d++]=t.resolution;for(var R=0;R<t.resolution;R++)f[d++]=3*t.resolution+R}(i=(o=a$.buildFromRadian()).translate.apply(o,m(t.center)).rotateFromDirections([0,1,0],t.direction)).translate.apply(i,m(t.center.map(function(e){return -1*e}))).apply(c);var B=(null==(a=n[0])?void 0:a.initialize())||lC.newInstance();B.getPoints().setData(c,3),B.getPolys().setData(f,1),B.getPointData().setNormals(h),B.getPointData().setTCoords(v),n[0]=B}}var fI={newInstance:eE.newInstance(fD,"vtkCylinderSource"),extend:fD},fk={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function fN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fk,n),eE.obj(e,t),eE.setGet(e,t,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),eE.setGetArray(e,t,["direction"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkArrowSource"),e.requestData=function(e,n){var i=fI.newInstance({capping:!0});i.setResolution(t.shaftResolution),i.setRadius(t.shaftRadius),i.setHeight(1-t.tipLength),i.setCenter(0,.5*(1-t.tipLength),0);var o=i.getOutputData(),a=o.getPoints().getData(),s=o.getPointData().getNormals().getData();a$.buildFromDegree().rotateZ(-90).apply(a).apply(s);var l=fM.newInstance();l.setResolution(t.tipResolution),l.setHeight(t.tipLength),l.setRadius(t.tipRadius);var u=l.getOutputData(),c=u.getPoints().getData();a$.buildFromRadian().translate(1-.5*t.tipLength,0,0).apply(c);var d=u4.newInstance();d.setInputData(o),d.addInputData(u);var f=d.getOutputData(),p=f.getPoints().getData();a$.buildFromRadian().translate(.5*t.tipLength-.5,0,0).apply(p),t.invert?(a$.buildFromRadian().rotateFromDirections([1,0,0],t.direction).scale(-1,-1,-1).apply(p),n[0]=f):(a$.buildFromRadian().rotateFromDirections([1,0,0],t.direction).scale(1,1,1).apply(p),n[0]=d.getOutputData())}}var fR={newInstance:eE.newInstance(fN,"vtkArrowSource"),extend:fN};function fB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function fL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fB(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({face:!0,center:[0,0,0],lines:!1,direction:[1,0,0],pointType:"Float64Array",radius:1,resolution:6},n)),eE.obj(e,t),eE.setGet(e,t,["radius","resolution","lines","face"]),eE.setGetArray(e,t,["center","direction"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkCircleSource"),e.requestData=function(e,n){var i,o,a,s=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),l=eE.newTypedArray(t.pointType,3*t.resolution),u=new Uint32Array(t.resolution+2);u[0]=t.resolution+1;for(var c=2*Math.PI/t.resolution,d=0;d<t.resolution;d++){var f=t.center[0],p=t.radius*Math.cos(d*c)+t.center[1],h=t.radius*Math.sin(d*c)+t.center[2];l.set([f,p,h],3*d),u[d+1]=d}u[u.length-1]=u[1],s.getPoints().setData(l,3),t.lines&&s.getLines().setData(u,1),t.face&&s.getPolys().setData(u,1),(o=(a=a$.buildFromRadian()).translate.apply(a,m(t.center)).rotateFromDirections([1,0,0],t.direction)).translate.apply(o,m(ta(m(t.center),-1))).apply(l),n[0]=s}}var fF={newInstance:eE.newInstance(fL,"vtkCircleSource"),extend:fL},fV={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float64Array"};function fj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fV,n),eE.obj(e,t),eE.setGet(e,t,["height","resolution","startTheta","endTheta","skipInnerFaces"]),eE.setGetArray(e,t,["center","direction"],3),eE.getArray(e,t,["cellFields"]),eE.algo(e,t,0,1),function(e,t){function n(){for(;t.cellFields.length<t.radius.length;)t.cellFields.push(t.cellFields.length)}t.classHierarchy.push("vtkConcentricCylinderSource"),e.clearRadius=function(){t.radius=[],t.cellFields=[],e.modified()},e.addRadius=function(i,o){t.radius.push(i),void 0!==o&&t.cellFields.push(o),n(),e.modified()},e.getNumberOfRadius=function(){return t.radius.length},e.getRadius=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.radius[e]},e.setRadius=function(n,i){t.radius[n]=i,e.modified()},e.setCellField=function(n,i){t.cellFields[n]=i,e.modified()},e.removeMask=function(){t.mask=null,e.modified()},e.setMaskLayer=function(n,i){var o=!1;!t.mask&&i&&(o=!0,t.mask=[]),t.mask&&(!t.mask[n]!=!i&&(o=!0),t.mask[n]=i),o&&e.modified()},e.getMaskLayer=function(e){return void 0===e?t.mask:t.mask[e]},e.requestData=function(e,i){var o,a;if(t.radius.length){n();var s=t.radius.length,l=t.height/2,u=0,c=0,d=t.startTheta<t.endTheta?t.startTheta:t.endTheta;d*=Math.PI/180;var f=t.endTheta>t.startTheta?t.endTheta:t.startTheta;f*=Math.PI/180;var p=t.resolution,h=!1;f>=d+2*Math.PI?f=d+2*Math.PI:(++p,h=!0);var g=(f-d)/t.resolution,v=p*s*2+2;if(t.skipInnerFaces||t.mask)if(!t.skipInnerFaces&&t.mask){t.mask[0]||(u+=2*(p+1)+5*p+10*!!h,c+=2+p+2*!!h);for(var y=1;y<s;y++)t.mask[y]||(u+=20*p+10*!!h,c+=4*p+2*!!h)}else{t.skipInnerFaces&&t.mask&&t.mask[0]||(u+=2*(p+1)+10*!!h,c+=2+2*!!h,(1===t.radius.length||!t.skipInnerFaces||t.mask&&t.mask[1])&&(u+=5*p,c+=p));for(var b=1;b<s;b++)if(!t.skipInnerFaces||!t.mask||!t.mask[b]){var x=s-1===b;u+=10*p+10*!!h,c+=2*p+2*!!h,(!t.skipInnerFaces||t.mask&&t.mask[b-1])&&(u+=5*p,c+=p),(x||!t.skipInnerFaces||t.mask&&t.mask[b+1])&&(u+=5*p,c+=p)}}else u=2*(p+1)+5*p+(s-1)*p*20+(h?10*s:0),c=2+p+4*(s-1)*p+(h?2*s:0);var w=0,A=eE.newTypedArray(t.pointType,3*v),C=0,S=new Uint32Array(u),_=0,T=new Float32Array(c);A[3*w+0]=0,A[3*w+1]=0,A[3*w+2]=l,A[3*++w+0]=0,A[3*w+1]=0,A[3*w+2]=-l,w++;for(var O=0;O<s;O++){for(var P=t.radius[O],M=0;M<p;M++){var E=d+M*g;A[3*w+0]=P*Math.cos(E),A[3*w+1]=P*Math.sin(E),A[3*w+2]=l,w++}for(var D=0;D<p;D++){var I=d+D*g;A[3*w+0]=P*Math.cos(I),A[3*w+1]=P*Math.sin(I),A[3*w+2]=-l,w++}}var k=t.cellFields[0];if(!t.mask||!t.mask[0]){T[_++]=k,S[C++]=p+ +!!h,h&&(S[C++]=0);for(var N=0;N<p;N++)S[C++]=N+2;T[_++]=k,S[C++]=p+ +!!h,h&&(S[C++]=1);for(var R=0;R<p;R++)S[C++]=2*p-R-1+2;if(!t.skipInnerFaces||t.mask&&t.mask[1]||1===s)for(var B=0;B<t.resolution;B++)S[C++]=4,S[C++]=(B+1)%p+2,S[C++]=B+2,S[C++]=B+p+2,S[C++]=(B+1)%p+p+2,T[_++]=k;h&&(S[C++]=4,S[C++]=2,S[C++]=0,S[C++]=1,S[C++]=p+2,T[_++]=k,S[C++]=4,S[C++]=0,S[C++]=p+1,S[C++]=2*p+1,S[C++]=1,T[_++]=k)}for(var L=1;L<s;L++)if(!t.mask||!t.mask[L]){var F=2*p*(L-1)+2,V=F+2*p,j=s-1===L;k=t.cellFields[L];for(var G=0;G<t.resolution;G++)S[C++]=4,S[C++]=G+F,S[C++]=(G+1)%p+F,S[C++]=(G+1)%p+V,S[C++]=G+V,T[_++]=k;for(var U=0;U<t.resolution;U++)S[C++]=4,S[C++]=(U+1)%p+F+p,S[C++]=U+F+p,S[C++]=U+V+p,S[C++]=(U+1)%p+V+p,T[_++]=k;if(!t.skipInnerFaces||t.mask&&t.mask[L-1])for(var z=0;z<t.resolution;z++)S[C++]=4,S[C++]=z+F,S[C++]=(z+1)%p+F,S[C++]=(z+1)%p+p+F,S[C++]=z+p+F,T[_++]=k;if(!t.skipInnerFaces||j||t.mask&&(t.mask[L+1]||j))for(var W=0;W<t.resolution;W++)S[C++]=4,S[C++]=(W+1)%p+V,S[C++]=W+V,S[C++]=W+p+V,S[C++]=(W+1)%p+p+V,T[_++]=k;h&&(S[C++]=4,S[C++]=V,S[C++]=F,S[C++]=p+F,S[C++]=p+V,T[_++]=k,S[C++]=4,S[C++]=t.resolution+V,S[C++]=t.resolution+F,S[C++]=t.resolution+p+F,S[C++]=t.resolution+p+V,T[_++]=k)}(o=a$.buildFromRadian()).translate.apply(o,m(t.center)).rotateFromDirections([0,0,1],t.direction).apply(A);var H=(null==(a=i[0])?void 0:a.initialize())||lC.newInstance();H.getPoints().setData(A,3),H.getPolys().setData(S,1),H.getCellData().setScalars(nH.newInstance({name:"layer",values:T})),i[0]=H}else eE.vtkErrorMacro("No radius defined")}}(e,t)}var fG={newInstance:eE.newInstance(fj,"vtkConcentricCylinderSource"),extend:fj},fU=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],fz=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22],fW={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function fH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fW,n),eE.obj(e,t),eE.setGet(e,t,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),eE.setGetArray(e,t,["center","rotations"],3),eE.setGetArray(e,t,["matrix"],16),t._polys=nQ.newInstance({values:Uint16Array.from(fz)}),t._lineCells=nQ.newInstance({values:Uint16Array.from(fU)}),eE.moveToProtected(e,t,["polys","lineCells"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkCubeSource"),e.requestData=function(e,n){var i,o=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();n[0]=o;var a=eE.newTypedArray(t.pointType,72);o.getPoints().setData(a,3);var s=eE.newTypedArray(t.pointType,72),l=nH.newInstance({name:"Normals",values:s,numberOfComponents:3});o.getPointData().setNormals(l);var u=2;!0===t.generate3DTextureCoordinates&&(u=3);var c=eE.newTypedArray(t.pointType,24*u),d=nH.newInstance({name:"TextureCoordinates",values:c,numberOfComponents:u});o.getPointData().setTCoords(d);var f,p=[0,0,0],h=[0,0,0],g=[0,0],v=0;p[0]=-t.xLength/2,h[0]=-1,h[1]=0,h[2]=0;for(var y=0;y<2;y++){p[1]=-t.yLength/2;for(var b=0;b<2;b++){g[1]=p[1]+.5,p[2]=-t.zLength/2;for(var x=0;x<2;x++)g[0]=(p[2]+.5)*(1-2*y),a[3*v]=p[0],a[3*v+1]=p[1],a[3*v+2]=p[2],s[3*v]=h[0],s[3*v+1]=h[1],s[3*v+2]=h[2],2===u?(c[v*u]=g[0],c[v*u+1]=g[1]):(c[v*u]=2*y-1,c[v*u+1]=2*b-1,c[v*u+2]=2*x-1),v++,p[2]+=t.zLength;p[1]+=t.yLength}p[0]+=t.xLength,h[0]+=2}p[1]=-t.yLength/2,h[1]=-1,h[0]=0,h[2]=0;for(var w=0;w<2;w++){p[0]=-t.xLength/2;for(var A=0;A<2;A++){g[0]=(p[0]+.5)*(2*w-1),p[2]=-t.zLength/2;for(var C=0;C<2;C++)g[1]=-1*(p[2]+.5),a[3*v]=p[0],a[3*v+1]=p[1],a[3*v+2]=p[2],s[3*v]=h[0],s[3*v+1]=h[1],s[3*v+2]=h[2],2===u?(c[v*u]=g[0],c[v*u+1]=g[1]):(c[v*u]=2*A-1,c[v*u+1]=2*w-1,c[v*u+2]=2*C-1),v++,p[2]+=t.zLength;p[0]+=t.xLength}p[1]+=t.yLength,h[1]+=2}p[2]=-t.zLength/2,h[2]=-1,h[0]=0,h[1]=0;for(var S=0;S<2;S++){p[1]=-t.yLength/2;for(var _=0;_<2;_++){g[1]=p[1]+.5,p[0]=-t.xLength/2;for(var T=0;T<2;T++)g[0]=(p[0]+.5)*(2*S-1),a[3*v]=p[0],a[3*v+1]=p[1],a[3*v+2]=p[2],s[3*v]=h[0],s[3*v+1]=h[1],s[3*v+2]=h[2],2===u?(c[v*u]=g[0],c[v*u+1]=g[1]):(c[v*u]=2*T-1,c[v*u+1]=2*_-1,c[v*u+2]=2*S-1),v++,p[0]+=t.xLength;p[1]+=t.yLength}p[2]+=t.zLength,h[2]+=2}if(t.rotations&&a$.buildFromDegree().rotateX(t.rotations[0]).rotateY(t.rotations[1]).rotateZ(t.rotations[2]).apply(a).apply(s),t.center&&(f=a$.buildFromRadian()).translate.apply(f,m(t.center)).apply(a),t.matrix){a$.buildFromRadian().setMatrix(t.matrix).apply(a);var O=[t.matrix[0],t.matrix[1],t.matrix[2],0,t.matrix[4],t.matrix[5],t.matrix[6],0,t.matrix[8],t.matrix[9],t.matrix[10],0,0,0,0,1];a$.buildFromRadian().setMatrix(O).apply(s)}t.generateFaces?o.getPolys().deepCopy(t._polys):o.getPolys().initialize(),t.generateLines?(o.getLines().deepCopy(t._lineCells),o.getPointData().setNormals(null)):o.getLines().initialize(),o.modified()},e.setBounds=function(){var t=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))t=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)t.push(n<0||arguments.length<=n?void 0:arguments[n]);6===t.length&&(e.setXLength(t[1]-t[0]),e.setYLength(t[3]-t[2]),e.setZLength(t[5]-t[4]),e.setCenter([(t[0]+t[1])/2,(t[2]+t[3])/2,(t[4]+t[5])/2]))}}var fq={newInstance:eE.newInstance(fH,"vtkCubeSource"),extend:fH},fK={focus:null,modelBounds:[-1,1,-1,1,-1,1],focalPoint:[0,0,0],outline:!0,axes:!0,xShadows:!0,yShadows:!0,zShadows:!0,wrap:!1,translationMode:!1};function fX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fK,n),eE.obj(e,t),eE.get(e,t,["focus"]),eE.getArray(e,t,["modelBounds"],6),eE.getArray(e,t,["focalPoint"],3),eE.setGet(e,t,["outline"]),eE.setGet(e,t,["axes"]),eE.setGet(e,t,["xShadows"]),eE.setGet(e,t,["yShadows"]),eE.setGet(e,t,["zShadows"]),eE.setGet(e,t,["wrap"]),eE.setGet(e,t,["translationMode"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkCursor3D"),e.setModelBounds=function(n){if(Array.isArray(n)&&!(n.length<6)&&(t.modelBounds[0]!==n[0]||t.modelBounds[1]!==n[1]||t.modelBounds[2]!==n[2]||t.modelBounds[3]!==n[3]||t.modelBounds[4]!==n[4]||t.modelBounds[5]!==n[5])){e.modified(),t.modelBounds=n.map(function(e){return Number(e)});for(var i=0;i<3;++i)t.modelBounds[2*i]=Math.min(t.modelBounds[2*i],t.modelBounds[2*i+1])}},e.setFocalPoint=function(n){if(Array.isArray(n)&&!(n.length<3)&&(n[0]!==t.focalPoint[0]||n[1]!==t.focalPoint[1]||n[2]!==t.focalPoint[2])){e.modified();for(var i=[],o=0;o<3;o++)i[o]=n[o]-t.focalPoint[o],t.focalPoint[o]=Number(n[o]),t.translationMode?(t.modelBounds[2*o]+=i[o],t.modelBounds[2*o+1]+=i[o]):t.wrap?t.focalPoint[o]=t.modelBounds[2*o]+(t.focalPoint[o]-t.modelBounds[2*o])%(t.modelBounds[2*o+1]-t.modelBounds[2*o]):(n[o]<t.modelBounds[2*o]&&(t.focalPoint[o]=t.modelBounds[2*o]),n[o]>t.modelBounds[2*o+1]&&(t.focalPoint[o]=t.modelBounds[2*o+1]))}},e.setAll=function(t){e.setOutline(t),e.setAxes(t),e.setXShadows(t),e.setYShadows(t),e.setZShadows(t)},e.allOn=function(){e.setAll(!0)},e.allOff=function(){e.setAll(!1)},e.requestData=function(e,n){var i,o=0,a=0;if(t.wrap)for(var s=0;s<t.focalPoint.length;++s)t.focalPoint[s]=t.modelBounds[2*s]+(t.focalPoint[s]-t.modelBounds[2*s])%(t.modelBounds[2*s+1]-t.modelBounds[2*s]);else for(var l=0;l<t.focalPoint.length;++l)t.focalPoint[l]=Math.max(t.focalPoint[l],t.modelBounds[2*l]),t.focalPoint[l]=Math.min(t.focalPoint[l],t.modelBounds[2*l+1]);if(t.axes&&(o+=6,a+=3),t.outline&&(o+=8,a+=12),t.xShadows&&(o+=8,a+=4),t.yShadows&&(o+=8,a+=4),t.zShadows&&(o+=8,a+=4),0!==o){var u=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),c=a3.newInstance({size:3*o}),d=nQ.newInstance({size:3*a}),f=0,p=0;if(t.axes&&(c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.focalPoint[2],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.focalPoint[2],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[4],++f,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[5],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p),t.outline){c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.modelBounds[4];var h=f;++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.modelBounds[4];var m=f;++f,c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.modelBounds[4];var g=f;++f,c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.modelBounds[5];var v=f;++f,d.getData()[3*(p+0)+0]=2,d.getData()[3*(p+0)+1]=h,d.getData()[3*(p+0)+2]=m,d.getData()[3*(p+1)+0]=2,d.getData()[3*(p+1)+1]=h,d.getData()[3*(p+1)+2]=g,d.getData()[3*(p+2)+0]=2,d.getData()[3*(p+2)+1]=h,d.getData()[3*(p+2)+2]=v,p+=3,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.modelBounds[5];var y=f;++f,c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.modelBounds[5];var b=f;++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.modelBounds[5];var x=f;++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.modelBounds[4];var w=f;++f,d.getData()[3*(p+0)+0]=2,d.getData()[3*(p+0)+1]=y,d.getData()[3*(p+0)+2]=b,d.getData()[3*(p+1)+0]=2,d.getData()[3*(p+1)+1]=y,d.getData()[3*(p+1)+2]=x,d.getData()[3*(p+2)+0]=2,d.getData()[3*(p+2)+1]=y,d.getData()[3*(p+2)+2]=w,p+=3,d.getData()[3*(p+0)+0]=2,d.getData()[3*(p+0)+1]=m,d.getData()[3*(p+0)+2]=w,d.getData()[3*(p+1)+0]=2,d.getData()[3*(p+1)+1]=m,d.getData()[3*(p+1)+2]=x,p+=2,d.getData()[3*(p+0)+0]=2,d.getData()[3*(p+0)+1]=g,d.getData()[3*(p+0)+2]=w,d.getData()[3*(p+1)+0]=2,d.getData()[3*(p+1)+1]=g,d.getData()[3*(p+1)+2]=b,p+=2,d.getData()[3*(p+0)+0]=2,d.getData()[3*(p+0)+1]=v,d.getData()[3*(p+0)+2]=x,d.getData()[3*(p+1)+0]=2,d.getData()[3*(p+1)+1]=v,d.getData()[3*(p+1)+2]=b,p+=2}if(t.xShadows)for(var A=0;A<2;++A)c.getData()[3*f+0]=t.modelBounds[A],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*f+0]=t.modelBounds[A],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.focalPoint[2],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p,c.getData()[3*f+0]=t.modelBounds[A],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[4],++f,c.getData()[3*f+0]=t.modelBounds[A],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[5],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p;if(t.yShadows)for(var C=0;C<2;++C)c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.modelBounds[C+2],c.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.modelBounds[C+2],c.getData()[3*f+2]=t.focalPoint[2],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[C+2],c.getData()[3*f+2]=t.modelBounds[4],++f,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[C+2],c.getData()[3*f+2]=t.modelBounds[5],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p;if(t.zShadows)for(var S=0;S<2;++S)c.getData()[3*f+0]=t.modelBounds[0],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[S+4],++f,c.getData()[3*f+0]=t.modelBounds[1],c.getData()[3*f+1]=t.focalPoint[1],c.getData()[3*f+2]=t.modelBounds[S+4],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[2],c.getData()[3*f+2]=t.modelBounds[S+4],++f,c.getData()[3*f+0]=t.focalPoint[0],c.getData()[3*f+1]=t.modelBounds[3],c.getData()[3*f+2]=t.modelBounds[S+4],++f,d.getData()[3*p+0]=2,d.getData()[3*p+1]=f-2,d.getData()[3*p+2]=f-1,++p;var _=a3.newInstance({size:3});_.getData()[0]=t.focalPoint[0],_.getData()[1]=t.focalPoint[1],_.getData()[2]=t.focalPoint[2],t.focus=lC.newInstance(),t.focus.setPoints(_),u.setPoints(c),u.setLines(d),n[0]=u}}}var fY={newInstance:eE.newInstance(fX,"vtkCursor3D"),extend:fX};function fZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var fJ=eE.vtkErrorMacro;function fQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({innerRadius:.25,outerRadius:.5,center:[0,0,0],normal:[0,0,1],radialResolution:1,circumferentialResolution:6,pointType:"Float64Array"},n)),eE.obj(e,t),eE.setGet(e,t,["innerRadius","outerRadius","radialResolution","circumferentialResolution","pointType"]),eE.setGetArray(e,t,["center","normal"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkDiskSource"),e.requestData=function(e,n){var i,o=t.innerRadius,a=t.outerRadius,s=t.center,l=t.normal,u=t.radialResolution,c=t.circumferentialResolution,d=t.pointType,f=a3.newInstance({dataType:d}),p=[l[0],l[1],l[2]],h=Math.hypot(p[0],p[1],p[2]);if(0!==h){p[0]/=h,p[1]/=h,p[2]/=h;for(var m=a$.buildFromDegree().identity().translate(-s[0],-s[1],-s[2]).rotateFromDirections([0,0,1],p).translate(s[0],s[1],s[2]).getMatrix(),g=nQ.newInstance(),v=(a-o)/u,y=2*Math.PI/c,b=0;b<c;b++)for(var x=b*y,w=Math.cos(x),A=Math.sin(x),C=0;C<=u;C++){var S=o+C*v,_=[s[0]+S*w,s[1]+S*A,s[2]],T=m[0]*_[0]+m[4]*_[1]+m[8]*_[2]+m[12],O=m[1]*_[0]+m[5]*_[1]+m[9]*_[2]+m[13],P=m[2]*_[0]+m[6]*_[1]+m[10]*_[2]+m[14];f.insertNextPoint(T,O,P)}for(var M=u*c,E=new Uint8Array(5*M),D=0,I=0;I<t.circumferentialResolution;I++)for(var k=0;k<t.radialResolution;k++){var N=I*(t.radialResolution+1)+k,R=N+1,B=I<t.circumferentialResolution-1?R+(t.radialResolution+1):k+1,L=B-1;E[D++]=4,E[D++]=N,E[D++]=R,E[D++]=B,E[D++]=L}g.setData(E,M,1);var F=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();F.setPoints(f),F.setPolys(g),n[0]=F}else fJ("Normal vector cannot be zero-length")}}var f$={newInstance:eE.newInstance(fQ,"vtkDiskSource"),extend:fQ},f0=eE.vtkErrorMacro,f1=nH.VtkDataTypes,f2={center:[0,0,0],normal:[0,0,1],majorRadiusVector:[1,0,0],startAngle:0,segmentAngle:90,resolution:100,close:!1,outputPointsPrecision:iX.SINGLE,ratio:1};function f3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f2,n),t.resolution<1&&(t.resolution=1),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["resolution","startAngle","segmentAngle","close","outputPointsPrecision","ratio"]),eE.setGetArray(e,t,["center","normal","majorRadiusVector"],3),t.classHierarchy.push("vtkEllipseArcSource"),e.requestData=function(e,n){var i,o=1e-5>Math.abs(t.segmentAngle-360),a=t.close&&!o?t.resolution+1:t.resolution,s=a+1,l=[0,0],u=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),c=m(t.normal);nR.normalize(c);var d=[0,0,0];if(nR.cross(c,t.majorRadiusVector,d),1e-10>nR.norm(d))f0("Ellipse normal vector and major radius axis are collinear");else{nR.normalize(d);var f=[0,0,0];nR.cross(d,c,f),nR.normalize(f);var p=nR.norm(t.majorRadiusVector),h=p*t.ratio,g=nR.radiansFromDegrees(t.startAngle);g<0&&(g+=2*Math.PI);var v=nR.radiansFromDegrees(t.segmentAngle)/t.resolution,y=f1.FLOAT;t.outputPointsPrecision===iX.SINGLE?y=f1.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(y=f1.DOUBLE);var b=a3.newInstance({dataType:y});b.setNumberOfPoints(s);var x=nH.newInstance({numberOfComponents:2,size:2*s,dataType:f1.FLOAT,name:"TextureCoordinates"}),w=nQ.newInstance();w.allocate(a);for(var A=t.close&&o,C=g,S=0,_=0;_<=a;++_,C+=v){var T=C-2*Math.floor(C/(2*Math.PI))*Math.PI,O=Math.atan(Math.tan(T)*t.ratio);T>Math.PI/2&&T<=Math.PI?O+=Math.PI:T>Math.PI&&T<=1.5*Math.PI&&(O-=Math.PI);var P=Math.cos(O),M=Math.sin(O),E=[t.center[0]+p*P*f[0]+h*M*d[0],t.center[1]+p*P*f[1]+h*M*d[1],t.center[2]+p*P*f[2]+h*M*d[2]];l[0]=_/a,l[1]=0,_===a&&A||(b.setPoint.apply(b,[S].concat(E)),x.setTuple(S,l),S++)}for(var D=S,I=[],k=0;k<D-1;++k)I.push(k);t.close?I.push(0):I.push(D-1),w.insertNextCell(I),u.setPoints(b),u.getPointData().setTCoords(x),u.setLines(w),n[0]=u}}}var f4={newInstance:eE.newInstance(f3,"vtkEllipseArcSource"),extend:f3},f5={lineValue:0,fillValue:255,gridSpacing:[10,10,0],gridOrigin:[0,0,0],dataSpacing:[1,1,1],dataOrigin:[0,0,0],dataExtent:[0,255,0,255,0,0],dataDirection:[1,0,0,0,1,0,0,0,1]};function f6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f5,n),eE.obj(e,t),eE.setGet(e,t,["lineValue","fillValue"]),eE.setGetArray(e,t,["gridOrigin","gridSpacing","dataOrigin","dataSpacing"],3),eE.setGetArray(e,t,["dataExtent"],6),eE.setGetArray(e,t,["dataDirection"],9),eE.algo(e,t,0,1),function(e,t){var n=this;t.classHierarchy.push("vtkImageGridSource"),e.requestData=function(e,i){var o={},a={type:"vtkImageData",mtime:t.mtime,metadata:{source:"vtkImageGridSource",state:o}};["gridSpacing","gridOrigin","dataSpacing","dataOrigin"].forEach(function(e){o[e]=[].concat(t[e])});var s=aP.newInstance(a);s.setOrigin(t.dataOrigin[0],t.dataOrigin[1],t.dataOrigin[2]),s.setSpacing(t.dataSpacing[0],t.dataSpacing[1],t.dataSpacing[2]),s.setExtent.apply(n,t.dataExtent),s.setDirection(t.dataDirection);var l=[0,0,0];l=l.map(function(e,n){return t.dataExtent[2*n+1]-t.dataExtent[2*n]+1});for(var u=new Uint8Array(l[0]*l[1]*l[2]),c=0,d=0,f=0,p=0,h=t.dataExtent[4];h<=t.dataExtent[5];h++){f=t.gridSpacing[2]?h%t.gridSpacing[2]===t.gridOrigin[2]:0;for(var m=t.dataExtent[2];m<=t.dataExtent[3];m++){d=t.gridSpacing[1]?m%t.gridSpacing[1]===t.gridOrigin[1]:0;for(var g=t.dataExtent[0];g<=t.dataExtent[1];g++)c=t.gridSpacing[0]?g%t.gridSpacing[0]===t.gridOrigin[0]:0,u[p]=f||d||c?t.lineValue:t.fillValue,p++}}var v=nH.newInstance({numberOfComponents:1,values:u});v.setName("scalars"),s.getPointData().setScalars(v),i[0]=s}}(e,t)}var f8={newInstance:eE.newInstance(f6,"vtkImageGridSource"),extend:f6},f9=eE.vtkWarningMacro,f7={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float64Array"};function pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f7,n),eE.obj(e,t),eE.setGet(e,t,["resolution"]),eE.setGetArray(e,t,["point1","point2"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkLineSource"),e.requestData=function(e,n){var i=n[0],o=i?i.getPoints().getDataType():t.pointType,a=(null==i?void 0:i.initialize())||lC.newInstance(),s=[];if(to(t.point2,t.point1,s),0>=tp(s))f9("Zero-length line definition");else{var l=t.resolution,u=l+1,c=eE.newTypedArray(o,3*u);a.getPoints().setData(c,3);var d=new Uint32Array(u+1);a.getLines().setData(d,1);for(var f=0,p=0,h=0;h<l+1;h++)p=h/l,c[3*f]=t.point1[0]+p*s[0],c[3*f+1]=t.point1[1]+p*s[1],c[3*f+2]=t.point1[2]+p*s[2],f++;f=0,d[0]=u;for(var m=0;m<u;m++)d[m+1]=m;n[0]=a}}}var pt={newInstance:eE.newInstance(pe,"vtkLineSource"),extend:pe},pn=eE.vtkWarningMacro,pr={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float64Array"};function pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pr,n),t.normal=[0,0,1],t.center=[0,0,0],eE.obj(e,t),eE.setGet(e,t,["xResolution","yResolution"]),eE.setGetArray(e,t,["origin"],3),eE.getArray(e,t,["point1","point2","normal","center"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkPlaneSource"),e.requestData=function(n,i){var o=i[0],a=o?o.getPoints().getDataType():t.pointType,s=(null==o?void 0:o.initialize())||lC.newInstance(),l=[],u=[];if(to(t.point1,t.origin,l),to(t.point2,t.origin,u),e.updatePlane(l,u)){var c=t.xResolution,d=t.yResolution,f=(c+1)*(d+1),p=eE.newTypedArray(a,3*f);s.getPoints().setData(p,3);var h=new Uint32Array(c*d*5);s.getPolys().setData(h,1);var m=new Float32Array(3*f),g=nH.newInstance({numberOfComponents:3,values:m,name:"Normals"});s.getPointData().setNormals(g);var v=new Float32Array(2*f),y=nH.newInstance({numberOfComponents:2,values:v,name:"TextureCoordinates"});s.getPointData().setTCoords(y);for(var b=new Float32Array(2),x=0,w=0;w<d+1;w++){b[1]=w/d;for(var A=0;A<c+1;A++)b[0]=A/c,p[3*x]=t.origin[0]+b[0]*l[0]+b[1]*u[0],p[3*x+1]=t.origin[1]+b[0]*l[1]+b[1]*u[1],p[3*x+2]=t.origin[2]+b[0]*l[2]+b[1]*u[2],v[2*x]=b[0],v[2*x+1]=b[1],m[3*x]=t.normal[0],m[3*x+1]=t.normal[1],m[3*x+2]=t.normal[2],x++}x=0;for(var C=0;C<d;C++)for(var S=0;S<c;S++)h[5*x+0]=4,h[5*x+1]=S+C*(c+1),h[5*x+2]=h[5*x+1]+1,h[5*x+3]=h[5*x+1]+c+2,h[5*x+4]=h[5*x+1]+c+1,x++;i[0]=s}else pn("Bad plane definition")},e.setNormal=function(){var n=[];if(1==arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=m(arguments.length<=0?void 0:arguments[0]):3==arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),0!==th(n)){var i=tc(t.normal,n),o=0,a=[];i<1&&(i<=-1?(o=eK(180),to(t.point1,t.origin,a)):(tf(t.normal,n,a),o=Math.acos(i)),e.rotate(o,a))}},e.rotate=function(n,i){if(!(1e-6>Math.abs(n))){var o=od(new Float64Array(16)),a=[];ry(a,t.center),ov(o,o,t.center),ob(o,o,n,i),ov(o,o,a),rO(t.origin,t.origin,o),rO(t.point1,t.point1,o),rO(t.point2,t.point2,o),a$.buildFromRadian().rotate(n,i).apply(t.normal),e.modified()}},e.setCenter=function(){var n=[];if(1==arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=m(arguments.length<=0?void 0:arguments[0]):3==arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!rB(n,t.center)){var i=[];to(t.point1,t.origin,i);var o=[];to(t.point2,t.origin,o);for(var a=0;a<3;a++)t.center[a]=n[a],t.origin[a]=t.center[a]-.5*(i[a]+o[a]),t.point1[a]=t.origin[a]+i[a],t.point2[a]=t.origin[a]+o[a];e.modified()}},e.setPoint1=function(){var n=[];if(1==arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=m(arguments.length<=0?void 0:arguments[0]):3==arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!rB(n,t.point1)){var i=[],o=[];t.point1=m(n),to(t.point1,t.origin,i),to(t.point2,t.origin,o),e.updatePlane(i,o),e.modified()}},e.setPoint2=function(){var n=[];if(1==arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=m(arguments.length<=0?void 0:arguments[0]):3==arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!rB(n,t.point2)){var i=[],o=[];t.point2=m(n),to(t.point1,t.origin,i),to(t.point2,t.origin,o),e.updatePlane(i,o),e.modified()}},e.updatePlane=function(e,n){for(var i=0;i<3;i++)t.center[i]=t.origin[i]+.5*(e[i]+n[i]);return tf(e,n,t.normal),0!==th(t.normal)},e.setPoint1(t.point1),e.setPoint2(t.point2)}var po={newInstance:eE.newInstance(pi,"vtkPlaneSource"),extend:pi},pa={VTK_SOLID_TETRAHEDRON:0,VTK_SOLID_CUBE:1,VTK_SOLID_OCTAHEDRON:2,VTK_SOLID_ICOSAHEDRON:3,VTK_SOLID_DODECAHEDRON:4},ps=Math.sqrt(2),pl=Math.sqrt(3),pu={tetrahedron:{points:[1,1,1,-1,1,-1,1,-1,-1,-1,-1,1],cells:[0,2,1,1,2,3,0,3,2,0,1,3],numPoints:4,cellSize:3,numCells:4,scale:1/pl},cube:{points:[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1],cells:[0,1,5,4,0,4,7,3,4,5,6,7,3,7,6,2,1,2,6,5,0,3,2,1],numPoints:8,cellSize:4,numCells:6,scale:1/pl},octahedron:{points:[-1,-1,0,1,-1,0,1,1,0,-1,1,0,0,0,-ps,0,0,ps],cells:[4,1,0,4,2,1,4,3,2,4,0,3,0,1,5,1,2,5,2,3,5,3,0,5],numPoints:6,cellSize:3,numCells:8,scale:1/ps},icosahedron:{points:[0,.30901699,-.5,0,.30901699,.5,0,-.30901699,.5,-.30901699,.5,0,-.30901699,-.5,0,.30901699,.5,0,.30901699,-.5,0,0,-.30901699,-.5,.5,0,.30901699,-.5,0,.30901699,-.5,0,-.30901699,.5,0,-.30901699],cells:[0,3,5,1,5,3,1,9,2,1,2,8,0,11,7,0,7,10,2,4,6,7,6,4,3,10,9,4,9,10,5,8,11,6,11,8,1,3,9,1,8,5,0,10,3,0,5,11,7,4,10,7,11,6,2,9,4,2,6,8],numPoints:12,cellSize:3,numCells:20,scale:1.7013016233613873},dodecahedron:{points:[.38196601125,0,1,-.38196601125,0,1,.38196601125,0,-1,-.38196601125,0,-1,0,1,-.38196601125,0,1,.38196601125,0,-1,-.38196601125,0,-1,.38196601125,1,.38196601125,0,1,-.38196601125,0,-1,.38196601125,0,-1,-.38196601125,0,-.61803398875,.61803398875,.61803398875,.61803398875,-.61803398875,.61803398875,-.61803398875,-.61803398875,-.61803398875,.61803398875,.61803398875,-.61803398875,.61803398875,.61803398875,.61803398875,-.61803398875,.61803398875,-.61803398875,-.61803398875,-.61803398875,.61803398875,.61803398875,-.61803398875,-.61803398875],cells:[0,16,5,12,1,1,18,7,13,0,2,19,6,14,3,3,17,4,15,2,4,5,16,8,15,5,4,17,10,12,6,7,18,11,14,7,6,19,9,13,8,16,0,13,9,9,19,2,15,8,10,17,3,14,11,11,18,1,12,10],numPoints:20,cellSize:5,numCells:12,scale:1/1.070466269319}},pc={solidType:pa.VTK_SOLID_TETRAHEDRON,outputPointsPrecision:iX.DEFAULT,scale:1};function pd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pc,n),eE.obj(e,t),eE.setGet(e,t,["solidType","outputPointsPrecision","scale"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkPlatonicSolidSource"),e.requestData=function(e,n){var i,o,a,s=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();switch(t.solidType){case pa.VTK_SOLID_TETRAHEDRON:o=pu.tetrahedron;break;case pa.VTK_SOLID_CUBE:o=pu.cube;break;case pa.VTK_SOLID_OCTAHEDRON:o=pu.octahedron;break;case pa.VTK_SOLID_ICOSAHEDRON:o=pu.icosahedron;break;case pa.VTK_SOLID_DODECAHEDRON:o=pu.dodecahedron;break;default:o=pu.tetrahedron}t.outputPointsPrecision===iX.SINGLE?a=eI.FLOAT:t.outputPointsPrecision===iX.DOUBLE&&(a=eI.DOUBLE);for(var l=a3.newInstance({dataType:a,numberOfPoints:o.numPoints}),u=0;u<o.points.length;u+=3)l.insertNextPoint(o.scale*o.points[u]*t.scale,o.scale*o.points[u+1]*t.scale,o.scale*o.points[u+2]*t.scale);for(var c=nQ.newInstance(),d=0;d<o.cells.length;d+=o.cellSize){var f=o.cells.slice(d,d+o.cellSize);c.insertNextCell(f)}s.setPoints(l),s.setPolys(c),n[0]=s}}var pf={newInstance:eE.newInstance(pd,"vtkPlatonicSolidSource"),extend:pd,SolidType:pa},pp={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float64Array"};function ph(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pp,n),eE.obj(e,t),eE.setGet(e,t,["numberOfPoints","radius"]),eE.setGetArray(e,t,["center"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkPointSource"),e.requestData=function(e,n){var i=n[0],o=i?i.getPoints().getDataType():t.pointType,a=(null==i?void 0:i.initialize())||lC.newInstance(),s=t.numberOfPoints,l=eE.newTypedArray(o,3*s);a.getPoints().setData(l,3);var u,c,d,f,p,h=new Uint32Array(s+1);a.getVerts().setData(h,1);for(var m=0;m<s;m++)c=Math.sqrt(1-(u=1-2*tn())*u),f=(d=t.radius*Math.pow(tn(),.33333333))*c,p=2*Math.PI*tn(),l[3*m]=t.center[0]+f*Math.cos(p),l[3*m+1]=t.center[1]+f*Math.sin(p),l[3*m+2]=t.center[2]+d*u;h[0]=s;for(var g=0;g<s;g++)h[g+1]=g;n[0]=a}}var pm={newInstance:eE.newInstance(ph,"vtkPointSource"),extend:ph},pg={offset:40,maximum:120,center:[0,0,0],frequency:[60,30,40],magnitude:[10,18,5],standardDeviation:.5,wholeExtent:[-10,10,-10,10,-10,10],dataDirection:[1,0,0,0,1,0,0,0,1]};function pv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pg,n),eE.obj(e,t),eE.setGet(e,t,["offset","maximum","standardDeviation"]),eE.setGetArray(e,t,["center","frequency","magnitude"],3),eE.setGetArray(e,t,["wholeExtent"],6),eE.setGetArray(e,t,["dataDirection"],9),eE.algo(e,t,0,1),function(e,t){var n=this;t.classHierarchy.push("vtkRTAnalyticSource"),e.requestData=function(e,i){var o={},a={type:"vtkImageData",mtime:t.mtime,metadata:{source:"vtkRTAnalyticSource",state:o}};["standardDeviation","center","frequency","magnitude","maximum"].forEach(function(e){o[e]=[].concat(t[e])});var s=aP.newInstance(a);s.setSpacing(1,1,1),s.setExtent.apply(n,t.wholeExtent),s.setOrigin(0,0,0),s.setDirection(t.dataDirection);var l=[0,0,0];l=l.map(function(e,n){return t.wholeExtent[2*n+1]-t.wholeExtent[2*n]+1});for(var u=new Uint8Array(l[0]*l[1]*l[2]),c=1/(2*t.standardDeviation*t.standardDeviation),d=0,f=0,p=0,h=[1/(t.wholeExtent[1]-t.wholeExtent[0]),1/(t.wholeExtent[3]-t.wholeExtent[2]),1/(t.wholeExtent[5]-t.wholeExtent[4])],m=0,g=t.wholeExtent[4];g<=t.wholeExtent[5];g++){p=(t.center[2]-g)*h[2];var v=t.magnitude[2]*Math.cos(t.frequency[2]*p);p*=p;for(var y=t.wholeExtent[2];y<=t.wholeExtent[3];y++){f=(t.center[1]-y)*h[1];var b=t.magnitude[1]*Math.sin(t.frequency[1]*f);f*=f;for(var x=t.wholeExtent[0];x<=t.wholeExtent[1];x++){var w=p+f+(d=(t.center[0]-x)*h[0])*d,A=t.magnitude[0]*Math.sin(t.frequency[0]*d);u[m]=t.maximum*Math.exp(-w*c)+A+b+v+t.offset,m++}}}var C=nH.newInstance({numberOfComponents:1,values:u});C.setName("scalars"),s.getPointData().setScalars(C),i[0]=s}}(e,t)}var py={newInstance:eE.newInstance(pv,"vtkRTAnalyticSource"),extend:pv},pb={clusters:[],spacing:[1,1,1],origin:[0,0,0],dimensions:[10,10,10],clusterArrayName:"cluster",scalarArrayName:"field"};function px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pb,n),eE.obj(e,t),eE.setGet(e,t,["clusterArrayName","scalarArrayName"]),eE.setGetArray(e,t,["origin","spacing","dimensions"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkSLICSource"),e.addCluster=function(n,i,o,a,s,l,u){var c=t.clusters.length;return t.clusters.push(new Float64Array([n,i,o,a,s,l,u])),e.modified(),c},e.removeCluster=function(n){t.clusters.splice(n,1),e.modified()},e.removeAllClusters=function(){t.clusters=[],e.modified()},e.updateCluster=function(n,i,o,a,s,l,u,c){t.clusters[n]||(t.clusters[n]=new Float64Array(7)),t.clusters[n][0]=i,t.clusters[n][1]=o,t.clusters[n][2]=a,t.clusters[n][3]=s,t.clusters[n][4]=l,t.clusters[n][5]=u,t.clusters[n][6]=c,e.modified()},e.getNumberOfClusters=function(){return t.clusters.length},e.requestData=function(e,n){var i,o=t.dimensions[0]*t.dimensions[1]*t.dimensions[2],a=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance();a.setSpacing.apply(a,m(t.spacing)),a.setExtent(0,t.dimensions[0]-1,0,t.dimensions[1]-1,0,t.dimensions[2]-1),a.setOrigin.apply(a,m(t.origin));for(var s=function(e,t,n){for(var i=new Float64Array(t[0]*t[1]*t[2]*3),o=0,a=0;a<t[2];a++)for(var s=e[2]+n[2]*a,l=0;l<t[1];l++)for(var u=e[1]+n[1]*l,c=0;c<t[0];c++){var d=e[0]+n[0]*c;i[o++]=d,i[o++]=u,i[o++]=s}return i}(t.origin,t.dimensions,t.spacing),l=8*(t.clusters.length<256)||(t.clusters.length<65536?16:32),u=eE.newTypedArray("Uint".concat(l,"Array"),o),c=function(e){var n=Number.MAX_VALUE;t.clusters.forEach(function(t,i){var o=(t[0]-s[3*e])*(t[0]-s[3*e])+(t[1]-s[3*e+1])*(t[1]-s[3*e+1])+(t[2]-s[3*e+2])*(t[2]-s[3*e+2]);o<n&&(n=o,u[e]=i)})},d=0;d<o;d++)c(d);var f=nH.newInstance({name:t.clusterArrayName,numberOfComponents:1,values:u});a.getPointData().addArray(f);for(var p=new Float32Array(o),h=0;h<o;h++){var g=t.clusters[u[h]];p[h]=g[3]+g[4]*(s[3*h+0]-g[0])+g[5]*(s[3*h+1]-g[1])+g[6]*(s[3*h+2]-g[2])}var v=nH.newInstance({name:t.scalarArrayName,numberOfComponents:1,values:p});a.getPointData().addArray(v),n[0]=a}}var pw={newInstance:eE.newInstance(px,"vtkSLICSource"),extend:px},pA={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function pC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pA,n),eE.obj(e,t),eE.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),eE.setGetArray(e,t,["center"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkSphereSource"),e.requestData=function(e,n){var i,o=n[0],a=o?o.getPoints().getDataType():t.pointType;o=(null==(i=o)?void 0:i.initialize())||lC.newInstance();var s=0,l=t.thetaResolution,u=t.startTheta<t.endTheta?t.startTheta:t.endTheta;u*=Math.PI/180;var c=t.endTheta>t.startTheta?t.endTheta:t.startTheta;c*=Math.PI/180;var d=t.startPhi<t.endPhi?t.startPhi:t.endPhi;d*=Math.PI/180;var f=t.endPhi>t.startPhi?t.endPhi:t.startPhi;f*=Math.PI/180,Math.abs(u-c)<2*Math.PI&&++l;var p=(c-u)/t.thetaResolution,h=+(t.startPhi<=0),m=t.phiResolution+(t.endPhi>=180?-1:0),g=t.phiResolution*l+2,v=2*t.phiResolution*t.thetaResolution,y=0,b=eE.newTypedArray(a,3*g),x=new Float32Array(3*g),w=0,A=new Uint32Array(5*v);t.startPhi<=0&&(b[3*y+0]=t.center[0],b[3*y+1]=t.center[1],b[3*y+2]=t.center[2]+t.radius,x[3*y+0]=0,x[3*y+1]=0,x[3*y+2]=1,y++,s++),t.endPhi>=180&&(b[3*y+0]=t.center[0],b[3*y+1]=t.center[1],b[3*y+2]=t.center[2]-t.radius,x[3*y+0]=0,x[3*y+1]=0,x[3*y+2]=-1,y++,s++);for(var C=t.phiResolution-s,S=(f-d)/(t.phiResolution-1),_=0;_<l;_++)for(var T=u+_*p,O=h;O<m;O++){var P=d+O*S,M=t.radius*Math.sin(P);x[3*y+0]=M*Math.cos(T),x[3*y+1]=M*Math.sin(T),x[3*y+2]=t.radius*Math.cos(P),b[3*y+0]=x[3*y+0]+t.center[0],b[3*y+1]=x[3*y+1]+t.center[1],b[3*y+2]=x[3*y+2]+t.center[2];var E=Math.sqrt(x[3*y+0]*x[3*y+0]+x[3*y+1]*x[3*y+1]+x[3*y+2]*x[3*y+2]);E=0===E?1:E,x[3*y+0]/=E,x[3*y+1]/=E,x[3*y+2]/=E,y++}var D=C*l;if(Math.abs(u-c)<2*Math.PI&&--l,t.startPhi<=0)for(var I=0;I<l;I++)A[w++]=3,A[w++]=C*I+s,A[w++]=C*(I+1)%D+s,A[w++]=0;if(t.endPhi>=180)for(var k=C-1+s,N=0;N<l;N++)A[w++]=3,A[w++]=C*N+k,A[w++]=s-1,A[w++]=C*(N+1)%D+k;for(var R=0;R<l;R++)for(var B=0;B<C-1;B++){var L=C*R+B+s,F=L+1,V=(C*(R+1)+B)%D+s+1;t.latLongTessellation?(A[w++]=4,A[w++]=L,A[w++]=F):(A[w++]=3,A[w++]=L,A[w++]=F,A[w++]=V,A[w++]=3,A[w++]=L),A[w++]=V,A[w++]=V-1}b=b.subarray(0,3*y),o.getPoints().setData(b,3),x=x.subarray(0,3*y);var j=nH.newInstance({name:"Normals",values:x,numberOfComponents:3});o.getPointData().setNormals(j),A=A.subarray(0,w),o.getPolys().setData(A,1),n[0]=o}}var pS={newInstance:eE.newInstance(pC,"vtkSphereSource"),extend:pC},p_=2*Math.PI,pT={radius:.5,tubeRadius:.01,resolution:64,tubeResolution:64,arcLength:p_,center:[0,0,0],direction:[1,0,0],pointType:"Float64Array"};function pO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pT,n),eE.obj(e,t),eE.setGet(e,t,["radius","tubeRadius","resolution","tubeResolution","arcLength"]),eE.setGetArray(e,t,["center","direction"],3),eE.algo(e,t,0,1),t.classHierarchy.push("vtkTorusSource"),e.requestData=function(e,n){for(var i,o=n[0],a=eE.newTypedArray(t.pointType,3*(t.resolution+1)*(t.tubeResolution+1)),s=0,l=0;l<=t.tubeResolution;l++)for(var u=l/t.tubeResolution*p_,c=Math.cos(u),d=Math.sin(u),f=0;f<=t.resolution;f++){var p=f/t.resolution*t.arcLength;a[s++]=(t.radius+t.tubeRadius*c)*Math.cos(p),a[s++]=(t.radius+t.tubeRadius*c)*Math.sin(p),a[s++]=t.tubeRadius*d}for(var h=t.resolution*t.tubeResolution*8,g=0,v=new Uint32Array(h),y=1;y<=t.tubeResolution;y++)for(var b=1;b<=t.resolution;b++){var x=(t.resolution+1)*y+b-1,w=(t.resolution+1)*(y-1)+b-1,A=(t.resolution+1)*(y-1)+b,C=(t.resolution+1)*y+b;v[g++]=3,v[g++]=x,v[g++]=w,v[g++]=C,v[g++]=3,v[g++]=w,v[g++]=A,v[g++]=C}(i=a$.buildFromRadian()).translate.apply(i,m(t.center)).rotateFromDirections([1,0,0],t.direction).apply(a),(o=lC.newInstance()).getPoints().setData(a,3),o.getPolys().setData(v,1),n[0]=o}}var pP={newInstance:eE.newInstance(pO,"vtkTorusSource"),extend:pO},pM=eE.vtkErrorMacro,pE={center:[0,0,0],automaticSphereGeneration:1,preventSeam:1};function pD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pE,n),eE.obj(e,t),eE.setGetArray(e,t,["center"],3),eE.setGet(e,t,["automaticSphereGeneration","preventSeam"]),eE.algo(e,t,1,1),t.classHierarchy.push("vtkTextureMapToSphere"),e.requestData=function(e,n){var i,o=e[0],a=o.getPoints().getNumberOfPoints();if(a<=1)pM("Can't generate texture coordinates without points");else{var s=Math.PI/2,l=[],u=o.getPoints();if(t.automaticSphereGeneration){t.center=[0,0,0];for(var c=0;c<a;c++)u.getPoint(c,l),t.center[0]+=l[0],t.center[1]+=l[1],t.center[2]+=l[2];t.center[0]/=a,t.center[1]/=a,t.center[2]/=a}for(var d=0,f=0,p=0,h=[0,0],m=0,g=0,v=0,y=[],b=0;b<a;b++)u.getPoint(b,l),0!==(d=Math.sqrt(tx(l,t.center)))?Math.abs(f=l[2]-t.center[2])>d?(p=0,h[1]=f>0?0:1):(p=Math.acos(f/d),h[1]=p/Math.PI):h[1]=0,0!=(m=d*Math.sin(p))?(g=Math.abs(f=l[0]-t.center[0])>m?f>0?0:Math.PI:Math.acos(f/m),v=Math.abs(f=l[1]-t.center[1])>m?f>0?s:-s:Math.asin(f/m)):(g=0,v=0),t.preventSeam?h[0]=g/Math.PI:(h[0]=g/(2*Math.PI),v<0&&(h[0]=1-h[0])),y.push.apply(y,h);var x=nH.newInstance({name:"Texture Coordinates",numberOfComponents:2,size:a,values:y}),w=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();w.getPoints().setData(new Float32Array(o.getPoints().getData()),3),w.getPolys().setData(new Uint32Array(o.getPolys().getData())),w.getPointData().setTCoords(x),n[0]=w}}}var pI={newInstance:eE.newInstance(pD,"vtkTextureMapToSphere"),extend:pD},pk=eE.vtkErrorMacro,pN={origin:[0,0,0],point1:[0,0,0],point2:[0,0,0],normal:[0,0,0],sRange:[0,1],tRange:[0,1],automaticPlaneGeneration:1};function pR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pN,n),eE.obj(e,t),eE.setGetArray(e,t,["origin","point1","point2","normal"],3),eE.setGetArray(e,t,["sRange","tRange"],2),eE.setGet(e,t,["automaticPlaneGeneration"]),eE.algo(e,t,1,1),t.classHierarchy.push("vtkTextureMapToPlane"),e.requestData=function(e,n){var i,o=e[0],a=o.getPoints().getNumberOfPoints();if(a<3&&t.automaticPlaneGeneration)pk("Can't generate texture coordinates without points");else{var s=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();s.getPoints().setData(new Float32Array(o.getPoints().getData()),3),s.getPolys().setData(new Uint32Array(o.getPolys().getData()));var l=[],u=0,c=0,d=0,f=0,p=[0,0,0],h=0,m=[0,0,0],g=[0,0,0],v=0,y=0,b=0,x=0,w=[0,0,0];if(t.automaticPlaneGeneration&&0===t.origin[0]&&0===t.origin[1]&&0===t.origin[2]&&0===t.point1[0]&&0===t.point1[1]&&0===t.point2[0]&&0===t.point2[1]){for(t.automaticPlaneGeneration&&function(e){for(var n=e.getPoints().getNumberOfPoints(),i=0,o=[0,0,0,0,0,0,0,0,0],a=[0,0,0],s=[0,0,0],l=e.getBounds(),u=[l[0],l[2],l[4]],c=[l[1],l[3],l[5]],d=Math.sqrt(tx(u,c)),f=d,p=0;p<3;p++)t.normal[p]=0,l[2*p+1]-l[2*p]<f&&(i=p,f=l[2*p+1]-l[2*p]);if(t.normal[i]=1,!(f<=.001*d)){s[0]=0,s[1]=0,s[2]=0;for(var h=0;h<n;h++)e.getPoints().getPoint(h,a),s[0]+=a[0]*a[2],s[1]+=a[1]*a[2],s[2]+=a[2],o[0]+=a[0]*a[0],o[1]+=a[0]*a[1],o[2]+=a[0],o[3]+=a[0]*a[1],o[4]+=a[1]*a[1],o[5]+=a[1],o[6]+=a[0],o[7]+=a[1];o[8]=n;var m=[o[0],o[1],o[2]],g=[o[3],o[4],o[5]],v=[o[6],o[7],o[8]],y=tG(o);y<=.001||(o=tE(s,g,v,[]),t.normal[0]=tG(o)/y,o=tE(m,s,v,[]),t.normal[1]=tG(o)/y,t.normal[2]=-1)}}(s),th(t.normal),u=1,c=0;c<3;c++)p[0]=0,p[1]=0,p[2]=0,p[c]=1,(f=Math.abs(tc(t.normal,p)))<u&&(u=f,h=c);p[0]=0,p[1]=0,p[2]=0,p[h]=1,tf(t.normal,p,m),th(m),tf(m,t.normal,g);var A=s.getBounds();for(c=0;c<3;c++)p[c]=A[2*c+1]-A[2*c];for(v=tc(g,p),y=tc(m,p),b=(t.sRange[1]-t.sRange[0])/v,x=(t.tRange[1]-t.tRange[0])/y,c=0;c<a;c++){for(s.getPoints().getPoint(c,w),d=0;d<3;d++)p[d]=w[d]-A[2*d];l.push(t.sRange[0]+tc(g,p)*b),l.push(t.tRange[0]+tc(m,p)*x)}}else{var C=0;for(c=0;c<3;c++)g[c]=t.point1[c]-t.origin[c],m[c]=t.point2[c]-t.origin[c];var S=tc(g,g),_=tc(m,m);for(0!==S&&0!==_||(pk("Bad plane definition"),S=1,_=1),c=0;c<a;c++){for(s.getPoints().getPoint(c,w),d=0;d<3;d++)p[d]=w[d]-t.origin[d];C=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],l.push(C/S),C=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],l.push(C/_)}}var T=nH.newInstance({name:"Texture Coordinates",numberOfComponents:2,size:a,values:l});s.getPointData().setTCoords(T),n[0]=s}}}var pB={Cornerstone:uS,Core:{vtkCleanPolyData:uj,vtkCutter:uW,vtkPolyDataNormals:uK,vtkThresholdPoints:{newInstance:u$,extend:uQ,OperationType:uZ}},General:{vtkAppendPolyData:u4,vtkCalculator:u7,vtkClipClosedSurface:cN,vtkClosedPolyLineToSurfaceFilter:cV,vtkContourTriangulator:cS,vtkImageCropFilter:cz,vtkImageMarchingCubes:cZ,vtkImageMarchingSquares:c3,vtkImageOutlineFilter:c8,vtkImageSliceFilter:dt,vtkImageStreamline:da,vtkLineFilter:du,vtkMoleculeToRepresentation:dg,vtkOBBTree:dG,vtkOutlineFilter:dK,vtkPaintFilter:d2,vtkScalarToRGBA:d6,vtkShrinkPolyData:fe,vtkTransformPolyDataFilter:fi,vtkTriangleFilter:fl,vtkTubeFilter:fh,vtkWarpScalar:fb,vtkWindowedSincPolyDataFilter:{newInstance:fA,extend:fw}},Sources:{vtkArcSource:fT,vtkArrowSource:fR,vtkCircleSource:fF,vtkConcentricCylinderSource:fG,vtkConeSource:fM,vtkCubeSource:fq,vtkCursor3D:fY,vtkCylinderSource:fI,vtkDiskSource:f$,vtkEllipseArcSource:f4,vtkImageGridSource:f8,vtkLineSource:pt,vtkPlaneSource:po,vtkPlatonicSolidSource:pf,vtkPointSource:pm,vtkRTAnalyticSource:py,vtkSLICSource:pw,vtkSphereSource:pS,vtkTorusSource:pP},Texture:{vtkTextureMapToPlane:{newInstance:eE.newInstance(pR,"vtkTextureMapToPlane"),extend:pR},vtkTextureMapToSphere:pI}},pL={CLAMP:0,REPEAT:1,MIRROR:2},pF={NEAREST:0,LINEAR:1,CUBIC:2},pV={ImageBorderMode:pL,InterpolationMode:pF};function pj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function pG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pj(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pU={pointer:null,extent:[0,-1,0,-1,0,-1],increments:[0,0,0],scalarType:null,dataTypeSize:1,numberOfComponents:1,borderMode:pL.CLAMP,interpolationMode:pF.LINEAR,extraInfo:null},pz=pG(pG({},pU),{},{positions:[0,0,0],weights:null,weightExtent:[0,-1,0,-1,0,-1],kernelSize:[1,1,1],workspace:null,lastY:null,lastZ:null});function pW(e){var t=Math.floor(e);return{floored:t,error:e-t}}function pH(e){return Math.round(e)}function pq(e,t,n){var i=e<=n?e:n;return(i-=t)>=0?i:0}function pK(e,t,n){var i=n-t+1,o=e-t;return(o%=i)>=0?o:o+i}function pX(e,t,n){var i=n-t,o=2*i+ +(0===i),a=e-t;return(a=(a>=0?a:-a)%o)<=i?a:o-a}function pY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function pZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pY(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pJ={outValue:0,tolerance:Number.EPSILON,componentOffset:0,componentCount:-1,borderMode:pV.ImageBorderMode.CLAMP,slidingWindow:!1,scalars:null,interpolationInfo:pZ({},pU),interpolationFunc:null,rowInterpolationFunc:null,structuredBounds:[0,-1,0,-1,0,-1],spacing:null,origin:null,extent:null};function pQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pJ,n),eE.obj(e,t),eE.setGet(e,t,["outValue","tolerance","componentOffset","componentCount","borderMode","slidingWindow"]),eE.get(e,t,["origin","spacing"]),t.classHierarchy.push("vtkAbstractImageInterpolator"),e.initialize=function(n){e.releaseData(),t.scalars=n.getPointData().getScalars(),t.spacing=n.getSpacing(),t.origin=n.getOrigin(),t.extent=n.getExtent(),e.update()},e.releaseData=function(){t.scalars=null},e.update=function(){if(!t.scalars)return t.interpolationInfo.pointer=null,void(t.interpolationInfo.numberOfComponents=1);t.interpolationInfo.extent=t.extent.slice();for(var n=e.computeSupportSize(null),i=Math.max(Math.max(n[0],n[1]),n[2]),o=Number.MIN_SAFE_INTEGER+i/2,a=Number.MAX_SAFE_INTEGER-i/2,s=0;s<3;++s){var l=Math.max(.5*(t.extent[2*s]===t.extent[2*s+1]),t.tolerance);t.structuredBounds[2*s]=Math.max(t.extent[2*s]-l,o),t.structuredBounds[2*s+1]=Math.min(t.extent[2*s+1]+l,a)}var u=t.extent[1]-t.extent[0]+1,c=t.extent[3]-t.extent[2]+1,d=t.scalars.getNumberOfComponents();t.interpolationInfo.increments[0]=d,t.interpolationInfo.increments[1]=t.interpolationInfo.increments[0]*u,t.interpolationInfo.increments[2]=t.interpolationInfo.increments[1]*c;var f=t.componentOffset;f=(f=f>0?f:0)<d?f:d-1;var p=t.scalars.getData();t.interpolationInfo.pointer=p.subarray(+f),t.interpolationInfo.scalarType=t.scalars.dataType,t.interpolationInfo.dataTypeSize=1,t.interpolationInfo.numberOfComponents=e.computeNumberOfComponents(d),t.interpolationInfo.borderMode=t.borderMode,e.internalUpdate()},e.internalUpdate=function(){},e.interpolateXYZ=function(n,i,o,a){var s=t.outValue,l=[n,i,o],u=[(l[0]-t.origin[0])/t.spacing[0],(l[1]-t.origin[1])/t.spacing[1],(l[2]-t.origin[2])/t.spacing[2]];if(e.checkBoundsIJK(u)){var c=pZ({},t.interpolationInfo),d=c.increments[0]-t.componentOffset,f=a>0?a:0;f=f<d?f:d-1,c.pointer=t.interpolationInfo.pointer.subarray(+f),c.numberOfComponents=1;var p=[s];e.interpolatePoint(c,u,p),s=p[0]}return s},e.interpolate=function(n,i){var o=[(n[0]-t.origin[0])/t.spacing[0],(n[1]-t.origin[1])/t.spacing[1],(n[2]-t.origin[2])/t.spacing[2]];if(e.checkBoundsIJK(o))return e.interpolatePoint(t.interpolationInfo,o,i),!0;for(var a=0;a<t.interpolationInfo.numberOfComponents;++a)i[a]=t.outValue;return!1},e.computeNumberOfComponents=function(e){var n=Math.min(Math.max(t.componentOffset,0),e-1),i=t.componentCount<e-n?t.componentCount:e-n;return i>0?i:e-n},e.getNumberOfComponents=function(){return t.interpolationInfo.numberOfComponents},e.interpolateIJK=function(n,i){e.interpolatePoint(t.interpolationInfo,n,i)},e.checkBoundsIJK=function(e){return!(e[0]<t.structuredBounds[0]||e[0]>t.structuredBounds[1]||e[1]<t.structuredBounds[2]||e[1]>t.structuredBounds[3]||e[2]<t.structuredBounds[4]||e[2]>t.structuredBounds[5])},e.computeSupportSize=null,e.isSeparable=null,e.precomputeWeightsForExtent=function(e,t,n){},e.FreePrecomputedWeights=function(e){},e.interpolatePoint=function(e,t,n){},e.interpolateRow=function(e,t,n,i,o,a){}}var p$=pZ({newInstance:eE.newInstance(pQ,"vtkAbstractImageInterpolator"),extend:pQ},pV);function p0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function p1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p0(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p2={interpolationMode:pF.NEAREST};function p3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p2,n),p$.extend(e,t,n),eE.setGet(e,t,["interpolationMode"]),t.classHierarchy.push("vtkImageInterpolator"),e.computeSupportSize=function(e){var n=1;t.interpolationMode===pF.LINEAR?n=2:t.interpolationMode===pF.CUBIC&&(n=4);var i=[n,n,n];if(null==e||0!==e[12]||0!==e[13]||0!==e[14]||1!==e[15])return i;for(var o=0;o<3;++o){for(var a=!0,s=0;s<3;++s)a=a&&Number.isInteger(e[4*o+s]);a&&(i[o]=1)}return i},e.internalUpdate=function(){t.interpolationInfo.interpolationMode=t.interpolationMode},e.isSeparable=function(){return!0},e.interpolateNearest=function(e,t,n){var i=e.extent,o=e.increments,a=e.numberOfComponents,s=pH(t[0]),l=pH(t[1]),u=pH(t[2]);switch(e.borderMode){case pL.REPEAT:s=pK(s,i[0],i[1]),l=pK(l,i[2],i[3]),u=pK(u,i[4],i[5]);break;case pL.MIRROR:s=pX(s,i[0],i[1]),l=pX(l,i[2],i[3]),u=pX(u,i[4],i[5]);break;default:s=pq(s,i[0],i[1]),l=pq(l,i[2],i[3]),u=pq(u,i[4],i[5])}for(var c=s*o[0]+l*o[1]+u*o[2],d=0;d<a;++d)n[d]=e.pointer[c+d]},e.interpolateLinear=function(e,t,n){var i=e.extent,o=e.increments,a=e.numberOfComponents,s=pW(t[0]),l=pW(t[1]),u=pW(t[2]),c=s.floored,d=l.floored,f=u.floored,p=s.error,h=l.error,m=u.error,g=c+(0!==p),v=d+(0!==h),y=f+(0!==m);switch(e.borderMode){case pL.REPEAT:c=pK(c,i[0],i[1]),d=pK(d,i[2],i[3]),f=pK(f,i[4],i[5]),g=pK(g,i[0],i[1]),v=pK(v,i[2],i[3]),y=pK(y,i[4],i[5]);break;case pL.MIRROR:c=pX(c,i[0],i[1]),d=pX(d,i[2],i[3]),f=pX(f,i[4],i[5]),g=pX(g,i[0],i[1]),v=pX(v,i[2],i[3]),y=pX(y,i[4],i[5]);break;default:c=pq(c,i[0],i[1]),d=pq(d,i[2],i[3]),f=pq(f,i[4],i[5]),g=pq(g,i[0],i[1]),v=pq(v,i[2],i[3]),y=pq(y,i[4],i[5])}for(var b=c*o[0],x=g*o[0],w=d*o[1],A=v*o[1],C=f*o[2],S=y*o[2],_=w+C,T=w+S,O=A+C,P=A+S,M=1-p,E=1-h,D=1-m,I=E*D,k=h*D,N=E*m,R=h*m,B=e.pointer,L=0;L<a;++L)n[L]=M*(I*B[b+_+4*L]+N*B[b+T+4*L]+k*B[b+O+4*L]+R*B[b+P+4*L])+p*(I*B[x+_+4*L]+N*B[x+T+4*L]+k*B[x+O+4*L]+R*B[x+P+4*L])},e.interpolatePoint=function(n,i,o){switch(t.interpolationMode){case pF.LINEAR:e.interpolateLinear(n,i,o);break;case pF.CUBIC:console.log("CUBIC not implemented");break;default:e.interpolateNearest(n,i,o)}},e.interpolateRowNearest=function(e,t,n,i,o,a){for(var s=e.positions[0].subarray(t),l=e.positions[1].subarray(n),u=e.positions[2].subarray(i),c=e.pointer.subarray(l[0]+u[0]),d=e.numberOfComponents,f=0;f<a;++f)o.set(c.subarray(s[f],d),f*d)},e.interpolateRowLinear=function(e,t,n,i,o,a){var s=e.kernelSize[0],l=e.kernelSize[1],u=e.kernelSize[2],c=t*s,d=n*l,f=i*u,p=e.weights[0].subarray(c),h=e.weights[1].subarray(d),m=e.weights[2].subarray(f),g=e.positions[0].subarray(c),v=e.positions[1].subarray(d),y=e.positions[2].subarray(f),b=e.pointer,x=e.numberOfComponents,w=v.subarray(y[0]),A=w,C=w,S=w,_=1,T=0,O=1,P=0;2===l&&(S=C=v[1].subarray(y[0]),_=h[0],T=h[1]),2===u&&(S=A=v[0].subarray(y[1]),O=m[0],P=m[1]),l+u===4&&(S=v[1].subarray(y[1]));var M=_*O,E=_*P,D=T*O,I=T*P;if(1===s)if(0===T&&0===P)for(var k=a;k>0;--k)for(var N=0;N<x;N++)o[N+a-k]=b[w+g[a-k]+N];else if(0===T)for(var R=a;R>0;--R)for(var B=0;B<x;B++)o[B+a-R]=O*b[g[a-R]+w+4*B]+P*b[g[a-R]+A+4*B];else for(var L=a;L>0;--L)for(var F=0;F<x;F++)o[F+a-L]=M*b[g[a-L]+w+4*F]+E*b[g[a-L]+A+4*F]+D*b[g[a-L]+C+4*F]+I*b[g[a-L]+S+4*F];else if(0===P)for(var V=0,j=a;j>0;--j){for(var G=p[0+2*V],U=p[1+2*V],z=g[0+2*V],W=g[1+2*V],H=0;H<x;H++)o[H+a-j]=G*(_*b[z+w+4*H]+T*b[z+C+4*H])+U*(_*b[W+w+4*H]+T*b[W+C+4*H]);V++}else for(var q=0,K=a;K>0;--K){for(var X=p[0+2*q],Y=p[1+2*q],Z=g[0+2*q],J=g[1+2*q],Q=0;Q<x;Q++)o[Q]=X*(M*b[Z+w+4*Q]+E*b[Z+A+4*Q]+D*b[Z+C+4*Q]+I*b[Z+S+4*Q])+Y*(M*b[J+w+4*Q]+E*b[J+A+4*Q]+D*b[J+C+4*Q]+I*b[J+S+4*Q]);q++}},e.interpolateRow=function(n,i,o,a,s,l){switch(t.interpolationMode){case pF.LINEAR:e.interpolateRowLinear(n,i,o,a,s,l);break;case pF.CUBIC:console.log("CUBIC not implemented");break;default:e.interpolateRowNearest(n,i,o,a,s,l)}},e.vtkTricubicInterpWeights=function(e){var t=e-1,n=.5*e,i=3*e;return[-n*t*t,((i-2)*n-1)*t,-((i-4)*e-1)*n,e*n*t]},e.precomputeWeightsForExtent=function(n,i,o){var a=p1(p1({},pz.newInstance()),t.interpolationInfo);a.weightType="Float32Array";for(var s=a.interpolationMode,l=!0,u=0;u<3;++u){var c=void 0;for(c=0;c<3&&0===n[4*u+c];++c);o[2*u]=i[2*u],o[2*u+1]=i[2*u+1];var d=a.extent[2*c],f=a.extent[2*c+1],p=t.structuredBounds[2*c],h=t.structuredBounds[2*c+1],m=1;m=s<pF.LINEAR?m:2;var g=f-d+1;m=(m=s<pF.CUBIC?m:4)<g?m:g,Number.isInteger(n[4*u+c])&&Number.isInteger(n[4*c+c])&&(m=1);var v=m*(i[2*u+1]-i[2*u]+1),y=new Int16Array(v),b=m*i[2*u],x=null;s!==pF.NEAREST&&(x=new Int16Array(v)),a.kernelSize[u]=m,a.weightExtent[2*u]=i[2*u],a.weightExtent[2*u+1]=i[2*u+1],a.positions[u]=y,a.weights[u]=x;for(var w=0,A=i[2*u];A<=i[2*u+1];++A){var C=n[12+c]+A*n[4*u+c],S=m,_=0,T=0;if(s===pF.NEAREST)_=Math.round(C);else{var O=pW(C);_=O.integer,T=O.error,s===pF.CUBIC&&1!==m&&(_--,S=4)}var P=[0,0,0,0],M=0;switch(a.borderMode){case pL.REPEAT:do P[M]=pK(_,d,f),_++;while(++M<S);break;case pL.MIRROR:do P[M]=pX(_,d,f),_++;while(++M<S);break;default:do P[M]=pq(_,d,f),_++;while(++M<S)}var E=a.increments[c];if(y[m*A-b]=P[0]*E,s!==pF.NEAREST&&(x[m*A-b]=1),m>1){if(s===pF.LINEAR)y[m*A+1-b]=P[1]*E,x[m*A-b]=1-T,x[m*A+1-b]=T;else if(s===pF.CUBIC){var D=e.vtkTricubicInterpWeights(T);if(4===m)for(var I=0;I<4;I++)y[m*A+I-b]=P[I]*E,x[m*A+I-b]=D[I];else{for(var k=[0,0,0,0],N=0;N<4;N++)k[P[N]-d]+=D[N];for(var R=0;R<m;R++)y[m*A+R-b]=d+R,x[m*A+R-b]=k[R]}}}C>=p&&C<=h?0===w&&(w=1,o[2*u]=A):1===w&&(w=2,o[2*u+1]=A-1)}(0===w||o[2*u]>o[2*u+1])&&(l=!1)}if(!l)for(var B=0;B<3;B++)o[2*B]=i[2*B],o[2*B+1]=i[2*B]-1}}var p4={newInstance:eE.newInstance(p3,"vtkImageInterpolator"),extend:p3},p5={spanState:0,extent:[0,-1,0,-1,0,-1],end:0,spanEnd:0,rowEnd:0,sliceEnd:0,rowIncrement:0,rowEndIncrement:0,sliceIncrement:0,sliceEndIncrement:0,id:0,index:[0,0,0],startY:0,hasStencil:!1,inStencil:!0,spanIndex:0,spanSliceIncrement:0,spanSliceEndIncrement:0,spanCountPointer:null,spanListPointer:null,algorithm:null,target:0,count:0};function p6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p5,n),eE.obj(e,t),eE.get(e,t,["id","index"]),t.classHierarchy.push("vtkImagePointDataIterator"),e.initialize=function(e,n,i,o){var a=e.getExtent(),s=n;null==s&&(s=a);for(var l,u,c,d=!1,f=0;f<6;f+=2)t.extent[f]=Math.max(s[f],a[f]),t.extent[f+1]=Math.min(s[f+1],a[f+1]),t.extent[f]>t.extent[f+1]&&(d=!0);if(t.rowIncrement=a[1]-a[0]+1,t.sliceIncrement=t.rowIncrement*(a[3]-a[2]+1),d){l=0,u=0,c=0,t.id=0,t.rowEndIncrement=0,t.sliceEndIncrement=0;for(var p=0;p<6;p+=2)t.extent[p]=a[p],t.extent[p+1]=a[p]-1}else l=t.extent[1]-t.extent[0]+1,u=t.extent[3]-t.extent[2]+1,c=t.extent[5]-t.extent[4]+1,t.id=t.extent[0]-a[0]+(t.extent[2]-a[2])*t.rowIncrement+(t.extent[4]-a[4])*t.sliceIncrement,t.rowEndIncrement=t.rowIncrement-l,t.sliceEndIncrement=t.rowEndIncrement+t.sliceIncrement-t.rowIncrement*u;if(t.spanEnd=t.id+l,t.rowEnd=t.id+l,t.sliceEnd=t.id+(t.rowIncrement*u-t.rowEndIncrement),t.end=t.id+(t.sliceIncrement*c-t.sliceEndIncrement),t.index[0]=t.extent[0],t.index[1]=t.extent[2],t.index[2]=t.extent[4],t.startY=t.index[1],i){t.hasStencil=!0,t.inStencil=!1,t.spanIndex=0;var h=i.getExtent();if(t.spanSliceIncrement=0,t.spanSliceEndIncrement=0,h[3]>=h[2]&&h[5]>=h[4]){t.spanSliceIncrement=h[3]-h[2]+1;var m=t.extent[2]-h[2];m>=0&&(t.spanSliceEndIncrement+=m);var g=h[3]-t.extent[3];g>=0&&(t.spanSliceEndIncrement+=g)}var v=0,y=t.extent[2]-h[2];y<0?(t.extent[2]=h[2],v-=1):v+=y,h[3]<=t.extent[3]&&(t.extent[3]=h[3]);var b=t.extent[4]-h[4];b<0?(t.extent[4]=h[4],y>=0&&(v-=1+t.spanSliceEndIncrement)):v+=b*t.spanSliceIncrement,h[5]<=t.extent[5]&&(t.extent[5]=h[5]),t.extent[2]<=t.extent[3]&&t.extent[4]<=t.extent[5]?(t.spanCountPointer=i.extentListLengths.subarray(v),t.spanListPointer=i.extentLists.subarray(v),y>=0&&b>=0&&(t.inStencil=!0,t.setSpanState(t.extent[0]))):(t.spanCountPointer=null,t.spanListPointer=null,t.inStencil=!1)}else t.hasStencil=!1,t.inStencil=!0,t.spanSliceEndIncrement=0,t.spanSliceIncrement=0,t.spanIndex=0,t.spanCountPointer=null,t.spanListPointer=null;if(o){t.algorithm=o;var x=u*c;t.target=x/50+1,t.count=50*t.target-x/t.target*t.target+1}else t.algorithm=null,t.target=0,t.count=0},e.setSpanState=function(e){var n,i=!1,o=t.spanListPointer,a=t.spanCountPointer[0];for(n=0;n<a&&!(o[n]>e);++n)i=!i;t.spanIndex=n,t.inStencil=i;var s=t.extent[1]+1;n<a&&o[n]<=t.extent[1]&&(s=o[n]);var l=t.rowEnd-(t.rowIncrement-t.rowEndIncrement);t.id=l+(e-t.extent[0]),t.spanEnd=l+(s-t.extent[0])},e.nextSpan=function(){if(t.spanEnd===t.rowEnd){var n=1;if(t.spanEnd!==t.sliceEnd)t.id=t.rowEnd+t.rowEndIncrement,t.rowEnd+=t.rowIncrement,t.spanEnd=t.rowEnd,t.index[1]++;else{if(t.spanEnd===t.end)return void(t.id=t.end);t.id=t.sliceEnd+t.sliceEndIncrement,t.sliceEnd+=t.sliceIncrement,t.rowEnd=t.id+(t.rowIncrement-t.rowEndIncrement),t.spanEnd=t.rowEnd,t.index[1]=t.startY,t.index[2]++,n+=t.spanSliceEndIncrement}t.index[0]=t.extent[0],t.hasStencil&&(t.index[1]>=t.extent[2]&&t.index[1]<=t.extent[3]&&t.index[2]>=t.extent[4]&&t.index[2]<=t.extent[5]?(t.spanCountPointer=t.spanCountPointer.subarray(n),t.spanListPointer=t.spanListPointer.subarray(n),e.setSpanState(t.extent[0])):t.inStencil=!1),t.algorithm&&e.reportProgress()}else{t.id=t.spanEnd;var i=t.spanCountPointer[0],o=t.extent[1]+1;if(t.index[0]=o,t.spanIndex<i){var a=t.spanListPointer[t.spanIndex];a<o&&(t.index[0]=a)}if(t.spanIndex++,t.spanIndex<i){var s=t.spanListPointer[t.spanIndex];s<o&&(o=s)}t.spanEnd=t.rowEnd-(t.rowIncrement-t.rowEndIncrement)+(o-t.extent[0]),t.inStencil=!t.inStencil}},e.isAtEnd=function(){return t.id===t.end},e.isInStencil=function(){return t.inStencil},e.spanEndId=function(){return t.spanEnd},e.reportProgress=function(){},e.getArray=function(e,t){return e.getData().subarray(t*e.getNumberOfComponents())},e.getScalars=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getArray(t.getPointData().getScalars(),n)}}var p8={newInstance:eE.newInstance(p6,"vtkImagePointDataIterator"),extend:p6},p9={SlabMode:{MIN:0,MAX:1,MEAN:2,SUM:3}};function p7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p7(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ht=p9.SlabMode,hn=eE.vtkErrorMacro,hr={transformInputSampling:!0,autoCropOutput:!1,outputDimensionality:3,outputSpacing:null,outputOrigin:null,outputDirection:null,outputExtent:null,outputScalarType:null,wrap:!1,mirror:!1,border:!0,interpolationMode:pF.NEAREST,slabMode:ht.MIN,slabTrapezoidIntegration:!1,slabNumberOfSlices:1,slabSliceSpacingFraction:1,optimization:!1,scalarShift:0,scalarScale:1,backgroundColor:[0,0,0,0],resliceAxes:null,interpolator:p4.newInstance(),usePermuteExecute:!1};function hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hr,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["outputDimensionality","outputScalarType","scalarShift","scalarScale","transformInputSampling","autoCropOutput","wrap","mirror","border","interpolationMode","resliceTransform","slabMode","slabTrapezoidIntegration","slabNumberOfSlices","slabSliceSpacingFraction"]),eE.setGetArray(e,t,["outputOrigin","outputSpacing"],3),eE.setGetArray(e,t,["outputExtent"],6),eE.setGetArray(e,t,["outputDirection"],9),eE.setGetArray(e,t,["backgroundColor"],4),eE.get(e,t,["resliceAxes"]),function(e,t){t.classHierarchy.push("vtkImageReslice");var n=he({},e),i=od(new Float64Array(16)),o=null;function a(e,t,n,i){for(var o=n-1,a=0;a<t;a+=1){for(var s=.5*e[a],l=1;l<o;l+=1)s+=e[a+l*t];s+=.5*e[a+o*t],e[a]=s*i}}function s(e,t,n,i){for(var o=0;o<t;o+=1){for(var a=e[o],s=1;s<n;s+=1)a+=e[o+s*t];e[o]=a*i}}function l(e,t,n){for(var i=0;i<t;i+=1){for(var o=e[i],a=1;a<n;a+=1)o=Math.min(o,e[i+a*t]);e[i]=o}}function u(e,t,n){for(var i=0;i<t;i+=1){for(var o=e[i],a=1;a<n;a+=1)o=Math.max(o,e[i+a*t]);e[i]=o}}function c(e,t,n){s(e,t,n,1/n)}function d(e,t,n){a(e,t,n,1/(n-1))}function f(e,t,n){s(e,t,n,1)}function p(e,t,n){a(e,t,n,1)}e.getMTime=function(){var e=n.getMTime();return t.resliceTransform&&(e=Math.max(e,t.resliceTransform.getMTime())),e},e.setResliceAxes=function(n){return t.resliceAxes||(t.resliceAxes=od(new Float64Array(16))),!o$(t.resliceAxes,n)&&(ol(t.resliceAxes,n),e.modified(),!0)},e.requestData=function(n,a){var s,l=n[0];if(l){var u=l.getOrigin(),c=l.getSpacing(),d=l.getDimensions(),f=l.getPointData().getScalars(),p=[0,d[0]-1,0,d[1]-1,0,d[2]-1],h=[0,0,0],m=[1,1,1],g=[0,0,0,0,0,0],v=[0,0,0],y=od(new Float64Array(16));t.resliceAxes&&og(y,y,t.resliceAxes);var b=new Float64Array(16);op(b,y);var x=[u[0]+.5*(p[0]+p[1])*c[0],u[1]+.5*(p[2]+p[3])*c[1],u[2]+.5*(p[4]+p[5])*c[2]],w=null;t.autoCropOutput&&(w=e.getAutoCroppedOutputBounds(l));for(var A=0;A<3;A++){var C=0,S=0,_=0,T=0;if(t.transformInputSampling){for(var O=0,P=0;P<3;P++){T+=b[4*P+A]*(x[P]-y[12+P]);var M=y[4*A+P]*y[4*A+P];C+=M*Math.abs(c[P]),S+=M*(p[2*P+1]-p[2*P])*Math.abs(c[P]),_+=M*p[2*P],O+=M}C/=O,S/=O*Math.sqrt(O),_/=O}else T=x[A],C=c[A],S=(p[2*A+1]-p[2*A])*C,_=p[2*A];null==t.outputSpacing?m[A]=C:m[A]=t.outputSpacing[A],A>=t.outputDimensionality?(g[2*A]=0,g[2*A+1]=0):null==t.outputExtent?(t.autoCropOutput&&(S=w[2*A+1]-w[2*A]),g[2*A]=Math.round(_),g[2*A+1]=Math.round(g[2*A]+Math.abs(S/m[A]))):(g[2*A]=t.outputExtent[2*A],g[2*A+1]=t.outputExtent[2*A+1]),A>=t.outputDimensionality?h[A]=0:null==t.outputOrigin?t.autoCropOutput?h[A]=w[2*A]-g[2*A]*m[A]:h[A]=T-.5*(g[2*A]+g[2*A+1])*m[A]:h[A]=t.outputOrigin[A],v[A]=g[2*A+1]-g[2*A]+1}var E=f.getDataType();t.outputScalarType&&(E=t.outputScalarType);var D=l.getPointData().getScalars().getNumberOfComponents(),I=eE.newTypedArray(E,v[0]*v[1]*v[2]*D),k=nH.newInstance({name:"Scalars",values:I,numberOfComponents:D}),N=(null==(s=a[0])?void 0:s.initialize())||aP.newInstance();N.setDimensions(v),N.setOrigin(h),N.setSpacing(m),t.outputDirection&&N.setDirection(t.outputDirection),N.getPointData().setScalars(k),e.getIndexMatrix(l,N);var R=t.interpolationMode;t.usePermuteExecute=!1,t.optimization&&null==o&&1===t.slabSliceSpacingFraction&&t.interpolator.isSeparable()&&e.isPermutationMatrix(i)&&(t.usePermuteExecute=!0,e.canUseNearestNeighbor(i,g)&&(R=pF.NEAREST)),t.interpolator.setInterpolationMode(R);var B=pL.CLAMP;B=t.wrap?pL.REPEAT:B,B=t.mirror?pL.MIRROR:B,t.interpolator.setBorderMode(B);var L=.5*t.border;L=(L=B===pL.CLAMP?L:0xfffffffe)>762939453125e-17?L:762939453125e-17,t.interpolator.setTolerance(L),t.interpolator.initialize(l),e.vtkImageResliceExecute(l,N),t.interpolator.releaseData(),a[0]=N}else hn("Invalid or missing input")},e.vtkImageResliceExecute=function(n,a){var s=n.getPointData().getScalars(),l=a.getPointData().getScalars(),u=l.getData(),c=a.getExtent(),d=Math.max(t.slabNumberOfSlices,1),f=t.slabSliceSpacingFraction,p=e.isPerspectiveMatrix(i),h=s.getData(),m=s.getDataType(),g=s.getNumberOfComponents(),v=t.interpolator.getComponentOffset(),y=t.interpolator.getBorderMode(),b=n.getDimensions(),x=[0,b[0]-1,0,b[1]-1,0,b[2]-1],w=[0,0,0];w[0]=s.getNumberOfComponents(),w[1]=w[0]*b[0],w[2]=w[1]*b[1];var A=b[0]*b[1]*b[2];v>0&&v+g<w[0]&&(h=h.subarray(+v));var C=pF.NEAREST;t.interpolator.isA("vtkImageInterpolator")&&(C=t.interpolator.getInterpolationMode());for(var S=0!==t.scalarShift||1!==t.scalarScale,_=C===pF.NEAREST&&y===pL.CLAMP&&!(null!=o||p||S)&&m===l.getDataType()&&A===s.getNumberOfTuples()&&!0===t.border&&d<=1,T=l.getDataType(),O=l.getNumberOfComponents(),P=[0,0,0,0],M=[0,0,0,0],E=[0,0,0,0],D=[0,0,0,0],I=0;I<4;++I)P[I]=i[0+I],M[I]=i[4+I],E[I]=i[8+I],D[I]=i[12+I];var k=null;_||(k=new Float64Array(g*(c[1]-c[0]+d)));var N=eE.newTypedArray(m,t.backgroundColor),R=C>pF.LINEAR||d>1&&t.slabMode===ht.SUM,B=e.getConversionFunc(m,T,t.scalarShift,t.scalarScale,R),L=e.getSetPixelsFunc(T,1,O,u),F=e.getCompositeFunc(t.slabMode,t.slabTrapezoidIntegration),V=c[2]-1,j=c[4]-1,G=[0,0,0,0],U=[0,0,0,0],z=p8.newInstance();z.initialize(a,c,t.stencil,null);for(var W=z.getScalars(a,0),H=0,q=eE.newTypedArray(T,iG.getDiagonalLength(c)*O*2),K=new Float64Array(g*d),X=new Float64Array(g);!z.isAtEnd();z.nextSpan()){var Y=z.spanEndId()-z.getId();if(H=z.getId()*O,z.isInStencil()){var Z=z.getIndex();Z[2]>j&&(j=Z[2],G[0]=D[0]+j*E[0],G[1]=D[1]+j*E[1],G[2]=D[2]+j*E[2],G[3]=D[3]+j*E[3],V=c[2]-1),Z[1]>V&&(V=Z[1],U[0]=G[0]+V*M[0],U[1]=G[1]+V*M[1],U[2]=G[2]+V*M[2],U[3]=G[3]+V*M[3]);var J=Z[0],Q=J+Y-1;if(_){for(var $=h,ee=u,et=+w[0],en=+w[1],er=+w[2],ei=x[1]-x[0]+1,eo=x[3]-x[2]+1,ea=x[5]-x[4]+1,es=J-1,el=!1,eu=+g,ec=J;ec<=Q;ec++){var ed=[U[0]+ec*P[0],U[1]+ec*P[1],U[2]+ec*P[2]],ef=pH(ed[0])-x[0],ep=pH(ed[1])-x[2],eh=pH(ed[2])-x[4];if(ef>=0&&ef<ei&&ep>=0&&ep<eo&&eh>=0&&eh<ea){if(!el){el=!0;for(var em=L(q,N,O,ec-J),eg=0;eg<em;++eg)W[H++]=q[eg]}es=ec;var ev=ef*et+ep*en+eh*er;switch(eu){case 1:W[H++]=$[ev];break;case 2:case 3:case 4:case 8:case 12:case 16:for(var ey=0;ey<eu;++ey)W[H++]=$[ev+ey];break;default:var eb=0;do W[H++]=$[ev++];while(++eb!==eu)}}else if(el)break}u=ee;for(var ex=L(q,N,O,Q-es),ew=0;ew<ex;++ew)W[H++]=q[ew]}else for(var eA=1,eC=1,eS=J,e_=J,eT=k,eO=0;eS<=Q;){for(;e_<=Q&&eC===eA;e_++){var eP=[U[0]+e_*P[0],U[1]+e_*P[1],U[2]+e_*P[2],U[3]+e_*P[3]],eM=[0,0,0,0],eD=eP;eC=!1;for(var eI=0,ek=0;ek<d;++ek){if(d>1){var eN=ek-.5*(d-1);eN*=f,eM[0]=eP[0]+eN*E[0],eM[1]=eP[1]+eN*E[1],eM[2]=eP[2]+eN*E[2],eM[3]=eP[3]+eN*E[3],eD=eM}if(p){var eR=1/eD[3];eD[0]*=eR,eD[1]*=eR,eD[2]*=eR}if(null!==o){var eB=t.interpolator.getOrigin(),eL=t.interpolator.getSpacing(),eF=[1/eL[0],1/eL[1],1/eL[2]];e.applyTransform(o,eD,eB,eF)}if(t.interpolator.checkBoundsIJK(eD)){eC=1,t.interpolator.interpolateIJK(eD,X);for(var eV=0;eV<g;++eV)K[eI++]=X[eV]}}eI>g&&F(K,g,eI/g);for(var ej=0;ej<g;++ej)eT[eO++]=K[ej];eA=e_>J?eA:eC}var eG=e_-1-(eC!==eA)-eS+1,eU=0;eA?(S&&e.rescaleScalars(k,g,Q-J+1,t.scalarShift,t.scalarScale),eU=B(q,k.subarray(eS*g),O,eG)):eU=L(q,N,O,eG);for(var ez=0;ez<eU;++ez)W[H++]=q[ez];eS+=eG,eA=eC}}else for(var eW=L(q,N,O,Y),eH=0;eH<eW;++eH)W[H++]=q[eH]}},e.getIndexMatrix=function(e,n){var a=od(new Float64Array(16));return o=null,t.resliceAxes&&ol(a,t.resliceAxes),t.resliceTransform&&(t.resliceTransform.isA("vtkHomogeneousTransform")?og(a,t.resliceTransform.getMatrix(),a):J("Non homogeneous transform have not yet been ported")),og(a,a,n.getIndexToWorld()),null==o&&og(a,e.getWorldToIndex(),a),ol(i,a),i},e.getAutoCroppedOutputBounds=function(e){var n=e.getOrigin(),i=e.getSpacing(),o=e.getDirection(),a=e.getDimensions(),s=[0,a[0]-1,0,a[1]-1,0,a[2]-1],l=new Float64Array(16);t.resliceAxes?op(l,t.resliceAxes):od(l);var u=null;t.resliceTransform&&(u=t.resliceTransform.getInverse());var c=null;nR.isIdentity3x3(o)||(c=a$.buildFromRadian().translate(n[0],n[1],n[2]).multiply3x3(o).translate(-n[0],-n[1],-n[2]).invert().getMatrix());for(var d=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],f=[0,0,0,0],p=0;p<8;++p){f[0]=n[0]+s[p%2]*i[0],f[1]=n[1]+s[2+Math.floor(p/2)%2]*i[1],f[2]=n[2]+s[4+Math.floor(p/4)%2]*i[2],f[3]=1,c&&sk(f,f,c),t.resliceTransform&&u.transformPoint(f,f),sk(f,f,l);var h=1/f[3];f[0]*=h,f[1]*=h,f[2]*=h;for(var m=0;m<3;++m)f[m]>d[2*m+1]&&(d[2*m+1]=f[m]),f[m]<d[2*m]&&(d[2*m]=f[m])}return d},e.getDataTypeMinMax=function(e){switch(e){case"Int8Array":return{min:-128,max:127};case"Int16Array":return{min:-32768,max:32767};case"Uint16Array":return{min:0,max:65535};case"Int32Array":return{min:-0x80000000,max:0x7fffffff};case"Uint32Array":return{min:0,max:0xffffffff};case"Float32Array":case"Float64Array":return{min:-12e37,max:12e37};default:return{min:0,max:255}}},e.clamp=function(e,t,n,i,o,a){for(var s=i*n,l=0;l<s;++l)e[l]=pq(t[l],o,a);return s},e.convert=function(e,t,n,i){for(var o=i*n,a=0;a<o;++a)e[a]=Math.round(t[a]);return o},e.getConversionFunc=function(t,n,i,o,a){var s=a;if(n!==eI.FLOAT&&n!==eI.DOUBLE&&!a){var l=e.getDataTypeMinMax(t),u=(l.min+i)*o,c=(l.max+i)*o,d=e.getDataTypeMinMax(n),f=d.min,p=d.max;if(u>c){var h=c;c=u,u=h}s=u<f||c>p}if(s&&n!==eI.FLOAT&&n!==eI.DOUBLE){var m=e.getDataTypeMinMax(n);return function(t,n,i,o){return e.clamp(t,n,i,o,m.min,m.max)}}return e.convert},e.set=function(e,t,n,i){for(var o=0;o<i;++o)e[o]=t[o];return n*i},e.set1=function(e,t,n,i){return e.fill(t[0],0,i),i},e.getSetPixelsFunc=function(t,n,i,o){return 1===i?e.set1:e.set},e.getCompositeFunc=function(e,t){var n=null;switch(e){case ht.MIN:n=l;break;case ht.MAX:n=u;break;case ht.MEAN:n=t?d:c;break;case ht.SUM:n=t?p:f}return n},e.applyTransform=function(e,t,n,i){t[3]=1,sk(t,t,e),t[0]-=n[0],t[1]-=n[1],t[2]-=n[2],t[0]*=i[0],t[1]*=i[1],t[2]*=i[2]},e.rescaleScalars=function(e,t,n,i,o){for(var a=n*t,s=0;s<a;++s)e[s]=(e[s]+i)*o},e.isPermutationMatrix=function(e){for(var t=0;t<3;t++)if(0!==e[4*t+3])return!1;if(1!==e[15])return!1;for(var n=0;n<3;n++){for(var i=0,o=0;o<3;o++)0!==e[4*n+o]&&i++;if(1!==i)return!1}return!0},e.isIdentityMatrix=function(e){for(var t=0;t<4;++t)for(var n=0;n<4;++n)if(+(t===n)!==e[4*n+t])return!1;return!0},e.isPerspectiveMatrix=function(e){return 0!==e[3]||0!==e[7]||0!==e[11]||1!==e[15]},e.canUseNearestNeighbor=function(e,t){for(var n=0;n<3;n++){var i=void 0;for(i=0;i<3&&0===e[4*i+n];i++);if(i>=3)return!1;var o=e[4*i+n],a=e[12+n];t[2*i]===t[2*i+1]&&(a+=o*t[2*n],o=0);var s=pW(o).error,l=pW(a).error;if(0!==s||0!==l)return!1}return!0}}(e,t)}var ho=he({newInstance:eE.newInstance(hi,"vtkImageReslice"),extend:hi},p9);function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var hs=eE.vtkErrorMacro,hl={implicitFunction:void 0,sampleDimensions:[50,50,50],modelBounds:[-1,1,-1,1,-1,1],pointType:"Float32Array"};function hu(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hl,i),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGetArray(e,t,["sampleDimensions"],3),eE.setGetArray(e,t,["modelBounds"],6),t.classHierarchy.push("vtkSampleFunction"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getMTime=function(){return t.implicitFunction&&t.implicitFunction.getMTime?Math.max(n.getMTime(),t.implicitFunction.getMTime()):n.getMTime()},e.requestData=function(e,n){var i,o=t.implicitFunction;if(o){var a=[t.sampleDimensions[0],t.sampleDimensions[1],t.sampleDimensions[2]],s=a[0]*a[1]*a[2];if(s<1||a[1]<2||a[1]<2||a[2]<2)hs("Bad volume dimensions");else{var l=(null==(i=n[0])?void 0:i.initialize())||aP.newInstance(),u=[t.modelBounds[0],t.modelBounds[2],t.modelBounds[4]],c=[(t.modelBounds[1]-t.modelBounds[0])/(a[0]-1),(t.modelBounds[3]-t.modelBounds[2])/(a[1]-1),(t.modelBounds[5]-t.modelBounds[4])/(a[2]-1)],d=a[0]*a[1];l.setDimensions(a),l.setOrigin(u),l.setSpacing(c);var f=eE.newTypedArray(t.pointType,s),p=nH.newInstance({name:"Scalars",values:f,numberOfComponents:1});l.getPointData().setScalars(p);for(var h=0,m=[0,0,0],g=0;g<a[2];g++){m[2]=u[2]+g*c[2];for(var v=0;v<a[1];v++){m[1]=u[1]+v*c[1];for(var y=0;y<a[0];y++)m[0]=u[0]+y*c[0],h=o.evaluateFunction(m),f[y+v*a[0]+g*d]=h}}n[0]=l}}else hs("An implicit function must be defined")}}var hc={Core:{vtkAbstractImageInterpolator:p$,vtkImageInterpolator:p4,vtkImagePointDataIterator:p8,vtkImageReslice:ho},Hybrid:{vtkSampleFunction:{newInstance:eE.newInstance(hu,"vtkSampleFunction"),extend:hu}}},hd={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]},hf={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hd,n),eE.setGet(e,t,["rotationFactor"]),eE.setGetArray(e,t,["displayCenter"],2),eE.setGetArray(e,t,["center"],3),t.classHierarchy.push("vtkCompositeCameraManipulator"),e.computeDisplayCenter=function(e,n){var i=e.computeWorldToDisplay(n,t.center[0],t.center[1],t.center[2]);t.displayCenter[0]=i[0],t.displayCenter[1]=i[1]}}},hp={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0},hh={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hp,n),eE.set(e,t,["pinchEnabled","panEnabled","rotateEnabled"]),eE.setGet(e,t,["interactorStyle"]),t.classHierarchy.push("vtkCompositeGestureManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onStartPinch=function(e,t){},e.onStartRotate=function(e,t){},e.onStartPan=function(e,t){},e.onPinch=function(e,t,n){},e.onRotate=function(e,t,n){},e.onPan=function(e,t,n){},e.onEndPinch=function(e){},e.onEndRotate=function(e){},e.onEndPan=function(e){},e.isPinchEnabled=function(){return t.pinchEnabled},e.isPanEnabled=function(){return t.panEnabled},e.isRotateEnabled=function(){return t.rotateEnabled}}},hm={},hg={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hm,n),t.classHierarchy.push("vtkCompositeKeyboardManipulator"),e.onKeyPress=function(e,t,n){},e.onKeyDown=function(e,t,n){},e.onKeyUp=function(e,t,n){}}},hv={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1},hy={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hv,n),eE.setGet(e,t,["button","shift","control","alt"]),eE.set(e,t,["dragEnabled","scrollEnabled"]),t.classHierarchy.push("vtkCompositeMouseManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onButtonDown=function(e,t,n){},e.onButtonUp=function(e){},e.onMouseMove=function(e,t,n){},e.onStartScroll=function(e,t,n){},e.onScroll=function(e,t,n){},e.onEndScroll=function(e){},e.isDragEnabled=function(){return t.dragEnabled},e.isScrollEnabled=function(){return t.scrollEnabled}}},hb={Unknown:0,LeftController:1,RightController:2},hx={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},hw={LeftButton:1,MiddleButton:2,RightButton:3},hA={Device:hb,Input:hx,Axis:{Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},MouseButton:hw},hC={},hS={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hC,n),eE.setGet(e,t,["device","input"]),t.classHierarchy.push("vtkCompositeVRManipulator"),e.onButton3D=function(e,t,n,i){},e.onMove3D=function(e,t,n,i){}},Device:hb,Input:hx};function h_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h_(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var hO=hA.Device,hP=hA.Input,hM=eE.vtkWarningMacro,hE=eE.vtkErrorMacro,hD=eE.normalizeWheel,hI=eE.vtkOnceErrorMacro,hk={ctrlKey:!1,altKey:!1,shiftKey:!1},hN={"xr-standard":[hP.Trigger,hP.Grip,hP.TrackPad,hP.Thumbstick,hP.A,hP.B]},hR=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function hB(e){e.cancelable&&e.preventDefault()}function hL(e){var t=Object.create(null);return e.forEach(function(e){var n=e.pointerId,i=e.position;t[n]=i}),t}var hF={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function hV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hF,n),eE.obj(e,t),t._animationExtendedEnd=0,eE.event(e,t,"RenderEvent"),hR.forEach(function(n){return eE.event(e,t,n)}),eE.get(e,t,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),eE.setGet(e,t,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),eE.moveToProtected(e,t,["view"]),function(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var n=hT({},e),i=new Set,o=new Map,a=1;function s(n,i){t._forcedRenderer||(t.currentRenderer=e.findPokedRenderer(n,i))}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){hE("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return hM("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer||s(0,0),t.currentRenderer};var l=t._getScreenEventPositionFor||function(e){var n=t._view.getCanvas(),i=n.getBoundingClientRect(),a=n.width/i.width,l=n.height/i.height,u={x:a*(e.clientX-i.left),y:l*(i.height-e.clientY+i.top),z:0,movementX:a*e.movementX,movementY:l*e.movementY};return(o.size<=1||!t.currentRenderer)&&s(u.x,u.y),u};function u(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function c(e){var t=u(e);return hT({key:e.key,keyCode:e.charCode},t)}function d(e){return e.pointerType||""}var f=function(){if(null!==t.container){var n=t.container;n.addEventListener("contextmenu",hB),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("pointerenter",e.handlePointerEnter),n.addEventListener("pointerleave",e.handlePointerLeave),n.addEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.addEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.addEventListener("pointerup",e.handlePointerUp),n.addEventListener("pointercancel",e.handlePointerCancel),n.addEventListener("keypress",e.handleKeyPress),n.addEventListener("keydown",e.handleKeyDown),document.addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.tabIndex=0,n.style.touchAction="none",n.style.userSelect="none",n.style.webkitTapHighlightColor="rgba(0,0,0,0)"}};e.bindEvents=function(e){null!==e&&n.setContainer(e)&&f()};var p=function(){clearTimeout(t.moveTimeoutID),clearTimeout(t.wheelTimeoutID),t.moveTimeoutID=0,t.wheelTimeoutID=0,a=1;var n=t.container;n&&(n.removeEventListener("contextmenu",hB),n.removeEventListener("wheel",e.handleWheel),n.removeEventListener("DOMMouseScroll",e.handleWheel),n.removeEventListener("pointerenter",e.handlePointerEnter),n.removeEventListener("pointerleave",e.handlePointerLeave),n.removeEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.removeEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.removeEventListener("pointerup",e.handlePointerUp),n.removeEventListener("pointercancel",e.handlePointerCancel),n.removeEventListener("keypress",e.handleKeyPress),n.removeEventListener("keydown",e.handleKeyDown)),document.removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),o.clear()};function h(){t._view&&t.enabled&&t.enableRender&&(t.inRender=!0,t._view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.unbindEvents=function(){p(),n.setContainer(null)},e.handleKeyPress=function(t){var n=c(t);e.keyPressEvent(n)},e.handleKeyDown=function(t){var n=c(t);e.keyDownEvent(n)},e.handleKeyUp=function(t){var n=c(t);e.keyUpEvent(n)},e.handlePointerEnter=function(t){var n=hT(hT({},u(t)),{},{position:l(t),deviceType:d(t)});e.pointerEnterEvent(n),"mouse"===n.deviceType&&e.mouseEnterEvent(n)},e.handlePointerLeave=function(t){var n=hT(hT({},u(t)),{},{position:l(t),deviceType:d(t)});e.pointerLeaveEvent(n),"mouse"===n.deviceType&&e.mouseLeaveEvent(n)},e.handlePointerDown=function(n){if(!(n.button>2||e.isPointerLocked()))switch(t.preventDefaultOnPointerDown&&hB(n),n.target.hasPointerCapture(n.pointerId)&&n.target.releasePointerCapture(n.pointerId),t.container.setPointerCapture(n.pointerId),o.has(n.pointerId)&&hM("[RenderWindowInteractor] duplicate pointerId detected"),o.set(n.pointerId,{pointerId:n.pointerId,position:l(n)}),n.pointerType){case"pen":case"touch":e.handleTouchStart(n);break;default:e.handleMouseDown(n)}},e.handlePointerUp=function(n){if(o.has(n.pointerId))switch(t.preventDefaultOnPointerUp&&hB(n),o.delete(n.pointerId),t.container.releasePointerCapture(n.pointerId),n.pointerType){case"pen":case"touch":e.handleTouchEnd(n);break;default:e.handleMouseUp(n)}},e.handlePointerCancel=function(t){if(o.has(t.pointerId))switch(o.delete(t.pointerId),t.pointerType){case"pen":case"touch":e.handleTouchEnd(t);break;default:e.handleMouseUp(t)}},e.handlePointerMove=function(t){switch(o.has(t.pointerId)&&(o.get(t.pointerId).position=l(t)),t.pointerType){case"pen":case"touch":e.handleTouchMove(t);break;default:e.handleMouseMove(t)}},e.handleMouseDown=function(t){var n=hT(hT({},u(t)),{},{position:l(t),deviceType:d(t)});switch(t.button){case 0:e.leftButtonPressEvent(n);break;case 1:e.middleButtonPressEvent(n);break;case 2:e.rightButtonPressEvent(n);break;default:hE("Unknown mouse button pressed: ".concat(t.button))}},e.requestPointerLock=function(){t.container&&t.container.requestPointerLock()},e.exitPointerLock=function(){var e,t;return null==(e=(t=document).exitPointerLock)?void 0:e.call(t)},e.isPointerLocked=function(){return!!t.container&&document.pointerLockElement===t.container},e.handlePointerLockChange=function(){e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=function(n){void 0!==n?i.has(n)?hM("requester is already registered for animating"):(i.add(n),t.animationRequest||1!==i.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):hE("undefined requester, can not start animating")},e.extendAnimation=function(n){var o=Date.now()+n;t._animationExtendedEnd=Math.max(t._animationExtendedEnd,o),t.animationRequest||0!==i.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())},e.isAnimating=function(){return t.xrAnimation||null!==t.animationRequest},e.cancelAnimation=function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.has(n))i.delete(n),t.animationRequest&&0===i.size&&Date.now()>t._animationExtendedEnd&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!o){var a=n&&n.getClassName?n.getClassName():n;hM("".concat(a," did not request an animation"))}},e.switchToXRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.xrAnimation=!0},e.returnFromXRAnimation=function(){t.xrAnimation=!1,0!==i.size&&(t.recentAnimationFrameRate=10,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateXRGamepads=function(n,i,o){n.inputSources.forEach(function(n){var a=null==n.gripSpace?null:i.getPose(n.gripSpace,o),s=null==n.gripSpace?null:i.getPose(n.targetRaySpace,o),l=n.gamepad,u=n.handedness;if(l){l.index in t.lastGamepadValues||(t.lastGamepadValues[l.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(var c=0;c<l.buttons.length;++c)c in t.lastGamepadValues[l.index][u].buttons||(t.lastGamepadValues[l.index][u].buttons[c]=!1),t.lastGamepadValues[l.index][u].buttons[c]!==l.buttons[c].pressed&&null!=a&&(e.button3DEvent({gamepad:l,position:a.transform.position,orientation:a.transform.orientation,targetPosition:s.transform.position,targetOrientation:s.transform.orientation,pressed:l.buttons[c].pressed,device:"left"===n.handedness?hO.LeftController:hO.RightController,input:hN[l.mapping]&&hN[l.mapping][c]?hN[l.mapping][c]:hP.Trigger}),t.lastGamepadValues[l.index][u].buttons[c]=l.buttons[c].pressed),t.lastGamepadValues[l.index][u].buttons[c]&&null!=a&&e.move3DEvent({gamepad:l,position:a.transform.position,orientation:a.transform.orientation,targetPosition:s.transform.position,targetOrientation:s.transform.orientation,device:"left"===n.handedness?hO.LeftController:hO.RightController})}})},e.handleMouseMove=function(n){var i=hT(hT({},u(n)),{},{position:l(n),deviceType:d(n)});0===t.moveTimeoutID?e.startMouseMoveEvent(i):(e.mouseMoveEvent(i),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout(function(){e.endMouseMoveEvent(),t.moveTimeoutID=0},200)},e.handleAnimation=function(){var n=Date.now();t._animationFrameCount++,n-t._animationStartTime>1e3&&t._animationFrameCount>1&&(t.recentAnimationFrameRate=1e3*(t._animationFrameCount-1)/(n-t._animationStartTime),t.lastFrameTime=1/t.recentAnimationFrameRate,e.animationFrameRateUpdateEvent(),t._animationStartTime=n,t._animationFrameCount=1),e.animationEvent(),h(),i.size>0||Date.now()<t._animationExtendedEnd?t.animationRequest=requestAnimationFrame(e.handleAnimation):(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render())},e.handleWheel=function(n){hB(n);var i=hT(hT(hT({},hD(n)),u(n)),{},{position:l(n),deviceType:d(n)});0===t.wheelTimeoutID&&(a=Math.abs(i.spinY)>=.3?Math.abs(i.spinY):1),i.spinY/=a,0===t.wheelTimeoutID?(e.startMouseWheelEvent(i),e.mouseWheelEvent(i)):(e.mouseWheelEvent(i),clearTimeout(t.wheelTimeoutID)),t.mouseScrollDebounceByPass?(e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0):t.wheelTimeoutID=setTimeout(function(){e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0},200)},e.handleMouseUp=function(t){var n=hT(hT({},u(t)),{},{position:l(t),deviceType:d(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(n);break;case 1:e.middleButtonReleaseEvent(n);break;case 2:e.rightButtonReleaseEvent(n);break;default:hE("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=function(n){var i=m(o.values());if(t.recognizeGestures&&i.length>1){var a=hL(o);if(2===i.length){var s=hT(hT({},u(hk)),{},{position:i[0].position,deviceType:d(n)});e.leftButtonReleaseEvent(s)}e.recognizeGesture("TouchStart",a)}else if(1===i.length){var c=hT(hT({},u(hk)),{},{position:l(n),deviceType:d(n)});e.leftButtonPressEvent(c)}},e.handleTouchMove=function(n){var i=m(o.values());if(t.recognizeGestures&&i.length>1){var a=hL(o);e.recognizeGesture("TouchMove",a)}else if(1===i.length){var s=hT(hT({},u(hk)),{},{position:i[0].position,deviceType:d(n)});e.mouseMoveEvent(s)}},e.handleTouchEnd=function(n){var i=m(o.values());if(t.recognizeGestures)if(0===i.length){var a=hT(hT({},u(hk)),{},{position:l(n),deviceType:d(n)});e.leftButtonReleaseEvent(a)}else if(1===i.length){var s=hL(o);e.recognizeGesture("TouchEnd",s);var c=hT(hT({},u(hk)),{},{position:i[0].position,deviceType:d(n)});e.leftButtonPressEvent(c)}else{var f=hL(o);e.recognizeGesture("TouchMove",f)}else if(1===i.length){var p=hT(hT({},u(hk)),{},{position:i[0].position,deviceType:d(n)});e.leftButtonReleaseEvent(p)}},e.setView=function(n){t._view!==n&&(t._view=n,t._view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=function(){var e;return null==(e=t._view)||null==(e=e.getRenderable())||null==(e=e.getRenderersByReference())?void 0:e[0]},e.findPokedRenderer=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t._view)return null;var o=null==(e=t._view)||null==(e=e.getRenderable())?void 0:e.getRenderers();if(!o||0===o.length)return null;o.sort(function(e,t){return e.getLayer()-t.getLayer()});for(var a=null,s=null,l=null,u=o.length;u--;){var c=o[u];if(t._view.isInViewport(n,i,c)&&c.getInteractive()){l=c;break}null===a&&c.getInteractive()&&(a=c),null===s&&t._view.isInViewport(n,i,c)&&(s=c)}return null===l&&(l=a),null===l&&(l=s),null==l&&(l=o[0]),l},e.render=function(){e.isAnimating()||t.inRender||h()},hR.forEach(function(n){var i=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(i,"Event")]=function(i){if(t.enabled)if(e.getCurrentRenderer()){var o=hT({type:n,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},i);e["invoke".concat(n)](o)}else hI("\n          Can not forward events without a current renderer on the interactor.\n        ")}}),e.recognizeGesture=function(n,i){if(!(Object.keys(i).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(i).forEach(function(e){t.startingEventPositions[e]=i[e]}),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var o=0,a=[],s=[];Object.keys(i).forEach(function(e){a[o]=i[e],s[o]=t.startingEventPositions[e],o++});var l=Math.sqrt((s[0].x-s[1].x)*(s[0].x-s[1].x)+(s[0].y-s[1].y)*(s[0].y-s[1].y)),u=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y)),c=eX(Math.atan2(s[1].y-s[0].y,s[1].x-s[0].x)),d=eX(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),f=d-c;Math.abs((d=d+180>=360?d-180:d+180)-(c=c+180>=360?c-180:c+180))<Math.abs(f)&&(f=d-c);var p=[];if(p[0]=(a[0].x-s[0].x+a[1].x-s[1].x)/2,p[1]=(a[0].y-s[0].y+a[1].y-s[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){var h=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);h<15&&(h=15);var m=Math.abs(u-l),g=3.1415926*u*Math.abs(f)/360,v=Math.sqrt(p[0]*p[0]+p[1]*p[1]);m>h&&m>g&&m>v?(t.currentGesture="Pinch",e.startPinchEvent({scale:1,touches:i})):g>h&&g>v?(t.currentGesture="Rotate",e.startRotateEvent({rotation:0,touches:i})):v>h&&(t.currentGesture="Pan",e.startPanEvent({translation:[0,0],touches:i}))}else{if("Rotate"===t.currentGesture){var y={rotation:f,touches:i};e.rotateEvent(y)}"Pinch"===t.currentGesture&&e.pinchEvent({scale:u/l,touches:i}),"Pan"===t.currentGesture&&e.panEvent({translation:p,touches:i})}}},e.handleVisibilityChange=function(){t._animationStartTime=Date.now(),t._animationFrameCount=0},e.setCurrentRenderer=function(e){t._forcedRenderer=!!e,t.currentRenderer=e},e.setContainer=function(e){p();var t=n.setContainer(null!=e?e:null);return t&&f(),t},e.delete=function(){for(;i.size;)e.cancelAnimation(i.values().next().value);void 0!==document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),t.container&&e.setContainer(null),n.delete()},void 0!==document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}(e,t)}var hj=hT({newInstance:eE.newInstance(hV,"vtkRenderWindowInteractor"),extend:hV,handledEvents:hR},hA);function hG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function hU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hG(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var hz=eE.vtkErrorMacro,hW=eE.VOID,hH={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function hq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hH,n),eE.obj(e,t),eE.event(e,t,"InteractionEvent"),eE.event(e,t,"StartInteractionEvent"),eE.event(e,t,"EndInteractionEvent"),eE.get(e,t,["_interactor","enabled"]),eE.setGet(e,t,["priority","processEvents"]),eE.moveToProtected(e,t,["interactor"]),function(e,t){t.classHierarchy.push("vtkInteractorObserver");var n=hU({},e);function i(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function o(){hj.handledEvents.forEach(function(n){e["handle".concat(n)]&&t.subscribedEvents.push(t._interactor["on".concat(n)](function(i){return t.processEvents?e["handle".concat(n)](i):hW},t.priority))})}e.setInteractor=function(n){n!==t._interactor&&(i(),t._interactor=n,n&&t.enabled&&o(),e.modified())},e.setEnabled=function(n){n!==t.enabled&&(i(),n&&(t._interactor?o():hz("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=function(e,n,i,o){return e?t._interactor.getView().displayToWorld(n,i,o,e):null},e.computeWorldToDisplay=function(e,n,i,o){return e?t._interactor.getView().worldToDisplay(n,i,o,e):null},e.setPriority=function(e){n.setPriority(e)&&t._interactor&&(i(),o())}}(e,t)}var hK=hU({newInstance:eE.newInstance(hq,"vtkInteractorObserver"),extend:hq},{computeWorldToDisplay:function(e,t,n,i){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,i,e)},computeDisplayToWorld:function(e,t,n,i){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,i,e)}}),hX={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025},hY={States:hX};function hZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var hJ=hY.States,hQ={Rotate:hJ.IS_ROTATE,Pan:hJ.IS_PAN,Spin:hJ.IS_SPIN,Dolly:hJ.IS_DOLLY,CameraPose:hJ.IS_CAMERA_POSE,WindowLevel:hJ.IS_WINDOW_LEVEL,Slice:hJ.IS_SLICE},h$={state:hJ.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function h0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h$,n),hK.extend(e,t,n),eE.setGet(e,t,["focusedRenderer"]),t.classHierarchy.push("vtkInteractorStyle"),Object.keys(hQ).forEach(function(n){eE.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=function(){t.state===hJ.IS_NONE&&(t.state=hQ[n],t._interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},eE.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=function(){t.state===hQ[n]&&(t.state=hJ.IS_NONE,t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t._interactor.render())}}),t.getRenderer=function(e){return t.focusedRenderer||e.pokedRenderer},e.handleKeyPress=function(e){var n=t._interactor;switch(e.key){case"r":case"R":t.getRenderer(e).resetCamera(),n.render();break;case"w":case"W":t.getRenderer(e).getActors().forEach(function(e){var t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()}),n.render();break;case"s":case"S":t.getRenderer(e).getActors().forEach(function(e){var t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()}),n.render();break;case"v":case"V":t.getRenderer(e).getActors().forEach(function(e){var t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()}),n.render()}}}var h1=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(h0,"vtkInteractorStyle"),extend:h0},hY);function h2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function h3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h2(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h4=eE.vtkDebugMacro,h5=h1.States,h6={type:"StartInteractionEvent"},h8={type:"InteractionEvent"},h9={type:"EndInteractionEvent"};function h7(e,t,n,i,o,a){var s=e.getActiveCamera(),l=s.getFocalPoint(),u=(l=t.getInteractorStyle().computeWorldToDisplay(e,l[0],l[1],l[2]))[2],c=t.getInteractorStyle().computeDisplayToWorld(e,n,i,u),d=t.getInteractorStyle().computeDisplayToWorld(e,o,a,u),f=[d[0]-c[0],d[1]-c[1],d[2]-c[2]];l=s.getFocalPoint();var p=s.getPosition();s.setFocalPoint(f[0]+l[0],f[1]+l[1],f[2]+l[2]),s.setPosition(f[0]+p[0],f[1]+p[1],f[2]+p[2])}function me(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h3({cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1},o)),h1.extend(e,t,o),eE.setGet(e,t,["rotationFactor"]),eE.get(e,t,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),eE.setGetArray(e,t,["centerOfRotation"],3),t.classHierarchy.push("vtkInteractorStyleManipulator"),t.currentVRManipulators=new Map,t.mouseManipulators=[],t.keyboardManipulators=[],t.vrManipulators=[],t.gestureManipulators=[],t.currentManipulator=null,t.currentWheelManipulator=null,t.centerOfRotation=[0,0,0],t.rotationFactor=1,e.removeAllManipulators=function(){e.removeAllMouseManipulators(),e.removeAllKeyboardManipulators(),e.removeAllVRManipulators(),e.removeAllGestureManipulators()},e.removeAllMouseManipulators=function(){t.mouseManipulators=[]},e.removeAllKeyboardManipulators=function(){t.keyboardManipulators=[]},e.removeAllVRManipulators=function(){t.vrManipulators=[]},e.removeAllGestureManipulators=function(){t.gestureManipulators=[]},n=function(t,n){var i=n.indexOf(t);return -1!==i&&(n.splice(i,1),e.modified(),!0)},e.removeMouseManipulator=function(e){return n(e,t.mouseManipulators)},e.removeKeyboardManipulator=function(e){return n(e,t.keyboardManipulators)},e.removeVRManipulator=function(e){return n(e,t.vrManipulators)},e.removeGestureManipulator=function(e){return n(e,t.gestureManipulators)},i=function(t,n){return -1===n.indexOf(t)&&(n.push(t),e.modified(),!0)},e.addMouseManipulator=function(e){return i(e,t.mouseManipulators)},e.addKeyboardManipulator=function(e){return i(e,t.keyboardManipulators)},e.addVRManipulator=function(e){return i(e,t.vrManipulators)},e.addGestureManipulator=function(e){return i(e,t.gestureManipulators)},e.getNumberOfMouseManipulators=function(){return t.mouseManipulators.length},e.getNumberOfKeyboardManipulators=function(){return t.keyboardManipulators.length},e.getNumberOfVRManipulators=function(){return t.vrManipulators.length},e.getNumberOfGestureManipulators=function(){return t.gestureManipulators.length},e.resetCurrentManipulator=function(){t.currentManipulator=null,t.currentWheelManipulator=null},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(hw.LeftButton,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(hw.MiddleButton,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(hw.RightButton,n)},e.handleButton3D=function(n){if(n){var i=e.findVRManipulator(n.device,n.input,n.pressed);i?(t.currentVRManipulators.set(n.device,i),i.onButton3D(e,t.getRenderer(n),t.state,n),n.pressed?e.startCameraPose():(t.currentVRManipulators.delete(n.device),0===t.currentVRManipulators.size&&e.endCameraPose())):h4("No manipulator found")}},e.handleMove3D=function(n){var i=t.currentVRManipulators.get(n.device);i&&t.state===h5.IS_CAMERA_POSE&&i.onMove3D(e,t.getRenderer(n),t.state,n)},e.onButtonDown=function(n,i){t.currentManipulator||(t.currentManipulator=e.findMouseManipulator(n,i.shiftKey,i.controlKey,i.altKey),t.currentManipulator?(t.currentManipulator.setCenter&&t.currentManipulator.setCenter(t.centerOfRotation),t.currentManipulator.setRotationFactor&&t.currentManipulator.setRotationFactor(t.rotationFactor),t.currentManipulator.startInteraction(),t.currentManipulator.onButtonDown(t._interactor,t.getRenderer(i),i.position),t._interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(h6)):h4("No manipulator found"))},e.findMouseManipulator=function(e,n,i,o){for(var a=null,s=t.mouseManipulators.length;s--;){var l=t.mouseManipulators[s];l&&l.getButton()===e&&l.getShift()===n&&l.getControl()===i&&l.getAlt()===o&&l.isDragEnabled()&&(a=l)}return a},e.findVRManipulator=function(e,n){for(var i=null,o=t.vrManipulators.length;o--;){var a=t.vrManipulators[o];a&&a.getDevice()===e&&a.getInput()===n&&(i=a)}return i},e.handleLeftButtonRelease=function(){e.onButtonUp(hw.LeftButton)},e.handleMiddleButtonRelease=function(){e.onButtonUp(hw.MiddleButton)},e.handleRightButtonRelease=function(){e.onButtonUp(hw.RightButton)},e.onButtonUp=function(n){t.currentManipulator&&t.currentManipulator.getButton&&t.currentManipulator.getButton()===n&&(t.currentManipulator.onButtonUp(t._interactor),t.currentManipulator.endInteraction(),t._interactor.isPointerLocked()||(t.currentManipulator=null),t._interactor.cancelAnimation(e.onButtonDown),e.invokeEndInteractionEvent(h9))},e.handleEndPointerLock=function(){t.currentManipulator=null},e.handleStartMouseWheel=function(n){if(!t.currentWheelManipulator){for(var i=null,o=t.mouseManipulators.length;o--;){var a=t.mouseManipulators[o];a&&a.isScrollEnabled()&&a.getShift()===n.shiftKey&&a.getControl()===n.controlKey&&a.getAlt()===n.altKey&&(i=a)}i?(t.currentWheelManipulator=i,t.currentWheelManipulator.onStartScroll(t._interactor,t.getRenderer(n),n.spinY),t.currentWheelManipulator.startInteraction(),t._interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(h6)):h4("No manipulator found")}},e.handleEndMouseWheel=function(){t.currentWheelManipulator&&t.currentWheelManipulator.onEndScroll&&(t.currentWheelManipulator.onEndScroll(t._interactor),t.currentWheelManipulator.endInteraction(),t.currentWheelManipulator=null,t._interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(h9))},e.handleMouseWheel=function(n){t.currentWheelManipulator&&t.currentWheelManipulator.onScroll&&(t.currentWheelManipulator.onScroll(t._interactor,t.getRenderer(n),n.spinY,t.cachedMousePosition),e.invokeInteractionEvent(h8))},e.handleMouseMove=function(n){t.cachedMousePosition=n.position,t.currentManipulator&&t.currentManipulator.onMouseMove&&(t.currentManipulator.onMouseMove(t._interactor,t.getRenderer(n),n.position),e.invokeInteractionEvent(h8))},e.handleKeyPress=function(n){t.keyboardManipulators.filter(function(e){return e.onKeyPress}).forEach(function(i){i.onKeyPress(t._interactor,t.getRenderer(n),n.key),e.invokeInteractionEvent(h8)})},e.handleKeyDown=function(n){t.keyboardManipulators.filter(function(e){return e.onKeyDown}).forEach(function(i){i.onKeyDown(t._interactor,t.getRenderer(n),n.key),e.invokeInteractionEvent(h8)})},e.handleKeyUp=function(n){t.keyboardManipulators.filter(function(e){return e.onKeyUp}).forEach(function(i){i.onKeyUp(t._interactor,t.getRenderer(n),n.key),e.invokeInteractionEvent(h8)})},e.handleStartPinch=function(n){e.startDolly();for(var i=t.gestureManipulators.length;i--;){var o=t.gestureManipulators[i];o&&o.isPinchEnabled()&&(o.onStartPinch(t._interactor,n.scale),o.startInteraction())}t._interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(h6)},e.handleEndPinch=function(){e.endDolly();for(var n=t.gestureManipulators.length;n--;){var i=t.gestureManipulators[n];i&&i.isPinchEnabled()&&(i.onEndPinch(t._interactor),i.endInteraction())}t._interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(h9)},e.handleStartRotate=function(n){e.startRotate();for(var i=t.gestureManipulators.length;i--;){var o=t.gestureManipulators[i];o&&o.isRotateEnabled()&&(o.onStartRotate(t._interactor,n.rotation),o.startInteraction())}t._interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(h6)},e.handleEndRotate=function(){e.endRotate();for(var n=t.gestureManipulators.length;n--;){var i=t.gestureManipulators[n];i&&i.isRotateEnabled()&&(i.onEndRotate(t._interactor),i.endInteraction())}t._interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(h9)},e.handleStartPan=function(n){e.startPan();for(var i=t.gestureManipulators.length;i--;){var o=t.gestureManipulators[i];o&&o.isPanEnabled()&&(o.onStartPan(t._interactor,n.translation),o.startInteraction())}t._interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(h6)},e.handleEndPan=function(){e.endPan();for(var n=t.gestureManipulators.length;n--;){var i=t.gestureManipulators[n];i&&i.isPanEnabled()&&(i.onEndPan(t._interactor),i.endInteraction())}t._interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(h9)},e.handlePinch=function(n){for(var i=t.gestureManipulators.length,o=0;i--;){var a=t.gestureManipulators[i];a&&a.isPinchEnabled()&&(a.onPinch(t._interactor,t.getRenderer(n),n.scale),o++)}o&&e.invokeInteractionEvent(h8)},e.handlePan=function(n){for(var i=t.getRenderer(n),o=t.gestureManipulators.length,a=0;o--;){var s=t.gestureManipulators[o];s&&s.isPanEnabled()&&(s.onPan(t._interactor,i,n.translation),a++)}a&&e.invokeInteractionEvent(h8)},e.handleRotate=function(n){for(var i=t.gestureManipulators.length,o=0;i--;){var a=t.gestureManipulators[i];a&&a.isRotateEnabled()&&(a.onRotate(t._interactor,t.getRenderer(n),n.rotation),o++)}o&&e.invokeInteractionEvent(h8)}}var mt=h3({newInstance:eE.newInstance(me,"vtkInteractorStyleManipulator"),extend:me},{dollyToPosition:function(e,t,n,i){var o=n.getActiveCamera();if(o.getParallelProjection()){var a=i.getView(),s=a.getViewportSize(n),l=n.getViewport(),u=a.getSize(),c=s[0]/2,d=s[1]/2,f=t.x-l[0]*u[0],p=t.y-l[1]*u[1];h7(n,i,c,d,f,p),o.setParallelScale(o.getParallelScale()/e),h7(n,i,f,p,c,d)}else{var h=o.getFocalPoint(),m=o.getViewPlaneNormal();h=i.getInteractorStyle().computeWorldToDisplay(n,h[0],h[1],h[2]);var g=i.getInteractorStyle().computeDisplayToWorld(n,t.x,t.y,h[2]);o.setFocalPoint(g[0],g[1],g[2]),o.dolly(e),n.resetCameraClippingRange();var v=o.getPosition();h=o.getFocalPoint();var y=[0,0,0],b=m[0]*(h[0]-v[0])+m[1]*(h[1]-v[1])+m[2]*(h[2]-v[2]);b/=Math.pow(m[0],2)+Math.pow(m[1],2)+Math.pow(m[2],2),y[0]=v[0]+m[0]*b,y[1]=v[1]+m[1]*b,y[2]=v[2]+m[2]*b,o.setFocalPoint(y[0],y[1],y[2]),n.resetCameraClippingRange()}},translateCamera:h7,dollyByFactor:function(e,t,n){if(!Number.isNaN(n)){var i=t.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/n):(i.dolly(n),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}),mn={};function mr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mn,n),eE.obj(e,t),hh.extend(e,t,n),hf.extend(e,t,n),t.classHierarchy.push("vtkGestureCameraManipulator"),e.onStartPinch=function(e,n){t.previousScale=n},e.onStartRotate=function(e,n){t.previousRotation=n},e.onStartPan=function(e,n){t.previousTranslation=n},e.onPinch=function(e,n,i){mt.dollyByFactor(e,n,i/t.previousScale),t.previousScale=i},e.onPan=function(e,n,i){var o=n.getActiveCamera(),a=e.getInteractorStyle(),s=o.getFocalPoint(),l=(s=a.computeWorldToDisplay(n,s[0],s[1],s[2]))[2],u=t.previousTranslation,c=a.computeDisplayToWorld(n,s[0]+i[0]-u[0],s[1]+i[1]-u[1],l),d=a.computeDisplayToWorld(n,s[0],s[1],l),f=[];f[0]=d[0]-c[0],f[1]=d[1]-c[1],f[2]=d[2]-c[2],s=o.getFocalPoint();var p=o.getPosition();o.setFocalPoint(f[0]+s[0],f[1]+s[1],f[2]+s[2]),o.setPosition(f[0]+p[0],f[1]+p[1],f[2]+p[2]),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),o.orthogonalizeViewUp(),t.previousTranslation=i},e.onRotate=function(e,n,i){var o=n.getActiveCamera();o.roll(i-t.previousRotation),o.orthogonalizeViewUp(),t.previousRotation=i}}var mi={newInstance:eE.newInstance(mr,"vtkGestureCameraManipulator"),extend:mr},mo=eE.vtkErrorMacro,ma="vtkKeyboardCameraManipulator",ms={movementSpeed:null,moveForwardKeys:["w","W","ArrowUp"],moveLeftKeys:["a","A","ArrowLeft"],moveBackwardKeys:["s","S","ArrowDown"],moveRightKeys:["d","D","ArrowRight"],moveUpKeys:[" "],moveDownKeys:["Shift"],interactor:null,renderer:null};function ml(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ms,i),eE.obj(e,t),hg.extend(e,t,i),eE.setGet(e,t,["movementSpeed","moveForwardKeys","moveLeftKeys","moveBackwardKeys","moveRightKeys","moveUpKeys","moveDownKeys","interactor","renderer"]),t.classHierarchy.push("vtkKeyboardCameraManipulator"),n={keysDown:[],direction:[0,0,0],skipUpdateDirection:!1,animationSub:null,cameraModifiedSub:null},e.inMotion=function(){return null!==n.animationSub},e.resetMovementSpeed=function(){var e=t.renderer.computeVisiblePropBounds();t.movementSpeed=iG.getMaxLength(e)/500},e.startMovement=function(){if(e.inMotion())mo("Camera is already in motion!");else{null===t.movementSpeed&&e.resetMovementSpeed();var i=t.interactor,o=t.renderer;e.calculateCurrentDirection(),n.cameraModifiedSub=o.getActiveCamera().onModified(e.calculateCurrentDirection),i.requestAnimation(ma),n.animationSub=i.onAnimation(function(){0!==n.keysDown.length&&(n.skipUpdateDirection=!0,e.moveCamera(o.getActiveCamera(),n.direction,t.movementSpeed),o.resetCameraClippingRange(),i.getLightFollowCamera()&&o.updateLightsGeometryToFollowCamera(),n.skipUpdateDirection=!1)})}},e.endMovement=function(){n.animationSub&&(n.animationSub.unsubscribe(),n.animationSub=null),t._interactor.cancelAnimation(ma),n.cameraModifiedSub&&(n.cameraModifiedSub.unsubscribe(),n.cameraModifiedSub=null)},e.calculateCurrentDirection=function(){if(!n.skipUpdateDirection){n.direction=[0,0,0];var i=t.renderer;if(i){var o=i.getActiveCamera();if(o&&0!==n.keysDown.length){var a=n.keysDown.map(function(t){return e.getDirectionFromKey(t,o)});if(0!==(a=a.filter(function(e){return e})).length){var s=a.reduce(function(e,t){return ti(e,t,t),t});th(s),n.direction=s}}}}},e.getDirectionFromKey=function(e,n){var i;if(t.moveForwardKeys.includes(e))i=n.getDirectionOfProjection();else if(t.moveLeftKeys.includes(e)){var o=n.getDirectionOfProjection();i=[0,0,0],tf(n.getViewUp(),o,i)}else if(t.moveBackwardKeys.includes(e))i=n.getDirectionOfProjection().map(function(e){return-e});else if(t.moveRightKeys.includes(e))i=[0,0,0],tf(n.getDirectionOfProjection(),n.getViewUp(),i);else if(t.moveUpKeys.includes(e))i=n.getViewUp();else{if(!t.moveDownKeys.includes(e))return;i=n.getViewUp().map(function(e){return-e})}return th(i),i},e.moveCamera=function(e,t,n){var i=e.getPosition(),o=e.getFocalPoint();e.setFocalPoint(o[0]+t[0]*n,o[1]+t[1]*n,o[2]+t[2]*n),e.setPosition(i[0]+t[0]*n,i[1]+t[1]*n,i[2]+t[2]*n)},e.onKeyPress=function(e,t,n){},e.onKeyDown=function(i,o,a){n.keysDown.includes(a)||(n.keysDown.push(a),e.calculateCurrentDirection()),e.inMotion()||(Object.assign(t,{interactor:i,renderer:o}),e.startMovement())},e.onKeyUp=function(t,i,o){n.keysDown=n.keysDown.filter(function(e){return e.toUpperCase()!==o.toUpperCase()}),e.calculateCurrentDirection(),0===n.keysDown.length&&e.endMovement()}}var mu={newInstance:eE.newInstance(ml,"vtkKeyboardCameraManipulator"),extend:ml};function mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var mf=[-2,-1,-2,-1],mp={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function mh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,md(md({boxChangeOnClick:!1,renderSelection:!0},n),{},{selectionStyle:md(md({},mp),n.selectionStyle)})),es(e,t),hy.extend(e,t,n),ex(e,t,"BoxSelectChange"),ex(e,t,"BoxSelectInput"),ep(e,t,["renderSelection","boxChangeOnClick","selectionStyle","container"]),function(e,t){t.classHierarchy.push("vtkMouseBoxSelectionManipulator");var n=null,i=null,o=null,a=null,s=null,l=!1;function u(){return o&&a?[Math.min(o.x,a.x),Math.max(o.x,a.x),Math.min(o.y,a.y),Math.max(o.y,a.y)]:mf}function c(){if(n&&i){var e=b(n.getSize(),2),t=e[0],o=e[1],a=i.getBoundingClientRect(),l=a.width,c=a.height,d=b(u(),4),f=d[0],p=d[1],h=d[2],m=d[3];s.style.left="".concat(l*f/t,"px"),s.style.top="".concat(c-c*m/o,"px"),s.style.width="".concat(l*(p-f)/t,"px"),s.style.height="".concat(c*(m-h)/o,"px")}}e.onButtonDown=function(e,a,u){var d,f,p;o=u,t.renderSelection&&(n||(n=e.getView()),!i&&null!=(d=n)&&d.getContainer&&(i=n.getContainer()),i||(i=t.container),s||(f=s=document.createElement("div"),Object.keys(p=t.selectionStyle).forEach(function(e){f.style[e]=p[e]})),c(),i&&!l&&(l=!0,i.appendChild(s)))},e.onMouseMove=function(s,l,d){o&&d&&(a=d,e.invokeBoxSelectInput({view:n,container:i,selection:u()}),t.renderSelection&&c())},e.onButtonUp=function(c,d){o&&(a||t.boxChangeOnClick)&&(a||(a=o),e.invokeBoxSelectChange({view:n,container:i,selection:u()}),l&&(s.parentElement.removeChild(s),l=!1),n=null,i=null,o=null,a=null)}}(e,t)}var mm={newInstance:ew(mh,"vtkMouseBoxSelectionManipulator"),extend:mh},mg={rotationAxis:[0,0,1],useHalfAxis:!0};function mv(e,t){var n,i,o,a,s,l,u,c,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mg,f),eE.obj(e,t),eE.setGet(e,t,["rotationAxis","useHalfAxis"]),hy.extend(e,t,f),hf.extend(e,t,f),t.classHierarchy.push("vtkMouseCameraAxisRotateManipulator"),n=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(3),a=new Float64Array(3),s=new Float64Array(16),l=new Float64Array(16),u=new Float64Array(3),c=new Float64Array(3),d=new Float64Array(3),e.onButtonDown=function(e,n,i){t.previousPosition=i},e.onMouseMove=function(e,f,p){if(p){var h=f.getActiveCamera(),m=h.getPosition(),g=h.getFocalPoint(),v=h.getViewUp(),y=h.getDirectionOfProjection();ry(n,y),od(s),od(l);var b=t.center,x=t.rotationFactor,w=t.rotationAxis;ry(d,w);var A=t.previousPosition.x-p.x,C=t.previousPosition.y-p.y,S=e.getView().getViewportSize(f);ob(l,l,eK(360*A/S[0]*x),w),tf(y,v,u);var _=eK(-360*C/S[1]*x),T=Math.acos(rw(n,w)),O=Math.acos(rw(n,d)),P=T<=O,M=Math.min(T,O);t.useHalfAxis&&!P?_=Math.PI/2-T:P&&M+_<0?_=-M:!P&&T+_>Math.PI&&(_=M),ob(l,l,_,u),ov(s,s,b),og(s,s,l),ry(c,b),ov(s,s,c),rO(i,m,s),rO(o,g,s),rO(a,v,l),h.setPosition(i[0],i[1],i[2]),h.setFocalPoint(o[0],o[1],o[2]),h.setViewUp(a),f.resetCameraClippingRange(),e.getLightFollowCamera()&&f.updateLightsGeometryToFollowCamera(),t.previousPosition=p}}}var my={newInstance:eE.newInstance(mv,"vtkMouseCameraAxisRotateManipulator"),extend:mv},mb={};function mx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mb,n),eE.obj(e,t),hf.extend(e,t,n),hy.extend(e,t,n),t.classHierarchy.push("vtkMouseCameraSliceManipulator"),e.onButtonDown=function(e,n,i){t.previousPosition=i},e.onMouseMove=function(e,n,i){if(i){var o=i.y-t.previousPosition.y,a=n.getActiveCamera(),s=a.getClippingRange(),l=a.getDistance(),u=0;u=a.getParallelProjection()?2*a.getParallelScale():2*l*Math.tan(.5*eK(a.getViewAngle())),(l+=o*u/e.getView().getViewportSize(n)[1])<s[0]&&(l=s[0]+.001*u),l>s[1]&&(l=s[1]-.001*u),a.setDistance(l),t.previousPosition=i}},e.onScroll=function(e,t,n){if(n){var i=1-n;i*=25;var o=t.getActiveCamera(),a=o.getClippingRange(),s=o.getDistance();(s+=i)<a[0]&&(s=a[0]),s>a[1]&&(s=a[1]),o.setDistance(s)}}}var mw={newInstance:eE.newInstance(mx,"vtkMouseCameraSliceManipulator"),extend:mx},mA={CoordinateSystem:{DISPLAY:0,WORLD:1}};function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var mS=mA.CoordinateSystem;function m_(e){return function(){return eE.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}var mT={allocatedRenderTime:10,coordinateSystem:mS.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function mO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mT,n),eE.obj(e,t),eE.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),eE.setGet(e,t,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),eE.moveToProtected(e,t,["parentProp"]),t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,n=0;n<t.textures.length;++n){var i=t.textures[n].getMTime();i>e&&(e=i)}return e},e.processSelectorPixelBuffers=function(e,t){},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=m_("pick"),e.hasKey=m_("hasKey"),e.getNestedVisibility=function(){return t.visibility&&(!t._parentProp||t._parentProp.getNestedVisibility())},e.getNestedPickable=function(){return t.pickable&&(!t._parentProp||t._parentProp.getNestedPickable())},e.getNestedDragable=function(){return t.dragable&&(!t._parentProp||t._parentProp.getNestedDragable())},e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return -1!==t.textures.indexOf(e)},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=function(n){var i=t.textures.filter(function(e){return e!==n});t.textures.length!==i.length&&(t.textures=i,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()},e.setCoordinateSystemToWorld=function(){return e.setCoordinateSystem(mS.WORLD)},e.setCoordinateSystemToDisplay=function(){return e.setCoordinateSystem(mS.DISPLAY)}}var mP=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(mO,"vtkProp"),extend:mO},mA),mM={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:m(iG.INIT_BOUNDS),properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function mE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mM,n),mP.extend(e,t,n),t.matrixMTime={},eE.obj(t.matrixMTime),eE.get(e,t,["isIdentity"]),eE.getArray(e,t,["orientation"]),eE.setGetArray(e,t,["origin","position","scale"],3),eE.setGet(e,t,["properties"]),t.matrix=od(new Float64Array(16)),t.rotation=od(new Float64Array(16)),t.userMatrix=od(new Float64Array(16)),t.transform=null,t.classHierarchy.push("vtkProp3D"),e.addPosition=function(n){t.position=t.position.map(function(e,t){return e+n[t]}),e.modified()},e.getOrientationWXYZ=function(){var e=sN();ok(e,t.rotation);var n=new Float64Array(3);return[eX(sB(n,e)),n[0],n[1],n[2]]},e.getOrientationQuaternion=function(){return ok(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t.rotation)},e.rotateX=function(n){0!==n&&(ox(t.rotation,t.rotation,eK(n)),e.modified())},e.rotateY=function(n){0!==n&&(ow(t.rotation,t.rotation,eK(n)),e.modified())},e.rotateZ=function(n){0!==n&&(oA(t.rotation,t.rotation,eK(n)),e.modified())},e.rotateWXYZ=function(n,i,o,a){if(0!==n&&(0!==i||0!==o||0!==a)){var s=eK(n),l=sN();sR(l,[i,o,a],s);var u=new Float64Array(16);oB(u,l),og(t.rotation,t.rotation,u),e.modified()}},e.rotateQuaternion=function(n){if(!(Math.abs(n[3])>=.999999)){var i=oB(new Float64Array(16),n);og(t.rotation,t.rotation,i),e.modified()}},e.setOrientation=function(n,i,o){return(n!==t.orientation[0]||i!==t.orientation[1]||o!==t.orientation[2])&&(t.orientation=[n,i,o],od(t.rotation),e.rotateZ(o),e.rotateX(n),e.rotateY(i),e.modified(),!0)},e.setOrientationFromQuaternion=function(n){var i=oa();return oB(i,n),!tz(i,t.rotation)&&(t.rotation=i,e.modified(),!0)},e.setUserMatrix=function(n){return!tz(t.userMatrix,n)&&(ol(t.userMatrix,n),e.modified(),!0)},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){od(t.matrix),t.userMatrix&&og(t.matrix,t.matrix,t.userMatrix),ov(t.matrix,t.matrix,t.origin),ov(t.matrix,t.matrix,t.position),og(t.matrix,t.matrix,t.rotation),oy(t.matrix,t.matrix,t.scale),ov(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),of(t.matrix,t.matrix),t.isIdentity=!0;for(var n=0;n<4;++n)for(var i=0;i<4;++i)+(n===i)!==t.matrix[n+4*i]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getBoundsByReference=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n,t.bounds=m(iG.INIT_BOUNDS),t.boundsMTime.modified(),n;if(!t.mapperBounds||!n.every(function(e,i){return n[i]===t.mapperBounds[i]})||e.getMTime()>t.boundsMTime.getMTime()){eE.vtkDebugMacro("Recomputing bounds..."),t.mapperBounds=n,e.computeMatrix();var i=new Float64Array(16);of(i,t.matrix),iG.transformBounds(n,i,t.bounds),t.boundsMTime.modified()}return t.bounds},e.getBounds=function(){var t=e.getBoundsByReference();try{return m(t)}catch(e){return t}},e.getCenter=function(){return iG.getCenter(t.bounds)},e.getLength=function(){return iG.getLength(t.bounds)},e.getXRange=function(){return iG.getXRange(t.bounds)},e.getYRange=function(){return iG.getYRange(t.bounds)},e.getZRange=function(){return iG.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified(function(){e.computeMatrix()}),e.getProperty=function(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null==t.properties[i]&&(t.properties[i]=null==(n=e.makeProperty)?void 0:n.call(e)),t.properties[i]},e.getProperties=function(){var n;return 0===t.properties.length&&(t.properties[0]=null==(n=e.makeProperty)?void 0:n.call(e)),t.properties},e.setProperty=function(e,n){var i=b(Number.isInteger(e)?[e,n]:[0,e],2),o=i[0],a=i[1];return t.properties[o]!==a&&(t.properties[o]=a,!0)},e.getMTime=function(){var e=t.mtime;return t.properties.forEach(function(t){if(null!==t){var n=t.getMTime();e=n>e?n:e}}),e}}var mD={newInstance:eE.newInstance(mE,"vtkProp3D"),extend:mE},mI={FLAT:0,GOURAUD:1,PHONG:2},mk={POINTS:0,WIREFRAME:1,SURFACE:2},mN={Shading:mI,Representation:mk,Interpolation:mI};function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var mB=mN.Representation,mL=mN.Interpolation;function mF(e){return function(){return eE.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}var mV={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:mL.GOURAUD,representation:mB.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function mj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mV,n),eE.obj(e,t),eE.setGet(e,t,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),eE.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),t.classHierarchy.push("vtkProperty"),e.setColor=function(n,i,o){Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===i&&t.color[2]===o||(t.color[0]=n,t.color[1]=i,t.color[2]=o,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=mF("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.setSpecularPower=function(n){var i=1/Math.max(1,n);t.roughness===i&&t.specularPower===n||(t.specularPower=n,t.roughness=i,e.modified())},e.addShaderVariable=mF("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(mL.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(mL.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(mL.PHONG)},e.getInterpolationAsString=function(){return eE.enumToString(mL,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(mB.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(mB.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(mB.POINTS)},e.getRepresentationAsString=function(){return eE.enumToString(mB,t.representation)}}var mG=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(mj,"vtkProperty"),extend:mj},mN);function mU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var mz={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function mW(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mz,i),mD.extend(e,t,i),t.boundsMTime={},eE.obj(t.boundsMTime),eE.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),t.classHierarchy.push("vtkActor"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mU(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getActors=function(){return[e]},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.properties[0]||e.getProperty();var n=t.properties[0].getOpacity()>=1;return(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(t.properties[0]||e.getProperty(),!e.getIsOpaque())},e.makeProperty=mG.newInstance,e.getMTime=function(){var e=n.getMTime();if(null!==t.backfaceProperty){var i=t.backfaceProperty.getMTime();e=i>e?i:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()},e.processSelectorPixelBuffers=function(e,n){t.mapper&&t.mapper.processSelectorPixelBuffers&&t.mapper.processSelectorPixelBuffers(e,n)}}var mH={newInstance:eE.newInstance(mW,"vtkActor"),extend:mW},mq={clippingPlanes:[]},mK={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mq,n),eE.obj(e,t),eE.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),t.classHierarchy.push("vtkAbstractMapper"),e.update=function(){e.getInputData()},e.addClippingPlane=function(n){return!!n.isA("vtkPlane")&&!t.clippingPlanes.includes(n)&&(t.clippingPlanes.push(n),e.modified(),!0)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){return 0!==t.clippingPlanes.length&&(t.clippingPlanes.length=0,e.modified(),!0)},e.removeClippingPlane=function(n){var i=t.clippingPlanes.indexOf(n);return -1!==i&&(t.clippingPlanes.splice(i,1),e.modified(),!0)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var n=t.length,i=0;i<n&&i<6;i++)e.addClippingPlane(t[i]);else e.addClippingPlane(t)},e.getClippingPlaneInDataCoords=function(e,n,i){var o=t.clippingPlanes;if(o){var a=o.length;if(n>=0&&n<a){var s=o[n],l=s.getNormal(),u=s.getOrigin(),c=l[0],d=l[1],f=l[2],p=-(c*u[0]+d*u[1]+f*u[2]);return i[0]=c*e[0]+d*e[4]+f*e[8]+p*e[12],i[1]=c*e[1]+d*e[5]+f*e[9]+p*e[13],i[2]=c*e[2]+d*e[6]+f*e[10]+p*e[14],void(i[3]=c*e[3]+d*e[7]+f*e[11]+p*e[15])}}eE.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}};function mX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var mY={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({bounds:m(iG.INIT_BOUNDS),center:[0,0,0],viewSpecificProperties:{}},n)),mK.extend(e,t,n),eE.setGet(e,t,["viewSpecificProperties"]),e.getBounds=function(){return eE.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),nP()},e.getCenter=function(){var n,i=e.getBounds();return t.center=iG.isValid(i)?iG.getCenter(i):null,null==(n=t.center)?void 0:n.slice()},e.getLength=function(){var t=e.getBounds();return iG.getDiagonalLength(t)}}},mZ={Off:0,PolygonOffset:1},mJ=mZ.PolygonOffset,mQ=mZ.Off,m$=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function m0(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=mQ===e;return mQ=e,t}var m1={Resolve:mZ,getResolveCoincidentTopologyAsString:function(){return m$[mQ]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return mJ},getResolveCoincidentTopology:function(){return mQ},setResolveCoincidentTopology:m0,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){var t=mJ===e;return mJ=e,t},setResolveCoincidentTopologyToDefault:function(){return m0(mZ.Off)},setResolveCoincidentTopologyToOff:function(){return m0(mZ.Off)},setResolveCoincidentTopologyToPolygonOffset:function(){return m0(mZ.PolygonOffset)}};function m2(e,t,n){n.forEach(function(n){e["get".concat(n.method)]=function(){return t[n.key]},e["set".concat(n.method)]=eE.objectSetterMap.object(e,t,{name:n.key,params:["factor","offset"]})})}var m3=["Polygon","Line","Point"],m4={modified:function(){}};m2(m4,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},m3.map(function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}}));var m5=function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),eE.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(m1).forEach(function(t){e[t]=m1[t]}),Object.keys(m4).filter(function(e){return"modified"!==e}).forEach(function(t){e[t]=m4[t]}),m2(e,t.topologyOffset,m3.map(function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}})),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=m4.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=m4.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=m4.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},m6={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3},m8={PassTypes:m6};function m9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function m7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m9(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ge=oe.FieldAssociations,gt=aN.ColorMode,gn=aN.ScalarMode,gr=aN.GetArray,gi=aI.VectorMode,go=nH.VtkDataTypes;function ga(e){return function(){return eE.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}function gs(e,t,n){var i,o,a=Math.floor(t),s=a%(2*n[0]);s<n[0]?(e[0]=s,i=1,o=e[0]===n[0]-1):(e[0]=2*n[0]-1-s,i=-1,o=0===e[0]);var l,u,c=Math.floor(a/n[0]),d=c%(2*n[1]);d<n[1]?(e[1]=d,l=1,u=e[1]===n[1]-1):(e[1]=2*n[1]-1-d,l=-1,u=0===e[1]),e[2]=Math.floor(c/n[1]);var f=t-a;o?u?e[2]+=f:e[1]+=l*f:e[0]+=i*f,e[0]=(e[0]+.5)/n[0],e[1]=(e[1]+.5)/n[1],e[2]=(e[2]+.5)/n[2]}var gl=new WeakMap,gu={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gu,n),mY.extend(e,t,n),eE.get(e,t,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),eE.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),eE.setGetArray(e,t,["scalarRange"],2),m5(e,t),t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=nP(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.setSelectionWebGLIdsToVTKIds=function(e){t.selectionWebGLIdsToVTKIds=e},e.createDefaultLookupTable=function(){t.lookupTable=aZ.newInstance()},e.getColorModeAsString=function(){return eE.enumToString(gt,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return eE.enumToString(gn,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,n,i,o,a){if(!e||!t.scalarVisibility)return{scalars:null,cellFlag:!1};var s=null,l=!1;if(n===gn.DEFAULT)(s=e.getPointData().getScalars())||(s=e.getCellData().getScalars(),l=!0);else if(n===gn.USE_POINT_DATA)s=e.getPointData().getScalars();else if(n===gn.USE_CELL_DATA)s=e.getCellData().getScalars(),l=!0;else if(n===gn.USE_POINT_FIELD_DATA){var u=e.getPointData();s=i===gr.BY_ID?u.getArrayByIndex(o):u.getArrayByName(a)}else if(n===gn.USE_CELL_FIELD_DATA){var c=e.getCellData();l=!0,s=i===gr.BY_ID?c.getArrayByIndex(o):c.getArrayByName(a)}else if(n===gn.USE_FIELD_DATA){var d=e.getFieldData();s=i===gr.BY_ID?d.getArrayByIndex(o):d.getArrayByName(a)}return{scalars:s,cellFlag:l}},e.mapScalars=function(n,i){var o=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),a=o.scalars,s=o.cellFlag;if(t.areScalarsMappedFromCells=s,!a)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var l="".concat(e.getMTime()).concat(a.getMTime()).concat(i);if(t.colorBuildString!==l){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(a,s))t.mapScalarsToTexture(a,s,i);else{t.colorCoordinates=null,t.colorTextureMap=null;var u=e.getLookupTable();u&&(u.build(),t.colorMapColors=u.mapScalars(a,t.colorMode,t.fieldDataTupleId))}t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(i)}},t.mapScalarsToTexture=function(n,i,o){var a=t.lookupTable.getRange(),s=t.lookupTable.usingLogScale(),l=t.lookupTable.getAlpha(),u=s?[Math.log10(a[0]),Math.log10(a[1])]:a;if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==o){t.lookupTable.setAlpha(o),t.colorTextureMap=null,t.lookupTable.build();var c=t.lookupTable.getNumberOfAvailableColors();t.numberOfColorsInRange=Math.min(Math.max(c,2),i?0x1fffffffd:4094);var d=t.numberOfColorsInRange+3,f=t.numberOfColorsInRange+2,p=i?[Math.min(Math.ceil(d/1),2048),Math.min(Math.ceil(d/2048),2048),Math.min(Math.ceil(d/4194304),2048)]:[f,2,1],h=new Float64Array(p[0]*p[1]*p[2]);h.fill(NaN);for(var m=t.numberOfColorsInRange,g=m+2,v=[0,0,0],y=u[0],b=u[1]-u[0],x=0;x<g;++x){var w=v[0]+p[0]*(v[1]+p[1]*v[2]),A=y+b*(x-1)/(m-1),C=s?Math.pow(10,A):A;h[w]=C,function(e,t){var n=e[1]%2==0?1:-1;if(e[0]+=n,e[0]>=t[0]||e[0]<0){var i=e[2]%2==0?1:-1;e[0]-=n,e[1]+=i,(e[1]>=t[1]||e[1]<0)&&(e[1]-=i,e[2]++)}}(v,p)}var S=nH.newInstance({numberOfComponents:1,values:h}),_=t.lookupTable.mapScalars(S,t.colorMode,0);t.colorTextureMap=aP.newInstance(),t.colorTextureMap.setDimensions(p),t.colorTextureMap.getPointData().setScalars(_),t.lookupTable.setAlpha(l)}var T=t.lookupTable.getVectorMode()===gi.MAGNITUDE&&n.getNumberOfComponents()>1?-1:t.lookupTable.getVectorComponent();t.colorCoordinates=function(e,t,n,i,o,a,s){for(var l=Array(arguments.length),u=0;u<arguments.length;++u){var c,d,f=arguments[u];l[u]=null!=(c=null==(d=f.getMTime)?void 0:d.call(f))?c:f}var p=l.join("/"),h=gl.get(e);if(h&&h.stringHash===p)return h.textureCoordinates;var m=(n[1]-n[0])/(o-1),g=n[0]-m,v=n[1]+m,y=g-.5*m,b=1/(v-g+m),x=(o+1)/(v-g),w=e.getData(),A=e.getNumberOfTuples(),C=e.getNumberOfComponents(),S=t<0||t>=C,_=a[2]<=1?2:3,T=nH.newInstance({numberOfComponents:_,values:new Float32Array(A*_)}),O=T.getData(),P=[0,0,0];gs(P,o+2,a);for(var M=0,E=0,D=[.5,.5,.5],I=0;I<A;++I){var k=void 0;if(S){for(var N=0,R=0;R<C;++R){var B=Number(w[M+R]);N+=B*B}k=Math.sqrt(N)}else k=Number(w[M+t]);if(i&&(k=Math.log10(k)),M+=C,nO(k))D[0]=P[0],D[1]=P[1],D[2]=P[2];else if(s){var L=(k-g)*x;L<1?L=0:L>o&&(L=o+1),gs(D,L,a)}else{D[1]=.49;var F=(k-y)*b;D[0]=F>1e3?1e3:F<-1e3?-1e3:F}for(var V=0;V<_;++V)O[E++]=D[V]}return gl.set(e,{stringHash:p,textureCoordinates:T}),T}(n,T,u,s,t.numberOfColorsInRange,t.colorTextureMap.getDimensions(),i)},e.getIsOpaque=function(){var n=e.getInputData(),i=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!t.scalarVisibility||null==i)return!0;var o=e.getLookupTable();return!o||(o.build(),o.areScalarsOpaque(i,t.colorMode,-1))},e.canUseTextureMapForColoring=function(e,n){return!(!n||t.colorMode===gt.DIRECT_SCALARS)||!!t.interpolateScalarsBeforeMapping&&(!t.lookupTable||!t.lookupTable.getIndexedLookup())&&!!e&&(t.colorMode!==gt.DEFAULT||e.getDataType()!==go.UNSIGNED_CHAR)&&t.colorMode!==gt.DIRECT_SCALARS},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getPolys().getNumberOfCells()}},e.acquireInvertibleLookupTable=ga("AcquireInvertibleLookupTable"),e.valueToColor=ga("ValueToColor"),e.colorToValue=ga("ColorToValue"),e.useInvertibleColorFor=ga("UseInvertibleColorFor"),e.clearInvertibleColor=ga("ClearInvertibleColor"),e.processSelectorPixelBuffers=function(e,n){if(e&&t.selectionWebGLIdsToVTKIds&&t.populateSelectionSettings){var i=e.getRawPixelBuffer(m6.ID_LOW24),o=e.getRawPixelBuffer(m6.ID_HIGH24),a=e.getCurrentPass(),s=e.getFieldAssociation(),l=null;s===ge.FIELD_ASSOCIATION_POINTS?l=t.selectionWebGLIdsToVTKIds.points:s===ge.FIELD_ASSOCIATION_CELLS&&(l=t.selectionWebGLIdsToVTKIds.cells),l&&n.forEach(function(t){if(a===m6.ID_LOW24){var n=0;o&&(n+=o[t],n*=256),n+=i[t+2],n*=256,n+=i[t+1],n*=256;var s=l[n+=i[t]],u=e.getPixelBuffer(m6.ID_LOW24);u[t]=255&s,u[t+1]=(65280&s)>>8,u[t+2]=(0xff0000&s)>>16}else if(a===m6.ID_HIGH24&&o){var c=(((0+o[t])*256+i[t+2])*256+i[t+1])*256,d=l[c+=i[t]];e.getPixelBuffer(m6.ID_HIGH24)[t]=(0xff000000&d)>>24}})}}}var gd=m7(m7(m7({newInstance:eE.newInstance(gc,"vtkMapper"),extend:gc},m4),m1),aN),gf={renderer:null,selectionPoint:[0,0,0],pickPosition:[0,0,0],pickFromList:!1,pickList:[]};function gp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gf,n),eE.obj(e,t),eE.get(e,t,["renderer"]),eE.getArray(e,t,["selectionPoint","pickPosition"]),eE.setGet(e,t,["pickFromList","pickList"]),t.classHierarchy.push("vtkAbstractPicker"),e.initialize=function(){t.renderer=null,t.selectionPoint[0]=0,t.selectionPoint[1]=0,t.selectionPoint[2]=0,t.pickPosition[0]=0,t.pickPosition[1]=0,t.pickPosition[2]=0},e.initializePickList=function(){t.pickList=[]},e.addPickList=function(e){t.pickList.push(e)},e.deletePickList=function(e){var n=t.pickList.indexOf(e);-1!==n&&t.pickList.splice(n,1)}}var gh={newInstance:eE.newInstance(gp,"vtkAbstractPicker"),extend:gp};function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var gg=eE.vtkErrorMacro,gv=eE.vtkWarningMacro,gy={tolerance:.025,mapperPosition:[0,0,0],mapper:null,dataSet:null,actors:[],pickedPositions:[],transformMatrix:null,globalTMin:Number.MAX_VALUE};function gb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gy,n),gh.extend(e,t,n),eE.setGet(e,t,["tolerance"]),eE.setGetArray(e,t,["mapperPosition"],3),eE.get(e,t,["mapper","dataSet","actors","pickedPositions"]),eE.event(e,t,"pickChange"),function(e,t){t.classHierarchy.push("vtkPicker");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);function i(){n.initialize(),t.actors=[],t.pickedPositions=[],t.mapperPosition[0]=0,t.mapperPosition[1]=0,t.mapperPosition[2]=0,t.mapper=null,t.dataSet=null,t.globalTMin=Number.MAX_VALUE}function o(e,t,n){var i=0,o=n.getRenderWindow().getViews()[0],a=n.getViewport(),s=o.getSize(),l=s[0]*a[0],u=s[1]*a[1],c=o.displayToNormalizedDisplay(l,u,e),d=n.normalizedDisplayToWorld(c[0],c[1],c[2],t);l=s[0]*a[2],u=s[1]*a[3];for(var f=o.displayToNormalizedDisplay(l,u,e),p=n.normalizedDisplayToWorld(f[0],f[1],f[2],t),h=0;h<3;h++)i+=(p[h]-d[h])*(p[h]-d[h]);return Math.sqrt(i)}function a(e,n,i,o){var a=new Float64Array(4),s=new Float64Array(4),l=[],u=[],c=t.pickFromList?t.pickList:e.getActors(),d=new Float64Array(3),f=new Float64Array(3);c.forEach(function(e){var c,p,h,g=e.getMapper(),v=0===(null==(c=e.getProperty)||null==(p=(h=c.call(e)).getOpacity)?void 0:p.call(h));if(e.getNestedPickable()&&e.getNestedVisibility()&&!v){t.transformMatrix=e.getMatrix().slice(0),of(t.transformMatrix,t.transformMatrix),op(t.transformMatrix,t.transformMatrix),sk(a,i,t.transformMatrix),sk(s,o,t.transformMatrix),rp(a,a,1/a[3]),rp(s,s,1/s[3]),to(s,a,l);var y=g?iG.inflate(g.getBounds(),n):m(iG.INIT_BOUNDS);if(iG.intersectBox(y,a,l,u,[])){oI(d,t.transformMatrix);var b=t.intersectWithLine(a,s,.333*n*(d[0]+d[1]+d[2]),e,g);if(b<Number.MAX_VALUE){f[0]=(1-b)*i[0]+b*o[0],f[1]=(1-b)*i[1]+b*o[1],f[2]=(1-b)*i[2]+b*o[2];var x=t.actors.indexOf(e);if(-1!==x){var w=t.pickedPositions[x];tx(i,f)<tx(i,w)&&(t.pickedPositions[x]=f.slice(0))}else t.actors.push(e),t.pickedPositions.push(f.slice(0))}}}});for(var p=[],h=0;h<t.pickedPositions.length;h++)p.push({actor:t.actors[h],pickedPosition:t.pickedPositions[h],distance2:tx(i,t.pickedPositions[h])});p.sort(function(e,t){var n=e.distance2,i=t.distance2;return n<i?-1:+(n>i)}),t.pickedPositions=[],t.actors=[],p.forEach(function(e){t.pickedPositions.push(e.pickedPosition),t.actors.push(e.actor)})}t.intersectWithLine=function(e,t,n,i,o){if(!o)return Number.MAX_VALUE;var a=o.getCenter(),s=ro(new Float64Array(3),t,e),l=tc(s,s);return 0===l?2:(s[0]*(a[0]-e[0])+s[1]*(a[1]-e[1])+s[2]*(a[2]-e[2]))/l},e.pick=function(e,n){if(3!==e.length&&gv("vtkPicker.pick - selection needs three components"),!n)throw gg("vtkPicker.pick - renderer cannot be null"),Error("renderer cannot be null");i();var s=e[0],l=e[1],u=e[2];t.renderer=n,t.selectionPoint[0]=s,t.selectionPoint[1]=l,t.selectionPoint[2]=u;var c=new Float64Array(4),d=new Float64Array(4),f=n.getActiveCamera(),p=f.getPosition(),h=f.getFocalPoint(),m=n.getRenderWindow().getViews()[0],g=m.getViewportSize(n);if(0!==g[1]){var v=g[0]/g[1],y=[];y=n.worldToNormalizedDisplay(h[0],h[1],h[2],v),u=(y=m.normalizedDisplayToDisplay(y[0],y[1],y[2]))[2];for(var b=m.displayToNormalizedDisplay(s,l,u),x=n.normalizedDisplayToWorld(b[0],b[1],b[2],v),w=0;w<3;w++)t.pickPosition[w]=x[w];for(var A=[],C=0;C<3;C++)A[C]=t.pickPosition[C]-p[C];for(var S=[],_=0;_<3;_++)S[_]=h[_]-p[_];th(S);var T=tc(S,A);if(0!==T){var O,P,M=f.getClippingRange();if(f.getParallelProjection()){O=M[0]-T,P=M[1]-T;for(var E=0;E<3;E++)c[E]=t.pickPosition[E]+O*S[E],d[E]=t.pickPosition[E]+P*S[E]}else{O=M[0]/T,P=M[1]/T;for(var D=0;D<3;D++)c[D]=p[D]+O*A[D],d[D]=p[D]+P*A[D]}c[3]=1,d[3]=1;var I=o(u,v,n)*t.tolerance;a(t.renderer,I,c,d)}else gv("Picker::Pick Cannot process points")}else gv("vtkPicker.pick - viewport area is 0")},e.pick3DPoint=function(e,n,s){if(!s)throw Error("renderer cannot be null");i(),t.renderer=s,rn(t.selectionPoint,e);var l=s.getRenderWindow().getViews()[0].getViewportSize(s);if(0!==l[1]){var u=l[0]/l[1];a(s,o(t.selectionPoint[2],u,s)*t.tolerance,e,n)}else gv("vtkPicker.pick3DPoint - viewport area is 0")}}(e,t)}var gx={newInstance:eE.newInstance(gb,"vtkPicker"),extend:gb},gw=eE.vtkErrorMacro,gA={pointId:-1,pointIJK:[],useCells:!1};function gC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gA,n),gx.extend(e,t,n),eE.getArray(e,t,["pointIJK"]),eE.get(e,t,["pointId"]),eE.setGet(e,t,["useCells"]),t.classHierarchy.push("vtkPointPicker"),t.intersectWithLine=function(e,n,i,o,a){var s=Number.MAX_VALUE;if(a.isA("vtkImageMapper")||a.isA("vtkImageArrayMapper")){var l=a.intersectWithLineForPointPicking(e,n);l&&(s=l.t,t.pointIJK=l.ijk)}else a.isA("vtkMapper")&&(s=t.intersectActorWithLine(e,n,i,a));return s},t.intersectActorWithLine=function(e,n,i,o){var a=o.getInputData(),s=0,l=a.getPoints().getNumberOfPoints();if(l<=s)return 2;for(var u=[],c=0;c<3;c++)u[c]=n[c]-e[c];var d,f=tc(u,u);if(0===f)return gw("Cannot process points"),2;var p=-1,h=Number.MAX_VALUE,m=Number.MAX_VALUE,g=[],v=[],y=[],b=a.getPoints();if(t.useCells)for(var x=a.getPolys().getData(),w=x[0],A=a.getPolys().getNumberOfCells(),C=0;C<A;C++)for(var S=C*w+1,_=S+w,T=S;T<_;T++){var O=x[T];if(b.getPoint(O,y),(d=(u[0]*(y[0]-e[0])+u[1]*(y[1]-e[1])+u[2]*(y[2]-e[2]))/f)>=0&&d<=1&&d<=h+t.tolerance){for(var P=0,M=0;M<3;M++){g[M]=e[M]+d*u[M];var E=Math.abs(y[M]-g[M]);E>P&&(P=E)}P<=i&&P<m&&(p=s,v[0]=y[0],v[1]=y[1],v[2]=y[2],m=P,h=d)}}else for(s=0;s<l;s++)if(b.getPoint(s,y),(d=(u[0]*(y[0]-e[0])+u[1]*(y[1]-e[1])+u[2]*(y[2]-e[2]))/f)>=0&&d<=1&&d<=h+t.tolerance){for(var D=0,I=0;I<3;I++){g[I]=e[I]+d*u[I];var k=Math.abs(y[I]-g[I]);k>D&&(D=k)}D<=i&&D<m&&(p=s,v[0]=y[0],v[1]=y[1],v[2]=y[2],m=D,h=d)}return p>-1&&h<t.globalTMin&&(t.globalTMin=h,t.pointId=p),h}}var gS={newInstance:eE.newInstance(gC,"vtkPointPicker"),extend:gC},g_=hY.States,gT={focusSphereRadiusFactor:1,displayFocusSphereOnButtonDown:!0,useHardwareSelector:!0,useWorldUpVec:!0,worldUpVec:[0,0,1]};function gO(e,t){var n,i,o,a,s,l,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gT,c),eE.obj(e,t),hf.extend(e,t,c),hy.extend(e,t,c),eE.setGet(e,t,["focusSphereRadiusFactor","displayFocusSphereOnButtonDown","useHardwareSelector","useWorldUpVec"]),eE.get(e,t,["state"]),eE.getArray(e,t,["downPoint"],3),eE.setGetArray(e,t,["worldUpVec"],3),t.classHierarchy.push("vtkMouseCameraUnicamRotateManipulator"),t.picker=gS.newInstance(),t.downPoint=[0,0,0],t.isDot=!1,t.state=g_.IS_NONE,(n=pS.newInstance()).setThetaResolution(6),n.setPhiResolution(6),(i=gd.newInstance()).setInputConnection(n.getOutputPort()),t.focusSphere=mH.newInstance(),t.focusSphere.setMapper(i),t.focusSphere.getProperty().setColor(.89,.66,.41),t.focusSphere.getProperty().setAmbient(1),t.focusSphere.getProperty().setDiffuse(0),t.focusSphere.getProperty().setRepresentationToWireframe(),o=function(e){if(e){if(t.useWorldUpVec){var n=e.findPokedRenderer().getActiveCamera();tU(t.worldUpVec,n.getViewPlaneNormal())||n.setViewUp(t.worldUpVec)}e.render()}},a=function(e,t){var n=t.findPokedRenderer(),i=b(t.getView().getViewportSize(n),2),o=i[0],a=i[1];return{x:2*e.x/o-1,y:2*e.y/a-1}},s=function(e,t,n,i,o,a,s,l){var u=e.getPosition(),c=e.getFocalPoint(),d=e.getViewUp();u[3]=1,c[3]=1,d[3]=0;var f=od(new Float64Array(16));ov(f,f,[t,n,i]),ob(f,f,l,[o,a,s]),ov(f,f,[-t,-n,-i]);var p=[],h=[];rO(p,u,f),rO(h,c,f),od(f),ob(f,f,l,[o,a,s]);var m=[];rO(m,d,f),e.setPosition.apply(e,p),e.setFocalPoint.apply(e,h),e.setViewUp.apply(e,m)},l=function(e){var n,i,o,a,s,l,u;i=e.findPokedRenderer(),(n=t.focusSphere).setPosition.apply(n,m(t.downPoint)),a=(o=i.getActiveCamera()).getPosition(),s=[],to(t.downPoint,a,s),o.getParallelProjection()&&ta(s,o.getParallelScale()),th(l=o.getDirectionOfProjection()),u=.02*tc(l,s)*t.focusSphereRadiusFactor,t.focusSphere.setScale(u,u,u),e.findPokedRenderer().addActor(t.focusSphere),t.isDot=!0},u=function(e,n){var i=e.findPokedRenderer(),o=null;if(t.useHardwareSelector){var a=e.getView().getSelector();a.setCaptureZValues(!0),a.setFieldAssociation(i5.FIELD_ASSOCIATION_POINTS),a.attach(e.getView(),i),a.setArea(n.x,n.y,n.x,n.y),o=a.select()}return o&&0!==o.length?Array.from(o[0].getProperties().worldPosition):function(e,n){var i=e.findPokedRenderer();t.picker.pick([n.x,n.y,n.z],i);var o=t.picker.getPickedPositions();if(0===o.length)return t.picker.getPickPosition();var a=i.getActiveCamera().getPosition();return o.sort(function(e,t){return tx(e,a)-tx(t,a)}),o[0]}(e,n)},e.onButtonDown=function(e,n,i){t.buttonPressed=!0,t.startPosition=i,t.previousPosition=i;var o=a(i,e);Math.abs(o.x)>.9||Math.abs(o.y)>.9?(t.state=g_.IS_ROTATE,l(e)):(t.downPoint=u(e,i),t.isDot?t.state=g_.IS_ROTATE:(t.state=g_.IS_NONE,t.displayFocusSphereOnButtonDown&&l(e)))},e.onMouseMove=function(n,i,l){t.buttonPressed&&(t.state=g_.IS_ROTATE,function(n,i){var l,u=n.findPokedRenderer(),c=a(i,n),d=a(t.previousPosition,n),f=t.focusSphere.getPosition(),p=(l=n.getView()).worldToDisplay.apply(l,m(f).concat([u])),h=Math.pow(1+Math.abs((p=[(p=a({x:f[0],y:f[1]},n)).x,p.y,f[2]])[0]),2),g=[d.x,0,0],v=[c.x,0,0],y=Math.pow(g[0],2),b=Math.pow(v[0],2),x=y>h?0:Math.sqrt(h-y),w=b>h?0:Math.sqrt(h-b),A=[g[0],0,x];th(A);var C=[v[0],0,w];th(C);var S=tc(A,C);if(Math.abs(S)>1e-4){var _=-2*Math.acos(np(S,-1,1))*Math.sign(c.x-d.x)*e.getRotationFactor(),T=u.getActiveCamera(),O=t.useWorldUpVec?t.worldUpVec:T.getViewUp();th(O),s.apply(void 0,[T].concat(m(f),m(O),[_]));var P=[];to(T.getPosition(),i,P);var M=(c.y-d.y)*e.getRotationFactor();th(P);var E=T.getViewPlaneNormal(),D=[];tf(T.getViewUp(),E,D),th(D),t.useWorldUpVec&&(tc(O,E)>.99&&M<0&&(M=0),-.99>tc(O,E)&&M>0&&(M=0)),s.apply(void 0,[T].concat(m(f),D,[M])),t.useWorldUpVec&&!tU(O,T.getViewPlaneNormal())&&T.setViewUp.apply(T,m(O)),t.previousPosition=i,u.resetCameraClippingRange(),o(n)}}(n,l),t.previousPosition=l)},e.onButtonUp=function(e){var n=e.findPokedRenderer();t.buttonPressed=!1,(t.state!==g_.IS_ROTATE||t.isDot)&&(t.state===g_.IS_ROTATE?(e.findPokedRenderer().removeActor(t.focusSphere),t.isDot=!1):t.state===g_.IS_NONE&&l(e),n.resetCameraClippingRange(),o(e))},e.getFocusSphereColor=function(){t.focusSphere.getProperty().getColor()},e.setFocusSphereColor=function(e,n,i){t.focusSphere.getProperty().setColor(e,n,i)}}var gP={newInstance:eE.newInstance(gO,"vtkMouseCameraUnicamRotateManipulator"),extend:gO},gM=hY.States,gE={};function gD(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gE,o),eE.obj(e,t),hf.extend(e,t,o),hy.extend(e,t,o),t.classHierarchy.push("vtkMouseCameraUnicamManipulator"),t.state=gM.IS_NONE,t.rotateManipulator=gP.newInstance({button:t.button,shift:t.shift,control:t.control,alt:t.alt,dragEnabled:t.dragEnabled,scrollEnabled:t.scrollEnabled,displayFocusSphereOnButtonDown:!1}),n=function(e,t){var n=t.findPokedRenderer(),i=b(t.getView().getViewportSize(n),2),o=i[0],a=i[1];return{x:2*e.x/o-1,y:2*e.y/a-1}},i=function(e,t){var n=t.findPokedRenderer().getActiveCamera(),i=[0,0,0];to(e,n.getPosition(),i),n.getParallelProjection()&&ta(i,n.getParallelScale());var o=n.getViewPlaneNormal();th(o);var a=tc(i,o),s=eK(n.getViewAngle()),l=t.findPokedRenderer(),u=b(t.getView().getViewportSize(l),2),c=u[0]/u[1]*(2*a*Math.tan(s/2)/2),d=2*a*Math.tan(s/2)/2,f=n.getViewUp(),p=[];return tf(f,o,p),tf(o,p,f),th(p),th(f),ta(p,c),ta(f,d),{rightV:p,upV:f}},e.onButtonDown=function(e,n,i){t.buttonPressed=!0,t.startPosition=i,t.previousPosition=i,t.time=Date.now()/1e3,t.dist=0,t.rotateManipulator.onButtonDown(e,n,i),t.downPoint=t.rotateManipulator.getDownPoint()},e.onMouseMove=function(e,o,a){if(t.buttonPressed){if(t.rotateManipulator.getState()===gM.IS_ROTATE)t.rotateManipulator.onMouseMove(e,o,a);else switch(t.state){case gM.IS_NONE:var s,l,u,c,d,f;s=n(a,e),l=n(t.previousPosition,e),u={x:s.x-l.x,y:s.y-l.y},t.previousPosition=a,c=Date.now()/1e3-t.time,t.dist+=Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2)),f=Math.sqrt(Math.pow((d={x:a.x-t.startPosition.x,y:a.y-t.startPosition.y}).x,2)+Math.pow(d.y,2)),Math.abs(d.y)/f>.9&&c>.05?t.state=gM.IS_DOLLY:(c>=.1||t.dist>=.03)&&(Math.abs(d.x)/f>.6?t.state=gM.IS_PAN:t.state=gM.IS_DOLLY);break;case gM.IS_PAN:!function(e,o){var a=e.findPokedRenderer(),s=n(o,e),l=n(t.previousPosition,e),u=s.x-l.x,c=s.y-l.y,d=a.getActiveCamera();t.previousPosition=o;for(var f=i(t.downPoint,e),p=f.rightV,h=f.upV,m=[],g=0;g<3;g++)m[g]=u*p[g]+c*h[g];d.translate.apply(d,m),a.resetCameraClippingRange(),e.render()}(e,a);break;case gM.IS_DOLLY:!function(e,o){var a=e.findPokedRenderer(),s=n(o,e),l=n(t.previousPosition,e),u={x:s.x-l.x,y:s.y-l.y},c=a.getActiveCamera(),d=c.getPosition();if(c.getParallelProjection())c.zoom(1-u.y);else{var f=[];to(t.downPoint,d,f),ta(f,-4*u.y),c.translate.apply(c,f)}var p=i(t.downPoint,e).rightV;ta(p,u.x),c.translate.apply(c,m(p)),a.resetCameraClippingRange(),e.render()}(e,a)}t.previousPosition=a}},e.onButtonUp=function(e){t.buttonPressed=!1,t.state===gM.IS_NONE&&t.rotateManipulator.onButtonUp(e),t.state=gM.IS_NONE},e.getUseWorldUpVec=function(){return t.rotateManipulator.getUseWorldUpVec()},e.setUseWorldUpVec=function(e){t.rotateManipulator.setUseWorldUpVec(e)},e.getWorldUpVec=function(){return t.rotateManipulator.getWorldUpVec()},e.setWorldUpVec=function(e,n,i){t.rotateManipulator.setWorldUpVec(e,n,i)},e.getUseHardwareSelector=function(){return t.rotateManipulator.getUseHardwareSelector()},e.setUseHardwareSelector=function(e){t.rotateManipulator.setUseHardwareSelector(e)},e.getFocusSphereColor=function(){t.rotateManipulator.getFocusSphereColor()},e.setFocusSphereColor=function(e,n,i){t.rotateManipulator.setFocusSphereColor(e,n,i)},e.getFocusSphereRadiusFactor=function(){return t.rotateManipulator.getFocusSphereRadiusFactor()},e.setFocusSphereRadiusFactor=function(e){t.rotateManipulator.setFocusSphereRadiusFactor(e)}}var gI={newInstance:eE.newInstance(gD,"vtkMouseCameraUnicamManipulator"),extend:gD},gk={numAnimationSteps:5,sensitivity:.05,usePointerLock:!0};function gN(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gk,i),eE.obj(e,t),hf.extend(e,t,i),hy.extend(e,t,i),eE.setGet(e,t,["numAnimationSteps","sensitivity","usePointerLock"]),t.classHierarchy.push("vtkMouseCameraTrackballFirstPersonManipulator"),n={interactor:null,renderer:null},e.onButtonDown=function(e,i,o){t.usePointerLock&&!e.isPointerLocked()&&(Object.assign(n,{interactor:e,renderer:i}),e.requestPointerLock())},e.onMouseMove=function(i,o,a){if(a){var s=t.sensitivity,l=-a.movementX*s,u=-a.movementY*s;Object.assign(n,{interactor:i,renderer:o}),e.moveCamera(l,u)}},e.moveCamera=function(e,i){var o=n.renderer,a=n.interactor,s=o.getActiveCamera(),l=t.numAnimationSteps,u=e/l,c=i/l,d=performance.now().toString(),f="".concat("vtkMouseCameraTrackballFirstPersonManipulator",".").concat(d),p=0,h=null;a.requestAnimation(f),h=a.onAnimation(function(){return s.yaw(u),s.pitch(c),s.orthogonalizeViewUp(),void((p+=1)===l&&(h.unsubscribe(),o.resetCameraClippingRange(),a.getLightFollowCamera()&&o.updateLightsGeometryToFollowCamera(),setTimeout(function(){n.interactor.cancelAnimation(f)},0)))})}}var gR={newInstance:eE.newInstance(gN,"vtkMouseCameraTrackballFirstPersonManipulator"),extend:gN},gB={useWorldUpVec:!1,worldUpVec:[0,1,0],useFocalPointAsCenterOfRotation:!1};function gL(e,t){var n,i,o,a,s,l,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gB,c),eE.obj(e,t),hy.extend(e,t,c),hf.extend(e,t,c),eE.setGet(e,t,["useWorldUpVec"]),eE.setGetArray(e,t,["worldUpVec"],3),eE.setGet(e,t,["useFocalPointAsCenterOfRotation"]),t.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator"),n=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(3),a=new Float64Array(16),s=new Float64Array(3),l=new Float64Array(3),u=new Float64Array(3),e.onButtonDown=function(e,n,i){t.previousPosition=i},e.onMouseMove=function(e,c,d){if(d){var f=c.getActiveCamera(),p=f.getPosition(),h=f.getFocalPoint();od(a);var m=t.center,g=t.rotationFactor;t.useFocalPointAsCenterOfRotation&&(m[0]=h[0],m[1]=h[1],m[2]=h[2]);var v=t.previousPosition.x-d.x,y=t.previousPosition.y-d.y,b=e.getView().getViewportSize(c),x=f.getViewUp();if(t.useWorldUpVec){var w=new Float64Array(3);rn(w,t.worldUpVec),ta(w,tc(p,t.worldUpVec)/tc(t.worldUpVec,t.worldUpVec)),ti(m,w,w),ov(a,a,w),ob(a,a,eK(360*v/b[0]*g),t.worldUpVec),w[0]=-w[0],w[1]=-w[1],w[2]=-w[2],ov(a,a,w),ov(a,a,m)}else ov(a,a,m),ob(a,a,eK(360*v/b[0]*g),x);tf(f.getDirectionOfProjection(),x,s),ob(a,a,eK(-360*y/b[1]*g),s),l[0]=-m[0],l[1]=-m[1],l[2]=-m[2],ov(a,a,l),rO(n,p,a),rO(i,h,a),u[0]=x[0]+p[0],u[1]=x[1]+p[1],u[2]=x[2]+p[2],rO(o,u,a),f.setPosition(n[0],n[1],n[2]),f.setFocalPoint(i[0],i[1],i[2]),f.setViewUp(o[0]-n[0],o[1]-n[1],o[2]-n[2]),f.orthogonalizeViewUp(),c.resetCameraClippingRange(),e.getLightFollowCamera()&&c.updateLightsGeometryToFollowCamera(),t.previousPosition=d}}}var gF={newInstance:eE.newInstance(gL,"vtkMouseCameraTrackballRotateManipulator"),extend:gL},gV={};function gj(e,t){var n,i,o,a,s,l,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gV,c),eE.obj(e,t),hf.extend(e,t,c),hy.extend(e,t,c),t.classHierarchy.push("vtkMouseCameraTrackballRollManipulator"),n=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(3),a=new Float64Array(16),s=new Float64Array(3),l=new Float64Array(3),u=new Float64Array(3),e.onButtonDown=function(e,n,i){t.previousPosition=i},e.onMouseMove=function(c,d,f){if(f){var p=d.getActiveCamera(),h=p.getPosition(),m=p.getFocalPoint(),g=p.getViewUp();n[0]=m[0]-h[0],n[1]=m[1]-h[1],n[2]=m[2]-h[2],e.computeDisplayCenter(c.getInteractorStyle(),d);var v=t.previousPosition.x-t.displayCenter[0],y=f.x-t.displayCenter[0],b=t.previousPosition.y-t.displayCenter[1],x=f.y-t.displayCenter[1];if((0!==y||0!==x)&&(0!==v||0!==b)){var w=eX((v*x-b*y)/(Math.sqrt(v*v+b*b)*Math.sqrt(y*y+x*x))),A=t.center;od(a),o[0]=-A[0],o[1]=-A[1],o[2]=-A[2],ov(a,a,A),ob(a,a,eK(w),n),ov(a,a,o),rO(s,h,a),rO(l,m,a),i[0]=g[0]+h[0],i[1]=g[1]+h[1],i[2]=g[2]+h[2],rO(u,i,a),p.setPosition(s[0],s[1],s[2]),p.setFocalPoint(l[0],l[1],l[2]),p.setViewUp(u[0]-s[0],u[1]-s[1],u[2]-s[2]),p.orthogonalizeViewUp(),d.resetCameraClippingRange(),c.getLightFollowCamera()&&d.updateLightsGeometryToFollowCamera(),t.previousPosition=f}}}}var gG={newInstance:eE.newInstance(gj,"vtkMouseCameraTrackballRollManipulator"),extend:gj},gU={};function gz(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gU,a),eE.obj(e,t),hy.extend(e,t,a),hf.extend(e,t,a),t.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator"),n=gF.newInstance(),i=gG.newInstance(),o=null,e.onButtonDown=function(t,a,s){var l,u,c,d,f=t.getView().getViewportSize(a),p=[.5*f[0],.5*f[1]],h=.9*((l=p[0])<(u=p[1])?u:l);(o=h*h>(c=p[0]-s.x)*c+(d=p[1]-s.y)*d?n:i).setButton(e.getButton()),o.setShift(e.getShift()),o.setControl(e.getControl()),o.setCenter(e.getCenter()),o.onButtonDown(t,s)},e.onButtonUp=function(e){o&&o.onButtonUp(e)},e.onMouseMove=function(e,t,n){o&&o.onMouseMove(e,t,n)}}var gW={newInstance:eE.newInstance(gz,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:gz},gH={};function gq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gH,n),eE.obj(e,t),hf.extend(e,t,n),hy.extend(e,t,n),t.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),e.onButtonDown=function(e,n,i){t.previousPosition=i},e.onMouseMove=function(e,n,i){if(i){var o=t.previousPosition;t.previousPosition=i;var a=n.getActiveCamera(),s=a.getPosition(),l=a.getFocalPoint();if(a.getParallelProjection()){a.orthogonalizeViewUp();var u=a.getViewUp(),c=[0,0,0];tf(a.getViewPlaneNormal(),u,c);var d=e.getView().getViewportSize(n)[1],f=(i.x-o.x)/d,p=(o.y-i.y)/d,h=a.getParallelScale();p*=2*h;var m=c[0]*(f*=2*h)+u[0]*p;s[0]+=m,l[0]+=m,m=c[1]*f+u[1]*p,s[1]+=m,l[1]+=m,m=c[2]*f+u[2]*p,s[2]+=m,l[2]+=m,a.setPosition(s[0],s[1],s[2]),a.setFocalPoint(l[0],l[1],l[2])}else{var g=t.center,v=e.getInteractorStyle(),y=v.computeWorldToDisplay(n,g[0],g[1],g[2])[2],b=v.computeDisplayToWorld(n,i.x,i.y,y),x=v.computeDisplayToWorld(n,o.x,o.y,y),w=[s[0]+(x[0]-b[0]),s[1]+(x[1]-b[1]),s[2]+(x[2]-b[2])],A=[l[0]+(x[0]-b[0]),l[1]+(x[1]-b[1]),l[2]+(x[2]-b[2])];a.setPosition(w[0],w[1],w[2]),a.setFocalPoint(A[0],A[1],A[2])}n.resetCameraClippingRange(),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}}var gK={newInstance:eE.newInstance(gq,"vtkMouseCameraTrackballPanManipulator"),extend:gq},gX={zoomScale:0,flipDirection:!1};function gY(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gX,n),eE.obj(e,t),hy.extend(e,t,n),hf.extend(e,t,n),eE.setGet(e,t,["flipDirection"]),t.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),e.onButtonDown=function(e,n,i){t.previousPosition=i;var o=e.getView().getViewportSize(n),a=n.getActiveCamera(),s=t.flipDirection?-1:1;a.getParallelProjection()?t.zoomScale=1.5/o[1]*s:t.zoomScale=a.getClippingRange()[1]/o[1]*1.5*s},e.onMouseMove=function(e,n,i){if(i){var o=t.previousPosition.y-i.y,a=n.getActiveCamera();if(a.getParallelProjection()){var s=o*t.zoomScale;a.setParallelScale((1-s)*a.getParallelScale())}else{var l=a.getPosition(),u=a.getFocalPoint(),c=a.getDirectionOfProjection(),d=o*t.zoomScale,f=d*c[0];l[0]+=f,u[0]+=f,f=d*c[1],l[1]+=f,u[1]+=f,f=d*c[2],l[2]+=f,u[2]+=f,a.getFreezeFocalPoint()||a.setFocalPoint(u[0],u[1],u[2]),a.setPosition(l[0],l[1],l[2]),n.resetCameraClippingRange()}e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=i}},e.onScroll=function(e,t,n){if(n){var i=t.getActiveCamera(),o=1-n/10;i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/o):(i.dolly(o),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var gZ={newInstance:eE.newInstance(gY,"vtkMouseCameraTrackballZoomManipulator"),extend:gY},gJ={zoomPosition:null};function gQ(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gJ,i),gZ.extend(e,t,i),t.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator"),n=e.onButtonDown,e.onButtonDown=function(e,i,o){n(e,i,o),t.zoomPosition=o},e.onMouseMove=function(e,n,i){if(i){var o=(t.previousPosition.y-i.y)*t.zoomScale;mt.dollyToPosition(1-o,t.zoomPosition,n,e),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=i}},e.onScroll=function(e,t,n,i){n&&i&&(mt.dollyToPosition(1-.1*n,i,t,e),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera())}}var g$={newInstance:eE.newInstance(gQ,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:gQ},g0={horizontalListener:null,verticalListener:null,scrollListener:null};function g1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g0,n),eE.obj(e,t),hy.extend(e,t,n),eE.setGet(e,t,["usePointerLock"]),function(e,t){t.classHierarchy.push("vtkMouseRangeManipulator");var n=new Map;function i(e,t){return t*((e.max-e.min)/(e.step+1))}function o(e,i){var o=e.getValue(),a=e.exponentialScroll?Math.pow(e.scale,Math.log2(Math.abs(t.interactionNetDelta)+2)):e.scale,s=i*(a=Math.abs(a)*Math.sign(e.scale))+n.get(e),l=Math.floor(Math.abs(s/e.step)),u=o+e.step*l*Math.sign(s);(u=Math.min(u=Math.max(u,e.min),e.max))!==o?(e.setValue(u),n.set(e,0)):u===e.min&&s<0||u===e.max&&s>0?n.set(e,0):n.set(e,s)}e.setHorizontalListener=function(i,o,a,s,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];t.horizontalListener={min:i,max:o,step:a,getValue:Number.isFinite(s)?function(){return s}:s,setValue:l,scale:u,exponentialScroll:c},n.set(t.horizontalListener,0),e.modified()},e.setVerticalListener=function(i,o,a,s,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];t.verticalListener={min:i,max:o,step:a,getValue:Number.isFinite(s)?function(){return s}:s,setValue:l,scale:u,exponentialScroll:c},n.set(t.verticalListener,0),e.modified()},e.setScrollListener=function(i,o,a,s,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];a<0&&J("Value of step cannot be negative. If you want to invert the scrolling direction, use a negative scale value instead."),t.scrollListener={min:i,max:o,step:Math.abs(a),getValue:Number.isFinite(s)?function(){return s}:s,setValue:l,scale:u,exponentialScroll:c},n.set(t.scrollListener,0),e.modified()},e.removeHorizontalListener=function(){t.horizontalListener&&(n.delete(t.horizontalListener),delete t.horizontalListener,e.modified())},e.removeVerticalListener=function(){t.verticalListener&&(n.delete(t.verticalListener),delete t.verticalListener,e.modified())},e.removeScrollListener=function(){t.scrollListener&&(n.delete(t.scrollListener),delete t.scrollListener,e.modified())},e.removeAllListeners=function(){e.removeHorizontalListener(),e.removeVerticalListener(),e.removeScrollListener()},e.onButtonDown=function(e,n,i){t.previousPosition=i,t.interactionNetDelta=0;var o=e.getView(),a=o.getContainerSize()[0]/o.getSize()[0];t.containerSize=o.getViewportSize(n).map(function(e){return e*a})},e.onButtonUp=function(e){e.exitPointerLock()},e.startPointerLockEvent=function(t,n){var i=function(i){e.onPointerLockMove(t,n,i)};document.addEventListener("mousemove",i);var o=null;o=null==t?void 0:t.onEndPointerLock(function(){var e;document.removeEventListener("mousemove",i),null==(e=o)||e.unsubscribe()})},e.onPointerLockMove=function(n,i,o){n.isPointerLocked()&&null!=t.previousPosition&&(t.previousPosition.x+=o.movementX,t.previousPosition.y+=o.movementY,e.onMouseMove(n,i,t.previousPosition))},e.onMouseMove=function(n,a,s){if((t.verticalListener||t.horizontalListener)&&(t.usePointerLock&&!n.isPointerLocked()&&(n.requestPointerLock(),e.startPointerLockEvent(n,a)),s)){if(t.horizontalListener){var l=(s.x-t.previousPosition.x)/t.containerSize[0],u=i(t.horizontalListener,l);t.interactionNetDelta+=u,o(t.horizontalListener,u)}if(t.verticalListener){var c=(s.y-t.previousPosition.y)/t.containerSize[1],d=i(t.verticalListener,c);t.interactionNetDelta+=d,o(t.verticalListener,d)}t.previousPosition=s}},e.onScroll=function(e,n,i){t.scrollListener&&i&&(t.interactionNetDelta+=i*t.scrollListener.step,o(t.scrollListener,i*t.scrollListener.step))},e.onStartScroll=function(){t.interactionNetDelta=0}}(e,t)}var g2={newInstance:eE.newInstance(g1,"vtkMouseRangeManipulator"),extend:g1},g3={device:hb.RightController,input:hx.TrackPad};function g4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g3,n),eE.obj(e,t),hS.extend(e,t,n),t.classHierarchy.push("vtkVRButtonPanManipulator"),e.onButton3D=function(e,t,n,i){i.pressed?e.startCameraPose():n===hX.IS_CAMERA_POSE&&e.endCameraPose()},e.onMove3D=function(e,t,n,i){if(n===hX.IS_CAMERA_POSE){var o=t.getActiveCamera(),a=o.getPhysicalTranslation(),s=.05*i.gamepad.axes[1]*o.getPhysicalScale(),l=o.physicalOrientationToWorldDirection(i.orientation);o.setPhysicalTranslation(a[0]+l[0]*s,a[1]+l[1]*s,a[2]+l[2]*s)}}}var g5={vtkCompositeCameraManipulator:hf,vtkCompositeGestureManipulator:hh,vtkCompositeKeyboardManipulator:hg,vtkCompositeMouseManipulator:hy,vtkCompositeVRManipulator:hS,vtkGestureCameraManipulator:mi,vtkKeyboardCameraManipulator:mu,vtkMouseBoxSelectorManipulator:mm,vtkMouseCameraAxisRotateManipulator:my,vtkMouseCameraSliceManipulator:mw,vtkMouseCameraUnicamManipulator:gI,vtkMouseCameraUnicamRotateManipulator:gP,vtkMouseCameraTrackballFirstPersonManipulator:gR,vtkMouseCameraTrackballMultiRotateManipulator:gW,vtkMouseCameraTrackballPanManipulator:gK,vtkMouseCameraTrackballRollManipulator:gG,vtkMouseCameraTrackballRotateManipulator:gF,vtkMouseCameraTrackballZoomManipulator:gZ,vtkMouseCameraTrackballZoomToMouseManipulator:g$,vtkMouseRangeManipulator:g2,vtkVRButtonPanManipulator:{newInstance:eE.newInstance(g4,"vtkVRButtonPanManipulator"),extend:g4}},g6=[],g8={device:{},screen:window.orientation||0,supported:!!window.DeviceMotionEvent,update:!1},g9={"landscape-primary":90,"landscape-secondary":-90,"portrait-secondary":180,"portrait-primary":0};function g7(e){g8.device=e,Number.isFinite(e.alpha)||(g8.supported=!1)}function ve(){g8.screen=g9[window.screen.orientation||window.screen.mozOrientation]||window.orientation||0}var vt=hY.States,vn={motionFactor:10,zoomFactor:10};function vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vn,n),h1.extend(e,t,n),eE.setGet(e,t,["motionFactor","zoomFactor"]),t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=function(n){var i=n.position,o=t.getRenderer(n);switch(t.state){case vt.IS_ROTATE:e.handleMouseRotate(o,i),e.invokeInteractionEvent({type:"InteractionEvent"});break;case vt.IS_PAN:e.handleMousePan(o,i),e.invokeInteractionEvent({type:"InteractionEvent"});break;case vt.IS_DOLLY:e.handleMouseDolly(o,i),e.invokeInteractionEvent({type:"InteractionEvent"});break;case vt.IS_SPIN:e.handleMouseSpin(o,i),e.invokeInteractionEvent({type:"InteractionEvent"})}t.previousPosition=i},e.handleButton3D=function(n){n&&n.pressed&&n.device===hb.RightController&&(n.input===hx.Trigger||n.input===hx.TrackPad)?e.startCameraPose():!n||n.pressed||n.device!==hb.RightController||n.input!==hx.Trigger&&n.input!==hx.TrackPad||t.state!==vt.IS_CAMERA_POSE||e.endCameraPose()},e.handleMove3D=function(n){t.state===vt.IS_CAMERA_POSE&&e.updateCameraPose(n)},e.updateCameraPose=function(e){var n=t.getRenderer(e).getActiveCamera(),i=n.getPhysicalTranslation(),o=.025*n.getPhysicalScale(),a=n.physicalOrientationToWorldDirection([e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w]);n.setPhysicalTranslation(i[0]+a[0]*o,i[1]+a[1]*o,i[2]+a[2]*o)},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,n.shiftKey?n.controlKey||n.altKey?e.startDolly():e.startPan():n.controlKey||n.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=function(){switch(t.state){case vt.IS_DOLLY:e.endDolly();break;case vt.IS_PAN:e.endPan();break;case vt.IS_SPIN:e.endSpin();break;case vt.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=function(){e.startDolly()},e.handleEndMouseWheel=function(){e.endDolly()},e.handleStartPinch=function(n){t.previousScale=n.scale,e.startDolly()},e.handleEndPinch=function(){e.endDolly()},e.handleStartRotate=function(n){t.previousRotation=n.rotation,e.startRotate()},e.handleEndRotate=function(){e.endRotate()},e.handleStartPan=function(n){t.previousTranslation=n.translation,e.startPan()},e.handleEndPan=function(){e.endPan()},e.handlePinch=function(n){e.dollyByFactor(t.getRenderer(n),n.scale/t.previousScale),t.previousScale=n.scale},e.handlePan=function(n){var i=t.getRenderer(n).getActiveCamera(),o=i.getFocalPoint(),a=(o=e.computeWorldToDisplay(t.getRenderer(n),o[0],o[1],o[2]))[2],s=n.translation,l=t.previousTranslation,u=e.computeDisplayToWorld(t.getRenderer(n),o[0]+s[0]-l[0],o[1]+s[1]-l[1],a),c=e.computeDisplayToWorld(t.getRenderer(n),o[0],o[1],a),d=[];d[0]=c[0]-u[0],d[1]=c[1]-u[1],d[2]=c[2]-u[2],o=i.getFocalPoint();var f=i.getPosition();i.setFocalPoint(d[0]+o[0],d[1]+o[1],d[2]+o[2]),i.setPosition(d[0]+f[0],d[1]+f[1],d[2]+f[2]),t._interactor.getLightFollowCamera()&&t.getRenderer(n).updateLightsGeometryToFollowCamera(),i.orthogonalizeViewUp(),t.previousTranslation=n.translation},e.handleRotate=function(e){var n=t.getRenderer(e).getActiveCamera();n.roll(e.rotation-t.previousRotation),n.orthogonalizeViewUp(),t.previousRotation=e.rotation},e.handleMouseRotate=function(e,n){if(t.previousPosition){var i=t._interactor,o=n.x-t.previousPosition.x,a=n.y-t.previousPosition.y,s=i.getView().getViewportSize(e),l=-.1,u=-.1;s[0]&&s[1]&&(l=-20/s[1],u=-20/s[0]);var c=o*u*t.motionFactor,d=a*l*t.motionFactor,f=e.getActiveCamera();Number.isNaN(c)||Number.isNaN(d)||(f.azimuth(c),f.elevation(d),f.orthogonalizeViewUp()),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),i.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}},e.handleMouseSpin=function(e,n){if(t.previousPosition){var i=t._interactor,o=e.getActiveCamera(),a=i.getView().getViewportCenter(e),s=eX(Math.atan2(t.previousPosition.y-a[1],t.previousPosition.x-a[0])),l=eX(Math.atan2(n.y-a[1],n.x-a[0]))-s;Number.isNaN(l)||(o.roll(l),o.orthogonalizeViewUp())}},e.handleMousePan=function(n,i){if(t.previousPosition){var o=n.getActiveCamera(),a=o.getFocalPoint(),s=(a=e.computeWorldToDisplay(n,a[0],a[1],a[2]))[2],l=e.computeDisplayToWorld(n,i.x,i.y,s),u=e.computeDisplayToWorld(n,t.previousPosition.x,t.previousPosition.y,s),c=[];c[0]=u[0]-l[0],c[1]=u[1]-l[1],c[2]=u[2]-l[2],a=o.getFocalPoint();var d=o.getPosition();o.setFocalPoint(c[0]+a[0],c[1]+a[1],c[2]+a[2]),o.setPosition(c[0]+d[0],c[1]+d[1],c[2]+d[2]),t._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}},e.handleMouseDolly=function(n,i){if(t.previousPosition){var o=i.y-t.previousPosition.y,a=t._interactor.getView().getViewportCenter(n),s=t.motionFactor*o/a[1];e.dollyByFactor(n,Math.pow(1.1,s))}},e.handleMouseWheel=function(n){var i=1-n.spinY/t.zoomFactor;e.dollyByFactor(t.getRenderer(n),i)},e.dollyByFactor=function(e,n){if(!Number.isNaN(n)){var i=e.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/n):(i.dolly(n),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),t._interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}}var vi={newInstance:eE.newInstance(vr,"vtkInteractorStyleTrackballCamera"),extend:vr},vo={windowLevelStartPosition:[0,0],windowLevelCurrentPosition:[0,0],lastSlicePosition:0,windowLevelInitial:[1,.5],currentImageNumber:-1,interactionMode:"IMAGE2D",xViewRightVector:[0,1,0],xViewUpVector:[0,0,-1],yViewRightVector:[1,0,0],yViewUpVector:[0,0,-1],zViewRightVector:[1,0,0],zViewUpVector:[0,1,0]};function va(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vo,n),vi.extend(e,t,n),eE.setGet(e,t,["interactionMode"]),eE.get(e,t,["currentImageProperty"]),t.classHierarchy.push("vtkInteractorStyleImage"),e.superHandleMouseMove=e.handleMouseMove,e.handleMouseMove=function(n){var i=n.position,o=t.getRenderer(n);switch(t.state){case hX.IS_WINDOW_LEVEL:e.windowLevel(o,i),e.invokeInteractionEvent({type:"InteractionEvent"});break;case hX.IS_SLICE:e.slice(o,i),e.invokeInteractionEvent({type:"InteractionEvent"})}e.superHandleMouseMove(n)},e.superHandleLeftButtonPress=e.handleLeftButtonPress,e.handleLeftButtonPress=function(n){var i=n.position;if(n.shiftKey||n.controlKey)"IMAGE3D"===t.interactionMode&&n.shiftKey?n.controlKey||n.altKey?e.startDolly():e.startRotate():"IMAGE_SLICING"===t.interactionMode&&n.controlKey?(t.lastSlicePosition=i.y,e.startSlice()):e.superHandleLeftButtonPress(n);else{t.windowLevelStartPosition[0]=i.x,t.windowLevelStartPosition[1]=i.y,e.setCurrentImageNumber(t.currentImageNumber);var o=t.currentImageProperty;o&&(t.windowLevelInitial[0]=o.getColorWindow(),t.windowLevelInitial[1]=o.getColorLevel()),e.startWindowLevel()}},e.superHandleLeftButtonRelease=e.handleLeftButtonRelease,e.handleLeftButtonRelease=function(){switch(t.state){case hX.IS_WINDOW_LEVEL:e.endWindowLevel();break;case hX.IS_SLICE:e.endSlice();break;default:e.superHandleLeftButtonRelease()}},e.handleStartMouseWheel=function(){e.startSlice()},e.handleEndMouseWheel=function(){e.endSlice()},e.handleMouseWheel=function(e){var n=t.getRenderer(e).getActiveCamera(),i=n.getDistance();i+=e.spinY;var o=n.getClippingRange();i<o[0]&&(i=o[0]),i>o[1]&&(i=o[1]),n.setDistance(i),t.getRenderer(e).getViewProps().filter(function(e){return e.isA("vtkImageSlice")}).forEach(function(t){if(t.getMapper().isA("vtkImageResliceMapper")){var n=t.getMapper().getSlicePlane();n&&(n.push(e.spinY),n.modified(),t.getMapper().modified())}})},e.windowLevel=function(e,n){t.windowLevelCurrentPosition[0]=n.x,t.windowLevelCurrentPosition[1]=n.y;var i=t._interactor;if(t.currentImageProperty){var o=i.getView().getViewportSize(e),a=t.windowLevelInitial[0],s=t.windowLevelInitial[1],l=4*(t.windowLevelCurrentPosition[0]-t.windowLevelStartPosition[0])/o[0],u=4*(t.windowLevelStartPosition[1]-t.windowLevelCurrentPosition[1])/o[1];Math.abs(a)>.01?l*=a:l*=a<0?-.01:.01,Math.abs(s)>.01?u*=s:u*=s<0?-.01:.01,a<0&&(l*=-1),s<0&&(u*=-1);var c=l+a,d=s-u;c<.01&&(c=.01),t.currentImageProperty.setColorWindow(c),t.currentImageProperty.setColorLevel(d)}},e.slice=function(e,n){var i=t._interactor,o=n.y-t.lastSlicePosition,a=e.getActiveCamera(),s=a.getClippingRange(),l=a.getDistance(),u=0;u=a.getParallelProjection()?2*a.getParallelScale():2*l*Math.tan(.5*eK(a.getViewAngle())),(l+=o*u/i.getView().getSize()[1])<s[0]&&(l=s[0]+.001*u),l>s[1]&&(l=s[1]-.001*u),a.setDistance(l),t.lastSlicePosition=n.y},e.setCurrentImageNumber=function(n){if(null!==n){var i=t._interactor.getCurrentRenderer();if(i){t.currentImageNumber=n;var o=i.getViewProps().filter(function(e){return e.isA("vtkImageSlice")}),a=n;n<0&&(a+=o.length);var s=o.find(function(e,t){return t===a&&e.getNestedPickable()});s&&e.setCurrentImageProperty(s.getProperty())}}},e.setCurrentImageProperty=function(e){t.currentImageProperty=e}}var vs={newInstance:eE.newInstance(va,"vtkInteractorStyleImage"),extend:va};function vl(e,t,n){return e<t?t:e>n?n:e}var vu={};function vc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vu,n),mt.extend(e,t,n),eE.setGet(e,t,["volumeMapper"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleMPRSlice"),t.trackballManipulator=gF.newInstance({button:1}),t.panManipulator=gK.newInstance({button:1,shift:!0}),t.zoomManipulator=gZ.newInstance({button:3}),t.scrollManipulator=g2.newInstance({scrollEnabled:!0,dragEnabled:!1});var n={sliceNormal:[0,0,0],sliceRange:[0,0]},i=null;function o(){var n=e.getSliceRange();t.scrollManipulator.removeScrollListener(),t.scrollManipulator.setScrollListener(n[0],n[1],1,e.getSlice,e.setSlice)}var a=e.setInteractor;e.setInteractor=function(t){a(t),i&&(i.unsubscribe(),i=null),t&&(i=t.getCurrentRenderer().getActiveCamera().onModified(function(){o(),e.modified()}))},e.handleMouseMove=eE.chain(e.handleMouseMove,function(){var e=t._interactor.getCurrentRenderer().getActiveCamera(),n=e.getDistance();e.setClippingRange(n,n+.1)});var s=e.setVolumeMapper;e.setVolumeMapper=function(n){if(s(n)){var i=t._interactor.getCurrentRenderer().getActiveCamera();n?(i.setFreezeFocalPoint(!0),e.setSliceNormal.apply(e,m(e.getSliceNormal()))):i.setFreezeFocalPoint(!1)}},e.getSlice=function(){var n=t._interactor.getCurrentRenderer().getActiveCamera(),i=e.getSliceNormal(),o=a$.buildFromDegree().identity().rotateFromDirections(i,[1,0,0]),a=n.getFocalPoint();return o.apply(a),a[0]},e.setSlice=function(n){var i=t._interactor.getCurrentRenderer().getActiveCamera();if(t.volumeMapper){var o=e.getSliceRange(),a=vl.apply(void 0,[n].concat(m(o))),s=t.volumeMapper.getCenter(),l=i.getDistance(),u=i.getDirectionOfProjection();th(u);var c=(o[1]+o[0])/2,d=[s[0]-u[0]*c,s[1]-u[1]*c,s[2]-u[2]*c],f=[d[0]+u[0]*a,d[1]+u[1]*a,d[2]+u[2]*a],p=[f[0]-u[0]*l,f[1]-u[1]*l,f[2]-u[2]*l];i.setPosition.apply(i,p),i.setFocalPoint.apply(i,f)}},e.getSliceRange=function(){if(t.volumeMapper){var i=e.getSliceNormal();if(tU(i,n.sliceNormal))return n.sliceRange;var o=a$.buildFromDegree().identity().rotateFromDirections(i,[1,0,0]),a=oa();og(a,o.getMatrix(),t.volumeMapper.getInputData().getIndexToWorld());var s=iG.transformBounds(t.volumeMapper.getInputData().getSpatialExtent(),a),l=s[0],u=s[1];return n.sliceNormal=i,n.sliceRange=[l,u],n.sliceRange}return[0,0]},e.getSliceNormal=function(){return t.volumeMapper?t._interactor.getCurrentRenderer().getActiveCamera().getDirectionOfProjection():[0,0,0]},e.setSliceNormal=function(){for(var n=t._interactor.getCurrentRenderer().getActiveCamera(),i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];if(th(o),t.volumeMapper){var s=t.volumeMapper.getBounds(),l=Math.sqrt(tx([s[0],s[2],s[4]],[s[1],s[3],s[5]])),u=[(s[0]+s[1])/2,(s[2]+s[3])/2,(s[4]+s[5])/2],c=l/(2*Math.tan(.25*Math.PI)),d=[u[0]-o[0]*c,u[1]-o[1]*c,u[2]-o[2]*c],f=n.getDirectionOfProjection(),p=[0,1,0];a$.buildFromDegree().identity().rotateFromDirections(f,o).apply(p),n.setPosition.apply(n,d),n.setDistance(c),n.setDirectionOfProjection.apply(n,o),n.setViewUp.apply(n,p),n.setViewAngle(90),n.setClippingRange(c,c+.1),e.setCenterOfRotation(u)}},e.removeAllMouseManipulators(),e.addMouseManipulator(t.trackballManipulator),e.addMouseManipulator(t.panManipulator),e.addMouseManipulator(t.zoomManipulator),e.addMouseManipulator(t.scrollManipulator),o()}(e,t)}var vd={newInstance:eE.newInstance(vc,"vtkInteractorStyleMPRSlice"),extend:vc};function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var vh={type:"StartInteractionEvent"},vm={type:"InteractionEvent"},vg={type:"EndInteractionEvent"},vv={buttonLeft:0,buttonMiddle:0,buttonRight:0,sendMouseMove:!1,throttleDelay:33.3,lastThrottleTime:0,wheelThrottleDelay:0,wheelLastThrottleTime:0};function vy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vv,n),h1.extend(e,t,n),eE.setGet(e,t,["sendMouseMove","remoteEventAddOn","throttleDelay","wheelThrottleDelay"]),eE.event(e,t,"RemoteMouseEvent"),eE.event(e,t,"RemoteWheelEvent"),eE.event(e,t,"RemoteGestureEvent"),function(e,t){function n(e){var n=t.buttonLeft,i=t.buttonMiddle,o=t.buttonRight,a=+!!e.shiftKey,s=+!!e.controlKey,l=+!!e.altKey,u=+!!e.metaKey,c=n||i||o?"down":"up",d=b(t._interactor.getView().getSizeByReference(),2),f=d[0],p=d[1],h=e.position,m=h.x,g=h.y;return vp({action:c,x:m/=f,y:g/=p,buttonLeft:n,buttonMiddle:i,buttonRight:o,shiftKey:a,altKey:l,ctrlKey:s,metaKey:u},t.remoteEventAddOn)}t.classHierarchy.push("vtkInteractorStyleRemoteMouse"),e.handleLeftButtonPress=function(n){t.previousPosition=n.position,t.buttonLeft=1,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,t.buttonMiddle=1,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,t.buttonRight=1,e.onButtonDown(3,n)},e.handleLeftButtonRelease=function(n){t.buttonLeft=0,e.onButtonUp(1,n)},e.handleMiddleButtonRelease=function(n){t.buttonMiddle=0,e.onButtonUp(2,n)},e.handleRightButtonRelease=function(n){t.buttonRight=0,e.onButtonUp(3,n)},e.onButtonDown=function(i,o){t._interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(vh),e.invokeRemoteMouseEvent(n(o))},e.onButtonUp=function(i,o){e.invokeRemoteMouseEvent(n(o)),e.invokeEndInteractionEvent(vg),t._interactor.cancelAnimation(e.onButtonDown)},e.handleStartMouseWheel=function(i){t._interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(vh),e.invokeRemoteWheelEvent(vp(vp({type:"StartMouseWheel"},n(i)),{},{spinY:i.spinY}))},e.handleMouseWheel=function(i){var o=!0;if(t.wheelThrottleDelay){var a=Date.now();(o=t.wheelThrottleDelay<a-t.wheelLastThrottleTime)&&(t.wheelLastThrottleTime=a)}o&&(e.invokeRemoteWheelEvent(vp(vp({type:"MouseWheel"},n(i)),{},{spinY:i.spinY})),e.invokeInteractionEvent(vm))},e.handleEndMouseWheel=function(){e.invokeRemoteWheelEvent(vp({type:"EndMouseWheel"},t.remoteEventAddOn)),t._interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(vg)},e.handleMouseMove=function(i){var o=Date.now();t.throttleDelay<o-t.lastThrottleTime&&(t.sendMouseMove||t.buttonLeft||t.buttonMiddle||t.buttonRight)&&(t.lastThrottleTime=o,e.invokeRemoteMouseEvent(n(i))),e.invokeInteractionEvent(vm)},e.handleKeyPress=function(){},e.handleStartPinch=function(n){e.startDolly();var i=n.scale;t._interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(vh),e.invokeRemoteGestureEvent(vp({type:"StartPinch",scale:i},t.remoteEventAddOn))},e.handlePinch=function(n){var i=n.scale;e.invokeRemoteGestureEvent(vp({type:"Pinch",scale:i},t.remoteEventAddOn))},e.handleEndPinch=function(){e.endDolly(),e.invokeRemoteGestureEvent(vp({type:"EndPinch"},t.remoteEventAddOn)),t._interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(vg)},e.handleStartRotate=function(n){e.startRotate();var i=n.rotation;t._interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(vh),e.invokeRemoteGestureEvent(vp({type:"StartRotate",rotation:i},t.remoteEventAddOn))},e.handleRotate=function(n){var i=n.rotation;e.invokeRemoteGestureEvent(vp({type:"Rotate",rotation:i},t.remoteEventAddOn))},e.handleEndRotate=function(){e.endRotate(),e.invokeRemoteGestureEvent(vp({type:"EndRotate"},t.remoteEventAddOn)),t._interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(vg)},e.handleStartPan=function(n){e.startPan();var i=n.translation;t._interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(vh),e.invokeRemoteGestureEvent(vp({type:"StartPan",translation:i},t.remoteEventAddOn))},e.handlePan=function(n){var i=n.translation;e.invokeRemoteGestureEvent(vp({type:"Pan",translation:i},t.remoteEventAddOn))},e.handleEndPan=function(){e.endPan(),e.invokeRemoteGestureEvent(vp({type:"EndPan"},t.remoteEventAddOn)),t._interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(vg)}}(e,t)}var vb={newInstance:eE.newInstance(vy,"vtkInteractorStyleRemoteMouse"),extend:vy},vx=n(5072),vw=n.n(vx),vA=n(7825),vC=n.n(vA),vS=n(7659),v_=n.n(vS),vT=n(5056),vO=n.n(vT),vP=n(540),vM=n.n(vP),vE=n(1113),vD=n.n(vE),vI=n(9016),vk={};vk.styleTagTransform=vD(),vk.setAttributes=vO(),vk.insert=v_().bind(null,"head"),vk.domAPI=vC(),vk.insertStyleElement=vM(),vw()(vI.A,vk);var vN=vI.A&&vI.A.locals?vI.A.locals:void 0;function vR(){}var vB={nw:"northWestContainer",n:"northContainer",ne:"northEastContainer",w:"westContainer",e:"eastContainer",sw:"southWestContainer",s:"southContainer",se:"southEastContainer"},vL={templates:null,metadata:null};function vF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vL,n),eE.obj(e,t),eE.get(e,t,["annotationContainer","northWestContainer","northContainer","northEastContainer","westContainer","eastContainer","southWestContainer","southContainer","southEastContainer","metadata"]),function(e,t){function n(){for(var e=Object.keys(t.templates),n=e.length;n--;){var i=t[vB[e[n]]],o=t.templates[e[n]];i&&o&&(i.innerHTML=o(t.metadata))}}t.classHierarchy.push("vtkCornerAnnotation"),t.templates||(t.templates={}),t.metadata||(t.metadata={}),t.annotationContainer=document.createElement("div"),t.annotationContainer.setAttribute("class",vN.container),t.annotationContainer.innerHTML='\n    <div class="'.concat(vN.topRow,'">\n      <div class="js-nw ').concat(vN.northWest,'"></div>\n      <div class="js-n ').concat(vN.north,'"></div>\n      <div class="js-ne ').concat(vN.northEast,'"></div>\n    </div>\n    <div class="').concat(vN.middleRow,'">\n      <div class="js-w ').concat(vN.west,'"></div>\n      <div class="js-e ').concat(vN.east,'"></div>\n    </div>\n    <div class="').concat(vN.bottomRow,'">\n      <div class="js-sw ').concat(vN.southWest,'"></div>\n      <div class="js-s ').concat(vN.south,'"></div>\n      <div class="js-se ').concat(vN.southEast,'"></div>\n    </div>'),t.northWestContainer=t.annotationContainer.querySelector(".js-nw"),t.northContainer=t.annotationContainer.querySelector(".js-n"),t.northEastContainer=t.annotationContainer.querySelector(".js-ne"),t.westContainer=t.annotationContainer.querySelector(".js-w"),t.eastContainer=t.annotationContainer.querySelector(".js-e"),t.southWestContainer=t.annotationContainer.querySelector(".js-sw"),t.southContainer=t.annotationContainer.querySelector(".js-s"),t.southEastContainer=t.annotationContainer.querySelector(".js-se"),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.annotationContainer),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.annotationContainer),e.resize()),e.modified())},e.resize=vR,e.updateTemplates=function(i){t.templates=Object.assign(t.templates,i),n(),e.modified()},e.updateMetadata=function(i){t.metadata=Object.assign(t.metadata,i),n(),e.modified()}}(e,t)}var vV={newInstance:eE.newInstance(vF,"vtkCornerAnnotation"),extend:vF,applyTemplate:function(e,t,n){return e.replace(/\${([^{]+)}/g,function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"${".concat(e,"}");return e.split(".").reduce(function(e,t){return void 0!==e[t]?e[t]:n},t)}(e.substr(2,e.length-3).trim(),t,n)})}},vj=n(4506),vG={};vG.styleTagTransform=vD(),vG.setAttributes=vO(),vG.insert=v_().bind(null,"head"),vG.domAPI=vC(),vG.insertStyleElement=vM(),vw()(vj.A,vG);var vU=vj.A&&vj.A.locals?vj.A.locals:void 0;function vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function vW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var vH=Function.prototype,vq={bufferSize:200,graphHeight:120,buffer:[60],subscriptions:[],fpsSum:0,orientationClass:vU.horizontalContainer,canvasVisibility:!0,titleVisibility:!0,infoVisibility:!0};function vK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vq,n),eE.obj(e,t),eE.get(e,t,["fpsMonitorContainer","renderWindow","addOnStats"]),eE.setGet(e,t,["bufferSize","canvasVisibility","infoVisibility","titleVisibility"]),function(e,t){function n(){if(t.title.style.display=t.titleVisibility?"block":"none",t.titleVisibility){var e=t.buffer[t.buffer.length-1],n="Mean: ".concat(Math.round(t.fpsSum/t.buffer.length)," - Current: ").concat(Math.round(e));n!==t.lastText&&(t.lastText=n,t.title.innerHTML=n)}}function i(){if(t.info.style.display=t.infoVisibility?"grid":"none",t.infoVisibility){var e=[];if(t.renderWindow){var n=t.renderWindow.getViews()[0];n&&n.getSize&&e.push('<label class="'.concat(vU.label,'">Resolution</label><span class="').concat(vU.value,'">').concat(n.getSize().join("x"),"</span>"));var i=vW(vW({},t.renderWindow.getStatistics()),t.addOnStats),o=Object.keys(i);o.sort();for(var a=0;a<o.length;a++)"str"!==o[a]&&i[o[a]]&&e.push('<label class="'.concat(vU.label,'">').concat(o[a],'</label><span class="').concat(vU.value,'">').concat(function(e){for(var t=[],n=e;n>1e3;)t.push("000".concat(n%1e3).slice(-3)),n=Math.floor(n/1e3);return n>0&&t.push(n),t.reverse(),t.join("'")}(i[o[a]]),"</span>"))}t.info.innerHTML=e.join("")}}function o(){if(t.canvas.style.display=t.canvasVisibility?"block":"none",t.canvasVisibility){t.canvas.setAttribute("width",t.bufferSize),t.canvas.setAttribute("height",t.graphHeight);var e=t.canvas.getContext("2d"),n=t.canvas,i=n.width,o=n.height;e.clearRect(0,0,i,o),e.strokeStyle="green",e.beginPath(),e.moveTo(0,o-t.buffer[0]);for(var a=1;a<t.buffer.length;a++)e.lineTo(a,o-t.buffer[a]);e.stroke(),e.strokeStyle="black",e.beginPath(),e.moveTo(0,o-60),e.lineTo(i,o-60),e.stroke()}}function a(){if(t.interactor){var e=1/t.interactor.getLastFrameTime();for(t.buffer.push(e),t.fpsSum+=e;t.buffer.length>t.bufferSize;)t.fpsSum-=t.buffer.shift();n(),i(),o()}}t.classHierarchy.push("vtkFPSMonitor"),t.fpsMonitorContainer=document.createElement("div"),t.fpsMonitorContainer.setAttribute("class",t.orientationClass),t.fpsMonitorContainer.innerHTML='\n    <div class="'.concat(vU.leftPane,'">\n      <div class="js-title ').concat(vU.title,'">Mean N/A - Current N/A</div>\n      <canvas class="js-graph ').concat(vU.graph,'"></canvas>\n    </div>\n    <div class="js-info ').concat(vU.rightPane,'">\n    </div>'),t.canvas=t.fpsMonitorContainer.querySelector(".js-graph"),t.title=t.fpsMonitorContainer.querySelector(".js-title"),t.info=t.fpsMonitorContainer.querySelector(".js-info"),e.update=function(){e.render()},e.setRenderWindow=function(e){for(;t.subscriptions.length;)t.subscriptions.pop().unsubscribe();t.renderWindow=e,t.interactor=e?e.getInteractor():null,t.interactor&&t.subscriptions.push(t.interactor.onAnimation(a))},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.fpsMonitorContainer),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.fpsMonitorContainer),e.resize()),e.modified())},e.render=function(){n(),i(),o()},e.resize=vH,e.setOrientationToHorizontal=function(){t.fpsMonitorContainer.classList.remove(t.orientationClass),t.orientationClass=vU.horizontalContainer,t.fpsMonitorContainer.classList.add(t.orientationClass)},e.setOrientationToVertical=function(){t.fpsMonitorContainer.classList.remove(t.orientationClass),t.orientationClass=vU.verticalContainer,t.fpsMonitorContainer.classList.add(t.orientationClass)},e.setOrientation=function(){"horizontal"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal")?e.setOrientationToHorizontal():e.setOrientationToVertical()},e.setAddOnStats=function(e){t.addOnStats||(t.addOnStats={}),Object.assign(t.addOnStats,e),i()},e.setMonitorVisibility=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.setCanvasVisibility(n),e.setInfoVisibility(i),e.setTitleVisibility(t)};var s=e.delete;e.delete=function(){e.setRenderWindow(null),e.setContainer(null),s()},t.subscriptions.push(e.onModified(e.update))}(e,t)}var vX={newInstance:eE.newInstance(vK,"vtkFPSMonitor"),extend:vK},vY='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Contrast</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="linearGradient-1">\n            <stop stop-color="#FFFFFF" offset="0%"></stop>\n            <stop stop-color="#FFFFFF" offset="49.4160555%"></stop>\n            <stop stop-color="#000000" offset="49.6771365%"></stop>\n            <stop stop-color="#000000" offset="100%"></stop>\n        </linearGradient>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Contrast" stroke-width="10" stroke="#000000" fill="url(#linearGradient-1)">\n            <circle id="Oval" cx="90" cy="90" r="80"></circle>\n        </g>\n    </g>\n</svg>',vZ='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="196px" height="196px" viewBox="0 0 196 196" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>VTK-js favicon-logo</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="VTK-js-favicon">\n            <path d="M67.769437,157.024129 C67.2117935,160.021463 66.4450451,163.123308 65.4691689,166.329759 C64.4932927,169.536209 63.0295004,172.446368 61.077748,175.060322 C59.1259956,177.674276 56.5469329,179.817686 53.3404826,181.490617 C50.1340322,183.163547 46.056325,184 41.1072386,184 C34.7640434,184 29.605918,182.449077 25.6327078,179.347185 C21.6594976,176.245293 19.1152871,172.045603 18,166.747989 L34.1018767,161.520107 C34.3806984,163.402154 35.1125946,165.005355 36.2975871,166.329759 C37.4825797,167.654162 39.0509286,168.316354 41.002681,168.316354 C44.0697204,168.316354 46.2654089,167.235936 47.5898123,165.075067 C48.9142157,162.914198 49.8552251,160.195727 50.4128686,156.919571 L58.9865952,107.986595 L76.5522788,107.986595 L67.769437,157.024129 Z M125.798928,125.970509 C124.404819,124.088462 122.662209,122.659522 120.571046,121.683646 C118.479882,120.70777 116.144785,120.219839 113.565684,120.219839 C112.380691,120.219839 111.126012,120.376674 109.801609,120.690349 C108.477205,121.004023 107.274804,121.526806 106.19437,122.258713 C105.113936,122.99062 104.207778,123.914204 103.475871,125.029491 C102.743964,126.144778 102.378016,127.504013 102.378016,129.107239 C102.378016,131.198402 103.197043,132.853881 104.835121,134.073727 C106.473199,135.293572 108.756018,136.426268 111.683646,137.47185 C114.890096,138.587137 117.747977,139.82439 120.257373,141.183646 C122.766769,142.542902 124.892753,144.093825 126.635389,145.836461 C128.378025,147.579097 129.702408,149.548246 130.608579,151.743968 C131.51475,153.939689 131.967828,156.431621 131.967828,159.219839 C131.967828,163.680987 131.044245,167.479877 129.197051,170.616622 C127.349857,173.753367 124.962481,176.315003 122.034853,178.301609 C119.107224,180.288214 115.831117,181.73458 112.206434,182.640751 C108.581751,183.546921 104.991975,184 101.436997,184 C98.7881905,184 96.1394234,183.756035 93.4906166,183.268097 C90.8418098,182.780158 88.2975993,182.065688 85.8579088,181.124665 C83.4182184,180.183641 81.1528255,178.981241 79.0616622,177.517426 C76.9704989,176.053612 75.1930368,174.380706 73.7292225,172.49866 L86.5898123,162.042895 C88.0536266,164.27347 90.2144629,166.085784 93.0723861,167.479893 C95.9303092,168.874002 98.8230417,169.571046 101.75067,169.571046 C103.28419,169.571046 104.765408,169.414211 106.19437,169.100536 C107.623332,168.786862 108.895437,168.264079 110.010724,167.532172 C111.126011,166.800264 112.014742,165.859255 112.676944,164.709115 C113.339145,163.558975 113.670241,162.182314 113.670241,160.579088 C113.670241,157.999987 112.624675,155.961133 110.533512,154.462466 C108.442349,152.963799 105.654173,151.62199 102.168901,150.436997 C99.7292103,149.600532 97.4463913,148.659523 95.3203753,147.613941 C93.1943593,146.568359 91.3471928,145.278828 89.7788204,143.745308 C88.2104479,142.211789 86.9557688,140.382048 86.0147453,138.256032 C85.0737218,136.130016 84.6032172,133.56838 84.6032172,130.571046 C84.6032172,126.806952 85.3873916,123.408862 86.9557641,120.376676 C88.5241365,117.344489 90.6675467,114.765426 93.386059,112.63941 C96.1045712,110.513394 99.2761213,108.875341 102.900804,107.725201 C106.525487,106.575061 110.394081,106 114.506702,106 C116.667571,106 118.86326,106.209113 121.093834,106.627346 C123.324408,107.045578 125.467818,107.655492 127.524129,108.457105 C129.580439,109.258717 131.479884,110.252005 133.22252,111.436997 C134.965156,112.62199 136.428948,113.981226 137.613941,115.514745 L125.798928,125.970509 Z" id="JS" fill="#8A8B8A"></path>\n            <rect id="Rectangle-134" fill="#1C4678" transform="translate(169.748737, 159.748737) rotate(-315.000000) translate(-169.748737, -159.748737) " x="152.248737" y="142.248737" width="35" height="35" rx="17.5"></rect>\n            <g id="Group" transform="translate(3.000000, 11.000000)">\n                <polygon id="Path-94" fill="#1C4678" points="4.775 2.08166817e-17 25.2581621 86.0686648 47.787502 86.0686648 82.02727 14.6613142 60.8423667 14.6613142 39.9088237 59.0295346 25.2581621 2.08166817e-17"></polygon>\n                <polygon id="Path-95" fill="#1C4678" points="85.6632012 14.34375 136.139081 14.34375 128.046342 30.9059381 110.800052 30.8572018 101.147921 85.4767478 82.6093142 85.476745 92.1809484 30.9415527 77.9916667 30.941553"></polygon>\n                <polygon id="Path-96" fill="#1C4678" points="138.366196 14.34375 154.438082 14.4095874 150.024108 39.3972074 152.411743 39.3972071 169.267998 14.34375 190.243337 14.34375 167.800877 47.7472529 181.003613 101.809731 160.064138 101.809731 149.412421 57.3801274 147.116438 57.3801274 141.991155 85.515305 120.966667 85.5153071 130.730408 30.4719174"></polygon>\n                <polygon id="Path-99" fill="#8A8B8A" points="0 0 3.18219711 0 24.0460481 85.9443963 20.8593586 85.9443963"></polygon>\n                <polygon id="Path-100" fill="#8A8B8A" points="55.1015241 14.34375 57.8898582 14.34375 40.7465157 50.155281 39.7916667 46.2891617"></polygon>\n                <polygon id="Path-101" fill="#8A8B8A" points="85.6083812 33.46875 88.4914675 33.46875 79.3341428 85.5648665 76.4 85.5648665"></polygon>\n                <polygon id="Path-102" fill="#8A8B8A" points="123.785174 33.46875 126.709319 33.46875 117.522718 85.5149889 114.6 85.5149889"></polygon>\n                <polygon id="Path-103" fill="#8A8B8A" points="163.380379 14.34375 166.974353 14.34375 154.391667 33.1982334 155.708346 25.6525344"></polygon>\n                <polygon id="Path-104" fill="#8A8B8A" points="147.901937 63.75 156.818933 101.362589 153.508047 101.36259 146.433333 72.2903275"></polygon>\n            </g>\n        </g>\n    </g>\n</svg>',vJ='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Spacing</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="square">\n        <g id="Spacing" stroke="#000000" stroke-width="10">\n            <path d="M10,90 L170,90" id="Line"></path>\n            <path d="M10,133.488074 L10,47" id="Line"></path>\n            <path d="M170,133.488074 L170,47" id="Line"></path>\n            <path d="M90,133.488074 L90,47" id="Line"></path>\n        </g>\n    </g>\n</svg>',vQ={SliderOrientation:{VERTICAL:0,HORIZONTAL:1}},v$=n(1582),v0={};v0.styleTagTransform=vD(),v0.setAttributes=vO(),v0.insert=v_().bind(null,"head"),v0.domAPI=vC(),v0.insertStyleElement=vM(),vw()(v$.A,v0);var v1=v$.A&&v$.A.locals?v$.A.locals:void 0;function v2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function v3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v2(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v4(e,t){for(var n=Number.MAX_VALUE,i=-1,o=t.length;o--;){var a=Math.abs(t[o]-e);a<n&&(n=a,i=o)}return -1!==i?t[i]:void 0}var v5={orientation:vQ.SliderOrientation.VERTICAL,value:.5,values:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],range:1,containerSizes:[10,100],cursorStyle:{border:"solid 4px #aaa",backgroundColor:"#ccc",transform:"scale(0.7)"}};function v6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v5,n),eE.obj(e,t),eE.get(e,t,["orientation","value","values"]),eE.set(e,t,["orientation"]),eE.event(e,t,"ValueChange"),function(e,t){function n(){if(t.container){var e=t.containerSizes[0],n=(t.containerSizes[1]-t.containerSizes[0])*(t.value-t.values[0])/(t.values[t.values.length-1]-t.values[0]);Number.isNaN(n)||Number.isNaN(e)||(t.el.style.width="".concat(e,"px"),t.el.style.height="".concat(e,"px"),t.orientation===vQ.SliderOrientation.VERTICAL?(t.el.style.left="0",t.el.style.top="".concat(n,"px"),t.el.style.cursor="row-resize"):(t.el.style.top="0",t.el.style.left="".concat(n,"px"),t.el.style.cursor="col-resize"))}}t.classHierarchy.push("vtkSlider"),t.el=document.createElement("div"),t.el.setAttribute("class",v1.cursor);var i=!1,o=0,a=0;function s(e){var t=document.querySelector("body"),n=e?"addEventListener":"removeEventListener";t[n]("mousemove",l),t[n]("mouseleave",u),t[n]("mouseup",c)}function l(n){if(n.preventDefault(),i){var s=v4((a+((t.orientation?n.clientX:n.clientY)-o)/(t.containerSizes[1]-t.containerSizes[0]))*t.range+t.values[0],t.values);void 0!==s&&e.setValue(s)}}function u(e){i=!1}function c(n){if(s(!1),!i&&!((t.orientation?n.clientX:n.clientY)-o)){var a=v4(t.values[0]+t.range*(o-t.container.getBoundingClientRect()[t.orientation?"left":"top"]-.5*t.containerSizes[0])/(t.containerSizes[1]-t.containerSizes[0]),t.values);void 0!==a&&e.setValue(a)}i=!1}function d(e){s(!0),e.preventDefault(),i=e.target===t.el,o=t.orientation?e.clientX:e.clientY,a=(t.value-t.values[0])/t.range}e.setContainer=function(n){t.container&&t.container!==n&&(t.container.removeChild(t.el),s(!1),t.container.removeEventListener("mousedown",d)),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.el),e.resize(),t.container.addEventListener("mousedown",d)),e.modified())},e.resize=function(){if(t.container){var i=t.container.getBoundingClientRect(),o=Math.floor(i.width),a=Math.floor(i.height),s=Math.min(o,a),l=Math.max(o,a);e.setOrientation(a===l?vQ.SliderOrientation.VERTICAL:vQ.SliderOrientation.HORIZONTAL),t.containerSizes=[s,l],n()}},e.setValue=function(i){return t.value!==i&&t.values[0]<=i&&i<=t.values.slice(-1)[0]&&(t.value=i,n(),e.modified(),e.invokeValueChange(i),!0)},e.setValues=function(i){t.values!==i&&(t.values=i,t.range=i[i.length-1]-i[0],n(),e.modified())},e.generateValues=function(i,o,a){var s=(o-i)/(a-1);t.values=[];for(var l=0;l<a;l++)t.values.push(i+l*s);t.range=o-i,n(),e.modified()},e.updateCursorStyle=function(e){t.cursorStyle=v3(v3({},t.cursorStyle),e);for(var n=Object.keys(t.cursorStyle),i=n.length;i--;)t.el.style[n[i]]=t.cursorStyle[n[i]]},e.updateCursorStyle()}(e,t)}var v8=v3({newInstance:eE.newInstance(v6,"vtkSlider"),extend:v6},vQ),v9=JSON.parse('[{"ColorSpace":"Diverging","Name":"Cool to Warm","NanColor":[1,1,0],"RGBPoints":[0,0.23137254902,0.298039215686,0.752941176471,0.5,0.865,0.865,0.865,1,0.705882352941,0.0156862745098,0.149019607843]},{"ColorSpace":"Diverging","Name":"Warm to Cool","NanColor":[1,1,0],"RGBPoints":[0,0.705882352941,0.0156862745098,0.149019607843,0.5,0.865,0.865,0.865,1,0.23137254902,0.298039215686,0.752941176471]},{"ColorSpace":"RGB","Name":"Rainbow Desaturated","NanColor":[1,1,0],"RGBPoints":[0,0.278431372549,0.278431372549,0.858823529412,0.143,0,0,0.360784313725,0.285,0,1,1,0.429,0,0.501960784314,0,0.571,1,1,0,0.714,1,0.380392156863,0,0.857,0.419607843137,0,0,1,0.878431372549,0.301960784314,0.301960784314]},{"ColorSpace":"RGB","Name":"Cold and Hot","NanColor":[1,1,0],"RGBPoints":[0,0,1,1,0.45,0,0,1,0.5,0,0,0.501960784314,0.55,1,0,0,1,1,1,0]},{"ColorSpace":"RGB","Name":"Black-Body Radiation","NanColor":[0,0.498039215686,1],"RGBPoints":[0,0,0,0,0.4,0.901960784314,0,0,0.8,0.901960784314,0.901960784314,0,1,1,1,1]},{"ColorSpace":"RGB","Name":"X Ray","NanColor":[1,0,0],"RGBPoints":[0,1,1,1,1,0,0,0]},{"ColorSpace":"RGB","Name":"Grayscale","NanColor":[1,0,0],"RGBPoints":[0,0,0,0,1,1,1,1]},{"ColorSpace":"RGB","Name":"Black, Blue and White","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,0.333,0,0,0.501960784314,0.666,0,0.501960784314,1,1,1,1,1]},{"ColorSpace":"RGB","Name":"Black, Orange and White","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,0.333,0.501960784314,0,0,0.666,1,0.501960784314,0,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_rainbow_bright","RGBPoints":[-1,0.32549,0.14902,0.960784,-0.866221,0.297047,0.375586,0.963836,-0.732441,0.180302,0.536818,0.964627,-0.598662,0.1302,0.649207,0.929647,-0.464883,0.0445143,0.749654,0.855998,-0.331104,0.0271325,0.830713,0.721527,-0.197324,0.259504,0.866145,0.543555,-0.0635452,0.428364,0.890725,0.329819,0.0702341,0.568503,0.898508,0.187623,0.204013,0.738259,0.890317,0.0825461,0.337793,0.84546,0.86136,0.0147555,0.471572,0.912191,0.808018,0,0.605351,0.962848,0.710445,0,0.73913,0.999469,0.600258,0.0176284,0.87291,0.994156,0.445975,0.193912,1,0.980407,0.247105,0.262699]},{"ColorSpace":"Lab","Name":"erdc_rainbow_dark","RGBPoints":[-1,0,0,0.423499,-0.866221,0,0.119346,0.529237,-0.732441,0,0.238691,0.634976,-0.598662,0,0.346852,0.68788,-0.464883,0,0.45022,0.718141,-0.331104,0,0.553554,0.664839,-0.197324,0,0.651082,0.519303,-0.0635452,0.115841,0.72479,0.352857,0.0702341,0.326771,0.781195,0.140187,0.204013,0.522765,0.798524,0.0284624,0.337793,0.703162,0.788685,0.00885756,0.471572,0.845118,0.751133,0,0.605351,0.955734,0.690825,0,0.73913,0.995402,0.567916,0.0618524,0.87291,0.987712,0.403398,0.164851,1,0.980407,0.247105,0.262699]}]'),v7=Object.create(null);v9.filter(function(e){return e.RGBPoints}).filter(function(e){return"CIELAB"!==e.ColorSpace}).forEach(function(e){v7[e.Name]=e});var ye=Object.keys(v7);ye.sort();function yt(){return dJ()('/*! For license information please see ComputeHistogram.worker.worker.js.LICENSE.txt */\n!function(){"use strict";var e={54:function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(478),l="main";var s=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,c,p=(c=e,(r=l)in(t={})?Object.defineProperty(t,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[r]=c,t),y=self.postMessage.bind(self),v=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 1==r.length&&r[0]instanceof s?y({eventName:e,args:r},r[0].transferable):y({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return p[e]=t,this}}]),t}(f)),h=function(e,t,r){var n,o=function(t){t&&t instanceof s?m(e,1,t.payload,t.transferable):m(e,1,t)},a=function(t){m(e,0,{message:t.message,stack:t.stack})};try{var u=b(e,t,r);"object"===(void 0===(n=u)?"undefined":i(n))&&null!==n&&"function"==typeof n.then&&"function"==typeof n.catch?u.then(o).catch(a):o(u)}catch(e){a(e)}},b=function(e,t,r){var n=p[r||l];if(!n)throw new Error("Not found handler for this request");return n(t,d.bind(null,e))},m=function(e,t,r){y([0,e,t,r],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])},d=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");y([1,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?h.apply(void 0,a(t)):t&&t.eventName&&v.emitLocally.apply(v,[t.eventName].concat(a(t.args)))})),v},e.exports.TransferableResponse=s},478:function(e){var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return t(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){u.value.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=r}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n=r(54),o=r.n(n);o()((function(e,t){var r=e.array,n=e.min,i=e.max,a=e.component||0,u=e.numberOfComponents||1,f=e.numberOfBins,l=i-n,s=new Float32Array(f);s.fill(0);for(var c=r.length,p=a;p<c;p+=u){s[Math.floor((f-1)*(Number(r[p])-n)/l)]+=1}return Promise.resolve(new(o().TransferableResponse)(s,[s.buffer]))}))}();\n',"Worker",void 0,void 0)}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yi={adjustPosition:"-webkit-grab",adjustHeight:"row-resize",adjustBias:"crosshair",adjustWidth:"col-resize",adjustZoom:"col-resize"},yo=[],ya={adjustPosition:function(e,t,n){var i=n.originalXY;return n.gaussian.position=e+(n.originalGaussian.position-i[0]),!0},adjustHeight:function(e,t,n){var i=n.model,o=n.gaussian;return o.height=1-t,o.height=Math.min(1,Math.max(i.gaussianMinimumHeight,o.height)),!0},adjustBias:function(e,t,n){var i=n.originalXY,o=n.gaussian,a=n.originalGaussian;return o.xBias=a.xBias-(i[0]-e)/o.height,o.yBias=a.yBias+4*(i[1]-t)/o.height,o.xBias=Math.max(-1,Math.min(1,o.xBias)),o.yBias=Math.max(0,Math.min(2,o.yBias)),!0},adjustWidth:function(e,t,n){var i=n.originalXY,o=n.gaussian,a=n.originalGaussian;return o.width=n.gaussianSide<0?a.width-(i[0]-e):a.width+(i[0]-e),o.width<.001&&(o.width=.001),!0},adjustZoom:function(e,t,n){var i=n.rangeZoom,o=n.publicAPI,a=i[1]-i[0],s=(e-i[0])/a,l=Math.abs(s-i[0]),u=Math.abs(s-i[1]);if(Math.abs(s-.5*(i[0]+i[1]))<Math.min(l,u)){var c=.5*a;i[0]=Math.min(Math.max(s-c,0),i[1]-.1),i[1]=Math.max(Math.min(s+c,1),i[0]+.1)}else l<u?i[0]=Math.min(Math.max(s,0),i[1]-.1):i[1]=Math.max(Math.min(s,1),i[0]+.1);return o.invokeZoomChange(i),!1}};function ys(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=[];n.length<t;)n.push(0);for(var i=e.length;i--;)for(var o=e[i],a=o.position,s=o.height,l=o.width,u=o.xBias,c=o.yBias,d=0;d<t;d++){var f=d/(t-1);if(f>a+l||f<a-l)n[d]<0&&(n[d]=0);else{var p=l<.001?.001:l,h=((0===u||f===a+u?f:f>a+u?p===u?a:a+p/(p-u)*(f-a-u):-p===u?a:a-p/(p+u)*(f-a-u))-a)/p,m=Math.exp(-4*h*h),g=1-h*h,v=s*(c<1?c*g+(1-c)*m:(2-c)*g+ +(c-1));v>n[d]&&(n[d]=v)}}return n}function yl(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{lineWidth:1,strokeStyle:"#000"},o=t[3],a=t[2]/(n.length-1),s=!!i.fillStyle,l=o+t[1];e.lineWidth=i.lineWidth,e.strokeStyle=i.strokeStyle,e.beginPath(),e.moveTo(t[0],t[1]+t[3]);for(var u=0;u<n.length;u++)e.lineTo(t[0]+u*a,Math.max(t[1],l-n[u]*o));if(s){if(e.fillStyle=i.fillStyle,e.lineTo(t[0]+t[2],t[1]+t[3]),i.clip)return void e.clip();e.fill()}e.stroke()}function yu(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1];return[i[0]+(e-n[0])/n[2]*(i[1]-i[0]),(t-n[1])/n[3]]}function yc(e,t){var n=t.map(function(t){return Math.abs(t.position-e)}),i=Math.min.apply(Math,m(n));return n.indexOf(i)}function yd(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var i=n.offsetX,o=n.offsetY;t&&n.preventDefault(),e(i,o)}}function yf(){yo.filter(function(e){return e.ready}).forEach(function(e){e.callbacks.forEach(function(t){t.touches===e.touches&&t.clicks===e.count&&t.action.apply(t,m(e.singleTouche))}),e.ts=0,e.count=0,e.touches=0,e.ready=!1})}function yp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(o){var a=o.target.getBoundingClientRect(),s=Array.prototype.map.call(o.touches,function(e){return[e.pageX-a.left,e.pageY-a.top]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(e){return e/o.touches.length});"touchstart"===o.type?(clearTimeout(yo[e].timeout),yo[e].ts=o.timeStamp,yo[e].singleTouche=s,yo[e].touches=o.touches.length):"touchmove"===o.type?(yo[e].ts=0,yo[e].count=0,yo[e].ready=!1):"touchend"===o.type&&(o.timeStamp-yo[e].ts<yo[e].deltaT?(yo[e].count+=1,yo[e].ready=!0,i&&o.preventDefault(),yo[e].timeout=setTimeout(yf,yo[e].deltaT)):yo[e].ready=!1),o.touches.length===n&&(t.apply(void 0,m(s)),i&&o.preventDefault())}}function yh(e,t,n){return function(i){return e()?t(i):n(i)}}function ym(e,t){if(!t)return e;var n=e.length-1,i=t.map(function(e){return Math.round(e*n)});return e.slice(i[0],i[1]+1)}var yg={histogram:[],numberOfBins:256,histogramArray:null,dataRange:[0,1],gaussians:[],opacities:[],size:[600,300],piecewiseSize:256,colorCanvasMTime:0,gaussianMinimumHeight:.05,style:{backgroundColor:"rgba(255, 255, 255, 1)",histogramColor:"rgba(200, 200, 200, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(0, 0, 150)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",handleColor:"rgb(0, 150, 0)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:20,padding:10,zoomControlHeight:10,zoomControlColor:"#999"},activeGaussian:-1,selectedGaussian:-1,enableRangeZoom:!0,rangeZoom:[0,1]};function yv(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yg,o),eE.obj(e,t),eE.setGet(e,t,["piecewiseSize","numberOfBins","colorTransferFunction","backgroundImage","enableRangeZoom","gaussianMinimumHeight"]),eE.setGetArray(e,t,["rangeZoom"],2),eE.get(e,t,["size","canvas","gaussians"]),eE.event(e,t,"opacityChange"),eE.event(e,t,"animation"),eE.event(e,t,"zoomChange"),t.classHierarchy.push("vtkPiecewiseGaussianWidget"),t.canvas||(t.canvas=document.createElement("canvas")),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setGaussians=function(n){t.gaussians!==n&&(t.gaussians=n,t.opacities=ys(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified())},e.addGaussian=function(n,i,o,a,s){var l=t.gaussians.length;return t.gaussians.push({position:n,height:i,width:o,xBias:a,yBias:s}),t.opacities=ys(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified(),l},e.removeGaussian=function(n){t.gaussians.splice(n,1),t.opacities=ys(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified()},e.setSize=function(n,i){t.canvas.setAttribute("width",n),t.canvas.setAttribute("height",i),t.size[0]===n&&t.size[1]===i||(t.size=[n,i],t.colorCanvasMTime=0,e.modified())},e.updateStyle=function(n){t.style=yr(yr({},t.style),n),e.modified()},e.setDataArray=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.numberOfBinToConsiders,a=void 0===o?1:o,s=i.numberOfBinsToSkip,l=void 0===s?1:s,u=i.numberOfComponents,c=void 0===u?1:u,d=i.component,f=void 0===d?0:d;t.histogram=null,t.histogramArray=n,t.dataRange=e2(n,f,c);var p=b(t.dataRange,2),h=p[0],m=p[1],g=Math.floor(n.length/4)||1;g+=g%c;for(var v=0,y=[],x=[];v<n.length;){var w=new yt;x.push(w);var A=new(dY())(w),C=v,S=Math.min(v+g,n.length-1),_=new n.constructor(n.slice(C,S+1));y.push(A.postMessage({array:_,component:f,numberOfComponents:c,min:h,max:m,numberOfBins:t.numberOfBins},[_.buffer])),v+=g}Promise.all(y).then(function(n){x.forEach(function(e){return e.terminate()}),t.histogram=new Float32Array(t.numberOfBins),t.histogram.fill(0),n.forEach(function(e){for(var n=0,i=e.length;n<i;++n)t.histogram[n]+=e[n]});var i=Math.min(a,t.histogram.length-l),o=Array.from(t.histogram);o.sort(function(e,t){return Number(e)-Number(t)});for(var s=0;s<l;s++)o.pop();for(;o.length>i;)o.shift();for(var u=o.reduce(function(e,t){return e+t},0)/i,c=0,d=t.histogram.length;c<d;++c)t.histogram[c]/=u;e.modified(),setTimeout(e.render,0)}),e.modified()},e.onClick=function(n,i){var o=b(yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),a=o[0],s=o[1];if(a<0&&t.style.iconSize>1){for(var l=t.style.iconSize+t.style.padding,u=l,c=0;i>u;)c+=1,u+=l;switch(c){case 0:var d=e.addGaussian(0,1,.1,0,0),f=t.gaussians[d],p=yr({},f),h=ya.adjustPosition;t.activeGaussian=d,t.selectedGaussian=d,eE.setImmediate(function(){e.onDown(n,i),t.dragAction={originalXY:[0,0],action:h,gaussian:f,originalGaussian:p}});break;case 1:-1!==t.selectedGaussian&&e.removeGaussian(t.selectedGaussian);break;default:t.selectedGaussian=-1,t.dragAction=null}}else if(a<0||a>1||s<0||s>1)t.selectedGaussian=-1,t.dragAction=null;else{var m=yc(a,t.gaussians);m!==t.selectedGaussian&&(t.selectedGaussian=m,e.modified())}return!0},e.onHover=function(n,i){var o=20/t.canvas.height,a=b(yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),s=a[0],l=a[1],u=b(yu(n,i,t.graphArea),1)[0],c=s<0?t.selectedGaussian:yc(s,t.gaussians);t.canvas.style.cursor="default";var d=t.gaussians[c];if(t.enableRangeZoom&&u>=0&&i<t.graphArea[1]-6){var f=(t.rangeZoom[1]-t.rangeZoom[0])/3;u<t.rangeZoom[0]+f||u>t.rangeZoom[1]-f?t.canvas.style.cursor=yi.adjustZoom:t.canvas.style.cursor=yi.adjustPosition,t.dragAction={rangeZoom:t.rangeZoom,action:ya.adjustZoom}}else if(d&&u>=0){var p=1-l,h=null;h=p>d.height+o?"adjustPosition":p>d.height-o?Math.abs(s-d.position)<o?"adjustHeight":"adjustPosition":p>.5*d.height+o?"adjustPosition":p>.5*d.height-o?Math.abs(s-d.position)<o?"adjustBias":"adjustPosition":p>o?"adjustPosition":"adjustWidth",t.canvas.style.cursor=yi[h];var m=ya[h],g=yr({},d);t.dragAction={originalXY:[s,l],action:m,gaussian:d,originalGaussian:g}}return c!==t.activeGaussian&&(t.activeGaussian=c,e.modified()),!0},e.onDown=function(n,i){t.mouseIsDown||e.invokeAnimation(!0),t.mouseIsDown=!0;var o=yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],a=yc(o,t.gaussians);t.gaussianSide=0;var s=t.gaussians[a];return s&&(t.gaussianSide=s.position-o),a!==t.selectedGaussian&&o>0&&(t.selectedGaussian=a,e.modified()),!0},e.onDrag=function(n,i){if(t.dragAction){var o=b(yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),a=o[0],s=o[1];(0,t.dragAction.action)(a,s,yr({gaussianSide:t.gaussianSide,model:t,publicAPI:e},t.dragAction))&&(t.opacities=ys(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e,!0)),e.modified()}return!0},e.onUp=function(n,i){return t.mouseIsDown&&e.invokeAnimation(!1),t.mouseIsDown=!1,!0},e.onLeave=function(n,i){return e.onUp(n,i),t.canvas.style.cursor="default",t.activeGaussian=-1,e.modified(),!0},e.onAddGaussian=function(n,i){var o=b(yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),a=o[0],s=o[1];return a>=0&&e.addGaussian(a,1-s,.1,0,0),!0},e.onRemoveGaussian=function(n,i){var o=yu(n,i,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],a=yc(o,t.gaussians);return o>=0&&-1!==a&&e.removeGaussian(a),!0},e.bindMouseListeners=function(){if(!t.listeners){var n=function(){return!!t.mouseIsDown},i=function(){for(var e=yo.length,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return yo.push({callbacks:n,timeout:0,deltaT:200,count:0,ready:!1}),e}({clicks:1,touches:1,action:e.onClick},{clicks:2,touches:1,action:e.onAddGaussian},{clicks:2,touches:2,action:e.onRemoveGaussian});t.listeners={mousemove:yh(n,yd(e.onDrag),yd(e.onHover)),dblclick:yd(e.onAddGaussian),contextmenu:yd(e.onRemoveGaussian),click:yd(e.onClick),mouseup:yd(e.onUp),mousedown:yd(e.onDown),mouseout:yd(e.onLeave),touchstart:yp(i,eE.chain(e.onHover,e.onDown)),touchmove:yh(n,yp(i,e.onDrag),yp(i,e.onHover)),touchend:yp(i,e.onUp,0)},Object.keys(t.listeners).forEach(function(e){t.canvas.addEventListener(e,t.listeners[e],!1)})}},e.unbindMouseListeners=function(){t.listeners&&(Object.keys(t.listeners).forEach(function(e){t.canvas.removeEventListener(e,t.listeners[e])}),delete t.listeners)},e.render=function(){var e=t.canvas.getContext("2d");e.imageSmoothingEnabled=!0;var n=b(t.size,2),i=n[0],o=n[1],a=t.style.padding,s=[Math.floor(t.style.iconSize+a),Math.floor(a),Math.ceil(i-2*a-t.style.iconSize),Math.ceil(o-2*a)],l=t.style.zoomControlHeight;if(t.enableRangeZoom&&(s[1]+=Math.floor(l),s[3]-=Math.floor(l)),t.graphArea=s,e.clearRect(0,0,i,o),e.lineJoin="round",e.fillStyle=t.style.backgroundColor,e.fillRect.apply(e,s),t.style.iconSize>1){var u=Math.round(t.style.iconSize/2-t.style.strokeWidth),c=Math.round(u+a+t.style.strokeWidth);e.beginPath(),e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor,e.arc(c-a/2,c,u,0,2*Math.PI,!1),e.fillStyle=t.style.buttonFillColor,e.fill(),e.stroke(),e.moveTo(c-u+t.style.strokeWidth+2-a/2,c),e.lineTo(c+u-t.style.strokeWidth-2-a/2,c),e.stroke(),e.moveTo(c-a/2,c-u+t.style.strokeWidth+2),e.lineTo(c-a/2,c+u-t.style.strokeWidth-2),e.stroke(),-1===t.selectedGaussian?(e.fillStyle=t.style.buttonDisableFillColor,e.lineWidth=t.style.buttonDisableStrokeWidth,e.strokeStyle=t.style.buttonDisableStrokeColor):(e.fillStyle=t.style.buttonFillColor,e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor),e.beginPath(),e.arc(c-a/2,c+a/2+t.style.iconSize,u,0,2*Math.PI,!1),e.fill(),e.stroke(),e.moveTo(c-u+t.style.strokeWidth+2-a/2,c+a/2+t.style.iconSize),e.lineTo(c+u-t.style.strokeWidth-2-a/2,c+a/2+t.style.iconSize),e.stroke()}if(t.histogram&&yl(e,s,ym(t.histogram,t.rangeZoom),{lineWidth:1,strokeStyle:t.style.histogramColor,fillStyle:t.style.histogramColor}),yl(e,s,ym(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.strokeWidth,strokeStyle:t.style.strokeColor}),t.colorTransferFunction&&t.colorTransferFunction.getSize()){var d=t.dataRange||t.colorTransferFunction.getMappingRange();t.colorCanvas&&t.colorCanvasMTime===t.colorTransferFunction.getMTime()||(t.colorCanvasMTime=t.colorTransferFunction.getMTime(),t.colorCanvas=function(e,t,n,i){var o=i||document.createElement("canvas");o.setAttribute("width",t),o.setAttribute("height",256);for(var a=o.getContext("2d"),s=e.getUint8Table(n[0],n[1],t,4),l=a.getImageData(0,0,t,256),u=0;u<256;u++)l.data.set(s,4*u*t);for(var c=256*t*4,d=4*t,f=3;f<c;f+=4)l.data[f]=255-Math.floor(f/d);return a.putImageData(l,0,0),o}(t.colorTransferFunction,s[2],d,t.colorCanvas)),e.save(),yl(e,s,ym(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),t.enableRangeZoom?e.drawImage(t.colorCanvas,t.rangeZoom[0]*s[2],0,s[2],s[3],s[0],s[1],s[2]/(t.rangeZoom[1]-t.rangeZoom[0]),s[3]):e.drawImage(t.colorCanvas,s[0],s[1]),e.restore()}else t.backgroundImage&&(p=t.backgroundImage,h=s[2],(m=t.colorCanvas||document.createElement("canvas")).setAttribute("width",h),m.setAttribute("height",256),m.getContext("2d").drawImage(p,0,0,p.width,p.height,0,0,h,256),t.colorCanvas=m,e.save(),yl(e,s,ym(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,s[0],s[1]),e.restore());t.enableRangeZoom&&(e.fillStyle=t.style.zoomControlColor,e.beginPath(),e.rect(s[0]+t.rangeZoom[0]*s[2],0,(t.rangeZoom[1]-t.rangeZoom[0])*s[2],l),e.fill());var f=t.gaussians[t.activeGaussian]||t.gaussians[t.selectedGaussian];if(f){yl(e,s,ym(ys([f],s[2]),t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.activeStrokeWidth,strokeStyle:t.style.activeColor});var p,h,m,g,v,y=s[0]+(g=f.position,((v=t.enableRangeZoom&&t.rangeZoom)?(g-v[0])/(v[1]-v[0]):g)*s[2]),x=s[1]+(1-f.height)*s[3],w=s[1]+(1-.5*f.height)*s[3],A=s[1]+s[3],C=f.width*s[2];t.enableRangeZoom&&(C/=t.rangeZoom[1]-t.rangeZoom[0]),e.lineWidth=t.style.handleWidth,e.strokeStyle=t.style.handleColor,e.fillStyle=t.style.backgroundColor,e.beginPath(),e.moveTo(y,s[1]+(1-f.height)*s[3]),e.lineTo(y,s[1]+s[3]),e.stroke(),e.beginPath(),e.arc(y,x,6,0,2*Math.PI),e.fill(),e.stroke();var S=Math.min(.1*C,f.height*s[3]*.2);e.beginPath(),e.rect(y-S,w-S,2*S,2*S),e.fill(),e.stroke(),e.beginPath();var _=.8*C;e.rect(y-_,A-5,2*_,10),e.fill(),e.stroke()}},e.getOpacityNodes=function(e){for(var n=e||t.dataRange,i=(n[1]-n[0])/(t.opacities.length-1),o=[],a=0;a<t.opacities.length;a++){var s=n[0]+i*a,l=t.opacities[a];o.push({x:s,y:l,midpoint:.5,sharpness:0})}return o},e.applyOpacity=function(t,n){var i=e.getOpacityNodes(n);t.setNodes(i)},e.getOpacityRange=function(e){for(var n=e||t.dataRange,i=(n[1]-n[0])/(t.opacities.length-1),o=t.opacities.length-1,a=0,s=0;s<t.opacities.length;s++)t.opacities[s]>0&&(o=Math.min(o,s)),t.opacities[s]>0&&(a=Math.max(a,s));return[n[0]+o*i,n[0]+a*i]},n=e.setEnableRangeZoom,e.setEnableRangeZoom=function(e){var i=n(e);return i&&(t.colorCanvasMTime=0,t.rangeZoom=[0,1]),i},i=e.setRangeZoom,e.setRangeZoom=function(){var e=i.apply(void 0,arguments);return e&&(t.colorCanvasMTime=0),e},e.onModified(function(){return e.render()}),e.setSize.apply(e,m(t.size))}var yy=yr({newInstance:eE.newInstance(yv,"vtkPiecewiseGaussianWidget"),extend:yv},{applyGaussianToPiecewiseFunction:function(e,t,n,i){for(var o=ys(e,t),a=[],s=(n[1]-n[0])/(o.length-1),l=0;l<o.length;l++){var u=n[0]+s*l,c=o[l];a.push({x:u,y:c,midpoint:.5,sharpness:0})}i.setNodes(a)},computeOpacities:ys,createListener:yd,drawChart:yl,findGaussian:yc,listenerSelector:yh,normalizeCoordinates:yu}),yb=n(6776),yx={};yx.styleTagTransform=vD(),yx.setAttributes=vO(),yx.insert=v_().bind(null,"head"),yx.domAPI=vC(),yx.insertStyleElement=vM(),vw()(yb.A,yx);var yw=yb.A&&yb.A.locals?yb.A.locals:void 0,yA=ye.map(function(e){return'<option value="'.concat(e,'">').concat(e,"</option>")}),yC={size:[600,300],expanded:!0,rescaleColorMap:!1};function yS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yC,n),eE.obj(e,t),eE.setGet(e,t,["actor","renderWindow","rescaleColorMap"]),eE.get(e,t,["widget"]),function(e,t){function n(){var e=!!Number(t.el.querySelector(".js-shadow").value);t.actor.getProperty().setShade(e),t.renderWindow.render()}function i(){var e=t.actor.getMapper().getInputData();if(e){var n=e.getPointData().getScalars()||e.getPointData().getArrays()[0],i=t.rescaleColorMap?t.colorDataRange:n.getRange(),o=v7[t.el.querySelector(".js-color-preset").value],a=t.actor.getProperty().getRGBTransferFunction(0);a.applyColorMap(o),a.setMappingRange.apply(a,m(i)),a.updateRange(),t.renderWindow.render()}}function o(){var e=Number(t.el.querySelector(".js-spacing").value),n=.7*Math.sqrt(t.actor.getMapper().getInputData().getSpacing().map(function(e){return e*e}).reduce(function(e,t){return e+t},0));t.actor.getMapper().setSampleDistance(n*Math.pow(2,3*e-1.5)),t.renderWindow.render()}function a(){var e=Number(t.el.querySelector(".js-edge").value);if(0===e)t.actor.getProperty().setUseGradientOpacity(0,!1);else{var n=t.actor.getMapper().getInputData(),i=(n.getPointData().getScalars()||n.getPointData().getArrays()[0]).getRange();t.actor.getProperty().setUseGradientOpacity(0,!0);var o=Math.max(0,e-.3)/.7;t.actor.getProperty().setGradientOpacityMinimumValue(0,.2*(i[1]-i[0])*o*o),t.actor.getProperty().setGradientOpacityMaximumValue(0,(i[1]-i[0])*e*e)}t.renderWindow.render()}t.classHierarchy.push("vtkVolumeController"),t.el=document.createElement("div"),t.el.setAttribute("class",yw.container),t.widget=yy.newInstance({numberOfBins:256,size:t.size}),e.setupContent=function(s,l,u){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"erdc_rainbow_bright";e.setActor(l),e.setRenderWindow(s);var f=t.actor.getMapper().getInputData(),p=f.getPointData().getScalars()||f.getPointData().getArrays()[0],h=t.actor.getProperty().getRGBTransferFunction(0),m=t.actor.getProperty().getScalarOpacity(0),g=u?"DarkBG":"BrightBG",v={};["button","presets","shadow"].forEach(function(e){v[e]=yw["".concat(e).concat(g)]}),t.el.innerHTML='\n      <div class="'.concat(yw.line,'">\n        <div class="').concat(v.button,' js-button">').concat(vZ,'</div>\n        <select class="').concat(v.shadow,' js-shadow js-toggle">\n          <option value="1">Use Shadow</option>\n          <option value="0">No Shadow</option>\n        </select>\n        <select class="').concat(v.presets,' js-color-preset js-toggle">\n          ').concat(yA,'\n        </select>\n      </div>\n      <div class="').concat(yw.line,' js-toggle">\n        <div class="').concat(yw.sliderEntry,'">\n          <div class="').concat(yw.sliderIcon,'">').concat(vJ,'</div>\n          <input type="range" min="0" max="1" value="0.4" step="0.01" class="').concat(yw.slider,' js-spacing" />\n        </div>\n        <div class="').concat(yw.sliderEntry,'">\n          <div class="').concat(yw.sliderIcon,'">').concat(vY,'</div>\n          <input type="range" min="0" max="1" value="0.2" step="0.01" class="').concat(yw.slider,' js-edge" />\n        </div>\n      </div>\n      <div class="').concat(yw.piecewiseEditor,' js-pwf js-toggle"></div>\n    ');var y=t.el.querySelector(".js-button"),b=t.el.querySelector(".js-shadow"),x=t.el.querySelector(".js-color-preset"),w=t.el.querySelector(".js-spacing"),A=t.el.querySelector(".js-edge"),C=t.el.querySelector(".js-pwf");t.widget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),t.widget.addGaussian(.5,1,.5,.5,.4),t.widget.setDataArray(p.getData()),t.widget.setColorTransferFunction(h),t.widget.applyOpacity(m),t.widget.setContainer(C),t.widget.bindMouseListeners(),t.colorDataRange=t.widget.getOpacityRange(),y.addEventListener("click",e.toggleVisibility),b.addEventListener("change",n),x.addEventListener("change",i),w.addEventListener("input",o),A.addEventListener("input",a),t.widget.onOpacityChange(function(){t.widget.applyOpacity(m),t.colorDataRange=t.widget.getOpacityRange(),t.rescaleColorMap&&i(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()}),t.widget.onAnimation(function(e){e?t.renderWindow.getInteractor().requestAnimation(t.widget):(t.renderWindow.getInteractor().cancelAnimation(t.widget),t.renderWindow.render())}),h.onModified(function(){t.widget.render(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()}),b.value=Number(c)?"1":"0",x.value=d,n(),i(),o(),a()},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.el),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.el),e.modified())};var s=e.setRescaleColorMap;e.setRescaleColorMap=function(e){return!!s(e)&&(i(),!0)},e.toggleVisibility=function(){e.setExpanded(!e.getExpanded())},e.setExpanded=function(e){var n=t.el.querySelectorAll(".js-toggle"),i=n.length;if(t.expanded=e,t.expanded)for(;i--;)n[i].style.display="flex";else for(;i--;)n[i].style.display="none"},e.getExpanded=function(){return t.expanded},e.setSize=t.widget.setSize,e.render=t.widget.render,e.onAnimation=t.widget.onAnimation,e.onModified(e.render),e.setSize.apply(e,m(t.size))}(e,t)}var y_=eE.newInstance(yS,"vtkVolumeController"),yT=eE.vtkDebugMacro,yO={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:oa(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function yP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yO,n),eE.obj(e,t),eE.get(e,t,["distance"]),eE.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),eE.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),eE.setGetArray(e,t,["clippingRange","windowCenter"],2),eE.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),function(e,t){t.classHierarchy.push("vtkCamera");var n=new Float64Array(3),i=new Float64Array([0,0,-1]),o=new Float64Array([0,1,0]),a=od(new Float64Array(16)),s=od(new Float64Array(16)),l=new Float64Array(3),u=new Float64Array(3),c=new Float64Array(3),d=od(new Float64Array(16)),f=od(new Float64Array(16)),p=new Float64Array(3),h=new Float64Array(3);function g(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,i,o){n===t.position[0]&&i===t.position[1]&&o===t.position[2]||(t.position[0]=n,t.position[1]=i,t.position[2]=o,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,i,o){n===t.focalPoint[0]&&i===t.focalPoint[1]&&o===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=i,t.focalPoint[2]=o,e.computeDistance(),e.modified())},e.setDistance=function(n){if(t.distance!==n){t.distance=n,t.distance<1e-20&&(t.distance=1e-20,yT("Distance is set to minimum."));var i=t.directionOfProjection;t.focalPoint[0]=t.position[0]+i[0]*t.distance,t.focalPoint[1]=t.position[1]+i[1]*t.distance,t.focalPoint[2]=t.position[2]+i[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],i=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+i*i),t.distance<1e-20){t.distance=1e-20,yT("Distance is set to minimum.");var o=t.directionOfProjection;t.focalPoint[0]=t.position[0]+o[0]*t.distance,t.focalPoint[1]=t.position[1]+o[1]*t.distance,t.focalPoint[2]=t.position[2]+o[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=i/t.distance,g()},e.dolly=function(n){if(!(n<=0)){var i=t.distance/n;e.setPosition(t.focalPoint[0]-i*t.directionOfProjection[0],t.focalPoint[1]-i*t.directionOfProjection[1],t.focalPoint[2]-i*t.directionOfProjection[2])}},e.roll=function(n){var i=t.position,o=t.focalPoint,a=t.viewUp,s=new Float64Array([a[0],a[1],a[2],0]);od(d);var l=new Float64Array([o[0]-i[0],o[1]-i[1],o[2]-i[2]]);ob(d,d,eK(n),l),sk(s,s,d),t.viewUp[0]=s[0],t.viewUp[1]=s[1],t.viewUp[2]=s[2],e.modified()},e.azimuth=function(n){var i=t.focalPoint;od(f),ov(f,f,i),ob(f,f,eK(n),t.viewUp),ov(f,f,[-i[0],-i[1],-i[2]]),rO(p,t.position,f),e.setPosition(p[0],p[1],p[2])},e.yaw=function(n){var i=t.position;od(f),ov(f,f,i),ob(f,f,eK(n),t.viewUp),ov(f,f,[-i[0],-i[1],-i[2]]),rO(h,t.focalPoint,f),e.setFocalPoint(h[0],h[1],h[2])},e.elevation=function(n){var i=t.focalPoint,o=e.getViewMatrix(),a=[-o[0],-o[1],-o[2]];od(f),ov(f,f,i),ob(f,f,eK(n),a),ov(f,f,[-i[0],-i[1],-i[2]]),rO(p,t.position,f),e.setPosition(p[0],p[1],p[2])},e.pitch=function(n){var i=t.position,o=e.getViewMatrix(),a=[o[0],o[1],o[2]];od(f),ov(f,f,i),ob(f,f,eK(n),a),ov(f,f,[-i[0],-i[1],-i[2]]),rO(h,t.focalPoint,f),e.setFocalPoint.apply(e,m(h))},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.translate=function(n,i,o){var a=[n,i,o];ti(t.position,a,t.position),ti(t.focalPoint,a,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=function(n){var i=[].concat(m(t.viewUp),[1]),o=[],a=[],s=[];i[0]+=t.position[0],i[1]+=t.position[1],i[2]+=t.position[2],sk(o,[].concat(m(t.position),[1]),n),sk(a,[].concat(m(t.focalPoint),[1]),n),sk(s,i,n),s[0]-=o[0],s[1]-=o[1],s[2]-=o[2],e.setPosition.apply(e,m(o.slice(0,3))),e.setFocalPoint.apply(e,m(a.slice(0,3))),e.setViewUp.apply(e,m(s.slice(0,3)))},e.getThickness=function(){return t.clippingRange[1]-t.clippingRange[0]},e.setThickness=function(n){var i=n;i<1e-20&&(i=1e-20,yT("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+i)},e.setThicknessFromFocalPoint=function(n){var i=n;i<1e-20&&(i=1e-20,yT("Thickness is set to minimum.")),e.setClippingRange(t.distance-i/2,t.distance+i/2)},e.setRoll=function(e){},e.getRoll=function(){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float64Array(24),i=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],o=e.getCompositeProjectionMatrix(t,-1,1),a=0;a<6;a++)sk(i[a],i[a],o),tm(i[a]),n[4*a+0]=i[a][0],n[4*a+1]=i[a][1],n[4*a+2]=i[a][2],n[4*a+3]=i[a][3];return n},e.getCameraLightTransformMatrix=function(e){return ol(e,t.cameraLightTransform),e},e.computeCameraLightTransform=function(){ol(a,e.getViewMatrix()),op(a,a),oS(s,[t.distance,t.distance,t.distance]),og(a,a,s),od(t.cameraLightTransform),ov(t.cameraLightTransform,a,[0,0,-1])},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t=sj(e[0],e[1],e[2],e[3]),n=sN(),i=sj(0,0,1,0);return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],sL(i,t,i),sL(i,i,n),[i[0],i[1],i[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),op(t,t)},e.getWorldToPhysicalMatrix=function(e){od(e);var n=[3];tf(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],of(e,e),rr(l,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),oy(e,e,l),ov(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(s){op(a,s),rO(l,n,a),e.computeDistance();var d=t.distance;e.setPosition(l[0],l[1],l[2]),rO(u,i,a),ro(u,u,l),rx(u,u),e.setDirectionOfProjection(u[0],u[1],u[2]),rO(c,o,a),ro(c,c,l),rx(c,c),e.setViewUp(c[0],c[1],c[2]),e.setDistance(d)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(a),og(a,t,a),e.computeViewParametersFromViewMatrix(a)},e.setModelTransformMatrix=function(e){t.modelTransformMatrix=e},e.getModelTransformMatrix=function(){return t.modelTransformMatrix},e.setViewMatrix=function(n){t.viewMatrix=n,t.viewMatrix&&(ol(a,t.viewMatrix),e.computeViewParametersFromViewMatrix(a),of(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.modelTransformMatrix?(og(a,t.viewMatrix,t.modelTransformMatrix),a):t.viewMatrix;oH(a,t.position,t.focalPoint,t.viewUp),of(a,a);var e=new Float64Array(16);return t.modelTransformMatrix?og(e,a,t.modelTransformMatrix):ol(e,a),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,n,i){var o=new Float64Array(16);if(od(o),t.projectionMatrix){var s=1/t.physicalScale;return rr(l,s,s,s),ol(o,t.projectionMatrix),oy(o,o,l),of(o,o),o}od(a);var u=t.clippingRange[1]-t.clippingRange[0],c=[t.clippingRange[0]+(n+1)*u/2,t.clippingRange[0]+(i+1)*u/2];if(t.parallelProjection){var d=t.parallelScale*e,f=t.parallelScale;oz(a,(t.windowCenter[0]-1)*d,(t.windowCenter[0]+1)*d,(t.windowCenter[1]-1)*f,(t.windowCenter[1]+1)*f,c[0],c[1]),of(a,a)}else{if(t.useOffAxisProjection)throw Error("Off-Axis projection is not supported at this time");var p,h,m=Math.tan(eK(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(p=t.clippingRange[0]*m,h=t.clippingRange[0]*m/e):(p=t.clippingRange[0]*m*e,h=t.clippingRange[0]*m);var g=(t.windowCenter[0]-1)*p,v=(t.windowCenter[0]+1)*p,y=(t.windowCenter[1]-1)*h,b=(t.windowCenter[1]+1)*h,x=c[0],w=c[1];a[0]=2*x/(v-g),a[5]=2*x/(b-y),a[2]=(g+v)/(v-g),a[6]=(y+b)/(b-y),a[10]=-(x+w)/(w-x),a[14]=-1,a[11]=-2*x*w/(w-x),a[15]=0}return ol(o,a),o},e.getCompositeProjectionMatrix=function(t,n,i){var o=e.getViewMatrix(),a=e.getProjectionMatrix(t,n,i);return og(a,o,a),a},e.setDirectionOfProjection=function(e,n,i){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==n||t.directionOfProjection[2]!==i){t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=i;var o=t.directionOfProjection;t.focalPoint[0]=t.position[0]+o[0]*t.distance,t.focalPoint[1]=t.position[1]+o[1]*t.distance,t.focalPoint[2]=t.position[2]+o[2]*t.distance,g()}},e.setDeviceAngles=function(n,i,o,a){var s=[3];tf(t.physicalViewNorth,t.physicalViewUp,s);var l=od(new Float64Array(16));ob(l,l,eK(n),t.physicalViewUp),ob(l,l,eK(i),s),ob(l,l,eK(o),t.physicalViewNorth),ob(l,l,eK(-a),t.physicalViewUp);var u=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),c=new Float64Array(t.physicalViewNorth);rO(u,u,l),rO(c,c,l),e.setDirectionOfProjection(u[0],u[1],u[2]),e.setViewUp(c[0],c[1],c[2]),e.modified()},e.setOrientationWXYZ=function(t,n,i,o){var a=od(new Float64Array(16));if(0!==t&&(0!==n||0!==i||0!==o)){var s=eK(t),l=sN();sR(l,[n,i,o],s),oB(a,l)}var u=new Float64Array(3);rO(u,[0,0,-1],a);var c=new Float64Array(3);rO(c,[0,1,0],a),e.setDirectionOfProjection.apply(e,m(u)),e.setViewUp.apply(e,m(c)),e.modified()},e.computeClippingRange=function(e){var n,i;n=t.viewPlaneNormal,i=t.position;for(var o=-n[0],a=-n[1],s=-n[2],l=-(o*i[0]+a*i[1]+s*i[2]),u=[o*e[0]+a*e[2]+s*e[4]+l,1e-18],c=0;c<2;c++)for(var d=0;d<2;d++)for(var f=0;f<2;f++){var p=o*e[f]+a*e[2+d]+s*e[4+c]+l;u[0]=p<u[0]?p:u[0],u[1]=p>u[1]?p:u[1]}return u}}(e,t)}var yM={newInstance:eE.newInstance(yP,"vtkCamera"),extend:yP},yE={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function yD(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yE,i),eE.obj(e,t),eE.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),eE.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),t.classHierarchy.push("vtkLight"),n=new Float64Array(3),e.getTransformedPosition=function(){return t.transformMatrix?rO(n,t.position,t.transformMatrix):rr(n,t.position[0],t.position[1],t.position[2]),n},e.getTransformedFocalPoint=function(){return t.transformMatrix?rO(n,t.focalPoint,t.transformMatrix):rr(n,t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),n},e.getDirection=function(){return t.directionMTime<t.mtime&&(rV(t.direction,t.focalPoint,t.position),th(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirection=function(e){var n=new Float64Array(3);rV(n,t.position,e),t.focalPoint=n},e.setDirectionAngle=function(t,n){var i=eK(t),o=eK(n);e.setPosition(Math.cos(i)*Math.sin(o),Math.sin(i),Math.cos(i)*Math.cos(o)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}var yI={newInstance:eE.newInstance(yD,"vtkLight"),extend:yD,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},yk=eE.vtkErrorMacro,yN={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function yR(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yN,o),eE.obj(e,t),eE.event(e,t,"event"),eE.setGetArray(e,t,["viewport"],4),eE.setGetArray(e,t,["background","background2"],3),n=e,(i=t).classHierarchy.push("vtkViewport"),n.getViewProps=function(){return i.props},n.hasViewProp=function(e){return i.props.includes(e)},n.addViewProp=function(e){e&&!n.hasViewProp(e)&&i.props.push(e)},n.removeViewProp=function(e){var t=i.props.filter(function(t){return t!==e});i.props.length!==t.length&&(i.props=t)},n.removeAllViewProps=function(){i.props=[]},n.getViewPropsWithNestedProps=function(){var e=[];i.actors2D=[];for(var t=0;t<i.props.length;t++){var n=i.props[t].getActors2D();n&&(!Array.isArray(n)||n.length>0)?i.actors2D=i.actors2D.concat(n):function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.push(t);var i=t.getNestedProps();if(i&&i.length)for(var o=0;o<i.length;o++)e(i[o],n);return n}(i.props[t],e)}return i.actors2D.sort(function(e,t){return e.getLayerNumber()-t.getLayerNumber()}),e=e.concat(i.actors2D)},n.addActor2D=n.addViewProp,n.removeActor2D=function(e){n.removeViewProp(e)},n.getActors2D=function(){return i.actors2D=[],i.props.forEach(function(e){i.actors2D=i.actors2D.concat(e.getActors2D())}),i.actors2D},n.displayToView=function(){return yk("call displayToView on your view instead")},n.viewToDisplay=function(){return yk("callviewtodisplay on your view instead")},n.getSize=function(){return yk("call getSize on your View instead")},n.normalizedDisplayToProjection=function(e,t,i){var o=n.normalizedDisplayToNormalizedViewport(e,t,i);return n.normalizedViewportToProjection(o[0],o[1],o[2])},n.normalizedDisplayToNormalizedViewport=function(e,t,n){var o=[i.viewport[2]-i.viewport[0],i.viewport[3]-i.viewport[1]];return[(e-i.viewport[0])/o[0],(t-i.viewport[1])/o[1],n]},n.normalizedViewportToProjection=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},n.projectionToNormalizedDisplay=function(e,t,i){var o=n.projectionToNormalizedViewport(e,t,i);return n.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},n.normalizedViewportToNormalizedDisplay=function(e,t,n){var o=[i.viewport[2]-i.viewport[0],i.viewport[3]-i.viewport[1]];return[e*o[0]+i.viewport[0],t*o[1]+i.viewport[1],n]},n.projectionToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},n.PickPropFrom=function(){return yk("vtkViewport::".concat("PickPropFrom"," - NOT IMPLEMENTED"))}}var yB={newInstance:eE.newInstance(yR,"vtkViewport"),extend:yR};function yL(e){return function(){return Z("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}var yF={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:nP(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function yV(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(Object.assign(t,yF,a),yB.extend(e,t,a),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1),eu(e,t,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),ep(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),eh(e,t,["actors","volumes","lights"]),eg(e,t,["background"],4,1),ev(0,t,["renderWindow"]),t.classHierarchy.push("vtkRenderer"),n={type:"ComputeVisiblePropBoundsEvent",renderer:e},i={type:"ResetCameraClippingRangeEvent",renderer:e},o={type:"ResetCameraEvent",renderer:e},e.updateCamera=function(){return t.activeCamera||(Y("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated();t.lights.forEach(function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):e.lightTypeIsCameraLight()?e.setTransformMatrix(n.getCameraLightTransformMatrix(oa())):Z("light has unknown light type",e.get()))})},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=yL("allocateTime"),e.updateGeometry=yL("updateGeometry"),e.getVTKWindow=function(){return t._renderWindow},e.setLayer=function(n){Y(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=yM.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.getActors=function(){return t.actors=[],t.props.forEach(function(e){t.actors=t.actors.concat(e.getActors())}),t.actors},e.addActor=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter(function(e){return e!==n}),e.removeViewProp(n),e.modified()},e.removeAllActors=function(){e.getActors().forEach(function(t){e.removeViewProp(t)}),t.actors=[],e.modified()},e.getVolumes=function(){return t.volumes=[],t.props.forEach(function(e){t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes},e.addVolume=e.addViewProp,e.removeVolume=function(n){t.volumes=t.volumes.filter(function(e){return e!==n}),e.removeViewProp(n),e.modified()},e.removeAllVolumes=function(){e.getVolumes().forEach(function(t){e.removeViewProp(t)}),t.volumes=[],e.modified()},e.hasLight=function(e){return t.lights.includes(e)},e.addLight=function(n){n&&!e.hasLight(n)&&(t.lights.push(n),e.modified())},e.removeLight=function(n){t.lights=t.lights.filter(function(e){return e!==n}),e.modified()},e.removeAllLights=function(){t.lights=[],e.modified()},e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=yI.newInstance,e.createLight=function(){t.automaticLightCreation&&(t._createdLight&&(e.removeLight(t._createdLight),t._createdLight.delete(),t._createdLight=null),t._createdLight=e.makeLight(),e.addLight(t._createdLight),t._createdLight.setLightTypeToHeadLight(),t._createdLight.setPosition(e.getActiveCamera().getPosition()),t._createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,i,o){var a=e.normalizedDisplayToProjection(t,n,i);return a=e.projectionToView(a[0],a[1],a[2],o),e.viewToWorld(a[0],a[1],a[2])},e.worldToNormalizedDisplay=function(t,n,i,o){var a=e.worldToView(t,n,i);return a=e.viewToProjection(a[0],a[1],a[2],o),e.projectionToNormalizedDisplay(a[0],a[1],a[2])},e.viewToWorld=function(e,n,i){if(null===t.activeCamera)return Z("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getViewMatrix();op(o,o),of(o,o);var a=new Float64Array([e,n,i]);return rO(a,a,o),a},e.projectionToView=function(e,n,i,o){if(null===t.activeCamera)return Z("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getProjectionMatrix(o,-1,1);op(a,a),of(a,a);var s=new Float64Array([e,n,i]);return rO(s,s,a),s},e.worldToView=function(e,n,i){if(null===t.activeCamera)return Z("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getViewMatrix();of(o,o);var a=new Float64Array([e,n,i]);return rO(a,a,o),a},e.viewToProjection=function(e,n,i,o){if(null===t.activeCamera)return Z("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getProjectionMatrix(o,-1,1);of(a,a);var s=new Float64Array([e,n,i]);return rO(s,s,a),s},e.computeVisiblePropBounds=function(){t.allBounds[0]=iG.INIT_BOUNDS[0],t.allBounds[1]=iG.INIT_BOUNDS[1],t.allBounds[2]=iG.INIT_BOUNDS[2],t.allBounds[3]=iG.INIT_BOUNDS[3],t.allBounds[4]=iG.INIT_BOUNDS[4],t.allBounds[5]=iG.INIT_BOUNDS[5];var i=!0;e.invokeEvent(n);for(var o=0;o<t.props.length;++o){var a=t.props[o];if(a.getVisibility()&&a.getUseBounds()){var s=a.getBounds();s&&nd(s)&&(i=!1,s[0]<t.allBounds[0]&&(t.allBounds[0]=s[0]),s[1]>t.allBounds[1]&&(t.allBounds[1]=s[1]),s[2]<t.allBounds[2]&&(t.allBounds[2]=s[2]),s[3]>t.allBounds[3]&&(t.allBounds[3]=s[3]),s[4]<t.allBounds[4]&&(t.allBounds[4]=s[4]),s[5]>t.allBounds[5]&&(t.allBounds[5]=s[5]))}}return i&&(nc(t.allBounds),Y("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds(),i=[0,0,0];if(!nd(n))return Y("Cannot reset camera!"),!1;var a=null;if(!e.getActiveCamera())return Z("Trying to reset non-existent camera"),!1;a=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),i[0]=(n[0]+n[1])/2,i[1]=(n[2]+n[3])/2,i[2]=(n[4]+n[5])/2;var s=n[1]-n[0],l=n[3]-n[2],u=n[5]-n[4],c=(s*=s)+(l*=l)+(u*=u);c=.5*Math.sqrt(c=0===c?1:c);var d=eK(t.activeCamera.getViewAngle()),f=c,p=c/Math.sin(.5*d),h=t.activeCamera.getViewUp();return Math.abs(tc(h,a))>.999&&(J("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-h[2],h[0],h[1])),t.activeCamera.setFocalPoint(i[0],i[1],i[2]),t.activeCamera.setPosition(i[0]+p*a[0],i[1]+p*a[1],i[2]+p*a[2]),e.resetCameraClippingRange(n),t.activeCamera.setParallelScale(f),t.activeCamera.setPhysicalScale(c),t.activeCamera.setPhysicalTranslation(-i[0],-i[1],-i[2]),e.invokeEvent(o),!0},e.resetCameraClippingRange=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds();if(!nd(n))return Y("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return Z("Trying to reset clipping range of non-existent camera"),!1;var o=t.activeCamera.computeClippingRange(n),a=0;return a=t.activeCamera.getParallelProjection()?.2*t.activeCamera.getParallelScale():.2*Math.tan(eK(t.activeCamera.getViewAngle())/2)*o[1],o[1]-o[0]<a&&(a=a-o[1]+o[0],o[1]+=a/2,o[0]-=a/2),o[0]<0&&(o[0]=0),o[0]=.99*o[0]-(o[1]-o[0])*t.clippingRangeExpansion,o[1]=1.01*o[1]+(o[1]-o[0])*t.clippingRangeExpansion,o[0]=o[0]>=o[1]?.01*o[1]:o[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),o[0]<t.nearClippingPlaneTolerance*o[1]&&(o[0]=t.nearClippingPlaneTolerance*o[1]),t.activeCamera.setClippingRange(o[0],o[1]),e.invokeEvent(i),!1},e.setRenderWindow=function(e){e!==t._renderWindow&&(t._vtkWindow=e,t._renderWindow=e)},e.visibleActorCount=function(){return t.props.filter(function(e){return e.getVisibility()}).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);var i=t._createdLight?t._createdLight.getMTime():0;return i>e&&(e=i),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}var yj={newInstance:ew(yV,"vtkRenderer"),extend:yV},yG={Corners:{TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}};function yU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function yz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yU(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yW=eE.vtkErrorMacro,yH=yG.Corners,yq={viewportCorner:yG.Corners.BOTTOM_LEFT,viewportSize:.2,minPixelSize:50,maxPixelSize:200,parentRenderer:null,interactiveRenderer:!1};function yK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yq,n),eE.obj(e,t),eE.get(e,t,["enabled","viewportCorner","viewportSize","interactiveRenderer"]),eE.setGet(e,t,["_interactor","minPixelSize","maxPixelSize","parentRenderer"]),eE.get(e,t,["actor"]),eE.moveToProtected(e,t,["interactor"]),function(e,t){t.classHierarchy.push("vtkOrientationMarkerWidget");var n=yz({},e),i=[],o=yj.newInstance(),a=new ResizeObserver(function(t){e.updateViewport()}),s=null,l=null,u=null,c=null,d=null;function f(){t._interactor.isAnimating()||e.updateMarkerOrientation()}t._onParentRendererChanged=function(){return e.updateViewport()},e.computeViewport=function(){var e=t.parentRenderer||t._interactor.getCurrentRenderer(),n=b(e.getViewport(),4),i=n[0],o=n[1],a=n[2],s=n[3],l=t._interactor.getView(),u=l.getSize(),c=b(l.getViewportSize(e),2),d=Math.min(c[0],c[1]),f=t.viewportSize*d,p=(f=Math.max(Math.min(t.minPixelSize,d),Math.min(t.maxPixelSize,f)))/u[0],h=f/u[1];switch(t.viewportCorner){case yH.TOP_LEFT:return[i,s-h,i+p,s];case yH.TOP_RIGHT:return[a-p,s-h,a,s];case yH.BOTTOM_LEFT:return[i,o,i+p,o+h];case yH.BOTTOM_RIGHT:return[a-p,o,a,o+h];default:return yW("Invalid widget corner"),null}},e.updateViewport=function(){t.enabled&&(o.setViewport.apply(o,m(e.computeViewport())),t._interactor.render())},e.updateMarkerOrientation=function(){var e=(t.parentRenderer||t._interactor.getCurrentRenderer()).getActiveCamera();if(e){var n=e.getReferenceByName("position"),a=e.getReferenceByName("focalPoint"),s=e.getReferenceByName("viewUp");if(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==a[0]||i[4]!==a[1]||i[5]!==a[2]||i[6]!==s[0]||i[7]!==s[1]||i[8]!==s[2]){i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=a[0],i[4]=a[1],i[5]=a[2],i[6]=s[0],i[7]=s[1],i[8]=s[2];var l=o.getActiveCamera();l.setPosition(n[0],n[1],n[2]),l.setFocalPoint(a[0],a[1],a[2]),l.setViewUp(s[0],s[1],s[2]),o.resetCamera()}}},e.setEnabled=function(n){if(n){if(t.enabled)return;if(!t.actor)return void yW("Must set actor before enabling orientation marker.");if(!t._interactor)return void yW("Must set interactor before enabling orientation marker.");var i=t.parentRenderer||t._interactor.getCurrentRenderer(),d=i.getRenderWindow();d.addRenderer(o),2>d.getNumberOfLayers()&&d.setNumberOfLayers(2),o.setLayer(d.getNumberOfLayers()-1),o.setInteractive(t.interactiveRenderer),o.addViewProp(t.actor),t.actor.setVisibility(!0),s=i.onEvent(function(e){"ActiveCameraEvent"===e.type&&(l&&l.unsubscribe(),l=e.camera.onModified(f))}),l=i.getActiveCamera().onModified(f),u=t._interactor.onAnimation(e.updateMarkerOrientation),c=t._interactor.onEndAnimation(e.updateMarkerOrientation),a.observe(t._interactor.getView().getCanvas()),e.updateViewport(),e.updateMarkerOrientation(),t.enabled=!0}else{if(!t.enabled)return;t.enabled=!1,a.disconnect(),s.unsubscribe(),s=null,l.unsubscribe(),l=null,u.unsubscribe(),u=null,c.unsubscribe(),c=null,t.actor.setVisibility(!1),o.removeViewProp(t.actor);var p,h=null==(p=t._interactor)||null==(p=p.findPokedRenderer())?void 0:p.getRenderWindow();h&&h.removeRenderer(o)}e.modified()},e.setViewportCorner=function(n){n!==t.viewportCorner&&(t.viewportCorner=n,e.updateViewport())},e.setViewportSize=function(n){var i=Math.min(1,Math.max(0,n));i!==t.viewportSize&&(t.viewportSize=i,e.updateViewport())},e.setActor=function(n){var i=t.enabled;e.setEnabled(!1),t.actor=n,e.setEnabled(i)},e.getRenderer=function(){return o},e.delete=function(){n.delete(),d&&(d.unsubscribe(),d=null),s&&(s.unsubscribe(),s=null),l&&(l.unsubscribe(),l=null),u&&(u.unsubscribe(),u=null),c&&(c.unsubscribe(),c=null),a.disconnect()},d=e.onModified(e.updateViewport)}(e,t)}var yX=yz({newInstance:eE.newInstance(yK,"vtkOrientationMarkerWidget"),extend:yK},yG),yY=Uint8Array,yZ=Uint16Array,yJ=Uint32Array,yQ=new yY([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),y$=new yY([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),y0=new yY([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y1=function(e,t){for(var n=new yZ(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var o=new yJ(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return[n,o]},y2=y1(yQ,2),y3=y2[0],y4=y2[1];y3[28]=258,y4[258]=28;for(var y5=y1(y$,0),y6=y5[0],y8=y5[1],y9=new yZ(32768),y7=0;y7<32768;++y7){var be=(43690&y7)>>>1|(21845&y7)<<1;be=(61680&(be=(52428&be)>>>2|(13107&be)<<2))>>>4|(3855&be)<<4,y9[y7]=((65280&be)>>>8|(255&be)<<8)>>>1}var bt=function(e,t,n){for(var i=e.length,o=0,a=new yZ(t);o<i;++o)e[o]&&++a[e[o]-1];var s,l=new yZ(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(n){s=new yZ(1<<t);var u=15-t;for(o=0;o<i;++o)if(e[o])for(var c=o<<4|e[o],d=t-e[o],f=l[e[o]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)s[y9[f]>>>u]=c}else for(s=new yZ(i),o=0;o<i;++o)e[o]&&(s[o]=y9[l[e[o]-1]++]>>>15-e[o]);return s},bn=new yY(288);for(y7=0;y7<144;++y7)bn[y7]=8;for(y7=144;y7<256;++y7)bn[y7]=9;for(y7=256;y7<280;++y7)bn[y7]=7;for(y7=280;y7<288;++y7)bn[y7]=8;var br=new yY(32);for(y7=0;y7<32;++y7)br[y7]=5;var bi=bt(bn,9,0),bo=bt(bn,9,1),ba=bt(br,5,0),bs=bt(br,5,1),bl=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},bu=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},bc=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},bd=function(e){return(e+7)/8|0},bf=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(2==e.BYTES_PER_ELEMENT?yZ:4==e.BYTES_PER_ELEMENT?yJ:yY)(n-t);return i.set(e.subarray(t,n)),i},bp=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bh=function(e,t,n){var i=Error(t||bp[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,bh),!n)throw i;return i},bm=function(e,t,n){var i=e.length;if(!i||n&&n.f&&!n.l)return t||new yY(0);var o=!t||n,a=!n||n.i;n||(n={}),t||(t=new yY(3*i));var s=function(e){var n=t.length;if(e>n){var i=new yY(Math.max(2*n,e));i.set(t),t=i}},l=n.f||0,u=n.p||0,c=n.b||0,d=n.l,f=n.d,p=n.m,h=n.n,m=8*i;do{if(!d){l=bu(e,u,1);var g=bu(e,u+1,3);if(u+=3,!g){var v=e[(P=bd(u)+4)-4]|e[P-3]<<8,y=P+v;if(y>i){a&&bh(0);break}o&&s(c+v),t.set(e.subarray(P,y),c),n.b=c+=v,n.p=u=8*y,n.f=l;continue}if(1==g)d=bo,f=bs,p=9,h=5;else if(2==g){var b=bu(e,u,31)+257,x=bu(e,u+10,15)+4,w=b+bu(e,u+5,31)+1;u+=14;for(var A=new yY(w),C=new yY(19),S=0;S<x;++S)C[y0[S]]=bu(e,u+3*S,7);u+=3*x;var _=bl(C),T=(1<<_)-1,O=bt(C,_,1);for(S=0;S<w;){var P,M=O[bu(e,u,T)];if(u+=15&M,(P=M>>>4)<16)A[S++]=P;else{var E=0,D=0;for(16==P?(D=3+bu(e,u,3),u+=2,E=A[S-1]):17==P?(D=3+bu(e,u,7),u+=3):18==P&&(D=11+bu(e,u,127),u+=7);D--;)A[S++]=E}}var I=A.subarray(0,b),k=A.subarray(b);p=bl(I),h=bl(k),d=bt(I,p,1),f=bt(k,h,1)}else bh(1);if(u>m){a&&bh(0);break}}o&&s(c+131072);for(var N=(1<<p)-1,R=(1<<h)-1,B=u;;B=u){var L=(E=d[bc(e,u)&N])>>>4;if((u+=15&E)>m){a&&bh(0);break}if(E||bh(2),L<256)t[c++]=L;else{if(256==L){B=u,d=null;break}var F=L-254;if(L>264){var V=yQ[S=L-257];F=bu(e,u,(1<<V)-1)+y3[S],u+=V}var j=f[bc(e,u)&R],G=j>>>4;if(j||bh(3),u+=15&j,k=y6[G],G>3&&(V=y$[G],k+=bc(e,u)&(1<<V)-1,u+=V),u>m){a&&bh(0);break}o&&s(c+131072);for(var U=c+F;c<U;c+=4)t[c]=t[c-k],t[c+1]=t[c+1-k],t[c+2]=t[c+2-k],t[c+3]=t[c+3-k];c=U}}n.l=d,n.p=B,n.b=c,n.f=l,d&&(l=1,n.m=p,n.d=f,n.n=h)}while(!l);return c==t.length?t:bf(t,0,c)},bg=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>>8},bv=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},by=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var o=n.length,a=n.slice();if(!o)return[b_,0];if(1==o){var s=new yY(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var l=n[0],u=n[1],c=0,d=1,f=2;for(n[0]={s:-1,f:l.f+u.f,l:l,r:u};d!=o-1;)l=n[n[c].f<n[f].f?c++:f++],u=n[c!=d&&n[c].f<n[f].f?c++:f++],n[d++]={s:-1,f:l.f+u.f,l:l,r:u};var p=a[0].s;for(i=1;i<o;++i)a[i].s>p&&(p=a[i].s);var h=new yZ(p+1),m=bb(n[d-1],h,0);if(m>t){i=0;var g=0,v=m-t,y=1<<v;for(a.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});i<o;++i){var b=a[i].s;if(!(h[b]>t))break;g+=y-(1<<m-h[b]),h[b]=t}for(g>>>=v;g>0;){var x=a[i].s;h[x]<t?g-=1<<t-h[x]++-1:++i}for(;i>=0&&g;--i){var w=a[i].s;h[w]==t&&(--h[w],++g)}m=t}return[new yY(h),m]},bb=function(e,t,n){return -1==e.s?Math.max(bb(e.l,t,n+1),bb(e.r,t,n+1)):t[e.s]=n},bx=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new yZ(++t),i=0,o=e[0],a=1,s=function(e){n[i++]=e},l=1;l<=t;++l)if(e[l]==o&&l!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(o),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(o);a=1,o=e[l]}return[n.subarray(0,i),t]},bw=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},bA=function(e,t,n){var i=n.length,o=bd(t+2);e[o]=255&i,e[o+1]=i>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<i;++a)e[o+a+4]=n[a];return 8*(o+4+i)},bC=function(e,t,n,i,o,a,s,l,u,c,d){bg(t,d++,n),++o[256];for(var f=by(o,15),p=f[0],h=f[1],m=by(a,15),g=m[0],v=m[1],y=bx(p),b=y[0],x=y[1],w=bx(g),A=w[0],C=w[1],S=new yZ(19),_=0;_<b.length;++_)S[31&b[_]]++;for(_=0;_<A.length;++_)S[31&A[_]]++;for(var T=by(S,7),O=T[0],P=T[1],M=19;M>4&&!O[y0[M-1]];--M);var E,D,I,k,N=c+5<<3,R=bw(o,bn)+bw(a,br)+s,B=bw(o,p)+bw(a,g)+s+14+3*M+bw(S,O)+(2*S[16]+3*S[17]+7*S[18]);if(N<=R&&N<=B)return bA(t,d,e.subarray(u,u+c));if(bg(t,d,1+(B<R)),d+=2,B<R){E=bt(p,h,0),D=p,I=bt(g,v,0),k=g;var L=bt(O,P,0);for(bg(t,d,x-257),bg(t,d+5,C-1),bg(t,d+10,M-4),d+=14,_=0;_<M;++_)bg(t,d+3*_,O[y0[_]]);d+=3*M;for(var F=[b,A],V=0;V<2;++V){var j=F[V];for(_=0;_<j.length;++_){var G=31&j[_];bg(t,d,L[G]),d+=O[G],G>15&&(bg(t,d,j[_]>>>5&127),d+=j[_]>>>12)}}}else E=bi,D=bn,I=ba,k=br;for(_=0;_<l;++_)if(i[_]>255){bv(t,d,E[(G=i[_]>>>18&31)+257]),d+=D[G+257],G>7&&(bg(t,d,i[_]>>>23&31),d+=yQ[G]);var U=31&i[_];bv(t,d,I[U]),d+=k[U],U>3&&(bv(t,d,i[_]>>>5&8191),d+=y$[U])}else bv(t,d,E[i[_]]),d+=D[i[_]];return bv(t,d,E[256]),d+D[256]},bS=new yJ([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b_=new yY(0),bT=function(e,t,n,i,o,a){var s=e.length,l=new yY(i+s+5*(1+Math.ceil(s/7e3))+o),u=l.subarray(i,l.length-o),c=0;if(!t||s<8)for(var d=0;d<=s;d+=65535){var f=d+65535;f>=s&&(u[c>>3]=a),c=bA(u,c+1,e.subarray(d,f))}else{for(var p=bS[t-1],h=p>>>13,m=8191&p,g=(1<<n)-1,v=new yZ(32768),y=new yZ(g+1),b=Math.ceil(n/3),x=2*b,w=function(t){return(e[t]^e[t+1]<<b^e[t+2]<<x)&g},A=new yJ(25e3),C=new yZ(288),S=new yZ(32),_=0,T=0,O=(d=0,0),P=0,M=0;d<s;++d){var E=w(d),D=32767&d,I=y[E];if(v[D]=I,y[E]=D,P<=d){var k=s-d;if((_>7e3||O>24576)&&k>423){c=bC(e,u,0,A,C,S,T,O,M,d-M,c),O=_=T=0,M=d;for(var N=0;N<286;++N)C[N]=0;for(N=0;N<30;++N)S[N]=0}var R=2,B=0,L=m,F=D-I&32767;if(k>2&&E==w(d-F))for(var V=Math.min(h,k)-1,j=Math.min(32767,d),G=Math.min(258,k);F<=j&&--L&&D!=I;){if(e[d+R]==e[d+R-F]){for(var U=0;U<G&&e[d+U]==e[d+U-F];++U);if(U>R){if(R=U,B=F,U>V)break;var z=Math.min(F,U-2),W=0;for(N=0;N<z;++N){var H=d-F+N+32768&32767,q=H-v[H]+32768&32767;q>W&&(W=q,I=H)}}}F+=(D=I)-(I=v[D])+32768&32767}if(B){A[O++]=0x10000000|y4[R]<<18|y8[B];var K=31&y4[R],X=31&y8[B];T+=yQ[K]+y$[X],++C[257+K],++S[X],P=d+R,++_}else A[O++]=e[d],++C[e[d]]}}c=bC(e,u,a,A,C,S,T,O,M,d-M,c),!a&&7&c&&(c=bA(u,c+1,b_))}return bf(l,0,i+bd(c)+o)},bO=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,i=9;--i;)n=(1&n&&-0x12477ce0)^n>>>1;e[t]=n}return e}(),bP=function(){var e=-1;return{p:function(t){for(var n=e,i=0;i<t.length;++i)n=bO[255&n^t[i]]^n>>>8;e=n},d:function(){return~e}}},bM=function(){var e=1,t=0;return{p:function(n){for(var i=e,o=t,a=0|n.length,s=0;s!=a;){for(var l=Math.min(s+2655,a);s<l;++s)o+=i+=n[s];i=(65535&i)+15*(i>>16),o=(65535&o)+15*(o>>16)}e=i,t=o},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},bE=function(e,t,n,i,o){return bT(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,i,!o)},bD=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},bI=function(e,t){return e[t]|e[t+1]<<8},bk=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},bN=function(e,t){return bk(e,t)+0x100000000*bk(e,t+4)},bR=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},bB=function(e){31==e[0]&&139==e[1]&&8==e[2]||bh(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},bL=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},bF=function(e,t){var n=t.level,i=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=i<<6|(i?32-2*i:1)},bV=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&bh(6,"invalid zlib data"),32&e[1]&&bh(6,"invalid zlib data: preset dictionaries not supported")};function bj(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?bm(e.subarray(bB(e),-8),t||new yY(bL(e))):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?bm(e,t):bm((bV(e),e.subarray(2,-4)),t)}var bG=function(e,t,n,i){for(var o in e){var a=e[o],s=t+o,l=i;Array.isArray(a)&&(l=bD(i,a[1]),a=a[0]),a instanceof yY?n[s]=[a,l]:(n[s+="/"]=[new yY(0),l],bG(a,s,n,i))}},bU="u">typeof TextEncoder&&new TextEncoder,bz="u">typeof TextDecoder&&new TextDecoder;try{bz.decode(b_,{stream:!0})}catch(e){}var bW=function(e){for(var t="",n=0;;){var i=e[n++],o=(i>127)+(i>223)+(i>239);if(n+o>e.length)return[t,bf(e,n-1)];o?3==o?t+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):t+=1&o?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(i)}};function bH(e,t){if(t){for(var n=new yY(e.length),i=0;i<e.length;++i)n[i]=e.charCodeAt(i);return n}if(bU)return bU.encode(e);var o=e.length,a=new yY(e.length+(e.length>>1)),s=0,l=function(e){a[s++]=e};for(i=0;i<o;++i){if(s+5>a.length){var u=new yY(s+8+(o-i<<1));u.set(a),a=u}var c=e.charCodeAt(i);c<128||t?l(c):(c<2048?l(192|c>>6):(c>55295&&c<57344?(l(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++i))>>18),l(128|c>>12&63)):l(224|c>>12),l(128|c>>6&63)),l(128|63&c))}return bf(a,0,s)}function bq(e,t){if(t){for(var n="",i=0;i<e.length;i+=16384)n+=String.fromCharCode.apply(null,e.subarray(i,i+16384));return n}if(bz)return bz.decode(e);var o=bW(e),a=o[0];return o[1].length&&bh(8),a}var bK=function(e,t,n){var i=bI(e,t+28),o=bq(e.subarray(t+46,t+46+i),!(2048&bI(e,t+8))),a=t+46+i,s=bk(e,t+20),l=n&&0xffffffff==s?bX(e,a):[s,bk(e,t+24),bk(e,t+42)],u=l[0],c=l[1],d=l[2];return[bI(e,t+10),u,c,o,a+bI(e,t+30)+bI(e,t+32),d]},bX=function(e,t){for(;1!=bI(e,t);t+=4+bI(e,t+2));return[bN(e,t+12),bN(e,t+4),bN(e,t+20)]},bY=function(e){var t=0;if(e)for(var n in e){var i=e[n].length;i>65535&&bh(9),t+=i+4}return t},bZ=function(e,t,n,i,o,a,s,l){var u=i.length,c=n.extra,d=l&&l.length,f=bY(c);bR(e,t,null!=s?0x2014b50:0x4034b50),t+=4,null!=s&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==a&&8),e[t++]=o&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var p=new Date(null==n.mtime?Date.now():n.mtime),h=p.getFullYear()-1980;if((h<0||h>119)&&bh(10),bR(e,t,h<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),t+=4,null!=a&&(bR(e,t,n.crc),bR(e,t+4,a),bR(e,t+8,n.size)),bR(e,t+12,u),bR(e,t+14,f),t+=16,null!=s&&(bR(e,t,d),bR(e,t+6,n.attrs),bR(e,t+10,s),t+=14),e.set(i,t),t+=u,f)for(var m in c){var g=c[m],v=g.length;bR(e,t,+m),bR(e,t+2,v),e.set(g,t+4),t+=4+v}return d&&(e.set(l,t),t+=d),t},bJ=function(e,t,n,i,o){bR(e,t,0x6054b50),bR(e,t+8,n),bR(e,t+10,n),bR(e,t+12,i),bR(e,t+16,o)};function bQ(e,t){for(var n={},i=e.length-22;0x6054b50!=bk(e,i);--i)(!i||e.length-i>65558)&&bh(13);var o=bI(e,i+8);if(!o)return{};var a=bk(e,i+16),s=0xffffffff==a;s&&(i=bk(e,i-12),0x6064b50!=bk(e,i)&&bh(13),o=bk(e,i+32),a=bk(e,i+48));for(var l=t&&t.filter,u=0;u<o;++u){var c=bK(e,a,s),d=c[0],f=c[1],p=c[2],h=c[3],m=c[4],g=c[5],v=g+30+bI(e,g+26)+bI(e,g+28);a=m,l&&!l({name:h,size:f,originalSize:p,compression:d})||(d?8==d?n[h]=bm(e.subarray(v,v+f),new yY(p)):bh(14,"unknown compression type "+d):n[h]=bf(e,v,v+f))}return n}"function"==typeof queueMicrotask&&queueMicrotask;var b$=eE.vtkErrorMacro,b0=eE.vtkDebugMacro,b1=0;function b2(e){var t=document.querySelector('.webResource[data-url="'.concat(e,'"]'));return t?t.innerHTML:null}function b3(e){return"/"===e[0]?e.substr(1):e}var b4={fetchJSON:function(e,t){return new Promise(function(e,n){var i=b2(b3(t));null===i?n(Error("No such JSON ".concat(t))):e(JSON.parse(i))})},fetchText:function(e,t){return new Promise(function(e,n){var i=b2(t);null===i?n(Error("No such text ".concat(t))):e(i)})},fetchArray:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(o,a){var s=b3([t,n.ref.basepath,i.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/")),l=b2(s);if(null===l)a(Error("No such array ".concat(s)));else{if("string"===n.dataType){var u=atob(l);i.compression&&(u=bq(bj(u))),n.values=JSON.parse(u)}else{var c=new Uint8Array(f.toArrayBuffer(l));n.buffer=new ArrayBuffer(c.length),new Uint8Array(n.buffer).set(c),i.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=bq(bj(new Uint8Array(n.buffer))):n.buffer=bj(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(n0.ENDIANNESS!==n.ref.encode&&n0.ENDIANNESS&&(b0("Swap bytes of ".concat(n.name)),n0.swapBytes(n.buffer,eD[n.dataType])),n.values=eE.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&b$("Error in FetchArray: ".concat(n.name," does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size))}delete n.ref,0==--b1&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),o(n)}})},fetchImage:function(e,t){return new Promise(function(e,n){var i=document.querySelector('.webResource[data-url="'.concat(t,'"]'));i?e(i):n(Error("No such image ".concat(t)))})}};dx.html=function(e){return b4};var b5=eE.vtkErrorMacro,b6=eE.vtkDebugMacro,b8=0;function b9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new XMLHttpRequest;return i.open(e,t,!0),n.headers&&Object.entries(n.headers).forEach(function(e){var t=b(e,2),n=t[0],o=t[1];return i.setRequestHeader(n,o)}),n.progressCallback&&i.addEventListener("progress",n.progressCallback),i}var b7={fetchArray:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise(function(o,a){var s=b9("GET",n.ref.url?n.ref.url:[t,n.ref.basepath,i.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/"),i);s.onreadystatechange=function(t){1===s.readyState&&(n.ref.pending=!0,1==++b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!0)),4===s.readyState&&(n.ref.pending=!1,200===s.status||0===s.status?(n.buffer=s.response,i.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=bq(bj(new Uint8Array(n.buffer))):n.buffer=bj(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(n0.ENDIANNESS!==n.ref.encode&&n0.ENDIANNESS&&(b6("Swap bytes of ".concat(n.name)),n0.swapBytes(n.buffer,eD[n.dataType])),n.values=eE.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&b5("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),o(n)):a({xhr:s,e:t}))},s.responseType=i.compression||"string"!==n.dataType?"arraybuffer":"text",s.send()}):Promise.resolve(n)},fetchJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(i,o){var a=b9("GET",t,n);a.onreadystatechange=function(t){1===a.readyState&&1==++b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===a.readyState&&(0==--b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===a.status||0===a.status?n.compression?i(JSON.parse(bq(bj(new Uint8Array(a.response))))):i(JSON.parse(a.responseText)):o({xhr:a,e:t}))},a.responseType=n.compression?"arraybuffer":"text",a.send()})},fetchText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression&&"gz"!==n.compression&&(b5("Supported algorithms are: [gz]"),b5("Unkown compression algorithm: ".concat(n.compression))),new Promise(function(i,o){var a=b9("GET",t,n);a.onreadystatechange=function(t){1===a.readyState&&1==++b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===a.readyState&&(0==--b8&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===a.status||0===a.status?n.compression?i(bq(bj(new Uint8Array(a.response)))):i(a.responseText):o({xhr:a,e:t}))},a.responseType=n.compression?"arraybuffer":"text",a.send()})},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&t.compression&&"gz"!==t.compression&&(b5("Supported algorithms are: [gz]"),b5("Unkown compression algorithm: ".concat(t.compression))),new Promise(function(n,i){var o=b9("GET",e,t);o.onreadystatechange=function(e){4===o.readyState&&(200===o.status||0===o.status?t.compression?n(bj(new Uint8Array(o.response)).buffer):n(o.response):i({xhr:o,e:e}))},o.responseType="arraybuffer",o.send()})},fetchImage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(e,i){var o=new Image;n.crossOrigin&&(o.crossOrigin=n.crossOrigin),o.onload=function(){return e(o)},o.onerror=i,o.src=t})}};dx.http=function(e){return b7};var xe=eE.vtkErrorMacro,xt=eE.vtkDebugMacro;function xn(e){var t;return"/"===(t=new URL(e,"http://any").pathname)[0]?t.substr(1):t}var xr=function(e){var t,n=!1,i=0,o=null,a="";return(t=e.zipContent,new Promise(function(e,n){"string"==typeof t?e(bH(t)):t instanceof Blob?e(t.arrayBuffer().then(function(e){return new Uint8Array(e)})):t instanceof ArrayBuffer?e(new Uint8Array(t)):(null==t?void 0:t.buffer)instanceof ArrayBuffer?e(new Uint8Array(t.buffer)):n(Error("Invalid datatype to unpack."))})).then(function(t){o=bQ(t),n=!0;var i=[];Object.keys(o).forEach(function(e){e.endsWith("index.json")&&i.push(e)}),i.sort(function(e,t){return e.length-t.length}),a=i[0].replace(/index\.json$/,""),e.callback&&e.callback(o)}),{fetchArray:function(e,t,s){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(u,c){n||xe("ERROR!!! zip not ready...");var d,f,p=xn([t,s.ref.basepath,l.compression?"".concat(s.ref.id,".gz"):s.ref.id].join("/"));function h(){delete s.ref,0==--i&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),u(s)}1==++i&&null!=e&&e.invokeBusy&&e.invokeBusy(!0);var m=o["".concat(a).concat(p)];"string"!==s.dataType||l.compression?(d=l.compression,function(e){s.buffer=new ArrayBuffer(e.length),new Uint8Array(s.buffer).set(e),d&&("string"===s.dataType||"JSON"===s.dataType?s.buffer=bq(bj(new Uint8Array(s.buffer))):s.buffer=bj(new Uint8Array(s.buffer)).buffer),"JSON"===s.ref.encode?s.values=JSON.parse(s.buffer):(n0.ENDIANNESS!==s.ref.encode&&n0.ENDIANNESS&&(xt("Swap bytes of ".concat(s.name)),n0.swapBytes(s.buffer,eD[s.dataType])),s.values=eE.newTypedArray(s.dataType,s.buffer)),s.values.length!==s.size&&xe("Error in FetchArray: ".concat(s.name," does not have the proper array size. Got ").concat(s.values.length,", instead of ").concat(s.size)),h()})(m):(f=l.compression,function(e){s.values=f?JSON.parse(bq(bj(e))):JSON.parse(e),h()})(bq(m))})},fetchJSON:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=xn(t);n||xe("ERROR!!! zip not ready...");var l=o["".concat(a).concat(s)];return i.compression?"gz"===i.compression?Promise.resolve(JSON.parse(bq(bj(l)))):Promise.reject(Error("Invalid compression")):Promise.resolve(JSON.parse(bq(l)))},fetchText:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=xn(t);n||xe("ERROR!!! zip not ready...");var l=o["".concat(a).concat(s)];return i.compression?"gz"===i.compression?Promise.resolve(bq(bQ(l))):Promise.reject(Error("Invalid compression")):Promise.resolve(bq(l))},fetchImage:function(e,t){var i=xn(t);n||xe("ERROR!!! zip not ready...");var s=o["".concat(a).concat(i)];return new Promise(function(e,t){var n,o=new Image;o.onload=function(){return e(o)},o.onerror=t;var a=d(s.buffer);o.src="data:image/".concat("jpg"===(n=i.split(".").pop().toLowerCase())?"jpeg":n,";base64,").concat(a)})},fetchBinary:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=xn(t);n||xe("ERROR!!! zip not ready...");var l=o["".concat(a).concat(s)];return i.compression?"gz"===i.compression?Promise.resolve(bj(l).buffer):Promise.reject(Error("Invalid compression")):Promise.resolve(l.buffer)}}};function xi(e){return new TextDecoder("latin1").decode(e)}dx.zip=function(e){return xr(e)};var xo={arrayBufferToString:xi,extractBinary:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=xi(e),o=t.exec(i);if(!o)return{text:i};var a=o.index+o[0].length,s=i.substring(0,a),l=n?n.exec(i):null;return l?{text:s+i.substr(l.index),binaryBuffer:e.slice(a,l.index)}:{text:s,binaryBuffer:e.slice(a)}}},xa=["pointData","cellData","fieldData"],xs={vtkDataArray:nH,vtkStringArray:se},xl={},xu={},xc={vtkPolyData:function(e){var t=[];return t.push(e.points),["verts","lines","polys","strips"].forEach(function(n){e[n]&&t.push(e[n])}),t},vtkImageData:function(e){return[]},vtkUnstructuredGrid:function(e){var t=[];return t.push(e.points),t.push(e.cells),t.push(e.cellTypes),t},vtkRectilinearGrid:function(e){var t=[];return t.push(e.xCoordinates),t.push(e.yCoordinates),t.push(e.zCoordinates),t}},xd={enableArray:!0,fetchGzip:!1,arrays:[],url:null,baseURL:null,requestCount:0,arrayCachingEnabled:!0,maxCacheSize:2048};function xf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xd,n),eE.obj(e,t),eE.get(e,t,["enableArray","fetchGzip","url","baseURL","dataAccessHelper","maxCacheSize"]),eE.set(e,t,["dataAccessHelper","progressCallback","maxCacheSize"]),eE.getArray(e,t,["arrays"]),eE.algo(e,t,0,1),eE.event(e,t,"busy"),function(e,t){function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat(n.ref.id,"|").concat(n.vtkClass);return xl[o]?Promise.resolve(xl[o]).then(function(e){n!==e&&(t.maxCacheSize&&(xu[o].lastAccess=new Date),Object.assign(n,e),delete n.ref)}):xl[o]=t.dataAccessHelper.fetchArray(e,t.baseURL,n,i).then(function(e){if(!t.maxCacheSize)return delete xl[o],e;if(xl[o]=e,xu[o]={lastAccess:new Date},t.maxCacheSize<0)return e;var n={};Object.keys(xu).forEach(function(e){n[e]={array:xl[e],lastAccess:xu[e].lastAccess}});for(var i=Object.entries(n).sort(function(e,t){return Math.sign(t[1].lastAccess-e[1].lastAccess)}),a=1048576*t.maxCacheSize,s=Object.values(n).reduce(function(e,t){return e+t.array.values.byteLength},0);s>a&&i.length>0;){var l=b(i.pop(),2),u=l[0],c=l[1];delete xl[u],delete xu[u],s-=c.array.values.byteLength}return xu[o]||eE.vtkWarningMacro("Cache size is too small for the dataset"),e}),Promise.resolve(xl[o])}t.classHierarchy.push("vtkHttpDataSetReader"),t.output[0]=M({vtkClass:"vtkPolyData"}),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.updateMetadata=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise("zip"===t.compression?function(i,o){dA.get("http").fetchBinary(t.url).then(function(a){t.dataAccessHelper=dA.get("zip",{zipContent:a,callback:function(a){t.baseURL="",t.dataAccessHelper.fetchJSON(e,"index.json").then(function(t){e.parseObject(t,{loadData:n,deepCopy:!1}).then(i,o)},function(e){o(e)})}})},function(e){o(e)})}:function(i,o){t.dataAccessHelper.fetchJSON(e,t.url).then(function(t){e.parseObject(t,{loadData:n,deepCopy:!1}).then(i,o)},function(e){o(e)})})},e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf("index.json")||i.fullpath){t.url=n;var o=n.split("/");o.pop(),t.baseURL=o.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.json");return t.compression=i.compression,e.updateMetadata(!!i.loadData)},e.parseObject=function(i,o){var a=o.loadData,s=o.baseUrl,l=o.deepCopy;s&&(t.baseURL=s);var u=void 0===l||l?structuredClone(i):i;return new Promise(function(i,o){!function(e,t,n,i,o,a,s){var l=t.enableArray;t.arrays=[],xa.forEach(function(e){n[e]&&(n[e].arrays.map(function(e){return e.data}).forEach(function(n){t.arrays.push({name:n.name,enable:l,location:e,array:n,registration:n.ref.registration||"addArray"})}),n[e].arrays=[])});var u=[],c=t.progressCallback,d=t.fetchGzip?"gz":null;function f(){t.dataset=M(n),s?e.loadData().then(function(){t.output[0]=t.dataset,o(e,t.output[0])}):(t.output[0]=t.dataset,o(e,t.output[0]))}xc[n.vtkClass](n).forEach(function(e){u.push(i(e,{compression:d,progressCallback:c}))}),u.length?Promise.all(u).then(f,function(e){a(e)}):f()}(e,t,u,n,i,o,a)})},e.loadData=function(){var i=t.dataset,o=t.arrays.filter(function(e){return e.enable}).filter(function(e){return e.array.ref}).map(function(e){return e.array});return new Promise(function(a,s){var l=function(e){s(e)};!function s(){if(o.length){var u=t.progressCallback,c=t.fetchGzip?"gz":null;n(o.pop(),{compression:c,progressCallback:u}).then(s,l)}else i&&(t.arrays.filter(function(e){return e.registration&&!e.array.ref}).forEach(function(e){var t=xs[e.array.vtkClass].newInstance(e.array);i["get".concat(eE.capitalize(e.location))]()[e.registration](t),delete e.registration}),i.modified(),a(e,i))}()})},e.requestData=function(e,t){},e.enableArray=function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.arrays.filter(function(t){return t.name===n&&t.location===e});1===o.length&&(o[0].enable=i)},e.getCachedArrayIds=function(){return Object.keys(xu)},e.clearCache=function(){return Object.keys(xu).forEach(function(e){delete xl[e],delete xu[e]})},e.isBusy=function(){return!!t.requestCount}}(e,t),void 0===t.progressCallback&&(t.progressCallback=null)}var xp={newInstance:eE.newInstance(xf,"vtkHttpDataSetReader"),extend:xf},xh={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var xg=xh.ColorSpace,xv=xh.Scale,xy=aq.ScalarMappingTarget,xb=eE.vtkDebugMacro,xx=eE.vtkErrorMacro,xw=eE.vtkWarningMacro;function xA(e,t){var n=e[0],i=e[1],o=e[2],a=Math.sqrt(n*n+i*i+o*o),s=a>.001?Math.acos(n/a):0,l=s>.001?Math.atan2(o,i):0;t[0]=a,t[1]=s,t[2]=l}function xC(e,t){if(e[0]>=t-.1)return e[2];var n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function xS(e,t,n,i){var o,a,s,l=[],u=[];nl(t,l),nl(n,u);var c=[],d=[];xA(l,c),xA(u,d);var f=e;if(c[1]>.05&&d[1]>.05&&function(e,t){var n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(c[2],d[2])>.33*Math.PI){var p=Math.max(c[0],d[0]);p=Math.max(88,p),e<.5?(d[0]=p,d[1]=0,d[2]=0,f*=2):(c[0]=p,c[1]=0,c[2]=0,f=2*f-1)}c[1]<.05&&d[1]>.05?c[2]=xC(d,c[0]):d[1]<.05&&c[1]>.05&&(d[2]=xC(c,d[0]));var h=[];h[0]=(1-f)*c[0]+f*d[0],h[1]=(1-f)*c[1]+f*d[1],h[2]=(1-f)*c[2]+f*d[2];var m=[];o=h[0],a=h[1],s=h[2],m[0]=o*Math.cos(a),m[1]=o*Math.sin(a)*Math.cos(s),m[2]=o*Math.sin(a)*Math.sin(s),nu(m,i)}var x_={clamping:!0,colorSpace:xg.RGB,hSVWrap:!0,scale:xv.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function xT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,x_,n),aq.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},eE.obj(t.buildTime),eE.get(e,t,["buildTime","mappingRange"]),eE.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:xg},{type:"enum",name:"scale",enum:xv}]),eE.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),eE.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=function(){return t.nodes.length},e.addRGBPoint=function(t,n,i,o){return e.addRGBPointLong(t,n,i,o,.5,0)},e.addRGBPointLong=function(n,i,o,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(s<0||s>1)return xx("Midpoint outside range [0.0, 1.0]"),-1;if(l<0||l>1)return xx("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n),t.nodes.push({x:n,r:i,g:o,b:a,midpoint:s,sharpness:l}),e.sortAndUpdateRange();for(var u=0;u<t.nodes.length&&t.nodes[u].x!==n;u++);return u<t.nodes.length?u:-1},e.addHSVPoint=function(t,n,i,o){return e.addHSVPointLong(t,n,i,o,.5,0)},e.addHSVPointLong=function(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=[];return nr([n,i,o],l),e.addRGBPoint(t,l[0],l[1],l[2],a,s)},e.setNodes=function(n){if(t.nodes!==n){var i=JSON.stringify(t.nodes);t.nodes=n;var o=JSON.stringify(t.nodes);if(e.sortAndUpdateRange()||i!==o)return e.modified(),!0}return!1},e.sortAndUpdateRange=function(){var n=JSON.stringify(t.nodes);t.nodes.sort(function(e,t){return e.x-t.x});var i=JSON.stringify(t.nodes),o=e.updateRange();return o||n===i?o:(e.modified(),!0)},e.updateRange=function(){var n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];var i=t.nodes.length;return i?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[i-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=function(n){for(var i=0;i<t.nodes.length&&t.nodes[i].x!==n;i++);var o=i;if(i>=t.nodes.length)return -1;var a=!1;return t.nodes.splice(i,1),0!==i&&i!==t.nodes.length||(a=e.updateRange()),a||e.modified(),o},e.movePoint=function(n,i){if(n!==i){e.removePoint(i);for(var o=0;o<t.nodes.length;o++)if(t.nodes[o].x===n){t.nodes[o].x=i,e.sortAndUpdateRange();break}}},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=function(n,i,o,a,s,l,u,c){e.sortAndUpdateRange();for(var d=0;d<t.nodes.length;)t.nodes[d].x>=n&&t.nodes[d].x<=s?t.nodes.splice(d,1):d++;e.addRGBPointLong(n,i,o,a,.5,0),e.addRGBPointLong(s,l,u,c,.5,0),e.modified()},e.addHSVSegment=function(t,n,i,o,a,s,l,u){var c=[],d=[];nr([n,i,o],c),nr([s,l,u],d),e.addRGBSegment(t,c[0],c[1],c[2],a,d[0],d[1],d[2])},e.mapValue=function(t){var n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=function(n,i){if(t.indexedLookup){var o=e.getSize(),a=e.getAnnotatedValueIndexInternal(n);if(a<0||0===o){var s=e.getNanColorByReference();i[0]=s[0],i[1]=s[1],i[2]=s[2]}else{var l=[];e.getNodeValue(a%o,l),i[0]=l[1],i[1]=l[2],i[2]=l[3]}}else e.getTable(n,n,1,i)},e.getRedValue=function(t){var n=[];return e.getColor(t,n),n[0]},e.getGreenValue=function(t){var n=[];return e.getColor(t,n),n[1]},e.getBlueValue=function(t){var n=[];return e.getColor(t,n),n[2]},e.logScaleEnabled=function(){return t.scale===xv.LOG10},e.usingLogScale=function(){return e.logScaleEnabled()&&t.mappingRange[0]>0},e.getTable=function(n,i,o,a){var s=e.usingLogScale(),l=s?Math.log10(Number(n)):Number(n),u=s?Math.log10(Number(i)):Number(i);if(nO(l)||nO(u))for(var c=0;c<o;c++)a[3*c+0]=t.nanColor[0],a[3*c+1]=t.nanColor[1],a[3*c+2]=t.nanColor[2];else{var d=0,f=t.nodes.length,p=0,h=0,m=0;0!==f&&(p=t.nodes[f-1].r,h=t.nodes[f-1].g,m=t.nodes[f-1].b);var g=0,v=0,y=0,b=[0,0,0],x=[0,0,0],w=0,A=0,C=[],S=t.mappingRange;s&&(S=[Math.log10(t.mappingRange[0]),Math.log10(t.mappingRange[1])]);for(var _=0;_<o;_++){var T=3*_;if(g=o>1?l+_/(o-1)*(u-l):.5*(l+u),t.discretize){var O=S;if(g>=O[0]&&g<=O[1]){var P=t.numberOfValues,M=O[1]-O[0];if(P<=1)g=O[0]+M/2;else{var E=eZ(P*((g-O[0])/M));g=O[0]+E/(P-1)*M}}}for(;d<f&&g>t.nodes[d].x;)++d<f&&(v=t.nodes[d-1].x,y=t.nodes[d].x,b[0]=t.nodes[d-1].r,x[0]=t.nodes[d].r,b[1]=t.nodes[d-1].g,x[1]=t.nodes[d].g,b[2]=t.nodes[d-1].b,x[2]=t.nodes[d].b,w=t.nodes[d-1].midpoint,A=t.nodes[d-1].sharpness,w<1e-5&&(w=1e-5),w>.99999&&(w=.99999));if(g>S[1])a[T]=0,a[T+1]=0,a[T+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(a[T]=t.aboveRangeColor[0],a[T+1]=t.aboveRangeColor[1],a[T+2]=t.aboveRangeColor[2]):(a[T]=p,a[T+1]=h,a[T+2]=m));else if(g<S[0]||nS(g)&&g<0)a[T]=0,a[T+1]=0,a[T+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(a[T]=t.belowRangeColor[0],a[T+1]=t.belowRangeColor[1],a[T+2]=t.belowRangeColor[2]):f>0&&(a[T]=t.nodes[0].r,a[T+1]=t.nodes[0].g,a[T+2]=t.nodes[0].b));else if(0===d&&(1e-6>Math.abs(g-l)||t.discretize))f>0?(a[T]=t.nodes[0].r,a[T+1]=t.nodes[0].g,a[T+2]=t.nodes[0].b):(a[T]=0,a[T+1]=0,a[T+2]=0);else{var D=0;if(D=(D=(g-v)/(y-v))<w?.5*D/w:.5+.5*(D-w)/(1-w),A>.99){if(D<.5){a[T]=b[0],a[T+1]=b[1],a[T+2]=b[2];continue}a[T]=x[0],a[T+1]=x[1],a[T+2]=x[2];continue}if(A<.01){if(t.colorSpace===xg.RGB)a[T]=(1-D)*b[0]+D*x[0],a[T+1]=(1-D)*b[1]+D*x[1],a[T+2]=(1-D)*b[2]+D*x[2];else if(t.colorSpace===xg.HSV){var I=[],k=[];nn(b,I),nn(x,k),t.hSVWrap&&(I[0]-k[0]>.5||k[0]-I[0]>.5)&&(I[0]>k[0]?I[0]-=1:k[0]-=1);var N=[];N[0]=(1-D)*I[0]+D*k[0],N[0]<0&&(N[0]+=1),N[1]=(1-D)*I[1]+D*k[1],N[2]=(1-D)*I[2]+D*k[2],nr(N,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]}else if(t.colorSpace===xg.LAB){var R=[],B=[];nl(b,R),nl(x,B);var L=[];L[0]=(1-D)*R[0]+D*B[0],L[1]=(1-D)*R[1]+D*B[1],L[2]=(1-D)*R[2]+D*B[2],nu(L,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]}else t.colorSpace===xg.DIVERGING?(xS(D,b,x,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]):xx("ColorSpace set to invalid value.",t.colorSpace);continue}D<.5?D=.5*Math.pow(2*D,1+10*A):D>.5&&(D=1-.5*Math.pow(2*(1-D),1+10*A));var F=D*D,V=F*D,j=2*V-3*F+1,G=-2*V+3*F,U=V-2*F+D,z=V-F,W=void 0;if(t.colorSpace===xg.RGB)for(var H=0;H<3;H++)W=(1-A)*(x[H]-b[H]),a[T+H]=j*b[H]+G*x[H]+U*W+z*W;else if(t.colorSpace===xg.HSV){var q=[],K=[];nn(b,q),nn(x,K),t.hSVWrap&&(q[0]-K[0]>.5||K[0]-q[0]>.5)&&(q[0]>K[0]?q[0]-=1:K[0]-=1);for(var X=[],Y=0;Y<3;Y++)W=(1-A)*(K[Y]-q[Y]),X[Y]=j*q[Y]+G*K[Y]+U*W+z*W,0===Y&&X[Y]<0&&(X[Y]+=1);nr(X,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]}else if(t.colorSpace===xg.LAB){var Z=[],J=[];nl(b,Z),nl(x,J);for(var Q=[],$=0;$<3;$++)W=(1-A)*(J[$]-Z[$]),Q[$]=j*Z[$]+G*J[$]+U*W+z*W;nu(Q,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]}else t.colorSpace===xg.DIVERGING?(xS(D,b,x,C),a[T]=C[0],a[T+1]=C[1],a[T+2]=C[2]):xx("ColorSpace set to invalid value.");for(var ee=0;ee<3;ee++)a[T+ee]=a[T+ee]<0?0:a[T+ee],a[T+ee]=a[T+ee]>1?1:a[T+ee]}}}},e.getUint8Table=function(n,i,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===o&&t.tableWithAlpha!==a)return t.table;if(0===t.nodes.length)return xx("Attempting to lookup a value with no points in the function"),t.table;var s=a?4:3;t.tableSize===o&&t.tableWithAlpha===a||(t.table=new Uint8Array(o*s),t.tableSize=o,t.tableWithAlpha=a);var l=[];e.getTable(n,i,o,l);for(var u=0;u<o;u++)t.table[u*s+0]=Math.floor(255*l[3*u+0]+.5),t.table[u*s+1]=Math.floor(255*l[3*u+1]+.5),t.table[u*s+2]=Math.floor(255*l[3*u+2]+.5),a&&(t.table[u*s+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromArray=function(n){e.removeAllPoints();for(var i=n.getNumberOfComponents(),o=0;o<n.getNumberOfTuples();o++)switch(i){case 3:t.nodes.push({x:o,r:n.getComponent(o,0),g:n.getComponent(o,1),b:n.getComponent(o,2),midpoint:.5,sharpness:0});break;case 4:t.nodes.push({x:n.getComponent(o,0),r:n.getComponent(o,1),g:n.getComponent(o,2),b:n.getComponent(o,3),midpoint:.5,sharpness:0});break;case 5:t.nodes.push({x:o,r:n.getComponent(o,0),g:n.getComponent(o,1),b:n.getComponent(o,2),midpoint:n.getComponent(o,4),sharpness:n.getComponent(o,5)});break;case 6:t.nodes.push({x:n.getComponent(o,0),r:n.getComponent(o,1),g:n.getComponent(o,2),b:n.getComponent(o,3),midpoint:n.getComponent(o,4),sharpness:n.getComponent(o,5)})}e.sortAndUpdateRange()},e.buildFunctionFromTable=function(n,i,o,a){var s=0;e.removeAllPoints(),o>1&&(s=(i-n)/(o-1));for(var l=0;l<o;l++){var u={x:n+s*l,r:a[3*l],g:a[3*l+1],b:a[3*l+2],sharpness:0,midpoint:.5};t.nodes.push(u)}e.sortAndUpdateRange()},e.getNodeValue=function(e,n){return e<0||e>=t.nodes.length?(xx("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,i){if(n<0||n>=t.nodes.length)return xx("Index out of range!"),-1;var o=t.nodes[n].x;return t.nodes[n].x=i[0],t.nodes[n].r=i[1],t.nodes[n].g=i[2],t.nodes[n].b=i[3],t.nodes[n].midpoint=i[4],t.nodes[n].sharpness=i[5],o!==i[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=function(){var n,i;return t.indexedLookup&&e.getSize()?e.getSize():t.tableSize?t.tableSize:Math.max(4094,null!=(n=null==(i=t.nodes)?void 0:i.length)?n:0)},e.getIndexedColor=function(t,n){var i=e.getSize();if(i>0&&t>=0){var o=[];e.getNodeValue(t%i,o);for(var a=0;a<3;++a)n[a]=o[a+1];n[3]=1}else{var s=e.getNanColorByReference();n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=1}},e.fillFromDataPointer=function(t,n){if(!(t<=0)&&n){e.removeAllPoints();for(var i=0;i<t;i++)e.addRGBPoint(n[4*i],n[4*i+1],n[4*i+2],n[4*i+3])}},e.setMappingRange=function(n,i){var o=[n,i],a=[n,i],s=e.getRange(),l=e.logScaleEnabled();if(s[1]!==o[1]||s[0]!==o[0])if(o[1]!==o[0]){l&&(o[0]<=0?console.warn("attempt to set log scale color range with non-positive minimum"):(a[0]=Math.log10(o[0]),a[1]=Math.log10(o[1])));for(var u=(a[1]-a[0])/(s[1]-s[0]),c=a[0]-s[0]*u,d=0;d<t.nodes.length;++d)t.nodes[d].x=t.nodes[d].x*u+c;t.mappingRange[0]=o[0],t.mappingRange[1]=o[1],e.modified()}else xx("attempt to set zero width color range")},e.adjustRange=function(n){var i=e.getRange(),o=[];i[0]<n[0]?e.getColor(n[0],o):e.getColor(i[0],o),e.addRGBPoint(n[0],o[0],o[1],o[2]),i[1]>n[1]?e.getColor(n[1],o):e.getColor(i[1],o),e.addRGBPoint(n[1],o[0],o[1],o[2]),e.sortAndUpdateRange();for(var a=0;a<t.nodes.length;)t.nodes[a].x>=n[0]&&t.nodes[a].x<=n[1]?t.nodes.splice(a,1):++a;return 1},e.estimateMinNumberOfSamples=function(t,n){return Math.ceil((n-t)/e.findMinimumXDistance())},e.findMinimumXDistance=function(){if(t.nodes.length<2)return -1;for(var e=Number.MAX_VALUE,n=0;n<t.nodes.length-1;n++){var i=t.nodes[n+1].x-t.nodes[n].x;i<e&&(e=i)}return e},e.mapScalarsThroughTable=function(n,i,o,a){0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,i,o,a):e.mapData(n,i,o,a):xb("Transfer Function Has No Points!")},e.mapData=function(t,n,i,o){if(0!==e.getSize()){var a=Math.floor(255*e.getAlpha()+.5),s=t.getNumberOfTuples(),l=t.getNumberOfComponents(),u=n.getData(),c=t.getData(),d=[];if(i===xy.RGBA)for(var f=0;f<s;f++){var p=c[f*l+o];e.getColor(p,d),u[4*f]=Math.floor(255*d[0]+.5),u[4*f+1]=Math.floor(255*d[1]+.5),u[4*f+2]=Math.floor(255*d[2]+.5),u[4*f+3]=a}if(i===xy.RGB)for(var h=0;h<s;h++){var m=c[h*l+o];e.getColor(m,d),u[3*h]=Math.floor(255*d[0]+.5),u[3*h+1]=Math.floor(255*d[1]+.5),u[3*h+2]=Math.floor(255*d[2]+.5)}if(i===xy.LUMINANCE)for(var g=0;g<s;g++){var v=c[g*l+o];e.getColor(v,d),u[g]=Math.floor(76.5*d[0]+150.45*d[1]+28.05*d[2]+.5)}if(i===xy.LUMINANCE_ALPHA)for(var y=0;y<s;y++){var b=c[y*l+o];e.getColor(b,d),u[2*y]=Math.floor(76.5*d[0]+150.45*d[1]+28.05*d[2]+.5),u[2*y+1]=a}}else xw("Transfer Function Has No Points!")},e.applyColorMap=function(n){var i=JSON.stringify(t.colorSpace);n.ColorSpace&&(t.colorSpace=xg[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(xx("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=xg.RGB));var o=i!==JSON.stringify(t.colorSpace),a=o||JSON.stringify(t.nanColor);if(n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);var s=(o=o||a!==JSON.stringify(t.nanColor))||JSON.stringify(t.nodes);if(n.RGBPoints){var l=n.RGBPoints.length;t.nodes=[];for(var u=0;u<l;u+=4)t.nodes.push({x:n.RGBPoints[u],r:n.RGBPoints[u+1],g:n.RGBPoints[u+2],b:n.RGBPoints[u+3],midpoint:.5,sharpness:0})}var c=e.sortAndUpdateRange(),d=!c&&(o||s!==JSON.stringify(t.nodes));return d&&e.modified(),c||d}}var xO=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(xT,"vtkColorTransferFunction"),extend:xT},xh),xP={NEAREST:0,LINEAR:1,FAST_LINEAR:2},xM={FRACTIONAL:0,PROPORTIONAL:1},xE={DEFAULT:0,ADDITIVE:1,COLORIZE:2,CUSTOM:3},xD={InterpolationType:xP,OpacityMode:xM,ColorMixPreset:xE,FilterMode:{OFF:0,NORMALIZED:1,RAW:2}};function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xI(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xN=xD.InterpolationType,xR=xD.OpacityMode,xB=xD.FilterMode,xL=xD.ColorMixPreset,xF=eE.vtkErrorMacro;function xV(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,xk({colorMixPreset:xL.DEFAULT,independentComponents:!0,interpolationType:xN.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1,ipScalarRange:[-1e6,1e6],filterMode:xB.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7,updatedExtents:[]},i)),eE.obj(e,t),!t.componentData){t.componentData=[];for(var o=0;o<4;++o)t.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:xR.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1,forceNearestInterpolation:!1})}eE.setGet(e,t,["colorMixPreset","independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineOpacity","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius","updatedExtents"]),eE.setGetArray(e,t,["ipScalarRange"],2),eE.setGetArray(e,t,["labelOutlineThickness"]),t.classHierarchy.push("vtkVolumeProperty"),n=xk({},e),e.getMTime=function(){for(var e,n=t.mtime,i=0;i<4;i++)1===t.componentData[i].colorChannels?t.componentData[i].grayTransferFunction&&(n=n>(e=t.componentData[i].grayTransferFunction.getMTime())?n:e):3===t.componentData[i].colorChannels&&t.componentData[i].rGBTransferFunction&&(n=n>(e=t.componentData[i].rGBTransferFunction.getMTime())?n:e),t.componentData[i].scalarOpacity&&(n=n>(e=t.componentData[i].scalarOpacity.getMTime())?n:e),t.componentData[i].gradientOpacity&&(t.componentData[i].disableGradientOpacity||(n=n>(e=t.componentData[i].gradientOpacity.getMTime())?n:e));return n},e.getColorChannels=function(e){return e<0||e>3?(xF("Bad index - must be between 0 and 3"),0):t.componentData[e].colorChannels},e.setGrayTransferFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!1;return t.componentData[n].grayTransferFunction!==i&&(t.componentData[n].grayTransferFunction=i,o=!0),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1,o=!0),o&&e.modified(),o},e.getGrayTransferFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===t.componentData[n].grayTransferFunction&&(t.componentData[n].grayTransferFunction=lW.newInstance(),t.componentData[n].grayTransferFunction.addPoint(0,0),t.componentData[n].grayTransferFunction.addPoint(1024,1),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1),e.modified()),t.componentData[n].grayTransferFunction},e.setRGBTransferFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!1;return t.componentData[n].rGBTransferFunction!==i&&(t.componentData[n].rGBTransferFunction=i,o=!0),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3,o=!0),o&&e.modified(),o},e.getRGBTransferFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===t.componentData[n].rGBTransferFunction&&(t.componentData[n].rGBTransferFunction=xO.newInstance(),t.componentData[n].rGBTransferFunction.addRGBPoint(0,0,0,0),t.componentData[n].rGBTransferFunction.addRGBPoint(1024,1,1,1),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3),e.modified()),t.componentData[n].rGBTransferFunction},e.setScalarOpacity=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.componentData[n].scalarOpacity!==i&&(t.componentData[n].scalarOpacity=i,e.modified(),!0)},e.getScalarOpacity=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===t.componentData[n].scalarOpacity&&(t.componentData[n].scalarOpacity=lW.newInstance(),t.componentData[n].scalarOpacity.addPoint(0,1),t.componentData[n].scalarOpacity.addPoint(1024,1),e.modified()),t.componentData[n].scalarOpacity},e.setComponentWeight=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n<0||n>=4)return xF("Invalid index"),!1;var o=Math.min(1,Math.max(0,i));return t.componentData[n].componentWeight!==o&&(t.componentData[n].componentWeight=o,e.modified(),!0)},e.getComponentWeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0||e>=4?(xF("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(xN.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(xN.LINEAR)},e.setInterpolationTypeToFastLinear=function(){return e.setInterpolationType(xN.FAST_LINEAR)},e.getInterpolationTypeAsString=function(){return eE.enumToString(xN,t.interpolationType)},["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(function(n){var i=eE.capitalize(n);e["set".concat(i)]=function(i,o){return t.componentData[i]["".concat(n)]!==o&&(t.componentData[i]["".concat(n)]=o,e.modified(),!0)}}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(function(n){var i=eE.capitalize(n);e["get".concat(i)]=function(e){return t.componentData[e]["".concat(n)]}}),e.setAverageIPScalarRange=function(t,n){console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),e.setIpScalarRange(t,n)},e.getFilterModeAsString=function(){return eE.enumToString(xB,t.filterMode)},e.setFilterModeToOff=function(){e.setFilterMode(xB.OFF)},e.setFilterModeToNormalized=function(){e.setFilterMode(xB.NORMALIZED)},e.setFilterModeToRaw=function(){e.setFilterMode(xB.RAW)},e.setGlobalIlluminationReach=function(e){return n.setGlobalIlluminationReach(np(e,0,1))},e.setVolumetricScatteringBlending=function(e){return n.setVolumetricScatteringBlending(np(e,0,1))},e.setAnisotropy=function(e){return n.setAnisotropy(np(e,-.99,.99))},e.setLAOKernelSize=function(e){return n.setLAOKernelSize(eZ(np(e,1,32)))},e.setLAOKernelRadius=function(e){return n.setLAOKernelRadius(e>=1?e:1)}}var xj=xk({newInstance:eE.newInstance(xV,"vtkVolumeProperty"),extend:xV},xD),xG={mapper:null};function xU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xG,n),mD.extend(e,t,n),t.boundsMTime={},eE.obj(t.boundsMTime),eE.setGet(e,t,["mapper"]),t.classHierarchy.push("vtkVolume"),e.getVolumes=function(){return[e]},e.makeProperty=xj.newInstance,e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e}}var xz={newInstance:eE.newInstance(xU,"vtkVolume"),extend:xU},xW=dA.get("http");function xH(e,t,n,i,o,a){t.readers=[];var s=[];return n.series.forEach(function(e){var n=xp.newInstance({fetchGzip:t.fetchGzip,dataAccessHelper:t.dataAccessHelper});s.push(n.setUrl("".concat(t.baseURL,"/").concat(e.url),{loadData:a})),t.readers.push({timeStep:e.timeStep,reader:n})}),Promise.all(s).then(function(){var t=e.getTimeRange();t&&0!==t.length&&e.setUpdateTimeStep(t[0]),i(e)},function(e){o(e)})}var xq={fetchGzip:!1,url:null,baseURL:null,dataAccessHelper:null};function xK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xq,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.set(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkHttpDataSetSeriesReader"),t.output[0]=M({vtkClass:"vtkPolyData"}),t.dataAccessHelper||(t.dataAccessHelper=xW),t.currentReader=null,e.updateMetaData=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise("zip"===t.compression?function(i,o){xW.fetchBinary(t.baseURL).then(function(a){t.dataAccessHelper=dA.get("zip",{zipContent:a,callback:function(a){t.baseURL="",t.dataAccessHelper.fetchJSON(e,"index.json").then(function(a){xH(e,t,a,i,o,n)},function(e){o(e)})}})})}:function(i,o){t.dataAccessHelper.fetchJSON(e,t.url).then(function(a){return xH(e,t,a,i,o,n)},function(e){o(e)})})},e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.endsWith("index.json")||i.fullpath){t.url=n;var o=n.split("/");o.pop(),t.baseURL=o.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.json");return t.compression=i.compression,e.updateMetaData(i.loadData)},e.getTimeSteps=function(){return t.readers.map(function(e){return e.timeStep}).sort()},e.getTimeRange=function(){var t=e.getTimeSteps(),n=t.length;return n>=1?[t[0],t[n-1]]:[]},e.setUpdateTimeStep=function(n){var i=t.readers.reduce(function(e,t){return t.timeStep<=n?t:e});void 0!==i&&(t.currentReader=i.reader,t.output[0]=t.currentReader.getOutputData(),t.output[0].modified(),e.modified())},e.requestData=function(e,n){t.currentReader&&(n[0]=t.currentReader.getOutputData())},e.enableArray=function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.currentReader&&t.currentReader.reader.enableArray(e,n,i)},e.loadData=function(){t.currentReader&&t.currentReader.reader.loadData()}}var xX={newInstance:eE.newInstance(xK,"vtkHttpDataSetSeriesReader"),extend:xK};function xY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var xZ={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function xJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xZ,n),eE.obj(e,t),eE.algo(e,t,6,0),eE.get(e,t,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),eE.setGet(e,t,["repeat","edgeClamp","interpolate","mipLevel"]),t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setJsImageData=function(n){t.jsImageData!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null,t.imageBitmap=null),t.jsImageData=n,t.imageLoaded=!0,e.modified())},e.setImageBitmap=function(n){t.imageBitmap!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null,t.jsImageData=null),t.imageBitmap=n,t.imageLoaded=!0,e.modified())},e.setCanvas=function(n){t.canvas!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.imageBitmap=null,t.jsImageData=null),t.canvas=n,e.modified())},e.setImage=function(n){t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.canvas=null,t.jsImageData=null,t.imageBitmap=null),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())},e.getDimensionality=function(){var n=0,i=0,o=1;if(e.getInputData()){var a=e.getInputData();n=a.getDimensions()[0],i=a.getDimensions()[1],o=a.getDimensions()[2]}return t.jsImageData&&(n=t.jsImageData.width,i=t.jsImageData.height),t.canvas&&(n=t.canvas.width,i=t.canvas.height),t.image&&(n=t.image.width,i=t.image.height),t.imageBitmap&&(n=t.imageBitmap.width,i=t.imageBitmap.height),(n>1)+(i>1)+(o>1)},e.getInputAsJsImageData=function(){if(!t.imageLoaded||e.getInputData())return null;if(t.jsImageData)return t.jsImageData;if(t.imageBitmap)return t.imageBitmap;if(t.canvas)return t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height);if(t.image){var n=t.image.width,i=t.image.height,o=new OffscreenCanvas(n,i).getContext("2d");return o.translate(0,i),o.scale(1,-1),o.drawImage(t.image,0,0,n,i),o.getImageData(0,0,n,i)}return null}}var xQ=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xY(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(xJ,"vtkTexture"),extend:xJ},{generateMipmaps:function(e,t,n){for(var i=e.createShaderModule({code:"\n    @group(0) @binding(0) var inputTexture: texture_2d<f32>;\n    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;\n\n    @compute @workgroup_size(8, 8)\n    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {\n      let texelCoord = vec2<i32>(global_id.xy);\n      let outputSize = textureDimensions(outputTexture);\n\n      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {\n        return;\n      }\n\n      let inputSize = textureDimensions(inputTexture);\n      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);\n\n      // Compute the floating-point source coordinate\n      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;\n\n      // Get integer coordinates for the four surrounding texels\n      let x0 = i32(floor(srcCoord.x));\n      let x1 = min(x0 + 1, i32(inputSize.x) - 1);\n      let y0 = i32(floor(srcCoord.y));\n      let y1 = min(y0 + 1, i32(inputSize.y) - 1);\n\n      // Compute the weights\n      let wx = srcCoord.x - f32(x0);\n      let wy = srcCoord.y - f32(y0);\n\n      // Fetch the four texels\n      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);\n      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);\n      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);\n      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);\n\n      // Bilinear interpolation\n      let color = mix(\n        mix(c00, c10, wx),\n        mix(c01, c11, wx),\n        wy\n      );\n\n      textureStore(outputTexture, texelCoord, color);\n    }\n  "}),o=e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),a=e.createPipelineLayout({bindGroupLayouts:[o]}),s=e.createComputePipeline({label:"ComputeMipmapPipeline",layout:a,compute:{module:i,entryPoint:"main"}}),l=e.createSampler({magFilter:"linear",minFilter:"linear"}),u=1;u<n;u++){var c=t.createView({baseMipLevel:u-1,mipLevelCount:1}),d=t.createView({baseMipLevel:u,mipLevelCount:1}),f=e.createBindGroup({layout:s.getBindGroupLayout(0),entries:[{binding:0,resource:c},{binding:1,resource:d},{binding:2,resource:l}]}),p=e.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),h=p.beginComputePass();h.setPipeline(s),h.setBindGroup(0,f);var m=Math.max(1,t.width>>u),g=Math.max(1,t.height>>u),v=Math.ceil(m/8),y=Math.ceil(g/8);h.dispatchWorkgroups(v,y),h.end(),e.queue.submit([p.finish()])}}}),x$=eE.vtkErrorMacro,x0={baseUrl:"",files:[],texture:null,crossOrigin:void 0,maxTextureLODSize:5e4,stepFinishedCallback:null,waitTimeToStart:4e3,waitTimeBetweenDownloads:0};function x1(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,x0,i),eE.obj(e,t),eE.setGet(e,t,["baseUrl","files","texture","crossOrigin","maxTextureLODSize","stepFinishedCallback","waitTimeToStart","waitTimeBetweenDownloads"]),t.classHierarchy.push("vtkTextureLODsDownloader"),n={downloadStack:[]},e.startDownloads=function(){if(t.texture)if(t.files&&0!==t.files.length){var e=t.baseUrl;e&&!e.endsWith("/")&&(e+="/"),n.downloadStack=[],t.files.forEach(function(t){return n.downloadStack.push("".concat(e).concat(t))}),setTimeout(function e(){if(0!==n.downloadStack.length){var i=function(){setTimeout(e,t.waitTimeBetweenDownloads)},o=new Image;t.crossOrigin&&(o.crossOrigin=t.crossOrigin);var a=n.downloadStack.shift();new Promise(function(e,t){var n=new XMLHttpRequest;n.open("HEAD",a,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(n.getResponseHeader("Content-Length")):(console.log("Failed to get remote file size of",a),t(n)))},n.send()}).then(function(e){!e||e/1024>t.maxTextureLODSize?(e?console.log("Skipping image",a,", because it is larger","than the max texture size:",t.maxTextureLODSize,"KiB"):console.log("Failed to get image size"),i()):(o.src=a,o.decode().then(function(){t.texture.setImage(o),t.stepFinishedCallback&&t.stepFinishedCallback(),i()}).catch(function(e){console.log("Failed to decode image:",o.src),console.log("Error is:",e),i()}))}).catch(function(e){console.log("Failed to get size of:",a),console.log("status was:",e.status),console.log("statusText was:",e.statusText),i()})}},t.waitTimeToStart)}else x$("No files set.");else x$("Texture was not set.")}}var x2={newInstance:eE.newInstance(x1,"vtkTextureLODsDownloader"),extend:x1},x3=eE.vtkErrorMacro,x4={baseUrl:"",currentSource:null,files:[],mapper:null,sceneItem:null,stepFinishedCallback:null,waitTimeToStart:4e3,waitTimeBetweenDownloads:0};function x5(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,x4,i),eE.obj(e,t),eE.setGet(e,t,["baseUrl","files","mapper","sceneItem","stepFinishedCallback","waitTimeToStart","waitTimeBetweenDownloads"]),eE.get(e,t,["currentSource"]),t.classHierarchy.push("vtkHttpDataSetLODsLoader"),n={downloadStack:[]},e.startDownloads=function(){if(t.mapper)if(t.files&&0!==t.files.length){var e=t.baseUrl;e&&!e.endsWith("/")&&(e+="/"),n.downloadStack=[],t.files.forEach(function(t){return n.downloadStack.push("".concat(e).concat(t))}),setTimeout(function e(){var i=n.downloadStack.shift(),o=xp.newInstance({dataAccessHelper:dA.get("http")});t.currentSource=o,o.setUrl(i,{compression:"zip",loadData:!0,fullpath:!0}).then(function(){if(t.mapper.setInputConnection(o.getOutputPort()),t.sceneItem){var i=t.sceneItem.defaultSettings;i.mapper&&i.mapper.colorByArrayName&&o.enableArray(i.mapper.colorByArrayName,i.mapper.colorByArrayName),t.sceneItem.source=o}t.stepFinishedCallback&&t.stepFinishedCallback(),0!==n.downloadStack.length&&setTimeout(e,t.waitTimeBetweenDownloads)})},t.waitTimeToStart)}else x3("No files set.");else x3("Mapper was not set.")}}var x6={newInstance:eE.newInstance(x5,"vtkHttpDataSetLODsLoader"),extend:x5},x8={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6};function x9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function x7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x9(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var we=["getAnisotropy","getComputeNormalFromOpacity","getFilterMode","getFilterModeAsString","getGlobalIlluminationReach","getIpScalarRange","getIpScalarRangeByReference","getLAOKernelRadius","getLAOKernelSize","getLocalAmbientOcclusion","getPreferSizeOverAccuracy","getVolumetricScatteringBlending","setAnisotropy","setAverageIPScalarRange","setComputeNormalFromOpacity","setFilterMode","setFilterModeToNormalized","setFilterModeToOff","setFilterModeToRaw","setGlobalIlluminationReach","setIpScalarRange","setIpScalarRangeFrom","setLAOKernelRadius","setLAOKernelSize","setLocalAmbientOcclusion","setPreferSizeOverAccuracy","setVolumetricScatteringBlending"];function wt(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,x7({bounds:m(iG.INIT_BOUNDS),sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,initialInteractionScale:1,interactionSampleDistanceFactor:1,blendMode:x8.COMPOSITE_BLEND,volumeShadowSamplingDistFactor:5,colorTextureWidth:1024,opacityTextureWidth:1024,labelOutlineTextureWidth:1024},i)),mY.extend(e,t,i),eE.setGet(e,t,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","initialInteractionScale","interactionSampleDistanceFactor","blendMode","volumeShadowSamplingDistFactor","colorTextureWidth","opacityTextureWidth","labelOutlineTextureWidth"]),eE.event(e,t,"lightingActivated"),t.classHierarchy.push("vtkVolumeMapper"),n=x7({},e),e.getBounds=function(){return t.static||e.update(),t.bounds=m(e.getInputData().getBounds()),t.bounds},e.setBlendModeToComposite=function(){e.setBlendMode(x8.COMPOSITE_BLEND)},e.setBlendModeToMaximumIntensity=function(){e.setBlendMode(x8.MAXIMUM_INTENSITY_BLEND)},e.setBlendModeToMinimumIntensity=function(){e.setBlendMode(x8.MINIMUM_INTENSITY_BLEND)},e.setBlendModeToAverageIntensity=function(){e.setBlendMode(x8.AVERAGE_INTENSITY_BLEND)},e.setBlendModeToAdditiveIntensity=function(){e.setBlendMode(x8.ADDITIVE_INTENSITY_BLEND)},e.setBlendModeToRadonTransform=function(){e.setBlendMode(x8.RADON_TRANSFORM_BLEND)},e.getBlendModeAsString=function(){return eE.enumToString(x8,t.blendMode)},e.setVolumeShadowSamplingDistFactor=function(e){return n.setVolumeShadowSamplingDistFactor(e>=1?e:1)},we.forEach(function(t){e[t]=function(){throw Error('The method "volumeMapper.'.concat(t,"()\" doesn't exist anymore. ")+"It is a rendering property that has been moved to the volume property. Replace your code with:\n"+"volumeActor.getProperty().".concat(t,"()\n"))}})}var wn=x7({newInstance:eE.newInstance(wt,"vtkVolumeMapper"),extend:wt},{createRadonTransferFunction:function(e,t,n,i,o){var a=null;return o?(a=o).removeAllPoints():a=lW.newInstance(),a.addPointLong(-1024,0,1,1),a.addPoint(e,t),a.addPoint(n,i),a}});function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var wo={timeSteps:[0],timeRange:[0,0],currentTimeStep:0,scene:null,data:null,renderers:[],applySettings:null,originalMetadata:null};function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wo,n),eE.obj(e,t),eE.get(e,t,["applySettings","currentTimeStep","data","originalMetada","scene","timeRange","timeSteps"]),eE.setGet(e,t,["renderers"]),e.setCurrentTimeStep=function(n){t.timeSteps&&0!==t.timeSteps.length&&(t.timeSteps.includes(n)?t.currentTimeStep=n:n<=t.timeSteps[0]?t.currentTimeStep=t.timeSteps[0]:t.currentTimeStep=t.timeSteps.find(function(e,t,i){return t===i.length-1||n>=e&&n<i[t+1]}),e.update())},e.setData=function(e){t.data=e,e.timeSteps&&(t.timeSteps=e.timeSteps.map(function(e){return e.time}),t.timeRange=[t.timeSteps[0],t.timeSteps[t.timeSteps.length-1]],t.currentTimeStep=t.timeSteps[0])},e.setScene=function(e,n,i,o){t.scene=e,t.originalMetadata=n,t.applySettings=i,t.renderer=o},e.setCameraParameters=function(e){t.renderers&&t.renderers.forEach(function(t){var n=t.getActiveCamera();n&&n.set(e)})},e.setBackground=function(e){t.renderers&&t.renderers.forEach(function(t){t.setBackground(e)})},e.update=function(){if(t.data&&t.scene){var n=t.data.timeSteps.find(function(e){return e.time===t.currentTimeStep});if(n.camera){var i=wi({},t.originalMetadata.camera);Object.assign(i,n.camera),e.setCameraParameters(i)}n.background&&e.setBackground(n.background),t.scene&&t.scene.forEach(function(e){e.source.setUpdateTimeStep&&e.source.getTimeSteps().includes(t.currentTimeStep)&&e.source.setUpdateTimeStep(t.currentTimeStep);var i=e.id;if(n[i]){var o=wi({},e.defaultSettings);Object.assign(o,n[i]),t.applySettings(e,o)}})}},e.addRenderer=function(e){e&&!t.renderers.includes(e)&&t.renderers.push(e)}}var ws={newInstance:eE.newInstance(wa,"vtkTimeStepBasedAnimationHandler"),extend:wa};function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var wc=eE.vtkErrorMacro,wd=1;function wf(e,t){if(t.actor&&e.actor.set(t.actor),t.actorRotation&&e.actor.rotateWXYZ(t.actorRotation[0],t.actorRotation[1],t.actorRotation[2],t.actorRotation[3]),t.volumeRotation&&e.volume.rotateWXYZ(t.volumeRotation[0],t.volumeRotation[1],t.volumeRotation[2],t.volumeRotation[3]),t.property)if(t.volume){var n=wu({},t.property);if(delete n.components,e.volume.getProperty().set(n),t.property.components){var i=e.volume.getProperty();e.volumeComponents.forEach(function(e,n){i.setScalarOpacityUnitDistance(n,t.property.components[n].scalarOpacityUnitDistance),e.rgbTransferFunction&&i.setRGBTransferFunction(n,e.rgbTransferFunction),e.grayTransferFunction&&i.setGrayTransferFunction(n,e.grayTransferFunction),e.scalarOpacity&&i.setScalarOpacity(n,e.scalarOpacity)})}}else e.actor.getProperty().set(t.property);t.mapper&&(t.mapper.colorByArrayName&&(e.source.enableArray(t.mapper.colorByArrayName,t.mapper.colorByArrayName),e.source.loadData()),e.mapper.set(t.mapper),t.mapper.colorByArrayName&&t.luts[t.mapper.colorByArrayName]&&(e.mapper.setLookupTable(t.luts[t.mapper.colorByArrayName]),e.mapper.setUseLookupTableScalarRange(!0))),t.lookupTable&&(e.mapper.getLookupTable().set(t.lookupTable),e.mapper.getLookupTable().build()),t.textureLODs&&(e.textureLODs=t.textureLODs),t.sourceLODs&&(e.sourceLODs=t.sourceLODs)}function wp(e){var t=xO.newInstance(e);return e.nodes&&(t.removeAllPoints(),e.nodes.forEach(function(e){var n=b(e,6),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5];t.addRGBPointLong(i,o,a,s,l,u)})),t}function wh(e){var t=lW.newInstance(e);return e.points&&(t.removeAllPoints(),e.points.forEach(function(e){var n=b(e,4),i=n[0],o=n[1],a=n[2],s=n[3];return t.addPointLong(i,o,a,s)})),t}function wm(e){return function(t,n,i){var o,a=e.newInstance({fetchGzip:n.fetchGzip,dataAccessHelper:n.dataAccessHelper});o=t.volume?wn.newInstance():gd.newInstance();var s={name:t.name||"Item ".concat(wd++),source:a,mapper:o,defaultSettings:t};if(t.volume){var l=xz.newInstance();s.volume=l,n.renderer&&n.renderer.addVolume(l),t.property&&t.property.components&&(s.volumeComponents=t.property.components.map(function(e){var t={};return e.rgbTransferFunction?t.rgbTransferFunction=wp(e.rgbTransferFunction):e.grayTransferFunction&&(t.grayTransferFunction=wh(e.grayTransferFunction)),e.scalarOpacity&&(t.scalarOpacity=wh(e.scalarOpacity)),t})),l.setMapper(o)}else{var u=mH.newInstance();if(s.actor=u,t.texture&&t.texture in n.usedTextures)u.addTexture(n.usedTextures[t.texture]);else if(t.texture){var c=[n.baseURL,t.texture].join("/"),d=xQ.newInstance();if(d.setInterpolate(!0),d.setRepeat(!0),u.addTexture(d),s.texture=d,n.usedTextures[t.texture]=d,-1!==["jpg","png","jpeg"].indexOf(t.texture.split(".").pop().toLowerCase()))n.dataAccessHelper.fetchImage({},c,{crossOrigin:"anonymous"}).then(function(e){d.setImage(e)});else{var f=e.newInstance({fetchGzip:n.fetchGzip,dataAccessHelper:n.dataAccessHelper});f.setUrl(c,{loadData:!0}).then(function(){d.setInputData(f.getOutputData())})}}var p=t.textureLODs;if(p&&p.files&&0!==p.files.length){var h=JSON.stringify(p);if(h in n.usedTextureLODs)u.addTexture(n.usedTextureLODs[h]);else{s.textureLODsDownloader=x2.newInstance();var m=s.textureLODsDownloader,g=xQ.newInstance();g.setInterpolate(!0),u.addTexture(g),n.usedTextureLODs[h]=g,m.setTexture(g),m.setCrossOrigin("anonymous"),m.setBaseUrl(p.baseUrl),m.setFiles(p.files),n.startLODLoaders&&m.startDownloads()}}n.renderer&&n.renderer.addActor(u),u.setMapper(o)}o.setInputConnection(a.getOutputPort()),a.setUrl([n.baseURL,t[t.type].url].join("/"),{loadData:!0}).then(function(){return i.invokeReady()}),wf(s,t),n.scene.push(s);var v=t.sourceLODs;if(v&&v.files&&0!==v.files.length){s.dataSetLODsLoader=x6.newInstance();var y=s.dataSetLODsLoader;y.setMapper(o),y.setSceneItem(s),y.setBaseUrl(v.baseUrl),y.setFiles(v.files),n.startLODLoaders&&y.startDownloads()}return s}}function wg(e,t){t.animationHandler=ws.newInstance({scene:t.scene,originalMetadata:t.metadata,applySettings:wf}),t.animationHandler&&t.renderer&&t.animationHandler.addRenderer(t.renderer),t.animationHandler.setData(e)}var wv={httpDataSetReader:wm(xp),vtkHttpDataSetReader:wm(xp),httpDataSetSeriesReader:wm(xX),vtkHttpDataSetSeriesReader:wm(xX)},wy={timeStepBasedAnimationHandler:wg,vtkTimeStepBasedAnimationHandler:wg},wb={fetchGzip:!1,url:null,baseURL:null,animationHandler:null,startLODLoaders:!0};function wx(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wb,i),eE.obj(e,t),eE.get(e,t,["fetchGzip","url","baseURL","scene","metadata","animationHandler"]),eE.setGet(e,t,["renderer"]),eE.event(e,t,"ready"),function(e,t){var i={};function o(e){if(t.renderer){var n=t.renderer.getActiveCamera();n?n.set(e):wc("No active camera to update")}}function a(e){t.renderer&&t.renderer.setBackground(e)}t.usedTextures||(t.usedTextures={}),t.usedTextureLODs||(t.usedTextureLODs={}),t.classHierarchy.push("vtkHttpSceneLoader"),t.scene||(t.scene=[]),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.update=function(){t.dataAccessHelper.fetchJSON(e,t.url).then(function(s){void 0!==s.fetchGzip&&(t.fetchGzip=s.fetchGzip),s.background&&t.renderer&&a(s.background),s.camera&&(i.camera=s.camera,o(s.camera));var l={};s.lookupTables&&Object.keys(s.lookupTables).forEach(function(e){var t=wp(s.lookupTables[e]);l[e]=t}),s.scene&&(s.scene.forEach(function(n){var i=wv[n.type];i&&i(wu({luts:l},n),t,e)}),n.g.scene=t.scene,t.usedTextures={},t.usedTextureLODs={}),t.metadata=s,s.animation&&(0,wy[s.animation.type])(wu({},s.animation),t,e,o,a)},function(e){wc("Error fetching scene ".concat(e))})},e.resetScene=function(){i.camera&&o(i.camera)},e.setUrl=function(n){if(-1===n.indexOf("index.json"))t.baseURL=n,t.url="".concat(n,"/index.json");else{t.url=n;var i=n.split("/");i.pop(),t.baseURL=i.join("/")}return e.update()}}(e,t)}var ww={newInstance:eE.newInstance(wx,"vtkHttpSceneLoader"),extend:wx,applySettings:wf,updateDatasetTypeMapping:function(e,t){wv[e]=t}};function wA(e){return{subscribeToImageStream:function(t){return e.subscribe("viewport.image.push.subscription",t)},unsubscribeToImageStream:function(t){return e.unsubscribe(t)},registerView:function(t){return e.call("viewport.image.push.observer.add",[t])},unregisterView:function(t){return e.call("viewport.image.push.observer.remove",[t])},enableView:function(t,n){return e.call("viewport.image.push.enabled",[t,n])},render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:[400,400],view:-1};return e.call("viewport.image.push",[t])},resetCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.call("viewport.camera.reset",[t])},invalidateCache:function(t){return e.call("viewport.image.push.invalidate.cache",[t])},setQuality:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.call("viewport.image.push.quality",[t,n,i])},setSize:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;return e.call("viewport.image.push.original.size",[t,n,i])},setServerAnimationFPS:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return e.call("viewport.image.animation.fps.max",[t])},getServerAnimationFPS:function(){return e.call("viewport.image.animation.fps.get",[])},startAnimation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.call("viewport.image.animation.start",[t])},stopAnimation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.call("viewport.image.animation.stop",[t])},updateCamera:function(t,n,i,o){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e.call("viewport.camera.update",[null!=t?t:-1,n,i,o,a])},updateCameraParameters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.call("viewport.camera.update.params",[t,n,i])}}}var wC={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function wS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wC,n),eE.obj(e,t),eE.event(e,t,"ImageReady"),eE.get(e,t,["viewId","size","fps","lastImageEvent"]),eE.setGet(e,t,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),function(e,t){function n(n){if(!t.deleted){var i=Number(this.dataset.id);e.invokeImageReady(t.eventPool[i])}}t.classHierarchy.push("vtkViewStream"),t.imageDecodingPool=[new Image,new Image],t.eventPool=[],t.nextPoolImageIndex=0,t.urlToRevoke=[],t.activeURL=null,t.fps=[],t.lastTime=Date.now(),t.lastImageEvent=null,e.pushCamera=function(){var n=t.camera.getReferenceByName("focalPoint"),i=t.camera.getReferenceByName("viewUp"),o=t.camera.getReferenceByName("position"),a=t.camera.getParallelProjection(),s=t.camera.getViewAngle(),l=t.camera.getParallelScale(),u=null;return u=t.useCameraParameters?t.protocol.updateCameraParameters(t.viewId,{focalPoint:n,viewUp:i,position:o,parallelProjection:a,viewAngle:s,parallelScale:l},!1):t.protocol.updateCamera(t.viewId,n,i,o,!1),t.isAnimating&&setTimeout(e.pushCamera,1e3/t.cameraUpdateRate),u},e.invalidateCache=function(){return t.protocol.invalidateCache(t.viewId)},e.render=function(){return t.protocol.render({view:t.viewId,size:t.size})},e.resetCamera=function(){return t.protocol.resetCamera(t.viewId)},e.startAnimation=function(){return t.protocol.startAnimation(t.viewId)},e.stopAnimation=function(){return t.protocol.stopAnimation(t.viewId)},e.setSize=function(n,i){var o=!1;return t.size[0]===n&&t.size[1]===i||(t.size=[n,i],o=!0),o&&(e.modified(),t.protocol)?t.protocol.setSize(t.viewId,n,i):Promise.resolve(!1)},e.startInteraction=function(){var n=[t.protocol.setQuality(t.viewId,t.interactiveQuality,t.interactiveRatio)];return t.camera&&(n.push(e.startAnimation()),t.isAnimating=!0,n.push(e.pushCamera())),Promise.all(n)},e.endInteraction=function(){var n=[];return n.push(t.protocol.setQuality(t.viewId,t.stillQuality,t.stillRatio)),t.camera?(n.push(e.stopAnimation()),t.isAnimating=!1,n.push(e.pushCamera())):n.push(e.render()),Promise.all(n)},e.setViewId=function(e){return!(t.viewId===e||!t.protocol)&&(t.viewId&&t.protocol.unregisterView(t.viewId),t.viewId=e,t.viewId&&t.protocol.registerView(t.viewId).then(function(e){t.viewId=e.viewId}),!0)},e.processMessage=function(n){if(n.id==t.viewId){var i=new Blob([n.image],{type:t.mimeType});if(t.activeURL)for(t.urlToRevoke.push(t.activeURL),t.activeURL=null;t.urlToRevoke.length>60;){var o=t.urlToRevoke.shift();window.URL.revokeObjectURL(o)}t.activeURL=URL.createObjectURL(i);var a,s=Date.now(),l=Math.floor(1e4/(s-t.lastTime))/10;for(t.fps.push(l),t.lastTime=s,t.lastImageEvent={url:t.activeURL,fps:l,metadata:{size:n.size,id:n.id,memory:n.memsize,workTime:n.workTime}},t.decodeImage?(a=t.lastImageEvent,t.eventPool[t.nextPoolImageIndex]=a,a.image=t.imageDecodingPool[t.nextPoolImageIndex++],t.nextPoolImageIndex%=t.imageDecodingPool.length,a.image.src=a.url):e.invokeImageReady(t.lastImageEvent);t.fps.length>t.fpsWindowSize;)t.fps.shift()}},e.delete=eE.chain(function(){for(t.unregisterViewStream(e),e.setViewId(null);t.urlToRevoke.length;)window.URL.revokeObjectURL(t.urlToRevoke.pop())},e.delete),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;t.imageDecodingPool.length<e;)t.imageDecodingPool.push(new Image);for(var i=0;i<t.imageDecodingPool.length;i++)t.imageDecodingPool[i].dataset.id=i,t.imageDecodingPool[i].onload=n}()}(e,t),Object.assign(e,t.sharedAPI)}var w_={newInstance:eE.newInstance(wS,"vtkViewStream"),extend:wS},wT={viewStreams:[],serverAnimationFPS:-1};function wO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wT,n),eE.obj(e,t),eE.get(e,t,["serverAnimationFPS","protocol"]),function(e,t){function n(e){var n=e[0];if(n&&n.image)for(var i=0;i<t.viewStreams.length;i++)t.viewStreams[i].processMessage(n)}t.classHierarchy.push("vtkImageStream"),e.setServerAnimationFPS=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,i=!1;return t.serverAnimationFPS!==n&&(t.serverAnimationFPS=n,i=!0),t.protocol?(i&&e.modified(),t.protocol.setServerAnimationFPS(n)):Promise.resolve(!0)},e.connect=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wA;!t.connected&&e&&i&&(t.protocol=i(e),t.protocol.subscribeToImageStream(n).promise.then(function(e){t.renderTopicSubscription=e,t.connected=!0}).catch(function(e){t.connected=!1,console.error(e)}))},e.disconnect=function(){t.protocol&&t.connected&&t.renderTopicSubscription&&(t.protocol.unsubscribeToImageStream(t.renderTopicSubscription),t.renderTopicSubscription=null),t.connected=!1},e.registerViewStream=function(e){t.viewStreams.push(e)},e.unregisterViewStream=function(e){t.viewStreams=t.viewStreams.filter(function(t){return t!==e})},e.createViewStream=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[400,400],o=e.setServerAnimationFPS,a=e.getServerAnimationFPS,s=e.unregisterViewStream,l=w_.newInstance({protocol:t.protocol,unregisterViewStream:s,sharedAPI:{setServerAnimationFPS:o,getServerAnimationFPS:a}});return l.setViewId(n),l.setSize(i[0],i[1]),e.registerViewStream(l),l},e.delete=eE.chain(function(){for(;t.viewStreams.length;)t.viewStreams.pop().delete();e.disconnect()},e.delete)}(e,t)}var wP={newInstance:eE.newInstance(wO,"vtkImageStream"),extend:wO},wM=[],wE=null;function wD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={};return Object.keys(e).forEach(function(o){var a;-1===n.indexOf(o)?i[o]=(a=e[o],function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Promise(function(e,i){t(1),a.apply(void 0,n).then(function(n){t(-1),e(n)},function(e){t(-1),i(e)})})}):i[o]=e[o]}),i}var wI={notBusyList:[],busyCount:0,timeoutId:0,notificationTimeout:50,createImageStream:!0};function wk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wI,n),eE.obj(e,t),eE.setGet(e,t,["protocols","notBusyList","createImageStream","configDecorator"]),eE.get(e,t,["connection","config","remote","imageStream"]),eE.event(e,t,"BusyChange"),eE.event(e,t,"ConnectionReady"),eE.event(e,t,"ConnectionError"),eE.event(e,t,"ConnectionClose"),function(e,t){function n(){e.invokeBusyChange(t.busyCount)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t.busyCount+=e,t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=0),t.busyCount?n():t.timeoutId=setTimeout(n,t.notificationTimeout)}t.classHierarchy.push("vtkWSLinkClient"),e.beginBusy=function(){return i(1)},e.endBusy=function(){return i(-1)},e.isBusy=function(){return!!t.busyCount},e.isConnected=function(){return!!t.connection},e.connect=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return wE?t.connection?Promise.reject(Error("Need to disconnect first")):(t.config=n,t.configDecorator=o||t.configDecorator,new Promise(function(o,a){t.smartConnect=wE.newInstance({config:n,configDecorator:t.configDecorator}),t.smartConnect.onConnectionReady(function(n){t.connection=n,t.remote={},t.config=t.smartConnect.getConfig();var a=n.getSession();t.protocols=t.protocols||{},Object.keys(t.protocols).forEach(function(e){t.remote[e]=wD(t.protocols[e](a),i,t.notBusyList)}),t.createImageStream&&(t.imageStream=wP.newInstance(),t.imageStream.connect(a)),e.invokeConnectionReady(e),o(e)}),t.smartConnect.onConnectionError(function(t){e.invokeConnectionError(t),a(t)}),t.smartConnect.onConnectionClose(function(t){e.invokeConnectionClose(t),a(t)}),t.smartConnect.connect()})):Promise.reject(Error("Need to provide SmartConnect"))},e.disconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;t.connection&&(t.connection.destroy(e),t.connection=null)},e.registerProtocol=function(e,n){t.remote[e]=wD(n(t.connection.getSession()),i,t.notBusyList)},e.unregisterProtocol=function(e){delete t.remote[e]}}(e,t)}var wN=eE.newInstance(wk,"vtkWSLinkClient"),wR=eE.vtkErrorMacro;function wB(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}var wL={removeDuplicateVertices:-1};function wF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wL,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper","removeDuplicateVertices"]),eE.algo(e,t,0,1),function(e,t){function n(e){var n=t.output[0],i=n.getPoints().getData(),o=n.getPolys().getData();if(i&&o){for(var a=new Map,s=new Map,l=0,u=!1,c=0;c<i.length;c+=3){var d=(i[c]*Math.pow(10,e)).toFixed(0),f=(i[c+1]*Math.pow(10,e)).toFixed(0),p=(i[c+2]*Math.pow(10,e)).toFixed(0),h="".concat(d,",").concat(f,",").concat(p);void 0!==a.get(h)?(s.set(c/3,a.get(h)),u=!0):(s.set(c/3,l),a.set(h,l),l++)}if(u){for(var m=new Float32Array(3*a.size),g=Array.from(a.keys()),v=0;v<g.length;v++){var y=g[v],b=3*a.get(y),x=y.split(",").map(function(t){return t*Math.pow(10,-e)});m[b]=x[0],m[b+1]=x[1],m[b+2]=x[2]}for(var w=new Int32Array(o.length),A=0;A<o.length;A+=4)w[A]=3,w[A+1]=s.get(o[A+1]),w[A+2]=s.get(o[A+2]),w[A+3]=s.get(o[A+3]);n.getPoints().setData(m),n.getPolys().setData(w),n.modified()}}else console.warn("No valid polydata.")}t.classHierarchy.push("vtkSTLReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),e.loadData(i)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0!==i.compression?i.compression:t.compression,a=void 0!==i.progressCallback?i.progressCallback:t.progressCallback;return i.binary?t.dataAccessHelper.fetchBinary(n,{compression:o,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:o,progressCallback:a})}(t.url,n);return i.then(e.parse),i},e.parse=function(t){"string"==typeof t?e.parseAsText(t):e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(i){if(i&&i!==t.parseData)if(e.modified(),t.parseData=i,84+50*new DataView(i,0,84).getUint32(80,!0)===i.byteLength){for(var o=i.slice(0,80),a=function(e){for(var t=e.split(" ").filter(function(e){return e.indexOf("=")>-1}),n={},i=0;i<t.length;++i){var o=t[i].split("=");2===o.length&&(n[o[0]]=o[1])}return n}(xo.arrayBufferToString(o)),s=new DataView(i,84),l=(i.byteLength-84)/50,u=new Float32Array(9*l),c=new Float32Array(3*l),d=new Uint32Array(4*l),f=new Uint16Array(l),p=0,h=0;h<l;h++){var m=50*h;c[3*h+0]=s.getFloat32(m+0,!0),c[3*h+1]=s.getFloat32(m+4,!0),c[3*h+2]=s.getFloat32(m+8,!0),u[9*h+0]=s.getFloat32(m+12,!0),u[9*h+1]=s.getFloat32(m+16,!0),u[9*h+2]=s.getFloat32(m+20,!0),u[9*h+3]=s.getFloat32(m+24,!0),u[9*h+4]=s.getFloat32(m+28,!0),u[9*h+5]=s.getFloat32(m+32,!0),u[9*h+6]=s.getFloat32(m+36,!0),u[9*h+7]=s.getFloat32(m+40,!0),u[9*h+8]=s.getFloat32(m+44,!0),d[p++]=3,d[p++]=3*h+0,d[p++]=3*h+1,d[p++]=3*h+2,f[h]=s.getUint16(m+48,!0)}var g="SPACE";if(g in a&&"LPS"!==a[g]){var v=a[g],y=new Float32Array(16);switch(y[15]=1,v[0]){case"L":y[0]=1;break;case"R":y[0]=-1;break;default:return void wR("Can not convert STL file from ".concat(v," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(v[1]){case"P":y[5]=1;break;case"A":y[5]=-1;break;default:return void wR("Can not convert STL file from ".concat(v," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(v[2]){case"S":y[10]=1;break;case"I":y[10]=-1;break;default:return void wR("Can not convert STL file from ".concat(v," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}a$.buildFromDegree().setMatrix(y).apply(u).apply(c)}var b=lC.newInstance();b.getPoints().setData(u,3),b.getPolys().setData(d),b.getCellData().setScalars(nH.newInstance({name:"Attribute",values:f})),b.getCellData().setNormals(nH.newInstance({name:"Normals",values:c,numberOfComponents:3})),t.output[0]=b,t.removeDuplicateVertices>=0&&n(t.removeDuplicateVertices)}else e.parseAsText(xo.arrayBufferToString(i))},e.parseAsText=function(i){if(i&&i!==t.parseData){e.modified(),t.parseData=i;for(var o=i.split("\n"),a=1,s=[],l=[],u=[];-1!==a;)a=function(e,t,n,i,o){var a=e[t];if(void 0===a)return -1;if(-1!==a.indexOf("endfacet")||-1===a.indexOf("facet"))return t+1;var s=0,l=2,u=n.length/3;for(wB(a.split(/[ \t]+/).filter(function(e){return e}).slice(-3).map(Number),o);-1!==e[t+l].indexOf("vertex");)wB(e[t+l].split(/[ \t]+/).filter(function(e){return e}).slice(-3).map(Number),n),s++,l++;i.push(s);for(var c=0;c<s;c++)i.push(u+c);for(;e[t+l]&&-1!==e[t+l].indexOf("endfacet");)l++;return t+l+2}(o,a,s,l,u);var c=lC.newInstance();c.getPoints().setData(Float32Array.from(s),3),c.getPolys().setData(Uint32Array.from(l)),c.getCellData().setNormals(nH.newInstance({name:"Normals",values:Float32Array.from(u),numberOfComponents:3})),t.output[0]=c,t.removeDuplicateVertices>=0&&n(t.removeDuplicateVertices)}},e.requestData=function(n,i){e.parse(t.parseData)}}(e,t),t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var wV={extend:wF,newInstance:eE.newInstance(wF,"vtkSTLReader")},wj="ascii",wG={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},wU=/ply([\s\S]*)end_header\r?\n/,wz=/end_header\s([\s\S]*)$/;function wW(e){var t="",n=0,i=wU.exec(e);null!==i&&(t=i[1],n=i[0].length);for(var o,a,s,l={comments:[],elements:[],headerLength:n},u=t.split("\n"),c=0;c<u.length;c++){var d=u[c];if(""!==(d=d.trim())){var f=void 0;switch(a=(s=d.split(/\s+/)).shift(),d=s.join(" "),a){case"format":l.format=s[0],l.version=s[1];break;case"comment":l.comments.push(d);break;case"element":void 0!==o&&l.elements.push(o),(o={}).name=s[0],o.count=parseInt(s[1],10),o.properties=[];break;case"property":"list"===(f={type:s[0]}).type?(f.name=s[3],f.countType=s[1],f.itemType=s[2]):f.name=s[1],f.name in wG&&(f.name=wG[f.name]),o.properties.push(f);break;case"obj_info":l.objInfo=d;break;default:console.warn("unhandled",a,s)}}}return void 0!==o&&l.elements.push(o),l}function wH(e,t,n,i){var o=t.find(function(e){return"vertex"===e.name}),a=t.find(function(e){return"face"===e.name}),s=0,l=0;o&&(s=o.count),a&&(l=a.count);for(var u=new Float32Array(3*s),c=new Uint8Array(3*s),d=new Float32Array(2*s),f=new Float32Array(3*s),p=e.colors.length>0,h=e.uvs.length>0,m=e.normals.length>0,g=e.faceVertexUvs.length>0,v=new Map,y=s,b=0;b<s;b++){var x=3*b+0,w=3*b+1,A=3*b+2;u[x]=e.vertices[x],u[w]=e.vertices[w],u[A]=e.vertices[A],p&&(c[x]=e.colors[x],c[w]=e.colors[w],c[A]=e.colors[A]),h?(w=2*b+1,d[x=2*b+0]=e.uvs[x],d[w]=e.uvs[w]):(d[2*b]=-1,d[2*b+1]=-1),m&&(f[x]=e.normals[x],f[w]=e.normals[w],f[A]=e.normals[A])}if(g&&!h&&l>0){var C=0,S=0;if(i){for(var _=[],T=[],O=[],P=[],M=0;M<l;++M){var E=e.indices[C++],D=e.faceVertexUvs[S++];if(D&&2*E===D.length)for(var I=0;I<E;++I){var k=e.indices[C+I],N=[D[2*I],D[2*I+1]],R=[d[2*k],d[2*k+1]];if(-1===R[0]){d[2*k]=N[0],d[2*k+1]=N[1];var B="".concat(N[0],",").concat(N[1]);v.has(B)||v.set(B,[]),v.get(B).push(k)}else if(Math.abs(R[0]-N[0])>n||Math.abs(R[1]-N[1])>n){var L="".concat(N[0],",").concat(N[1]),F=-1;if(v.has(L))for(var V=v.get(L),j=0,G=V.length;j<G;j++){var U=V[j];if(Math.abs(u[3*U]-u[3*k])<=n&&Math.abs(u[3*U+1]-u[3*k+1])<=n&&Math.abs(u[3*U+2]-u[3*k+2])<=n){F=U;break}}-1===F?(_.push(u[3*k],u[3*k+1],u[3*k+2]),p&&T.push(c[3*k],c[3*k+1],c[3*k+2]),m&&O.push(f[3*k],f[3*k+1],f[3*k+2]),P.push(N[0],N[1]),v.has(L)||v.set(L,[]),v.get(L).push(y),e.indices[C+I]=y,y++):e.indices[C+I]=F}}C+=E}if(_.length>0){var z=s+_.length/3,W=new Float32Array(3*z),H=new Float32Array(2*z),q=p?new Uint8Array(3*z):null,K=m?new Float32Array(3*z):null;W.set(u),H.set(d),p&&q&&q.set(c),m&&K&&K.set(f),W.set(_,3*s),H.set(P,2*s),p&&q&&q.set(T,3*s),m&&K&&K.set(O,3*s),u=W,d=H,p&&(c=q),m&&(f=K)}}else for(var X=0;X<l;++X){var Y=e.indices[C++],Z=e.faceVertexUvs[S++];if(Z&&2*Y===Z.length)for(var J=0;J<Y;++J){var Q=e.indices[C++];d[2*Q]=Z[2*J],d[2*Q+1]=Z[2*J+1]}else C+=Y}}var $=lC.newInstance();if($.getPoints().setData(u,3),l>0)$.getPolys().setData(Uint32Array.from(e.indices));else{for(var ee=new Uint32Array(2*s),et=0;et<s;et++)ee[2*et]=1,ee[2*et+1]=et;$.getVerts().setData(ee)}if(p&&$.getPointData().setScalars(nH.newInstance({numberOfComponents:3,values:c,name:"RGB"})),h||g){var en=nH.newInstance({numberOfComponents:2,values:d,name:"TextureCoordinates"}),er=$.getPointData();er.addArray(en),er.setActiveTCoords(en.getName())}return m&&$.getPointData().setNormals(nH.newInstance({numberOfComponents:3,name:"Normals",values:f})),$}function wq(e,t){var n;switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":n=parseInt(e,10);break;case"float":case"double":case"float32":case"float64":n=parseFloat(e);break;default:console.log("Unsupported type")}return n}function wK(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n?e.uvs.push(n.s,n.t):"u"in n&&"v"in n?e.uvs.push(n.u,n.v):"texture_u"in n&&"texture_v"in n&&e.uvs.push(n.texture_u,n.texture_v),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red,n.green,n.blue);else if("face"===t){var i=n.vertex_indices||n.vertex_index,o=n.texcoord;i&&i.length>0&&(e.indices.push(i.length),i.forEach(function(t,n){e.indices.push(t)})),e.faceVertexUvs.push(o)}}function wX(e,t,n,i){var o;switch(n){case"int8":case"char":o=[e.getInt8(t),1];break;case"uint8":case"uchar":o=[e.getUint8(t),1];break;case"int16":case"short":o=[e.getInt16(t,i),2];break;case"uint16":case"ushort":o=[e.getUint16(t,i),2];break;case"int32":case"int":o=[e.getInt32(t,i),4];break;case"uint32":case"uint":o=[e.getUint32(t,i),4];break;case"float32":case"float":o=[e.getFloat32(t,i),4];break;case"float64":case"double":o=[e.getFloat64(t,i),8];break;default:console.log("Unsupported type")}return o}var wY={faceTextureTolerance:1e-6,duplicatePointsForFaceTexture:!0};function wZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wY,n),eE.obj(e,t),eE.get(e,t,["url","baseURL","duplicatePointsForFaceTexture","faceTextureTolerance"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkPLYReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),t.compression=i.compression,e.loadData({progressCallback:i.progressCallback,binary:!!i.binary})},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.compression,a=t.progressCallback;return i.binary?t.dataAccessHelper.fetchBinary(n,{compression:o,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:o,progressCallback:a})}(t.url,n);return i.then(e.parse),i},e.parse=function(t){"string"==typeof t?e.parseAsText(t):e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(n){if(n&&n!==t.parseData){e.modified();var i=n;n instanceof ArrayBuffer&&(i=xo.arrayBufferToString(n));var o=wW(i);if(o.format!==wj){t.parseData=n;for(var a,s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},l="binary_little_endian"===o.format,u=n instanceof ArrayBuffer?n:n.buffer,c=new DataView(u,o.headerLength),d=0,f=0;f<o.elements.length;f++)for(var p=0;p<o.elements[f].count;p++){d+=(a=function(e,t,n,i){for(var o,a={},s=0,l=0;l<n.length;l++)if("list"===n[l].type){var u=[],c=(o=wX(e,t+s,n[l].countType,i))[0];s+=o[1];for(var d=0;d<c;d++)o=wX(e,t+s,n[l].itemType,i),u.push(o[0]),s+=o[1];a[n[l].name]=u}else o=wX(e,t+s,n[l].type,i),a[n[l].name]=o[0],s+=o[1];return[a,s]}(c,d,o.elements[f].properties,l))[1];var h=a[0];wK(s,o.elements[f].name,h)}var m=wH(s,o.elements,t.faceTextureTolerance,t.duplicatePointsForFaceTexture);t.output[0]=m}else e.parseAsText(i)}},e.parseAsText=function(n){if(n&&n!==t.parseData){e.modified(),t.parseData=n;var i=n;n instanceof ArrayBuffer&&(i=xo.arrayBufferToString(n));var o=wW(i);if(o.format!==wj)e.parseAsArrayBuffer(n);else{var a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},s=wz.exec(i),l="";null!==s&&(l=s[1]);for(var u=l.split("\n"),c=0,d=0,f=0;f<u.length;f++){var p=u[f];if(""!==(p=p.trim())){d>=o.elements[c].count&&(c++,d=0);var h=function(e,t){for(var n=t.split(/\s+/),i={},o=0;o<e.length;o++)if("list"===e[o].type){for(var a=[],s=wq(n.shift(),e[o].countType),l=0;l<s;l++)a.push(wq(n.shift(),e[o].itemType));i[e[o].name]=a}else i[e[o].name]=wq(n.shift(),e[o].type);return i}(o.elements[c].properties,p);wK(a,o.elements[c].name,h),d++}}var m=wH(a,o.elements,t.faceTextureTolerance,t.duplicatePointsForFaceTexture);t.output[0]=m}}},e.requestData=function(n,i){e.parse(t.parseData)},t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var wJ={extend:wZ,newInstance:eE.newInstance(wZ,"vtkPLYReader")};function wQ(e,t,n,i,o,a,s){try{var l=e[a](s),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(i,o)}function w$(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){wQ(a,i,o,s,l,"next",e)}function l(e){wQ(a,i,o,s,l,"throw",e)}s(void 0)})}}var w0=n(4756),w1=n.n(w0),w2=eE.vtkErrorMacro,w3=null;function w4(){return(w4=w$(w1().mark(function e(t){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({});case 2:w3=e.sent;case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var w5={};function w6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,w5,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkDracoReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),t.compression=i.compression,e.loadData({progressCallback:i.progressCallback,binary:!!i.binary})},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.compression,a=t.progressCallback;return i.binary?t.dataAccessHelper.fetchBinary(n,{compression:o,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:o,progressCallback:a})}(t.url,n);return i.then(e.parse),i},e.parse=function(t){e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(n){if(n&&n!==t.parseData){e.modified(),t.parseData=n;var i,o=new Int8Array(n),a=new w3.Decoder,s=new w3.DecoderBuffer;if(s.Init(o,o.length),a.GetEncodedGeometryType(s)===w3.TRIANGULAR_MESH){i=new w3.Mesh;var l=a.DecodeBufferToMesh(s,i);if(l.ok()){var u=function(e,t){var n,i,o,a,s=(i=4*(n=3*t.num_faces()),o=w3._malloc(i),e.GetTrianglesUInt32Array(t,i,o),a=new Uint32Array(w3.HEAPF32.buffer,o,n).slice(),w3._free(o),a),l=s.length-2,u=nQ.newInstance();u.allocate(4*s.length/3);for(var c=0;c<l;c+=3){var d=s.slice(c,c+3);u.insertNextCell(d)}var f=lC.newInstance({polys:u}),p={points:"POSITION",normals:"NORMAL",scalars:"COLOR",tcoords:"TEX_COORD"};if(Object.keys(p).forEach(function(n){var i=Float32Array,o=e.GetAttributeId(t,w3[p[n]]);if(-1!==o){var a,s,l,u,c,d,h=e.GetAttribute(t,o),m=(a=h.num_components(),l=(s=t.num_points()*a)*i.BYTES_PER_ELEMENT,u=function(e){switch(e){case Float32Array:return w3.DT_FLOAT32;case Int8Array:return w3.DT_INT8;case Int16Array:return w3.DT_INT16;case Int32Array:return w3.DT_INT32;case Uint8Array:return w3.DT_UINT8;case Uint16Array:return w3.DT_UINT16;case Uint32Array:return w3.DT_UINT32;default:return w3.DT_FLOAT32}}(i),c=w3._malloc(l),e.GetAttributeDataArrayForAllPoints(t,h,u,l,c),d=new i(w3.HEAPF32.buffer,c,s).slice(),w3._free(c),{name:n,array:d,itemSize:a}),g=f.getPointData();switch(n){case"points":f.getPoints().setData(m.array,m.itemSize);break;case"normals":g.setNormals(nH.newInstance({numberOfComponents:m.itemSize,values:m.array,name:"Normals"}));break;case"scalars":g.setScalars(nH.newInstance({numberOfComponents:m.itemSize,values:m.array,name:"Scalars"}));break;case"tcoords":g.setTCoords(nH.newInstance({numberOfComponents:m.itemSize,values:m.array,name:"TCoords"}))}}}),!f.getPointData().getNormals()){var h=uK.newInstance();return h.setInputData(f),h.setComputePointNormals(!0),h.getOutputData()}return f}(a,i);w3.destroy(i),w3.destroy(s),w3.destroy(a),t.output[0]=u}else w2("Could not decode Draco file: ".concat(l.error_msg()))}else w2("Wrong geometry type, expected mesh, got point cloud.")}},e.requestData=function(){e.parse(t.parseData)},t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var w8={extend:w6,newInstance:eE.newInstance(w6,"vtkDracoReader"),setDracoDecoder:function(e){return w4.apply(this,arguments)},setWasmBinary:function(e,t){var n={};return new Promise(function(i,o){n.wasmBinaryFile=t;var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200===a.status?(n.wasmBinary=a.response,Promise.resolve(window.DracoDecoderModule(n)).then(function(e){w3=e,i(!0)},o)):o(Error("WASM binary could not be loaded: ".concat(a.statusText)))},a.send(null)})},getDracoDecoder:function(){return w3}},w9="binary";function w7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Ae=eE.vtkErrorMacro;function At(e,t,n){return e.setFloat32(t,n.toPrecision(6),!0),t+4}function An(e,t,n){var i=At(e,t,n[0]);return i=At(e,i,n[1]),At(e,i,n[2])}function Ar(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w9,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;o===w9?(n=0,i=null,s={init:function(e){i=new DataView(new ArrayBuffer(84+50*e.getPolys().getData().length/4))},writeHeader:function(e){n+=80,i.setUint32(n,e.getNumberOfCells(),!0),n+=4},writeTriangle:function(e,t,o,a){n=An(i,n,a),n=An(i,n,e),n=An(i,n,t),n=An(i,n,o)+2},writeFooter:function(e){},getOutputData:function(){return i}}):"ascii"===o?(t="",s={init:function(e){},writeHeader:function(e){t+="solid ascii\n"},writeTriangle:function(e,n,i,o){t+=" facet normal ".concat(o[0].toPrecision(6)," ").concat(o[1].toPrecision(6)," ").concat(o[2].toPrecision(6),"\n"),t+="  outer loop\n",t+="   vertex ".concat(e[0].toPrecision(6)," ").concat(e[1].toPrecision(6)," ").concat(e[2].toPrecision(6),"\n"),t+="   vertex ".concat(n[0].toPrecision(6)," ").concat(n[1].toPrecision(6)," ").concat(n[2].toPrecision(6),"\n"),t+="   vertex ".concat(i[0].toPrecision(6)," ").concat(i[1].toPrecision(6)," ").concat(i[2].toPrecision(6),"\n"),t+="  endloop\n",t+=" endfacet\n"},writeFooter:function(e){t+="endsolid\n"},getOutputData:function(){return t}}):Ae("Invalid format type"),s.init(e),s.writeHeader(e);var l=e.getPolys().getData(),u=e.getPoints().getData(),c=e.getStrips()?e.getStrips().getData():null,d=[],f=[],p=[],h=[];if(c&&c.length>0)throw Error("Unsupported strips");for(var m=0;m<l.length;)l[m++]&&(f=[u[3*l[m]],u[3*l[m]+1],u[3*l[m++]+2]],p=[u[3*l[m]],u[3*l[m]+1],u[3*l[m++]+2]],h=[u[3*l[m]],u[3*l[m]+1],u[3*l[m++]+2]],a&&(rO(f,f,a),rO(p,p,a),rO(h,h,a)),ls.computeNormal(f,p,h,d),s.writeTriangle(f,p,h,d));return s.writeFooter(e),s.getOutputData()}var Ai={format:w9,transform:null};function Ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ai,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["format","transform"]),t.classHierarchy.push("vtkSTLWriter"),e.requestData=function(e,n){var i=e[0];i&&"vtkPolyData"===i.getClassName()?n[0]=Ar(i,t.format,t.transform):Ae("Invalid or missing input")}}var Aa=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w7(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(Ao,"vtkSTLWriter"),extend:Ao},{writeSTL:Ar}),As="ascii",Al=["u","v"];function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Ac=eE.vtkErrorMacro,Ad=eE.vtkWarningMacro,Af=function(e,t,n,i,o,a,s,l,u,c,d,f){i.unshift("VTK.js generated PLY File"),o&&i.push("TextureFile ".concat(o));var p=i.map(function(e){return"comment ".concat(e)}).join("\n"),h=["ply","format ".concat(t!==As?n?"binary_little_endian":"binary_big_endian":"ascii"," 1.0"),"".concat(p),"element vertex ".concat(s),"property float x","property float y","property float z"];return u&&h.push("property float nx","property float ny","property float nz"),c&&h.push("property float ".concat(a[0]),"property float ".concat(a[1])),d&&h.push("property uchar red","property uchar green","property uchar blue"),f&&h.push("element face ".concat(l),"property list uchar int vertex_indices"),h.push("end_header\n"),h.join("\n")};function Ap(e,t,n,i,o,a,s,l,u,c,d){var f=e.getPoints(),p=e.getPolys();null!==f&&null!==p||Ac("No data to write!");var h,m,g,v,y,b=null;"binary"===t?b={init:function(e){},writeHeader:function(e,t,n,i,o,a,s,l,u,c,d,f){var p=e.getPoints().getNumberOfPoints();y=n;var h=f?13*l:0,b=p*(12+12*!!u+8*!!c+3*!!d),x=Af(0,t,n,i,o,a,s,l,u,c,d,f),w=(new TextEncoder).encode(x);new Uint8Array((m=new DataView(new ArrayBuffer(w.length+b+h))).buffer).set(w,0),v=(g=w.length)+b},writeVertice:function(e,t,n,i,o,a,s,l,u,c,d){m.setFloat32(g,e,y),g+=4,m.setFloat32(g,t,y),g+=4,m.setFloat32(g,n,y),g+=4,null!==i&&null!==o&&null!==a&&(m.setFloat32(g,i,y),g+=4,m.setFloat32(g,o,y),g+=4,m.setFloat32(g,a,y),g+=4),null!==s&&null!==l&&(m.setFloat32(g,s,y),g+=4,m.setFloat32(g,l,y),g+=4),null!==u&&null!==c&&null!==d&&(m.setUint8(g,u),g+=1,m.setUint8(g,c),g+=1,m.setUint8(g,d),g+=1)},writeFace:function(e,t,n,i){m.setUint8(v,e),v+=1,m.setUint32(v,t,y),v+=4,m.setUint32(v,n,y),v+=4,m.setUint32(v,i,y),v+=4},writeFooter:function(e){},getOutputData:function(){return m}}:t===As?(h="",b={init:function(e){},writeHeader:function(e,t,n,i,o,a,s,l,u,c,d,f){h+=Af(0,t,n,i,o,a,s,l,u,c,d,f)},writeVertice:function(e,t,n,i,o,a,s,l,u,c,d){h+="".concat(e," ").concat(t," ").concat(n),null!==i&&null!==o&&null!==a&&(h+=" ".concat(i," ").concat(o," ").concat(a)),null!==s&&null!==l&&(h+=" ".concat(s," ").concat(l)),null!==u&&null!==c&&null!==d&&(h+=" ".concat(u," ").concat(c," ").concat(d)),h+="\n"},writeFace:function(e,t,n,i){h+="".concat(e," ").concat(t," ").concat(n," ").concat(i,"\n")},writeFooter:function(e){},getOutputData:function(){return h}}):Ac("Invalid type format");var x=a;void 0===a&&(Ad("Invalid TextureCoordinatesName value, fallback to default uv values"),x=Al),b.init(e);var w=f.getNumberOfPoints(),A=p.getNumberOfCells(),C=e.getPointData().getTCoords();u=null!==C;var S=e.getPointData().getScalars();c=null!==S,b.writeHeader(e,t,+!n,i,o,x,w,A,l,u,c,d);for(var _=e.getPointData().getNormals(),T=0;T<w;T++){var O=f.getPoint(T),P=O[0].toPrecision(6)/1,M=O[1].toPrecision(6)/1,E=O[2].toPrecision(6)/1,D=null,I=null,k=null,N=null,R=null,B=null,L=null,F=null;C&&(N=C.getData()[2*T],R=C.getData()[2*T+1]),S&&(B=S.getData()[3*T],L=S.getData()[3*T+1],F=S.getData()[3*T+2]),_&&(D=_.getData()[3*T],I=_.getData()[3*T+1],k=_.getData()[3*T+2]),b.writeVertice(P,M,E,D,I,k,N,R,B,L,F)}for(var V=p.getData(),j=0,G=V.length;j<G;j+=4)b.writeFace(V[j+0],V[j+1],V[j+2],V[j+3]);return b.writeFooter(e),b.getOutputData()}var Ah={format:As,dataByteOrder:0,headerComments:[],textureFileName:null,textureCoordinatesName:Al,transform:null,withNormals:!0,withUVs:!0,withColors:!0,withIndices:!0};function Am(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ah,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.setGet(e,t,["format","dataByteOrder","headerComments","textureFileName","textureCoordinatesName","transform","withNormals","withUVs","withColors","withIndices"]),t.classHierarchy.push("vtkPLYWriter"),e.requestData=function(e,n){var i=e[0];i&&"vtkPolyData"===i.getClassName()?n[0]=Ap(i,t.format,t.dataByteOrder,t.headerComments,t.textureFileName,t.textureCoordinatesName,t.transform,t.withNormals,t.withUVs,t.withColors,t.withIndices):Ac("Invalid or missing input")}}var Ag=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(Am,"vtkPLYWriter"),extend:Am},{writePLY:Ap}),Av="glTF",Ay={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ab={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ax={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Aw={magFilter:9728,minFilter:9987,wrapS:10497,wrapT:10497},AA={NORMAL:"normal",POSITION:"position",TEXCOORD_0:"texcoord0",TEXCOORD_1:"texcoord1",WEIGHTS_0:"weight",JOINTS_0:"joint",COLOR_0:"color",TANGENT:"tangent"},AC="OPAQUE",AS=eE.vtkWarningMacro,A_=eE.vtkErrorMacro;function AT(e,t){if("string"!=typeof e||""===e)return"";try{if(e.startsWith("data:")||e.startsWith("blob:"))return e;var n=new URL(t);return n.pathname.includes(".")||n.pathname.endsWith("/")||(n.pathname+="/"),e.startsWith("http:")||e.startsWith("https:")||e.startsWith("//")||e.startsWith("/"),new URL(e,n).href}catch(e){return A_("Error resolving URL:",e),""}}function AO(e){return AP.apply(this,arguments)}function AP(){return(AP=w$(w1().mark(function e(t){var n,i;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.bufferView){e.next=6;break}return n=new Blob([t.bufferView.data],{type:t.mimeType}),e.next=4,createImageBitmap(n,{colorSpaceConversion:"none",imageOrientation:"flipY"});case 4:return i=e.sent,e.abrupt("return",i);case 6:if(!t.uri){e.next=9;break}return AS("Falling back to image uri",t.uri),e.abrupt("return",new Promise(function(e,n){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){e(i)},i.onerror=n,i.src=t.uri}));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function AM(e,t,n){var i=xQ.newInstance();if(t)if("wrapS"in t&&"wrapT"in t||"minFilter"in t&&"magFilter"in t){33071===t.wrapS||33071===t.wrapT?(i.setRepeat(!1),i.setEdgeClamp(!0)):10497===t.wrapS||10497===t.wrapT?(i.setRepeat(!0),i.setEdgeClamp(!1)):AS("Mirrored texture wrapping is not supported!");var o=[9729,9985,9986,9987];(o.includes(t.minFilter)||o.includes(t.magFilter))&&i.setInterpolate(!0)}else i.setMipLevel(8),i.setInterpolate(!0),i.setEdgeClamp(!0);return i.setImageBitmap(e),i}function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function AD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AE(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var AI=eE.vtkDebugMacro,Ak=eE.vtkWarningMacro,AN=function(){var e,t,n;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(this,i);var n=e.json,o=e.baseUri;this.glTF=e,this.options=t,this.baseUri=void 0===o?"":o,this.json=n,this.extensions=n.extensions||{},this.extensionsUsed=n.extensionsUsed||[]}return I(i,[{key:"parse",value:(t=w$(w1().mark(function e(){var t,n;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.json.buffers||[],this.buffers=Array(t.length).fill(null),n=this.json.images||[],this.images=Array(n.length).fill({}),e.next=6,this.loadBuffers();case 6:return e.next=8,this.loadImages();case 8:return this.resolveTree(),e.abrupt("return",this.glTF.json);case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"resolveTree",value:function(){var e,t,n,i,o,a,s,l,u,c,d,f,p=this;this.json.scenes=null==(e=this.json.scenes)?void 0:e.map(function(e,t){return p.resolveScene(e,t)}),this.json.cameras=null==(t=this.json.cameras)?void 0:t.map(function(e,t){return p.resolveCamera(e,t)}),this.json.bufferViews=null==(n=this.json.bufferViews)?void 0:n.map(function(e,t){return p.resolveBufferView(e,t)}),this.json.images=null==(i=this.json.images)?void 0:i.map(function(e,t){return p.resolveImage(e,t)}),this.json.samplers=null==(o=this.json.samplers)?void 0:o.map(function(e,t){return p.resolveSampler(e,t)}),this.json.textures=null==(a=this.json.textures)?void 0:a.map(function(e,t){return p.resolveTexture(e,t)}),this.json.accessors=null==(s=this.json.accessors)?void 0:s.map(function(e,t){return p.resolveAccessor(e,t)}),this.json.materials=null==(l=this.json.materials)?void 0:l.map(function(e,t){return p.resolveMaterial(e,t)}),this.json.meshes=null==(u=this.json.meshes)?void 0:u.map(function(e,t){return p.resolveMesh(e,t)}),this.json.nodes=null==(c=this.json.nodes)?void 0:c.map(function(e,t){return p.resolveNode(e,t)}),this.json.skins=null==(d=this.json.skins)?void 0:d.map(function(e,t){return p.resolveSkin(e,t)}),this.json.animations=null==(f=this.json.animations)?void 0:f.map(function(e,t){return p.resolveAnimation(e,t)})}},{key:"get",value:function(e,t){if("object"===g(t))return t;var n=this.json[e]&&this.json[e][t];return n||Ak("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),n}},{key:"resolveScene",value:function(e,t){var n=this;return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(function(e){return n.get("nodes",e)}),e}},{key:"resolveNode",value:function(e,t){var n,i,o=this;return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(function(e){return o.get("nodes",e)})),void 0!==e.mesh?e.mesh=this.get("meshes",e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce(function(e,t){var n=o.get("meshes",t);return e.id=n.id,e.primitives=e.primitives.concat(n.primitives),e},{primitives:[]})),void 0!==e.camera&&(e.camera=this.get("cameras",e.camera)),void 0!==e.skin&&(e.skin=this.get("skins",e.skin)),null!=(n=e.extensions)&&n.KHR_lights_punctual&&(e.extensions.KHR_lights_punctual.light=null==(i=this.extensions)?void 0:i.KHR_lights_punctual.lights[e.extensions.KHR_lights_punctual.light]),e}},{key:"resolveSkin",value:function(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.get("accessors",e.inverseBindMatrices),e}},{key:"resolveMesh",value:function(e,t){var n=this;return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(function(e,t){var i,o=e.attributes;for(var a in e.name="primitive-".concat(t),e.attributes={},o){var s=AA[a];e.attributes[s]=n.get("accessors",o[a])}if(void 0!==e.indices&&(e.indices=n.get("accessors",e.indices)),void 0!==e.material&&(e.material=n.get("materials",e.material)),void 0===e.mode&&(e.mode=4),null!=(i=e.extensions)&&i.KHR_draco_mesh_compression){AI("Using Draco mesh compression");var l=n.get("bufferViews",e.extensions.KHR_draco_mesh_compression.bufferView);e.extensions.KHR_draco_mesh_compression.bufferView=l.data}return e})),e}},{key:"resolveMaterial",value:function(e,t){if(e.id=e.id||"material-".concat(t),void 0===e.alphaMode&&(e.alphaMode=AC),void 0===e.doubleSided&&(e.doubleSided=!1),void 0===e.alphaCutoff&&(e.alphaCutoff=.5),e.normalTexture&&(e.normalTexture=AD({},e.normalTexture),e.normalTexture.texture=this.get("textures",e.normalTexture.index)),e.occlusionTexture&&(e.occlusionTexture=AD({},e.occlusionTexture),e.occlusionTexture.texture=this.get("textures",e.occlusionTexture.index)),e.emissiveTexture&&(e.emissiveTexture=AD({},e.emissiveTexture),e.emissiveTexture.texture=this.get("textures",e.emissiveTexture.index)),e.emissiveFactor?e.emissiveFactor=e.emissiveFactor[0]:e.emissiveFactor=+!!e.emissiveTexture,e.pbrMetallicRoughness){e.pbrMetallicRoughness=AD({},e.pbrMetallicRoughness);var n=e.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture=AD({},n.baseColorTexture),n.baseColorTexture.texture=this.get("textures",n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture=AD({},n.metallicRoughnessTexture),n.metallicRoughnessTexture.texture=this.get("textures",n.metallicRoughnessTexture.index))}else e.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};return e}},{key:"getValueFromInterleavedBuffer",value:function(e,t,n,i,o){for(var a=new Uint8Array(o*i),s=0;s<o;s++){var l=t+s*n;a.set(new Uint8Array(e.arrayBuffer.slice(l,l+i)),s*i)}return a.buffer}},{key:"resolveAccessor",value:function(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.get("bufferViews",e.bufferView)),e.bytesPerComponent=Ab[e.componentType],e.components=Ay[e.type],e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var n,i,o,a,s=e.bufferView.buffer,l=(e.bufferView,n=Ax[e.componentType],i=Ay[e.type],o=Ab[e.componentType],{ArrayType:n,length:e.count*i,byteLength:e.count*i*o}).ArrayType,u=(e.bufferView.byteOffset||0)+s.byteOffset+(e.byteOffset||0);a=e.bufferView.byteStride?e.bufferView.byteStride===e.bytesPerElement?new l(s.arrayBuffer,u,e.count*e.components):new l(this.getValueFromInterleavedBuffer(s,u,e.bufferView.byteStride,e.bytesPerElement,e.count)):new l(s.arrayBuffer,u,e.count*e.components),e.value=a}return e}},{key:"resolveTexture",value:function(e,t){var n=this;return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.get("samplers",e.sampler):Aw,e.source=this.get("images",e.source),void 0!==e.extensions&&Object.keys(e.extensions).forEach(function(t){var i=e.extensions[t];switch(t){case"KHR_texture_basisu":case"EXT_texture_webp":case"EXT_texture_avif":e.source=n.get("images",i.source);break;default:Ak("Unhandled extension: ".concat(t))}}),e}},{key:"resolveSampler",value:function(e,t){for(var n in e.id=e.id||"sampler-".concat(t),Object.hasOwn(e,"wrapS")||(e.wrapS=10497),Object.hasOwn(e,"wrapT")||(e.wrapT=10497),Object.hasOwn(e,"minFilter")||(e.minFilter=9987),Object.hasOwn(e,"magFilter")||(e.magFilter=9728),e.parameters={},e){var i={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243}[n];void 0!==i&&(e.parameters[i]=e[n])}return e}},{key:"resolveImage",value:function(e,t){return e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.get("bufferViews",e.bufferView)),e}},{key:"resolveBufferView",value:function(e,t){e.id=e.id||"bufferView-".concat(t);var n=e.buffer;e.buffer=this.buffers[n];var i=this.buffers[n].arrayBuffer,o=this.buffers[n].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),e.data=new Uint8Array(i,o,e.byteLength),e}},{key:"resolveCamera",value:function(e,t){return e.id=e.id||"camera-".concat(t),e}},{key:"resolveAnimation",value:function(e,t){var n=this;return e.id=e.id||"animation-".concat(t),e.samplers.map(function(e){return e.input=n.get("accessors",e.input).value,e.output=n.get("accessors",e.output).value,e}),e}},{key:"loadBuffers",value:function(){var e=this;return Promise.all(this.json.buffers.map(function(t,n){return e.loadBuffer(t,n).then(function(){delete t.uri})}))}},{key:"loadBuffer",value:(e=w$(w1().mark(function e(t,n){var i,o,a;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,!t.uri){e.next=12;break}return AI("Loading uri",t.uri),o=AT(t.uri,this.options.baseUri),e.next=6,fetch(o);case 6:return a=e.sent,e.next=9,a.arrayBuffer();case 9:i=e.sent,e.next=13;break;case 12:this.glTF.glbBuffers&&(i=this.glTF.glbBuffers[n]);case 13:this.buffers[n]={arrayBuffer:i,byteOffset:0,byteLength:i.byteLength};case 14:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"loadImages",value:function(){var e=this,t=this.json.images||[],n=[];return new Promise(function(i,o){for(var a=function(i){n.push(Promise.resolve(e.loadImage(t[i],i).then(function(){AI("Texture loaded ",t[i])})))},s=0;s<t.length;++s)a(s);Promise.all(n).then(function(){return i(e.images)})})}},{key:"loadImage",value:(n=w$(w1().mark(function e(t,n){var i,o,a,s;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.uri){e.next=13;break}return AI("Loading texture",t.uri),o=AT(t.uri,this.options.baseUri),e.next=5,fetch(o);case 5:return a=e.sent,e.next=8,a.arrayBuffer();case 8:i=e.sent,t.uri=o,t.bufferView={data:i},e.next=14;break;case 13:t.bufferView&&(s=this.get("bufferViews",t.bufferView),this.get("buffers",s.buffer),this.glTF.glbBuffers&&(i=this.glTF.glbBuffers[s.buffer].slice(s.byteOffset,s.byteOffset+s.byteLength)),t.bufferView={data:i});case 14:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),i}(),AR=eE.vtkWarningMacro,AB=eE.vtkWarningMacro,AL=eE.vtkDebugMacro;function AF(){return(AF=w$(w1().mark(function e(t,n){var i,o;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new AN(t,n),e.next=3,i.parse();case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function AV(){return(AV=w$(w1().mark(function e(t){var n,i,o,a,s,l,u,c;return w1().wrap(function(e){for(var d,f;;)switch(e.prev=e.next){case 0:if(t&&t.attributes){e.next=3;break}return AB("Primitive has no position data, skipping"),e.abrupt("return",null);case 3:if(null==(n=t.extensions)||!n.KHR_draco_mesh_compression){e.next=5;break}return e.abrupt("return",(d=t.extensions.KHR_draco_mesh_compression,f=void 0,(f=w8.newInstance()).parse(d.bufferView),f.getOutputData()));case 5:if(i=lC.newInstance(),o=nQ.newInstance(),a=i.getPointData(),Object.entries(t.attributes).forEach(function(){var e=w$(w1().mark(function e(n){var o,s,l,u,c,d,f,p,h,m,g;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=(o=b(n,2))[0],o[1],e.t0=s,e.next=e.t0===AA.POSITION?4:e.t0===AA.NORMAL?7:e.t0===AA.COLOR_0?10:e.t0===AA.TEXCOORD_0?13:e.t0===AA.TEXCOORD_1?18:e.t0===AA.TANGENT?22:26;break;case 4:return l=t.attributes.position.value,i.getPoints().setData(l,t.attributes.position.component),e.abrupt("break",27);case 7:return u=t.attributes.normal.value,a.setNormals(nH.newInstance({name:"Normals",values:u,numberOfComponents:t.attributes.normal.components})),e.abrupt("break",27);case 10:return c=t.attributes.color.value,a.setScalars(nH.newInstance({name:"Scalars",values:c,numberOfComponents:t.attributes.color.components})),e.abrupt("break",27);case 13:return d=t.attributes.texcoord0.value,f=nH.newInstance({name:"TEXCOORD_0",values:d,numberOfComponents:t.attributes.texcoord0.components}),a.addArray(f),a.setActiveTCoords(f.getName()),e.abrupt("break",27);case 18:return p=t.attributes.texcoord1.value,h=nH.newInstance({name:"TEXCOORD_1",values:p,numberOfComponents:t.attributes.texcoord1.components}),a.addArray(h),e.abrupt("break",27);case 22:return m=t.attributes.tangent.value,g=nH.newInstance({name:"Tangents",values:m,numberOfComponents:t.attributes.tangent.components}),a.addArray(g),e.abrupt("break",27);case 26:AB("Unhandled attribute: ".concat(s));case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),null==t.indices){e.next=20;break}l=(s=t.indices.value).length-2,e.t0=t.mode,e.next=3===e.t0||5===e.t0||2===e.t0?16:18;break;case 16:return AB("GL_LINE_LOOP not implemented"),e.abrupt("break",20);case 18:for(o.allocate(4*s.length/3),u=0;u<l;u+=3)c=s.slice(u,u+3),o.insertNextCell(c);case 20:e.t1=t.mode,e.next=4===e.t1||6===e.t1?23:1===e.t1||3===e.t1||2===e.t1?25:0===e.t1?27:5===e.t1?29:31;break;case 23:return i.setPolys(o),e.abrupt("break",33);case 25:return i.setLines(o),e.abrupt("break",33);case 27:return i.setVerts(o),e.abrupt("break",33);case 29:return i.setStrips(o),e.abrupt("break",33);case 31:o.delete(),AB("Invalid primitive draw mode. Ignoring connectivity.");case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Aj(e,t,n){return AG.apply(this,arguments)}function AG(){return(AG=w$(w1().mark(function e(t,n,i){var o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=1,a=1,s=n.emissiveFactor,l=i.getProperty(),null==(u=n.pbrMetallicRoughness)){e.next=61;break}if(null==u||!u.metallicFactor||(null==u?void 0:u.metallicFactor)<=0||(null==u?void 0:u.metallicFactor)>=1?AL("Invalid material.pbrMetallicRoughness.metallicFactor value. Using default value instead."):o=u.metallicFactor,null==u||!u.roughnessFactor||(null==u?void 0:u.roughnessFactor)<=0||(null==u?void 0:u.roughnessFactor)>=1?AL("Invalid material.pbrMetallicRoughness.roughnessFactor value. Using default value instead."):a=u.roughnessFactor,null!=(c=u.baseColorFactor)&&(l.setDiffuseColor(c[0],c[1],c[2]),l.setOpacity(c[3])),l.setMetallic(o),l.setRoughness(a),l.setEmission(s),!u.baseColorTexture){e.next=23;break}return u.baseColorTexture.extensions,null!=(d=u.baseColorTexture.texture).extensions&&Object.keys(d.extensions).forEach(function(e){AB("Unhandled extension: ".concat(e))}),f=d.sampler,e.next=20,AO(d.source);case 20:p=AM(e.sent,f),l.setDiffuseTexture(p);case 23:if(!u.metallicRoughnessTexture){e.next=32;break}return u.metallicRoughnessTexture.extensions,m=(h=u.metallicRoughnessTexture.texture).sampler,e.next=29,AO(h.source);case 29:g=AM(e.sent,m),l.setRMTexture(g);case 32:if(!n.occlusionTexture){e.next=41;break}return n.occlusionTexture.extensions,y=(v=n.occlusionTexture.texture).sampler,e.next=38,AO(v.source);case 38:b=AM(e.sent,y),l.setAmbientOcclusionTexture(b);case 41:if(!n.emissiveTexture){e.next=51;break}return n.emissiveTexture.extensions,w=(x=n.emissiveTexture.texture).sampler,e.next=47,AO(x.source);case 47:A=AM(e.sent,w),l.setEmissionTexture(A),null!=n.emissiveTexture.texCoord&&i.getMapper().getInputData().getPointData().setActiveTCoords("TEXCOORD_".concat(n.emissiveTexture.texCoord));case 51:if(!n.normalTexture){e.next=61;break}return n.normalTexture.extensions,S=(C=n.normalTexture.texture).sampler,e.next=57,AO(C.source);case 57:_=AM(e.sent,S),l.setNormalTexture(_),null!=n.normalTexture.scale&&l.setNormalStrength(n.normalTexture.scale);case 61:null!=n.extensions&&Object.keys(n.extensions).forEach(function(e){var t,i=n.extensions[e];switch(e){case"KHR_materials_unlit":l.setLighting(!0);break;case"KHR_materials_ior":l.setBaseIOR(i.ior);break;case"KHR_materials_specular":(t=l).setSpecular(i.specularFactor),t.setSpecularColor(i.specularColorFactor);break;default:AB("Unhandled extension: ".concat(e))}}),n.alphaMode!==AC&&i.setForceTranslucent(!0),l.setBackfaceCulling(!n.doubleSided);case 64:case"end":return e.stop()}},e)}))).apply(this,arguments)}function AU(){return(AU=w$(w1().mark(function e(t){var n,i,o;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=mH.newInstance(),(i=gd.newInstance()).setColorModeToDirectScalars(),i.setInterpolateScalarsBeforeMapping(!0),n.setMapper(i),n.setUserMatrix(t),o=lC.newInstance(),i.setInputData(o),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Az(){return(Az=w$(w1().mark(function e(t,n,i){var o,a,s;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=mH.newInstance(),(a=gd.newInstance()).setColorModeToDirectScalars(),a.setInterpolateScalarsBeforeMapping(!0),o.setMapper(a),o.setUserMatrix(i),e.next=8,function(e){return AV.apply(this,arguments)}(n);case 8:if(s=e.sent,a.setInputData(s),null==n.material){e.next=13;break}return e.next=13,Aj(t,n.material,o);case 13:return null!=n.extensions&&function(e,t,n){Object.keys(t).forEach(function(i){var o=t[i];switch(i){case"KHR_materials_variants":n.variantMappings.set(e,o.mappings);break;case"KHR_draco_mesh_compression":break;default:AB("Unhandled extension: ".concat(i))}})}("".concat(n.name),n.extensions,t),e.abrupt("return",o);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function AW(e){return AL("Creating animation:",e),{name:e.name,channels:e.channels,samplers:e.samplers,getChannelByTargetNode:function(e){return this.channels.filter(function(t){return t.target.node===e})}}}function AH(e,t){return Aq.apply(this,arguments)}function Aq(){return(Aq=w$(w1().mark(function e(t,n){var i,o,a,s,l,u=arguments;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]?u[3]:oa(),t.transform=function(e){var t,n,i,o=null!=(t=e.translation)?t:n9(),a=null!=(n=e.rotation)?n:sN(),s=null!=(i=e.scale)?i:rt(1,1,1);return null!=e.matrix?os(e.matrix):oN(oa(),a,o,s)}(t),s=og(oa(),a,t.transform),null==t.mesh){e.next=12;break}return e.next=7,function(e){return AU.apply(this,arguments)}(s);case 7:return l=e.sent,o&&l.setParentProp(o),n.actors.set("".concat(t.id),l),e.next=12,Promise.all(t.mesh.primitives.map(function(){var e=w$(w1().mark(function e(i,o){var a;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t,n){return Az.apply(this,arguments)}(n,i,s);case 2:(a=e.sent).setParentProp(l),n.actors.set("".concat(t.id,"_").concat(i.name),a);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 12:if(null!=(i=t.extensions)&&i.KHR_lights_punctual&&function(e,t,n){var i=e.light,o=i.color,a=i.intensity,s=i.range,l=i.spot,u=i.type,c=yI.newInstance({color:o||[1,1,1],intensity:a||1});switch(c.setTransformMatrix(t),s>0&&c.setAttenuationValues(1,0,1/(s*s*.01)),u){case"directional":c.setPositional(!1);break;case"point":c.setPositional(!0),c.setConeAngle(90);break;case"spot":c.setPositional(!0),c.setConeAngle(eK(l.outerConeAngle));break;default:AR("Unsupported light type: ".concat(u))}n.lights.set(i.name,c)}(t.extensions.KHR_lights_punctual,t.transform,n),!(t.children&&Array.isArray(t.children)&&t.children.length>0)){e.next=16;break}return e.next=16,Promise.all(t.children.map(function(){var e=w$(w1().mark(function e(i){var o;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.actors.get(t.id),e.next=3,AH(i,n,o,s);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function AK(){return(AK=w$(w1().mark(function e(t){var n,i,o,a,s,l;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.animations=null==(n=t.glTFTree.animations)?void 0:n.map(AW),Object.keys((null==(i=t.glTFTree)?void 0:i.extensions)||[]).forEach(function(e){var n=t.glTFTree.extensions[e];switch(e){case"KHR_materials_variants":t.variants=n.variants.map(function(e){return e.name});break;case"KHR_draco_mesh_compression":break;default:AB("Unhandled extension: ".concat(e))}}),l=null!=(o=t.sceneId)?o:t.glTFTree.scene,null==(a=t.glTFTree.scenes)||!a.length||null==(s=t.glTFTree.scenes[l])||!s.nodes){e.next=9;break}return e.next=7,Promise.all(t.glTFTree.scenes[l].nodes.map(function(){var e=w$(w1().mark(function e(n){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,AH(n,t);case 3:e.next=6;break;case 5:AB("Node not found in glTF.nodes");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:e.next=10;break;case 9:AB("No valid scenes found in the glTF data");case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var AX=function(e){if(e.byteLength<12)throw Error("Invalid GLB: File too small");var t=new DataView(e,0,12),n=new Uint8Array(e,0,4),i=xo.arrayBufferToString(n),o=t.getUint32(4,!0),a=t.getUint32(8,!0);if(i!==Av)throw Error("Unsupported glTF-Binary header.");if(o<2)throw Error("Unsupported legacy binary file detected.");if(a>e.byteLength)throw Error("Invalid GLB: Declared length exceeds file size");for(var s=function(e){for(var t=Math.floor((e.byteLength-12)/8),n=Array(t),i=12,o=0;i<e.byteLength;){var a=function(e,t){var n=new Uint32Array(t,e,2);return{start:e+8,length:n[0],type:n[1]}}(i,e);n[o++]=a,i+=a.length+8}return n.slice(0,o)}(e),l=null,u=[],c=0;c<s.length;c++){var d=s[c];0x4e4f534a!==d.type||l?5130562===d.type&&u.push(e.slice(d.start,d.start+d.length)):l=function(e,t){var n=new Uint8Array(t,20,e.length);return JSON.parse(new TextDecoder("utf-8").decode(n))}(d,e)}if(!l)throw Error("glTF-Binary: JSON content not found.");return{json:l,buffers:u}};function AY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function AZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AY(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var AJ=eE.vtkDebugMacro,AQ=eE.vtkWarningMacro,A$=eE.vtkDebugMacro,A0=eE.vtkErrorMacro,A1={};function A2(e,t){var n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,A1,a),eE.obj(e,t),eE.get(e,t,["url","baseURL","actors","scenes","cameras","animations","animationMixer","variants","variantMappings"]),eE.set(e,t,["renderer","dracoDecoder"]),eE.event(e,t,"ready"),t.classHierarchy.push("vtkGLTFImporter"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),t.compression=i.compression,t.sceneId=i.sceneId?i.sceneId:0,e.loadData({progressCallback:i.progressCallback,binary:!!i.binary})},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.compression,a=t.progressCallback;return i.binary?t.dataAccessHelper.fetchBinary(n,{compression:o,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:o,progressCallback:a})}(t.url,n);return i.then(e.parse),i},e.parse=function(t){"string"==typeof t?e.parseAsText(t):e.parseAsBinary(t)},n=w$(w1().mark(function n(i){var o,a,s,l,u;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return");case 2:if(i===t.parseData){n.next=6;break}e.modified(),n.next=7;break;case 6:return n.abrupt("return");case 7:if(o={},a={baseUri:t.baseURL},xo.arrayBufferToString(new Uint8Array(i,0,4))===Av?(A$("Loaded GLB",l=(s=AX(i)).json,u=s.buffers),o.glbBuffers=u,o.json=l):o.json=JSON.parse(xo.arrayBufferToString(i)),!(void 0===o.json.asset||o.json.asset.version[0]<2)){n.next=14;break}return A0("Unsupported asset. glTF versions >=2.0 are supported."),n.abrupt("return");case 14:return n.next=16,function(e,t){return AF.apply(this,arguments)}(o,a);case 16:return t.glTFTree=n.sent,t.actors=new Map,t.cameras=new Map,t.lights=new Map,t.animations=[],t.variants=[],t.variantMappings=new Map,n.next=25,function(e){return AK.apply(this,arguments)}(t);case 25:t.scenes=t.glTFTree.scenes,e.invokeReady();case 27:case"end":return n.stop()}},n)})),e.parseAsBinary=function(e){return n.apply(this,arguments)},e.parseAsText=function(n){n&&n!==t.parseData&&(e.modified(),t.parseData=n)},e.requestData=function(n,i){e.parse(t.parseData)},i=w$(w1().mark(function e(t){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w8.setDracoDecoder(t);case 2:case"end":return e.stop()}},e)})),e.setDracoDecoder=function(e){return i.apply(this,arguments)},e.importActors=function(){t.actors.forEach(function(e){return t.renderer.addActor(e)})},e.importCameras=function(){var e;null==(e=t.glTFTree.cameras)||e.forEach(function(e){var n=function(e){var t=yM.newInstance();if("perspective"===e.type){var n=e.perspective,i=n.yfov,o=n.znear,a=n.zfar;t.setClippingRange(o,a),t.setParallelProjection(!1),t.setViewAngle(eX(i))}else{if("orthographic"!==e.type)throw Error("Unsupported camera type");var s=e.orthographic,l=s.ymag,u=s.znear,c=s.zfar;t.setClippingRange(u,c),t.setParallelProjection(!0),t.setParallelScale(l)}return t}(e);t.cameras.set(e.id,n)}),t.scenes.forEach(function(e){e.nodes.forEach(function(e){var n,i=t.cameras.get(null==(n=e.camera)?void 0:n.id);i&&function(e,t){if(e&&t){var n=[0,0,0],i=[0,1,0],o=[0,0,-1],a=uo.newInstance();a.setMatrix(t),a.transformPoint(n,n),a.transformPoints(i,i),a.transformPoints(o,o),o[0]+=n[0],o[1]+=n[1],o[2]+=n[2],e.setPosition(n),e.setFocalPoint(o),e.setViewUp(i)}}(i,e.transform)})})},e.importAnimations=function(){var e,n,i,o;(null==(e=t.glTFTree.animations)?void 0:e.length)>0&&(n=t.actors,t.glTFTree.accessors,i=new Map,o=new Map,t.animationMixer={addAnimation:function(e){var t=(e.samplers=e.samplers.map(function(e){var t;return t=0,AZ(AZ({},e),{},{evaluate:function(n,i){var o,a,s,l,u,c,d,f,p,h=b(function(n){for(var i=t;i<e.input.length-1&&e.input[i]<=n;)i++;var o=Math.max(0,i-1);return t=o,[e.input[o],e.input[i],o,i]}(n),4),m=h[0],g=h[1],v=h[2],y=h[3];switch(e.interpolation){case"STEP":p=function(t,n){for(var i=3*n,o=[,,,],a=0;a<3;++a)o[a]=e.output[i+a];return o}(0,v);break;case"LINEAR":p=function(t,n,i,o,a,s){for(var l=(s-n)/(i-n),u=4*o,c=4*a,d=[,,,,],f=[,,,,],p=0;p<4;++p)d[p]=e.output[u+p],f[p]=e.output[c+p];switch(t){case"translation":case"scale":return rC(n9(),d,f,l);case"rotation":return sF(sN(),d,f,l);default:return AQ("Unsupported animation path: ".concat(t)),null}}(i,m,g,v,y,n);break;case"CUBICSPLINE":o=g-m,l=(s=(a=(n-m)/o)*a)*a,u=e.output[3*v+1],c=o*e.output[3*v+2],d=e.output[3*y+1],f=o*e.output[3*y],p=Array.isArray(u)?u.map(function(e,t){return(2*l-3*s+1)*e+(l-2*s+a)*c[t]+(-2*l+3*s)*d[t]+(l-s)*f[t]}):(2*l-3*s+1)*u+(l-2*s+a)*c+(-2*l+3*s)*d+(l-s)*f;break;default:AQ("Unknown interpolation method: ".concat(e.interpolation))}return p}})}),e.channels=e.channels.map(function(t){var i,o,a;return t.target.node=n.get("node-".concat(t.target.node)),i=e.samplers,o=t.target.path,a=t.target.node,AZ(AZ({},t),{},{animate:function(e){!function(e){var t,n,i;switch(o){case"translation":a.setPosition(e[0],e[1],e[2]);break;case"rotation":i=sG(sN(),e),n=sB(t=new Float64Array(3),i),a.rotateWXYZ(eX(n),t[0],t[1],t[2]);break;case"scale":a.setScale(e[0],e[1],e[2]);break;default:AQ("Unsupported animation path: ".concat(o))}}(i[t.sampler].evaluate(e,o))}})}),AZ(AZ({},e),{},{update:function(t){e.channels.forEach(function(e){return e.animate(t)})}}));i.set(e.id,t),AJ('Animation "'.concat(e.id,'" added to mixer'))},play:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i.has(e)?(o.set(e,{animation:i.get(e),weight:t,time:0}),AJ('Playing animation "'.concat(e,'" with weight ').concat(t))):AQ('Animation "'.concat(e,'" not found in mixer'))},stop:function(e){o.delete(e)?AQ('Stopped animation "'.concat(e,'"')):AQ('Animation "'.concat(e,'" was not playing'))},stopAll:function(){o.clear(),AQ("Stopped all animations")},update:function(e){var t=Array.from(o.values()).reduce(function(e,t){return e+t.weight},0);o.forEach(function(n,i){var a=n.animation,s=n.weight,l=n.time,u=t>0?s/t:0,c=l+e;o.set(i,{animation:a,weight:s,time:c}),AJ('Updating animation "'.concat(i,'" at time ').concat(c.toFixed(3)," with normalized weight ").concat(u.toFixed(3))),a.update(c,u)})}},t.glTFTree.animations.forEach(function(e){t.animationMixer.addAnimation(e)})),t.animations=t.glTFTree.animations||[]},e.importLights=function(){var e;null==(e=t.lights)||e.forEach(function(e){A$("Adding light",e),t.renderer.addLight(e)})},e.setCamera=function(e){var n=t.cameras.get(e);n?(A$("Setting camera",n),t.renderer.setActiveCamera(n)):A0("Camera ".concat(e," not found"))},o=w$(w1().mark(function e(n){var i;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Array.from(t.actors).map(function(){var e=w$(w1().mark(function e(i){var o,a,s,l,u,c;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(o=b(i,2))[0],s=o[1],A$("Switching to variant",n,"for node",a),!(l=t.variantMappings.get(a))||!(u=l.find(function(e){return e.variants.includes(n)}))){e.next=9;break}return c=t.glTFTree.materials[u.material],e.next=9,Aj(t,c,s);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(i);case 3:case"end":return e.stop()}},e)})),e.switchToVariant=function(e){return o.apply(this,arguments)},t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var A3,A4={extend:A2,newInstance:eE.newInstance(A2,"vtkGLTFImporter")},A5=eE.vtkErrorMacro,A6={mergeGeometries:!1};function A8(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,A6,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper","mergeGeometries"]),eE.event(e,t,"ready"),eE.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkIFCImporter");var n=[];function i(e){var t=e.vertices,n=e.indices,i=e.color,o=e.userMatrix,a=lC.newInstance(),s=nQ.newInstance(),l=new Float32Array(t.length/2),u=new Float32Array(t.length/2),c=new Float32Array(t.length/2);if(o){for(var d=0,f=0;d<t.length;f+=3)l[f]=t[d++],l[f+1]=t[d++],l[f+2]=t[d++],u[f]=t[d++],u[f+1]=t[d++],u[f+2]=t[d++],c[f]=i.x,c[f+1]=i.y,c[f+2]=i.z;a$.buildFromRadian().setMatrix(o).apply(l),a$.buildFromRadian().multiply3x3(o4(o3(),o)).apply(u)}else for(var p=0,h=0;p<t.length;h+=3)l[h]=t[p++],l[h+1]=t[p++],l[h+2]=t[p++],u[h]=t[p++],u[h+1]=t[p++],u[h+2]=t[p++],c[h]=i.x,c[h+1]=i.y,c[h+2]=i.z;var m=n.length;s.resize(3*m/3);for(var g=0;g<m;g+=3){var v=n.slice(g,g+3);s.insertNextCell(v)}return a.getPoints().setData(l,3),a.setPolys(s),a.getPointData().setNormals(nH.newInstance({name:"Normals",values:u,numberOfComponents:3})),a.getPointData().setScalars(nH.newInstance({name:"Colors",values:c,numberOfComponents:3})),a}t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};return t.url=n,t.baseURL=n.split("/").slice(0,-1).join("/"),t.compression=i.compression,e.loadData(i)},e.loadData=function(){var n,i,o;return(n=t.url,i=t.compression,o=t.progressCallback,t.dataAccessHelper.fetchBinary(n,{compression:i,progressCallback:o})).then(e.parse)},e.parse=function(t){e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(i){i?A3?(t._ifcApi=new A3.IfcAPI,t._ifcApi.Init().then(function(){var o;o=t._ifcApi.OpenModel(new Uint8Array(i),{COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0}),t._ifcApi.StreamAllMeshes(o,function(e){for(var i=e.geometries,a=0;a<i.size();a++){var s=i.get(a),l=t._ifcApi.GetGeometry(o,s.geometryExpressID),u=t._ifcApi.GetVertexArray(l.GetVertexData(),l.GetVertexDataSize()),c=t._ifcApi.GetIndexArray(l.GetIndexData(),l.GetIndexDataSize());n.push({vertices:u,indices:c,color:s.color,userMatrix:s.flatTransformation})}}),t._ifcApi.CloseModel(o),e.invokeReady()})):A5("vtkIFCImporter requires WebIFC API to be set."):A5("No content to parse.")},e.importActors=function(e){if(t.mergeGeometries){var o=n.filter(function(e){return 1===e.color.w}),a=u4.newInstance();o.forEach(function(e){var t=i(e);a.addInputData(t)});var s=gd.newInstance();s.setColorModeToDirectScalars(),s.setInputConnection(a.getOutputPort());var l=mH.newInstance();l.setMapper(s),e.addActor(l);var u=n.filter(function(e){return e.color.w<1}),c=u4.newInstance();u.forEach(function(e){var t=i(e);c.addInputData(t)}),(s=gd.newInstance()).setColorModeToDirectScalars(),s.setInputConnection(c.getOutputPort()),(l=mH.newInstance()).setMapper(s),l.getProperty().setOpacity(.5),e.addActor(l)}else n.forEach(function(t){var n=function(e){for(var t=e.vertices,n=e.indices,i=lC.newInstance(),o=nQ.newInstance(),a=new Float32Array(t.length/2),s=new Float32Array(t.length/2),l=0,u=0;l<t.length;u+=3)a[u]=t[l++],a[u+1]=t[l++],a[u+2]=t[l++],s[u]=t[l++],s[u+1]=t[l++],s[u+2]=t[l++];var c=n.length;o.resize(3*c/3);for(var d=0;d<c;d+=3){var f=n.slice(d,d+3);o.insertNextCell(f)}return i.getPoints().setData(a,3),i.setStrips(o),i.getPointData().setNormals(nH.newInstance({name:"Normals",values:s,numberOfComponents:3})),i}(t),i=gd.newInstance();i.setInputData(n);var o=mH.newInstance();o.setMapper(i);var a=t.color,s=a.x,l=a.y,u=a.z,c=a.w;o.getProperty().setColor(s,l,u),o.getProperty().setOpacity(c),o.setUserMatrix(t.userMatrix),e.addActor(o)})}}(e,t)}var A9=eE.newInstance(A8,"vtkIFCImporter"),A7={POINTS:"getPoints",VERTICES:"getVerts",LINES:"getLines",TRIANGLE_STRIPS:"getStrips",POLYGONS:"getPolys",POINT_DATA:"getPointData",CELL_DATA:"getCellData",FIELD:"getFieldData"},Ce={bit:Uint8Array,unsigned_char:Uint8Array,char:Int8Array,unsigned_short:Uint16Array,short:Int16Array,unsigned_int:Uint32Array,int:Int32Array,unsigned_long:Uint32Array,long:Int32Array,float:Float32Array,double:Float64Array},Ct={SCALARS:"addArray",COLOR_SCALARS:"addArray",VECTORS:"setVectors",NORMALS:"setNormals",TEXTURE_COORDINATES:"setTCoords",TENSORS:"setTensors",FIELD:"addArray"};function Cn(e,t,n){var i=0;return function(o){return o.split(" ").forEach(function(t){t.length&&(e[i++]=Number(t))}),i<e.length||(t(e,n),!1)}}var Cr={init:function(e,t){var n=b(e.split(" "),3),i=n[0],o=n[1],a=n[2],s=t.dataset[A7[i]]();return s.set({numberOfCells:Number(o)},!0),t.arrayHandler=Cn(new Uint32Array(Number(a)),s.setData,1),!0},parse:function(e,t){return t.arrayHandler(e)}},Ci={DATASET:{init:function(e,t){var n=e.split(" ")[1];return"POLYDATA"===n?t.dataset=lC.newInstance():console.error("Dataset of type ".concat(n," not supported")),!1},parse:function(e,t){return!1}},POINTS:{init:function(e,t){var n=b(e.split(" "),3),i=n[0],o=n[1],a="float"===n[2]?new Float32Array(3*Number(o)):new Float64Array(3*Number(o)),s=t.dataset.getPoints();return s.setName(i),t.arrayHandler=Cn(a,s.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},METADATA:{init:function(e,t){return!0},parse:function(e,t){return!!e.length}},VERTICES:Cr,LINES:Cr,TRIANGLE_STRIPS:Cr,POLYGONS:Cr,POINT_DATA:{init:function(e,t){return t.POINT_DATA=Number(e.split(" ")[1]),t.activeFieldLocation="POINT_DATA",!1},parse:function(e,t){return!1}},CELL_DATA:{init:function(e,t){return t.CELL_DATA=Number(e.split(" ")[1]),t.activeFieldLocation="CELL_DATA",!1},parse:function(e,t){return!1}},SCALARS:{init:function(e,t){var n=b(e.split(" "),4),i=n[0],o=n[1],a=n[2],s=n[3],l=Number(s)>0?Number(s):1,u=t[t.activeFieldLocation]*l,c=new Ce[a](u),d=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](d),t.arrayHandler=Cn(c,d.setData,l),!0},parse:function(e,t){return"LOOKUP_TABLE"===e.split(" ")[0]||t.arrayHandler(e)}},COLOR_SCALARS:{init:function(e,t){var n=b(e.split(" "),3),i=n[0],o=n[1],a=n[2],s=Number(a)>0?Number(a):1,l=new Uint8Array(t[t.activeFieldLocation]*s),u=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](u),t.arrayHandler=Cn(l,u.setData,s),!0},parse:function(e,t){return"LOOKUP_TABLE"===e.split(" ")[0]||t.arrayHandler(e)}},VECTORS:{init:function(e,t){var n=b(e.split(" "),3),i=n[0],o=n[1],a=n[2],s=3*t[t.activeFieldLocation],l=new Ce[a](s),u=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](u),t.arrayHandler=Cn(l,u.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},NORMALS:{init:function(e,t){var n=b(e.split(" "),2),i=n[0],o=n[1],a=new Float32Array(3*t[t.activeFieldLocation]),s=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](s),t.arrayHandler=Cn(a,s.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},TEXTURE_COORDINATES:{init:function(e,t){var n=b(e.split(" "),4),i=n[0],o=n[1],a=n[2],s=n[3],l=t[t.activeFieldLocation]*Number(a),u=new Ce[s](l),c=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](c),t.arrayHandler=Cn(u,c.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},TENSORS:{init:function(e,t){var n=b(e.split(" "),3),i=n[0],o=n[1],a=n[2],s=9*t[t.activeFieldLocation],l=new Ce[a](s),u=nH.newInstance({name:o,empty:!0});return t.dataset[A7[t.activeFieldLocation]]()[Ct[i]](u),t.arrayHandler=Cn(l,u.setData,9),!0},parse:function(e,t){return t.arrayHandler(e)}}},Co={parseLegacyASCII:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,i=/\r?\n/.exec(e),o=null!==i?i[0]:null;return e.split(o).forEach(function(e,i){if(!(i<2))if(n)n&&!n.parse(e,t)&&(n=null);else{if(!(n=Ci[e.split(" ")[0]]))return;n=n.init(e,t)?n:null}}),t}},Ca={};function Cs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ca,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkPolyDataReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),t.compression=i.compression,e.loadData({progressCallback:i.progressCallback})},e.loadData=function(){var n,i,o,a=(n=t.url,i=t.compression,o=t.progressCallback,t.dataAccessHelper.fetchText(e,n,{compression:i,progressCallback:o}));return a.then(e.parseAsText),a},e.parseAsText=function(n){n&&n!==t.parseData&&(e.modified(),t.parseData=n,t.output[0]=Co.parseLegacyASCII(t.parseData).dataset)},e.requestData=function(n,i){e.parseAsText(t.parseData)},t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var Cl=eE.newInstance(Cs,"vtkPolyDataReader"),Cu={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function Cc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cu,n),eE.obj(e,t),eE.get(e,t,["url"]),eE.setGet(e,t,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),eE.algo(e,t,0,1),eE.event(e,t,"busy"),t.classHierarchy.push("vtkElevationReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n,i){return t.url=n,e.loadData(i)},e.loadData=function(n){var i;return(i=t.url,t.dataAccessHelper.fetchText(e,i,n)).then(function(t){return e.parseAsText(t),!0})},e.parseAsText=function(n){t.csv=n,t.elevation=[],t.csv.split("\n").forEach(function(e,n){t.elevation.push(e.split(",").map(function(e){return Number(e)}))}),e.modified()},e.requestData=function(e,n){var i=lC.newInstance();if(i.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),t.elevation){var o=t.elevation.length,a=t.elevation[0].length,s=i.getPoints();s.setNumberOfPoints(a*o,3);var l=s.getData(),u=nQ.newInstance({size:5*(a-1)*(o-1)});i.setPolys(u);var c=u.getData(),d=0,f=new Float32Array(a*o*2),p=nH.newInstance({numberOfComponents:2,values:f,name:"TextureCoordinates"});i.getPointData().setTCoords(p);for(var h=0;h<o;h++)for(var m=0;m<a;m++){var g=h*a+m,v=3*g;l[v+0]=t.origin[0]+m*t.xSpacing*t.xDirection,l[v+1]=t.origin[1]+h*t.ySpacing*t.yDirection,l[v+2]=t.origin[2]+t.elevation[h][m]*t.zScaling,f[2*g]=m/(a-1),f[2*g+1]=1-h/(o-1),m>0&&h>0&&(c[d++]=4,c[d++]=g,c[d++]=g-1,c[d++]=g-1-a,c[d++]=g-a)}}t.output[0]=i},e.isBusy=function(){return!!t.requestCount}}var Cd={newInstance:eE.newInstance(Cc,"vtkElevationReader"),extend:Cc},Cf=lM.convertItkToVtkImage,Cp=null,Ch=function(e){return e},Cm={fileName:"",arrayName:null};function Cg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cm,n),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["fileName","arrayName"]),t.classHierarchy.push("vtkITKImageReader"),e.parseAsArrayBuffer=function(n){return n&&n!==t.rawDataBuffer?(t.rawDataBuffer=n,Cp(n,t.fileName).then(Ch).then(function(n){var i,o,a,s=Cf(n,{scalarArrayName:t.arrayName||(a=(o=(i=t.fileName).lastIndexOf("."))>-1?i.substring(0,o):i,"Scalars ".concat(a))});t.output[0]=s,e.modified()})):Promise.resolve()},e.requestData=function(n,i){e.parseAsArrayBuffer(t.rawDataBuffer,t.fileName)},Cp||console.error("\n      // Dependency needs to be added inside your project\n      import readImageArrayBuffer from 'itk/readImageArrayBuffer';\n      vtkITKImageReader.setReadImageArrayBufferFromITK(readImageArrayBuffer);\n      ")}var Cv={newInstance:eE.newInstance(Cg,"vtkITKImageReader"),extend:Cg,setReadImageArrayBufferFromITK:function(e){4===(Cp=e).length&&(Cp=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[null].concat(n))},Ch=function(e){var t=e.webWorker,n=e.image;return t.terminate(),n})}},Cy=null,Cb=function(e){return e},Cx={fileName:"",arrayName:null};function Cw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cx,n),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["fileName","arrayName"]),t.classHierarchy.push("vtkITKPolyDataReader"),e.parseAsArrayBuffer=function(n){return n&&n!==t.rawDataBuffer?(t.rawDataBuffer=n,Cy(n,t.fileName).then(Cb).then(function(n){t.output[0]=M(n),e.modified()})):Promise.resolve()},e.requestData=function(n,i){e.parseAsArrayBuffer(t.rawDataBuffer,t.fileName)},Cy||console.error("\n      // Dependency needs to be added inside your project\n      import readPolyDataArrayBuffer from 'itk/readPolyDataArrayBuffer';\n      vtkITKPolyDataReader.setReadPolyDataArrayBufferFromITK(readPolyDataArrayBuffer);\n      ")}var CA={newInstance:eE.newInstance(Cw,"vtkITKPolyDataReader"),extend:Cw,setReadPolyDataArrayBufferFromITK:function(e){Cy=e,Cy=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[null].concat(n))},Cb=function(e){var t=e.webWorker,n=e.polyData;return t.terminate(),n}}},CC={};function CS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CC,n),eE.obj(e,t),eE.get(e,t,["url"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkJSONNucleoReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n,i){return t.url=n,e.loadData(i)},e.loadData=function(n){var i;return(i=t.url,t.dataAccessHelper.fetchText(e,i,n)).then(function(t){return e.parseAsText(t),!0})},e.parseAsText=function(n){var i=JSON.parse(n),o=i.vertices,a=i.indices,s=a.length,l=s/3+s;t.points=Float32Array.from(o),t.polys=l<65535?new Uint16Array(l):new Uint32Array(l);for(var u=0,c=0;c<t.polys.length;)t.polys[c++]=3,t.polys[c++]=a[u++],t.polys[c++]=a[u++],t.polys[c++]=a[u++];e.modified()},e.requestData=function(e,n){var i=lC.newInstance();i.getPoints().setData(t.points,3),i.getPolys().setData(t.polys),t.output[0]=i}}var C_={newInstance:eE.newInstance(CS,"vtkJSONNucleoReader"),extend:CS},CT={};function CO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CT,n),eE.obj(e,t),eE.get(e,t,["url"]),eE.algo(e,t,0,1),eE.event(e,t,"busy"),t.classHierarchy.push("vtkJSONReader"),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=n,e.loadData(i)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,i)})(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return!!n&&(t.data=JSON.parse(n),e.modified(),!0)},e.requestData=function(e,n){n[0]=t.data},e.isBusy=function(){return!1},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var CP={newInstance:eE.newInstance(CO,"vtkJSONReader"),extend:CO},CM={numberOfOutputs:1,requestCount:0,materials:{},interpolateTextures:!0};function CE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CM,n),es(e,t),eu(e,t,["url","baseURL"]),ep(e,t,["dataAccessHelper","interpolateTextures","splitGroup"]),ex(e,t,"busy"),function(e,t){function n(){t.requestCount--,0===t.requestCount&&e.invokeBusy(!1)}function i(e){if("#"!==e[0]&&0!==e.length){var i=e.split(/[ \t]+/).map(function(e){return e.trim()}).filter(function(e){return e.length});if("newmtl"===i[0])i.shift(),t.currentMaterial=i.join(" ").trim();else if(t.currentMaterial){if(i.length<2)return;if(t.materials[t.currentMaterial]||(t.materials[t.currentMaterial]={}),t.materials[t.currentMaterial][i[0]]=i.slice(1),"map_Kd"===i[0]){var o=new Image;o.onload=function(){return setTimeout(n,0)},o.src=[t.baseURL,i[1]].join("/"),t.materials[t.currentMaterial].image=o,t.requestCount++}}}}t.classHierarchy.push("vtkMTLReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".mtl")||i.fullpath){t.url=n;var o=n.split("/");o.pop(),t.baseURL=o.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.mtl");return e.loadData(i)},e.loadData=function(n){return new Promise(function(i,o){var a;(a=t.url,t.dataAccessHelper.fetchText(e,a,n)).then(function(t){e.parseAsText(t),i()},function(e){o()})})},e.parseAsText=function(n){e.modified(),t.materials={},n.split("\n").forEach(i)},e.isBusy=function(){return!!t.requestCount},e.getMaterialNames=function(){return Object.keys(t.materials)},e.getMaterial=function(e){return t.materials[e]},e.listImages=function(){return Object.keys(t.materials).map(function(e){return t.materials[e].map_Kd}).filter(function(e){return!!e}).map(function(e){return e[0].trim()})},e.setImageSrc=function(e,n){return new Promise(function(i,o){var a=Object.keys(t.materials).find(function(n){return t.materials[n].map_Kd&&t.materials[n].map_Kd[0].trim()===e.trim()}),s=t.materials[a];s&&s.image?(s.image.src=n,s.image.onload=function(){return setTimeout(i,0)}):i()})},e.applyMaterialToActor=function(e,n){var i=t.materials[e];if(i&&n){var o=[1,1,1],a={ambientColor:i.Ka?i.Ka.map(function(e){return Number(e)}):o,specularColor:i.Ks?i.Ks.map(function(e){return Number(e)}):o,diffuseColor:i.Kd?i.Kd.map(function(e){return Number(e)}):o,opacity:i.d?Number(i.d):1,specularPower:i.Ns?Number(i.Ns):1},s=Number(i.illum||2);if(["ambient","diffuse","specular"].forEach(function(e,t){a[e]=+(t<=s)}),i.image){var l=xQ.newInstance({interpolate:t.interpolateTextures});l.setImage(i.image),n.addTexture(l)}n.getProperty().set(a)}}}(e,t)}var CD={newInstance:ew(CE,"vtkMTLReader"),extend:CE};function CI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Ck=eE.vtkErrorMacro,CN=function(e,t,n){for(var i="",o=e.getData(),a=0;a<o.length;){var s=o[a++];i+="f";for(var l=0;l<s;l++)i+=" ".concat(o[a+l]+1),n&&(i+="/".concat(o[a+l]+1)),t&&(i+="//".concat(o[a+l]+1));a+=s,i+="\n"}return i},CR=function(e,t,n){var i="# VTK.js generated OBJ File\n",o=e.getPoints(),a=e.getPolys(),s=e.getStrips()?e.getStrips().getData():null,l=e.getLines(),u=e.getPointData().getNormals(),c=e.getPointData().getTCoords(),d=null!==u,f=null!==c;if(!o)return Ck("No data to write!"),i;t&&(i+="mtllib ".concat(t,"\n")),n&&(i+="usemtl ".concat(n,"\n")),i+=function(e,t,n){for(var i,o=[],a=e.getNumberOfPoints(),s=0;s<a;s++)i=e.getPoint(s),o.push("v ".concat(i[0]," ").concat(i[1]," ").concat(i[2]));if(t)for(var l=0;l<a;l++)i=t.getTuple(l),o.push("vn ".concat(i[0]," ").concat(i[1]," ").concat(i[2]));if(n)for(var u=0;u<a;u++)-1!==(i=n.getTuple(u))[0]&&o.push("vt ".concat(i[0]," ").concat(i[1]));return"".concat(o.join("\n"),"\n")}(o,u,c);var p=nQ.newInstance();return s&&s.length>0&&lv.decomposeStrip(o,p),p.getNumberOfCells()>0&&(i+=CN(p,d,f)),a&&(i+=CN(a,d,f)),l&&(i+=function(e){for(var t="",n=e.getData(),i=0;i<n.length;){var o=n[i++];t+="l";for(var a=0;a<o;a++)t+=" ".concat(n[i+a]+1);i+=o,t+="\n"}return t}(l)),i},CB={modelFilename:"model",materialName:"mat_01",materialFilename:"material",texture:null,textureFileName:"texture"};function CL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CB,n),eE.obj(e,t),eE.algo(e,t,1,1),eE.get(e,t,["mtl"]),eE.set(e,t,["modelFilename","materialFilename","texture","textureFileName"]),t.classHierarchy.push("vtkOBJWriter"),e.exportAsZip=function(){e.update();var n,i,o=t.modelFilename,a=t.materialFilename,s=t.textureFileName,l=null==(n=(i=t.texture).getInputAsJsImageData)?void 0:n.call(i),u={};u["".concat(o,".obj")]=bH(t.output[0]),u["".concat(a,".mtl")]=bH(t.mtl);var c=document.createElement("canvas");return c.width=l.width,c.height=l.height,c.getContext("2d").putImageData(l,0,0),new Promise(function(e){var t;c.toBlob((t=w$(w1().mark(function t(n){var i;return w1().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.arrayBuffer();case 2:i=t.sent,u["".concat(s,".png")]=new Uint8Array(i),e(function(e,t){t||(t={});var n={},i=[];bG(e,"",n,t);var o=0,a=0;for(var s in n){var l=n[s],u=l[0],c=l[1],d=8*(0!=c.level),f=(S=bH(s)).length,p=c.comment,h=p&&bH(p),m=h&&h.length,g=bY(c.extra);f>65535&&bh(11);var v=d?bE(u,c||{},0,0):u,y=v.length,b=bP();b.p(u),i.push(bD(c,{size:u.length,crc:b.d(),c:v,f:S,m:h,u:f!=s.length||h&&p.length!=m,o:o,compression:d})),o+=30+f+g+y,a+=76+2*(f+g)+(m||0)+y}for(var x=new yY(a+22),w=o,A=a-o,C=0;C<i.length;++C){var S=i[C];bZ(x,S.o,S,S.f,S.u,S.c.length);var _=30+S.f.length+bY(S.extra);x.set(S.c,S.o+_),bZ(x,o,S,S.f,S.u,S.c.length,S.o,S.m),o+=16+_+(S.m?S.m.length:0)}return bJ(x,o,i.length,A,w),x}(u));case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),"image/png")})},e.requestData=function(e,n){var i=e[0];if(i&&i.isA("vtkPolyData")){var o,a,s="".concat(t.materialFilename,".mtl"),l="".concat(t.textureFileName,".png");n[0]=CR(i,s,t.materialName),o=t.materialName,(a=[]).push("newmtl ".concat(o)),a.push("map_Kd ".concat(l)),t.mtl=a.join("\n")}else Ck("Invalid or missing vtkPolyData input")}}var CF=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(CL,"vtkOBJWriter"),extend:CL},{writeOBJ:CR}),CV=JSON.parse('{"H":[1],"He":[2],"Li":[3],"Be":[4],"B":[5],"C":[6],"N":[7],"O":[8],"F":[9],"Ne":[10],"Na":[11],"Mg":[12],"Al":[13],"Si":[14],"P":[15],"S":[16],"Cl":[17],"Ar":[18],"K":[19],"Ca":[20],"Sc":[21],"Ti":[22],"V":[23],"Cr":[24],"Mn":[25],"Fe":[26],"Co":[27],"Ni":[28],"Cu":[29],"Zn":[30],"Ga":[31],"Ge":[32],"As":[33],"Se":[34],"Br":[35],"Kr":[36],"Rb":[37],"Sr":[38],"Y":[39],"Zr":[40],"Nb":[41],"Mo":[42],"Tc":[43],"Ru":[44],"Rh":[45],"Pd":[46],"Ag":[47],"Cd":[48],"In":[49],"Sn":[50],"Sb":[51],"Te":[52],"I":[53],"Xe":[54],"Cs":[55],"Ba":[56],"La":[57],"Ce":[58],"Pr":[59],"Nd":[60],"Pm":[61],"Sm":[62],"Eu":[63],"Gd":[64],"Tb":[65],"Dy":[66],"Ho":[67],"Er":[68],"Tm":[69],"Yb":[70],"Lu":[71],"Hf":[72],"Ta":[73],"W":[74],"Re":[75],"Os":[76],"Ir":[77],"Pt":[78],"Au":[79],"Hg":[80],"Tl":[81],"Pb":[82],"Bi":[83],"Po":[84],"At":[85],"Rn":[86],"Fr":[87],"Ra":[88],"Ac":[89],"Th":[90],"Pa":[91],"U":[92],"Np":[93],"Pu":[94],"Am":[95],"Cm":[96],"Bk":[97],"Cf":[98],"Es":[99],"Fm":[100],"Md":[101],"No":[102],"Lr":[103],"Rf":[104],"Db":[105],"Sg":[106],"Bh":[107],"Hs":[108],"Mt":[109],"Ds":[110],"Rg":[111],"Cn":[112],"Uut":[113],"Uuq":[114],"Uup":[115],"Uuh":[116],"Uus":[117],"Uuo":[118]}'),Cj={numberOfAtoms:0,requestCount:0};function CG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cj,n),eE.obj(e,t),eE.get(e,t,["url","baseURL","numberOfAtoms","requestCount"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),eE.event(e,t,"busy"),t.classHierarchy.push("vtkPDBReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n,i){if(-1===n.indexOf(".pdb"))t.baseURL=n,t.url="".concat(n);else{t.url=n;var o=n.split("/");o.pop(),t.baseURL=o.join("/")}return e.loadData(i)},e.loadData=function(n){var i;return(i=t.url,t.dataAccessHelper.fetchText(e,i,n)).then(e.parseAsText)},e.parseAsText=function(n){return t.pdb=n,t.molecule=[],t.molecule=t.pdb.split("\n"),e.modified(),!0},e.requestData=function(e,n){var i=lj.newInstance();if(t.molecule){var o=t.molecule.length,a=[],s=[];t.numberOfAtoms=0;for(var l=0;l<o&&"END"!==t.molecule[l];){var u=t.molecule[l].length,c=t.molecule[l],d=c.substr(0,6).replace(/\s+/g,"");if(d.toUpperCase(),"ATOM"===d||"HETATM"===d){var f=c.substr(12,4).replace(/\s+/g,""),p=c.substr(30,8).replace(/\s+/g,""),h=c.substr(38,8).replace(/\s+/g,""),m=c.substr(46,8).replace(/\s+/g,""),g="";u>=78&&(g=c.substr(76,2).replace(/\s+/g,"")),""===g&&(g=f.substr(0,2).replace(/\d/g,"")),a.push(p),a.push(h),a.push(m);var v=b(CV[g],1)[0];s.push(v),t.numberOfAtoms++}l++}i.getAtoms().elements={},i.getAtoms().elements.number=Int8Array.from(s),i.getAtoms().coords={},i.getAtoms().coords["3d"]=Float32Array.from(a)}t.output[0]=i},e.isBusy=function(){return!!t.requestCount}}var CU={newInstance:eE.newInstance(CG,"vtkPDBReader"),extend:CG},Cz={busy:!1,faceMapping:[{fileName:"right.jpg",transform:{flipY:!0}},{fileName:"left.jpg",transform:{flipY:!0}},{fileName:"up.jpg",transform:{flipY:!0}},{fileName:"down.jpg",transform:{flipY:!0}},{fileName:"back.jpg",transform:{flipY:!0}},{fileName:"front.jpg",transform:{flipY:!0}}]};function CW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cz,n),eE.obj(e,t),eE.get(e,t,["url","positions","position"]),eE.setGet(e,t,["faceMapping"]),eE.event(e,t,"busy"),eE.algo(e,t,0,6),t.classHierarchy.push("vtkSkyboxReader"),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=n,e.loadData(i)},e.loadData=function(){var n,i,o;return(n=t.url,i=t.compression,o=t.progressCallback,t.dataAccessHelper.fetchBinary(n,{compression:i,progressCallback:o})).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;t.textures={},t.busy=!0,e.invokeBusy(t.busy),t.dataMapping={};var i=[],o=bQ(new Uint8Array(n)),a=[];return Object.entries(o).forEach(function(e){var n=b(e,2),o=n[0],s=n[1];if(o.match(/index.json$/)){var l=JSON.parse(bq(s));l.skybox&&l.skybox.faceMapping&&(t.faceMapping=l.skybox.faceMapping),l.metadata&&l.metadata.skybox&&l.metadata.skybox.faceMapping&&(t.faceMapping=l.metadata.skybox.faceMapping)}if(o.match(/\.jpg$/)){var u=o.split("/"),c=u.pop(),d=u.pop();t.dataMapping[d]||(t.dataMapping[d]={});var f=new Blob([s.buffer]),p=new Image,h="".concat(d,"/").concat(c);t.dataMapping[d][c]=p,a.push(new Promise(function(e){p.onload=function(){i.push(h),e()}})),p.src=URL.createObjectURL(f)}}),t.positions=Object.keys(t.dataMapping),t.position=t.positions[0],Promise.all(a).then(function(){!function(){for(var n=0;n<t.positions.length;n++){var o=t.positions[n],a=t.dataMapping[o];if(t.textures[o]||(t.textures[o]=xQ.newInstance({interpolate:!0})),a)for(var s=t.textures[o],l=0;l<6;l++){var u=t.faceMapping[l],c=u.fileName,d=u.transform,f=i.indexOf("".concat(o,"/").concat(c));-1!==f&&(s.setInputData(aE.imageToImageData(a[c],d),l),URL.revokeObjectURL(a[c].src),delete a[c],i.splice(f,1))}}t.busy=!1,e.modified(),e.invokeBusy(t.busy)}()}),e.getReadyPromise()},e.requestData=function(e,n){n[0]=t.textures[t.position]},e.setPosition=function(n){-1!==t.positions.indexOf(n)&&n!==t.position&&(t.position=n,e.modified())},e.getReadyPromise=function(){return t.busy?new Promise(function(t,n){var i=e.onBusy(function(n){n||(i.unsubscribe(),t(e))})}):Promise.resolve(e)},e.isBusy=function(){return t.busy}}var CH=eE.newInstance(CW,"vtkSkyboxReader");function Cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var CK={};function CX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CK,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),eE.event(e,t,"ready"),function(e,t){var n={currentPosition:{x:0,y:0,z:0},offset:{x:0,y:0,z:0},currentLayer:0,layers:new Map,isAbsolute:!0,isMetric:!0,lastZ:0};function i(e){e.split("\n").forEach(function(e){var t=e.split(";")[0].trim();if(t){var i=t.split(" "),o=i[0],a={};i.slice(1).forEach(function(e){var t=e[0],n=parseFloat(e.slice(1));Number.isNaN(n)||(a[t]=n)}),function(e,t){var i,o,a;switch(e){case"G0":case"G1":o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cq(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.currentPosition),a=!1,["X","Y","Z"].forEach(function(e){if(e in t){var i=n.isMetric?t[e]:25.4*t[e];o[e.toLowerCase()]=n.isAbsolute?i+n.offset[e.toLowerCase()]:n.currentPosition[e.toLowerCase()]+i,a=!0}}),a&&("Z"in t&&Math.abs((i=o.z)-n.lastZ)>.001&&(n.currentLayer++,n.lastZ=i),function(e,t){if(!n.layers.has(n.currentLayer)){var i=a3.newInstance(),o=nQ.newInstance(),a=lC.newInstance();a.setPoints(i),a.setLines(o),n.layers.set(n.currentLayer,{polyData:a,points:i,lines:o,zHeight:n.lastZ})}var s=n.layers.get(n.currentLayer),l=s.points.insertNextPoint(e[0],e[1],e[2]),u=s.points.insertNextPoint(t[0],t[1],t[2]);s.lines.insertNextCell([l,u])}([n.currentPosition.x,n.currentPosition.y,n.currentPosition.z],[o.x,o.y,o.z]),n.currentPosition=o);break;case"G20":n.isMetric=!1;break;case"G21":n.isMetric=!0;break;case"G90":n.isAbsolute=!0;break;case"G91":n.isAbsolute=!1;break;case"G92":["X","Y","Z"].forEach(function(e){e in t&&(n.offset[e.toLowerCase()]=n.currentPosition[e.toLowerCase()]-(n.isMetric?t[e]:25.4*t[e]))})}}(o,a)}})}t.classHierarchy.push("vtkGCodeReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),t.compression=i.compression,e.loadData({progressCallback:i.progressCallback,binary:!!i.binary})},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.compression,a=t.progressCallback;return i.binary?t.dataAccessHelper.fetchBinary(n,{compression:o,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:o,progressCallback:a})}(t.url,n);return i.then(e.parse),i},e.parseAsText=function(e){i(e)},e.parseAsArrayBuffer=function(e){i(xo.arrayBufferToString(e))},e.parse=function(i){"string"==typeof i?e.parseAsText(i):e.parseAsArrayBuffer(i),n.layers.forEach(function(e,n){t.output[n]=e.polyData})},e.requestData=function(n,i){e.parse(t.parseData)},e.getNumberOfOutputPorts=function(){return n.layers.size}}(e,t)}var CY={vtkElevationReader:Cd,vtkITKImageReader:Cv,vtkITKPolyDataReader:CA,vtkJSONNucleoReader:C_,vtkJSONReader:CP,vtkMTLReader:CD,vtkOBJReader:dR,vtkOBJWriter:CF,vtkPDBReader:CU,vtkSkyboxReader:{newInstance:CH,extend:CW},vtkGCodeReader:{extend:CX,newInstance:eE.newInstance(CX,"vtkGCodeReader")}},CZ=n(9189);function CJ(e,t){return m(e.getElementsByTagName(t))[0]}var CQ={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},C$={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function C0(e){var t=e.length-1;return e.filter(function(e,n){return n<t&&n%2==0})}function C1(e,t,n){if(!["UInt64","UInt32"].includes(n))throw Error("Cannot handle a header type of ".concat(n));var i=CQ[n],o=CQ[t],a=!1;"UInt64"===n&&(i=CQ.UInt32),/^U?Int64$/.test(t)&&(a=!0,o=CQ[t.replace("64","32")]);var s,l=e.byteOffset,u=C$[t],c=C$[n],d=Number((l%c==0?new i(e.buffer,l,1):new i(e.buffer.slice(l,l+c)))[0]),f=d/u;a&&(f*=2);var p=l+c;return s=p%u==0?new o(e.buffer,p,f):new o(e.buffer.slice(p,p+d)),a&&(s=C0(s)),s}function C2(e,t){var n,i=function(e,t){if("UInt64"===t){var n=new Uint32Array(e.buffer,0,6),i=n[0],o=[8,i,n[2],n[4]];n=new Uint32Array(e.buffer,24,2*i);for(var a=0;a<i;a++)o.push(n[2*a]);return o}var s=new Uint32Array(e.buffer,0,3),l=s[0],u=[4,l,s[1],s[2]];s=new Uint32Array(e.buffer,12,l);for(var c=0;c<l;c++)u.push(s[c]);return u}(e,t),o=i[1],a=i[2],s=i[3],l=0;o>0&&(l=0===s?o*a:(o-1)*a+s);for(var u=new ArrayBuffer(l),c={offset:0,uint8:new Uint8Array(u)},d=(n=b(i,1)[0],(i.length-1)*n);d<e.length&&120!==e[d];)d++;for(var f=0;f<o;f++){var p=i[4+f];(function(e,t){var n=bj(e);t.uint8.set(n,t.offset),t.offset+=n.length})(new Uint8Array(e.buffer,d,p),c),d+=p}return c.uint8}function C3(e,t,n,i,o,a){var s=t.getAttribute("type"),l=t.getAttribute("Name"),u=t.getAttribute("format"),c=Number(t.getAttribute("NumberOfComponents")||"1"),d=null;if("ascii"===u){d=new CQ[s](e*c);var p=0;t.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(function(e){e.trim().length&&(d[p++]=Number(e))})}else if("binary"===u){var h=new Uint8Array(f.toArrayBuffer(t.firstChild.nodeValue.trim()));if("vtkZLibDataCompressor"===n){var m=C2(h,o);d=new CQ[s](m.buffer),/^U?Int64$/.test(s)&&(d=C0(d))}else d=new CQ[s](h.buffer,C$[o]),-1!==s.indexOf("Int64")&&(d=C0(d))}else"appended"===u?d=C1(new Uint8Array(a,Number(t.getAttribute("offset"))),s,o):console.error("Format not supported",u);return{name:l,values:d,numberOfComponents:c}}function C4(e){return(new TextDecoder).decode(e).split("\0").slice(0,-1)}var C5={},C6={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,C5,n),eE.obj(e,t),eE.get(e,t,["url","baseURL"]),eE.setGet(e,t,["dataAccessHelper"]),eE.algo(e,t,0,1),t.classHierarchy.push("vtkXMLReader"),t.dataAccessHelper||(t.dataAccessHelper=dA.get("http")),e.setUrl=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var o=n.split("/");return o.pop(),t.baseURL=o.join("/"),e.loadData(i)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchBinary(e,n)})(t.url,n).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;if(n===t.rawDataBuffer)return!0;e.modified();var i=xo.extractBinary(n,/^\s*<AppendedData\s+encoding="raw">\s*_/m,/\n\s*<\/AppendedData>/m),o=i.text,a=i.binaryBuffer;t.rawDataBuffer=n,t.binaryBuffer=a;var s=(0,CZ.create)(o).root(),l=s.node,u=l.getAttribute("type"),c=l.getAttribute("compressor"),d=l.getAttribute("byte_order"),p=l.getAttribute("header_type")||"UInt32";if(c&&"vtkZLibDataCompressor"!==c)return console.error("Invalid compressor",c),!1;if(d&&"LittleEndian"!==d)return console.error("Only LittleEndian encoding is supported"),!1;if(u!==t.dataType)return console.error("Invalid data type",u,"expecting",t.dataType),!1;if(CJ(l,"AppendedData")){var h=CJ(l,"AppendedData"),g=h.getAttribute("encoding"),v=s.filter(function(e){var t=e.node;return t.nodeType===Node.ELEMENT_NODE&&"appended"===t.getAttribute("format")&&t.hasAttribute("offset")},!1,!0).map(function(e){return{node:e.node,offset:Number(e.node.getAttribute("offset"))}});v.sort(function(e,t){return e.offset-t.offset});var y=t.binaryBuffer;"base64"===g&&(y=h.textContent.trim().substr(1));for(var b=[],x=0;x<v.length;++x){var w=v[x].offset,A=0;A=x===v.length-1?y.length||y.byteLength:v[x+1].offset,"base64"===g?b.push(new Uint8Array(f.toArrayBuffer(y.substring(w,A)))):b.push(new Uint8Array(y.slice(w,A)))}if("vtkZLibDataCompressor"===c)for(var C=0;C<b.length;++C){var S=C2(b[C],p),_=new Uint8Array(S.length+C$[p]);new CQ[p](_.buffer,0,1)[0]=S.length,_.set(S,C$[p]),b[C]=_}for(var T=b.reduce(function(e,t){return e+t.length},0),O=new ArrayBuffer(T),P=new Uint8Array(O),M=0,E=0;M<b.length;++M)v[M].node.setAttribute("offset",E),P.set(b[M],E),E+=b[M].length;if(t.binaryBuffer=O,!t.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}e.parseXML(l,u,c,d,p);var D=l.getElementsByTagName(u)[0].getElementsByTagName("FieldData")[0];if(D)for(var I,k,N,R=(I=t.binaryBuffer,k=m(D.getElementsByTagName("DataArray")).map(function(e){return nH.newInstance(C3(Number(e.getAttribute("NumberOfTuples")),e,c,0,p,I))}),N=m(D.getElementsByTagName("Array")).filter(function(e){return"String"===e.getAttribute("type")}).map(function(e){return se.newInstance(function(e,t,n,i,o){var a=e.getAttribute("Name"),s=e.getAttribute("format"),l=Number(e.getAttribute("NumberOfComponents")||"1"),u=Number(e.getAttribute("NumberOfTuples")||"1")*l,c=[];if("ascii"===s)for(var d=e.firstChild.nodeValue.trim().split(/\s+/),p=0,h=[];c.length<u;){var g=Number(d[p++]);0===g?(c.push(h.join("")),h.length=0):h.push(String.fromCharCode(g))}else if("binary"===s){var v=new Uint8Array(f.toArrayBuffer(e.firstChild.nodeValue.trim()));if("vtkZLibDataCompressor"===t){var y=C2(v,i);c.push.apply(c,m(C4(y)))}else{var b=C1(v,"UInt8",i);c.push.apply(c,m(C4(b)))}}else if("appended"===s){var x=C1(new Uint8Array(o,Number(e.getAttribute("offset"))),"UInt8",i);c.push.apply(c,m(C4(x)))}else eE.vtkErrorMacro("Format not supported: ".concat(s));return{name:a,values:c,numberOfComponents:l}}(e,c,0,p,I))}),[].concat(m(k),m(N))),B=0;B<t.output.length;B++)for(var L=t.output[B].getFieldData(),F=0;F<R.length;F++)L.addArray(R[F]);return!0},e.requestData=function(n,i){e.parseAsArrayBuffer(t.rawDataBuffer)}},processDataArray:C3,processFieldData:function(e,t,n,i,o,a,s){if(t){var l={};["Scalars","Vectors","Normals","Tensors","TCoords"].forEach(function(e){var i=t.getAttribute(e);i&&(l[i]=n["set".concat(e)])});for(var u=t.getElementsByTagName("DataArray"),c=u.length,d=0;d<c;d++){var f=u[d],p=nH.newInstance(C3(e,f,i,0,a,s));(l[p.getName()]||n.addArray)(p)}}},processCells:function(e,t,n,i,o,a){for(var s={},l=t.getElementsByTagName("DataArray"),u=0;u<l.length;u++){var c=l[u];s[c.getAttribute("Name")]=c}var d=C3(e,s.offsets,n,0,o,a).values,f=d[d.length-1],p=C3(f,s.connectivity,n,0,o,a).values,h=new Uint32Array(e+f),m=0,g=0;return d.forEach(function(e){var t=e-g;h[m++]=t;for(var n=0;n<t;n++)h[m++]=p[g+n];g=e}),h}},C8={dataType:"ImageData"};function C9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,C8,n),C6.extend(e,t,n),t.classHierarchy.push("vtkXMLImageDataReader"),e.parseXML=function(e,n,i,o,a){for(var s,l=e.getElementsByTagName(t.dataType)[0],u=l.getAttribute("Origin").split(" ").map(function(e){return Number(e)}),c=l.getAttribute("Spacing").split(" ").map(function(e){return Number(e)}),d=null==(s=l.getAttribute("Direction"))?void 0:s.split(" ").map(function(e){return Number(e)}),f=l.getElementsByTagName("Piece"),p=f.length,h=0;h<p;h++){var m=f[h],g=m.getAttribute("Extent").split(" ").map(function(e){return Number(e)}),v=aP.newInstance({origin:u,spacing:c,direction:d,extent:g});C6.processFieldData(v.getNumberOfPoints(),m.getElementsByTagName("PointData")[0],v.getPointData(),i,o,a,t.binaryBuffer),C6.processFieldData(v.getNumberOfCells(),m.getElementsByTagName("CellData")[0],v.getCellData(),i,o,a,t.binaryBuffer),t.output[h]=v}}}var C7={newInstance:eE.newInstance(C9,"vtkXMLImageDataReader"),extend:C9},Se={ASCII:"ascii",BINARY:"binary",APPENDED:"appended"},St={Int8Array:"Int8",Uint8Array:"UInt8",Int16Array:"Int16",Uint16Array:"UInt16",Int32Array:"Int32",Uint32Array:"UInt32",Float32Array:"Float32",Float64Array:"Float64"};function Sn(e){var t,n,i;return t||(t={}),(n=bM()).p(e),bF(i=bE(e,t,2,4),t),bR(i,i.length-4,n.d()),i}function Sr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vtkZLibDataCompressor";if(t===Se.ASCII)return e.getData().join(" ");if(t===Se.BINARY){if("vtkZLibDataCompressor"===i){var o=e.getElementComponentSize(),a=e.getNumberOfValues()*o,s=a%n,l=Math.trunc(a/n)+ +!!s,u=new Uint32Array(3+l);u[0]=l,u[1]=n,u[2]=s;for(var c=0,f=[],p=0,h=l-1,m=0;m<l;++m){var g=0===s||m<h?n:u[2],v=new Uint8Array(e.getData().buffer,p,g);p+=n;var y=Sn(v);f.push(y),u[3+m]=y.length,c+=y.length}for(var b=new Uint8Array(c),x=0,w=new Uint8Array(u.buffer),A=0;A<l;++A)b.set(f[A],x),x+=u[3+A];return d(w.buffer)+d(b.buffer)}throw Error("Only vtkZLibDataCompressor is supported")}if(t===Se.APPENDED)throw Error("Appended format is not supported");throw Error("Format is not supported")}var Si={blockSize:1024,format:Se.BINARY},So={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Si,n),eE.obj(e,t),eE.setGet(e,t,["blockSize","format"]),eE.get(e,t,["file"]),eE.algo(e,t,1,0),t.classHierarchy.push("vtkXMLWriter"),e.create=function(e){return(0,CZ.create)().ele("VTKFile").att("type",t.dataType).att("version","0.1").att("byte_order","LittleEndian").att("header_type","UInt32").att("compressor",t.format===Se.ASCII?"":"vtkZLibDataCompressor")},e.write=function(t){return e.create(t).end({pretty:!0})},e.processDataSetAttributes=function(t,n,i){var o={};["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"].forEach(function(e){var t=i.getActiveAttribute(e);t&&(o[e]=t.getName())});for(var a=t.ele(n,o),s=0;s<i.getNumberOfArrays();++s)e.processDataArray(a,i.getArrayByIndex(s));return a},e.processDataArray=function(t,n){return t.ele("DataArray",{type:St[n.getDataType()],Name:n.getName(),format:e.getFormat(),RangeMin:n.getRange()[0],RangeMax:n.getRange()[1],NumberOfComponents:n.getNumberOfComponents()}).txt(Sr(n,e.getFormat(),e.getBlockSize()))},e.requestData=function(n,i){t.file=e.write(n)}},compressBlock:Sn,processDataArray:Sr,FormatTypes:Se};function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Ss={dataType:"ImageData"};function Sl(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ss,i),So.extend(e,t,i),t.classHierarchy.push("vtkXMLImageDataWriter"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.create=function(t){var i=n.create(t),o=i.ele("ImageData",{WholeExtent:t.getExtent().join(" "),Origin:t.getOrigin().join(" "),Spacing:t.getSpacing().join(" "),Direction:t.getDirection().join(" ")}).ele("Piece",{Extent:t.getExtent().join(" ")});return e.processDataSetAttributes(o,"PointData",t.getPointData()),e.processDataSetAttributes(o,"CellData",t.getCellData()),i}}var Su={newInstance:eE.newInstance(Sl,"vtkXMLImageDataWriter"),extend:Sl},Sc={dataType:"PolyData"};function Sd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sc,n),C6.extend(e,t,n),t.classHierarchy.push("vtkXMLPolyDataReader"),e.parseXML=function(e,n,i,o,a){for(var s=e.getElementsByTagName(t.dataType)[0].getElementsByTagName("Piece"),l=s.length,u=0;u<l;u++)!function(){var e=lC.newInstance(),n=s[u],l=function(e,t,n,i,o,a,s){var l=Number(n.getAttribute("NumberOf".concat(t)));if(l>0){var u=n.getElementsByTagName(t)[0].getElementsByTagName("DataArray")[0],c=C6.processDataArray(l,u,i,o,a,s),d=c.values,f=c.numberOfComponents;e["get".concat(t)]().setData(d,f)}return l}(e,"Points",n,i,o,a,t.binaryBuffer),c=0;["Verts","Lines","Strips","Polys"].forEach(function(s){c+=function(e,t,n,i,o,a,s){var l=Number(n.getAttribute("NumberOf".concat(t)));if(l>0){var u=C6.processCells(l,n.getElementsByTagName(t)[0],i,o,a,s);e["get".concat(t)]().setData(u)}return l}(e,s,n,i,o,a,t.binaryBuffer)}),C6.processFieldData(l,n.getElementsByTagName("PointData")[0],e.getPointData(),i,o,a,t.binaryBuffer),C6.processFieldData(c,n.getElementsByTagName("CellData")[0],e.getCellData(),i,o,a,t.binaryBuffer),t.output[u]=e}()}}var Sf=eE.newInstance(Sd,"vtkXMLPolyDataReader");function Sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Sh={dataType:"PolyData"};function Sm(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sh,i),So.extend(e,t,i),t.classHierarchy.push("vtkXMLPolyDataWriter"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.create=function(t){var i=n.create(t),o=i.ele("PolyData",{}).ele("Piece",{NumberOfPoints:t.getPoints().getNumberOfPoints(),NumberOfVerts:t.getNumberOfVerts(),NumberOfLines:t.getNumberOfLines(),NumberOfStrips:t.getNumberOfStrips(),NumberOfPolys:t.getNumberOfPolys()});return e.processDataSetAttributes(o,"PointData",t.getPointData()),e.processDataSetAttributes(o,"CellData",t.getCellData()),e.processDataSetAttributes(o,"FieldData",t.getFieldData()),e.processDataArray(o.ele("Points"),t.getPoints()),ly.forEach(function(n){for(var i=n.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e){return e.toUpperCase()}).replace(/\s+/g,""),a=[],s=[],l=t["get".concat(i)]().getData(),u=l[0],c=0,d=0;d<l.length;){u=l[d++];for(var f=0;f<u;++f)a.push(l[d++]);c+=u,s.push(c)}var p=nH.newInstance({numberOfComponents:1,name:"connectivity",values:Int32Array.from(a)}),h=nH.newInstance({numberOfComponents:1,name:"offsets",values:Int32Array.from(s)}),m=o.ele(i);e.processDataArray(m,p),e.processDataArray(m,h)}),i}}var Sg={Core:{BinaryHelper:xo,DataAccessHelper:dA,vtkHttpDataSetReader:xp,vtkHttpSceneLoader:ww,vtkImageStream:wP,vtkResourceLoader:{loadScript:function(e){return new Promise(function(t,n){if(-1===wM.indexOf(e)){wM.push(e);var i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=t,i.onerror=n,document.body.appendChild(i)}else t(!1)})},loadCSS:function(e){return new Promise(function(t,n){if(-1===wM.indexOf(e)){wM.push(e);var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onload=t,i.onerror=n,document.head.appendChild(i)}else t(!1)})},LOADED_URLS:wM},vtkWSLinkClient:{newInstance:wN,extend:wk,setSmartConnectClass:function(e){wE=e}}},Geometry:{vtkSTLReader:wV,vtkPLYReader:wJ,vtkDracoReader:w8,vtkSTLWriter:Aa,vtkPLYWriter:Ag,vtkGLTFImporter:A4,vtkIFCImporter:{newInstance:A9,extend:A8,setIFCAPI:function(e){A3=e}}},Legacy:{vtkLegacyAsciiParser:Co,vtkPolyDataReader:{newInstance:Cl,extend:Cs}},Misc:CY,XML:{vtkXMLImageDataReader:C7,vtkXMLImageDataWriter:Su,vtkXMLPolyDataReader:{newInstance:Sf,extend:Sd},vtkXMLPolyDataWriter:{newInstance:eE.newInstance(Sm,"vtkXMLPolyDataWriter"),extend:Sm},vtkXMLReader:C6,vtkXMLWriter:So}},Sv=JSON.parse('[{"Name":"KAAMS","IndexedColors":[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,0.63,0.63,1,0.67,0.5,0.33,1,0.5,0.75,0.53,0.35,0.7,1,0.75,0.5],"Annotations":[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{"ColorSpace":"Diverging","Name":"Cool to Warm","NanColor":[1,1,0],"RGBPoints":[0,0.23137254902,0.298039215686,0.752941176471,0.5,0.865,0.865,0.865,1,0.705882352941,0.0156862745098,0.149019607843]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Cool to Warm (Extended)","NanColor":[0.25,0,0],"RGBPoints":[0,0,0,0.34902,0.03125,0.039216,0.062745,0.380392,0.0625,0.062745,0.117647,0.411765,0.09375,0.090196,0.184314,0.45098,0.125,0.12549,0.262745,0.501961,0.15625,0.160784,0.337255,0.541176,0.1875,0.2,0.396078,0.568627,0.21875,0.239216,0.454902,0.6,0.25,0.286275,0.521569,0.65098,0.28125,0.337255,0.592157,0.701961,0.3125,0.388235,0.654902,0.74902,0.34375,0.466667,0.737255,0.819608,0.375,0.572549,0.819608,0.878431,0.40625,0.654902,0.866667,0.909804,0.4375,0.752941,0.917647,0.941176,0.46875,0.823529,0.956863,0.968627,0.5,0.988235,0.960784,0.901961,0.5,0.941176,0.984314,0.988235,0.52,0.988235,0.945098,0.85098,0.54,0.980392,0.898039,0.784314,0.5625,0.968627,0.835294,0.698039,0.59375,0.94902,0.733333,0.588235,0.625,0.929412,0.65098,0.509804,0.65625,0.909804,0.564706,0.435294,0.6875,0.878431,0.458824,0.352941,0.71875,0.839216,0.388235,0.286275,0.75,0.760784,0.294118,0.211765,0.78125,0.701961,0.211765,0.168627,0.8125,0.65098,0.156863,0.129412,0.84375,0.6,0.094118,0.094118,0.875,0.54902,0.066667,0.098039,0.90625,0.501961,0.05098,0.12549,0.9375,0.45098,0.054902,0.172549,0.96875,0.4,0.054902,0.192157,1,0.34902,0.070588,0.211765]},{"ColorSpace":"Diverging","Name":"Warm to Cool","NanColor":[1,1,0],"RGBPoints":[0,0.705882352941,0.0156862745098,0.149019607843,0.5,0.865,0.865,0.865,1,0.23137254902,0.298039215686,0.752941176471]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Warm to Cool (Extended)","NanColor":[0.250004,0,0],"RGBPoints":[0,0.34902,0,0.129412,0.025,0.4,0.00392157,0.101961,0.05,0.470588,0.0156863,0.0901961,0.075,0.54902,0.027451,0.0705882,0.1,0.619608,0.0627451,0.0431373,0.125,0.690196,0.12549,0.0627451,0.15,0.741176,0.184314,0.0745098,0.175,0.788235,0.266667,0.0941176,0.2,0.811765,0.345098,0.113725,0.225,0.831373,0.411765,0.133333,0.25,0.85098,0.47451,0.145098,0.275,0.870588,0.54902,0.156863,0.3,0.878431,0.619608,0.168627,0.325,0.890196,0.658824,0.196078,0.35,0.909804,0.717647,0.235294,0.375,0.929412,0.776471,0.278431,0.395522,0.94902,0.823529,0.321569,0.418905,0.968627,0.87451,0.407843,0.444278,0.980392,0.917647,0.509804,0.470149,0.988235,0.956863,0.643137,0.483582,0.992157,0.964706,0.713725,0.499,0.988235,0.980392,0.870588,0.5,1,1,1,0.501,0.913725,0.988235,0.937255,0.516418,0.827451,0.980392,0.886275,0.531343,0.764706,0.980392,0.866667,0.546766,0.658824,0.980392,0.843137,0.564179,0.572549,0.964706,0.835294,0.587562,0.423529,0.941176,0.87451,0.60597,0.262745,0.901961,0.862745,0.629851,0.0705882,0.854902,0.870588,0.651741,0.0509804,0.8,0.85098,0.681592,0.0235294,0.709804,0.831373,0.712935,0.0313725,0.615686,0.811765,0.75,0.0313725,0.537255,0.788235,0.775,0.0392157,0.466667,0.768627,0.8,0.0509804,0.396078,0.741176,0.825,0.054902,0.317647,0.709804,0.85,0.054902,0.243137,0.678431,0.875,0.0431373,0.164706,0.639216,0.9,0.0313725,0.0980392,0.6,0.925,0.0392157,0.0392157,0.560784,0.95,0.105882,0.0509804,0.509804,0.975,0.113725,0.0235294,0.45098,1,0.12549,0,0.380392]},{"ColorSpace":"RGB","Name":"Rainbow Desaturated","NanColor":[1,1,0],"RGBPoints":[0,0.278431372549,0.278431372549,0.858823529412,0.143,0,0,0.360784313725,0.285,0,1,1,0.429,0,0.501960784314,0,0.571,1,1,0,0.714,1,0.380392156863,0,0.857,0.419607843137,0,0,1,0.878431372549,0.301960784314,0.301960784314]},{"ColorSpace":"RGB","Name":"Cold and Hot","NanColor":[1,1,0],"RGBPoints":[0,0,1,1,0.45,0,0,1,0.5,0,0,0.501960784314,0.55,1,0,0,1,1,1,0]},{"ColorSpace":"RGB","Name":"Black-Body Radiation","NanColor":[0,0.498039215686,1],"RGBPoints":[0,0,0,0,0.4,0.901960784314,0,0,0.8,0.901960784314,0.901960784314,0,1,1,1,1]},{"ColorSpace":"RGB","Name":"X Ray","NanColor":[1,0,0],"RGBPoints":[0,1,1,1,1,0,0,0]},{"ColorSpace":"RGB","Name":"Grayscale","NanColor":[1,0,0],"RGBPoints":[0,0,0,0,1,1,1,1]},{"ColorSpace":"RGB","Name":"Grayscale-DICOM-sigmoid","Notes":"This is a 16 point sample of a sigmoid grayscale colormap described in the DICOM standard. See equation C.11-1 in section C.11.2","NanColor":[1,0,0],"BelowRangeColor":[0,0,0],"AboveRangeColor":[1,1,1],"RGBPoints":[-1,0.01798620996209156,0.01798620996209156,0.01798620996209156,-0.8666666666666667,0.030275691986950463,0.030275691986950463,0.030275691986950463,-0.7333333333333334,0.05053016223541345,0.05053016223541345,0.05053016223541345,-0.6,0.08317269649392238,0.08317269649392238,0.08317269649392238,-0.4666666666666667,0.13392788832407365,0.13392788832407365,0.13392788832407365,-0.33333333333333337,0.2086085273260449,0.2086085273260449,0.2086085273260449,-0.19999999999999996,0.31002551887238755,0.31002551887238755,0.31002551887238755,-0.06666666666666665,0.4337256058045608,0.4337256058045608,0.4337256058045608,0.06666666666666665,0.5662743941954392,0.5662743941954392,0.5662743941954392,0.19999999999999996,0.6899744811276125,0.6899744811276125,0.6899744811276125,0.33333333333333326,0.791391472673955,0.791391472673955,0.791391472673955,0.46666666666666656,0.8660721116759263,0.8660721116759263,0.8660721116759263,0.6000000000000001,0.9168273035060777,0.9168273035060777,0.9168273035060777,0.7333333333333334,0.9494698377645865,0.9494698377645865,0.9494698377645865,0.8666666666666667,0.9697243080130495,0.9697243080130495,0.9697243080130495,1,0.9820137900379085,0.9820137900379085,0.9820137900379085]},{"ColorSpace":"RGB","Name":"Inverted-Grayscale","NanColor":[1,0,0],"RGBPoints":[0,1,1,1,1,0,0,0]},{"ColorSpace":"RGB","Name":"Inverted-Grayscale-DICOM-sigmoid","Notes":"This is a 16 point sample of a sigmoid inverted-grayscale colormap described in the DICOM standard. See equation C.11-1 in section C.11.2","BelowRangeColor":[1,1,1],"AboveRangeColor":[0,0,0],"NanColor":[1,0,0],"RGBPoints":[-1,0.9820137900379085,0.9820137900379085,0.9820137900379085,-0.8666666666666667,0.9697243080130495,0.9697243080130495,0.9697243080130495,-0.7333333333333334,0.9494698377645866,0.9494698377645866,0.9494698377645866,-0.6,0.9168273035060777,0.9168273035060777,0.9168273035060777,-0.4666666666666667,0.8660721116759263,0.8660721116759263,0.8660721116759263,-0.33333333333333337,0.791391472673955,0.791391472673955,0.791391472673955,-0.19999999999999996,0.6899744811276125,0.6899744811276125,0.6899744811276125,-0.06666666666666665,0.5662743941954391,0.5662743941954391,0.5662743941954391,0.06666666666666665,0.43372560580456077,0.43372560580456077,0.43372560580456077,0.19999999999999996,0.3100255188723875,0.3100255188723875,0.3100255188723875,0.33333333333333326,0.20860852732604496,0.20860852732604496,0.20860852732604496,0.46666666666666656,0.13392788832407365,0.13392788832407365,0.13392788832407365,0.6000000000000001,0.08317269649392234,0.08317269649392234,0.08317269649392234,0.7333333333333334,0.05053016223541351,0.05053016223541351,0.05053016223541351,0.8666666666666667,0.03027569198695046,0.03027569198695046,0.03027569198695046,1,0.01798620996209155,0.01798620996209155,0.01798620996209155]},{"ColorSpace":"RGB","Name":"BkRd","NanColor":[0,1,1],"RGBPoints":[0,0,0,0,1,1,0,0]},{"ColorSpace":"RGB","Name":"BkGn","NanColor":[1,0,1],"RGBPoints":[0,0,0,0,1,0,1,0]},{"ColorSpace":"RGB","Name":"BkBu","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,1,0,0,1]},{"ColorSpace":"RGB","Name":"BkMa","NanColor":[0,1,0],"RGBPoints":[0,0,0,0,1,1,0,1]},{"ColorSpace":"RGB","Name":"BkCy","NanColor":[0,1,1],"RGBPoints":[0,0,0,0,1,0,1,1]},{"ColorSpace":"RGB","Name":"Black, Blue and White","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,0.333,0,0,0.501960784314,0.666,0,0.501960784314,1,1,1,1,1]},{"ColorSpace":"RGB","Name":"Black, Orange and White","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,0.333,0.501960784314,0,0,0.666,1,0.501960784314,0,1,1,1,1]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Linear YGB 1211g","NanColor":[0.25,0,0],"RGBPoints":[0,1,0.988235,0.968627,0.02,1,0.952941,0.878431,0.05,0.968627,0.905882,0.776471,0.1,0.94902,0.898039,0.647059,0.15,0.901961,0.878431,0.556863,0.2,0.847059,0.858824,0.482353,0.25,0.690196,0.819608,0.435294,0.3,0.513725,0.768627,0.384314,0.35,0.337255,0.721569,0.337255,0.4,0.278431,0.658824,0.392157,0.45,0.231373,0.639216,0.435294,0.5,0.203922,0.6,0.486275,0.55,0.172549,0.568627,0.537255,0.6,0.141176,0.517647,0.54902,0.65,0.133333,0.458824,0.541176,0.7,0.12549,0.396078,0.529412,0.75,0.117647,0.321569,0.521569,0.8,0.121569,0.258824,0.509804,0.85,0.133333,0.227451,0.501961,0.9,0.145098,0.192157,0.490196,0.95,0.188235,0.164706,0.470588,1,0.258824,0.196078,0.439216]},{"ColorSpace":"CIELAB","Creator":"Francesca Samsel","Name":"Linear Green (Gr4L)","NanColor":[0.25,0,0],"RGBPoints":[0,0.054902,0.109804,0.121569,0.05,0.07451,0.172549,0.180392,0.1,0.086275,0.231373,0.219608,0.15,0.094118,0.278431,0.25098,0.2,0.109804,0.34902,0.278431,0.25,0.113725,0.4,0.278431,0.3,0.117647,0.45098,0.270588,0.35,0.117647,0.490196,0.243137,0.4,0.113725,0.521569,0.203922,0.45,0.109804,0.54902,0.152941,0.5,0.082353,0.588235,0.082353,0.55,0.109804,0.631373,0.05098,0.6,0.211765,0.678431,0.082353,0.65,0.317647,0.721569,0.113725,0.7,0.431373,0.760784,0.160784,0.75,0.556863,0.8,0.239216,0.8,0.666667,0.839216,0.294118,0.85,0.784314,0.878431,0.396078,0.9,0.886275,0.921569,0.533333,0.95,0.960784,0.94902,0.670588,1,1,0.984314,0.901961]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Linear Blue (8_31f)","NanColor":[0.25,0,0],"RGBPoints":[0,0.960784,1,0.980392,0.05,0.815686,0.960784,0.913725,0.1,0.670588,0.929412,0.870588,0.15,0.556863,0.901961,0.843137,0.2,0.478431,0.870588,0.823529,0.25,0.439216,0.831373,0.803922,0.3,0.4,0.8,0.788235,0.35,0.376471,0.768627,0.768627,0.4,0.34902,0.709804,0.729412,0.45,0.32549,0.654902,0.690196,0.5,0.301961,0.607843,0.658824,0.55,0.247059,0.545098,0.619608,0.6,0.239216,0.494118,0.580392,0.65,0.227451,0.439216,0.541176,0.7,0.227451,0.403922,0.521569,0.75,0.231373,0.368627,0.501961,0.8,0.227451,0.321569,0.470588,0.85,0.219608,0.282353,0.439216,0.9,0.192157,0.235294,0.4,0.95,0.160784,0.184314,0.34902,1,0.133333,0.12549,0.301961]},{"ColorSpace":"HSV","Name":"Blue to Red Rainbow","NanColor":[0.498039215686,0.498039215686,0.498039215686],"RGBPoints":[0,0,0,1,1,1,0,0]},{"ColorSpace":"HSV","Name":"Red to Blue Rainbow","NanColor":[0.498039215686,0.498039215686,0.498039215686],"RGBPoints":[0,1,0,0,1,0,0,1]},{"ColorSpace":"RGB","Name":"Rainbow Blended White","NanColor":[1,1,0],"RGBPoints":[0,1,1,1,0.17,0,0,1,0.34,0,1,1,0.5,0,1,0,0.67,1,1,0,0.84,1,0,0,1,0.878431372549,0,1]},{"ColorSpace":"RGB","Name":"Rainbow Blended Grey","NanColor":[1,1,0],"RGBPoints":[0,0.317647058824,0.341176470588,0.43137254902,0.17,0,0,1,0.34,0,1,1,0.5,0,1,0,0.67,1,1,0,0.84,1,0,0,1,0.878431372549,0,1]},{"ColorSpace":"RGB","Name":"Rainbow Blended Black","NanColor":[1,1,0],"RGBPoints":[0,0,0,0,0.17,0,0,1,0.34,0,1,1,0.5,0,1,0,0.67,1,1,0,0.84,1,0,0,1,0.878431372549,0,1]},{"ColorSpace":"RGB","Name":"Blue to Yellow","NanColor":[1,0,0],"RGBPoints":[0,0.0392156862745,0.0392156862745,0.949019607843,1,0.949019607843,0.949019607843,0.0392156862745]},{"ColorSpace":"HSV","Name":"blot","RGBPoints":[0,0,0,1,0.166,0,0,1,0.167,1,0,1,0.332,1,0,1,0.333,0,1,1,0.5,0,1,1,0.501,0,1,0,0.666,0,1,0,0.667,1,1,0,0.832,1,1,0,0.833,1,0,0,1,1,0,0]},{"ColorSpace":"Lab","Name":"CIELab Blue to Red","NanColor":[1,1,0],"RGBPoints":[0,0,0.6,0.749019607843,1,0.76862745098,0.466666666667,0.341176470588]},{"ColorSpace":"RGB","Name":"jet","RGBPoints":[-1,0,0,0.5625,-0.777778,0,0,1,-0.269841,0,1,1,-0.015873,0.5,1,0.5,0.238095,1,1,0,0.746032,1,0,0,1,0.5,0,0]},{"ColorSpace":"RGB","Name":"rainbow","RGBPoints":[-1,0,0,1,-0.5,0,1,1,0,0,1,0,0.5,1,1,0,1,1,0,0]},{"ColorSpace":"Lab","Name":"erdc_rainbow_bright","RGBPoints":[-1,0.32549,0.14902,0.960784,-0.866221,0.297047,0.375586,0.963836,-0.732441,0.180302,0.536818,0.964627,-0.598662,0.1302,0.649207,0.929647,-0.464883,0.0445143,0.749654,0.855998,-0.331104,0.0271325,0.830713,0.721527,-0.197324,0.259504,0.866145,0.543555,-0.0635452,0.428364,0.890725,0.329819,0.0702341,0.568503,0.898508,0.187623,0.204013,0.738259,0.890317,0.0825461,0.337793,0.84546,0.86136,0.0147555,0.471572,0.912191,0.808018,0,0.605351,0.962848,0.710445,0,0.73913,0.999469,0.600258,0.0176284,0.87291,0.994156,0.445975,0.193912,1,0.980407,0.247105,0.262699]},{"ColorSpace":"Lab","Name":"erdc_rainbow_dark","RGBPoints":[-1,0,0,0.423499,-0.866221,0,0.119346,0.529237,-0.732441,0,0.238691,0.634976,-0.598662,0,0.346852,0.68788,-0.464883,0,0.45022,0.718141,-0.331104,0,0.553554,0.664839,-0.197324,0,0.651082,0.519303,-0.0635452,0.115841,0.72479,0.352857,0.0702341,0.326771,0.781195,0.140187,0.204013,0.522765,0.798524,0.0284624,0.337793,0.703162,0.788685,0.00885756,0.471572,0.845118,0.751133,0,0.605351,0.955734,0.690825,0,0.73913,0.995402,0.567916,0.0618524,0.87291,0.987712,0.403398,0.164851,1,0.980407,0.247105,0.262699]},{"ColorSpace":"Lab","Name":"nic_CubicL","RGBPoints":[-1,0.479965,0.0118108,0.5307,-0.87451,0.522213,0.0551282,0.706919,-0.74902,0.50839,0.237278,0.867764,-0.623529,0.451617,0.373834,0.987255,-0.498039,0.39365,0.497255,0.97506,-0.372549,0.328631,0.599639,0.891843,-0.247059,0.250043,0.690286,0.778553,-0.121569,0.249656,0.764905,0.645857,0.00392157,0.297954,0.821466,0.50449,0.129412,0.337509,0.872595,0.358447,0.254902,0.430011,0.913789,0.297079,0.380392,0.587191,0.931381,0.333353,0.505882,0.727937,0.93591,0.353742,0.631373,0.826403,0.921081,0.365066,0.756863,0.893201,0.846317,0.372662,0.882353,0.965347,0.73884,0.378506,1,0.983235,0.597451,0.366856]},{"ColorSpace":"Lab","Name":"nic_CubicYF","RGBPoints":[-1,0.5151,0.0482,0.6697,-0.87451,0.520711,0.168955,0.800574,-0.74902,0.493694,0.278596,0.911824,-0.623529,0.440026,0.369475,0.984978,-0.498039,0.398932,0.457593,0.987053,-0.372549,0.350651,0.540644,0.929608,-0.247059,0.298827,0.615625,0.857729,-0.121569,0.239928,0.685061,0.769531,0.00392157,0.228832,0.739349,0.673287,0.129412,0.263297,0.78608,0.569988,0.254902,0.298107,0.828337,0.460214,0.380392,0.33092,0.864071,0.352674,0.505882,0.38306,0.898169,0.287309,0.631373,0.49023,0.917481,0.307961,0.756863,0.62372,0.926026,0.332309,0.882353,0.717458,0.92527,0.342476,1,0.8,0.9255,0.3529]},{"ColorSpace":"Lab","Name":"gist_earth","RGBPoints":[-1,0,0,0,-0.87451,0.239216,0.027451,0.415686,-0.74902,0.0901961,0.254902,0.556863,-0.623529,0.0941176,0.352941,0.54902,-0.498039,0.105882,0.435294,0.533333,-0.372549,0.12549,0.52549,0.501961,-0.247059,0.156863,0.596078,0.443137,-0.121569,0.196078,0.65098,0.380392,0.00392157,0.282353,0.717647,0.301961,0.129412,0.466667,0.772549,0.27451,0.254902,0.678431,0.784314,0.309804,0.380392,0.901961,0.756863,0.376471,0.505882,0.992157,0.705882,0.521569,0.631373,1,0.721569,0.701961,0.756863,1,0.784314,0.784314,0.882353,1,0.866667,0.866667,1,1,1,1]},{"ColorSpace":"Lab","Name":"2hot","RGBPoints":[-1,0.0416667,0,0,-0.873016,0.208333,0,0,-0.746032,0.375,0,0,-0.619048,0.541667,0,0,-0.492063,0.708333,0,0,-0.365079,0.854137,0,0,-0.238095,0.937488,0.039062,0,-0.111111,1,0.208333,0,0.015873,1,0.375,0,0.142857,1,0.541667,0,0.269841,1,0.708333,0,0.396825,1,0.858805,0.03125,0.52381,1,0.947392,0.15625,0.650794,1,1,0.3125,0.777778,1,1,0.5625,0.904762,1,1,0.8125,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_red2yellow_BW","RGBPoints":[-1,7.54296e-7,0,0.0000109827,-0.87451,0.18285,0.0264094,0,-0.74902,0.3066,0,0,-0.623529,0.422841,0,0,-0.498039,0.522945,0,0,-0.372549,0.605721,0,0,-0.247059,0.672502,0.14168,0,-0.121569,0.728167,0.244025,0,0.00392157,0.781215,0.333454,0,0.129412,0.825,0.423586,0,0.254902,0.855893,0.516793,0,0.380392,0.880491,0.608846,0,0.505882,0.910305,0.695505,0,0.631373,0.94109,0.779067,0.223528,0.756863,0.967873,0.858572,0.473521,0.882353,0.986815,0.933211,0.751583,1,1,1,0.999997]},{"ColorSpace":"Lab","Name":"erdc_marine2gold_BW","RGBPoints":[-1,1.11641e-7,0,0.00000162551,-0.87451,0.0413146,0.0619808,0.209857,-0.74902,0.0185557,0.101341,0.350684,-0.623529,0.00486405,0.149847,0.461054,-0.498039,0.0836345,0.210845,0.517906,-0.372549,0.173222,0.276134,0.541793,-0.247059,0.259857,0.343877,0.535869,-0.121569,0.362299,0.408124,0.504293,0.00392157,0.468266,0.468276,0.468257,0.129412,0.582781,0.527545,0.374914,0.254902,0.691591,0.585251,0.274266,0.380392,0.784454,0.645091,0.247332,0.505882,0.862299,0.710383,0.27518,0.631373,0.920863,0.782923,0.351563,0.756863,0.955792,0.859699,0.533541,0.882353,0.976162,0.93433,0.780671,1,1,1,0.999983]},{"ColorSpace":"Lab","Name":"erdc_blue2gold_BW","RGBPoints":[-1,0,0,0,-0.87451,0.0742735,0.0440331,0.230013,-0.74902,0.125276,0.0258685,0.415826,-0.623529,0.143879,0.0163031,0.591346,-0.498039,0.212261,0.0627855,0.705239,-0.372549,0.306048,0.141178,0.763636,-0.247059,0.391537,0.232286,0.773263,-0.121569,0.461734,0.336633,0.708321,0.00392157,0.54209,0.427581,0.590007,0.129412,0.61704,0.508623,0.460978,0.254902,0.702703,0.579586,0.309117,0.380392,0.790336,0.644811,0.170397,0.505882,0.870173,0.710733,0.117134,0.631373,0.93656,0.781991,0.157144,0.756863,0.965672,0.862068,0.409836,0.882353,0.985751,0.936296,0.714162,1,1,1,0.999999]},{"ColorSpace":"Lab","Name":"erdc_sapphire2gold_BW","RGBPoints":[-1,0.107704,0.107708,0.107694,-0.87451,0.1851,0.112354,0.308554,-0.74902,0.236782,0.114233,0.48788,-0.623529,0.28296,0.126187,0.639464,-0.498039,0.344787,0.171643,0.739713,-0.372549,0.413325,0.242371,0.76913,-0.247059,0.481863,0.3131,0.719841,-0.121569,0.550402,0.383829,0.612222,0.00392157,0.61894,0.454558,0.51126,0.129412,0.687478,0.525287,0.39993,0.254902,0.756017,0.596016,0.289923,0.380392,0.824555,0.666745,0.255498,0.505882,0.892979,0.736822,0.27696,0.631373,0.938851,0.804966,0.351734,0.756863,0.966491,0.874853,0.53572,0.882353,0.982105,0.94153,0.782579,1,1,1,0.999986]},{"ColorSpace":"Lab","Name":"erdc_red2purple_BW","RGBPoints":[-1,0,0,0,-0.87451,0.167793,0.0166271,0.0431278,-0.74902,0.262608,0.0107595,0.0791181,-0.623529,0.351902,0.0101858,0.100926,-0.498039,0.441257,0.0160835,0.131919,-0.372549,0.5221,0.0555972,0.195625,-0.247059,0.593852,0.104294,0.310234,-0.121569,0.654628,0.158115,0.448486,0.00392157,0.707443,0.220914,0.570253,0.129412,0.749504,0.293268,0.67897,0.254902,0.781587,0.370517,0.779269,0.380392,0.809951,0.451099,0.855831,0.505882,0.84424,0.531462,0.900451,0.631373,0.865174,0.620901,0.91606,0.756863,0.875041,0.714054,0.910284,0.882353,0.880764,0.80554,0.896276,1,0.887572,0.887591,0.887556]},{"ColorSpace":"Lab","Name":"erdc_purple2pink_BW","RGBPoints":[-1,0,0,0,-0.87451,0.117562,0.0291202,0.175876,-0.74902,0.178368,0.0458476,0.285454,-0.623529,0.237731,0.0680173,0.387717,-0.498039,0.300877,0.0956291,0.484802,-0.372549,0.370929,0.136858,0.554985,-0.247059,0.449033,0.189273,0.58863,-0.121569,0.529971,0.245796,0.598587,0.00392157,0.609914,0.300643,0.610244,0.129412,0.697079,0.351286,0.616371,0.254902,0.785858,0.401991,0.617376,0.380392,0.862517,0.45745,0.64463,0.505882,0.91359,0.525462,0.705336,0.631373,0.932583,0.61064,0.767412,0.756863,0.922478,0.706966,0.817522,0.882353,0.901302,0.803071,0.856311,1,0.887571,0.887591,0.887549]},{"ColorSpace":"Lab","Name":"erdc_pbj_lin","RGBPoints":[-1,0,0,0,-0.87451,0.091821,0.0611476,0.10617,-0.74902,0.160311,0.0900022,0.192713,-0.623529,0.22484,0.12126,0.272128,-0.498039,0.291263,0.157469,0.340828,-0.372549,0.360015,0.200388,0.388903,-0.247059,0.437497,0.250058,0.387201,-0.121569,0.512636,0.304969,0.355955,0.00392157,0.582603,0.360874,0.33488,0.129412,0.655126,0.416374,0.306351,0.254902,0.725889,0.473329,0.279051,0.380392,0.778125,0.537928,0.302697,0.505882,0.815894,0.606931,0.382431,0.631373,0.839159,0.679308,0.497608,0.756863,0.854748,0.751666,0.631792,0.882353,0.869483,0.822508,0.768592,1,0.887572,0.887589,0.887565]},{"ColorSpace":"Lab","Name":"erdc_blue2green_muted","RGBPoints":[-1,0.107704,0.107708,0.107695,-0.87451,0.141522,0.13066,0.270741,-0.74902,0.180123,0.146119,0.42308,-0.623529,0.210161,0.169674,0.551795,-0.498039,0.239701,0.212939,0.634969,-0.372549,0.253916,0.282947,0.653641,-0.247059,0.242791,0.366933,0.608521,-0.121569,0.226302,0.446776,0.52693,0.00392157,0.236237,0.514689,0.458798,0.129412,0.274641,0.577589,0.376069,0.254902,0.349625,0.633993,0.288131,0.380392,0.4437,0.683677,0.260497,0.505882,0.536247,0.731214,0.285424,0.631373,0.628472,0.777128,0.349151,0.756863,0.718259,0.819287,0.496825,0.882353,0.804768,0.856164,0.703299,1,0.887571,0.887591,0.887548]},{"ColorSpace":"Lab","Name":"erdc_blue2green_BW","RGBPoints":[-1,3.63578e-7,0,0.00000529374,-0.87451,0.0539915,0.0577948,0.212806,-0.74902,0.0620393,0.0758942,0.388959,-0.623529,0.0697499,0.102032,0.54177,-0.498039,0.113295,0.156156,0.64334,-0.372549,0.152047,0.243196,0.670283,-0.247059,0.158096,0.344084,0.622864,-0.121569,0.151142,0.43922,0.532767,0.00392157,0.17155,0.521588,0.457719,0.129412,0.225861,0.599141,0.363997,0.254902,0.32328,0.67007,0.259083,0.380392,0.442344,0.733697,0.223754,0.505882,0.558409,0.794941,0.257411,0.631373,0.673875,0.854344,0.340822,0.756863,0.787244,0.909326,0.524717,0.882353,0.896483,0.958063,0.775914,1,1,1,0.999982]},{"ColorSpace":"Lab","Name":"GREEN-WHITE_LINEAR","RGBPoints":[-1,0,0,0,-0.87451,0,0.062745,0,-0.74902,0,0.12549,0,-0.623529,0,0.188235,0,-0.498039,0,0.25098,0,-0.372549,0,0.313725,0,-0.247059,0,0.376471,0,-0.121569,0.094118,0.439216,0,0.00392157,0.196078,0.501961,0,0.129412,0.294118,0.564706,0,0.254902,0.396078,0.627451,0,0.380392,0.498039,0.690196,0,0.505882,0.6,0.752941,0.145098,0.631373,0.701961,0.815686,0.364706,0.756863,0.8,0.878431,0.580392,0.882353,0.901961,0.941176,0.796078,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_green2yellow_BW","RGBPoints":[-1,0,0,0,-0.87451,0,0.105542,0.0603919,-0.74902,0,0.159454,0.104148,-0.623529,0,0.219502,0.15542,-0.498039,0,0.282276,0.203811,-0.372549,0,0.346331,0.235652,-0.247059,0,0.411765,0.235428,-0.121569,0,0.477177,0.217977,0.00392157,0.0593644,0.541635,0.21361,0.129412,0.233081,0.604722,0.210591,0.254902,0.369803,0.664942,0.226536,0.380392,0.498446,0.722367,0.288237,0.505882,0.601929,0.782244,0.380815,0.631373,0.703207,0.840497,0.512134,0.756863,0.803186,0.896433,0.674462,0.882353,0.903834,0.950266,0.846715,1,1,1,0.999981]},{"ColorSpace":"Lab","Name":"blue2cyan","RGBPoints":[-1,0,0,0,-0.87451,0,0.152941,0.364706,-0.74902,0,0.254902,0.470588,-0.623529,0,0.34902,0.572549,-0.498039,0,0.443137,0.670588,-0.372549,0,0.537255,0.772549,-0.247059,0,0.627451,0.870588,-0.121569,0,0.717647,0.964706,0.00392157,0.0784314,0.772549,1,0.129412,0.207843,0.858824,1,0.254902,0.32549,0.941176,1,0.380392,0.45098,1,1,0.505882,0.560784,1,1,0.631373,0.662745,1,1,0.756863,0.760784,1,1,0.882353,0.870588,1,1,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_blue2cyan_BW","RGBPoints":[-1,4.05298e-7,0,0.0000059012,-0.87451,0.0207526,0.0740933,0.18093,-0.74902,0,0.121033,0.30343,-0.623529,0,0.166892,0.416095,-0.498039,0,0.216768,0.524796,-0.372549,0.0164769,0.275471,0.608585,-0.247059,0.0544527,0.344824,0.659267,-0.121569,0.0880643,0.419118,0.688675,0.00392157,0.127938,0.492556,0.720256,0.129412,0.149476,0.566946,0.756918,0.254902,0.188961,0.641333,0.792122,0.380392,0.245482,0.715336,0.827609,0.505882,0.329216,0.786235,0.874761,0.631373,0.453558,0.852803,0.918466,0.756863,0.626281,0.910493,0.954,0.882353,0.82257,0.958709,0.980146,1,1,1,0.999989]},{"ColorSpace":"Lab","Name":"erdc_blue_BW","RGBPoints":[-1,0,0,0,-0.87451,0.0425591,0.0763529,0.150682,-0.74902,0.0569472,0.119154,0.275403,-0.623529,0.0635978,0.164772,0.395427,-0.498039,0.0774342,0.213851,0.510014,-0.372549,0.106815,0.267034,0.615102,-0.247059,0.122093,0.324649,0.720068,-0.121569,0.160851,0.387068,0.806956,0.00392157,0.213754,0.453516,0.878012,0.129412,0.26722,0.524656,0.932436,0.254902,0.326844,0.599279,0.968038,0.380392,0.403403,0.674712,0.984784,0.505882,0.499703,0.745519,1,0.631373,0.615055,0.813983,1,0.756863,0.74405,0.879228,1,0.882353,0.877909,0.941913,1,1,1,1,0.999996]},{"ColorSpace":"Lab","Name":"BLUE-WHITE","RGBPoints":[-1,0,0,0,-0.87451,0,0,0.082353,-0.74902,0,0,0.168627,-0.623529,0,0,0.254902,-0.498039,0,0,0.337255,-0.372549,0,0,0.423529,-0.247059,0,0,0.509804,-0.121569,0,0.101961,0.592157,0.00392157,0,0.203922,0.678431,0.129412,0,0.301961,0.764706,0.254902,0,0.403922,0.85098,0.380392,0,0.505882,0.933333,0.505882,0,0.603922,1,0.631373,0.254902,0.705882,1,0.756863,0.509804,0.807843,1,0.882353,0.764706,0.905882,1,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_purple_BW","RGBPoints":[-1,4.264e-8,0,6.20844e-7,-0.87451,0.100579,0.0593111,0.145666,-0.74902,0.167794,0.0889224,0.254953,-0.623529,0.231446,0.123339,0.360511,-0.498039,0.296699,0.163027,0.461278,-0.372549,0.363211,0.209286,0.55306,-0.247059,0.431136,0.260776,0.637195,-0.121569,0.498202,0.320012,0.705799,0.00392157,0.567456,0.380459,0.778091,0.129412,0.629381,0.445284,0.8448,0.254902,0.688373,0.517374,0.895694,0.380392,0.74891,0.590906,0.93976,0.505882,0.805017,0.667956,0.977626,0.631373,0.850914,0.752618,0.992396,0.756863,0.89724,0.838454,0.994093,0.882353,0.948461,0.922603,0.994449,1,1,1,0.999967]},{"ColorSpace":"Lab","Name":"erdc_magenta_BW","RGBPoints":[-1,0,0,0.0000254023,-0.87451,0.128696,0.0456782,0.11635,-0.74902,0.228133,0.0476299,0.201452,-0.623529,0.327273,0.0374065,0.282107,-0.498039,0.420953,0.0408166,0.35709,-0.372549,0.511562,0.0642203,0.430511,-0.247059,0.599552,0.102686,0.504257,-0.121569,0.684646,0.150536,0.579429,0.00392157,0.765817,0.205978,0.656062,0.129412,0.839176,0.27229,0.731807,0.254902,0.89536,0.357594,0.797309,0.380392,0.930238,0.457825,0.846984,0.505882,0.945921,0.564536,0.880571,0.631373,0.948995,0.670753,0.902279,0.756863,0.947124,0.772819,0.918171,0.882353,0.947265,0.869424,0.934352,1,0.954719,0.95475,0.954726]},{"ColorSpace":"Lab","Name":"magenta","RGBPoints":[-1,0,0,0,-0.87451,0.364706,0,0.152941,-0.74902,0.470588,0,0.254902,-0.623529,0.572549,0,0.34902,-0.498039,0.670588,0,0.443137,-0.372549,0.772549,0,0.537255,-0.247059,0.870588,0,0.627451,-0.121569,0.964706,0,0.717647,0.00392157,1,0.0784314,0.772549,0.129412,1,0.207843,0.858824,0.254902,1,0.32549,0.941176,0.380392,1,0.45098,1,0.505882,1,0.560784,1,0.631373,1,0.662745,1,0.756863,1,0.760784,1,0.882353,1,0.870588,1,1,1,1,1]},{"ColorSpace":"Lab","Name":"RED-PURPLE","RGBPoints":[-1,0,0,0,-0.87451,0.188235,0,0.007843,-0.74902,0.345098,0,0.035294,-0.623529,0.439216,0,0.098039,-0.498039,0.533333,0,0.152941,-0.372549,0.627451,0.015686,0.211765,-0.247059,0.721569,0.031373,0.266667,-0.121569,0.8,0.047059,0.329412,0.00392157,0.862745,0.047059,0.403922,0.129412,0.941176,0.062745,0.466667,0.254902,0.988235,0.078431,0.54902,0.380392,0.988235,0.141176,0.643137,0.505882,0.988235,0.25098,0.729412,0.631373,0.988235,0.376471,0.811765,0.756863,0.988235,0.54902,0.886275,0.882353,0.988235,0.752941,0.952941,1,0.996078,0.996078,0.996078]},{"ColorSpace":"Lab","Name":"erdc_red_BW","RGBPoints":[-1,0,0,0,-0.87451,0.147204,0.0480135,0.0401815,-0.74902,0.253411,0.0617478,0.0301333,-0.623529,0.356059,0.0746331,0.0446897,-0.498039,0.457731,0.0934935,0.0636931,-0.372549,0.557199,0.122714,0.0860013,-0.247059,0.665179,0.144238,0.105585,-0.121569,0.763833,0.187056,0.138326,0.00392157,0.847035,0.254558,0.189407,0.129412,0.905663,0.345937,0.258215,0.254902,0.941431,0.447111,0.346277,0.380392,0.962608,0.546927,0.457571,0.505882,0.987833,0.637276,0.569944,0.631373,0.994202,0.732176,0.687958,0.756863,0.993304,0.826268,0.800567,0.882353,0.994413,0.917205,0.906393,1,1,1,0.999979]},{"ColorSpace":"Lab","Name":"RED_TEMPERATURE","RGBPoints":[-1,0,0,0,-0.87451,0.090196,0,0,-0.74902,0.180392,0,0,-0.623529,0.270588,0,0,-0.498039,0.360784,0,0,-0.372549,0.45098,0,0,-0.247059,0.545098,0,0,-0.121569,0.635294,0,0,0.00392157,0.72549,0.058824,0,0.129412,0.815686,0.176471,0,0.254902,0.905882,0.294118,0,0.380392,1,0.411765,0,0.505882,1,0.533333,0.027451,0.631373,1,0.65098,0.27451,0.756863,1,0.768627,0.521569,0.882353,1,0.886275,0.768627,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_orange_BW","RGBPoints":[-1,0,0,0.0000253806,-0.87451,0.135871,0.0593824,0,-0.74902,0.224328,0.0907216,0,-0.623529,0.318083,0.119647,0,-0.498039,0.414443,0.150246,0,-0.372549,0.511077,0.184884,0,-0.247059,0.605501,0.226033,0,-0.121569,0.695274,0.275491,0,0.00392157,0.777826,0.334445,0,0.129412,0.851498,0.402441,0,0.254902,0.915899,0.47759,0.000602975,0.380392,0.971984,0.557882,0.0361443,0.505882,1,0.641287,0.135967,0.631373,1,0.725198,0.27997,0.756863,1,0.808205,0.438135,0.882353,1,0.89306,0.587036,1,1,0.977928,0.721599]},{"ColorSpace":"Lab","Name":"heated_object","RGBPoints":[-1,0,0,0,-0.87451,0.34902,0.0862745,0,-0.74902,0.45098,0.172549,0,-0.623529,0.52549,0.231373,0,-0.498039,0.580392,0.278431,0,-0.372549,0.623529,0.313725,0,-0.247059,0.670588,0.352941,0,-0.121569,0.717647,0.392157,0,0.00392157,0.772549,0.439216,0,0.129412,0.839216,0.494118,0,0.254902,0.901961,0.541176,0,0.380392,0.968627,0.6,0,0.505882,1,0.658824,0,0.631373,1,0.721569,0,0.756863,1,0.827451,0.298039,0.882353,1,0.976471,0.72549,1,1,1,1]},{"ColorSpace":"Lab","Name":"erdc_gold_BW","RGBPoints":[-1,0,0,0.0000190933,-0.87451,0.128363,0.0636265,0,-0.74902,0.193795,0.111057,0,-0.623529,0.25976,0.15987,0,-0.498039,0.328546,0.210589,0,-0.372549,0.399726,0.26332,0,-0.247059,0.472969,0.318261,0,-0.121569,0.546245,0.375827,0,0.00392157,0.61745,0.436719,0,0.129412,0.685545,0.501113,0,0.254902,0.749578,0.568799,0,0.380392,0.80962,0.6394,0,0.505882,0.865572,0.712699,0.10257,0.631373,0.917709,0.787569,0.233665,0.756863,0.966914,0.863138,0.369608,0.882353,1,0.939405,0.496104,1,0.999225,1,0.612275]},{"ColorSpace":"Lab","Name":"erdc_brown_BW","RGBPoints":[-1,3.3216e-7,0,0.00000483629,-0.87451,0.14693,0.0518172,0,-0.74902,0.225806,0.0814996,0,-0.623529,0.301681,0.111452,0,-0.498039,0.370487,0.150664,0,-0.372549,0.43108,0.199477,0,-0.247059,0.4849,0.255107,0,-0.121569,0.536798,0.313486,0,0.00392157,0.59286,0.371167,0,0.129412,0.653119,0.428135,0,0.254902,0.714589,0.485917,0.0379541,0.380392,0.774667,0.54565,0.116634,0.505882,0.831222,0.608047,0.183895,0.631373,0.880305,0.674199,0.260298,0.756863,0.922314,0.742472,0.367086,0.882353,0.959408,0.811222,0.497258,1,0.993548,0.875183,0.622093]},{"ColorSpace":"Lab","Name":"copper_Matlab","RGBPoints":[-1,0,0,0,-0.87451,0.0784314,0.0501961,0.0313725,-0.74902,0.156863,0.100392,0.0627451,-0.623529,0.235294,0.150588,0.0941176,-0.498039,0.313725,0.200784,0.12549,-0.372549,0.392157,0.25098,0.156863,-0.247059,0.470588,0.301176,0.188235,-0.121569,0.54902,0.351373,0.219608,0.00392157,0.627451,0.401569,0.25098,0.129412,0.705882,0.451765,0.282353,0.254902,0.784314,0.501961,0.313725,0.380392,0.862745,0.552157,0.345098,0.505882,0.941176,0.602353,0.376471,0.631373,1,0.652549,0.407843,0.756863,1,0.702745,0.439216,0.882353,1,0.752941,0.470588,1,1,0.8,0.5]},{"ColorSpace":"Lab","Name":"pink_Matlab","RGBPoints":[-1,0,0,0,-0.87451,0.312416,0.204524,0.204524,-0.74902,0.441822,0.289241,0.289241,-0.623529,0.54112,0.354246,0.354246,-0.498039,0.624831,0.409048,0.409048,-0.372549,0.698582,0.45733,0.45733,-0.247059,0.764404,0.502282,0.500979,-0.121569,0.791292,0.591516,0.54112,0.00392157,0.817297,0.66895,0.578481,0.129412,0.842499,0.738308,0.613572,0.254902,0.866968,0.801687,0.646762,0.380392,0.890766,0.86041,0.678329,0.505882,0.913944,0.913944,0.711254,0.631373,0.936549,0.936549,0.79459,0.756863,0.958621,0.958621,0.869979,0.882353,0.980196,0.980196,0.939336,1,1,1,1]},{"ColorSpace":"Lab","Name":"bone_Matlab","RGBPoints":[-1,0,0,0,-0.87451,0.054902,0.054902,0.075817,-0.74902,0.109804,0.109804,0.151634,-0.623529,0.164706,0.164706,0.227451,-0.498039,0.219608,0.219608,0.303268,-0.372549,0.27451,0.27451,0.379085,-0.247059,0.329412,0.329902,0.454412,-0.121569,0.384314,0.405719,0.509314,0.00392157,0.439216,0.481536,0.564216,0.129412,0.494118,0.557353,0.619118,0.254902,0.54902,0.63317,0.67402,0.380392,0.603922,0.708987,0.728922,0.505882,0.660294,0.783824,0.783824,0.631373,0.746569,0.838725,0.838725,0.756863,0.832843,0.893627,0.893627,0.882353,0.919118,0.948529,0.948529,1,1,1,1]},{"ColorSpace":"Lab","Name":"gray_Matlab","RGBPoints":[-1,0,0,0,-0.87451,0.0627451,0.0627451,0.0627451,-0.74902,0.12549,0.12549,0.12549,-0.623529,0.188235,0.188235,0.188235,-0.498039,0.25098,0.25098,0.25098,-0.372549,0.313725,0.313725,0.313725,-0.247059,0.376471,0.376471,0.376471,-0.121569,0.439216,0.439216,0.439216,0.00392157,0.501961,0.501961,0.501961,0.129412,0.564706,0.564706,0.564706,0.254902,0.627451,0.627451,0.627451,0.380392,0.690196,0.690196,0.690196,0.505882,0.752941,0.752941,0.752941,0.631373,0.815686,0.815686,0.815686,0.756863,0.878431,0.878431,0.878431,0.882353,0.941176,0.941176,0.941176,1,1,1,1]},{"ColorSpace":"Lab","Name":"Purples","RGBPoints":[-1,0.247059,0,0.490196,-0.87451,0.288397,0.07677,0.525629,-0.74902,0.32975,0.153587,0.561092,-0.623529,0.373057,0.236263,0.600461,-0.498039,0.416363,0.319,0.639923,-0.372549,0.459669,0.405613,0.685198,-0.247059,0.503345,0.491534,0.730058,-0.121569,0.562399,0.54862,0.757616,0.00392157,0.621453,0.606075,0.785544,0.129412,0.680508,0.674971,0.824914,0.254902,0.739562,0.743406,0.863899,0.380392,0.798616,0.800492,0.893426,0.505882,0.85684,0.856655,0.922491,0.631373,0.898178,0.894056,0.942176,0.756863,0.938654,0.930919,0.961646,0.882353,0.964245,0.958478,0.977393,1,0.988235,0.984314,0.992157]},{"ColorSpace":"Lab","Name":"Blues","RGBPoints":[-1,0.031373,0.188235,0.419608,-0.87451,0.031373,0.253195,0.516063,-0.74902,0.031757,0.318139,0.612149,-0.623529,0.080969,0.38113,0.661361,-0.498039,0.130427,0.444152,0.710327,-0.372549,0.195386,0.509112,0.743791,-0.247059,0.260715,0.573841,0.777209,-0.121569,0.341423,0.628958,0.808704,0.00392157,0.422745,0.684075,0.839892,0.129412,0.523137,0.739193,0.861546,0.254902,0.622684,0.793464,0.883429,0.380392,0.701423,0.826928,0.910988,0.505882,0.778685,0.8603,0.937993,0.631373,0.825928,0.891795,0.953741,0.756863,0.87328,0.923291,0.969489,0.882353,0.922491,0.954787,0.985236,1,0.968627,0.984314,1]},{"ColorSpace":"Lab","Name":"Greens","RGBPoints":[-1,0,0.266667,0.105882,-0.87451,0,0.347374,0.139346,-0.74902,0.000538,0.427912,0.172933,-0.623529,0.069435,0.486967,0.222145,-0.498039,0.138178,0.546082,0.271326,-0.372549,0.197232,0.609073,0.31857,-0.247059,0.257255,0.671742,0.365859,-0.121569,0.357647,0.720953,0.415071,0.00392157,0.45767,0.769919,0.465021,0.129412,0.546251,0.811257,0.537855,0.254902,0.634295,0.852211,0.610688,0.380392,0.709097,0.883706,0.683522,0.505882,0.78316,0.914833,0.755894,0.631373,0.842215,0.938454,0.818885,0.756863,0.899977,0.961538,0.880692,0.882353,0.935409,0.975317,0.92203,1,0.968627,0.988235,0.960784]},{"ColorSpace":"Lab","Name":"PuBu","RGBPoints":[-1,0.301961,0,0.294118,-0.87451,0.404321,0.029527,0.390573,-0.74902,0.50599,0.059592,0.486782,-0.623529,0.519769,0.158016,0.551742,-0.498039,0.533456,0.256194,0.616301,-0.372549,0.54133,0.33887,0.655671,-0.247059,0.54902,0.421592,0.695087,-0.121569,0.54902,0.506236,0.736424,0.00392157,0.550127,0.590573,0.777701,0.129412,0.585559,0.665375,0.81707,0.254902,0.622145,0.739023,0.855825,0.380392,0.687105,0.784298,0.879446,0.505882,0.752065,0.829758,0.903253,0.631373,0.817024,0.87897,0.930811,0.756863,0.880907,0.927213,0.957832,0.882353,0.926182,0.958708,0.975548,1,0.968627,0.988235,0.992157]},{"ColorSpace":"Lab","Name":"BuPu","RGBPoints":[-1,0.007843,0.219608,0.345098,-0.87451,0.01178,0.286536,0.449427,-0.74902,0.015702,0.35328,0.553479,-0.623529,0.01767,0.396586,0.622376,-0.498039,0.021115,0.4402,0.690688,-0.372549,0.11757,0.503191,0.722184,-0.247059,0.214625,0.565859,0.753633,-0.121569,0.336671,0.615071,0.78316,0.00392157,0.457978,0.663975,0.812503,0.129412,0.556401,0.703345,0.836125,0.254902,0.65421,0.742714,0.859669,0.380392,0.736886,0.782084,0.881323,0.505882,0.81827,0.821638,0.903068,0.631373,0.873387,0.864944,0.92669,0.756863,0.927536,0.907605,0.949988,0.882353,0.964937,0.9391,0.967705,1,1,0.968627,0.984314]},{"ColorSpace":"Lab","Name":"BuGn","RGBPoints":[-1,0.031373,0.25098,0.505882,-0.87451,0.031373,0.329719,0.590527,-0.74902,0.031911,0.408397,0.674787,-0.623529,0.100807,0.479262,0.710219,-0.498039,0.169704,0.550219,0.745744,-0.372549,0.238601,0.62699,0.787082,-0.247059,0.307958,0.703114,0.826759,-0.121569,0.39654,0.752326,0.797232,0.00392157,0.485121,0.801046,0.767705,0.129412,0.573702,0.83451,0.738178,0.254902,0.661592,0.867743,0.711034,0.380392,0.732457,0.895302,0.74253,0.505882,0.801845,0.922307,0.774579,0.631373,0.841215,0.938055,0.817885,0.756863,0.880907,0.95391,0.861084,0.882353,0.926182,0.971626,0.902422,1,0.968627,0.988235,0.941176]},{"ColorSpace":"Lab","Name":"GnBu","RGBPoints":[-1,0,0.266667,0.105882,-0.87451,0,0.347374,0.139346,-0.74902,0.000538,0.427912,0.172933,-0.623529,0.069435,0.486967,0.222145,-0.498039,0.138178,0.546175,0.272095,-0.372549,0.197232,0.615071,0.368551,-0.247059,0.256609,0.683276,0.464867,-0.121569,0.329443,0.722645,0.555417,0.00392157,0.403137,0.762138,0.645413,0.129412,0.503529,0.805444,0.718247,0.254902,0.603922,0.848597,0.790465,0.380392,0.704314,0.887966,0.847551,0.505882,0.802307,0.926321,0.903714,0.631373,0.851519,0.944037,0.941115,0.756863,0.899977,0.961538,0.976901,0.882353,0.935409,0.975317,0.984775,1,0.968627,0.988235,0.992157]},{"ColorSpace":"Lab","Name":"GnBuPu","RGBPoints":[-1,0.003922,0.27451,0.211765,-0.87451,0.003922,0.349312,0.280661,-0.74902,0.003937,0.423852,0.349773,-0.623529,0.005905,0.46519,0.446228,-0.498039,0.009443,0.506344,0.542837,-0.372549,0.111803,0.535871,0.649135,-0.247059,0.214025,0.565859,0.753633,-0.121569,0.310481,0.615071,0.78316,0.00392157,0.407797,0.663975,0.812503,0.129412,0.531811,0.703345,0.836125,0.254902,0.65421,0.742714,0.859669,0.380392,0.736886,0.782084,0.881323,0.505882,0.81827,0.821176,0.902884,0.631373,0.873387,0.854641,0.922568,0.756863,0.927536,0.888535,0.942361,0.882353,0.964937,0.929873,0.964014,1,1,0.968627,0.984314]},{"ColorSpace":"Lab","Name":"BuGnYl","RGBPoints":[-1,0.031373,0.113725,0.345098,-0.87451,0.088458,0.159,0.463206,-0.74902,0.145052,0.204567,0.5807,-0.623529,0.139146,0.287243,0.620069,-0.498039,0.13318,0.370196,0.659562,-0.372549,0.123337,0.470588,0.706805,-0.247059,0.115386,0.570335,0.753126,-0.121569,0.186251,0.643168,0.761,0.00392157,0.258716,0.71514,0.768074,0.129412,0.380761,0.760415,0.750358,0.254902,0.503576,0.806075,0.732795,0.380392,0.645306,0.861192,0.719016,0.505882,0.783899,0.91511,0.705606,0.631373,0.858701,0.944637,0.6997,0.756863,0.931349,0.973303,0.698424,0.882353,0.966782,0.987082,0.777163,1,1,1,0.85098]},{"ColorSpace":"Lab","Name":"PuRd","RGBPoints":[-1,0.286275,0,0.415686,-0.87451,0.38273,0.001968,0.441276,-0.74902,0.479231,0.003922,0.466774,-0.623529,0.581592,0.003922,0.480554,-0.498039,0.683799,0.00549,0.494887,-0.372549,0.776317,0.105882,0.544098,-0.247059,0.867866,0.206321,0.592618,-0.121569,0.919047,0.308681,0.612303,0.00392157,0.968812,0.411226,0.632603,0.129412,0.974717,0.519493,0.671972,0.254902,0.980546,0.626451,0.71065,0.380392,0.984483,0.701253,0.732303,0.505882,0.988328,0.77504,0.755617,0.631373,0.990296,0.828189,0.812703,0.756863,0.992372,0.880907,0.869035,0.882353,0.996309,0.926182,0.912341,1,1,0.968627,0.952941]},{"ColorSpace":"Lab","Name":"RdPu","RGBPoints":[-1,0.403922,0,0.121569,-0.87451,0.500377,0,0.192434,-0.74902,0.596909,0.000277,0.263037,-0.623529,0.703206,0.035709,0.300438,-0.498039,0.808612,0.071296,0.338854,-0.372549,0.857824,0.116571,0.441215,-0.247059,0.905513,0.163552,0.54293,-0.121569,0.889765,0.281661,0.617732,0.00392157,0.873156,0.39897,0.691611,0.129412,0.82985,0.491488,0.736886,0.254902,0.789081,0.583237,0.781853,0.380392,0.810734,0.656071,0.819254,0.505882,0.833126,0.729181,0.85684,0.631373,0.870527,0.80792,0.898178,0.756863,0.907605,0.884398,0.938331,0.882353,0.9391,0.921799,0.958016,1,0.968627,0.956863,0.976471]},{"ColorSpace":"Lab","Name":"Oranges","RGBPoints":[-1,0.498039,0.152941,0.015686,-0.87451,0.57481,0.182468,0.013718,-0.74902,0.651765,0.212042,0.011734,-0.623529,0.752157,0.247474,0.007797,-0.498039,0.851719,0.283368,0.004475,-0.372549,0.898962,0.348328,0.039908,-0.247059,0.945652,0.413426,0.076401,-0.121569,0.969273,0.484291,0.157109,0.00392157,0.992157,0.554971,0.238185,0.129412,0.992157,0.619931,0.330704,0.254902,0.992157,0.684967,0.423837,0.380392,0.992157,0.751895,0.532103,0.505882,0.992249,0.817716,0.639354,0.631373,0.994218,0.861023,0.725967,0.756863,0.996186,0.903576,0.810965,0.882353,0.998155,0.933103,0.868051,1,1,0.960784,0.921569]},{"ColorSpace":"Lab","Name":"Reds","RGBPoints":[-1,0.403922,0,0.05098,-0.87451,0.525967,0.029527,0.066728,-0.74902,0.647643,0.058962,0.082476,-0.623529,0.722445,0.076678,0.098224,-0.498039,0.797186,0.095194,0.114187,-0.372549,0.868051,0.164091,0.143714,-0.247059,0.937809,0.233541,0.173933,-0.121569,0.96143,0.326059,0.232987,0.00392157,0.984375,0.418147,0.292657,0.129412,0.986344,0.496886,0.371396,0.254902,0.988235,0.575702,0.450673,0.380392,0.988235,0.656409,0.543191,0.505882,0.98842,0.736747,0.635894,0.631373,0.992357,0.809581,0.732349,0.756863,0.996186,0.880692,0.826759,0.882353,0.998155,0.92203,0.885813,1,1,0.960784,0.941176]},{"ColorSpace":"Lab","Name":"RdOr","RGBPoints":[-1,0.498039,0,0,-0.87451,0.6004,0,0,-0.74902,0.702514,0.000738,0.000477,-0.623529,0.773379,0.095225,0.061499,-0.498039,0.843875,0.189865,0.12283,-0.372549,0.891119,0.294195,0.203537,-0.247059,0.937855,0.397924,0.283137,-0.121569,0.963445,0.476663,0.316601,0.00392157,0.988297,0.555771,0.351665,0.129412,0.990265,0.646321,0.436309,0.254902,0.992157,0.735256,0.519646,0.380392,0.992157,0.784468,0.570827,0.505882,0.992249,0.833218,0.623483,0.631373,0.994218,0.872587,0.706159,0.756863,0.996186,0.911419,0.788189,0.882353,0.998155,0.940946,0.859054,1,1,0.968627,0.92549]},{"ColorSpace":"Lab","Name":"BrOrYl","RGBPoints":[-1,0.4,0.145098,0.023529,-0.87451,0.500392,0.174625,0.019592,-0.74902,0.600784,0.204291,0.015656,-0.623529,0.701176,0.251534,0.011719,-0.498039,0.800984,0.299146,0.008397,-0.372549,0.863975,0.370012,0.043829,-0.247059,0.926321,0.441107,0.0794,-0.121569,0.961753,0.521815,0.120738,0.00392157,0.996078,0.602645,0.163122,0.129412,0.996078,0.68729,0.237924,0.254902,0.996078,0.771011,0.314879,0.380392,0.996078,0.832034,0.444798,0.505882,0.996171,0.892042,0.572595,0.631373,0.998139,0.931411,0.65724,0.756863,1,0.969489,0.741669,0.882353,1,0.985236,0.822376,1,1,1,0.898039]},{"ColorSpace":"Lab","Name":"RdOrYl","RGBPoints":[-1,0.501961,0,0.14902,-0.87451,0.622038,0,0.14902,-0.74902,0.741761,0.0004,0.148866,-0.623529,0.816563,0.05158,0.129181,-0.498039,0.890965,0.10356,0.110235,-0.372549,0.940177,0.205921,0.137793,-0.247059,0.988281,0.308789,0.165536,-0.121569,0.99025,0.432803,0.200969,0.00392157,0.992218,0.555217,0.236278,0.129412,0.994187,0.628051,0.267774,0.254902,0.996078,0.701038,0.301269,0.380392,0.996078,0.777809,0.383945,0.505882,0.996171,0.852826,0.466621,0.631373,0.998139,0.892195,0.549296,0.756863,1,0.931349,0.632188,0.882353,1,0.966782,0.7188,1,1,1,0.8]},{"ColorSpace":"Lab","Name":"CIELab_blue2red","RGBPoints":[-1,0,0.6,0.74902,1,0.76863,0.46667,0.34118]},{"ColorSpace":"Lab","Name":"blue2yellow","RGBPoints":[-1,0,0,1,0,0.5,0.5,0.5,1,1,1,0]},{"ColorSpace":"Lab","Name":"erdc_blue2gold","RGBPoints":[-1,0.175119,0.0438468,1,-0.874016,0.22383,0.159771,0.94557,-0.748031,0.27254,0.233611,0.891216,-0.622047,0.321251,0.296526,0.836857,-0.496063,0.369962,0.354296,0.782359,-0.370079,0.418672,0.409139,0.72754,-0.244094,0.467383,0.462152,0.672148,-0.11811,0.51609,0.51396,0.615825,0.00787402,0.572863,0.55452,0.559172,0.133858,0.630269,0.593822,0.517729,0.259843,0.689588,0.624668,0.47446,0.385827,0.745394,0.656113,0.428638,0.511811,0.798624,0.688104,0.379105,0.637795,0.849926,0.720593,0.323834,0.76378,0.899765,0.753543,0.258657,0.889764,0.948487,0.78692,0.171778,1,0.990413,0.816451,0.00729848]},{"ColorSpace":"Lab","Name":"erdc_blue2yellow","RGBPoints":[-1,0.0830122,0,0.495617,-0.87451,0.141973,0.0551288,0.57363,-0.74902,0.193048,0.110258,0.604561,-0.623529,0.234231,0.165386,0.57643,-0.498039,0.275413,0.220515,0.548299,-0.372549,0.316596,0.275644,0.520169,-0.247059,0.357778,0.330773,0.492038,-0.121569,0.398961,0.385901,0.463908,0.00392157,0.449929,0.438487,0.426815,0.129412,0.511572,0.488299,0.379944,0.254902,0.581222,0.53603,0.325741,0.380392,0.650871,0.583761,0.271538,0.505882,0.720521,0.631493,0.217335,0.631373,0.79017,0.679224,0.163132,0.756863,0.85982,0.726955,0.108929,0.882353,0.910254,0.774159,0.14112,1,0.927513,0.81759,0.306289]},{"ColorSpace":"Lab","Name":"erdc_cyan2orange","RGBPoints":[-1,0.0471513,0.213874,0.414329,-0.87451,0.0674702,0.256648,0.439027,-0.74902,0.0959957,0.299331,0.462089,-0.623529,0.132428,0.341872,0.483212,-0.498039,0.188743,0.38277,0.500597,-0.372549,0.268511,0.420229,0.512179,-0.247059,0.352945,0.455602,0.519101,-0.121569,0.43893,0.489368,0.521538,0.00392157,0.522445,0.522495,0.522436,0.129412,0.600089,0.555682,0.53205,0.254902,0.67988,0.587981,0.539163,0.380392,0.761011,0.619586,0.544439,0.505882,0.84278,0.650741,0.548567,0.631373,0.910713,0.687347,0.557822,0.756863,0.952232,0.734972,0.577775,0.882353,0.975642,0.789858,0.604868,1,0.990752,0.843643,0.632857]},{"ColorSpace":"Lab","Name":"erdc_purple2green","RGBPoints":[-1,0.235006,0.0483128,0.530899,-0.87451,0.302968,0.108419,0.552391,-0.74902,0.360241,0.166059,0.569502,-0.623529,0.406746,0.226782,0.579373,-0.498039,0.444073,0.28964,0.582094,-0.372549,0.473648,0.353774,0.577947,-0.247059,0.497636,0.418154,0.567911,-0.121569,0.519086,0.481741,0.553968,0.00392157,0.542884,0.542914,0.542875,0.129412,0.566303,0.603989,0.527499,0.254902,0.595218,0.662965,0.516857,0.380392,0.628641,0.720701,0.510673,0.505882,0.665373,0.777849,0.508165,0.631373,0.704182,0.834921,0.508303,0.756863,0.743846,0.892328,0.50999,0.882353,0.783158,0.950422,0.512181,1,0.818617,1,0.513888]},{"ColorSpace":"Lab","Name":"erdc_purple2green_dark","RGBPoints":[-1,0.107656,0,0.428682,-0.87451,0.1924,0,0.449799,-0.74902,0.255118,0.0648939,0.466726,-0.623529,0.304256,0.133066,0.476703,-0.498039,0.343202,0.19716,0.479793,-0.372549,0.373876,0.260353,0.476241,-0.247059,0.398497,0.322872,0.466953,-0.121569,0.420016,0.384252,0.453785,0.00392157,0.44319,0.443216,0.443186,0.129412,0.465553,0.502139,0.428233,0.254902,0.492959,0.559151,0.417591,0.380392,0.524654,0.615092,0.411016,0.505882,0.55959,0.670583,0.40779,0.631373,0.596614,0.726102,0.406948,0.756863,0.634544,0.782032,0.407439,0.882353,0.672183,0.838703,0.408237,1,0.706131,0.892759,0.408452]},{"ColorSpace":"Lab","Name":"coolwarm","RGBPoints":[-1,0.229806,0.298718,0.753683,-0.875,0.303869,0.406535,0.844959,-0.75,0.383013,0.509419,0.917388,-0.625,0.466667,0.604563,0.968155,-0.5,0.552953,0.688929,0.995376,-0.375,0.639176,0.7596,0.998151,-0.25,0.722193,0.813953,0.976575,-0.125,0.798692,0.849786,0.931689,0,0.865395,0.86541,0.865396,0.125,0.924128,0.827385,0.774508,0.25,0.958853,0.769768,0.678008,0.375,0.969954,0.694267,0.579375,0.5,0.958003,0.602842,0.481776,0.625,0.923945,0.497309,0.38797,0.75,0.869187,0.378313,0.300267,0.875,0.795632,0.241284,0.220526,1,0.705673,0.0155562,0.150233]},{"ColorSpace":"Lab","Name":"BuRd","RGBPoints":[-1,0.019608,0.188235,0.380392,-0.87451,0.088504,0.321107,0.564937,-0.74902,0.163399,0.444983,0.697501,-0.623529,0.247059,0.555709,0.754095,-0.498039,0.420684,0.676432,0.818685,-0.372549,0.606459,0.789773,0.880277,-0.247059,0.761476,0.868512,0.924567,-0.121569,0.878047,0.925721,0.951942,0.00392157,0.969089,0.966474,0.964937,0.129412,0.983852,0.897578,0.846828,0.254902,0.982468,0.800692,0.706113,0.380392,0.960323,0.66782,0.536332,0.505882,0.894579,0.503806,0.399769,0.631373,0.81707,0.33218,0.281046,0.756863,0.728489,0.155017,0.197386,0.882353,0.576932,0.055363,0.14925,1,0.403922,0,0.121569]},{"ColorSpace":"Lab","Name":"Spectral_lowBlue","RGBPoints":[-1,0.368627,0.309804,0.635294,-0.87451,0.260361,0.450058,0.70173,-0.74902,0.248058,0.591311,0.717186,-0.623529,0.376009,0.734025,0.658132,-0.498039,0.537947,0.814764,0.64506,-0.372549,0.702345,0.879585,0.636678,-0.247059,0.84752,0.938639,0.607151,-0.121569,0.940408,0.976163,0.656055,0.00392157,0.999923,0.997616,0.745021,0.129412,0.997463,0.921338,0.61707,0.254902,0.995002,0.824606,0.499885,0.380392,0.992541,0.701576,0.39654,0.505882,0.973472,0.547405,0.318108,0.631373,0.937793,0.398539,0.270127,0.756863,0.861515,0.282891,0.299654,0.882353,0.746482,0.144637,0.288812,1,0.619608,0.003922,0.258824]},{"ColorSpace":"Lab","Name":"GnRP","RGBPoints":[-1,0,0.266667,0.105882,-0.87451,0.066436,0.394617,0.174779,-0.74902,0.168858,0.524567,0.25767,-0.623529,0.323875,0.657439,0.361015,-0.498039,0.504883,0.772318,0.506344,-0.372549,0.678431,0.870127,0.654902,-0.247059,0.803922,0.921799,0.780392,-0.121569,0.897116,0.951942,0.882814,0.00392157,0.967397,0.965936,0.967474,0.129412,0.928028,0.879815,0.930565,0.254902,0.866052,0.780777,0.882891,0.380392,0.77501,0.665129,0.821376,0.505882,0.675663,0.537024,0.737024,0.631373,0.57847,0.396155,0.645982,0.756863,0.492349,0.223914,0.547559,0.882353,0.375548,0.096886,0.423299,1,0.25098,0,0.294118]},{"ColorSpace":"Lab","Name":"GYPi","RGBPoints":[-1,0.152941,0.392157,0.098039,-0.87451,0.246444,0.505344,0.117724,-0.74902,0.351942,0.614533,0.161399,-0.623529,0.474971,0.717878,0.240138,-0.498039,0.611995,0.811226,0.392849,-0.372549,0.746328,0.893118,0.565321,-0.247059,0.859516,0.94233,0.747405,-0.121569,0.928105,0.96386,0.875663,0.00392157,0.969089,0.966859,0.968012,0.129412,0.983852,0.910265,0.948328,0.254902,0.979239,0.833218,0.914648,0.380392,0.949712,0.729873,0.862976,0.505882,0.905652,0.58293,0.763552,0.631373,0.85521,0.410073,0.652211,0.756863,0.793695,0.183699,0.531642,0.882353,0.683737,0.063899,0.420761,1,0.556863,0.003922,0.321569]},{"ColorSpace":"Lab","Name":"GnYlRd","RGBPoints":[-1,0,0.407843,0.215686,-0.87451,0.063975,0.525952,0.277201,-0.74902,0.177932,0.633064,0.332718,-0.623529,0.364937,0.724106,0.379469,-0.498039,0.527951,0.797155,0.40223,-0.372549,0.678431,0.862822,0.433449,-0.247059,0.803922,0.916955,0.514648,-0.121569,0.909419,0.961861,0.625067,0.00392157,0.999923,0.997616,0.745021,0.129412,0.997463,0.921338,0.61707,0.254902,0.995002,0.824606,0.499885,0.380392,0.992541,0.701576,0.39654,0.505882,0.973472,0.547405,0.318108,0.631373,0.939023,0.389927,0.245521,0.756863,0.867666,0.239831,0.176624,0.882353,0.762399,0.110727,0.151326,1,0.647059,0,0.14902]},{"ColorSpace":"Lab","Name":"GBBr","RGBPoints":[-1,0,0.235294,0.188235,-0.87451,0.002461,0.338639,0.301423,-0.74902,0.055902,0.448981,0.417609,-0.623529,0.183852,0.56955,0.538178,-0.498039,0.357785,0.700115,0.660746,-0.372549,0.540177,0.819531,0.77624,-0.247059,0.714879,0.890888,0.864821,-0.121569,0.851134,0.934564,0.922645,0.00392157,0.960861,0.959785,0.95694,0.129412,0.963322,0.927797,0.83391,0.254902,0.939946,0.868897,0.68935,0.380392,0.883353,0.775394,0.517109,0.505882,0.808074,0.625836,0.324106,0.631373,0.717647,0.476355,0.15494,0.756863,0.592157,0.358247,0.06882,0.882353,0.458593,0.26436,0.031142,1,0.329412,0.188235,0.019608]},{"ColorSpace":"Lab","Name":"PuOr","RGBPoints":[-1,0.498039,0.231373,0.031373,-0.87451,0.62599,0.30273,0.026451,-0.74902,0.746943,0.387082,0.037524,-0.623529,0.85767,0.490427,0.071972,-0.498039,0.936409,0.617762,0.236371,-0.372549,0.992695,0.743099,0.43291,-0.247059,0.995156,0.841523,0.63714,-0.121569,0.985313,0.913802,0.813687,0.00392157,0.966244,0.966398,0.967705,0.129412,0.889965,0.89504,0.938178,0.254902,0.806151,0.804306,0.894656,0.380392,0.712649,0.688658,0.833141,0.505882,0.594233,0.554325,0.744637,0.631373,0.474894,0.404229,0.652364,0.756863,0.366628,0.217224,0.563783,0.882353,0.266436,0.089965,0.434833,1,0.176471,0,0.294118]},{"ColorSpace":"Lab","Name":"PRGn","RGBPoints":[-1,0.25098,0,0.294118,-0.87451,0.383852,0.103345,0.431911,-0.74902,0.497732,0.234679,0.55371,-0.623529,0.583852,0.40692,0.652134,-0.498039,0.681968,0.545175,0.742561,-0.372549,0.7807,0.672357,0.825221,-0.247059,0.871742,0.788005,0.886736,-0.121569,0.930488,0.885198,0.932872,0.00392157,0.966321,0.968089,0.965859,0.129412,0.892503,0.950865,0.877278,0.254902,0.796078,0.91857,0.772549,0.380392,0.670588,0.866897,0.647059,0.505882,0.493195,0.765398,0.496655,0.631373,0.314187,0.649135,0.354556,0.756863,0.15917,0.516263,0.251211,0.882353,0.062284,0.386621,0.170473,1,0,0.266667,0.105882]},{"ColorSpace":"Lab","Name":"PiYG","RGBPoints":[-1,0.556863,0.003922,0.321569,-0.87451,0.692195,0.067897,0.427374,-0.74902,0.797539,0.197847,0.539177,-0.623529,0.859054,0.424221,0.659746,-0.498039,0.908574,0.592618,0.770319,-0.372549,0.951557,0.736332,0.866205,-0.247059,0.981084,0.839677,0.917878,-0.121569,0.98293,0.913802,0.949558,0.00392157,0.96732,0.968474,0.965629,0.129412,0.92549,0.963552,0.869666,0.254902,0.852441,0.939254,0.736025,0.380392,0.739254,0.890042,0.553941,0.505882,0.60323,0.805536,0.382238,0.631373,0.467282,0.711419,0.235217,0.756863,0.344252,0.608074,0.156478,0.882353,0.2406,0.49827,0.116494,1,0.152941,0.392157,0.098039]},{"ColorSpace":"Lab","Name":"OrPu","RGBPoints":[-1,0.176471,0,0.294118,-0.87451,0.272434,0.095963,0.444214,-0.74902,0.373395,0.228912,0.56932,-0.623529,0.481661,0.415917,0.657901,-0.498039,0.601922,0.562937,0.750481,-0.372549,0.718493,0.695886,0.836986,-0.247059,0.811995,0.811534,0.898501,-0.121569,0.894733,0.8995,0.940023,0.00392157,0.969166,0.966859,0.963629,0.129412,0.98639,0.910265,0.803691,0.254902,0.995002,0.835371,0.624375,0.380392,0.992541,0.736947,0.420146,0.505882,0.931949,0.609458,0.224221,0.631373,0.85075,0.483968,0.069819,0.756863,0.740023,0.380623,0.035371,0.882353,0.617993,0.29827,0.026759,1,0.498039,0.231373,0.031373]},{"ColorSpace":"Lab","Name":"BrBG","RGBPoints":[-1,0.329412,0.188235,0.019608,-0.87451,0.467205,0.269435,0.031911,-0.74902,0.6,0.365629,0.074202,-0.623529,0.72549,0.483737,0.160323,-0.498039,0.812995,0.635832,0.336409,-0.372549,0.88689,0.781238,0.527874,-0.247059,0.943483,0.87474,0.700115,-0.121569,0.963168,0.929796,0.841599,0.00392157,0.957247,0.959938,0.959554,0.129412,0.84406,0.932872,0.920185,0.254902,0.70396,0.886428,0.859285,0.380392,0.529258,0.815071,0.770704,0.505882,0.346251,0.691811,0.653057,0.631373,0.175855,0.562015,0.530642,0.756863,0.047905,0.441446,0.410073,0.882353,0.002307,0.33218,0.294348,1,0,0.235294,0.188235]},{"ColorSpace":"Lab","Name":"GyRd","RGBPoints":[-1,0.101961,0.101961,0.101961,-0.87451,0.227451,0.227451,0.227451,-0.74902,0.359939,0.359939,0.359939,-0.623529,0.502653,0.502653,0.502653,-0.498039,0.631373,0.631373,0.631373,-0.372549,0.749865,0.749865,0.749865,-0.247059,0.843368,0.843368,0.843368,-0.121569,0.926105,0.926105,0.926105,0.00392157,0.999846,0.997232,0.995694,0.129412,0.994925,0.908651,0.857901,0.254902,0.982468,0.800692,0.706113,0.380392,0.960323,0.66782,0.536332,0.505882,0.894579,0.503806,0.399769,0.631373,0.81707,0.33218,0.281046,0.756863,0.728489,0.155017,0.197386,0.882353,0.576932,0.055363,0.14925,1,0.403922,0,0.121569]},{"ColorSpace":"Lab","Name":"erdc_divHi_purpleGreen","RGBPoints":[-1,0.297553,0,0.489074,-0.87451,0.40259,0.151146,0.567754,-0.74902,0.516038,0.284843,0.658231,-0.623529,0.629783,0.423646,0.750938,-0.498039,0.735198,0.563697,0.835956,-0.372549,0.82408,0.695541,0.903582,-0.247059,0.889091,0.807454,0.944862,-0.121569,0.92334,0.886917,0.951839,0.00392157,0.921045,0.921084,0.921003,0.129412,0.877324,0.907455,0.845381,0.254902,0.797649,0.849713,0.734695,0.380392,0.691646,0.75964,0.600532,0.505882,0.568981,0.649159,0.453807,0.631373,0.438945,0.529756,0.304259,0.756863,0.30973,0.412001,0.158303,0.882353,0.187078,0.305111,0.00251458,1,0.101655,0.220836,0]},{"ColorSpace":"Lab","Name":"erdc_divHi_purpleGreen_dim","RGBPoints":[-1,0.404088,0.131038,0.592767,-0.87451,0.486469,0.230957,0.651243,-0.74902,0.575165,0.339335,0.717723,-0.623529,0.662741,0.454332,0.784263,-0.498039,0.742071,0.570213,0.842918,-0.372549,0.806935,0.678992,0.886227,-0.247059,0.852219,0.771315,0.90763,-0.121569,0.873345,0.837327,0.901572,0.00392157,0.866783,0.86682,0.866745,0.129412,0.82839,0.858225,0.796812,0.254902,0.762578,0.814287,0.700202,0.380392,0.676429,0.744229,0.585735,0.505882,0.577033,0.65732,0.461526,0.631373,0.47128,0.562476,0.33476,0.756863,0.365461,0.467957,0.21076,0.882353,0.264758,0.381138,0.0878313,1,0.182591,0.312249,0]},{"ColorSpace":"Lab","Name":"erdc_divLow_icePeach","RGBPoints":[-1,0.480048,0.817441,0.998056,-0.87451,0.425898,0.726921,0.883187,-0.74902,0.366682,0.629445,0.761936,-0.623529,0.308756,0.531002,0.640217,-0.498039,0.258021,0.43705,0.523433,-0.372549,0.219244,0.352381,0.416348,-0.247059,0.195127,0.281032,0.322979,-0.121569,0.186286,0.22627,0.246525,0.00392157,0.192352,0.19236,0.192364,0.129412,0.255927,0.214469,0.191756,0.254902,0.340459,0.254426,0.206666,0.380392,0.444655,0.309315,0.234029,0.505882,0.565353,0.376004,0.270969,0.631373,0.697917,0.450748,0.314293,0.756863,0.836657,0.529064,0.360227,0.882353,0.972695,0.614884,0.413123,1,1,0.705904,0.472699]},{"ColorSpace":"Lab","Name":"erdc_divLow_purpleGreen","RGBPoints":[-1,0.956034,0.666487,0.952663,-0.87451,0.874457,0.572698,0.936352,-0.74902,0.753465,0.488253,0.909063,-0.623529,0.63309,0.413507,0.763833,-0.498039,0.514491,0.345878,0.620015,-0.372549,0.405008,0.288141,0.484376,-0.247059,0.311388,0.241986,0.363556,-0.121569,0.238722,0.209044,0.263449,0.00392157,0.192352,0.192366,0.192362,0.129412,0.200379,0.233201,0.168618,0.254902,0.230151,0.291737,0.165227,0.380392,0.279481,0.366076,0.178607,0.505882,0.344927,0.453267,0.205703,0.631373,0.421554,0.549449,0.242643,0.756863,0.503334,0.649999,0.284377,0.882353,0.583497,0.749672,0.324969,1,0.650705,0.837228,0.356264]},{"ColorSpace":"Lab","Name":"Haze_green","RGBPoints":[-1,1,0.835294,0.886275,-0.87451,0.937255,0.756863,0.870443,-0.74902,0.875817,0.666376,0.857807,-0.623529,0.778359,0.583007,0.808134,-0.498039,0.676253,0.494118,0.745098,-0.372549,0.561365,0.390123,0.682353,-0.247059,0.438344,0.262745,0.621496,-0.121569,0.321133,0.141031,0.558751,0.00392157,0.203922,0.0217865,0.495861,0.129412,0.265505,0.129412,0.433261,0.254902,0.311692,0.255338,0.37008,0.380392,0.356282,0.377342,0.310821,0.505882,0.39971,0.488889,0.258243,0.631373,0.442556,0.604357,0.205519,0.756863,0.48671,0.71968,0.152941,0.882353,0.529847,0.830356,0.100944,1,0.572549,0.933333,0.054902]},{"ColorSpace":"Lab","Name":"Haze_lime","RGBPoints":[-1,0.704034,0.784196,1,-0.87451,0.633111,0.691418,0.956078,-0.74902,0.564021,0.600606,0.912157,-0.623529,0.496827,0.51189,0.868235,-0.498039,0.43157,0.425416,0.824314,-0.372549,0.368248,0.341347,0.780392,-0.247059,0.306767,0.259855,0.736471,-0.121569,0.246862,0.181069,0.692549,0.00392157,0.191619,0.109542,0.648627,0.129412,0.257404,0.194031,0.604706,0.254902,0.321794,0.278775,0.560784,0.380392,0.387909,0.364617,0.516863,0.505882,0.456569,0.451881,0.472941,0.631373,0.527424,0.540773,0.42902,0.756863,0.599759,0.631427,0.385098,0.882353,0.673065,0.723898,0.341176,1,0.742751,0.812252,0.3]},{"ColorSpace":"RGB","Name":"Haze","RGBPoints":[-1,1,0.835294,0.996078,-0.00392157,0.023529,0.141176,0.498039,0.00392157,0.015686,0.137255,0.494118,1,0.984314,0.764706,0]},{"ColorSpace":"Lab","Name":"Haze_cyan","RGBPoints":[-1,0.956863,1,0.835294,-0.87451,0.933188,0.921714,0.760784,-0.74902,0.870588,0.803486,0.671605,-0.623529,0.807843,0.684096,0.583297,-0.498039,0.745098,0.569208,0.494118,-0.372549,0.682353,0.437763,0.390123,-0.247059,0.621496,0.288163,0.262745,-0.121569,0.558751,0.144517,0.141031,0.00392157,0.495861,0.0217865,0.0413943,0.129412,0.433261,0.137255,0.129412,0.254902,0.37008,0.263181,0.255338,0.380392,0.306318,0.381845,0.372694,0.505882,0.243137,0.503994,0.494263,0.631373,0.180392,0.629484,0.619753,0.756863,0.117647,0.754975,0.747131,0.882353,0.054902,0.876398,0.866812,1,0,0.988235,0.976471]},{"ColorSpace":"Lab","Name":"nic_Edge","RGBPoints":[-1,0.191208,0.191208,0.191208,-0.87451,0.239484,0.00545035,0.614821,-0.74902,0.220593,0.0617459,0.863547,-0.623529,0.17509,0.278988,0.97794,-0.498039,0.143526,0.576069,0.998553,-0.372549,0.166456,0.871883,0.96594,-0.247059,0.376202,0.993555,0.981833,-0.121569,0.681996,0.991297,0.999239,0.00392157,0.954172,0.952734,0.94374,0.129412,0.999735,0.99301,0.662896,0.254902,0.979399,0.991466,0.357973,0.380392,0.968771,0.854967,0.162659,0.505882,0.999245,0.556697,0.144323,0.631373,0.973959,0.26223,0.177946,0.756863,0.852358,0.0526707,0.222974,0.882353,0.593889,0.00912724,0.238855,1,0.191208,0.191208,0.191208]},{"ColorSpace":"Lab","Name":"erdc_iceFire_H","RGBPoints":[-1,4.05432e-7,0,0.00000590122,-0.87451,0,0.120401,0.302675,-0.74902,0,0.216583,0.524574,-0.623529,0.0552475,0.345025,0.6595,-0.498039,0.128047,0.492588,0.720288,-0.372549,0.188955,0.641309,0.792092,-0.247059,0.327673,0.784935,0.873434,-0.121569,0.60824,0.892164,0.935547,0.00392157,0.881371,0.912178,0.818099,0.129412,0.951407,0.835621,0.449279,0.254902,0.904481,0.690489,0,0.380392,0.85407,0.510864,0,0.505882,0.777093,0.33018,0.00088199,0.631373,0.672862,0.139087,0.00269398,0.756863,0.508815,0,0,0.882353,0.299417,0.000366289,0.000547829,1,0.0157519,0.00332021,4.55569e-8]},{"ColorSpace":"Lab","Name":"erdc_iceFire_L","RGBPoints":[-1,0.870485,0.913768,0.832905,-0.87451,0.586919,0.887865,0.934003,-0.74902,0.31583,0.776442,0.867858,-0.623529,0.18302,0.632034,0.787722,-0.498039,0.117909,0.484134,0.713825,-0.372549,0.0507239,0.335979,0.654741,-0.247059,0,0.209874,0.511832,-0.121569,0,0.114689,0.28935,0.00392157,0.0157519,0.00332021,4.55569e-8,0.129412,0.312914,0,0,0.254902,0.520865,0,0,0.380392,0.680105,0.15255,0.0025996,0.505882,0.785109,0.339479,0.000797922,0.631373,0.857354,0.522494,0,0.756863,0.910974,0.699774,0,0.882353,0.951921,0.842817,0.478545,1,0.881371,0.912178,0.818099]},{"ColorSpace":"RGB","Name":"hsv","RGBPoints":[-1,1,0,0,-0.666666,1,0,1,-0.333333,0,0,1,0,0,1,1,0.33333,0,1,0,0.66666,1,1,0,1,1,0,0]},{"ColorSpace":"Lab","Name":"hue_L60","RGBPoints":[-1,0.964784,0.400592,0.349549,-0.87451,0.964915,0.372498,0.53785,-0.74902,0.892353,0.401039,0.759569,-0.623529,0.79263,0.446956,0.903017,-0.498039,0.682208,0.49954,0.966673,-0.372549,0.56392,0.553082,0.968836,-0.247059,0.442031,0.606396,0.901601,-0.121569,0.305499,0.65701,0.765784,0.00392157,0.197251,0.687914,0.620914,0.129412,0.193882,0.701887,0.472654,0.254902,0.249866,0.706123,0.320005,0.380392,0.35132,0.697417,0.202919,0.505882,0.498097,0.669467,0.125232,0.631373,0.637477,0.626239,0.107431,0.756863,0.762115,0.56872,0.155812,0.882353,0.889434,0.481116,0.240445,1,0.964784,0.400592,0.349549]},{"IndexedColors":[0,0,0,0.8941176470588236,0.1019607843137255,0.1098039215686274,0.2156862745098039,0.4941176470588236,0.7215686274509804,0.3019607843137255,0.6862745098039216,0.2901960784313726,0.596078431372549,0.3058823529411765,0.6392156862745098,1,0.4980392156862745,0,0.6509803921568628,0.3372549019607843,0.1568627450980392],"Name":"Spectrum","NanColor":[0.6509803921568628,0.3372549019607843,0.1568627450980392]},{"IndexedColors":[0.4745098039215686,0.09019607843137255,0.09019607843137255,0.7098039215686275,0.00392156862745098,0.00392156862745098,0.9372549019607843,0.2784313725490196,0.09803921568627451,0.9764705882352941,0.5137254901960784,0.1411764705882353,1,0.7058823529411765,0,1,0.8980392156862745,0.02352941176470588],"Name":"Warm","NanColor":[1,0.8980392156862745,0.02352941176470588]},{"IndexedColors":[0.4588235294117647,0.6941176470588235,0.00392156862745098,0.3450980392156863,0.5019607843137255,0.1607843137254902,0.3137254901960784,0.8431372549019608,0.7490196078431373,0.1098039215686274,0.5843137254901961,0.803921568627451,0.2313725490196079,0.407843137254902,0.6705882352941176,0.6039215686274509,0.407843137254902,1,0.3725490196078431,0.2,0.5019607843137255],"Name":"Cool","NanColor":[0.3725490196078431,0.2,0.5019607843137255]},{"IndexedColors":[0.2313725490196079,0.407843137254902,0.6705882352941176,0.1098039215686274,0.5843137254901961,0.803921568627451,0.3058823529411765,0.8509803921568627,0.9176470588235294,0.4509803921568628,0.6039215686274509,0.8352941176470589,0.2588235294117647,0.2392156862745098,0.6627450980392157,0.3137254901960784,0.3294117647058823,0.5294117647058824,0.06274509803921569,0.1647058823529412,0.3215686274509804],"Name":"Blues","NanColor":[0.06274509803921569,0.1647058823529412,0.3215686274509804]},{"IndexedColors":[0.1098039215686274,0.5843137254901961,0.803921568627451,0.2313725490196079,0.407843137254902,0.6705882352941176,0.4,0.2431372549019608,0.7176470588235294,0.6352941176470588,0.3294117647058823,0.8117647058823529,0.8705882352941177,0.3803921568627451,0.807843137254902,0.8627450980392157,0.3803921568627451,0.5843137254901961,0.2392156862745098,0.06274509803921569,0.3215686274509804],"Name":"Wild Flower","NanColor":[0.2392156862745098,0.06274509803921569,0.3215686274509804]},{"IndexedColors":[0.396078431372549,0.4862745098039216,0.2156862745098039,0.4588235294117647,0.6941176470588235,0.00392156862745098,0.6980392156862745,0.7294117647058823,0.1882352941176471,1,0.8980392156862745,0.02352941176470588,1,0.7058823529411765,0,0.9764705882352941,0.5137254901960784,0.1411764705882353],"Name":"Citrus","NanColor":[0.9764705882352941,0.5137254901960784,0.1411764705882353]},{"IndexedColors":[0.4980392156862745,0.2313725490196079,0.03137254901960784,0.7019607843137254,0.3450980392156863,0.02352941176470588,0.8784313725490196,0.5098039215686274,0.0784313725490196,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.996078431372549,0.8784313725490196,0.7137254901960784,0.9686274509803922,0.9686274509803922,0.9686274509803922,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.5019607843137255,0.4509803921568628,0.6745098039215687,0.3294117647058823,0.1529411764705882,0.5333333333333333,0.1764705882352941,0,0.2941176470588235],"Name":"Brewer Diverging Purple-Orange (11)","NanColor":[0.1764705882352941,0,0.2941176470588235]},{"IndexedColors":[0.4980392156862745,0.2313725490196079,0.03137254901960784,0.7019607843137254,0.3450980392156863,0.02352941176470588,0.8784313725490196,0.5098039215686274,0.0784313725490196,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.996078431372549,0.8784313725490196,0.7137254901960784,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.5019607843137255,0.4509803921568628,0.6745098039215687,0.3294117647058823,0.1529411764705882,0.5333333333333333,0.1764705882352941,0,0.2941176470588235],"Name":"Brewer Diverging Purple-Orange (10)","NanColor":[0.1764705882352941,0,0.2941176470588235]},{"IndexedColors":[0.7019607843137254,0.3450980392156863,0.02352941176470588,0.8784313725490196,0.5098039215686274,0.0784313725490196,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.996078431372549,0.8784313725490196,0.7137254901960784,0.9686274509803922,0.9686274509803922,0.9686274509803922,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.5019607843137255,0.4509803921568628,0.6745098039215687,0.3294117647058823,0.1529411764705882,0.5333333333333333],"Name":"Brewer Diverging Purple-Orange (9)","NanColor":[0.3294117647058823,0.1529411764705882,0.5333333333333333]},{"IndexedColors":[0.7019607843137254,0.3450980392156863,0.02352941176470588,0.8784313725490196,0.5098039215686274,0.0784313725490196,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.996078431372549,0.8784313725490196,0.7137254901960784,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.5019607843137255,0.4509803921568628,0.6745098039215687,0.3294117647058823,0.1529411764705882,0.5333333333333333],"Name":"Brewer Diverging Purple-Orange (8)","NanColor":[0.3294117647058823,0.1529411764705882,0.5333333333333333]},{"IndexedColors":[0.7019607843137254,0.3450980392156863,0.02352941176470588,0.9450980392156862,0.6392156862745098,0.2509803921568627,0.996078431372549,0.8784313725490196,0.7137254901960784,0.9686274509803922,0.9686274509803922,0.9686274509803922,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6,0.5568627450980392,0.7647058823529411,0.3294117647058823,0.1529411764705882,0.5333333333333333],"Name":"Brewer Diverging Purple-Orange (7)","NanColor":[0.3294117647058823,0.1529411764705882,0.5333333333333333]},{"IndexedColors":[0.7019607843137254,0.3450980392156863,0.02352941176470588,0.9450980392156862,0.6392156862745098,0.2509803921568627,0.996078431372549,0.8784313725490196,0.7137254901960784,0.8470588235294118,0.8549019607843137,0.9215686274509803,0.6,0.5568627450980392,0.7647058823529411,0.3294117647058823,0.1529411764705882,0.5333333333333333],"Name":"Brewer Diverging Purple-Orange (6)","NanColor":[0.3294117647058823,0.1529411764705882,0.5333333333333333]},{"IndexedColors":[0.9019607843137255,0.3803921568627451,0.00392156862745098,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.9686274509803922,0.9686274509803922,0.9686274509803922,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.3686274509803922,0.2352941176470588,0.6],"Name":"Brewer Diverging Purple-Orange (5)","NanColor":[0.3686274509803922,0.2352941176470588,0.6]},{"IndexedColors":[0.9019607843137255,0.3803921568627451,0.00392156862745098,0.9921568627450981,0.7215686274509804,0.3882352941176471,0.6980392156862745,0.6705882352941176,0.8235294117647058,0.3686274509803922,0.2352941176470588,0.6],"Name":"Brewer Diverging Purple-Orange (4)","NanColor":[0.3686274509803922,0.2352941176470588,0.6]},{"IndexedColors":[0.9450980392156862,0.6392156862745098,0.2509803921568627,0.9686274509803922,0.9686274509803922,0.9686274509803922,0.6,0.5568627450980392,0.7647058823529411],"Name":"Brewer Diverging Purple-Orange (3)","NanColor":[0.6,0.5568627450980392,0.7647058823529411]},{"IndexedColors":[0.6196078431372549,0.00392156862745098,0.2588235294117647,0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9568627450980393,0.4274509803921568,0.2627450980392157,0.9921568627450981,0.6823529411764706,0.3803921568627451,0.996078431372549,0.8784313725490196,0.5450980392156862,1,1,0.7490196078431373,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.4,0.7607843137254902,0.6470588235294118,0.196078431372549,0.5333333333333333,0.7411764705882353,0.3686274509803922,0.3098039215686275,0.6352941176470588],"Name":"Brewer Diverging Spectral (11)","NanColor":[0.3686274509803922,0.3098039215686275,0.6352941176470588]},{"IndexedColors":[0.6196078431372549,0.00392156862745098,0.2588235294117647,0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9568627450980393,0.4274509803921568,0.2627450980392157,0.9921568627450981,0.6823529411764706,0.3803921568627451,0.996078431372549,0.8784313725490196,0.5450980392156862,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.4,0.7607843137254902,0.6470588235294118,0.196078431372549,0.5333333333333333,0.7411764705882353,0.3686274509803922,0.3098039215686275,0.6352941176470588],"Name":"Brewer Diverging Spectral (10)","NanColor":[0.3686274509803922,0.3098039215686275,0.6352941176470588]},{"IndexedColors":[0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9568627450980393,0.4274509803921568,0.2627450980392157,0.9921568627450981,0.6823529411764706,0.3803921568627451,0.996078431372549,0.8784313725490196,0.5450980392156862,1,1,0.7490196078431373,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.4,0.7607843137254902,0.6470588235294118,0.196078431372549,0.5333333333333333,0.7411764705882353],"Name":"Brewer Diverging Spectral (9)","NanColor":[0.196078431372549,0.5333333333333333,0.7411764705882353]},{"IndexedColors":[0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9568627450980393,0.4274509803921568,0.2627450980392157,0.9921568627450981,0.6823529411764706,0.3803921568627451,0.996078431372549,0.8784313725490196,0.5450980392156862,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.4,0.7607843137254902,0.6470588235294118,0.196078431372549,0.5333333333333333,0.7411764705882353],"Name":"Brewer Diverging Spectral (8)","NanColor":[0.196078431372549,0.5333333333333333,0.7411764705882353]},{"IndexedColors":[0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9882352941176471,0.5529411764705883,0.3490196078431372,0.996078431372549,0.8784313725490196,0.5450980392156862,1,1,0.7490196078431373,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6,0.8352941176470589,0.5803921568627451,0.196078431372549,0.5333333333333333,0.7411764705882353],"Name":"Brewer Diverging Spectral (7)","NanColor":[0.196078431372549,0.5333333333333333,0.7411764705882353]},{"IndexedColors":[0.8352941176470589,0.2431372549019608,0.3098039215686275,0.9882352941176471,0.5529411764705883,0.3490196078431372,0.996078431372549,0.8784313725490196,0.5450980392156862,0.9019607843137255,0.9607843137254902,0.596078431372549,0.6,0.8352941176470589,0.5803921568627451,0.196078431372549,0.5333333333333333,0.7411764705882353],"Name":"Brewer Diverging Spectral (6)","NanColor":[0.196078431372549,0.5333333333333333,0.7411764705882353]},{"IndexedColors":[0.8431372549019608,0.09803921568627451,0.1098039215686274,0.9921568627450981,0.6823529411764706,0.3803921568627451,1,1,0.7490196078431373,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.1686274509803922,0.5137254901960784,0.7294117647058823],"Name":"Brewer Diverging Spectral (5)","NanColor":[0.1686274509803922,0.5137254901960784,0.7294117647058823]},{"IndexedColors":[0.8431372549019608,0.09803921568627451,0.1098039215686274,0.9921568627450981,0.6823529411764706,0.3803921568627451,0.6705882352941176,0.8666666666666667,0.6431372549019608,0.1686274509803922,0.5137254901960784,0.7294117647058823],"Name":"Brewer Diverging Spectral (4)","NanColor":[0.1686274509803922,0.5137254901960784,0.7294117647058823]},{"IndexedColors":[0.9882352941176471,0.5529411764705883,0.3490196078431372,1,1,0.7490196078431373,0.6,0.8352941176470589,0.5803921568627451],"Name":"Brewer Diverging Spectral (3)","NanColor":[0.6,0.8352941176470589,0.5803921568627451]},{"IndexedColors":[0.3294117647058823,0.1882352941176471,0.0196078431372549,0.5490196078431373,0.3176470588235294,0.0392156862745098,0.7490196078431373,0.5058823529411764,0.1764705882352941,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.9607843137254902,0.9607843137254902,0.9607843137254902,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.5019607843137255,0.803921568627451,0.7568627450980392,0.207843137254902,0.592156862745098,0.5607843137254902,0.00392156862745098,0.4,0.3686274509803922,0,0.2352941176470588,0.1882352941176471],"Name":"Brewer Diverging Brown-Blue-Green (11)","NanColor":[0,0.2352941176470588,0.1882352941176471]},{"IndexedColors":[0.3294117647058823,0.1882352941176471,0.0196078431372549,0.5490196078431373,0.3176470588235294,0.0392156862745098,0.7490196078431373,0.5058823529411764,0.1764705882352941,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.5019607843137255,0.803921568627451,0.7568627450980392,0.207843137254902,0.592156862745098,0.5607843137254902,0.00392156862745098,0.4,0.3686274509803922,0,0.2352941176470588,0.1882352941176471],"Name":"Brewer Diverging Brown-Blue-Green (10)","NanColor":[0,0.2352941176470588,0.1882352941176471]},{"IndexedColors":[0.5490196078431373,0.3176470588235294,0.0392156862745098,0.7490196078431373,0.5058823529411764,0.1764705882352941,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.9607843137254902,0.9607843137254902,0.9607843137254902,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.5019607843137255,0.803921568627451,0.7568627450980392,0.207843137254902,0.592156862745098,0.5607843137254902,0.00392156862745098,0.4,0.3686274509803922],"Name":"Brewer Diverging Brown-Blue-Green (9)","NanColor":[0.00392156862745098,0.4,0.3686274509803922]},{"IndexedColors":[0.5490196078431373,0.3176470588235294,0.0392156862745098,0.7490196078431373,0.5058823529411764,0.1764705882352941,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.5019607843137255,0.803921568627451,0.7568627450980392,0.207843137254902,0.592156862745098,0.5607843137254902,0.00392156862745098,0.4,0.3686274509803922],"Name":"Brewer Diverging Brown-Blue-Green (8)","NanColor":[0.00392156862745098,0.4,0.3686274509803922]},{"IndexedColors":[0.5490196078431373,0.3176470588235294,0.0392156862745098,0.8470588235294118,0.7019607843137254,0.396078431372549,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.9607843137254902,0.9607843137254902,0.9607843137254902,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.3529411764705883,0.7058823529411765,0.6745098039215687,0.00392156862745098,0.4,0.3686274509803922],"Name":"Brewer Diverging Brown-Blue-Green (7)","NanColor":[0.00392156862745098,0.4,0.3686274509803922]},{"IndexedColors":[0.5490196078431373,0.3176470588235294,0.0392156862745098,0.8470588235294118,0.7019607843137254,0.396078431372549,0.9647058823529412,0.9098039215686274,0.7647058823529411,0.7803921568627451,0.9176470588235294,0.8980392156862745,0.3529411764705883,0.7058823529411765,0.6745098039215687,0.00392156862745098,0.4,0.3686274509803922],"Name":"Brewer Diverging Brown-Blue-Green (6)","NanColor":[0.00392156862745098,0.4,0.3686274509803922]},{"IndexedColors":[0.6509803921568628,0.3803921568627451,0.1019607843137255,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.9607843137254902,0.9607843137254902,0.9607843137254902,0.5019607843137255,0.803921568627451,0.7568627450980392,0.00392156862745098,0.5215686274509804,0.4431372549019608],"Name":"Brewer Diverging Brown-Blue-Green (5)","NanColor":[0.00392156862745098,0.5215686274509804,0.4431372549019608]},{"IndexedColors":[0.6509803921568628,0.3803921568627451,0.1019607843137255,0.8745098039215686,0.7607843137254902,0.4901960784313725,0.5019607843137255,0.803921568627451,0.7568627450980392,0.00392156862745098,0.5215686274509804,0.4431372549019608],"Name":"Brewer Diverging Brown-Blue-Green (4)","NanColor":[0.00392156862745098,0.5215686274509804,0.4431372549019608]},{"IndexedColors":[0.8470588235294118,0.7019607843137254,0.396078431372549,0.9607843137254902,0.9607843137254902,0.9607843137254902,0.3529411764705883,0.7058823529411765,0.6745098039215687],"Name":"Brewer Diverging Brown-Blue-Green (3)","NanColor":[0.3529411764705883,0.7058823529411765,0.6745098039215687]},{"IndexedColors":[0.9686274509803922,0.9882352941176471,0.9921568627450981,0.8980392156862745,0.9607843137254902,0.9764705882352941,0.8,0.9254901960784314,0.9019607843137255,0.6,0.8470588235294118,0.788235294117647,0.4,0.7607843137254902,0.6431372549019608,0.2549019607843137,0.6823529411764706,0.4627450980392157,0.1372549019607843,0.5450980392156862,0.2705882352941176,0,0.4274509803921568,0.1725490196078431,0,0.2666666666666667,0.1058823529411765],"Name":"Brewer Sequential Blue-Green (9)","NanColor":[0,0.2666666666666667,0.1058823529411765]},{"IndexedColors":[0.9686274509803922,0.9882352941176471,0.9921568627450981,0.8980392156862745,0.9607843137254902,0.9764705882352941,0.8,0.9254901960784314,0.9019607843137255,0.6,0.8470588235294118,0.788235294117647,0.4,0.7607843137254902,0.6431372549019608,0.2549019607843137,0.6823529411764706,0.4627450980392157,0.1372549019607843,0.5450980392156862,0.2705882352941176,0,0.3450980392156863,0.1411764705882353],"Name":"Brewer Sequential Blue-Green (8)","NanColor":[0,0.3450980392156863,0.1411764705882353]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.8,0.9254901960784314,0.9019607843137255,0.8,0.9254901960784314,0.9019607843137255,0.4,0.7607843137254902,0.6431372549019608,0.2549019607843137,0.6823529411764706,0.4627450980392157,0.1372549019607843,0.5450980392156862,0.2705882352941176,0,0.3450980392156863,0.1411764705882353],"Name":"Brewer Sequential Blue-Green (7)","NanColor":[0,0.3450980392156863,0.1411764705882353]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.8,0.9254901960784314,0.9019607843137255,0.6,0.8470588235294118,0.788235294117647,0.4,0.7607843137254902,0.6431372549019608,0.1725490196078431,0.6352941176470588,0.3725490196078431,0,0.4274509803921568,0.1725490196078431],"Name":"Brewer Sequential Blue-Green (6)","NanColor":[0,0.4274509803921568,0.1725490196078431]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.6980392156862745,0.8862745098039215,0.8862745098039215,0.4,0.7607843137254902,0.6431372549019608,0.1725490196078431,0.6352941176470588,0.3725490196078431,0,0.4274509803921568,0.1725490196078431],"Name":"Brewer Sequential Blue-Green (5)","NanColor":[0,0.4274509803921568,0.1725490196078431]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.6980392156862745,0.8862745098039215,0.8862745098039215,0.4,0.7607843137254902,0.6431372549019608,0.1372549019607843,0.5450980392156862,0.2705882352941176],"Name":"Brewer Sequential Blue-Green (4)","NanColor":[0.1372549019607843,0.5450980392156862,0.2705882352941176]},{"IndexedColors":[0.8980392156862745,0.9607843137254902,0.9764705882352941,0.6,0.8470588235294118,0.788235294117647,0.1725490196078431,0.6352941176470588,0.3725490196078431],"Name":"Brewer Sequential Blue-Green (3)","NanColor":[0.1725490196078431,0.6352941176470588,0.3725490196078431]},{"IndexedColors":[1,1,0.8980392156862745,1,0.9686274509803922,0.7372549019607844,0.996078431372549,0.8901960784313725,0.5686274509803921,0.996078431372549,0.7686274509803922,0.3098039215686275,0.996078431372549,0.6,0.1607843137254902,0.9254901960784314,0.4392156862745098,0.0784313725490196,0.8,0.2980392156862745,0.00784313725490196,0.6,0.203921568627451,0.01568627450980392,0.4,0.1450980392156863,0.02352941176470588],"Name":"Brewer Sequential Yellow-Orange-Brown (9)","NanColor":[0.4,0.1450980392156863,0.02352941176470588]},{"IndexedColors":[1,1,0.8980392156862745,1,0.9686274509803922,0.7372549019607844,0.996078431372549,0.8901960784313725,0.5686274509803921,0.996078431372549,0.7686274509803922,0.3098039215686275,0.996078431372549,0.6,0.1607843137254902,0.9254901960784314,0.4392156862745098,0.0784313725490196,0.8,0.2980392156862745,0.00784313725490196,0.5490196078431373,0.1764705882352941,0.01568627450980392],"Name":"Brewer Sequential Yellow-Orange-Brown (8)","NanColor":[0.5490196078431373,0.1764705882352941,0.01568627450980392]},{"IndexedColors":[1,1,0.8313725490196079,0.996078431372549,0.8901960784313725,0.5686274509803921,0.996078431372549,0.7686274509803922,0.3098039215686275,0.996078431372549,0.6,0.1607843137254902,0.9254901960784314,0.4392156862745098,0.0784313725490196,0.8,0.2980392156862745,0.00784313725490196,0.5490196078431373,0.1764705882352941,0.01568627450980392],"Name":"Brewer Sequential Yellow-Orange-Brown (7)","NanColor":[0.5490196078431373,0.1764705882352941,0.01568627450980392]},{"IndexedColors":[1,1,0.8313725490196079,0.996078431372549,0.8901960784313725,0.5686274509803921,0.996078431372549,0.7686274509803922,0.3098039215686275,0.996078431372549,0.6,0.1607843137254902,0.8509803921568627,0.3725490196078431,0.05490196078431372,0.6,0.203921568627451,0.01568627450980392],"Name":"Brewer Sequential Yellow-Orange-Brown (6)","NanColor":[0.6,0.203921568627451,0.01568627450980392]},{"IndexedColors":[1,1,0.8313725490196079,0.996078431372549,0.8509803921568627,0.5568627450980392,0.996078431372549,0.6,0.1607843137254902,0.8509803921568627,0.3725490196078431,0.05490196078431372,0.6,0.203921568627451,0.01568627450980392],"Name":"Brewer Sequential Yellow-Orange-Brown (5)","NanColor":[0.6,0.203921568627451,0.01568627450980392]},{"IndexedColors":[1,1,0.8313725490196079,0.996078431372549,0.8509803921568627,0.5568627450980392,0.996078431372549,0.6,0.1607843137254902,0.8,0.2980392156862745,0.00784313725490196],"Name":"Brewer Sequential Yellow-Orange-Brown (4)","NanColor":[0.8,0.2980392156862745,0.00784313725490196]},{"IndexedColors":[1,0.9686274509803922,0.7372549019607844,0.996078431372549,0.7686274509803922,0.3098039215686275,0.8509803921568627,0.3725490196078431,0.05490196078431372],"Name":"Brewer Sequential Yellow-Orange-Brown (3)","NanColor":[0.8509803921568627,0.3725490196078431,0.05490196078431372]},{"IndexedColors":[0.9686274509803922,0.9882352941176471,0.9921568627450981,0.8784313725490196,0.9254901960784314,0.9568627450980393,0.7490196078431373,0.8274509803921568,0.9019607843137255,0.6196078431372549,0.7372549019607844,0.8549019607843137,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5490196078431373,0.4196078431372549,0.6941176470588235,0.5333333333333333,0.2549019607843137,0.615686274509804,0.5058823529411764,0.05882352941176471,0.4862745098039216,0.3019607843137255,0,0.2941176470588235],"Name":"Brewer Sequential Blue-Purple (9)","NanColor":[0.3019607843137255,0,0.2941176470588235]},{"IndexedColors":[0.9686274509803922,0.9882352941176471,0.9921568627450981,0.8784313725490196,0.9254901960784314,0.9568627450980393,0.7490196078431373,0.8274509803921568,0.9019607843137255,0.6196078431372549,0.7372549019607844,0.8549019607843137,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5490196078431373,0.4196078431372549,0.6941176470588235,0.5333333333333333,0.2549019607843137,0.615686274509804,0.4313725490196079,0.00392156862745098,0.4196078431372549],"Name":"Brewer Sequential Blue-Purple (8)","NanColor":[0.4313725490196079,0.00392156862745098,0.4196078431372549]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.7490196078431373,0.8274509803921568,0.9019607843137255,0.6196078431372549,0.7372549019607844,0.8549019607843137,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5490196078431373,0.4196078431372549,0.6941176470588235,0.5333333333333333,0.2549019607843137,0.615686274509804,0.4313725490196079,0.00392156862745098,0.4196078431372549],"Name":"Brewer Sequential Blue-Purple (7)","NanColor":[0.4313725490196079,0.00392156862745098,0.4196078431372549]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.7490196078431373,0.8274509803921568,0.9019607843137255,0.6196078431372549,0.7372549019607844,0.8549019607843137,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5333333333333333,0.3372549019607843,0.6549019607843137,0.5058823529411764,0.05882352941176471,0.4862745098039216],"Name":"Brewer Sequential Blue-Purple (6)","NanColor":[0.5058823529411764,0.05882352941176471,0.4862745098039216]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.7019607843137254,0.803921568627451,0.8901960784313725,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5333333333333333,0.3372549019607843,0.6549019607843137,0.5058823529411764,0.05882352941176471,0.4862745098039216],"Name":"Brewer Sequential Blue-Purple (5)","NanColor":[0.5058823529411764,0.05882352941176471,0.4862745098039216]},{"IndexedColors":[0.9294117647058824,0.9725490196078431,0.984313725490196,0.7019607843137254,0.803921568627451,0.8901960784313725,0.5490196078431373,0.5882352941176471,0.7764705882352941,0.5333333333333333,0.2549019607843137,0.615686274509804],"Name":"Brewer Sequential Blue-Purple (4)","NanColor":[0.5333333333333333,0.2549019607843137,0.615686274509804]},{"IndexedColors":[0.8784313725490196,0.9254901960784314,0.9568627450980393,0.6196078431372549,0.7372549019607844,0.8549019607843137,0.5333333333333333,0.3372549019607843,0.6549019607843137],"Name":"Brewer Sequential Blue-Purple (3)","NanColor":[0.5333333333333333,0.3372549019607843,0.6549019607843137]},{"IndexedColors":[0.4980392156862745,0.788235294117647,0.4980392156862745,0.7450980392156863,0.6823529411764706,0.8313725490196079,0.9921568627450981,0.7529411764705882,0.5254901960784314,1,1,0.6,0.2196078431372549,0.4235294117647059,0.6901960784313725,0.9411764705882353,0.00784313725490196,0.4980392156862745,0.7490196078431373,0.3568627450980392,0.09019607843137255,0.4,0.4,0.4],"Name":"Brewer Qualitative Accent","NanColor":[0.4,0.4,0.4]},{"IndexedColors":[0.1058823529411765,0.6196078431372549,0.4666666666666667,0.8509803921568627,0.3725490196078431,0.00784313725490196,0.4588235294117647,0.4392156862745098,0.7019607843137254,0.9058823529411765,0.1607843137254902,0.5411764705882353,0.4,0.6509803921568628,0.1176470588235294,0.9019607843137255,0.6705882352941176,0.00784313725490196,0.6509803921568628,0.4627450980392157,0.1137254901960784,0.4,0.4,0.4],"Name":"Brewer Qualitative Dark2","NanColor":[0.4,0.4,0.4]},{"IndexedColors":[0.4,0.7607843137254902,0.6470588235294118,0.9882352941176471,0.5529411764705883,0.3843137254901961,0.5529411764705883,0.6274509803921569,0.796078431372549,0.9058823529411765,0.5411764705882353,0.7647058823529411,0.6509803921568628,0.8470588235294118,0.3294117647058823,1,0.8509803921568627,0.1843137254901961,0.8980392156862745,0.7686274509803922,0.5803921568627451,0.7019607843137254,0.7019607843137254,0.7019607843137254],"Name":"Brewer Qualitative Set2","NanColor":[0.7019607843137254,0.7019607843137254,0.7019607843137254]},{"IndexedColors":[0.7019607843137254,0.8862745098039215,0.803921568627451,0.9921568627450981,0.803921568627451,0.6745098039215687,0.796078431372549,0.8352941176470589,0.9098039215686274,0.9568627450980393,0.792156862745098,0.8941176470588236,0.9019607843137255,0.9607843137254902,0.788235294117647,1,0.9490196078431372,0.6823529411764706,0.9450980392156862,0.8862745098039215,0.8,0.8,0.8,0.8],"Name":"Brewer Qualitative Pastel2","NanColor":[0.8,0.8,0.8]},{"IndexedColors":[0.984313725490196,0.7058823529411765,0.6823529411764706,0.7019607843137254,0.803921568627451,0.8901960784313725,0.8,0.9215686274509803,0.7725490196078432,0.8705882352941177,0.796078431372549,0.8941176470588236,0.996078431372549,0.8509803921568627,0.6509803921568628,1,1,0.8,0.8980392156862745,0.8470588235294118,0.7411764705882353,0.9921568627450981,0.8549019607843137,0.9254901960784314,0.9490196078431372,0.9490196078431372,0.9490196078431372],"Name":"Brewer Qualitative Pastel1","NanColor":[0.9490196078431372,0.9490196078431372,0.9490196078431372]},{"IndexedColors":[0.8941176470588236,0.1019607843137255,0.1098039215686274,0.2156862745098039,0.4941176470588236,0.7215686274509804,0.3019607843137255,0.6862745098039216,0.2901960784313726,0.596078431372549,0.3058823529411765,0.6392156862745098,1,0.4980392156862745,0,1,1,0.2,0.6509803921568628,0.3372549019607843,0.1568627450980392,0.9686274509803922,0.5058823529411764,0.7490196078431373,0.6,0.6,0.6],"Name":"Brewer Qualitative Set1","NanColor":[0.6,0.6,0.6]},{"IndexedColors":[0.6509803921568628,0.807843137254902,0.8901960784313725,0.1215686274509804,0.4705882352941176,0.7058823529411765,0.6980392156862745,0.8745098039215686,0.5411764705882353,0.2,0.6274509803921569,0.1725490196078431,0.984313725490196,0.6039215686274509,0.6,0.8901960784313725,0.1019607843137255,0.1098039215686274,0.9921568627450981,0.7490196078431373,0.4352941176470588,1,0.4980392156862745,0,0.792156862745098,0.6980392156862745,0.8392156862745098,0.4156862745098039,0.2392156862745098,0.6039215686274509,1,1,0.6],"Name":"Brewer Qualitative Paired","NanColor":[1,1,0.6]},{"IndexedColors":[0.5529411764705883,0.8274509803921568,0.7803921568627451,1,1,0.7019607843137254,0.7450980392156863,0.7294117647058823,0.8549019607843137,0.984313725490196,0.5019607843137255,0.4470588235294118,0.5019607843137255,0.6941176470588235,0.8274509803921568,0.9921568627450981,0.7058823529411765,0.3843137254901961,0.7019607843137254,0.8705882352941177,0.4117647058823529,0.9882352941176471,0.803921568627451,0.8980392156862745,0.8509803921568627,0.8509803921568627,0.8509803921568627,0.7372549019607844,0.5019607843137255,0.7411764705882353,0.8,0.9215686274509803,0.7725490196078432,1,0.9294117647058824,0.4352941176470588],"Name":"Brewer Qualitative Set3","NanColor":[1,0.9294117647058824,0.4352941176470588]},{"IndexedColors":[1,0,0,1,0.862745,0,0,0.695201,0],"Name":"Traffic Lights","NanColor":[0.803922,0,0.803922]},{"IndexedColors":[0.908659,0.604013,0.581857,1,0.862745,0,0,0.695201,0],"Name":"Traffic Lights For Deuteranopes","NanColor":[0.803922,0,0.803922]},{"IndexedColors":[0.4196078431372549,0,0.07058823529411765,0.9019607843137255,0.9411764705882353,0.0196078431372549,0.01568627450980392,0.6196078431372549,0.00784313725490196],"Name":"Traffic Lights For Deuteranopes 2","NanColor":[0.803922,0,0.803922]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Muted Blue-Green","NanColor":[0.25,0,0],"RGBPoints":[0,0.109804,0.27451,0.301961,0.02,0.129412,0.309804,0.341176,0.05,0.14902,0.341176,0.380392,0.1,0.188235,0.403922,0.458824,0.15,0.227451,0.447059,0.521569,0.2,0.290196,0.494118,0.588235,0.25,0.368627,0.552941,0.670588,0.3,0.458824,0.619608,0.74902,0.35,0.588235,0.713725,0.85098,0.4,0.72549,0.815686,0.941176,0.45,0.831373,0.882353,0.980392,0.475,0.909804,0.933333,1,0.5,0.980392,0.984314,1,0.5,0.996078,1,0.94902,0.5,1,1,0.980392,0.5,0.980392,0.984314,1,0.525,0.972549,0.988235,0.890196,0.55,0.917647,0.960784,0.835294,0.6,0.835294,0.921569,0.772549,0.65,0.768627,0.901961,0.737255,0.7,0.670588,0.831373,0.654902,0.75,0.576471,0.760784,0.584314,0.8,0.498039,0.678431,0.521569,0.85,0.392157,0.560784,0.427451,0.9,0.294118,0.45098,0.333333,0.95,0.211765,0.34902,0.254902,1,0.152941,0.278431,0.196078]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Green-Blue Asymmetric Divergent (62Blbc)","NanColor":[0.25,0,0],"RGBPoints":[0,0.121569,0.2,0.145098,0.05,0.196078,0.301961,0.223529,0.1,0.258824,0.4,0.278431,0.2,0.341176,0.54902,0.341176,0.25,0.419608,0.619608,0.376471,0.3,0.545098,0.701961,0.392157,0.35,0.643137,0.780392,0.403922,0.4,0.729412,0.819608,0.45098,0.45,0.811765,0.870588,0.521569,0.5,0.898039,0.909804,0.564706,0.55,0.941176,0.92549,0.686275,0.6,0.960784,0.94902,0.776471,0.64,1,1,1,0.65,0.890196,0.988235,0.972549,0.7,0.721569,0.894118,0.901961,0.75,0.631373,0.823529,0.839216,0.8,0.517647,0.662745,0.701961,0.85,0.384314,0.494118,0.54902,0.9,0.298039,0.360784,0.45098,0.95,0.223529,0.25098,0.34902,0.99,0.156863,0.172549,0.25098,1,0.137255,0.137255,0.188235]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Asymmtrical Earth Tones (6_21b)","NanColor":[0.25,0,0],"RGBPoints":[0,0.141176,0.14902,0.2,0.05,0.215686,0.258824,0.321569,0.1,0.243137,0.368627,0.380392,0.15,0.27451,0.439216,0.4,0.2,0.32549,0.501961,0.384314,0.25,0.403922,0.6,0.419608,0.3,0.486275,0.701961,0.454902,0.35,0.556863,0.74902,0.494118,0.4,0.670588,0.8,0.545098,0.5,0.854902,0.901961,0.631373,0.55,0.92549,0.941176,0.694118,0.6,0.960784,0.94902,0.776471,0.65,0.988235,0.968627,0.909804,0.7,0.839216,0.815686,0.772549,0.75,0.701961,0.662745,0.615686,0.8,0.6,0.529412,0.478431,0.85,0.501961,0.403922,0.360784,0.9,0.439216,0.313725,0.290196,1,0.301961,0.164706,0.176471]},{"ColorSpace":"Lab","Creator":"Francesca Samsel","Name":"Yellow 15","NanColor":[0.25,0,0],"RGBPoints":[0,1,1,0.988235,0.002,1,1,0.988235,0.05,0.984314,0.988235,0.843137,0.1,0.988235,0.988235,0.741176,0.15,0.980392,0.968627,0.654902,0.2,0.980392,0.945098,0.576471,0.25,0.968627,0.905882,0.486275,0.3,0.968627,0.862745,0.388235,0.35,0.960784,0.803922,0.286275,0.4,0.94902,0.741176,0.219608,0.45,0.941176,0.678431,0.14902,0.5,0.929412,0.607843,0.094118,0.55,0.921569,0.545098,0.054902,0.6,0.909804,0.486275,0.035294,0.65,0.890196,0.411765,0.019608,0.7,0.8,0.305882,0,0.75,0.760784,0.239216,0,0.8,0.678431,0.180392,0.011765,0.85,0.6,0.121569,0.023529,0.9,0.501961,0.054902,0.031373,0.95,0.4,0.039216,0.058824,1,0.301961,0.047059,0.090196]},{"ColorSpace":"Diverging","Name":"Magma (matplotlib)","NanColor":[0,1,0],"Source":"https://github.com/BIDS/colormap/blob/master/colormaps.py","License":"CC0","Creator":"Nathaniel J. Smith & Stefan van der Walt","RGBPoints":[0,0.001462,0.000466,0.013866,0.003922,0.002258,0.001295,0.018331,0.007843,0.003279,0.002305,0.023708,0.011765,0.004512,0.00349,0.029965,0.015686,0.00595,0.004843,0.03713,0.019608,0.007588,0.006356,0.044973,0.023529,0.009426,0.008022,0.052844,0.027451,0.011465,0.009828,0.06075,0.031373,0.013708,0.011771,0.068667,0.035294,0.016156,0.01384,0.076603,0.039216,0.018815,0.016026,0.084584,0.043137,0.021692,0.01832,0.09261,0.047059,0.024792,0.020715,0.100676,0.05098,0.028123,0.023201,0.108787,0.054902,0.031696,0.025765,0.116965,0.058824,0.03552,0.028397,0.125209,0.062745,0.039608,0.03109,0.133515,0.066667,0.04383,0.03383,0.141886,0.070588,0.048062,0.036607,0.150327,0.07451,0.05232,0.039407,0.158841,0.078431,0.056615,0.04216,0.167446,0.082353,0.060949,0.044794,0.176129,0.086275,0.06533,0.047318,0.184892,0.090196,0.069764,0.049726,0.193735,0.094118,0.074257,0.052017,0.20266,0.098039,0.078815,0.054184,0.211667,0.101961,0.083446,0.056225,0.220755,0.105882,0.088155,0.058133,0.229922,0.109804,0.092949,0.059904,0.239164,0.113725,0.097833,0.061531,0.248477,0.117647,0.102815,0.06301,0.257854,0.121569,0.107899,0.064335,0.267289,0.12549,0.113094,0.065492,0.276784,0.129412,0.118405,0.066479,0.286321,0.133333,0.123833,0.067295,0.295879,0.137255,0.12938,0.067935,0.305443,0.141176,0.135053,0.068391,0.315,0.145098,0.140858,0.068654,0.324538,0.14902,0.146785,0.068738,0.334011,0.152941,0.152839,0.068637,0.343404,0.156863,0.159018,0.068354,0.352688,0.160784,0.165308,0.067911,0.361816,0.164706,0.171713,0.067305,0.370771,0.168627,0.178212,0.066576,0.379497,0.172549,0.184801,0.065732,0.387973,0.176471,0.19146,0.064818,0.396152,0.180392,0.198177,0.063862,0.404009,0.184314,0.204935,0.062907,0.411514,0.188235,0.211718,0.061992,0.418647,0.192157,0.218512,0.061158,0.425392,0.196078,0.225302,0.060445,0.431742,0.2,0.232077,0.059889,0.437695,0.203922,0.238826,0.059517,0.443256,0.207843,0.245543,0.059352,0.448436,0.211765,0.25222,0.059415,0.453248,0.215686,0.258857,0.059706,0.45771,0.219608,0.265447,0.060237,0.46184,0.223529,0.271994,0.060994,0.46566,0.227451,0.278493,0.061978,0.46919,0.231373,0.284951,0.063168,0.472451,0.235294,0.291366,0.064553,0.475462,0.239216,0.29774,0.066117,0.478243,0.243137,0.304081,0.067835,0.480812,0.247059,0.310382,0.069702,0.483186,0.25098,0.316654,0.07169,0.48538,0.254902,0.322899,0.073782,0.487408,0.258824,0.329114,0.075972,0.489287,0.262745,0.335308,0.078236,0.491024,0.266667,0.341482,0.080564,0.492631,0.270588,0.347636,0.082946,0.494121,0.27451,0.353773,0.085373,0.495501,0.278431,0.359898,0.087831,0.496778,0.282353,0.366012,0.090314,0.49796,0.286275,0.372116,0.092816,0.499053,0.290196,0.378211,0.095332,0.500067,0.294118,0.384299,0.097855,0.501002,0.298039,0.390384,0.100379,0.501864,0.301961,0.396467,0.102902,0.502658,0.305882,0.402548,0.10542,0.503386,0.309804,0.408629,0.10793,0.504052,0.313725,0.414709,0.110431,0.504662,0.317647,0.420791,0.11292,0.505215,0.321569,0.426877,0.115395,0.505714,0.32549,0.432967,0.117855,0.50616,0.329412,0.439062,0.120298,0.506555,0.333333,0.445163,0.122724,0.506901,0.337255,0.451271,0.125132,0.507198,0.341176,0.457386,0.127522,0.507448,0.345098,0.463508,0.129893,0.507652,0.34902,0.46964,0.132245,0.507809,0.352941,0.47578,0.134577,0.507921,0.356863,0.481929,0.136891,0.507989,0.360784,0.488088,0.139186,0.508011,0.364706,0.494258,0.141462,0.507988,0.368627,0.500438,0.143719,0.50792,0.372549,0.506629,0.145958,0.507806,0.376471,0.512831,0.148179,0.507648,0.380392,0.519045,0.150383,0.507443,0.384314,0.52527,0.152569,0.507192,0.388235,0.531507,0.154739,0.506895,0.392157,0.537755,0.156894,0.506551,0.396078,0.544015,0.159033,0.506159,0.4,0.550287,0.161158,0.505719,0.403922,0.556571,0.163269,0.50523,0.407843,0.562866,0.165368,0.504692,0.411765,0.569172,0.167454,0.504105,0.415686,0.57549,0.16953,0.503466,0.419608,0.581819,0.171596,0.502777,0.423529,0.588158,0.173652,0.502035,0.427451,0.594508,0.175701,0.501241,0.431373,0.600868,0.177743,0.500394,0.435294,0.607238,0.179779,0.499492,0.439216,0.613617,0.181811,0.498536,0.443137,0.620005,0.18384,0.497524,0.447059,0.626401,0.185867,0.496456,0.45098,0.632805,0.187893,0.495332,0.454902,0.639216,0.189921,0.49415,0.458824,0.645633,0.191952,0.49291,0.462745,0.652056,0.193986,0.491611,0.466667,0.658483,0.196027,0.490253,0.470588,0.664915,0.198075,0.488836,0.47451,0.671349,0.200133,0.487358,0.478431,0.677786,0.202203,0.485819,0.482353,0.684224,0.204286,0.484219,0.486275,0.690661,0.206384,0.482558,0.490196,0.697098,0.208501,0.480835,0.494118,0.703532,0.210638,0.479049,0.498039,0.709962,0.212797,0.477201,0.501961,0.716387,0.214982,0.47529,0.505882,0.722805,0.217194,0.473316,0.509804,0.729216,0.219437,0.471279,0.513725,0.735616,0.221713,0.46918,0.517647,0.742004,0.224025,0.467018,0.521569,0.748378,0.226377,0.464794,0.52549,0.754737,0.228772,0.462509,0.529412,0.761077,0.231214,0.460162,0.533333,0.767398,0.233705,0.457755,0.537255,0.773695,0.236249,0.455289,0.541176,0.779968,0.238851,0.452765,0.545098,0.786212,0.241514,0.450184,0.54902,0.792427,0.244242,0.447543,0.552941,0.798608,0.24704,0.444848,0.556863,0.804752,0.249911,0.442102,0.560784,0.810855,0.252861,0.439305,0.564706,0.816914,0.255895,0.436461,0.568627,0.822926,0.259016,0.433573,0.572549,0.828886,0.262229,0.430644,0.576471,0.834791,0.26554,0.427671,0.580392,0.840636,0.268953,0.424666,0.584314,0.846416,0.272473,0.421631,0.588235,0.852126,0.276106,0.418573,0.592157,0.857763,0.279857,0.415496,0.596078,0.86332,0.283729,0.412403,0.6,0.868793,0.287728,0.409303,0.603922,0.874176,0.291859,0.406205,0.607843,0.879464,0.296125,0.403118,0.611765,0.884651,0.30053,0.400047,0.615686,0.889731,0.305079,0.397002,0.619608,0.8947,0.309773,0.393995,0.623529,0.899552,0.314616,0.391037,0.627451,0.904281,0.31961,0.388137,0.631373,0.908884,0.324755,0.385308,0.635294,0.913354,0.330052,0.382563,0.639216,0.917689,0.3355,0.379915,0.643137,0.921884,0.341098,0.377376,0.647059,0.925937,0.346844,0.374959,0.65098,0.929845,0.352734,0.372677,0.654902,0.933606,0.358764,0.370541,0.658824,0.937221,0.364929,0.368567,0.662745,0.940687,0.371224,0.366762,0.666667,0.944006,0.377643,0.365136,0.670588,0.94718,0.384178,0.363701,0.67451,0.95021,0.39082,0.362468,0.678431,0.953099,0.397563,0.361438,0.682353,0.955849,0.4044,0.360619,0.686275,0.958464,0.411324,0.360014,0.690196,0.960949,0.418323,0.35963,0.694118,0.96331,0.42539,0.359469,0.698039,0.965549,0.432519,0.359529,0.701961,0.967671,0.439703,0.35981,0.705882,0.96968,0.446936,0.360311,0.709804,0.971582,0.45421,0.36103,0.713725,0.973381,0.46152,0.361965,0.717647,0.975082,0.468861,0.363111,0.721569,0.97669,0.476226,0.364466,0.72549,0.97821,0.483612,0.366025,0.729412,0.979645,0.491014,0.367783,0.733333,0.981,0.498428,0.369734,0.737255,0.982279,0.505851,0.371874,0.741176,0.983485,0.51328,0.374198,0.745098,0.984622,0.520713,0.376698,0.74902,0.985693,0.528148,0.379371,0.752941,0.9867,0.535582,0.38221,0.756863,0.987646,0.543015,0.38521,0.760784,0.988533,0.550446,0.388365,0.764706,0.989363,0.557873,0.391671,0.768627,0.990138,0.565296,0.395122,0.772549,0.990871,0.572706,0.398714,0.776471,0.991558,0.580107,0.402441,0.780392,0.992196,0.587502,0.406299,0.784314,0.992785,0.594891,0.410283,0.788235,0.993326,0.602275,0.41439,0.792157,0.993834,0.609644,0.418613,0.796078,0.994309,0.616999,0.42295,0.8,0.994738,0.62435,0.427397,0.803922,0.995122,0.631696,0.431951,0.807843,0.99548,0.639027,0.436607,0.811765,0.99581,0.646344,0.441361,0.815686,0.996096,0.653659,0.446213,0.819608,0.996341,0.660969,0.45116,0.823529,0.99658,0.668256,0.456192,0.827451,0.996775,0.675541,0.461314,0.831373,0.996925,0.682828,0.466526,0.835294,0.997077,0.690088,0.471811,0.839216,0.997186,0.697349,0.477182,0.843137,0.997254,0.704611,0.482635,0.847059,0.997325,0.711848,0.488154,0.85098,0.997351,0.719089,0.493755,0.854902,0.997351,0.726324,0.499428,0.858824,0.997341,0.733545,0.505167,0.862745,0.997285,0.740772,0.510983,0.866667,0.997228,0.747981,0.516859,0.870588,0.997138,0.75519,0.522806,0.87451,0.997019,0.762398,0.528821,0.878431,0.996898,0.769591,0.534892,0.882353,0.996727,0.776795,0.541039,0.886275,0.996571,0.783977,0.547233,0.890196,0.996369,0.791167,0.553499,0.894118,0.996162,0.798348,0.55982,0.898039,0.995932,0.805527,0.566202,0.901961,0.99568,0.812706,0.572645,0.905882,0.995424,0.819875,0.57914,0.909804,0.995131,0.827052,0.585701,0.913725,0.994851,0.834213,0.592307,0.917647,0.994524,0.841387,0.598983,0.921569,0.994222,0.84854,0.605696,0.92549,0.993866,0.855711,0.612482,0.929412,0.993545,0.862859,0.619299,0.933333,0.99317,0.870024,0.626189,0.937255,0.992831,0.877168,0.633109,0.941176,0.99244,0.88433,0.640099,0.945098,0.992089,0.89147,0.647116,0.94902,0.991688,0.898627,0.654202,0.952941,0.991332,0.905763,0.661309,0.956863,0.99093,0.912915,0.668481,0.960784,0.99057,0.920049,0.675675,0.964706,0.990175,0.927196,0.682926,0.968627,0.989815,0.934329,0.690198,0.972549,0.989434,0.94147,0.697519,0.976471,0.989077,0.948604,0.704863,0.980392,0.988717,0.955742,0.712242,0.984314,0.988367,0.962878,0.719649,0.988235,0.988033,0.970012,0.727077,0.992157,0.987691,0.977154,0.734536,0.996078,0.987387,0.984288,0.742002,1,0.987053,0.991438,0.749504]},{"ColorSpace":"Diverging","Name":"Inferno (matplotlib)","NanColor":[0,1,0],"Source":"https://github.com/BIDS/colormap/blob/master/colormaps.py","License":"CC0","Creator":"Nathaniel J. Smith & Stefan van der Walt","RGBPoints":[0,0.001462,0.000466,0.013866,0.003922,0.002267,0.00127,0.01857,0.007843,0.003299,0.002249,0.024239,0.011765,0.004547,0.003392,0.030909,0.015686,0.006006,0.004692,0.038558,0.019608,0.007676,0.006136,0.046836,0.023529,0.009561,0.007713,0.055143,0.027451,0.011663,0.009417,0.06346,0.031373,0.013995,0.011225,0.071862,0.035294,0.016561,0.013136,0.080282,0.039216,0.019373,0.015133,0.088767,0.043137,0.022447,0.017199,0.097327,0.047059,0.025793,0.019331,0.10593,0.05098,0.029432,0.021503,0.114621,0.054902,0.033385,0.023702,0.123397,0.058824,0.037668,0.025921,0.132232,0.062745,0.042253,0.028139,0.141141,0.066667,0.046915,0.030324,0.150164,0.070588,0.051644,0.032474,0.159254,0.07451,0.056449,0.034569,0.168414,0.078431,0.06134,0.03659,0.177642,0.082353,0.066331,0.038504,0.186962,0.086275,0.071429,0.040294,0.196354,0.090196,0.076637,0.041905,0.205799,0.094118,0.081962,0.043328,0.215289,0.098039,0.087411,0.044556,0.224813,0.101961,0.09299,0.045583,0.234358,0.105882,0.098702,0.046402,0.243904,0.109804,0.104551,0.047008,0.25343,0.113725,0.110536,0.047399,0.262912,0.117647,0.116656,0.047574,0.272321,0.121569,0.122908,0.047536,0.281624,0.12549,0.129285,0.047293,0.290788,0.129412,0.135778,0.046856,0.299776,0.133333,0.142378,0.046242,0.308553,0.137255,0.149073,0.045468,0.317085,0.141176,0.15585,0.044559,0.325338,0.145098,0.162689,0.043554,0.333277,0.14902,0.169575,0.042489,0.340874,0.152941,0.176493,0.041402,0.348111,0.156863,0.183429,0.040329,0.354971,0.160784,0.190367,0.039309,0.361447,0.164706,0.197297,0.0384,0.367535,0.168627,0.204209,0.037632,0.373238,0.172549,0.211095,0.03703,0.378563,0.176471,0.217949,0.036615,0.383522,0.180392,0.224763,0.036405,0.388129,0.184314,0.231538,0.036405,0.3924,0.188235,0.238273,0.036621,0.396353,0.192157,0.244967,0.037055,0.400007,0.196078,0.25162,0.037705,0.403378,0.2,0.258234,0.038571,0.406485,0.203922,0.26481,0.039647,0.409345,0.207843,0.271347,0.040922,0.411976,0.211765,0.27785,0.042353,0.414392,0.215686,0.284321,0.043933,0.416608,0.219608,0.290763,0.045644,0.418637,0.223529,0.297178,0.04747,0.420491,0.227451,0.303568,0.049396,0.422182,0.231373,0.309935,0.051407,0.423721,0.235294,0.316282,0.05349,0.425116,0.239216,0.32261,0.055634,0.426377,0.243137,0.328921,0.057827,0.427511,0.247059,0.335217,0.06006,0.428524,0.25098,0.3415,0.062325,0.429425,0.254902,0.347771,0.064616,0.430217,0.258824,0.354032,0.066925,0.430906,0.262745,0.360284,0.069247,0.431497,0.266667,0.366529,0.071579,0.431994,0.270588,0.372768,0.073915,0.4324,0.27451,0.379001,0.076253,0.432719,0.278431,0.385228,0.078591,0.432955,0.282353,0.391453,0.080927,0.433109,0.286275,0.397674,0.083257,0.433183,0.290196,0.403894,0.08558,0.433179,0.294118,0.410113,0.087896,0.433098,0.298039,0.416331,0.090203,0.432943,0.301961,0.422549,0.092501,0.432714,0.305882,0.428768,0.09479,0.432412,0.309804,0.434987,0.097069,0.432039,0.313725,0.441207,0.099338,0.431594,0.317647,0.447428,0.101597,0.43108,0.321569,0.453651,0.103848,0.430498,0.32549,0.459875,0.106089,0.429846,0.329412,0.4661,0.108322,0.429125,0.333333,0.472328,0.110547,0.428334,0.337255,0.478558,0.112764,0.427475,0.341176,0.484789,0.114974,0.426548,0.345098,0.491022,0.117179,0.425552,0.34902,0.497257,0.119379,0.424488,0.352941,0.503493,0.121575,0.423356,0.356863,0.50973,0.123769,0.422156,0.360784,0.515967,0.12596,0.420887,0.364706,0.522206,0.12815,0.419549,0.368627,0.528444,0.130341,0.418142,0.372549,0.534683,0.132534,0.416667,0.376471,0.54092,0.134729,0.415123,0.380392,0.547157,0.136929,0.413511,0.384314,0.553392,0.139134,0.411829,0.388235,0.559624,0.141346,0.410078,0.392157,0.565854,0.143567,0.408258,0.396078,0.572081,0.145797,0.406369,0.4,0.578304,0.148039,0.404411,0.403922,0.584521,0.150294,0.402385,0.407843,0.590734,0.152563,0.40029,0.411765,0.59694,0.154848,0.398125,0.415686,0.603139,0.157151,0.395891,0.419608,0.60933,0.159474,0.393589,0.423529,0.615513,0.161817,0.391219,0.427451,0.621685,0.164184,0.388781,0.431373,0.627847,0.166575,0.386276,0.435294,0.633998,0.168992,0.383704,0.439216,0.640135,0.171438,0.381065,0.443137,0.64626,0.173914,0.378359,0.447059,0.652369,0.176421,0.375586,0.45098,0.658463,0.178962,0.372748,0.454902,0.66454,0.181539,0.369846,0.458824,0.670599,0.184153,0.366879,0.462745,0.676638,0.186807,0.363849,0.466667,0.682656,0.189501,0.360757,0.470588,0.688653,0.192239,0.357603,0.47451,0.694627,0.195021,0.354388,0.478431,0.700576,0.197851,0.351113,0.482353,0.7065,0.200728,0.347777,0.486275,0.712396,0.203656,0.344383,0.490196,0.718264,0.206636,0.340931,0.494118,0.724103,0.20967,0.337424,0.498039,0.729909,0.212759,0.333861,0.501961,0.735683,0.215906,0.330245,0.505882,0.741423,0.219112,0.326576,0.509804,0.747127,0.222378,0.322856,0.513725,0.752794,0.225706,0.319085,0.517647,0.758422,0.229097,0.315266,0.521569,0.76401,0.232554,0.311399,0.52549,0.769556,0.236077,0.307485,0.529412,0.775059,0.239667,0.303526,0.533333,0.780517,0.243327,0.299523,0.537255,0.785929,0.247056,0.295477,0.541176,0.791293,0.250856,0.29139,0.545098,0.796607,0.254728,0.287264,0.54902,0.801871,0.258674,0.283099,0.552941,0.807082,0.262692,0.278898,0.556863,0.812239,0.266786,0.274661,0.560784,0.817341,0.270954,0.27039,0.564706,0.822386,0.275197,0.266085,0.568627,0.827372,0.279517,0.26175,0.572549,0.832299,0.283913,0.257383,0.576471,0.837165,0.288385,0.252988,0.580392,0.841969,0.292933,0.248564,0.584314,0.846709,0.297559,0.244113,0.588235,0.851384,0.30226,0.239636,0.592157,0.855992,0.307038,0.235133,0.596078,0.860533,0.311892,0.230606,0.6,0.865006,0.316822,0.226055,0.603922,0.869409,0.321827,0.221482,0.607843,0.873741,0.326906,0.216886,0.611765,0.878001,0.33206,0.212268,0.615686,0.882188,0.337287,0.207628,0.619608,0.886302,0.342586,0.202968,0.623529,0.890341,0.347957,0.198286,0.627451,0.894305,0.353399,0.193584,0.631373,0.898192,0.358911,0.18886,0.635294,0.902003,0.364492,0.184116,0.639216,0.905735,0.37014,0.17935,0.643137,0.90939,0.375856,0.174563,0.647059,0.912966,0.381636,0.169755,0.65098,0.916462,0.387481,0.164924,0.654902,0.919879,0.393389,0.16007,0.658824,0.923215,0.399359,0.155193,0.662745,0.92647,0.405389,0.150292,0.666667,0.929644,0.411479,0.145367,0.670588,0.932737,0.417627,0.140417,0.67451,0.935747,0.423831,0.13544,0.678431,0.938675,0.430091,0.130438,0.682353,0.941521,0.436405,0.125409,0.686275,0.944285,0.442772,0.120354,0.690196,0.946965,0.449191,0.115272,0.694118,0.949562,0.45566,0.110164,0.698039,0.952075,0.462178,0.105031,0.701961,0.954506,0.468744,0.099874,0.705882,0.956852,0.475356,0.094695,0.709804,0.959114,0.482014,0.089499,0.713725,0.961293,0.488716,0.084289,0.717647,0.963387,0.495462,0.079073,0.721569,0.965397,0.502249,0.073859,0.72549,0.967322,0.509078,0.068659,0.729412,0.969163,0.515946,0.063488,0.733333,0.970919,0.522853,0.058367,0.737255,0.97259,0.529798,0.053324,0.741176,0.974176,0.53678,0.048392,0.745098,0.975677,0.543798,0.043618,0.74902,0.977092,0.55085,0.03905,0.752941,0.978422,0.557937,0.034931,0.756863,0.979666,0.565057,0.031409,0.760784,0.980824,0.572209,0.028508,0.764706,0.981895,0.579392,0.02625,0.768627,0.982881,0.586606,0.024661,0.772549,0.983779,0.593849,0.02377,0.776471,0.984591,0.601122,0.023606,0.780392,0.985315,0.608422,0.024202,0.784314,0.985952,0.61575,0.025592,0.788235,0.986502,0.623105,0.027814,0.792157,0.986964,0.630485,0.030908,0.796078,0.987337,0.63789,0.034916,0.8,0.987622,0.64532,0.039886,0.803922,0.987819,0.652773,0.045581,0.807843,0.987926,0.66025,0.05175,0.811765,0.987945,0.667748,0.058329,0.815686,0.987874,0.675267,0.065257,0.819608,0.987714,0.682807,0.072489,0.823529,0.987464,0.690366,0.07999,0.827451,0.987124,0.697944,0.087731,0.831373,0.986694,0.70554,0.095694,0.835294,0.986175,0.713153,0.103863,0.839216,0.985566,0.720782,0.112229,0.843137,0.984865,0.728427,0.120785,0.847059,0.984075,0.736087,0.129527,0.85098,0.983196,0.743758,0.138453,0.854902,0.982228,0.751442,0.147565,0.858824,0.981173,0.759135,0.156863,0.862745,0.980032,0.766837,0.166353,0.866667,0.978806,0.774545,0.176037,0.870588,0.977497,0.782258,0.185923,0.87451,0.976108,0.789974,0.196018,0.878431,0.974638,0.797692,0.206332,0.882353,0.973088,0.805409,0.216877,0.886275,0.971468,0.813122,0.227658,0.890196,0.969783,0.820825,0.238686,0.894118,0.968041,0.828515,0.249972,0.898039,0.966243,0.836191,0.261534,0.901961,0.964394,0.843848,0.273391,0.905882,0.962517,0.851476,0.285546,0.909804,0.960626,0.859069,0.29801,0.913725,0.95872,0.866624,0.31082,0.917647,0.956834,0.874129,0.323974,0.921569,0.954997,0.881569,0.337475,0.92549,0.953215,0.888942,0.351369,0.929412,0.951546,0.896226,0.365627,0.933333,0.950018,0.903409,0.380271,0.937255,0.948683,0.910473,0.395289,0.941176,0.947594,0.917399,0.410665,0.945098,0.946809,0.924168,0.426373,0.94902,0.946392,0.930761,0.442367,0.952941,0.946403,0.937159,0.458592,0.956863,0.946903,0.943348,0.47497,0.960784,0.947937,0.949318,0.491426,0.964706,0.949545,0.955063,0.50786,0.968627,0.95174,0.960587,0.524203,0.972549,0.954529,0.965896,0.540361,0.976471,0.957896,0.971003,0.556275,0.980392,0.961812,0.975924,0.571925,0.984314,0.966249,0.980678,0.587206,0.988235,0.971162,0.985282,0.602154,0.992157,0.976511,0.989753,0.61676,0.996078,0.982257,0.994109,0.631017,1,0.988362,0.998364,0.644924]},{"ColorSpace":"Diverging","Name":"Plasma (matplotlib)","NanColor":[0,1,0],"Source":"https://github.com/BIDS/colormap/blob/master/colormaps.py","License":"CC0","Creator":"Nathaniel J. Smith & Stefan van der Walt","RGBPoints":[0,0.050383,0.029803,0.527975,0.003922,0.063536,0.028426,0.533124,0.007843,0.075353,0.027206,0.538007,0.011765,0.086222,0.026125,0.542658,0.015686,0.096379,0.025165,0.547103,0.019608,0.10598,0.024309,0.551368,0.023529,0.115124,0.023556,0.555468,0.027451,0.123903,0.022878,0.559423,0.031373,0.132381,0.022258,0.56325,0.035294,0.140603,0.021687,0.566959,0.039216,0.148607,0.021154,0.570562,0.043137,0.156421,0.020651,0.574065,0.047059,0.16407,0.020171,0.577478,0.05098,0.171574,0.019706,0.580806,0.054902,0.17895,0.019252,0.584054,0.058824,0.186213,0.018803,0.587228,0.062745,0.193374,0.018354,0.59033,0.066667,0.200445,0.017902,0.593364,0.070588,0.207435,0.017442,0.596333,0.07451,0.21435,0.016973,0.599239,0.078431,0.221197,0.016497,0.602083,0.082353,0.227983,0.016007,0.604867,0.086275,0.234715,0.015502,0.607592,0.090196,0.241396,0.014979,0.610259,0.094118,0.248032,0.014439,0.612868,0.098039,0.254627,0.013882,0.615419,0.101961,0.261183,0.013308,0.617911,0.105882,0.267703,0.012716,0.620346,0.109804,0.274191,0.012109,0.622722,0.113725,0.280648,0.011488,0.625038,0.117647,0.287076,0.010855,0.627295,0.121569,0.293478,0.010213,0.62949,0.12549,0.299855,0.009561,0.631624,0.129412,0.30621,0.008902,0.633694,0.133333,0.312543,0.008239,0.6357,0.137255,0.318856,0.007576,0.63764,0.141176,0.32515,0.006915,0.639512,0.145098,0.331426,0.006261,0.641316,0.14902,0.337683,0.005618,0.643049,0.152941,0.343925,0.004991,0.64471,0.156863,0.35015,0.004382,0.646298,0.160784,0.356359,0.003798,0.64781,0.164706,0.362553,0.003243,0.649245,0.168627,0.368733,0.002724,0.650601,0.172549,0.374897,0.002245,0.651876,0.176471,0.381047,0.001814,0.653068,0.180392,0.387183,0.001434,0.654177,0.184314,0.393304,0.001114,0.655199,0.188235,0.399411,0.000859,0.656133,0.192157,0.405503,0.000678,0.656977,0.196078,0.41158,0.000577,0.65773,0.2,0.417642,0.000564,0.65839,0.203922,0.423689,0.000646,0.658956,0.207843,0.429719,0.000831,0.659425,0.211765,0.435734,0.001127,0.659797,0.215686,0.441732,0.00154,0.660069,0.219608,0.447714,0.00208,0.66024,0.223529,0.453677,0.002755,0.66031,0.227451,0.459623,0.003574,0.660277,0.231373,0.46555,0.004545,0.660139,0.235294,0.471457,0.005678,0.659897,0.239216,0.477344,0.00698,0.659549,0.243137,0.48321,0.00846,0.659095,0.247059,0.489055,0.010127,0.658534,0.25098,0.494877,0.01199,0.657865,0.254902,0.500678,0.014055,0.657088,0.258824,0.506454,0.016333,0.656202,0.262745,0.512206,0.018833,0.655209,0.266667,0.517933,0.021563,0.654109,0.270588,0.523633,0.024532,0.652901,0.27451,0.529306,0.027747,0.651586,0.278431,0.534952,0.031217,0.650165,0.282353,0.54057,0.03495,0.64864,0.286275,0.546157,0.038954,0.64701,0.290196,0.551715,0.043136,0.645277,0.294118,0.557243,0.047331,0.643443,0.298039,0.562738,0.051545,0.641509,0.301961,0.568201,0.055778,0.639477,0.305882,0.573632,0.060028,0.637349,0.309804,0.579029,0.064296,0.635126,0.313725,0.584391,0.068579,0.632812,0.317647,0.589719,0.072878,0.630408,0.321569,0.595011,0.07719,0.627917,0.32549,0.600266,0.081516,0.625342,0.329412,0.605485,0.085854,0.622686,0.333333,0.610667,0.090204,0.619951,0.337255,0.615812,0.094564,0.61714,0.341176,0.620919,0.098934,0.614257,0.345098,0.625987,0.103312,0.611305,0.34902,0.631017,0.107699,0.608287,0.352941,0.636008,0.112092,0.605205,0.356863,0.640959,0.116492,0.602065,0.360784,0.645872,0.120898,0.598867,0.364706,0.650746,0.125309,0.595617,0.368627,0.65558,0.129725,0.592317,0.372549,0.660374,0.134144,0.588971,0.376471,0.665129,0.138566,0.585582,0.380392,0.669845,0.142992,0.582154,0.384314,0.674522,0.147419,0.578688,0.388235,0.67916,0.151848,0.575189,0.392157,0.683758,0.156278,0.57166,0.396078,0.688318,0.160709,0.568103,0.4,0.69284,0.165141,0.564522,0.403922,0.697324,0.169573,0.560919,0.407843,0.701769,0.174005,0.557296,0.411765,0.706178,0.178437,0.553657,0.415686,0.710549,0.182868,0.550004,0.419608,0.714883,0.187299,0.546338,0.423529,0.719181,0.191729,0.542663,0.427451,0.723444,0.196158,0.538981,0.431373,0.72767,0.200586,0.535293,0.435294,0.731862,0.205013,0.531601,0.439216,0.736019,0.209439,0.527908,0.443137,0.740143,0.213864,0.524216,0.447059,0.744232,0.218288,0.520524,0.45098,0.748289,0.222711,0.516834,0.454902,0.752312,0.227133,0.513149,0.458824,0.756304,0.231555,0.509468,0.462745,0.760264,0.235976,0.505794,0.466667,0.764193,0.240396,0.502126,0.470588,0.76809,0.244817,0.498465,0.47451,0.771958,0.249237,0.494813,0.478431,0.775796,0.253658,0.491171,0.482353,0.779604,0.258078,0.487539,0.486275,0.783383,0.2625,0.483918,0.490196,0.787133,0.266922,0.480307,0.494118,0.790855,0.271345,0.476706,0.498039,0.794549,0.27577,0.473117,0.501961,0.798216,0.280197,0.469538,0.505882,0.801855,0.284626,0.465971,0.509804,0.805467,0.289057,0.462415,0.513725,0.809052,0.293491,0.45887,0.517647,0.812612,0.297928,0.455338,0.521569,0.816144,0.302368,0.451816,0.52549,0.819651,0.306812,0.448306,0.529412,0.823132,0.311261,0.444806,0.533333,0.826588,0.315714,0.441316,0.537255,0.830018,0.320172,0.437836,0.541176,0.833422,0.324635,0.434366,0.545098,0.836801,0.329105,0.430905,0.54902,0.840155,0.33358,0.427455,0.552941,0.843484,0.338062,0.424013,0.556863,0.846788,0.342551,0.420579,0.560784,0.850066,0.347048,0.417153,0.564706,0.853319,0.351553,0.413734,0.568627,0.856547,0.356066,0.410322,0.572549,0.85975,0.360588,0.406917,0.576471,0.862927,0.365119,0.403519,0.580392,0.866078,0.36966,0.400126,0.584314,0.869203,0.374212,0.396738,0.588235,0.872303,0.378774,0.393355,0.592157,0.875376,0.383347,0.389976,0.596078,0.878423,0.387932,0.3866,0.6,0.881443,0.392529,0.383229,0.603922,0.884436,0.397139,0.37986,0.607843,0.887402,0.401762,0.376494,0.611765,0.89034,0.406398,0.37313,0.615686,0.89325,0.411048,0.369768,0.619608,0.896131,0.415712,0.366407,0.623529,0.898984,0.420392,0.363047,0.627451,0.901807,0.425087,0.359688,0.631373,0.904601,0.429797,0.356329,0.635294,0.907365,0.434524,0.35297,0.639216,0.910098,0.439268,0.34961,0.643137,0.9128,0.444029,0.346251,0.647059,0.915471,0.448807,0.34289,0.65098,0.918109,0.453603,0.339529,0.654902,0.920714,0.458417,0.336166,0.658824,0.923287,0.463251,0.332801,0.662745,0.925825,0.468103,0.329435,0.666667,0.928329,0.472975,0.326067,0.670588,0.930798,0.477867,0.322697,0.67451,0.933232,0.48278,0.319325,0.678431,0.93563,0.487712,0.315952,0.682353,0.93799,0.492667,0.312575,0.686275,0.940313,0.497642,0.309197,0.690196,0.942598,0.502639,0.305816,0.694118,0.944844,0.507658,0.302433,0.698039,0.947051,0.512699,0.299049,0.701961,0.949217,0.517763,0.295662,0.705882,0.951344,0.52285,0.292275,0.709804,0.953428,0.52796,0.288883,0.713725,0.95547,0.533093,0.28549,0.717647,0.957469,0.53825,0.282096,0.721569,0.959424,0.543431,0.278701,0.72549,0.961336,0.548636,0.275305,0.729412,0.963203,0.553865,0.271909,0.733333,0.965024,0.559118,0.268513,0.737255,0.966798,0.564396,0.265118,0.741176,0.968526,0.5697,0.261721,0.745098,0.970205,0.575028,0.258325,0.74902,0.971835,0.580382,0.254931,0.752941,0.973416,0.585761,0.25154,0.756863,0.974947,0.591165,0.248151,0.760784,0.976428,0.596595,0.244767,0.764706,0.977856,0.602051,0.241387,0.768627,0.979233,0.607532,0.238013,0.772549,0.980556,0.613039,0.234646,0.776471,0.981826,0.618572,0.231287,0.780392,0.983041,0.624131,0.227937,0.784314,0.984199,0.629718,0.224595,0.788235,0.985301,0.63533,0.221265,0.792157,0.986345,0.640969,0.217948,0.796078,0.987332,0.646633,0.214648,0.8,0.98826,0.652325,0.211364,0.803922,0.989128,0.658043,0.2081,0.807843,0.989935,0.663787,0.204859,0.811765,0.990681,0.669558,0.201642,0.815686,0.991365,0.675355,0.198453,0.819608,0.991985,0.681179,0.195295,0.823529,0.992541,0.68703,0.19217,0.827451,0.993032,0.692907,0.189084,0.831373,0.993456,0.69881,0.186041,0.835294,0.993814,0.704741,0.183043,0.839216,0.994103,0.710698,0.180097,0.843137,0.994324,0.716681,0.177208,0.847059,0.994474,0.722691,0.174381,0.85098,0.994553,0.728728,0.171622,0.854902,0.994561,0.734791,0.168938,0.858824,0.994495,0.74088,0.166335,0.862745,0.994355,0.746995,0.163821,0.866667,0.994141,0.753137,0.161404,0.870588,0.993851,0.759304,0.159092,0.87451,0.993482,0.765499,0.156891,0.878431,0.993033,0.77172,0.154808,0.882353,0.992505,0.777967,0.152855,0.886275,0.991897,0.784239,0.151042,0.890196,0.991209,0.790537,0.149377,0.894118,0.990439,0.796859,0.14787,0.898039,0.989587,0.803205,0.146529,0.901961,0.988648,0.809579,0.145357,0.905882,0.987621,0.815978,0.144363,0.909804,0.986509,0.822401,0.143557,0.913725,0.985314,0.828846,0.142945,0.917647,0.984031,0.835315,0.142528,0.921569,0.982653,0.841812,0.142303,0.92549,0.98119,0.848329,0.142279,0.929412,0.979644,0.854866,0.142453,0.933333,0.977995,0.861432,0.142808,0.937255,0.976265,0.868016,0.143351,0.941176,0.974443,0.874622,0.144061,0.945098,0.97253,0.88125,0.144923,0.94902,0.970533,0.887896,0.145919,0.952941,0.968443,0.894564,0.147014,0.956863,0.966271,0.901249,0.14818,0.960784,0.964021,0.90795,0.14937,0.964706,0.961681,0.914672,0.15052,0.968627,0.959276,0.921407,0.151566,0.972549,0.956808,0.928152,0.152409,0.976471,0.954287,0.934908,0.152921,0.980392,0.951726,0.941671,0.152925,0.984314,0.949151,0.948435,0.152178,0.988235,0.946602,0.95519,0.150328,0.992157,0.944152,0.961916,0.146861,0.996078,0.941896,0.96859,0.140956,1,0.940015,0.975158,0.131326]},{"ColorSpace":"Diverging","Name":"Viridis (matplotlib)","NanColor":[1,0,0],"Source":"https://github.com/BIDS/colormap/blob/master/colormaps.py","License":"CC0","Creator":"Eric Firing","RGBPoints":[0,0.267004,0.004874,0.329415,0.003922,0.26851,0.009605,0.335427,0.007843,0.269944,0.014625,0.341379,0.011765,0.271305,0.019942,0.347269,0.015686,0.272594,0.025563,0.353093,0.019608,0.273809,0.031497,0.358853,0.023529,0.274952,0.037752,0.364543,0.027451,0.276022,0.044167,0.370164,0.031373,0.277018,0.050344,0.375715,0.035294,0.277941,0.056324,0.381191,0.039216,0.278791,0.062145,0.386592,0.043137,0.279566,0.067836,0.391917,0.047059,0.280267,0.073417,0.397163,0.05098,0.280894,0.078907,0.402329,0.054902,0.281446,0.08432,0.407414,0.058824,0.281924,0.089666,0.412415,0.062745,0.282327,0.094955,0.417331,0.066667,0.282656,0.100196,0.42216,0.070588,0.28291,0.105393,0.426902,0.07451,0.283091,0.110553,0.431554,0.078431,0.283197,0.11568,0.436115,0.082353,0.283229,0.120777,0.440584,0.086275,0.283187,0.125848,0.44496,0.090196,0.283072,0.130895,0.449241,0.094118,0.282884,0.13592,0.453427,0.098039,0.282623,0.140926,0.457517,0.101961,0.28229,0.145912,0.46151,0.105882,0.281887,0.150881,0.465405,0.109804,0.281412,0.155834,0.469201,0.113725,0.280868,0.160771,0.472899,0.117647,0.280255,0.165693,0.476498,0.121569,0.279574,0.170599,0.479997,0.12549,0.278826,0.17549,0.483397,0.129412,0.278012,0.180367,0.486697,0.133333,0.277134,0.185228,0.489898,0.137255,0.276194,0.190074,0.493001,0.141176,0.275191,0.194905,0.496005,0.145098,0.274128,0.199721,0.498911,0.14902,0.273006,0.20452,0.501721,0.152941,0.271828,0.209303,0.504434,0.156863,0.270595,0.214069,0.507052,0.160784,0.269308,0.218818,0.509577,0.164706,0.267968,0.223549,0.512008,0.168627,0.26658,0.228262,0.514349,0.172549,0.265145,0.232956,0.516599,0.176471,0.263663,0.237631,0.518762,0.180392,0.262138,0.242286,0.520837,0.184314,0.260571,0.246922,0.522828,0.188235,0.258965,0.251537,0.524736,0.192157,0.257322,0.25613,0.526563,0.196078,0.255645,0.260703,0.528312,0.2,0.253935,0.265254,0.529983,0.203922,0.252194,0.269783,0.531579,0.207843,0.250425,0.27429,0.533103,0.211765,0.248629,0.278775,0.534556,0.215686,0.246811,0.283237,0.535941,0.219608,0.244972,0.287675,0.53726,0.223529,0.243113,0.292092,0.538516,0.227451,0.241237,0.296485,0.539709,0.231373,0.239346,0.300855,0.540844,0.235294,0.237441,0.305202,0.541921,0.239216,0.235526,0.309527,0.542944,0.243137,0.233603,0.313828,0.543914,0.247059,0.231674,0.318106,0.544834,0.25098,0.229739,0.322361,0.545706,0.254902,0.227802,0.326594,0.546532,0.258824,0.225863,0.330805,0.547314,0.262745,0.223925,0.334994,0.548053,0.266667,0.221989,0.339161,0.548752,0.270588,0.220057,0.343307,0.549413,0.27451,0.21813,0.347432,0.550038,0.278431,0.21621,0.351535,0.550627,0.282353,0.214298,0.355619,0.551184,0.286275,0.212395,0.359683,0.55171,0.290196,0.210503,0.363727,0.552206,0.294118,0.208623,0.367752,0.552675,0.298039,0.206756,0.371758,0.553117,0.301961,0.204903,0.375746,0.553533,0.305882,0.203063,0.379716,0.553925,0.309804,0.201239,0.38367,0.554294,0.313725,0.19943,0.387607,0.554642,0.317647,0.197636,0.391528,0.554969,0.321569,0.19586,0.395433,0.555276,0.32549,0.1941,0.399323,0.555565,0.329412,0.192357,0.403199,0.555836,0.333333,0.190631,0.407061,0.556089,0.337255,0.188923,0.41091,0.556326,0.341176,0.187231,0.414746,0.556547,0.345098,0.185556,0.41857,0.556753,0.34902,0.183898,0.422383,0.556944,0.352941,0.182256,0.426184,0.55712,0.356863,0.180629,0.429975,0.557282,0.360784,0.179019,0.433756,0.55743,0.364706,0.177423,0.437527,0.557565,0.368627,0.175841,0.44129,0.557685,0.372549,0.174274,0.445044,0.557792,0.376471,0.172719,0.448791,0.557885,0.380392,0.171176,0.45253,0.557965,0.384314,0.169646,0.456262,0.55803,0.388235,0.168126,0.459988,0.558082,0.392157,0.166617,0.463708,0.558119,0.396078,0.165117,0.467423,0.558141,0.4,0.163625,0.471133,0.558148,0.403922,0.162142,0.474838,0.55814,0.407843,0.160665,0.47854,0.558115,0.411765,0.159194,0.482237,0.558073,0.415686,0.157729,0.485932,0.558013,0.419608,0.15627,0.489624,0.557936,0.423529,0.154815,0.493313,0.55784,0.427451,0.153364,0.497,0.557724,0.431373,0.151918,0.500685,0.557587,0.435294,0.150476,0.504369,0.55743,0.439216,0.149039,0.508051,0.55725,0.443137,0.147607,0.511733,0.557049,0.447059,0.14618,0.515413,0.556823,0.45098,0.144759,0.519093,0.556572,0.454902,0.143343,0.522773,0.556295,0.458824,0.141935,0.526453,0.555991,0.462745,0.140536,0.530132,0.555659,0.466667,0.139147,0.533812,0.555298,0.470588,0.13777,0.537492,0.554906,0.47451,0.136408,0.541173,0.554483,0.478431,0.135066,0.544853,0.554029,0.482353,0.133743,0.548535,0.553541,0.486275,0.132444,0.552216,0.553018,0.490196,0.131172,0.555899,0.552459,0.494118,0.129933,0.559582,0.551864,0.498039,0.128729,0.563265,0.551229,0.501961,0.127568,0.566949,0.550556,0.505882,0.126453,0.570633,0.549841,0.509804,0.125394,0.574318,0.549086,0.513725,0.124395,0.578002,0.548287,0.517647,0.123463,0.581687,0.547445,0.521569,0.122606,0.585371,0.546557,0.52549,0.121831,0.589055,0.545623,0.529412,0.121148,0.592739,0.544641,0.533333,0.120565,0.596422,0.543611,0.537255,0.120092,0.600104,0.54253,0.541176,0.119738,0.603785,0.5414,0.545098,0.119512,0.607464,0.540218,0.54902,0.119423,0.611141,0.538982,0.552941,0.119483,0.614817,0.537692,0.556863,0.119699,0.61849,0.536347,0.560784,0.120081,0.622161,0.534946,0.564706,0.120638,0.625828,0.533488,0.568627,0.12138,0.629492,0.531973,0.572549,0.122312,0.633153,0.530398,0.576471,0.123444,0.636809,0.528763,0.580392,0.12478,0.640461,0.527068,0.584314,0.126326,0.644107,0.525311,0.588235,0.128087,0.647749,0.523491,0.592157,0.130067,0.651384,0.521608,0.596078,0.132268,0.655014,0.519661,0.6,0.134692,0.658636,0.517649,0.603922,0.137339,0.662252,0.515571,0.607843,0.14021,0.665859,0.513427,0.611765,0.143303,0.669459,0.511215,0.615686,0.146616,0.67305,0.508936,0.619608,0.150148,0.676631,0.506589,0.623529,0.153894,0.680203,0.504172,0.627451,0.157851,0.683765,0.501686,0.631373,0.162016,0.687316,0.499129,0.635294,0.166383,0.690856,0.496502,0.639216,0.170948,0.694384,0.493803,0.643137,0.175707,0.6979,0.491033,0.647059,0.180653,0.701402,0.488189,0.65098,0.185783,0.704891,0.485273,0.654902,0.19109,0.708366,0.482284,0.658824,0.196571,0.711827,0.479221,0.662745,0.202219,0.715272,0.476084,0.666667,0.20803,0.718701,0.472873,0.670588,0.214,0.722114,0.469588,0.67451,0.220124,0.725509,0.466226,0.678431,0.226397,0.728888,0.462789,0.682353,0.232815,0.732247,0.459277,0.686275,0.239374,0.735588,0.455688,0.690196,0.24607,0.73891,0.452024,0.694118,0.252899,0.742211,0.448284,0.698039,0.259857,0.745492,0.444467,0.701961,0.266941,0.748751,0.440573,0.705882,0.274149,0.751988,0.436601,0.709804,0.281477,0.755203,0.432552,0.713725,0.288921,0.758394,0.428426,0.717647,0.296479,0.761561,0.424223,0.721569,0.304148,0.764704,0.419943,0.72549,0.311925,0.767822,0.415586,0.729412,0.319809,0.770914,0.411152,0.733333,0.327796,0.77398,0.40664,0.737255,0.335885,0.777018,0.402049,0.741176,0.344074,0.780029,0.397381,0.745098,0.35236,0.783011,0.392636,0.74902,0.360741,0.785964,0.387814,0.752941,0.369214,0.788888,0.382914,0.756863,0.377779,0.791781,0.377939,0.760784,0.386433,0.794644,0.372886,0.764706,0.395174,0.797475,0.367757,0.768627,0.404001,0.800275,0.362552,0.772549,0.412913,0.803041,0.357269,0.776471,0.421908,0.805774,0.35191,0.780392,0.430983,0.808473,0.346476,0.784314,0.440137,0.811138,0.340967,0.788235,0.449368,0.813768,0.335384,0.792157,0.458674,0.816363,0.329727,0.796078,0.468053,0.818921,0.323998,0.8,0.477504,0.821444,0.318195,0.803922,0.487026,0.823929,0.312321,0.807843,0.496615,0.826376,0.306377,0.811765,0.506271,0.828786,0.300362,0.815686,0.515992,0.831158,0.294279,0.819608,0.525776,0.833491,0.288127,0.823529,0.535621,0.835785,0.281908,0.827451,0.545524,0.838039,0.275626,0.831373,0.555484,0.840254,0.269281,0.835294,0.565498,0.84243,0.262877,0.839216,0.575563,0.844566,0.256415,0.843137,0.585678,0.846661,0.249897,0.847059,0.595839,0.848717,0.243329,0.85098,0.606045,0.850733,0.236712,0.854902,0.616293,0.852709,0.230052,0.858824,0.626579,0.854645,0.223353,0.862745,0.636902,0.856542,0.21662,0.866667,0.647257,0.8584,0.209861,0.870588,0.657642,0.860219,0.203082,0.87451,0.668054,0.861999,0.196293,0.878431,0.678489,0.863742,0.189503,0.882353,0.688944,0.865448,0.182725,0.886275,0.699415,0.867117,0.175971,0.890196,0.709898,0.868751,0.169257,0.894118,0.720391,0.87035,0.162603,0.898039,0.730889,0.871916,0.156029,0.901961,0.741388,0.873449,0.149561,0.905882,0.751884,0.874951,0.143228,0.909804,0.762373,0.876424,0.137064,0.913725,0.772852,0.877868,0.131109,0.917647,0.783315,0.879285,0.125405,0.921569,0.79376,0.880678,0.120005,0.92549,0.804182,0.882046,0.114965,0.929412,0.814576,0.883393,0.110347,0.933333,0.82494,0.88472,0.106217,0.937255,0.83527,0.886029,0.102646,0.941176,0.845561,0.887322,0.099702,0.945098,0.85581,0.888601,0.097452,0.94902,0.866013,0.889868,0.095953,0.952941,0.876168,0.891125,0.09525,0.956863,0.886271,0.892374,0.095374,0.960784,0.89632,0.893616,0.096335,0.964706,0.906311,0.894855,0.098125,0.968627,0.916242,0.896091,0.100717,0.972549,0.926106,0.89733,0.104071,0.976471,0.935904,0.89857,0.108131,0.980392,0.945636,0.899815,0.112838,0.984314,0.9553,0.901065,0.118128,0.988235,0.964894,0.902323,0.123941,0.992157,0.974417,0.90359,0.130215,0.996078,0.983868,0.904867,0.136897,1,0.993248,0.906157,0.143936]},{"ShowIndexedColorActiveValues":1,"IndexedColors":[0.07,0.5,0.7,1,1,1,0.85,1,1,0.8,0.5,1,0.76,1,0,1,0.71,0.71,0.5,0.5,0.5,0.05,0.05,1,1,0.05,0.05,0.7,1,1,0.7,0.89,0.96,0.67,0.36,0.95,0.54,1,0,0.75,0.65,0.65,0.5,0.6,0.6,1,0.5,0,1,1,0.19,0.12,0.94,0.12,0.5,0.82,0.89,0.56,0.25,0.83,0.24,1,0,0.9,0.9,0.9,0.75,0.76,0.78,0.65,0.65,0.67,0.54,0.6,0.78,0.61,0.48,0.78,0.5,0.48,0.78,0.44,0.48,0.78,0.36,0.48,0.76,1,0.48,0.38,0.49,0.5,0.69,0.76,0.56,0.56,0.4,0.56,0.56,0.74,0.5,0.89,1,0.63,0,0.65,0.16,0.16,0.36,0.72,0.82,0.44,0.18,0.69,0,1,0,0.58,1,1,0.58,0.88,0.88,0.45,0.76,0.79,0.33,0.71,0.71,0.23,0.62,0.62,0.14,0.56,0.56,0.04,0.49,0.55,0,0.41,0.52,0.88,0.88,1,1,0.85,0.56,0.65,0.46,0.45,0.4,0.5,0.5,0.62,0.39,0.71,0.83,0.48,0,0.58,0,0.58,0.26,0.62,0.69,0.34,0.09,0.56,0,0.79,0,0.44,0.83,1,1,1,0.78,0.85,1,0.78,0.78,1,0.78,0.64,1,0.78,0.56,1,0.78,0.38,1,0.78,0.27,1,0.78,0.19,1,0.78,0.12,1,0.78,0,1,0.61,0,0.9,0.46,0,0.83,0.32,0,0.75,0.22,0,0.67,0.14,0.3,0.76,1,0.3,0.65,1,0.13,0.58,0.84,0.15,0.49,0.67,0.15,0.4,0.59,0.09,0.33,0.53,0.96,0.93,0.82,0.8,0.82,0.12,0.71,0.71,0.76,0.65,0.33,0.3,0.34,0.35,0.38,0.62,0.31,0.71,0.67,0.36,0,0.46,0.31,0.27,0.26,0.51,0.59,0.26,0,0.4,0,0.49,0,0.44,0.67,0.98,0,0.73,1,0,0.63,1,0,0.56,1,0,0.5,1,0,0.42,1,0.33,0.36,0.95,0.47,0.36,0.89,0.54,0.31,0.89,0.63,0.21,0.83,0.7,0.12,0.83,0.7,0.12,0.73,0.7,0.05,0.65,0.74,0.05,0.53,0.78,0,0.4,0.8,0,0.35,0.82,0,0.31,0.85,0,0.27,0.88,0,0.22,0.9,0,0.18,0.91,0,0.15,0.92,0,0.14,0.93,0,0.13,0.94,0,0.12,0.95,0,0.11,0.96,0,0.1,0.97,0,0.09,0.98,0,0.08,0.99,0,0.07,1,0,0.06],"Annotations":[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],"Name":"BlueObeliskElements"}]'),Sy=Object.create(null);Sv.filter(function(e){return e.RGBPoints}).filter(function(e){return"CIELAB"!==e.ColorSpace}).forEach(function(e){Sy[e.Name]=e});var Sb=Object.keys(Sy);Sb.sort();var Sx={addPreset:function(e){e.RGBPoints&&"CIELAB"!==e.ColorSpace&&(Sy[e.Name]||(Sb.push(e.Name),Sb.sort()),Sy[e.Name]=e)},removePresetByName:function(e){var t=Sb.indexOf(e);t>-1&&Sb.splice(t,1),delete Sy[e]},getPresetByName:function(e){return Sy[e]},rgbPresetNames:Sb},Sw={DISPLAY:0,NORMALIZED_DISPLAY:1,VIEWPORT:2,NORMALIZED_VIEWPORT:3,PROJECTION:4,VIEW:5,WORLD:6},SA={Coordinate:Sw};function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var SS=SA.Coordinate,S_=eE.vtkErrorMacro,ST={coordinateSystem:SS.WORLD,value:[0,0,0],renderer:null,referenceCoordinate:null,computing:0,computedWorldValue:[0,0,0],computedDoubleDisplayValue:[0,0]};function SO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ST,n),eE.obj(e,t),eE.set(e,t,["property"]),eE.get(e,t,["value"]),eE.setGet(e,t,["coordinateSystem","referenceCoordinate","renderer"]),eE.getArray(e,t,["value"],3),t.classHierarchy.push("vtkCoordinate"),e.setValue=function(){if(t.deleted)return S_("instance deleted - cannot call any method"),!1;for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i;if(1===a.length&&Array.isArray(a[0])&&(a=a[0]),2===a.length)return e.setValue(a[0],a[1],0),!0;if(3!==a.length)throw RangeError("Invalid number of values for array setter");var s=!1;return t.value.forEach(function(e,t){e!==a[t]&&(s||(s=!0))}),s&&(t.value=[].concat(a),e.modified()),!0},e.setCoordinateSystemToDisplay=function(){e.setCoordinateSystem(SS.DISPLAY)},e.setCoordinateSystemToNormalizedDisplay=function(){e.setCoordinateSystem(SS.NORMALIZED_DISPLAY)},e.setCoordinateSystemToViewport=function(){e.setCoordinateSystem(SS.VIEWPORT)},e.setCoordinateSystemToNormalizedViewport=function(){e.setCoordinateSystem(SS.NORMALIZED_VIEWPORT)},e.setCoordinateSystemToProjection=function(){e.setCoordinateSystem(SS.PROJECTION)},e.setCoordinateSystemToView=function(){e.setCoordinateSystem(SS.VIEW)},e.setCoordinateSystemToWorld=function(){e.setCoordinateSystem(SS.WORLD)},e.getCoordinateSystemAsString=function(){return eE.enumToString(SS,t.coordinateSystem)},e.getComputedWorldValue=function(n){var i=t.computedWorldValue;if(t.computing)return i;t.computing=1,i[0]=t.value[0],i[1]=t.value[1],i[2]=t.value[2];var o=n;if(t.renderer&&(o=t.renderer),!o){if(t.coordinateSystem===SS.WORLD){if(t.referenceCoordinate){var a=t.referenceCoordinate.getComputedWorldValue(o);i[0]+=a[0],i[1]+=a[1],i[2]+=a[2]}t.computing=0}else S_("Attempt to compute world coordinates from another coordinate system without a renderer");return i}var s=null;if(!o||!o.getRenderWindow().getViews())return t.computedWorldValue;var l=(s=o.getRenderWindow().getViews()[0]).getViewportSize(o),u=l[0]/l[1];if(t.referenceCoordinate&&t.coordinateSystem!==SS.WORLD){var c=t.referenceCoordinate.getComputedDoubleDisplayValue(o),d=[c[0],c[1],0];switch(t.coordinateSystem){case SS.NORMALIZED_DISPLAY:d=s.displayToNormalizedDisplay(d[0],d[1],d[2]);break;case SS.VIEWPORT:d=s.displayToNormalizedDisplay(d[0],d[1],d[2]),d=s.normalizedDisplayToViewport(d[0],d[1],d[2],o);break;case SS.NORMALIZED_VIEWPORT:d=s.displayToNormalizedDisplay(d[0],d[1],d[2]),d=s.normalizedDisplayToViewport(d[0],d[1],d[2],o),d=s.viewportToNormalizedViewport(d[0],d[1],d[2],o);break;case SS.PROJECTION:d=s.displayToNormalizedDisplay(d[0],d[1],d[2]),d=s.normalizedDisplayToViewport(d[0],d[1],d[2],o),d=s.viewportToNormalizedViewport(d[0],d[1],d[2],o),d=o.normalizedViewportToProjection(d[0],d[1],d[2]);break;case SS.VIEW:d=s.displayToNormalizedDisplay(d[0],d[1],d[2]),d=s.normalizedDisplayToViewport(d[0],d[1],d[2],o),d=s.viewportToNormalizedViewport(d[0],d[1],d[2],o),d=o.normalizedViewportToProjection(d[0],d[1],d[2]),d=o.projectionToView(d[0],d[1],d[2],u)}i[0]+=d[0],i[1]+=d[1],i[2]+=d[2]}switch(t.coordinateSystem){case SS.DISPLAY:i=s.displayToNormalizedDisplay(i[0],i[1],i[2]),i=s.normalizedDisplayToViewport(i[0],i[1],i[2],o),i=s.viewportToNormalizedViewport(i[0],i[1],i[2],o),i=o.normalizedViewportToProjection(i[0],i[1],i[2]),i=o.projectionToView(i[0],i[1],i[2],u),i=o.viewToWorld(i[0],i[1],i[2]);break;case SS.NORMALIZED_DISPLAY:i=s.normalizedDisplayToViewport(i[0],i[1],i[2],o),i=s.viewportToNormalizedViewport(i[0],i[1],i[2],o),i=o.normalizedViewportToProjection(i[0],i[1],i[2]),i=o.projectionToView(i[0],i[1],i[2],u),i=o.viewToWorld(i[0],i[1],i[2]);break;case SS.VIEWPORT:i=s.viewportToNormalizedViewport(i[0],i[1],i[2],o),i=o.normalizedViewportToProjection(i[0],i[1],i[2]),i=o.projectionToView(i[0],i[1],i[2],u),i=o.viewToWorld(i[0],i[1],i[2]);break;case SS.NORMALIZED_VIEWPORT:i=o.normalizedViewportToProjection(i[0],i[1],i[2]),i=o.projectionToView(i[0],i[1],i[2],u),i=o.viewToWorld(i[0],i[1],i[2]);break;case SS.PROJECTION:i=o.projectionToView(i[0],i[1],i[2],u),i=o.viewToWorld(i[0],i[1],i[2]);break;case SS.VIEW:i=o.viewToWorld(i[0],i[1],i[2])}if(t.referenceCoordinate&&t.coordinateSystem===SS.WORLD){var f=e.getComputedWorldValue(o);i[0]+=f[0],i[1]+=f[1],i[2]+=f[2]}return t.computing=0,t.computedWorldValue=i.slice(0),i},e.getComputedViewportValue=function(t){var n=e.getComputedDoubleViewportValue(t);return[eY(n[0]),eY(n[1])]},e.getComputedDisplayValue=function(t){var n=e.getComputedDoubleDisplayValue(t);return[eZ(n[0]),eZ(n[1])]},e.getComputedLocalDisplayValue=function(n){var i=n;t.renderer&&(i=t.renderer);var o=e.getComputedDisplayValue(i);return i?i&&i.getRenderWindow().getViews()?[eY((o=i.getRenderWindow().getViews()[0].displayToLocalDisplay(o[0],o[1],o[2]))[0]),eY(o[1])]:o:(S_("Attempt to convert to local display coordinates without a renderer"),o)},e.getComputedDoubleViewportValue=function(n){var i=n;t.renderer&&(i=t.renderer);var o=e.getComputedDoubleDisplayValue(i);if(!i)return o;var a=null;return i&&i.getRenderWindow().getViews()?(o=(a=i.getRenderWindow().getViews()[0]).displayToNormalizedDisplay(o[0],o[1],o[2]),[(o=a.normalizedDisplayToViewport(o[0],o[1],o[2],i))[0],o[1]]):o},e.getComputedDoubleDisplayValue=function(e){if(t.computing)return t.computedDoubleDisplayValue;t.computing=1;var n=t.value.slice(0),i=e;if(t.renderer&&(i=t.renderer),!i){if(t.coordinateSystem===SS.DISPLAY){if(t.computedDoubleDisplayValue[0]=n[0],t.computedDoubleDisplayValue[1]=n[1],t.referenceCoordinate){var o=t.referenceCoordinate.getComputedDoubleDisplayValue();t.computedDoubleDisplayValue[0]+=o[0],t.computedDoubleDisplayValue[1]+=o[1]}}else t.computedDoubleDisplayValue[0]=Number.MAX_VALUE,t.computedDoubleDisplayValue[1]=Number.MAX_VALUE,S_("Request for coordinate transformation without required viewport");return t.computedDoubleDisplayValue}var a=null;if(!i||!i.getRenderWindow().getViews())return n;var s=(a=i.getRenderWindow().getViews()[0]).getViewportSize(i),l=s[0]/s[1];switch(t.coordinateSystem){case SS.WORLD:if(t.referenceCoordinate){var u=t.referenceCoordinate.getComputedWorldValue(i);n[0]+=u[0],n[1]+=u[1],n[2]+=u[2]}n=i.worldToView(n[0],n[1],n[2]),n=i.viewToProjection(n[0],n[1],n[2],l),n=i.projectionToNormalizedViewport(n[0],n[1],n[2]),n=a.normalizedViewportToViewport(n[0],n[1],n[2],i),n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],i),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.VIEW:n=i.viewToProjection(n[0],n[1],n[2],l),n=i.projectionToNormalizedViewport(n[0],n[1],n[2]),n=a.normalizedViewportToViewport(n[0],n[1],n[2],i),n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],i),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.PROJECTION:n=i.projectionToNormalizedViewport(n[0],n[1],n[2]),n=a.normalizedViewportToViewport(n[0],n[1],n[2],i),n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],i),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.NORMALIZED_VIEWPORT:if(n=a.normalizedViewportToViewport(n[0],n[1],n[2],i),t.referenceCoordinate){var c=t.referenceCoordinate.getComputedDoubleViewportValue(i);n[0]+=c[0],n[1]+=c[1]}n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],i),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.VIEWPORT:if(t.referenceCoordinate){var d=t.referenceCoordinate.getComputedDoubleViewportValue(i);n[0]+=d[0],n[1]+=d[1]}n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],i),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.NORMALIZED_DISPLAY:n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case SS.USERDEFINED:n=t.value.slice(0)}if(t.referenceCoordinate&&(t.coordinateSystem===SS.DISPLAY||t.coordinateSystem===SS.NORMALIZED_DISPLAY)){var f=t.referenceCoordinate.getComputedDoubleDisplayValue(i);n[0]+=f[0],n[1]+=f[1]}return t.computedDoubleDisplayValue[0]=n[0],t.computedDoubleDisplayValue[1]=n[1],t.computing=0,t.computedDoubleDisplayValue},e.getComputedValue=function(n){var i=n;switch(t.renderer&&(i=t.renderer),t.coordinateSystem){case SS.WORLD:return e.getComputedWorldValue(i);case SS.VIEW:case SS.NORMALIZED_VIEWPORT:case SS.VIEWPORT:var o=e.getComputedViewportValue(i);t.computedWorldValue[0]=o[0],t.computedWorldValue[1]=o[1];break;case SS.NORMALIZED_DISPLAY:case SS.DISPLAY:var a=t.getComputedDisplayValue(i);t.computedWorldValue[0]=a[0],t.computedWorldValue[1]=a[1]}return t.computedWorldValue}}var SP=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(SO,"vtkCoordinate"),extend:SO},SA),SM={BACKGROUND:0,FOREGROUND:1},SE={DisplayLocation:SM};function SD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var SI=SE.DisplayLocation,Sk={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:mk.SURFACE,displayLocation:SI.FOREGROUND};function SN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sk,n),eE.obj(e,t),eE.setGet(e,t,["opacity","lineWidth","pointSize","displayLocation","representation"]),eE.setGetArray(e,t,["color"],3),t.classHierarchy.push("vtkProperty2D"),e.setDisplayLocationToBackground=function(){return e.setDisplayLocation(SI.BACKGROUND)},e.setDisplayLocationToForeground=function(){return e.setDisplayLocation(SI.FOREGROUND)},e.setRepresentationToWireframe=function(){return e.setRepresentation(mk.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(mk.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(mk.POINTS)},e.getRepresentationAsString=function(){return eE.enumToString(mk,t.representation)}}var SR=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SD(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(SN,"vtkProperty2D"),extend:SN},SE),SB={mapper:null,property:null,layerNumber:0,positionCoordinate:null,positionCoordinate2:null};function SL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,SB,n),mP.extend(e,t,n),t.positionCoordinate=SP.newInstance(),t.positionCoordinate.setCoordinateSystemToViewport(),t.positionCoordinate2=SP.newInstance(),t.positionCoordinate2.setCoordinateSystemToNormalizedViewport(),t.positionCoordinate2.setValue(.5,.5),t.positionCoordinate2.setReferenceCoordinate(t.positionCoordinate),eE.set(e,t,["property"]),eE.setGet(e,t,["mapper","layerNumber"]),t.classHierarchy.push("vtkActor2D"),e.getActors2D=function(){return e},e.getIsOpaque=function(){return t.property||e.getProperty(),t.property.getOpacity()>=1&&(!t.texture||!t.texture.isTranslucent())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=SR.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.setDisplayPosition=function(e,n){t.positionCoordinate.setCoordinateSystem(Sw.DISPLAY),t.positionCoordinate.setValue(e,n,0)},e.setWidth=function(e){var n=t.position2Coordinate.getValue();t.position2Coordinate.setCoordinateSystemToNormalizedViewport(),t.position2Coordinate.setValue(e,n[1])},e.setHeight=function(e){var n=t.position2Coordinate.getValue();t.position2Coordinate.setCoordinateSystemToNormalizedViewport(),t.position2Coordinate.setValue(n[0],e)},e.getWidth=function(){return t.position2Coordinate.getValue()[0]},e.getHeight=function(){return t.position2Coordinate.getValue()[1]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e=t.positionCoordinate.getMTime()>e?t.positionCoordinate.getMTime():e,t.positionCoordinate2.getMTime()>e?t.positionCoordinate2.getMTime():e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getBounds=function(){return"function"==typeof e.getMapper().getBounds?(t.useBounds=!0,e.getMapper().getBounds()):(t.useBounds=!1,[])},e.getActualPositionCoordinate=function(){return t.positionCoordinate},e.getActualPositionCoordinate2=function(){return t.positionCoordinate2}}var SF={newInstance:eE.newInstance(SL,"vtkActor2D"),extend:SL},SV={default:{defaultStyle:{fontStyle:"bold",fontFamily:"Arial",fontColor:"black",fontSizeScale:function(e){return e/2},faceColor:"white",edgeThickness:.1,edgeColor:"black",resolution:400},xMinusFaceProperty:{text:"X-",faceColor:"yellow"},xPlusFaceProperty:{text:"X+",faceColor:"yellow"},yMinusFaceProperty:{text:"Y-",faceColor:"red"},yPlusFaceProperty:{text:"Y+",faceColor:"red"},zMinusFaceProperty:{text:"Z-",faceColor:"#008000"},zPlusFaceProperty:{text:"Z+",faceColor:"#008000"}},lps:{xMinusFaceProperty:{text:"R",faceRotation:-90},xPlusFaceProperty:{text:"L",faceRotation:90},yMinusFaceProperty:{text:"A",faceRotation:0},yPlusFaceProperty:{text:"P",faceRotation:180},zMinusFaceProperty:{text:"I",faceRotation:180},zPlusFaceProperty:{text:"S",faceRotation:0}}};function Sj(e,t){t.set(e)}var SG={applyDefinitions:Sj,applyPreset:function(e,t){return Sj(SV[e],t)},registerStylePreset:function(e,t){SV[e]=t}};function SU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Sz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SU(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var SW={xPlus:0,xMinus:1,yPlus:2,yMinus:3,zPlus:4,zMinus:5},SH={defaultStyle:{text:"",faceColor:"white",faceRotation:0,fontFamily:"Arial",fontColor:"black",fontStyle:"normal",fontSizeScale:function(e){return e/1.8},edgeThickness:.1,edgeColor:"black",resolution:200}};function Sq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,SH,n),mH.extend(e,t,n),eE.get(e,t,["defaultStyle","xPlusFaceProperty","xMinusFaceProperty","yPlusFaceProperty","yMinusFaceProperty","zPlusFaceProperty","zMinusFaceProperty"]),function(e,t){t.classHierarchy.push("vtkAnnotatedCubeActor"),t.xPlusFaceProperty=Sz({},t.xPlusFaceProperty),t.xMinusFaceProperty=Sz({},t.xMinusFaceProperty),t.yPlusFaceProperty=Sz({},t.yPlusFaceProperty),t.yMinusFaceProperty=Sz({},t.yMinusFaceProperty),t.zPlusFaceProperty=Sz({},t.zPlusFaceProperty),t.zMinusFaceProperty=Sz({},t.zMinusFaceProperty);var n=null,i=document.createElement("canvas"),o=gd.newInstance(),a=xQ.newInstance();function s(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o&&Object.assign(t["".concat(n,"FaceProperty")],o);var s=Sz(Sz({},t.defaultStyle),t["".concat(n,"FaceProperty")]);i.width=s.resolution,i.height=s.resolution;var l=i.getContext("2d");l.fillStyle=s.faceColor,l.fillRect(0,0,i.width,i.height),s.edgeThickness>0&&(l.strokeStyle=s.edgeColor,l.lineWidth=s.edgeThickness*i.width,l.strokeRect(0,0,i.width,i.height)),l.save(),l.translate(0,i.height),l.scale(1,-1),l.translate(i.width/2,i.height/2),l.rotate(-Math.PI*(s.faceRotation/180));var u=s.fontSizeScale(s.resolution);l.fillStyle=s.fontColor,l.textAlign="center",l.textBaseline="middle",l.font="".concat(s.fontStyle," ").concat(u,'px "').concat(s.fontFamily,'"'),l.fillText(s.text,0,0),l.restore();var c=aE.canvasToImageData(i);a.setInputData(c,SW[n]),e.modified()}function l(){n=fq.newInstance({generate3DTextureCoordinates:!0}),o.setInputConnection(n.getOutputPort()),s("xPlus"),s("xMinus"),s("yPlus"),s("yMinus"),s("zPlus"),s("zMinus")}a.setInterpolate(!0),e.setDefaultStyle=function(e){t.defaultStyle=Sz(Sz({},t.defaultStyle),e),l()},e.setXPlusFaceProperty=function(e){return s("xPlus",e)},e.setXMinusFaceProperty=function(e){return s("xMinus",e)},e.setYPlusFaceProperty=function(e){return s("yPlus",e)},e.setYMinusFaceProperty=function(e){return s("yMinus",e)},e.setZPlusFaceProperty=function(e){return s("zPlus",e)},e.setZMinusFaceProperty=function(e){return s("zMinus",e)},l(),o.setInputConnection(n.getOutputPort()),e.setMapper(o),e.addTexture(a)}(e,t)}var SK={newInstance:eE.newInstance(Sq,"vtkAnnotatedCubeActor"),extend:Sq,Presets:SG};function SX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function SY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function SZ(e){var t,n=e.getPoints().getBounds(),i=[-(.5*(n[0]+n[1])),-(.5*(n[2]+n[3])),-(.5*(n[4]+n[5]))];(t=a$.buildFromDegree()).translate.apply(t,i).apply(e.getPoints().getData())}function SJ(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.getPoints().getBounds(),a=[0,0,0];a[t]=i?-o[2*t+1]:-o[2*t],(n=a$.buildFromDegree()).translate.apply(n,a).apply(e.getPoints().getData())}function SQ(e,t,n,i){for(var o=e.getPoints().getData().length,a=new Uint8ClampedArray(o),s=0;s<o;)a[s++]=t,a[s++]=n,a[s++]=i;e.getPointData().setScalars(nH.newInstance({name:"color",numberOfComponents:3,values:a}))}function S$(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mH.extend(e,t,{config:SY({recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1},null==o?void 0:o.config),xConfig:SY({color:[255,0,0],invert:!1},null==o?void 0:o.xConfig),yConfig:SY({color:[255,255,0],invert:!1},null==o?void 0:o.yConfig),zConfig:SY({color:[0,128,0],invert:!1},null==o?void 0:o.zConfig)}),eE.setGet(e,t,["config","xConfig","yConfig","zConfig"]),t.classHierarchy.push("vtkAxesActor"),n=gd.newInstance(),e.setMapper(n),e.update=function(){var e=SY(SY({},t.config),t.xConfig),i=fR.newInstance(SY({direction:[1,0,0]},e)).getOutputData();t.config.recenter?SZ(i):SJ(i,0,e.invert),SQ.apply(void 0,[i].concat(m(e.color))),e=SY(SY({},t.config),t.yConfig);var o=fR.newInstance(SY({direction:[0,1,0]},e)).getOutputData();t.config.recenter?SZ(o):SJ(o,1,e.invert),SQ.apply(void 0,[o].concat(m(e.color))),e=SY(SY({},t.config),t.zConfig);var a=fR.newInstance(SY({direction:[0,0,1]},e)).getOutputData();t.config.recenter?SZ(a):SJ(a,2,e.invert),SQ.apply(void 0,[a].concat(m(e.color)));var s=u4.newInstance();s.setInputData(i),s.addInputData(o),s.addInputData(a),n.setInputConnection(s.getOutputPort())},e.update(),i=eE.debounce(e.update,0),e.setXAxisColor=function(t){return e.setXConfig(SY(SY({},e.getXConfig()),{},{color:t}))},e.setYAxisColor=function(t){return e.setYConfig(SY(SY({},e.getYConfig()),{},{color:t}))},e.setZAxisColor=function(t){return e.setZConfig(SY(SY({},e.getZConfig()),{},{color:t}))},e.getXAxisColor=function(){return t.getXConfig().color},e.getYAxisColor=function(){return t.getYConfig().color},e.getZAxisColor=function(){return t.getZConfig().color},t._onConfigChanged=i,t._onXConfigChanged=i,t._onYConfigChanged=i,t._onZConfigChanged=i}var S0={newInstance:eE.newInstance(S$,"vtkAxesActor"),extend:S$};function S1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function S2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S1(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S3(){var e;return y(e={},3,sY.newInstance()),y(e,4,s1.newInstance()),y(e,5,ls.newInstance()),y(e,9,lc.newInstance()),e}function S4(e,t,n,i){for(var o={planeId:-1,t1:0,t2:1,intersect:0},a=e.getNumberOfClippingPlanes(),s=[],l=0;l<a;l++){e.getClippingPlaneInDataCoords(t,l,s);var u=s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3],c=s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3];if(u<0&&c<0)return 0;if(u<0||c<0){var d=0;if(0!==u&&(d=u/(u-c)),u<0?d>=o.t1&&(o.t1=d,o.planeId=l):d<=o.t2&&(o.t2=d),o.t1>o.t2)return o.intersect=0,o}}return o.intersect=1,o}var S5={cellId:-1,pCoords:[],cellIJK:[],pickNormal:[],mapperNormal:[],opacityThreshold:.2};function S6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,S5,n),gx.extend(e,t,n),eE.getArray(e,t,["pickNormal","mapperNormal","pCoords","cellIJK"]),eE.setGet(e,t,["opacityThreshold"]),eE.get(e,t,["cellId"]),function(e,t){t.classHierarchy.push("vtkCellPicker");var n=S2({},e);function i(){t.dataSet=null,t.mapper=null,t.cellId=-1,t.pCoords[0]=0,t.pCoords[1]=0,t.pCoords[2]=0,t.cellIJK[0]=0,t.cellIJK[1]=0,t.cellIJK[2]=0,t.mapperNormal[0]=0,t.mapperNormal[1]=0,t.mapperNormal[2]=1,t.pickNormal[0]=0,t.pickNormal[1]=0,t.pickNormal[2]=1}e.initialize=function(){i(),n.initialize()},e.computeSurfaceNormal=function(e,t,n,i){var o=e.getPointData().getNormals();if(!o)return 0;i[0]=0,i[1]=0,i[2]=0;for(var a=[],s=0;s<3;s++)o.getTuple(t.getPointsIds()[s],a),i[0]+=a[0]*n[s],i[1]+=a[1]*n[s],i[2]+=a[2]*n[s];return th(i),1},e.pick=function(i,o){e.initialize();var a=n.pick(i,o);if(a){var s=o.getActiveCamera(),l=[];if(s.getPosition(l),s.getParallelProjection()){var u=[];s.getFocalPoint(u),t.pickNormal[0]=l[0]-u[0],t.pickNormal[1]=l[1]-u[1],t.pickNormal[2]=l[2]-u[2]}else t.pickNormal[0]=l[0]-t.pickPosition[0],t.pickNormal[1]=l[1]-t.pickPosition[1],t.pickNormal[2]=l[2]-t.pickPosition[2];th(t.pickNormal)}return a},t.intersectWithLine=function(e,n,i,o,a){var s=Number.MAX_VALUE,l=0,u=1,c=S4(a,t.transformMatrix,e,n);if(a&&!c.intersect)return Number.MAX_VALUE;if(a.isA("vtkImageMapper")||a.isA("vtkImageArrayMapper")){var d=a.intersectWithLineForCellPicking(e,n);d&&(s=d.t,t.cellIJK=d.ijk,t.pCoords=d.pCoords)}else if(a.isA("vtkVolumeMapper")){var f=sd.intersectWithLine(a.getBounds(),e,n);l=(null==f?void 0:f.t1)>c.t1?f.t1:c.t1,u=(null==f?void 0:f.t2)<c.t2?f.t2:c.t2,s=t.intersectVolumeWithLine(e,n,l,u,i,o)}else a.isA("vtkMapper")&&(s=t.intersectActorWithLine(e,n,l,u,i,a));if(s<t.globalTMin){if(t.globalTMin=s,1e-14>Math.abs(s-l)&&c.clippingPlaneId>=0){t.mapperPosition[0]=e[0]*(1-l)+n[0]*l,t.mapperPosition[1]=e[1]*(1-l)+n[1]*l,t.mapperPosition[2]=e[2]*(1-l)+n[2]*l;var p=[];a.getClippingPlaneInDataCoords(t.transformMatrix,c.clippingPlaneId,p),th(p),t.mapperNormal[0]=-p[0],t.mapperNormal[1]=-p[1],t.mapperNormal[2]=-p[2]}rO(t.pickPosition,t.mapperPosition,t.transformMatrix);var h=t.transformMatrix;t.mapperNormal[0]=h[0]*t.pickNormal[0]+h[4]*t.pickNormal[1]+h[8]*t.pickNormal[2],t.mapperNormal[1]=h[1]*t.pickNormal[0]+h[5]*t.pickNormal[1]+h[9]*t.pickNormal[2],t.mapperNormal[2]=h[2]*t.pickNormal[0]+h[6]*t.pickNormal[1]+h[10]*t.pickNormal[2]}return s},t.intersectVolumeWithLine=function(e,n,i,o,a,s){var l=Number.MAX_VALUE,u=s.getMapper(),c=u.getInputData(),d=c.getDimensions(),f=c.getPointData().getScalars().getData(),p=c.getExtent(),h=c.getWorldToIndex(),m=u.getOpacityTextureWidth();m<=0&&(m=1024);for(var g,v,y=new Float32Array(m),b=new Float32Array(m),x=s.getMapper().getSampleDistance(),w=0;w<1;++w){v=(g=s.getProperty().getScalarOpacity(w)).getRange(),g.getTable(v[0],v[1],m,y,1);for(var A=x/s.getProperty().getScalarOpacityUnitDistance(w),C=0;C<m;++C)b[C]=1-Math.pow(1-y[C],A)}var S=m/(v[1]-v[0]+1),_=[0,0,0,1],T=[0,0,0,1];if(_[0]=e[0],_[1]=e[1],_[2]=e[2],T[0]=n[0],T[1]=n[1],T[2]=n[2],0!==i||1!==o)for(var O=0;O<3;O++)_[O]=e[O]*(1-i)+n[O]*i,T[O]=e[O]*(1-o)+n[O]*o;var P=[0,0,0,0],M=[0,0,0,0];sk(P,_,h),sk(M,T,h);for(var E,D=[0,0,0],I=[0,0,0],k=d[1]*d[0],N=d[0],R=1/Math.sqrt(tx(P,M)),B=0;B<1;B+=R){E=!0;for(var L=0;L<3;L++)D[L]=P[L]*(1-B)+M[L]*B;for(var F=0;F<3;F++)D[F]<p[2*F]?(D[F]=p[2*F],E=!1):D[F]>p[2*F+1]&&(D[F]=p[2*F+1],E=!1),I[F]=Math.round(D[F]);if(E){var V=f[I[2]*k+I[1]*N+I[0]];if(V<v[0]?V=v[0]:V>v[1]&&(V=v[1]),y[V=Math.floor((V-v[0])*S)]>t.opacityThreshold){l=i*(1-B)+o*B;break}}}return l},t.intersectActorWithLine=function(n,o,a,s,l,u){var c=Number.MAX_VALUE,d=[0,0,0],f=Number.MAX_VALUE,p=[0,0,0],h=null,m=null,g=null,v=null,y=[],b=u.getInputData(),x=[0,0,0],w=[0,0,0];if(x[0]=n[0],x[1]=n[1],x[2]=n[2],w[0]=o[0],w[1]=o[1],w[2]=o[2],0!==a||1!==s)for(var A=0;A<3;A++)x[A]=n[A]*(1-a)+o[A]*a,w[A]=n[A]*(1-s)+o[A]*s;if(b.getCells){b.getCells()||b.buildLinks();for(var C=S3(),S=S3(),_=b.getNumberOfCells(),T=0;T<_;T++){var O=[0,0,0];if(0!==(g=b.getCellType(T))){var P=C[g];if(null!=P){m=S[g],b.getCell(T,P);var M=void 0;if(1===(M=sM.hasSubCells(g)?P.intersectWithLine(a,s,n,o,l,y,O):P.intersectWithLine(n,o,l,y,O)).intersect&&M.t<=c+t.tolerance&&M.t>=a&&M.t<=s){var E=P.getParametricDistance(O);if(E<f||E===f&&M.t<c){c=M.t,f=E,v=M.subId,h=T,P.deepCopy(m);for(var D=0;D<3;D++)d[D]=y[D],p[D]=O[D]}}}}}}if(h>=0&&c<t.globalTMin){i();for(var I=m.getNumberOfPoints(),k=Array(I),N=0;N<I;N++)k[N]=0;var R=[];sM.hasSubCells(g)?m.evaluateLocation(v,p,R,k):m.evaluateLocation(p,R,k),t.dataSet=b,t.cellId=h,t.pCoords[0]=p[0],t.pCoords[1]=p[1],t.pCoords[2]=p[2];for(var B=0,L=-1,F=0;F<I;F++)k[F]>B&&(L=F,B=k[F]);-1!==L&&(t.pointId=m.getPointsIds()[L]),t.mapperPosition[0]=d[0],t.mapperPosition[1]=d[1],t.mapperPosition[2]=d[2],e.computeSurfaceNormal(b,m,k,t.mapperNormal)||(t.mapperNormal[0]=n[0]-o[0],t.mapperNormal[1]=n[1]-o[1],t.mapperNormal[2]=n[2]-o[2],th(t.mapperNormal))}return c}}(e,t)}var S8=S2({newInstance:eE.newInstance(S6,"vtkCellPicker"),extend:S6},{clipLineWithPlane:S4}),S9=Math.sqrt(50),S7=Math.sqrt(10),_e=Math.sqrt(2);function _t(e,t,n){var i=(t-e)/Math.max(0,n),o=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,o);return o>=0?(a>=S9?10:a>=S7?5:a>=_e?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=S9?10:a>=S7?5:a>=_e?2:1)}function _n(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _r(e){let t=e,n=e,i=e;function o(e,t,a=0,s=e.length){if(a<s){if(0!==n(t,t))return s;do{let n=a+s>>>1;0>i(e[n],t)?a=n+1:s=n}while(a<s)}return a}return 1===e.length&&(t=(t,n)=>e(t)-n,n=_n,i=(t,n)=>_n(e(t),n)),{left:o,center:function(e,n,i=0,a=e.length){let s=o(e,n,i,a-1);return s>i&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,o=0,a=e.length){if(o<a){if(0!==n(t,t))return a;do{let n=o+a>>>1;0>=i(e[n],t)?o=n+1:a=n}while(o<a)}return o}}}let _i=_r(_n),_o=_i.right;function _a(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _s(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _l(){}_i.left,_r(function(e){return null===e?NaN:+e}).center;var _u="\\s*([+-]?\\d+)\\s*",_c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_f=/^#([0-9a-f]{3,8})$/,_p=RegExp(`^rgb\\(${_u},${_u},${_u}\\)$`),_h=RegExp(`^rgb\\(${_d},${_d},${_d}\\)$`),_m=RegExp(`^rgba\\(${_u},${_u},${_u},${_c}\\)$`),_g=RegExp(`^rgba\\(${_d},${_d},${_d},${_c}\\)$`),_v=RegExp(`^hsl\\(${_c},${_d},${_d}\\)$`),_y=RegExp(`^hsla\\(${_c},${_d},${_d},${_c}\\)$`),_b={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function _x(){return this.rgb().formatHex()}function _w(){return this.rgb().formatRgb()}function _A(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_f.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?_C(t):3===n?new _T(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_S(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_S(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_p.exec(e))?new _T(t[1],t[2],t[3],1):(t=_h.exec(e))?new _T(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=_m.exec(e))?_S(t[1],t[2],t[3],t[4]):(t=_g.exec(e))?_S(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_v.exec(e))?_I(t[1],t[2]/100,t[3]/100,1):(t=_y.exec(e))?_I(t[1],t[2]/100,t[3]/100,t[4]):_b.hasOwnProperty(e)?_C(_b[e]):"transparent"===e?new _T(NaN,NaN,NaN,0):null}function _C(e){return new _T(e>>16&255,e>>8&255,255&e,1)}function _S(e,t,n,i){return i<=0&&(e=t=n=NaN),new _T(e,t,n,i)}function __(e,t,n,i){var o;return 1==arguments.length?((o=e)instanceof _l||(o=_A(o)),o?new _T((o=o.rgb()).r,o.g,o.b,o.opacity):new _T):new _T(e,t,n,null==i?1:i)}function _T(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function _O(){return`#${_D(this.r)}${_D(this.g)}${_D(this.b)}`}function _P(){let e=_M(this.opacity);return`${1===e?"rgb(":"rgba("}${_E(this.r)}, ${_E(this.g)}, ${_E(this.b)}${1===e?")":`, ${e})`}`}function _M(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _E(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _D(e){return((e=_E(e))<16?"0":"")+e.toString(16)}function _I(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _N(e,t,n,i)}function _k(e){if(e instanceof _N)return new _N(e.h,e.s,e.l,e.opacity);if(e instanceof _l||(e=_A(e)),!e)return new _N;if(e instanceof _N)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,l=a-o,u=(a+o)/2;return l?(s=t===a?(n-i)/l+6*(n<i):n===a?(i-t)/l+2:(t-n)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new _N(s,l,u,e.opacity)}function _N(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function _R(e){return(e=(e||0)%360)<0?e+360:e}function _B(e){return Math.max(0,Math.min(1,e||0))}function _L(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function _F(e,t,n,i,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*o)/6}_a(_l,_A,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_x,formatHex:_x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return _k(this).formatHsl()},formatRgb:_w,toString:_w}),_a(_T,__,_s(_l,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new _T(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new _T(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _T(_E(this.r),_E(this.g),_E(this.b),_M(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_O,formatHex:_O,formatHex8:function(){return`#${_D(this.r)}${_D(this.g)}${_D(this.b)}${_D(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_P,toString:_P})),_a(_N,function(e,t,n,i){return 1==arguments.length?_k(e):new _N(e,t,n,null==i?1:i)},_s(_l,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new _N(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new _N(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new _T(_L(e>=240?e-240:e+120,o,i),_L(e,o,i),_L(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new _N(_R(this.h),_B(this.s),_B(this.l),_M(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=_M(this.opacity);return`${1===e?"hsl(":"hsla("}${_R(this.h)}, ${100*_B(this.s)}%, ${100*_B(this.l)}%${1===e?")":`, ${e})`}`}}));var _V=e=>()=>e;function _j(e,t){var n=t-e;return n?function(t){return e+t*n}:_V(isNaN(e)?t:e)}var _G=function e(t){var n,i=1==(n=+t)?_j:function(e,t){var i,o,a;return t-e?(i=e,o=t,i=Math.pow(i,a=n),o=Math.pow(o,a)-i,a=1/a,function(e){return Math.pow(i+e*o,a)}):_V(isNaN(e)?t:e)};function o(e,t){var n=i((e=__(e)).r,(t=__(t)).r),o=i(e.g,t.g),a=i(e.b,t.b),s=_j(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return o.gamma=e,o}(1);function _U(e){return function(t){var n,i,o=t.length,a=Array(o),s=Array(o),l=Array(o);for(n=0;n<o;++n)i=__(t[n]),a[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}function _z(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}_U(function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,l=i<t-1?e[i+2]:2*a-o;return _F((n-i/t)*t,s,o,a,l)}}),_U(function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),o=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return _F((n-i/t)*t,o,a,s,l)}});var _W=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_H=RegExp(_W.source,"g");function _q(e,t){return e*=1,t*=1,function(n){return Math.round(e*(1-n)+t*n)}}function _K(e){return+e}var _X=[0,1];function _Y(e){return e}function _Z(e,t){var n;return(t-=e*=1)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n})}function _J(e,t,n){var i=e[0],o=e[1],a=t[0],s=t[1];return o<i?(i=_Z(o,i),a=n(s,a)):(i=_Z(i,o),a=n(a,s)),function(e){return a(i(e))}}function _Q(e,t,n){var i=Math.min(e.length,t.length)-1,o=Array(i),a=Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=_Z(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=_o(e,t,1,i)-1;return a[n](o[n](t))}}function _$(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var _0,_1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _2(e){var t;if(!(t=_1.exec(e)))throw Error("invalid format: "+e);return new _3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function _3(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function _4(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function _5(e){return(e=_4(Math.abs(e)))?e[1]:NaN}function _6(e,t){var n=_4(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+Array(o-i.length+2).join("0")}_2.prototype=_3.prototype,_3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var _8={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_6(100*e,t),r:_6,s:function(e,t){var n=_4(e,t);if(!n)return e+"";var i=n[0],o=n[1],a=o-(_0=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+Array(1-a).join("0")+_4(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _9(e){return e}var _7,Te,Tt,Tn=Array.prototype.map,Tr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ti(){var e,t=(function(){var e,t,n,i,o,a,s=_X,l=_X,u=function e(t,n){var i,o,a=typeof n;return null==n||"boolean"===a?_V(n):("number"===a?_z:"string"===a?(o=_A(n))?(n=o,_G):function(e,t){var n,i,o,a,s,l=_W.lastIndex=_H.lastIndex=0,u=-1,c=[],d=[];for(e+="",t+="";(o=_W.exec(e))&&(a=_H.exec(t));)(s=a.index)>l&&(s=t.slice(l,s),c[u]?c[u]+=s:c[++u]=s),(o=o[0])===(a=a[0])?c[u]?c[u]+=a:c[++u]=a:(c[++u]=null,d.push({i:u,x:_z(o,a)})),l=_H.lastIndex;return l<t.length&&(s=t.slice(l),c[u]?c[u]+=s:c[++u]=s),c.length<2?d[0]?(n=d[0].x,function(e){return n(e)+""}):(i=t,function(){return i}):(t=d.length,function(e){for(var n,i=0;i<t;++i)c[(n=d[i]).i]=n.x(e);return c.join("")})}:n instanceof _A?_G:n instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(i){return n.setTime(e*(1-i)+t*i),n}}:!ArrayBuffer.isView(i=n)||i instanceof DataView?Array.isArray(n)?function(t,n){var i,o=n?n.length:0,a=t?Math.min(o,t.length):0,s=Array(a),l=Array(o);for(i=0;i<a;++i)s[i]=e(t[i],n[i]);for(;i<o;++i)l[i]=n[i];return function(e){for(i=0;i<a;++i)l[i]=s[i](e);return l}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var i,o={},a={};for(i in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)i in t?o[i]=e(t[i],n[i]):a[i]=n[i];return function(e){for(i in o)a[i]=o[i](e);return a}}:_z:function(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<i;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}})(t,n)},c=_Y;function d(){var e,t,n,u=Math.min(s.length,l.length);return c!==_Y&&(e=s[0],t=s[u-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=u>2?_Q:_J,o=a=null,f}function f(t){return null==t||isNaN(t*=1)?n:(o||(o=i(s.map(e),l,u)))(e(c(t)))}return f.invert=function(n){return c(t((a||(a=i(l,s.map(e),_z)))(n)))},f.domain=function(e){return arguments.length?(s=Array.from(e,_K),d()):s.slice()},f.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},f.rangeRound=function(e){return l=Array.from(e),u=_q,d()},f.clamp=function(e){return arguments.length?(c=!!e||_Y,d()):c!==_Y},f.interpolate=function(e){return arguments.length?(u=e,d()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,i){return e=n,t=i,d()}})()(_Y,_Y);return t.copy=function(){return Ti().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())},_$.apply(t,arguments),e=t.domain,t.ticks=function(t){var n=e();return function(e,t,n){var i,o,a,s,l=-1;if(n*=1,(e*=1)==(t*=1)&&n>0)return[e];if((i=t<e)&&(o=e,e=t,t=o),0===(s=_t(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,a=Array(o=i-n+1);++l<o;)a[l]=(n+l)*s}else{let n=Math.round(e*(s=-s)),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,a=Array(o=i-n+1);++l<o;)a[l]=(n+l)/s}return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(e,t,n,i){var o,a,s,l,u,c=(s=Math.pow(10,Math.floor(Math.log(a=Math.abs(t-e)/Math.max(0,n))/Math.LN10)),(l=a/s)>=S9?s*=10:l>=S7?s*=5:l>=_e&&(s*=2),t<e?-s:s);switch((i=_2(null==i?",f":i)).type){case"s":var d=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(u=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_5(d)/3)))-_5(Math.abs(c))))||(i.precision=u),Tt(i,d);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(u=Math.max(0,_5(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(o=Math.abs(o=c)))-_5(o))+1)||(i.precision=u-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(u=Math.max(0,-_5(Math.abs(c))))||(i.precision=u-2*("%"===i.type))}return Te(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,o,a=e(),s=0,l=a.length-1,u=a[s],c=a[l],d=10;for(c<u&&(o=u,u=c,c=o,o=s,s=l,l=o);d-- >0;){if((o=_t(u,c,n))===i)return a[s]=u,a[l]=c,e(a);if(o>0)u=Math.floor(u/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;u=Math.ceil(u*o)/o,c=Math.floor(c*o)/o}i=o}return t},t}function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Te=(_7=function(e){var t,n,i,o=void 0===e.grouping||void 0===e.thousands?_9:(n=Tn.call(e.grouping,Number),i=e.thousands+"",function(e,t){for(var o=e.length,a=[],s=0,l=n[0],u=0;o>0&&l>0&&(u+l+1>t&&(l=Math.max(1,t-u)),a.push(e.substring(o-=l,o+l)),!((u+=l+1)>t));)l=n[s=(s+1)%n.length];return a.reverse().join(i)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?_9:(t=Tn.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}),c=void 0===e.percent?"%":e.percent+"",d=void 0===e.minus?"":e.minus+"",f=void 0===e.nan?"NaN":e.nan+"";function p(e){var t=(e=_2(e)).fill,n=e.align,i=e.sign,p=e.symbol,h=e.zero,m=e.width,g=e.comma,v=e.precision,y=e.trim,b=e.type;"n"===b?(g=!0,b="g"):_8[b]||(void 0===v&&(v=12),y=!0,b="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var x="$"===p?a:"#"===p&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===p?s:/[%p]/.test(b)?c:"",A=_8[b],C=/[defgprs%]/.test(b);function S(e){var a,s,c,p=x,S=w;if("c"===b)S=A(e)+S,e="";else{var _=(e*=1)<0||1/e<0;if(e=isNaN(e)?f:A(Math.abs(e),v),y&&(e=function(e){n:for(var t,n=e.length,i=1,o=-1;i<n;++i)switch(e[i]){case".":o=t=i;break;case"0":0===o&&(o=i),t=i;break;default:if(!+e[i])break n;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==i&&(_=!1),p=(_?"("===i?i:d:"-"===i||"("===i?"":i)+p,S=("s"===b?Tr[8+_0/3]:"")+S+(_&&"("===i?")":""),C){for(a=-1,s=e.length;++a<s;)if(48>(c=e.charCodeAt(a))||c>57){S=(46===c?l+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}}g&&!h&&(e=o(e,1/0));var T=p.length+e.length+S.length,O=T<m?Array(m-T+1).join(t):"";switch(g&&h&&(e=o(O+e,O.length?m-S.length:1/0),O=""),n){case"<":e=p+e+S+O;break;case"=":e=p+O+e+S;break;case"^":e=O.slice(0,T=O.length>>1)+p+e+S+O.slice(T);break;default:e=O+p+e+S}return u(e)}return v=void 0===v?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return e+""},S}return{format:p,formatPrefix:function(e,t){var n=p(((e=_2(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(_5(t)/3))),o=Math.pow(10,-i),a=Tr[8+i/3];return function(e){return n(o*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,Tt=_7.formatPrefix;var Ts=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Tl=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Tu=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Tc=[0,1,0,1,0,1,0,1,2,2,2,2],Td=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],Tf=new Float64Array(3),Tp=new Float64Array(3),Th=new Float64Array(3),Tm=new Float64Array(3),Tg=new Float64Array(3),Tv=new Float64Array(3),Ty=new Float64Array(16);function Tb(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function Tx(e){for(var t=[],n=[],i=0;i<3;i++){var o=Ti().domain([e[2*i],e[2*i+1]]);t[i]=o.ticks(5);var a=o.tickFormat(5);n[i]=t[i].map(a)}return{ticks:t,tickStrings:n}}var Tw=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},n),eE.obj(e,t),t.tmPolyData=lC.newInstance(),t.tmMapper=gd.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmActor=mH.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),eE.setGet(e,t,["renderable"]),eE.get(e,t,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),t.forceUpdate=!1,t.lastRedrawTime={},eE.obj(t.lastRedrawTime,{mtime:0}),t.lastRebuildTime={},eE.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.lastTickBounds=[],t.classHierarchy.push("vtkCubeAxesActorHelper"),e.setRenderable=function(n){t.renderable!==n&&(t.renderable=n,t.tmActor.addTexture(t.renderable.getTmTexture()),t.tmActor.setProperty(n.getProperty()),t.tmActor.setParentProp(n),e.modified())},e.createPolyDataForOneLabel=function(e,n,i,o,a,s,l){var u=t.renderable.get_tmAtlas().get(e);if(u){var c=t.renderable.getTextPolyData().getPoints().getData(),d=t.lastSize;Tf[0]=c[3*n],Tf[1]=c[3*n+1],Tf[2]=c[3*n+2],rO(Th,Tf,i),Th[0]+=.1,rO(Tp,Th,o),ro(Tg,Tp,Tf),Th[0]-=.1,Th[1]+=.1,rO(Tp,Th,o),ro(Tv,Tp,Tf);for(var f=0;f<3;f++)Tg[f]/=.05*d[0],Tv[f]/=.05*d[1];var p=l.ptIdx,h=l.cellIdx;Tf[0]=c[3*n],Tf[1]=c[3*n+1],Tf[2]=c[3*n+2],a[0]<-.5?rp(Th,Tg,a[0]*s-u.width):a[0]>.5?rp(Th,Tg,a[0]*s):rp(Th,Tg,a[0]*s-u.width/2),ri(Tf,Tf,Th),rp(Th,Tv,a[1]*s-u.height/2),ri(Tf,Tf,Th),l.points[3*p]=Tf[0],l.points[3*p+1]=Tf[1],l.points[3*p+2]=Tf[2],l.tcoords[2*p]=u.tcoords[0],l.tcoords[2*p+1]=u.tcoords[1],p++,rp(Th,Tg,u.width),ri(Tf,Tf,Th),l.points[3*p]=Tf[0],l.points[3*p+1]=Tf[1],l.points[3*p+2]=Tf[2],l.tcoords[2*p]=u.tcoords[2],l.tcoords[2*p+1]=u.tcoords[3],p++,rp(Th,Tv,u.height),ri(Tf,Tf,Th),l.points[3*p]=Tf[0],l.points[3*p+1]=Tf[1],l.points[3*p+2]=Tf[2],l.tcoords[2*p]=u.tcoords[4],l.tcoords[2*p+1]=u.tcoords[5],p++,rp(Th,Tg,u.width),ro(Tf,Tf,Th),l.points[3*p]=Tf[0],l.points[3*p+1]=Tf[1],l.points[3*p+2]=Tf[2],l.tcoords[2*p]=u.tcoords[6],l.tcoords[2*p+1]=u.tcoords[7],p++,l.polys[4*h]=3,l.polys[4*h+1]=p-4,l.polys[4*h+2]=p-3,l.polys[4*h+3]=p-2,h++,l.polys[4*h]=3,l.polys[4*h+1]=p-4,l.polys[4*h+2]=p-2,l.polys[4*h+3]=p-1,l.ptIdx+=4,l.cellIdx+=2}},e.updateTexturePolyData=function(){var n=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);of(n,n);var i=t.renderable.getTextValues().length,o=4*i,a=new Float64Array(3*o),s=new Uint16Array(2*i*4),l=new Float32Array(2*o);op(Ty,n);for(var u={ptIdx:0,cellIdx:0,polys:s,points:a,tcoords:l},c=0,d=0,f=0,p=t.renderable.getTextPolyData().getPoints().getData(),h=t.renderable.getTextValues();c<p.length/3;){Tf[0]=p[3*c],Tf[1]=p[3*c+1],Tf[2]=p[3*c+2],rO(Th,Tf,n),Tf[0]=p[3*c+3],Tf[1]=p[3*c+4],Tf[2]=p[3*c+5],rO(Tm,Tf,n),ro(Th,Th,Tm);var m=[Th[0],Th[1]];tO(m),e.createPolyDataForOneLabel(h[d],c,n,Ty,m,t.renderable.getAxisTitlePixelOffset(),u),c+=2,d++;for(var g=0;g<t.renderable.getTickCounts()[f];g++)e.createPolyDataForOneLabel(h[d],c,n,Ty,m,t.renderable.getTickLabelPixelOffset(),u),c++,d++;f++}var v=nH.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(v),t.tmPolyData.getPoints().setData(a,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(s,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updateAPISpecificData=function(n,i,o){t.lastSize[0]===n[0]&&t.lastSize[1]===n[1]||(t.lastSize[0]=n[0],t.lastSize[1]=n[1],t.lastAspectRatio=n[0]/n[1],t.forceUpdate=!0),t.camera=i,e.updateTexturePolyData()}},"vtkCubeAxesActorHelper");function TA(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mH.extend(e,t,Ta(Ta({boundsScaleFactor:1.3,camera:null,dataBounds:m(iG.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:Tx},i),{},{axisTextStyle:Ta({fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},null==i?void 0:i.axisTextStyle),tickTextStyle:Ta({fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},null==i?void 0:i.tickTextStyle)})),t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.tmTexture=xQ.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.gridMapper=gd.newInstance(),t.polyData=lC.newInstance(),t.gridMapper.setInputData(t.polyData),t.gridActor=mH.newInstance(),t.gridActor.setMapper(t.gridMapper),t.gridActor.setProperty(e.getProperty()),t.gridActor.setParentProp(e),t.textPolyData=lC.newInstance(),eE.setGet(e,t,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),eE.setGetArray(e,t,["dataBounds"],6),eE.setGetArray(e,t,["axisLabels"],3),eE.get(e,t,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),t.classHierarchy.push("vtkCubeAxesActor"),e.setCamera=function(n){t.camera!==n&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=n,n&&(t.cameraModifiedSub=n.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=function(){var e=t.camera.getViewMatrix();of(e,e);for(var n=!1,i=iG.getDiagonalLength(t.dataBounds),o=Math.sin(t.faceVisibilityAngle*Math.PI/180),a=0;a<6;a++){var s=!1,l=Math.floor(a/2),u=(l+1)%3,c=(l+2)%3;t.dataBounds[2*u]!==t.dataBounds[2*u+1]&&t.dataBounds[2*c]!==t.dataBounds[2*c+1]&&(Tf[l]=t.dataBounds[a]-.1*i*Ts[a][l],Tf[u]=.5*(t.dataBounds[2*u]+t.dataBounds[2*u+1]),Tf[c]=.5*(t.dataBounds[2*c]+t.dataBounds[2*c+1]),rO(Th,Tf,e),Tf[l]=t.dataBounds[a],rO(Tm,Tf,e),ro(Th,Tm,Th),rx(Th,Th),s=Th[2]>o,t.camera.getParallelProjection()||(rx(Tm,Tm),s=rw(Tm,Th)>o)),s!==t.lastFacesToDraw[a]&&(t.lastFacesToDraw[a]=s,n=!0)}return n},e.updatePolyData=function(e,n,i){var o,a=0;o=8;for(var s=0,l=0;l<12;l++)n[l]>0&&s++;if(a+=s,t.gridLines)for(var u=0;u<6;u++)e[u]&&(o+=2*i[Td[u][0]].length+2*i[Td[u][1]].length,a+=i[Td[u][0]].length+i[Td[u][1]].length);for(var c=new Float64Array(3*o),d=new Uint32Array(3*a),f=0,p=0,h=0;h<2;h++)for(var m=0;m<2;m++)for(var g=0;g<2;g++)c[3*f]=t.dataBounds[g],c[3*f+1]=t.dataBounds[2+m],c[3*f+2]=t.dataBounds[4+h],f++;for(var v=0;v<12;v++)n[v]>0&&(d[3*p]=2,d[3*p+1]=Tu[v][0],d[3*p+2]=Tu[v][1],p++);if(t.gridLines){for(var y=0;y<6;y++)if(e[y]){for(var b=Math.floor(y/2),x=i[Td[y][0]],w=0;w<x.length;w++)c[3*f+b]=t.dataBounds[y],c[3*f+Td[y][0]]=x[w],c[3*f+Td[y][1]]=t.dataBounds[2*Td[y][1]],c[3*++f+b]=t.dataBounds[y],c[3*f+Td[y][0]]=x[w],c[3*f+Td[y][1]]=t.dataBounds[2*Td[y][1]+1],f++,d[3*p]=2,d[3*p+1]=f-2,d[3*p+2]=f-1,p++;x=i[Td[y][1]];for(var A=0;A<x.length;A++)c[3*f+b]=t.dataBounds[y],c[3*f+Td[y][1]]=x[A],c[3*f+Td[y][0]]=t.dataBounds[2*Td[y][0]],c[3*++f+b]=t.dataBounds[y],c[3*f+Td[y][1]]=x[A],c[3*f+Td[y][0]]=t.dataBounds[2*Td[y][0]+1],f++,d[3*p]=2,d[3*p+1]=f-2,d[3*p+2]=f-1,p++}}t.polyData.getPoints().setData(c,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(d,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=function(e,n,i,o){for(var a=0,s=0;s<12;s++)1===n[s]&&(a+=2,a+=i[Tc[s]].length);for(var l=t.polyData.getPoints().getData(),u=new Float64Array(3*a),c=0,d=0,f=0,p=0;p<6;p++)if(e[p])for(var h=0;h<4;h++){var m=Tl[p][h];if(1===n[m]){var g=Tc[m],v=3*Tu[m][0],y=3*Tu[m][1];u[3*c]=.5*(l[v]+l[y]),u[3*c+1]=.5*(l[v+1]+l[y+1]),u[3*c+2]=.5*(l[v+2]+l[y+2]),u[3*++c+Math.floor(p/2)]=t.dataBounds[p],u[3*c+Td[p][0]]=.5*(t.dataBounds[2*Td[p][0]]+t.dataBounds[2*Td[p][0]+1]),u[3*c+Td[p][1]]=.5*(t.dataBounds[2*Td[p][1]]+t.dataBounds[2*Td[p][1]+1]),c++,t.textValues[d]=t.axisLabels[g],d++;var b=(g+1)%3,x=(g+2)%3,w=i[g],A=o[g];t.tickCounts[f]=w.length;for(var C=0;C<w.length;C++)u[3*c+g]=w[C],u[3*c+b]=l[v+b],u[3*c+x]=l[v+x],c++,t.textValues[d]=A[C],d++;f++}}t.textPolyData.getPoints().setData(u,3),t.textPolyData.modified()},e.update=function(){if(t.camera){for(var n=e.computeFacesToDraw(),i=t.lastFacesToDraw,o=!1,a=0;a<6;a++)t.dataBounds[a]!==t.lastTickBounds[a]&&(o=!0,t.lastTickBounds[a]=t.dataBounds[a]);if(n||o||t.forceUpdate){for(var s=Array(12).fill(0),l=0;l<6;l++)if(i[l])for(var u=0;u<4;u++)s[Tl[l][u]]++;var c=t.generateTicks(t.dataBounds);e.updatePolyData(i,s,c.ticks),e.updateTextData(i,s,c.ticks,c.tickStrings),(o||t.forceUpdate)&&e.updateTextureAtlas(c.tickStrings)}t.forceUpdate=!1}},e.updateTextureAtlas=function(e){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t._tmAtlas.clear();for(var n=0,i=1,o=0;o<3;o++){if(!t._tmAtlas.has(t.axisLabels[o])){Tb(t.tmContext,t.axisTextStyle);var a=t.tmContext.measureText(t.axisLabels[o]),s={height:a.actualBoundingBoxAscent+2,startingHeight:i,width:a.width+2,textStyle:t.axisTextStyle};t._tmAtlas.set(t.axisLabels[o],s),i+=s.height,n<s.width&&(n=s.width)}Tb(t.tmContext,t.tickTextStyle);for(var l=0;l<e[o].length;l++)if(!t._tmAtlas.has(e[o][l])){var u=t.tmContext.measureText(e[o][l]),c={height:u.actualBoundingBoxAscent+2,startingHeight:i,width:u.width+2,textStyle:t.tickTextStyle};t._tmAtlas.set(e[o][l],c),i+=c.height,n<c.width&&(n=c.width)}}n=e5(n),i=e5(i),t._tmAtlas.forEach(function(e){e.tcoords=[0,(i-e.startingHeight-e.height)/i,e.width/n,(i-e.startingHeight-e.height)/i,e.width/n,(i-e.startingHeight)/i,0,(i-e.startingHeight)/i]}),t.tmCanvas.width=n,t.tmCanvas.height=i,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,n,i),t._tmAtlas.forEach(function(e,n){Tb(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified()},e.onModified(function(){t.forceUpdate=!0,e.update()}),e.setTickTextStyle=function(n){t.tickTextStyle=Ta(Ta({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=function(n){t.axisTextStyle=Ta(Ta({},t.axisTextStyle),n),e.modified()},e.get_tmAtlas=function(){return t._tmAtlas},e.getBounds=function(){return e.update(),iG.setBounds(t.bounds,t.gridActor.getBounds()),iG.scaleAboutCenter(t.bounds,t.boundsScaleFactor,t.boundsScaleFactor,t.boundsScaleFactor),t.bounds},n=eE.chain(e.setProperty,t.gridActor.setProperty),e.setProperty=function(e){return n(e)[0]}}var TC={newInstance:eE.newInstance(TA,"vtkCubeAxesActor"),extend:TA,newCubeAxesActorHelper:Tw,defaultGenerateTicks:Tx};function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var T_={viewUp:[0,1,0],useViewUp:!1,camera:null};function TT(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,T_,o),mH.extend(e,n,o),n.followerMatrix=od(new Float64Array(16)),eE.setGet(e,n,["useViewUp","camera"]),eE.setGetArray(e,n,["viewUp"],3),n.classHierarchy.push("vtkFollower"),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TS(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getMTime=function(){var e=i.getMTime();if(null!==n.camera){var t=n.camera.getMTime();e=t>e?t:e}return e},e.computeMatrix=function(){if(e.getMTime()>n.matrixMTime.getMTime()){if(od(n.matrix),n.userMatrix&&og(n.matrix,n.matrix,n.userMatrix),ov(n.matrix,n.matrix,n.origin),ov(n.matrix,n.matrix,n.position),og(n.matrix,n.matrix,n.rotation),oy(n.matrix,n.matrix,n.scale),n.camera){var i=new Float64Array(n.viewUp);n.useViewUp||rr.apply(t,[i].concat(m(n.camera.getViewUp())));var o=new Float64Array(3);n.camera.getParallelProjection()?rr.apply(t,[o].concat(m(n.camera.getViewPlaneNormal()))):(rr.apply(t,[o].concat(m(n.position))),ro(o,n.camera.getPosition(),o),rx(o,o));var a=new Float64Array(3);rA(a,i,o),rx(a,a),rA(o,a,i),rx(o,o),n.followerMatrix[0]=a[0],n.followerMatrix[1]=a[1],n.followerMatrix[2]=a[2],n.followerMatrix[4]=i[0],n.followerMatrix[5]=i[1],n.followerMatrix[6]=i[2],n.followerMatrix[8]=o[0],n.followerMatrix[9]=o[1],n.followerMatrix[10]=o[2],og(n.matrix,n.matrix,n.followerMatrix)}ov(n.matrix,n.matrix,[-n.origin[0],-n.origin[1],-n.origin[2]]),of(n.matrix,n.matrix),n.isIdentity=!1,n.matrixMTime.modified()}}}var TO={newInstance:eE.newInstance(TT,"vtkFollower"),extend:TT},TP={DIRECTION:0,ROTATION:1,MATRIX:2},TM={OrientationModes:TP,ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}};function TE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var TD=TM.OrientationModes,TI=TM.ScaleModes,Tk=eE.vtkErrorMacro,TN={orient:!0,orientationMode:TD.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:TI.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function TR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TN,n),gd.extend(e,t,n),eE.algo(e,t,2,0),t.buildTime={},eE.obj(t.buildTime,{mtime:0}),t.boundsTime={},eE.obj(t.boundsTime,{mtime:0}),eE.setGet(e,t,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),eE.get(e,t,["colorArray","matrixArray","normalArray","buildTime"]),t.classHierarchy.push("vtkGlyph3DMapper"),e.getOrientationModeAsString=function(){return eE.enumToString(TD,t.orientationMode)},e.setOrientationModeToDirection=function(){return e.setOrientationMode(TD.DIRECTION)},e.setOrientationModeToRotation=function(){return e.setOrientationMode(TD.ROTATION)},e.setOrientationModeToMatrix=function(){return e.setOrientationMode(TD.MATRIX)},e.getOrientationArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.orientationArray?n.getPointData().getArray(t.orientationArray):n.getPointData().getVectors():null},e.getScaleModeAsString=function(){return eE.enumToString(TI,t.scaleMode)},e.setScaleModeToScaleByMagnitude=function(){return e.setScaleMode(TI.SCALE_BY_MAGNITUDE)},e.setScaleModeToScaleByComponents=function(){return e.setScaleMode(TI.SCALE_BY_COMPONENTS)},e.setScaleModeToScaleByConstant=function(){return e.setScaleMode(TI.SCALE_BY_CONSTANT)},e.getScaleArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.scaleArray?n.getPointData().getArray(t.scaleArray):n.getPointData().getScalars():null},e.getBounds=function(){var n=e.getInputData(0),i=e.getInputData(1);return n&&i?(e.buildArrays(),t.bounds):nP()},e.buildArrays=function(){var n=e.getInputData(0),i=e.getInputData(1);if(t.buildTime.getMTime()<i.getMTime()||t.buildTime.getMTime()<n.getMTime()||t.buildTime.getMTime()<e.getMTime()){var o=n.getPoints().getData(),a=e.getScaleArrayData(),s=null,l=0;a&&(s=a.getData(),l=a.getNumberOfComponents()),t.scaling&&a&&t.scaleMode===TI.SCALE_BY_COMPONENTS&&3!==a.getNumberOfComponents()&&(Tk("Cannot scale by components since scale array does not have 3 components."),a=null);var u=i.getBounds(),c=[];iG.getCorners(u,c),t.bounds[0]=iG.INIT_BOUNDS[0],t.bounds[1]=iG.INIT_BOUNDS[1],t.bounds[2]=iG.INIT_BOUNDS[2],t.bounds[3]=iG.INIT_BOUNDS[3],t.bounds[4]=iG.INIT_BOUNDS[4],t.bounds[5]=iG.INIT_BOUNDS[5];var d=new Float64Array(3),f=e.getOrientationArrayData(),p=od(new Float64Array(16)),h=[],g=[],v=o.length/3;t.matrixArray=new Float32Array(16*v);var y=t.matrixArray.buffer;t.normalArray=new Float32Array(9*v);for(var b=t.normalArray.buffer,x=[],w=[],A=0;A<v;++A){var C=new Float32Array(y,64*A,16);if(h[0]=o[3*A],h[1]=o[3*A+1],h[2]=o[3*A+2],ov(C,p,h),f)switch(f.getTuple(A,w),t.orientationMode){case TD.MATRIX:og(C,C,[].concat(m(w.slice(0,3)),[0],m(w.slice(3,6)),[0],m(w.slice(6,9)),[0,0,0,0,1]));break;case TD.ROTATION:oA(C,C,w[2]),ox(C,C,w[0]),ow(C,C,w[1]);break;case TD.DIRECTION:if(0===w[1]&&0===w[2])w[0]<0&&ow(C,C,3.1415926);else{var S=tp(w),_=[];_[0]=(w[0]+S)/2,_[1]=w[1]/2,_[2]=w[2]/2,ob(C,C,3.1415926,_)}}if(t.scaling){if(g[0]=t.scaleFactor,g[1]=t.scaleFactor,g[2]=t.scaleFactor,a)switch(t.scaleMode){case TI.SCALE_BY_MAGNITUDE:for(var T=0;T<l;++T)x[T]=s[A*l+T];g[0]*=tp(x,l),g[1]=g[0],g[2]=g[0];break;case TI.SCALE_BY_COMPONENTS:for(var O=0;O<l;++O)x[O]=s[A*l+O];g[0]*=x[0],g[1]*=x[1],g[2]*=x[2];case TI.SCALE_BY_CONSTANT:}0===g[0]&&(g[0]=1e-10),0===g[1]&&(g[1]=1e-10),0===g[2]&&(g[2]=1e-10),oy(C,C,g)}for(var P=0;P<8;++P)rO(d,c[P],C),d[0]<t.bounds[0]&&(t.bounds[0]=d[0]),d[1]<t.bounds[2]&&(t.bounds[2]=d[1]),d[2]<t.bounds[4]&&(t.bounds[4]=d[2]),d[0]>t.bounds[1]&&(t.bounds[1]=d[0]),d[1]>t.bounds[3]&&(t.bounds[3]=d[1]),d[2]>t.bounds[5]&&(t.bounds[5]=d[2]);var M=new Float32Array(b,36*A,9);o4(M,C),at(M,M),ae(M,M)}var E=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),t.colorArray=null;var D=e.getLookupTable();D&&E&&(D.build(),t.colorArray=D.mapScalars(E,t.colorMode,0)),t.buildTime.modified()}},e.getPrimitiveCount=function(){var t=e.getInputData(1),n=e.getInputData().getPoints().getNumberOfValues()/3;return{points:n*t.getPoints().getNumberOfValues()/3,verts:n*(t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells()),lines:n*(t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells()),triangles:n*(t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells())}},e.setSourceConnection=function(t){return e.setInputConnection(t,1)}}var TB=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TE(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(TR,"vtkGlyph3DMapper"),extend:TR},TM),TL={fieldAssociation:oe.FieldAssociations.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function TF(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TL,o),eE.obj(e,t),eE.setGet(e,t,["fieldAssociation","captureZValues"]),t.classHierarchy.push("vtkHardwareSelector"),n=w$(w1().mark(function e(t,n,i,o,a){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),e.getSourceDataAsync=function(e,t,i,o,a){return n.apply(this,arguments)},i=w$(w1().mark(function t(n,i,o,a,s){var l;return w1().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSourceDataAsync(n,i,o,a,s);case 2:if(!(l=t.sent)){t.next=5;break}return t.abrupt("return",l.generateSelection(i,o,a,s));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}},t)})),e.selectAsync=function(e,t,n,o,a){return i.apply(this,arguments)}}var TV={newInstance:eE.newInstance(TF,"vtkHardwareSelector"),extend:TF},Tj={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}},TG={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1],colorTextureWidth:1024,opacityTextureWidth:1024,labelOutlineTextureWidth:1024},TU=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TG,n),mY.extend(e,t,n),eE.setGet(e,t,["slice","useCustomExtents","colorTextureWidth","opacityTextureWidth","labelOutlineTextureWidth"]),eE.setGetArray(e,t,["customDisplayExtent"],6),eE.setGetArray(e,t,["backgroundColor"],4),t.classHierarchy.push("vtkAbstractImageMapper"),e.getIsOpaque=function(){return!0},e.getCurrentImage=function(){return null},e.getBoundsForSlice=function(){return eE.vtkErrorMacro("vtkAbstractImageMapper.getBoundsForSlice - NOT IMPLEMENTED"),nP()}};function Tz(e,t,n){var i=n.getCurrentImage(),o=i.getExtent(),a=[o[0],o[2],o[4]],s=n.getClosestIJKAxis().ijkMode,l=n.isA("vtkImageArrayMapper")?n.getSubSlice():n.getSlice();s!==n.getSlicingMode()&&(l=n.getSliceAtPosition(l)),a[s]+=l;var u=[0,0,0];i.indexToWorld(a,u),a[s]+=1;var c=[0,0,0];i.indexToWorld(a,c),c[0]-=u[0],c[1]-=u[1],c[2]-=u[2],rx(c,c);var d=r8.intersectWithLine(e,t,u,c);if(d.intersection){var f=d.x,p=[0,0,0];return i.worldToIndex(f,p),{t:d.t,absoluteIJK:p}}return null}function TW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function TH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TW(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Tq=Tj.SlicingMode,TK={slicingMode:Tq.NONE,closestIJKAxis:{ijkMode:Tq.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function TX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TK,n),TU(e,t,n),eE.get(e,t,["slicingMode"]),eE.setGet(e,t,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),m5(e,t),function(e,t){function n(){switch(t.slicingMode){case Tq.X:n=0;break;case Tq.Y:n=1;break;case Tq.Z:n=2;break;default:return void(t.closestIJKAxis={ijkMode:t.slicingMode,flip:!1})}for(var n,i=nE(e.getCurrentImage().getDirection()),o=0;o<3&&0===i[n+3*o];++o);var a=i[n+3*o]<0;t.closestIJKAxis={ijkMode:o,flip:a}}t.classHierarchy.push("vtkImageMapper"),e.getSliceAtPosition=function(n){var i,o=e.getCurrentImage();if(3===n.length)i=n;else if(Number.isFinite(n)){var a=o.getBounds();switch(t.slicingMode){case Tq.X:i=[n,(a[3]+a[2])/2,(a[5]+a[4])/2];break;case Tq.Y:i=[(a[1]+a[0])/2,n,(a[5]+a[4])/2];break;case Tq.Z:i=[(a[1]+a[0])/2,(a[3]+a[2])/2,n]}}var s=[0,0,0];o.worldToIndex(i,s);var l=o.getExtent(),u=0;switch(e.getClosestIJKAxis().ijkMode){case Tq.I:u=np(s[0],l[0],l[1]);break;case Tq.J:u=np(s[1],l[2],l[3]);break;case Tq.K:u=np(s[2],l[4],l[5]);break;default:return 0}return u},e.setSliceFromCamera=function(n){var i=n.getFocalPoint();switch(t.slicingMode){case Tq.I:case Tq.J:case Tq.K:var o=e.getSliceAtPosition(i);e.setSlice(o);break;case Tq.X:e.setSlice(i[0]);break;case Tq.Y:e.setSlice(i[1]);break;case Tq.Z:e.setSlice(i[2])}},e.setXSlice=function(t){e.setSlicingMode(Tq.X),e.setSlice(t)},e.setYSlice=function(t){e.setSlicingMode(Tq.Y),e.setSlice(t)},e.setZSlice=function(t){e.setSlicingMode(Tq.Z),e.setSlice(t)},e.setISlice=function(t){e.setSlicingMode(Tq.I),e.setSlice(t)},e.setJSlice=function(t){e.setSlicingMode(Tq.J),e.setSlice(t)},e.setKSlice=function(t){e.setSlicingMode(Tq.K),e.setSlice(t)},e.getSlicingModeNormal=function(){var n=[0,0,0],i=e.getCurrentImage().getDirection();switch(t.slicingMode){case Tq.X:n[0]=1;break;case Tq.Y:n[1]=1;break;case Tq.Z:n[2]=1;break;case Tq.I:tB(i,[1,0,0],n);break;case Tq.J:tB(i,[0,1,0],n);break;case Tq.K:tB(i,[0,0,1],n)}return n},e.setSlicingMode=function(i){t.slicingMode!==i&&(t.slicingMode=i,e.getCurrentImage()&&n(),e.modified())},e.getClosestIJKAxis=function(){return(void 0===t.closestIJKAxis||t.closestIJKAxis.ijkMode===Tq.NONE)&&e.getCurrentImage()&&n(),t.closestIJKAxis},e.getBounds=function(){var n=e.getCurrentImage();if(!n)return nP();if(!t.useCustomExtents)return n.getBounds();var i=t.customDisplayExtent.slice(),o=e.getClosestIJKAxis().ijkMode,a=t.slice;switch(o!==t.slicingMode&&(a=e.getSliceAtPosition(t.slice)),o){case Tq.I:i[0]=a,i[1]=a;break;case Tq.J:i[2]=a,i[3]=a;break;case Tq.K:i[4]=a,i[5]=a}return n.extentToBounds(i)},e.getBoundsForSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slice,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.getCurrentImage();if(!o)return nP();var a=o.getSpatialExtent(),s=e.getClosestIJKAxis().ijkMode,l=n;switch(s!==t.slicingMode&&(l=e.getSliceAtPosition(n)),s){case Tq.I:a[0]=l-i,a[1]=l+i;break;case Tq.J:a[2]=l-i,a[3]=l+i;break;case Tq.K:a[4]=l-i,a[5]=l+i}return o.extentToBounds(a)},e.intersectWithLineForPointPicking=function(t,n){var i=Tz(t,n,e);if(i){var o=e.getCurrentImage().getExtent(),a=[Math.round(i.absoluteIJK[0]),Math.round(i.absoluteIJK[1]),Math.round(i.absoluteIJK[2])];return a[0]<o[0]||a[0]>o[1]||a[1]<o[2]||a[1]>o[3]||a[2]<o[4]||a[2]>o[5]?null:{t:i.t,ijk:a}}return null},e.intersectWithLineForCellPicking=function(t,n){return function(e,t,n){var i=Tz(e,t,n);if(i){var o=n.getCurrentImage().getExtent(),a=i.absoluteIJK,s=[Math.floor(a[0]),Math.floor(a[1]),Math.floor(a[2])];if(s[0]<o[0]||s[0]>o[1]-1||s[1]<o[2]||s[1]>o[3]-1||s[2]<o[4]||s[2]>(o[5]?o[5]-1:o[5]))return null;var l=[a[0]-s[0],a[1]-s[1],a[2]-s[2]];return{t:i.t,ijk:s,pCoords:l}}return null}(t,n,e)},e.getCurrentImage=function(){return e.getInputData()}}(e,t)}var TY=TH(TH(TH({newInstance:eE.newInstance(TX,"vtkImageMapper"),extend:TX},m4),m1),Tj),TZ={NEAREST:0,LINEAR:1};function TJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var TQ=eE.vtkErrorMacro;function T$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TJ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({independentComponents:!1,interpolationType:TZ.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1,updatedExtents:[]},n)),eE.obj(e,t),!t.componentData){t.componentData=[];for(var i=0;i<4;i++)t.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}eE.setGet(e,t,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange","useLabelOutline","labelOutlineOpacity","updatedExtents"]),eE.setGetArray(e,t,["labelOutlineThickness"]),t.classHierarchy.push("vtkImageProperty"),e.getMTime=function(){for(var e,n=t.mtime,i=0;i<4;i++)t.componentData[i].rGBTransferFunction&&(n=n>(e=t.componentData[i].rGBTransferFunction.getMTime())?n:e),t.componentData[i].piecewiseFunction&&(n=n>(e=t.componentData[i].piecewiseFunction.getMTime())?n:e);return n},e.setRGBTransferFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Number.isInteger(n)||(o=n,i=0),t.componentData[i].rGBTransferFunction!==o&&(t.componentData[i].rGBTransferFunction=o,e.modified(),!0)},e.getRGBTransferFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].rGBTransferFunction},e.setPiecewiseFunction=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Number.isInteger(n)||(o=n,i=0),t.componentData[i].piecewiseFunction!==o&&(t.componentData[i].piecewiseFunction=o,e.modified(),!0)},e.getPiecewiseFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].piecewiseFunction},e.setScalarOpacity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Number.isInteger(t)||(i=t,n=0),e.setPiecewiseFunction(n,i)},e.getScalarOpacity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.getPiecewiseFunction(t)},e.setComponentWeight=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n<0||n>=4)return TQ("Invalid index"),!1;var o=Math.min(1,Math.max(0,i));return t.componentData[n].componentWeight!==o&&(t.componentData[n].componentWeight=o,e.modified(),!0)},e.getComponentWeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0||e>=4?(TQ("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(TZ.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(TZ.LINEAR)},e.getInterpolationTypeAsString=function(){return eE.enumToString(TZ,t.interpolationType)}}var T0={newInstance:eE.newInstance(T$,"vtkImageProperty"),extend:T$};function T1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function T2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T1(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,T2({slabThickness:0,slabTrapezoidIntegration:0,slabType:2,slicePlane:null,slicePolyData:null},n)),TU(e,t,n),eE.setGet(e,t,["slabThickness","slabTrapezoidIntegration","slabType","slicePlane","slicePolyData"]),m5(e,t),t.classHierarchy.push("vtkImageResliceMapper"),e.getBounds=function(){var t=m(iG.INIT_BOUNDS),n=e.getInputData();return e.getSlicePolyData()?t=e.getSlicePolyData().getBounds():n&&(t=n.getBounds(),e.getSlicePlane()&&iG.cutWithPlane(t,e.getSlicePlane().getOrigin(),e.getSlicePlane().getNormal())),t}}var T4=T2(T2({newInstance:eE.newInstance(T3,"vtkImageResliceMapper"),extend:T3},m4),m1),T5={mapper:null,forceOpaque:!1,forceTranslucent:!1};function T6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,T5,n),mD.extend(e,t,n),t.boundsMTime={},eE.obj(t.boundsMTime),eE.setGet(e,t,["mapper","forceOpaque","forceTranslucent"]),t.classHierarchy.push("vtkImageSlice"),e.getActors=function(){return e},e.getImages=function(){return e},e.getIsOpaque=function(){return!!t.forceOpaque||!t.forceTranslucent&&(t.properties[0]||e.getProperty(),t.properties[0].getOpacity()>=1&&(!t.mapper||t.mapper.getIsOpaque()))},e.hasTranslucentPolygonalGeometry=function(){return!1},e.makeProperty=T0.newInstance,e.getBoundsForSlice=function(n,i){var o=t.mapper.getBoundsForSlice(n,i);if(!iG.isValid(o))return o;e.computeMatrix();var a=new Float64Array(16);return of(a,t.matrix),iG.transformBounds(o,a)},e.getMinXBound=function(){return e.getBounds()[0]},e.getMaxXBound=function(){return e.getBounds()[1]},e.getMinYBound=function(){return e.getBounds()[2]},e.getMaxYBound=function(){return e.getBounds()[3]},e.getMinZBound=function(){return e.getBounds()[4]},e.getMaxZBound=function(){return e.getBounds()[5]},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return t.properties.forEach(function(t){e=Math.max(e,t.getMTime());var n=t.getRGBTransferFunction();null!==n&&(e=Math.max(e,n.getMTime()))}),e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var T8={newInstance:eE.newInstance(T6,"vtkImageSlice"),extend:T6},T9=aN.ColorMode,T7=aN.ScalarMode,Oe=aN.GetArray,Ot=aI.VectorMode,On=nH.VtkDataTypes;function Or(e,t,n){var i,o,a=Math.floor(t),s=a%(2*n[0]);s<n[0]?(e[0]=s,i=1,o=e[0]===n[0]-1):(e[0]=2*n[0]-1-s,i=-1,o=0===e[0]);var l,u,c=Math.floor(a/n[0]),d=c%(2*n[1]);d<n[1]?(e[1]=d,l=1,u=e[1]===n[1]-1):(e[1]=2*n[1]-1-d,l=-1,u=0===e[1]),e[2]=Math.floor(c/n[1]);var f=t-a;o?u?e[2]+=f:e[1]+=l*f:e[0]+=i*f,e[0]=(e[0]+.5)/n[0],e[1]=(e[1]+.5)/n[1],e[2]=(e[2]+.5)/n[2]}var Oi=new WeakMap,Oo={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,colorMapColors:null,areScalarsMappedFromCells:!1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function Oa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oo,n),mK.extend(e,t,n),eE.get(e,t,["areScalarsMappedFromCells","colorCoordinates","colorTextureMap","colorMapColors"]),eE.setGet(e,t,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),eE.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),t.classHierarchy.push("vtkMapper2D"),e.createDefaultLookupTable=function(){t.lookupTable=aZ.newInstance()},e.getColorModeAsString=function(){return eE.enumToString(T9,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return eE.enumToString(T7,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,n,i,o,a){if(!e||!t.scalarVisibility)return{scalars:null,cellFlag:!1};var s=null,l=!1;if(n===T7.DEFAULT)(s=e.getPointData().getScalars())||(s=e.getCellData().getScalars(),l=!0);else if(n===T7.USE_POINT_DATA)s=e.getPointData().getScalars();else if(n===T7.USE_CELL_DATA)s=e.getCellData().getScalars(),l=!0;else if(n===T7.USE_POINT_FIELD_DATA){var u=e.getPointData();s=i===Oe.BY_ID?u.getArrayByIndex(o):u.getArrayByName(a)}else if(n===T7.USE_CELL_FIELD_DATA){var c=e.getCellData();l=!0,s=i===Oe.BY_ID?c.getArrayByIndex(o):c.getArrayByName(a)}else if(n===T7.USE_FIELD_DATA){var d=e.getFieldData();s=i===Oe.BY_ID?d.getArrayByIndex(o):d.getArrayByName(a)}return{scalars:s,cellFlag:l}},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.mapScalars=function(n,i){var o=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),a=o.scalars,s=o.cellFlag;if(t.areScalarsMappedFromCells=s,!a)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var l="".concat(e.getMTime()).concat(a.getMTime()).concat(i);if(t.colorBuildString!==l){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(a,s))t.mapScalarsToTexture(a,s,i);else{t.colorCoordinates=null,t.colorTextureMap=null;var u=e.getLookupTable();u&&(u.build(),t.colorMapColors=u.mapScalars(a,t.colorMode,t.fieldDataTupleId))}t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(i)}},e.canUseTextureMapForColoring=function(e,n){return!(!n||t.colorMode===T9.DIRECT_SCALARS)||(!t.lookupTable||!t.lookupTable.getIndexedLookup())&&!!e&&(t.colorMode!==T9.DEFAULT||e.getDataType()!==On.UNSIGNED_CHAR)&&t.colorMode!==T9.DIRECT_SCALARS},t.mapScalarsToTexture=function(n,i,o){var a=t.lookupTable.getRange(),s=t.lookupTable.usingLogScale(),l=t.lookupTable.getAlpha(),u=s?[Math.log10(a[0]),Math.log10(a[1])]:a;if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==o){t.lookupTable.setAlpha(o),t.colorTextureMap=null,t.lookupTable.build();var c=t.lookupTable.getNumberOfAvailableColors();t.numberOfColorsInRange=Math.min(Math.max(c,2),i?0x1fffffffd:4094);var d=t.numberOfColorsInRange+3,f=t.numberOfColorsInRange+2,p=i?[Math.min(Math.ceil(d/1),2048),Math.min(Math.ceil(d/2048),2048),Math.min(Math.ceil(d/4194304),2048)]:[f,2,1],h=new Float64Array(p[0]*p[1]*p[2]);h.fill(NaN);for(var m=t.numberOfColorsInRange,g=m+2,v=[0,0,0],y=u[0],b=u[1]-u[0],x=0;x<g;++x){var w=v[0]+p[0]*(v[1]+p[1]*v[2]),A=y+b*(x-1)/(m-1),C=s?Math.pow(10,A):A;h[w]=C,function(e,t){var n=e[1]%2==0?1:-1;if(e[0]+=n,e[0]>=t[0]||e[0]<0){var i=e[2]%2==0?1:-1;e[0]-=n,e[1]+=i,(e[1]>=t[1]||e[1]<0)&&(e[1]-=i,e[2]++)}}(v,p)}var S=nH.newInstance({numberOfComponents:1,values:h}),_=t.lookupTable.mapScalars(S,t.colorMode,0);t.colorTextureMap=aP.newInstance(),t.colorTextureMap.setDimensions(p),t.colorTextureMap.getPointData().setScalars(_),t.lookupTable.setAlpha(l)}var T=t.lookupTable.getVectorMode()===Ot.MAGNITUDE&&n.getNumberOfComponents()>1?-1:t.lookupTable.getVectorComponent();t.colorCoordinates=function(e,t,n,i,o,a,s){for(var l=Array(arguments.length),u=0;u<arguments.length;++u){var c,d,f=arguments[u];l[u]=null!=(c=null==(d=f.getMTime)?void 0:d.call(f))?c:f}var p=l.join("/"),h=Oi.get(e);if(h&&h.stringHash===p)return h.textureCoordinates;var m=(n[1]-n[0])/(o-1),g=n[0]-m,v=n[1]+m,y=g-.5*m,b=1/(v-g+m),x=(o+1)/(v-g),w=e.getData(),A=e.getNumberOfTuples(),C=e.getNumberOfComponents(),S=t<0||t>=C,_=a[2]<=1?2:3,T=nH.newInstance({numberOfComponents:_,values:new Float32Array(A*_)}),O=T.getData(),P=[0,0,0];Or(P,o+2,a);for(var M=0,E=0,D=[.5,.5,.5],I=0;I<A;++I){var k=void 0;if(S){for(var N=0,R=0;R<C;++R){var B=Number(w[M+R]);N+=B*B}k=Math.sqrt(N)}else k=Number(w[M+t]);if(i&&(k=Math.log10(k)),M+=C,nO(k))D[0]=P[0],D[1]=P[1],D[2]=P[2];else if(s){var L=(k-g)*x;L<1?L=0:L>o&&(L=o+1),Or(D,L,a)}else{D[1]=.49;var F=(k-y)*b;D[0]=F>1e3?1e3:F<-1e3?-1e3:F}for(var V=0;V<_;++V)O[E++]=D[V]}return Oi.set(e,{stringHash:p,textureCoordinates:T}),T}(n,T,u,s,t.numberOfColorsInRange,t.colorTextureMap.getDimensions(),i)},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getPolys().getNumberOfCells()}}}var Os={newInstance:eE.newInstance(Oa,"vtkMapper2D"),extend:Oa},Ol={callback:null,useZValues:!1};function Ou(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ol,n),gd.extend(e,t,n),eE.setGet(e,t,["callback","useZValues"]),t.classHierarchy.push("vtkPixelSpaceCallbackMapper"),t.callback||(t.callback=function(){}),e.invokeCallback=function(e,n,i,o,a){if(t.callback){var s=n.getCompositeProjectionMatrix(i,-1,1);of(s,s);for(var l=e.getPoints(),u=new Float64Array(3),c=o.usize,d=o.vsize,f=c/2,p=d/2,h=[],m=0;m<l.getNumberOfPoints();m+=1){rO(u,l.getPoint(m),s);var g=[u[0]*f+f,u[1]*p+p,u[2],0];if(a){var v=4*(Math.floor(g[1])*c+Math.floor(g[0])),y=(a[v]/255*256+a[v+1]/255)/257;g[3]=2*y-1}h.push(g)}t.callback(h,n,i,a,[c,d])}}}var Oc={newInstance:eE.newInstance(Ou,"vtkPixelSpaceCallbackMapper"),extend:Ou},Od=Object.create(null);function Of(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Od[e]&&Od[e](t)}var Op={defaultViewAPI:"WebGL",renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function Oh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Op,n),eE.obj(e,t),eE.setGet(e,t,["interactor","numberOfLayers","_views","defaultViewAPI"]),eE.get(e,t,["neverRendered"]),eE.getArray(e,t,["renderers","childRenderWindows"]),eE.moveToProtected(e,t,["views"]),eE.event(e,t,"completion"),t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter(function(e){return e!==n}),e.modified()},e.hasRenderer=function(e){return -1!==t.renderers.indexOf(e)},e.newAPISpecificView=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Of(e||t.defaultViewAPI,n)},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t._views.push(n),e.modified())},e.removeView=function(n){t._views=t._views.filter(function(e){return e!==n}),e.modified()},e.hasView=function(e){return -1!==t._views.indexOf(e)},e.preRender=function(){t.renderers.forEach(function(e){e.isActiveCameraCreated()||e.resetCamera()})},e.render=function(){e.preRender(),t.interactor?t.interactor.render():t._views.forEach(function(e){return e.traverseAllPasses()})},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return t._views.forEach(function(t){t.getGraphicsMemoryInfo&&(e.gpuMemoryMB+=t.getGraphicsMemoryInfo()/1e6)}),t.renderers.forEach(function(n){var i=n.getViewProps(),o=t._views[0].getViewNodeFor(n);i.forEach(function(t){if(t.getVisibility()){e.propCount+=1;var n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){var i=o.getViewNodeFor(n);if(i){i.getAllocatedGPUMemoryInBytes&&(e.gpuMemoryMB+=i.getAllocatedGPUMemoryInBytes()/1e6);var a=n.getPrimitiveCount();Object.keys(a).forEach(function(t){e[t]||(e[t]=0),e[t]+=a[t]})}}}else e.invisiblePropCount+=1})}),e.str=Object.keys(e).map(function(t){return"".concat(t,": ").concat(e[t])}).join("\n"),e},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eE.setImmediate(e.render),t._views.map(function(e){return e.captureNextImage?e.captureNextImage(n,i):void 0}).filter(function(e){return!!e})},e.addRenderWindow=function(n){return!t.childRenderWindows.includes(n)&&(t.childRenderWindows.push(n),e.modified(),!0)},e.removeRenderWindow=function(n){var i=t.childRenderWindows.findIndex(function(e){return e===n});return!(i<0||(t.childRenderWindows.splice(i,1),e.modified(),0))}}var Om={newInstance:eE.newInstance(Oh,"vtkRenderWindow"),extend:Oh,registerViewConstructor:function(e,t){Od[e]=t},listViewAPIs:function(){return Object.keys(Od)},newAPISpecificView:Of},Og={Orientation:{HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"}};function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ob=aq.VectorMode,Ox=Og.Orientation;function Ow(e,t,n){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor;var i,o=null!=(i=t.fontSize)?i:n;e.font="".concat(t.fontStyle," ").concat(o,"px ").concat(t.fontFamily)}function OA(e,t){return function(e){var n=e.getLastSize(),i=Math.pow(n[0]/700,.8),o=Math.pow(n[1]/700,.8),a=Math.min(i,o),s=e.getAxisTextStyle(),l=e.getTickTextStyle();Object.assign(s,t.axisTextStyle),Object.assign(l,t.tickTextStyle),void 0===s.fontSize&&(s.fontSize=Math.max(24*a,12)),void 0===l.fontSize&&(e.getLastAspectRatio()>1?l.fontSize=Math.max(20*a,10):l.fontSize=Math.max(16*a,10));var u=e.updateTextureAtlas();e.setTopTitle(!1);var c=e.getBoxSizeByReference();if(t.orientation===Ox.VERTICAL||t.orientation!==Ox.HORIZONTAL&&e.getLastAspectRatio()>1)e.setTickLabelPixelOffset(.3*l.fontSize),u.titleWidth<=u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize?(e.setTopTitle(!0),e.setAxisTitlePixelOffset(.2*l.fontSize),c[0]=2*(u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize)/n[0],e.setBoxPosition([.98-c[0],-.92])):(e.setAxisTitlePixelOffset(.2*l.fontSize),c[0]=2*(u.titleHeight+e.getAxisTitlePixelOffset()+u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize)/n[0],e.setBoxPosition([.99-c[0],-.92])),c[1]=Math.max(1.2,Math.min(1.84/o,1.84));else{e.setAxisTitlePixelOffset(1.2*l.fontSize),e.setTickLabelPixelOffset(.1*l.fontSize);var d=2*(.8*l.fontSize+u.titleHeight+e.getAxisTitlePixelOffset())/n[1],f=2*u.tickWidth/n[0];c[0]=Math.min(1.9,Math.max(1.4,1.4*f*(e.getTicks().length+3))),c[1]=d,e.setBoxPosition([-.5*c[0],-.97])}e.recomputeBarSegments(u)}}function OC(e,t){return function(e){var t=e.getLastTickBounds(),n=Ti().domain([t[0],t[1]]),i=n.ticks(5),o=n.tickFormat(5);e.setTicks(i),e.setTickStrings(i.map(o))}}var OS=eE.newInstance(function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},o),eE.obj(e,t),eE.setGet(e,t,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),eE.get(e,t,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),eE.getArray(e,t,["boxPosition","boxSize"]),eE.setArray(e,t,["boxPosition","boxSize"],2),t.forceUpdate=!1,t.lastRebuildTime={},eE.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.barMapper=gd.newInstance(),t.barMapper.setInterpolateScalarsBeforeMapping(!0),t.barMapper.setUseLookupTableScalarRange(!0),t.polyData=lC.newInstance(),t.barMapper.setInputData(t.polyData),t.barActor=mH.newInstance(),t.barActor.setMapper(t.barMapper),t.tmPolyData=lC.newInstance(),t.tmMapper=gd.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=xQ.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),t.tmActor=mH.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.barPosition=[0,0],t.barSize=[0,0],t.boxPosition=[.88,-.92],t.boxSize=[.1,1.1],t.lastTickBounds=[],t.classHierarchy.push("vtkScalarBarActorHelper"),e.setRenderable=function(n){t.renderable!==n&&(t.renderable=n,t.barActor.setProperty(n.getProperty()),t.barActor.setParentProp(n),t.barActor.setCoordinateSystemToDisplay(),t.tmActor.setProperty(n.getProperty()),t.tmActor.setParentProp(n),t.tmActor.setCoordinateSystemToDisplay(),t.generateTicks=n.generateTicks,t.axisTextStyle=Oy({},n.getAxisTextStyle()),t.tickTextStyle=Oy({},n.getTickTextStyle()),e.modified())},e.updateAPISpecificData=function(n,i,o){t.lastSize[0]===n[0]&&t.lastSize[1]===n[1]||(t.lastSize[0]=n[0],t.lastSize[1]=n[1],t.lastAspectRatio=n[0]/n[1],t.forceUpdate=!0);var a=t.renderable.getScalarsToColors();if(a&&t.renderable.getVisibility()&&(t.barMapper.setLookupTable(a),t.camera=i,t.renderWindow=o,t.forceUpdate||Math.max(a.getMTime(),e.getMTime(),t.renderable.getMTime())>t.lastRebuildTime.getMTime())){if(t.lastTickBounds=m(a.getMappingRange()),t.renderable.getGenerateTicks()(e),t.renderable.getAutomated())t.renderable.getAutoLayout()(e);else{t.axisTextStyle=Oy({},t.renderable.getAxisTextStyle()),t.tickTextStyle=Oy({},t.renderable.getTickTextStyle()),t.barPosition=m(t.renderable.getBarPosition()),t.barSize=m(t.renderable.getBarSize()),t.boxPosition=m(t.renderable.getBoxPosition()),t.boxSize=m(t.renderable.getBoxSize()),t.axisTitlePixelOffset=t.renderable.getAxisTitlePixelOffset(),t.tickLabelPixelOffset=t.renderable.getTickLabelPixelOffset();var s=e.updateTextureAtlas();e.recomputeBarSegments(s)}e.updatePolyDataForLabels(),e.updatePolyDataForBarSegments(),t.lastRebuildTime.modified(),t.forceUpdate=!1}},e.updateTextureAtlas=function(){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left";var n={},i=new Map,o=0,a=1;Ow(t.tmContext,t.axisTextStyle,18);var s=t.tmContext.measureText(t.renderable.getAxisLabel()),l={height:s.actualBoundingBoxAscent+2,startingHeight:a,width:s.width+2,textStyle:t.axisTextStyle};i.set(t.renderable.getAxisLabel(),l),a+=l.height,o=l.width,n.titleWidth=l.width,n.titleHeight=l.height,n.tickWidth=0,n.tickHeight=0,Ow(t.tmContext,t.tickTextStyle,14);for(var u=[].concat(m(e.getTickStrings()),["NaN","Below","Above"]),c=0;c<u.length;c++)i.has(u[c])||(l={height:(s=t.tmContext.measureText(u[c])).actualBoundingBoxAscent+2,startingHeight:a,width:s.width+2,textStyle:t.tickTextStyle},i.set(u[c],l),a+=l.height,o<l.width&&(o=l.width),n.tickWidth<l.width&&(n.tickWidth=l.width),n.tickHeight<l.height&&(n.tickHeight=l.height));return o=e5(o),a=e5(a),i.forEach(function(e){e.tcoords=[0,(a-e.startingHeight-e.height)/a,e.width/o,(a-e.startingHeight-e.height)/a,e.width/o,(a-e.startingHeight)/a,0,(a-e.startingHeight)/a]}),t.tmCanvas.width=o,t.tmCanvas.height=a,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,o,a),i.forEach(function(e,n){var i=e.textStyle===t.axisTextStyle?18:14;Ow(t.tmContext,e.textStyle,i),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified(),t._tmAtlas=i,n},e.computeBarSize=function(e){t.vertical=t.boxSize[1]>t.boxSize[0];var n=2*e.tickHeight/t.lastSize[1],i=[1,1];if(t.vertical){var o=2*(e.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];if(t.topTitle){var a=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0]-o,t.barSize[1]=t.boxSize[1]-a}else{var s=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];t.barSize[0]=t.boxSize[0]-s-o,t.barSize[1]=t.boxSize[1]}t.barPosition[0]=t.boxPosition[0]+o,t.barPosition[1]=t.boxPosition[1],i[1]=n}else{var l=(2*e.tickWidth-8)/t.lastSize[0],u=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0],t.barPosition[0]=t.boxPosition[0],t.barSize[1]=t.boxSize[1]-u,t.barPosition[1]=t.boxPosition[1],i[0]=l}return i},e.recomputeBarSegments=function(n){var i,o,a,s,l=e.computeBarSize(n);t.barSegments=[];var u=[0,0],c=+!!t.vertical,d=t.vertical?.01:.02;function f(e,n){t.barSegments.push({corners:[[].concat(u),[u[0]+l[0],u[1]],[u[0]+l[0],u[1]+l[1]],[u[0],u[1]+l[1]]],scalars:n,title:e}),u[c]+=l[c]+d}t.renderable.getDrawNanAnnotation()&&t.renderable.getScalarsToColors().getNanColor()&&f("NaN",[NaN,NaN,NaN,NaN]),t.renderable.getDrawBelowRangeSwatch()&&null!=(i=(o=t.renderable.getScalarsToColors()).getUseBelowRangeColor)&&i.call(o)&&f("Below",[-.1,-.1,-.1,-.1]);var p=null==(a=(s=t.renderable.getScalarsToColors()).getUseAboveRangeColor)?void 0:a.call(s);u[c]+=d;var h=l[c];l[c]=p?1-2*d-l[c]-u[c]:1-d-u[c],f("ticks",t.vertical?[0,0,.995,.995]:[0,.995,.995,0]),t.renderable.getDrawAboveRangeSwatch()&&p&&(l[c]=h,u[c]+=d,f("Above",[1.1,1.1,1.1,1.1]))},n=new Float64Array(3),e.createPolyDataForOneLabel=function(e,i,o,a,s,l){var u=t._tmAtlas.get(e);if(u){var c=l.ptIdx,d=l.cellIdx;n[0]=(.5*i[0]+.5)*t.lastSize[0],n[1]=(.5*i[1]+.5)*t.lastSize[1],n[2]=i[2],n[0]+=s[0],n[1]+=s[1];var f=[],p="vertical"===a?[1,0]:[0,1];"vertical"===a?(f[0]=u.width,f[1]=-u.height,"middle"===o[0]?n[1]-=u.width/2:"right"===o[0]&&(n[1]-=u.width),"middle"===o[1]?n[0]+=u.height/2:"top"===o[1]&&(n[0]+=u.height)):(f[0]=u.width,f[1]=u.height,"middle"===o[0]?n[0]-=u.width/2:"right"===o[0]&&(n[0]-=u.width),"middle"===o[1]?n[1]-=u.height/2:"top"===o[1]&&(n[1]-=u.height)),l.points[3*c]=n[0],l.points[3*c+1]=n[1],l.points[3*c+2]=n[2],l.tcoords[2*c]=u.tcoords[0],l.tcoords[2*c+1]=u.tcoords[1],c++,n[p[0]]+=f[0],l.points[3*c]=n[0],l.points[3*c+1]=n[1],l.points[3*c+2]=n[2],l.tcoords[2*c]=u.tcoords[2],l.tcoords[2*c+1]=u.tcoords[3],c++,n[p[1]]+=f[1],l.points[3*c]=n[0],l.points[3*c+1]=n[1],l.points[3*c+2]=n[2],l.tcoords[2*c]=u.tcoords[4],l.tcoords[2*c+1]=u.tcoords[5],c++,n[p[0]]-=f[0],l.points[3*c]=n[0],l.points[3*c+1]=n[1],l.points[3*c+2]=n[2],l.tcoords[2*c]=u.tcoords[6],l.tcoords[2*c+1]=u.tcoords[7],c++,l.polys[4*d]=3,l.polys[4*d+1]=c-4,l.polys[4*d+2]=c-3,l.polys[4*d+3]=c-2,d++,l.polys[4*d]=3,l.polys[4*d+1]=c-4,l.polys[4*d+2]=c-2,l.polys[4*d+3]=c-1,l.ptIdx+=4,l.cellIdx+=2}},i=new Float64Array(3),e.updatePolyDataForLabels=function(){var n=e.getTickStrings().length+t.barSegments.length,o=4*n,a=new Float64Array(3*o),s=new Uint16Array(2*n*4),l=new Float32Array(2*o),u={ptIdx:0,cellIdx:0,polys:s,points:a,tcoords:l},c=+!t.vertical,d=+!!t.vertical;i[2]=-.99;var f=t.vertical?["right","middle"]:["middle","bottom"],p=[0,1],h=[0,0];t.vertical?(h[0]=-t.tickLabelPixelOffset,t.topTitle?(i[0]=t.boxPosition[0]+.5*t.boxSize[0],i[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),i,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],u)):(i[0]=t.barPosition[0]+t.barSize[0],i[1]=t.barPosition[1]+.5*t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),i,["middle","top"],"vertical",[t.axisTitlePixelOffset,0],u)),p=[-1,0]):(h[1]=t.tickLabelPixelOffset,i[0]=t.barPosition[0]+.5*t.barSize[0],i[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),i,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],u)),i[c]=t.barPosition[c]+(.5*p[c]+.5)*t.barSize[c],i[d]=t.barPosition[d]+.5*t.barSize[d];for(var m=null,g=0;g<t.barSegments.length;g++){var v=t.barSegments[g];"ticks"===v.title?m=v:(i[d]=t.barPosition[d]+.5*t.barSize[d]*(v.corners[2][d]+v.corners[0][d]),e.createPolyDataForOneLabel(v.title,i,f,"horizontal",h,u))}for(var y=t.barPosition[d]+t.barSize[d]*m.corners[0][d],b=t.barSize[d]*(m.corners[2][d]-m.corners[0][d]),x=e.getTicks(),w=e.getTickStrings(),A=e.getTickPositions(),C=0;C<x.length;C++){var S=A?A[C]:(x[C]-t.lastTickBounds[0])/(t.lastTickBounds[1]-t.lastTickBounds[0]);i[d]=y+b*S,e.createPolyDataForOneLabel(w[C],i,f,"horizontal",h,u)}var _=nH.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(_),t.tmPolyData.getPoints().setData(a,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(s,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updatePolyDataForBarSegments=function(){var e,n,o=t.renderable.getScalarsToColors(),a=0;t.renderable.getDrawNanAnnotation()&&o.getNanColor()&&(a+=1),t.renderable.getDrawBelowRangeSwatch()&&null!=(e=o.getUseBelowRangeColor)&&e.call(o)&&(a+=1),t.renderable.getDrawAboveRangeSwatch()&&null!=(n=o.getUseAboveRangeColor)&&n.call(o)&&(a+=1);var s=4*(1+a),l=1;o.getVectorMode()===Ob.COMPONENT&&(l=o.getVectorComponent()+1);for(var u=new Float64Array(3*s),c=new Uint16Array(5*s),d=new Float32Array(s*l),f=0,p=0,h=0;h<t.barSegments.length;h++){for(var m=t.barSegments[h],g=0;g<4;g++){i[0]=t.barPosition[0]+m.corners[g][0]*t.barSize[0],i[1]=t.barPosition[1]+m.corners[g][1]*t.barSize[1],u[3*f]=(.5*i[0]+.5)*t.lastSize[0],u[3*f+1]=(.5*i[1]+.5)*t.lastSize[1],u[3*f+2]=i[2];for(var v=0;v<l;v++)d[f*l+v]=t.lastTickBounds[0]+m.scalars[g]*(t.lastTickBounds[1]-t.lastTickBounds[0]);f++}c[5*p]=4,c[5*p+1]=f-4,c[5*p+2]=f-3,c[5*p+3]=f-2,c[5*p+4]=f-1,p++}var y=nH.newInstance({numberOfComponents:l,values:d,name:"Scalars"});t.polyData.getPointData().setScalars(y),t.polyData.getPoints().setData(u,3),t.polyData.getPoints().modified(),t.polyData.getPolys().setData(c,1),t.polyData.getPolys().modified(),t.polyData.modified()}},"vtkScalarBarActorHelper");function O_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oy({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,orientation:null},n)),t.autoLayout||(t.autoLayout=OA(0,t)),t.generateTicks||(t.generateTicks=OC()),mH.extend(e,t,n),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),eE.setGet(e,t,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch","orientation"]),eE.get(e,t,["axisTextStyle","tickTextStyle"]),eE.getArray(e,t,["barPosition","barSize","boxPosition","boxSize"]),eE.setArray(e,t,["barPosition","barSize","boxPosition","boxSize"],2),t.classHierarchy.push("vtkScalarBarActor"),e.setTickTextStyle=function(n){t.tickTextStyle=Oy(Oy({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=function(n){t.axisTextStyle=Oy(Oy({},t.axisTextStyle),n),e.modified()},e.setOrientationToHorizontal=function(){return e.setOrientation(Ox.HORIZONTAL)},e.setOrientationToVertical=function(){return e.setOrientation(Ox.VERTICAL)},e.resetAutoLayoutToDefault=function(){e.setAutoLayout(OA(0,t))},e.resetGenerateTicksToDefault=function(){e.setGenerateTicks(OC())}}var OT=Oy({newInstance:eE.newInstance(O_,"vtkScalarBarActor"),extend:O_,newScalarBarActorHelper:OS},Og),OO={format:"box"};function OP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OO,n),mH.extend(e,t,n),eE.setGet(e,t,["format"]),t.classHierarchy.push("vtkSkybox"),e.getIsOpaque=function(){return!0},e.hasTranslucentPolygonalGeometry=function(){return!1},e.getSupportsSelection=function(){return!1}}var OM={newInstance:eE.newInstance(OP,"vtkSkybox"),extend:OP},OE={scaleArray:null,radius:.05,scaleFactor:1};function OD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OE,n),gd.extend(e,t,n),eE.setGet(e,t,["radius","scaleArray","scaleFactor"]),t.classHierarchy.push("vtkSphereMapper")}var OI={newInstance:eE.newInstance(OD,"vtkSphereMapper"),extend:OD},Ok={scaleArray:null,orientationArray:null,radius:.025,length:.1};function ON(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ok,n),gd.extend(e,t,n),eE.setGet(e,t,["scaleArray","orientationArray","radius","length"]),t.classHierarchy.push("vtkStickMapper")}var OR={newInstance:eE.newInstance(ON,"vtkStickMapper"),extend:ON},OB={fontFamily:"Arial",fontColor:[0,0,0],fontStyle:"normal",fontSizeScale:function(e){return e/1.8},resolution:200};function OL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OB,n),SR.extend(e,t,n),eE.setGet(e,t,["fontFamily","fontStyle","fillStyle","fontSizeScale","resolution","shadowBlur"]),eE.setGetArray(e,t,["shadowOffset"],2),eE.setGetArray(e,t,["backgroundColor","fontColor","shadowColor"],3),t.classHierarchy.push("vtkTextProperty")}var OF={newInstance:eE.newInstance(OL,"vtkTextProperty"),extend:OL},OV={mapper:null,property:null};function Oj(e,t){var n,i,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OV,s),SF.extend(e,t,s),eE.setGet(e,t,["input"]),t.classHierarchy.push("vtkTextActor"),e.makeProperty=OF.newInstance,n=xQ.newInstance({resizable:!0}),i=new OffscreenCanvas(1,1),o=Os.newInstance(),a=po.newInstance({xResolution:1,yResolution:1}),o.setInputConnection(a.getOutputPort()),e.setMapper(o),e.addTexture(n),t._onInputChanged=function(t,o,s){var l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T,O=(l=e.getProperty().getFontSizeScale(),u=e.getProperty().getFontStyle(),c=e.getProperty().getFontFamily(),d=e.getProperty().getFontColor(),f=e.getProperty().getShadowColor(),p=e.getProperty().getShadowOffset(),h=e.getProperty().getShadowBlur(),m=e.getProperty().getResolution(),g=e.getProperty().getBackgroundColor(),v=Math.max(window.devicePixelRatio||1,1),y=i.getContext("2d"),b=l(m)*v,y.font="".concat(u," ").concat(b,'px "').concat(c,'"'),y.textBaseline="middle",y.textAlign="center",w=(x=y.measureText(s)).width/v,A=(x.actualBoundingBoxLeft-x.actualBoundingBoxRight)/2,S=b/v-(C=(x.actualBoundingBoxAscent-x.actualBoundingBoxDescent)/2),_=Math.max(Math.round(w*v),1),T=Math.max(Math.round(S*v),1),i.width=_,i.height=T,y.translate(0,T),y.scale(1,-1),y.clearRect(0,0,_,T),g&&(y.fillStyle=nI(g),y.fillRect(0,0,_,T)),y.imageSmoothingEnabled=!0,y.imageSmoothingQuality="high",y.font="".concat(u," ").concat(b,'px "').concat(c,'"'),y.fillStyle=nI(d),y.textBaseline="middle",y.textAlign="center",f&&(y.shadowColor=nI(f),y.shadowOffsetX=p[0],y.shadowOffsetY=p[1],y.shadowBlur=h),y.fillText(s,_/2+A,T/2+C),a.set({point1:[_,0,0],point2:[0,T,0]}),aE.canvasToImageData(i));n.setInputData(O,0)}}var OG={newInstance:eE.newInstance(Oj,"vtkTextActor"),extend:Oj};function OU(){var e=[],t=[0,0];return{curves:e,currentPoint:t,holes:[],moveTo:function(e,n){t[0]=e,t[1]=n},lineTo:function(n,i){var o=[].concat(t),a=[n,i];e.push({curveType:"LineCurve",start:o,end:a,getPointAt:function(e){return[o[0]+e*(a[0]-o[0]),o[1]+e*(a[1]-o[1])]},getPoints:function(e){for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}}),t[0]=n,t[1]=i},quadraticCurveTo:function(n,i,o,a){var s=[].concat(t),l=[o,a],u=[n,i];e.push({curveType:"QuadraticBezierCurve",cp:u,start:s,end:l,getPointAt:function(e){var t=1-e;return[t*t*s[0]+2*t*e*u[0]+e*e*l[0],t*t*s[1]+2*t*e*u[1]+e*e*l[1]]},getPoints:function(e){for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}}),t[0]=o,t[1]=a},bezierCurveTo:function(n,i,o,a,s,l){var u=[].concat(t),c=[s,l],d=[n,i],f=[o,a];e.push({curveType:"BezierCurve",cp1:d,cp2:f,start:u,end:c,getPointAt:function(e){var t=1-e;return[t*t*t*u[0]+3*t*t*e*d[0]+3*t*e*e*f[0]+e*e*e*c[0],t*t*t*u[1]+3*t*t*e*d[1]+3*t*e*e*f[1]+e*e*e*c[1]]},getPoints:function(e){for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}}),t[0]=s,t[1]=l},getPoints:function(t){for(var n,i=[],o=0;o<e.length;o++){var a=e[o],s=t;"EllipseCurve"===a.curveType?s=2*t:"LineCurve"===a.curveType&&(s=1);for(var l=a.getPoints(s),u=0;u<l.length;u++){var c=l[u];n&&tU(n,c)||(i.push(c),n=c)}}return i},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.holes.map(function(t){return t.getPoints(e)})}},isPointInside:function(e,t){for(var n=e[0],i=e[1],o=!1,a=0,s=t.length-1;a<t.length;s=a++){var l=t[a][0],u=t[a][1],c=t[s][0],d=t[s][1];u>i!=d>i&&n<(c-l)*(i-u)/(d-u)+l&&(o=!o)}return o},isIntersect:function(t){var n=this.getPoints(1,e,!1),i=t.getPoints(1);return this.isPointInside(i[0],n)}}}function Oz(e){var t=e.length,n=tU(e[t-1],e[0]);t>2&&n&&e.pop()}function OW(e,t,n){var i,o,a,s=e[0]-t[0],l=e[1]-t[1],u=n[0]-e[0],c=n[1]-e[1];if(Math.abs(s*c-l*u)>Number.EPSILON){var d=Math.hypot(s,l),f=Math.hypot(u,c),p=t[0]-l/d,h=t[1]+s/d,m=((n[0]-c/f-p)*c-(n[1]+u/f-h)*u)/(s*c-l*u),g=(i=p+s*m-e[0])*i+(o=h+l*m-e[1])*o;if(g<=2)return[i,o];a=Math.sqrt(g/2)}else s>0&&u>0||s<0&&u<0||Math.sign(l)===Math.sign(c)?(i=-l,o=s,a=Math.hypot(s,l)):(i=s,o=l,a=Math.sqrt((s*s+l*l)/2));return[i/a,o/a]}function OH(e,t,n){var i=[e[0],e[1]];return i[0]+=t[0]*n,i[1]+=t[1]*n,i}function Oq(e,t,n,i,o,a,s,l){[t,i,n].forEach(function(t){o.push(e[3*t],e[3*t+1],e[3*t+2])});var u,c,d,f=o.length/3;if((c=f-2,d=f-1,[[o[3*(u=f-3)],o[3*u+1]],[o[3*c],o[3*c+1]],[o[3*d],o[3*d+1]]]).forEach(function(e){a.push(e[0],e[1])}),s&&l)for(var p=0;p<3;++p)s.push(255*l[0],255*l[1],255*l[2])}function OK(e,t,n,i,o,a,s,l,u,c){for(var d=o+2*a,f=0;f<t.length;f++)for(var p=f,h=0===f?t.length-1:f-1,m=0;m<d;m++){var g=i*m,v=i*(m+1);!function(e,t,n,i,o,a,s,l,u){[t,o,n,n,o,i].forEach(function(t){return a.push(e[3*t],e[3*t+1],e[3*t+2])});var c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T=a.length/3,O=(d=T-3,f=T-2,p=T-1,h=a[3*(c=T-6)],m=a[3*c+1],g=a[3*c+2],v=a[3*d],y=a[3*d+1],b=a[3*d+2],x=a[3*f],w=a[3*f+1],A=a[3*f+2],C=a[3*p],S=a[3*p+1],_=a[3*p+2],Math.abs(m-y)<Math.abs(h-v)?[[h,1-g],[v,1-b],[x,1-A],[C,1-_]]:[[m,1-g],[y,1-b],[w,1-A],[S,1-_]]);if(s.push(O[0][0],O[0][1]),s.push(O[1][0],O[1][1]),s.push(O[3][0],O[3][1]),s.push(O[1][0],O[1][1]),s.push(O[2][0],O[2][1]),s.push(O[3][0],O[3][1]),l&&u)for(var P=0;P<6;++P)l.push(255*u[0],255*u[1],255*u[2])}(e,n+p+g,n+h+g,n+h+v,n+p+v,s,l,u,c)}}var OX=eE.vtkErrorMacro,OY=eE.vtkWarningMacro,OZ={shapes:[],verticesArray:[],uvArray:[],font:null,earcut:null,fontSize:10,depth:1,steps:1,bevelEnabled:!1,curveSegments:12,bevelThickness:.2,bevelSize:.1,bevelOffset:0,bevelSegments:1,text:null,perLetterFaceColors:null};function OJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OZ,n),eE.obj(e,t),eE.algo(e,t,0,1),eE.setGet(e,t,["fontSize","text","depth","steps","bevelEnabled","curveSegments","bevelThickness","bevelSize","bevelOffset","bevelSegments","perLetterFaceColors"]),eE.set(e,t,["font"]),t.classHierarchy.push("vtkVectorText"),e.requestData=function(e,n){var i;if(t.font)if(t.text){!function(){if(t.shapes=[],t.font&&t.text){var e=t.font.getPath(t.text,0,0,t.fontSize);if(e&&e.commands&&e.commands.length){for(var n,i=OU(),o=e.commands,a=0;a<o.length;a++){var s=o[a];switch(i=i||OU(),s.type){case"M":i.moveTo(s.x,-s.y),n=s;break;case"L":i.lineTo(s.x,-s.y);break;case"C":i.bezierCurveTo(s.x1,-s.y1,s.x2,-s.y2,s.x,-s.y);break;case"Q":i.quadraticCurveTo(s.x1,-s.y1,s.x,-s.y);break;case"Z":if(i.lineTo(n.x,-n.y),function(e){for(var t=0,n=e.length,i=n-1,o=0;o<n;i=o++)t+=e[i][0]*e[o][1]-e[o][0]*e[i][1];return .5*t<0}(i.getPoints(1)))t.shapes.push(i);else for(var l=0;l<t.shapes.length;l++){var u=t.shapes[l];if(u.isIntersect(i)){u.holes.push(i);break}}i=null;break;default:console.warn("Unknown path command: ".concat(s.type))}}i&&t.shapes.push(i)}}}();var o=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();!function(e){t.verticesArray=[],t.uvArray=[],t.colorArray=[];var n=nQ.newInstance(),i=e.getPointData(),o=function(e,t,n){for(var i=[1/0,1/0,t>0?0:t],o=[-1/0,-1/0,t<0?0:t],a=0;a<e.length;a++)for(var s=e[a].extractPoints(n),l=0;l<s.shape.length;l++){var u=s.shape[l];u[0]<i[0]&&(i[0]=u[0]),u[1]<i[1]&&(i[1]=u[1]),u[0]>o[0]&&(o[0]=u[0]),u[1]>o[1]&&(o[1]=u[1])}return{min:i,max:o}}(t.shapes,t.depth,t.curveSegments),a=[0,0,0];to(o.min,o.max,a);var s=0;t.shapes.forEach(function(e){var n=null;t.perLetterFaceColors&&(n=t.perLetterFaceColors(s)||[1,1,1]),function(e,n,i){var o=t.curveSegments,a=t.steps,s=t.depth,l=t.bevelEnabled,u=t.bevelThickness,c=u-.1,d=t.bevelOffset,f=t.bevelSegments;l||(f=0,u=0,c=0,d=0);var p=e.extractPoints(o),h=p.shape,g=p.holes;if(h.forEach(function(e){e[0]+=n[0],e[1]+=n[1]}),g.forEach(function(e){e.forEach(function(e){e[0]+=n[0],e[1]+=n[1]})}),h.length<3)OY("Not enough points to create a shape");else{for(var v=function(e,t,n){var i=[],o=[],a=[];Oz(t);for(var s=0;s<t.length;s++)o.push(t[s][0],t[s][1]);var l=t.length;n.forEach(Oz);for(var u=0;u<n.length;u++){a.push(l);var c=n[u];l+=c.length;for(var d=0;d<c.length;d++)o.push(c[d][0],c[d][1])}for(var f=e(o,a),p=0;p<f.length;p+=3)i.push(f.slice(p,p+3));return i}(t.earcut,h,g),y=h,x=(h=[].concat(m(h),m(g.flat()))).length,w=[],A=0,C=y.length-1,S=A+1;A<y.length;A++,C++,S++)C===y.length&&(C=0),S===y.length&&(S=0),w[A]=OW(y[A],y[C],y[S]);for(var _,T=[],O=[].concat(w),P=0,M=g.length;P<M;P++){var E=g[P];_=[];for(var D=0,I=E.length-1,k=D+1;D<E.length;D++,I++,k++)I===E.length&&(I=0),k===E.length&&(k=0),_[D]=OW(E[D],E[I],E[k]);T.push(_),O=[].concat(m(O),m(_))}for(var N=[],R=0;R<f;R++){for(var B=R/f,L=u*Math.cos(B*Math.PI/2),F=c*Math.sin(B*Math.PI/2)+d,V=0;V<y.length;V++){var j=OH(y[V],w[V],F);N.push(j[0],j[1],-L+n[2])}for(var G=0,U=g.length;G<U;G++){var z=g[G];_=T[G];for(var W=0;W<z.length;W++){var H=OH(z[W],_[W],F);N.push(H[0],H[1],-L+n[2])}}}for(var q=c+d,K=0;K<x;K++){var X=l?OH(h[K],O[K],q):h[K];N.push(X[0],X[1],0+n[2])}for(var Y=1;Y<=a;Y++)for(var Z=0;Z<x;Z++){var J=l?OH(h[Z],O[Z],q):h[Z];N.push(J[0],J[1],s/a*Y+n[2])}for(var Q=f-1;Q>=0;Q--){for(var $=Q/f,ee=u*Math.cos($*Math.PI/2),et=c*Math.sin($*Math.PI/2)+d,en=0,er=y.length;en<er;en++){var ei=OH(y[en],w[en],et);N.push(ei[0],ei[1],s+ee+n[2])}for(var eo=0,ea=g.length;eo<ea;eo++){var es=g[eo];_=T[eo];for(var el=0,eu=es.length;el<eu;el++){var ec=OH(es[el],_[el],et);N.push(ec[0],ec[1],s+ee+n[2])}}}!function(e,t,n,i,o,a,s,l,u,c){if(o){var d=0*n;t.forEach(function(t){var n=b(t,3),i=n[0],o=n[1];Oq(e,n[2]+d,o+d,i+d,s,l,u,c)}),d=n*(i+2*a),t.forEach(function(t){var n=b(t,3),i=n[0],o=n[1],a=n[2];Oq(e,i+d,o+d,a+d,s,l,u,c)})}else{t.forEach(function(t){var n=b(t,3),i=n[0],o=n[1];Oq(e,n[2],o,i,s,l,u,c)});var f=n*i;t.forEach(function(t){var n=b(t,3);Oq(e,n[0]+f,n[1]+f,n[2]+f,s,l,u,c)})}}(N,v,x,a,l,f,t.verticesArray,t.uvArray,t.colorArray,i),function(e,t,n,i,o,a,s,l,u,c){var d=0;OK(e,t,0,i,o,a,s,l,u,c),d+=t.length;for(var f=0;f<n.length;f++){var p=n[f];OK(e,p,d,i,o,a,s,l,u,c),d+=p.length}}(N,y,g,x,a,f,t.verticesArray,t.uvArray,t.colorArray,i)}}(e,a,n),s++});for(var l=t.verticesArray.length/3,u=[],c=0;c<l;c+=3)u.push(c,c+2,c+1);var d=u.length;n.resize(d+d/3);for(var f=0;f<u.length;f+=3)n.insertNextCell([u[f],u[f+1],u[f+2]]);e.setPolys(n),e.getPoints().setData(Float32Array.from(t.verticesArray),3);var p=nH.newInstance({numberOfComponents:2,values:Float32Array.from(t.uvArray),name:"TEXCOORD_0"});if(i.addArray(p),i.setActiveTCoords(p.getName()),t.colorArray&&t.colorArray.length){var h=nH.newInstance({numberOfComponents:3,values:Uint8Array.from(t.colorArray),name:"Colors"});i.addArray(h),i.setActiveScalars(h.getName())}}(o),n[0]=o}else OX("Text not set. Cannot generate vector text.");else OX("Font object not set, make sure the TTF file is parsed using opentype.js.")}}var OQ={newInstance:eE.newInstance(OJ,"vtkVectorText"),extend:OJ};function O$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var O0={vtkAbstractMapper:mK,vtkAbstractMapper3D:mY,vtkAbstractPicker:gh,vtkActor:mH,vtkActor2D:SF,vtkAnnotatedCubeActor:SK,vtkAxesActor:S0,vtkCamera:yM,vtkCellPicker:S8,vtkColorTransferFunction:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O$(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({vtkColorMaps:Sx},xO),vtkCoordinate:SP,vtkCubeAxesActor:TC,vtkFollower:TO,vtkGlyph3DMapper:TB,vtkHardwareSelector:TV,vtkImageMapper:TY,vtkImageProperty:T0,vtkImageResliceMapper:T4,vtkImageSlice:T8,vtkInteractorObserver:hK,vtkInteractorStyle:h1,vtkLight:yI,vtkMapper:gd,vtkMapper2D:Os,vtkPicker:gx,vtkPixelSpaceCallbackMapper:Oc,vtkPointPicker:gS,vtkProp:mP,vtkProp3D:mD,vtkProperty:mG,vtkProperty2D:SR,vtkRenderer:yj,vtkRenderWindow:Om,vtkRenderWindowInteractor:hj,vtkScalarBarActor:OT,vtkSkybox:OM,vtkSphereMapper:OI,vtkStickMapper:OR,vtkTexture:xQ,vtkTextActor:OG,vtkTextProperty:OF,vtkVector:OQ,vtkViewport:yB,vtkVolume:xz,vtkVolumeMapper:wn,vtkVolumeProperty:xj},O1=eE.vtkErrorMacro,O2={canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",useOffScreen:!1,useBackgroundImage:!1};function O3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,O2,n),t.canvas||(t.canvas=document.createElement("canvas"),t.canvas.style.width="100%"),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",eE.obj(e,t,n),eE.get(e,t,["useBackgroundImage","_renderable"]),eE.setGet(e,t,["canvas","cursor","useOffScreen","interactor"]),eE.setGetArray(e,t,["size"],2),eE.getArray(e,t,["_renderers"]),eE.moveToProtected(e,t,["renderable","renderers"]),t.classHierarchy.push("vtkCanvasView"),e.onModified(function(){t._renderable&&(t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1])),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none")}),e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&O1("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage),e.modified())},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&t.el&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(function(t){return e.setBackgroundImage(t.image)}),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.delete=eE.chain(e.setViewStream,e.delete),t._renderable=e,t._renderers=[e],e.traverseAllPasses=function(){},e.isInViewport=function(){return!0},e.getInteractive=function(){return!0}}var O4={newInstance:eE.newInstance(O3,"vtkCanvasView"),extend:O3},O5={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},O6={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},O8={Wrap:O5,Filter:O6},O9=eE.vtkErrorMacro,O7={renderable:null,myFactory:null,children:[],visited:!1};function Pe(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,O7,i),eE.obj(e,t),eE.event(e,t,"event"),t._renderableChildMap=new Map,eE.get(e,t,["visited"]),eE.setGet(e,t,["_parent","renderable","myFactory"]),eE.getArray(e,t,["children"]),eE.moveToProtected(e,t,["parent"]),t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(n){var i=e[n.getTraverseOperation()];if(i)i(n);else{e.apply(n,!0);for(var o=0;o<t.children.length;o++)t.children[o].traverse(n);e.apply(n,!1)}},e.apply=function(t,n){var i=e[t.getOperation()];i&&i(n,t)},e.getViewNodeFor=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i&&i.renderable===n)return i;if(t.renderable===n)return e;for(var o=0;o<t.children.length;++o){var a=t.children[o].getViewNodeFor(n);if(a)return a}},e.getFirstAncestorOfType=function(e){return t._parent?t._parent.isA(e)?t._parent:t._parent.getFirstAncestorOfType(e):null},e.getLastAncestorOfType=function(e){return t._parent?t._parent.getLastAncestorOfType(e)||(t._parent.isA(e)?t._parent:null):null},e.addMissingNode=function(n){if(n){var i=t._renderableChildMap.get(n);if(void 0!==i)return i.setVisited(!0),i;var o=e.createViewNode(n);return o?(o.setParent(e),o.setVisited(!0),t._renderableChildMap.set(n,o),t.children.push(o),o):void 0}},e.addMissingNodes=function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&n.length)for(var o,a=0;a<n.length;++a){var s=n[a],l=e.addMissingNode(s);i&&void 0!==l&&(void 0===o?o=t.children.lastIndexOf(l):t.children[o]!==l&&function(e,n){for(var i=0;i<t.children.length;++i){var o=(n+1+i)%t.children.length;if(t.children[o]===e)return t.children[o]=t.children[n],t.children[n]=e,!0}}(t.children,l),o++)}},e.addMissingChildren=function(n){if(n&&n.length)for(var i=0;i<n.length;++i){var o=n[i];if(-1===t.children.indexOf(o)){o.setParent(e),t.children.push(o);var a=o.getRenderable();a&&t._renderableChildMap.set(a,o)}o.setVisited(!0)}},e.removeNode=function(e){var n=t.children.findIndex(function(t){return t===e});if(n<0)return!1;var i=e.getRenderable();return i&&t._renderableChildMap.delete(i),e.delete(),t.children.splice(n,1),!0},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=0,n=0;n<t.children.length;++n){var i=t.children[n];if(i.getVisited())t.children[e++]=i,i.setVisited(!1);else{var o=i.getRenderable();o&&t._renderableChildMap.delete(o),i.delete()}}t.children.length=e},e.createViewNode=function(e){if(!t.myFactory)return O9("Cannot create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n},n=e.delete,e.delete=function(){for(var e=0;e<t.children.length;e++)t.children[e].delete();n()}}var Pt={newInstance:eE.newInstance(Pe,"vtkViewNode"),extend:Pe,PASS_TYPES:["Build","Render"]},Pn={};function Pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pn,n),eE.obj(e,t),t.overrides||(t.overrides={}),t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(n.isDeleted())return null;for(var i=0,o=n.getClassName(i++),a=!1,s=Object.keys(t.overrides);o&&!a;)-1!==s.indexOf(o)?a=!0:o=n.getClassName(i++);if(!a)return null;var l=t.overrides[o]();return l.setMyFactory(e),l}}var Pi={newInstance:eE.newInstance(Pr,"vtkViewNodeFactory"),extend:Pr},Po=Object.create(null),Pa={};function Ps(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pa,n),t.overrides=Po,Pi.extend(e,t,n),t.classHierarchy.push("vtkOpenGLViewNodeFactory")}var Pl,Pu={newInstance:eE.newInstance(Ps,"vtkOpenGLViewNodeFactory"),extend:Ps};function Pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Pd=O8.Wrap,Pf=O8.Filter,Pp=nH.VtkDataTypes,Ph=n3.toHalf,Pm={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Pd.CLAMP_TO_EDGE,wrapT:Pd.CLAMP_TO_EDGE,wrapR:Pd.CLAMP_TO_EDGE,minificationFilter:Pf.NEAREST,magnificationFilter:Pf.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pm,n),Pt.extend(e,t,n),t.sendParametersTime={},es(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},es(t.textureBuildTime,{mtime:0}),ef(e,t,["format","openGLDataType"]),ep(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),eu(e,t,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),ev(0,t,["openGLRenderWindow"]),function(e,t){function n(){return{internalFormat:t.internalFormat,format:t.format,openGLDataType:t.openGLDataType,width:t.width,height:t.height}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t._openGLRenderWindow=n:(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),t.context=t._openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(Pf.LINEAR),e.setMagnificationFilter(Pf.LINEAR)):(e.setMinificationFilter(Pf.NEAREST),e.setMagnificationFilter(Pf.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(Pd.REPEAT),e.setWrapS(Pd.REPEAT),e.setWrapT(Pd.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){if(null!==t.renderable.getImageBitmap()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR)),t.renderable.getImageBitmap()&&t.renderable.getImageLoaded()&&(e.create2DFromImageBitmap(t.renderable.getImageBitmap()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getCanvas()){t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR));var i=t.renderable.getCanvas();e.create2DFromRaw({width:i.width,height:i.height,numComps:4,dataType:Pp.UNSIGNED_CHAR,data:i,flip:!0}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}if(null!==t.renderable.getJsImageData()){var o=t.renderable.getJsImageData();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw({width:o.width,height:o.height,numComps:4,dataType:Pp.UNSIGNED_CHAR,data:o.data,flip:!0}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}var a=t.renderable.getInputData(0);if(a&&a.getPointData().getScalars()){for(var s=a.getExtent(),l=a.getPointData().getScalars(),u=[],c=0;c<t.renderable.getNumberOfInputPorts();++c){var d=t.renderable.getInputData(c),f=d?d.getPointData().getScalars().getData():null;f&&u.push(f)}t.renderable.getInterpolate()&&4===l.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(Pf.LINEAR_MIPMAP_LINEAR)),u.length%6==0?e.createCubeFromRaw({width:s[1]-s[0]+1,height:s[3]-s[2]+1,numComps:l.getNumberOfComponents(),dataType:l.getDataType(),data:u}):e.create2DFromRaw({width:s[1]-s[0]+1,height:s[3]-s[2]+1,numComps:l.getNumberOfComponents(),dataType:l.getDataType(),data:l.getData()}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()};var i=function(){if(t.minificationFilter!==Pf.LINEAR&&t.magnificationFilter!==Pf.LINEAR||(void 0===Pl&&(Pl=function(){try{var e=new Int16Array([0,32767]),t=document.createElement("canvas");t.width=4,t.height=4;var n=t.getContext("webgl2");if(!n)return!1;var i=n.getExtension("EXT_texture_norm16");if(!i)return!1;var o=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(o,"#version 300 es\n    void main() {\n      gl_PointSize = ".concat("4.0",";\n      gl_Position = vec4(0, 0, 0, 1);\n    }\n  ")),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))return!1;var a=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(a,"#version 300 es\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n\n    uniform sampler2D u_image;\n\n    out vec4 color;\n\n    void main() {\n        vec4 intColor = texture(u_image, gl_PointCoord.xy);\n        color = vec4(vec3(intColor.rrr), 1);\n    }\n    "),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS))return!1;var s=n.createProgram();if(n.attachShader(s,o),n.attachShader(s,a),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS))return!1;var l=n.createTexture();n.bindTexture(n.TEXTURE_2D,l),n.texImage2D(n.TEXTURE_2D,0,i.R16_SNORM_EXT,2,1,0,n.RED,n.SHORT,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.useProgram(s),n.drawArrays(n.POINTS,0,1);var u=new Uint8Array(4);n.readPixels(1,1,1,1,n.RGBA,n.UNSIGNED_BYTE,u);var c=b(u,3),d=c[0],f=c[1],p=c[2],h=n.getExtension("WEBGL_lose_context");return h&&h.loseContext(),d===f&&f===p&&0!==d}catch(e){return!1}}()),Pl))return t.oglNorm16Ext};function o(e){var t=b(e,6),n=t[0],i=t[1],o=t[2],a=t[3],s=t[4];return[i-n+1,a-o+1,t[5]-s+1]}function a(e){var t=b(o(e),3);return t[0]*t[1]*t[2]}function s(e,n){var i=new((arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e.constructor)(n.reduce(function(e,t){return e+a(t)},0)),o=[t.width,t.height,t.depth],s=0;return n.forEach(function(t){!function(e,t,n,i,o){for(var a=b(n,6),s=a[0],l=a[1],u=a[2],c=a[3],d=a[4],f=a[5],p=b(t,2),h=p[0],m=h*p[1],g=o,v=d;v<=f;v++)for(var y=v*m,x=u;x<=c;x++)for(var w=y+x*h,A=w+s,C=w+l;A<=C;A++,g++)i[g]=e[A]}(e,o,t,i,s),s+=a(t)}),i}function l(e){if(t._openGLRenderWindow.getWebgl2())return e;var n=[],i=t.width,o=t.height,a=t.components;if(e&&(!e6(i)||!e6(o)))for(var s=t.context.getExtension("OES_texture_half_float"),l=e5(i),u=e5(o),c=l*u*t.components,d=0;d<e.length;d++)if(null!==e[d]){var f=null,p=o/u,h=i/l,m=!1;t.openGLDataType===t.context.FLOAT?f=new Float32Array(c):s&&t.openGLDataType===s.HALF_FLOAT_OES?(f=new Uint16Array(c),m=!0):f=new Uint8Array(c);for(var g=0;g<u;g++){var v=g*l*a,y=g*p,b=Math.floor(y),x=Math.ceil(y);x>=o&&(x=o-1);var w=y-b,A=1-w;b=b*i*a,x=x*i*a;for(var C=0;C<l;C++){var S=C*a,_=C*h,T=Math.floor(_),O=Math.ceil(_);O>=i&&(O=i-1);var P=_-T;T*=a,O*=a;for(var M=0;M<a;M++)f[v+S+M]=m?n3.toHalf(n3.fromHalf(e[d][b+T+M])*A*(1-P)+n3.fromHalf(e[d][b+O+M])*A*P+n3.fromHalf(e[d][x+T+M])*w*(1-P)+n3.fromHalf(e[d][x+O+M])*w*P):e[d][b+T+M]*A*(1-P)+e[d][b+O+M]*A*P+e[d][x+T+M]*w*(1-P)+e[d][x+O+M]*w*P}}n.push(f),t.width=l,t.height=u}else n.push(null);if(0===n.length)for(var E=0;E<e.length;E++)n.push(e[E]);return n}function u(e){var n;return!!t._openGLRenderWindow&&!(t.resizable||null!=(n=t.renderable)&&n.getResizable())&&!!t._openGLRenderWindow.getWebgl2()&&(!(t._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&i())||e!==Pp.UNSIGNED_SHORT&&e!==Pp.SHORT)}function c(n,i){for(var o=n.getNumberOfComponents(),a=n.getDataType(),s=n.getData(),l=Array(o),u=Array(o),c=0;c<o;++c){var d=b(n.getRange(c),2),f=d[0],p=d[1];l[c]=f,u[c]=p}var h=function(e,t,n){for(var i=Array(n),o=Array(n),a=0;a<n;++a)i[a]=e[a],o[a]=t[a]-e[a]||1;return{scale:o,offset:i}}(l,u,o);return function(n,i,o,a){e.getOpenGLDataType(n);var s=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=t[n]+i;if(i<-2048||i>2048||o<-2048||o>2048)return!1}return!0}(i,o)||a,l=!1;if(t._openGLRenderWindow.getWebgl2())l=t.openGLDataType===t.context.FLOAT&&null===t.context.getExtension("OES_texture_float_linear")&&s||t.openGLDataType===t.context.HALF_FLOAT;else{var u=t.context.getExtension("OES_texture_half_float");l=u&&t.openGLDataType===u.HALF_FLOAT_OES}t.canUseHalfFloat=l&&s}(a,h.offset,h.scale,i),e.useHalfFloat()||e.getOpenGLDataType(a,!0),{numComps:o,dataType:a,data:s,scaleOffsets:h}}e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t._prevTexParams=null,t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t._openGLRenderWindow?t._openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t._openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t._openGLRenderWindow&&t._openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t._prevTexParams=null,t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0,t.allocatedGPUMemoryInBytes=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;t.target===t.context.TEXTURE_2D?n=t.context.TEXTURE_BINDING_2D:J("impossible case"),e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t._openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,i){return t._forceInternalFormat||(t.internalFormat=e.getDefaultInternalFormat(n,i)),t.internalFormat||Y("Unable to find suitable internal format for T=".concat(n," NC= ").concat(i)),[t.context.R32F,t.context.RG32F,t.context.RGB32F,t.context.RGBA32F].includes(t.internalFormat)&&!t.context.getExtension("OES_texture_float_linear")&&J("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),t.internalFormat},e.getDefaultInternalFormat=function(n,o){var a;return(a=t._openGLRenderWindow.getDefaultTextureInternalFormat(n,o,i(),e.useHalfFloat()))||a||(Y("Unsupported internal texture type!"),Y("Unable to find suitable internal format for T=".concat(n," NC= ").concat(o))),a},e.useHalfFloat=function(){return t.enableUseHalfFloat&&t.canUseHalfFloat},e.setInternalFormat=function(n){t._forceInternalFormat=!0,n!==t.internalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,i){return t.format=e.getDefaultFormat(n,i),t.format},e.getDefaultFormat=function(e,n){if(t._openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}},e.resetFormatAndType=function(){t._prevTexParams=null,t.format=0,t.internalFormat=0,t._forceInternalFormat=!1,t.openGLDataType=0},e.getDefaultDataType=function(n){var o=e.useHalfFloat();if(t._openGLRenderWindow.getWebgl2())switch(n){case Pp.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case i()&&!o&&Pp.SHORT:return t.context.SHORT;case i()&&!o&&Pp.UNSIGNED_SHORT:return t.context.UNSIGNED_SHORT;case o&&Pp.SHORT:case o&&Pp.UNSIGNED_SHORT:return t.context.HALF_FLOAT;case Pp.FLOAT:case Pp.VOID:default:return t.context.FLOAT}switch(n){case Pp.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Pp.FLOAT:case Pp.VOID:default:if(t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))return t.context.FLOAT;var a=t.context.getExtension("OES_texture_half_float");return a&&t.context.getExtension("OES_texture_half_float_linear")?a.HALF_FLOAT_OES:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.openGLDataType&&!i||(t.openGLDataType=e.getDefaultDataType(n)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:e=(n=127.5)-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:e=(n=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:e=(n=2147483647.5)-0x80000000;break;case t.context.UNSIGNED_INT:n=0xffffffff,e=0;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case Pf.NEAREST:return t.context.NEAREST;case Pf.LINEAR:return t.context.LINEAR;case Pf.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case Pf.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case Pf.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case Pf.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case Pd.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case Pd.REPEAT:return t.context.REPEAT;case Pd.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.updateArrayDataTypeForGL=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[],l=t.width*t.height*t.components;i&&(l*=t.depth);var u=!!o.length;if(e!==Pp.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var c=0;c<n.length;c++)if(n[c])if(u)a.push(s(n[c],o,Float32Array));else{var d=n[c].length>l?n[c].subarray(0,l):n[c];a.push(new Float32Array(d))}else a.push(null);if(e!==Pp.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var f=0;f<n.length;f++)if(n[f])if(u)a.push(s(n[f],o,Uint8Array));else{var p=n[f].length>l?n[f].subarray(0,l):n[f];a.push(new Uint8Array(p))}else a.push(null);var h=!1;if(t._openGLRenderWindow.getWebgl2())h=t.openGLDataType===t.context.HALF_FLOAT;else{var m=t.context.getExtension("OES_texture_half_float");h=m&&t.openGLDataType===m.HALF_FLOAT_OES}if(h)for(var g=0;g<n.length;g++)if(n[g]){for(var v=u?s(n[g],o):n[g],y=new Uint16Array(u?v.length:l),b=y.length,x=0;x<b;x++)y[x]=Ph(v[x]);a.push(y)}else a.push(null);if(0===a.length)for(var w=0;w<n.length;w++)a.push(u&&n[w]?s(n[w],o):n[w]);return a},e.create2DFromRaw=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.width,a=void 0===o?W("width"):o,s=n.height,c=void 0===s?W("height"):s,d=n.numComps,f=void 0===d?W("numComps"):d,p=n.dataType,h=void 0===p?W("dataType"):p,m=n.data,g=void 0===m?W("data"):m,v=n.flip,y=void 0!==v&&v;if(e.getOpenGLDataType(h,!0),e.getInternalFormat(h,f),e.getFormat(h,f),!t.internalFormat||!t.format||!t.openGLDataType)return Z("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=f,t.width=a,t.height=c,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var b=l(e.updateArrayDataTypeForGL(h,[g]));return t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,y),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),u(h)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=b[0]&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,b[0])):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,b[0]),t.generateMipmap&&t.context.generateMipmap(t.target),y&&t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,!1),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*f*t._openGLRenderWindow.getDefaultTextureByteSize(h,i(),e.useHalfFloat()),e.deactivate(),!0},e.createCubeFromRaw=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.width,a=void 0===o?W("width"):o,s=n.height,c=void 0===s?W("height"):s,d=n.numComps,f=void 0===d?W("numComps"):d,p=n.dataType,h=void 0===p?W("dataType"):p,m=n.data,g=void 0===m?W("data"):m;if(e.getOpenGLDataType(h),e.getInternalFormat(h,f),e.getFormat(h,f),!t.internalFormat||!t.format||!t.openGLDataType)return Z("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=f,t.width=a,t.height=c,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),t.maxLevel=g.length/6-1,e.createTexture(),e.bind();for(var v=l(e.updateArrayDataTypeForGL(h,g)),y=[],b=t.width,x=t.height,w=0;w<v.length;w++){w%6==0&&0!==w&&(b/=2,x/=2),y[w]=ee(h,x*b*t.components);for(var A=0;A<x;++A){var C=A*b*t.components,S=(x-A-1)*b*t.components;y[w].set(v[w].slice(S,S+b*t.components),C)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),u(h)&&t.context.texStorage2D(t.target,6,t.internalFormat,t.width,t.height);for(var _=0;_<6;_++)for(var T=0,O=t.width,P=t.height;O>=1&&P>=1;){var M=null;T<=t.maxLevel&&(M=y[6*T+_]),u(h)?null!=M&&t.context.texSubImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,T,0,0,O,P,t.format,t.openGLDataType,M):t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,T,t.internalFormat,O,P,0,t.format,t.openGLDataType,M),T++,O/=2,P/=2}return t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*f*t._openGLRenderWindow.getDefaultTextureByteSize(h,i(),e.useHalfFloat()),e.deactivate(),!0},e.createDepthFromRaw=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.width,a=void 0===o?W("width"):o,s=n.height,l=void 0===s?W("height"):s,c=n.dataType,d=void 0===c?W("dataType"):c,f=n.data,p=void 0===f?W("data"):f;return e.getOpenGLDataType(d),t.format=t.context.DEPTH_COMPONENT,t._openGLRenderWindow.getWebgl2()?d===Pp.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=a,t.height=l,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),u(d)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=p&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,p)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,p),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(d,i(),e.useHalfFloat()),e.deactivate(),!0):(Z("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(n){if(e.getOpenGLDataType(Pp.UNSIGNED_CHAR),e.getInternalFormat(Pp.UNSIGNED_CHAR,4),e.getFormat(Pp.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return Z("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var o=!(t._openGLRenderWindow.getWebgl2()||e6(n.width)&&e6(n.height)),a=n,s=n.width,l=n.height,c=!0,d=window.chrome;if(o||d){var f=new OffscreenCanvas(e5(n.width),e5(n.height));s=f.width,l=f.height;var p=f.getContext("2d");p.translate(0,f.height),p.scale(1,-1),p.drawImage(n,0,0,n.width,n.height,0,0,f.width,f.height),a=f,c=!1}return t.width=s,t.height=l,t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,c),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),u(Pp.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,a)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,a),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(Pp.UNSIGNED_CHAR,i(),e.useHalfFloat()),e.deactivate(),!0},e.create2DFromImageBitmap=function(n){return e.getOpenGLDataType(Pp.UNSIGNED_CHAR),e.getInternalFormat(Pp.UNSIGNED_CHAR,4),e.getFormat(Pp.UNSIGNED_CHAR,4),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.width=n.width,t.height=n.height,u(Pp.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,n)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,n),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(Pp.UNSIGNED_CHAR,i(),e.useHalfFloat()),e.deactivate(),!0):(Z("Failed to determine texture parameters."),!1)},e.create2DFilterableFromRaw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=void 0===n?W("width"):n,o=t.height,a=void 0===o?W("height"):o,s=t.numComps,l=void 0===s?W("numComps"):s,u=t.dataType,c=void 0===u?W("dataType"):u,d=t.data,f=void 0===d?W("data"):d,p=t.preferSizeOverAccuracy,h=t.ranges;return e.create2DFilterableFromDataArray({width:i,height:a,dataArray:nH.newInstance({numberOfComponents:l,dataType:c,values:f,ranges:void 0===h?void 0:h}),preferSizeOverAccuracy:void 0!==p&&p})},e.create2DFilterableFromDataArray=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=void 0===n?W("width"):n,o=t.height,a=void 0===o?W("height"):o,s=t.dataArray,l=void 0===s?W("dataArray"):s,u=t.preferSizeOverAccuracy,d=c(l,void 0!==u&&u),f=d.numComps,p=d.dataType,h=d.data;e.create2DFromRaw({width:i,height:a,numComps:f,dataType:p,data:h})},e.updateVolumeInfoForGL=function(n,o){var a,s,l=!1,u=e.useHalfFloat();null!=(a=t.volumeInfo)&&a.scale&&null!=(s=t.volumeInfo)&&s.offset||(t.volumeInfo={scale:Array(o),offset:Array(o)});for(var c=0;c<o;++c)t.volumeInfo.scale[c]=1,t.volumeInfo.offset[c]=0;if(i()&&!u&&n===Pp.SHORT){for(var d=0;d<o;++d)t.volumeInfo.scale[d]=32767;l=!0}if(i()&&!u&&n===Pp.UNSIGNED_SHORT){for(var f=0;f<o;++f)t.volumeInfo.scale[f]=65535;l=!0}if(n===Pp.UNSIGNED_CHAR){for(var p=0;p<o;++p)t.volumeInfo.scale[p]=255;l=!0}return(n===Pp.FLOAT||u&&(n===Pp.SHORT||n===Pp.UNSIGNED_SHORT))&&(l=!0),l},e.create3DFromRaw=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=s.width,d=void 0===c?W("width"):c,f=s.height,p=void 0===f?W("height"):f,h=s.depth,m=void 0===h?W("depth"):h,g=s.numComps,v=void 0===g?W("numComps"):g,y=s.dataType,b=void 0===y?W("dataType"):y,x=s.data,w=void 0===x?W("data"):x,A=s.updatedExtents,C=void 0===A?[]:A,_=b,T=w;if(!e.updateVolumeInfoForGL(_,v)&&T){var O=d*p*m,P=structuredClone(t.volumeInfo),M=new Float32Array(O*v);t.volumeInfo.offset=P.offset,t.volumeInfo.scale=P.scale;for(var E=0,D=P.scale.map(function(e){return 1/e}),I=0;I<O;I++)for(var k=0;k<v;k++)M[E]=(T[E]-P.offset[k])*D[k],E++;_=Pp.FLOAT,T=M}if(e.getOpenGLDataType(_),e.getInternalFormat(_,v),e.getFormat(_,v),!t.internalFormat||!t.format||!t.openGLDataType)return Z("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_3D,t.components=v,t.width=d,t.height=p,t.depth=m,t.numberOfDimensions=3,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var N=C.length>0,R=!N||!S()(t._prevTexParams,n()),B=[T],L=l(e.updateArrayDataTypeForGL(_,B,!0,R?[]:C));if(t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),R)u(_)?(t.context.texStorage3D(t.target,1,t.internalFormat,t.width,t.height,t.depth),null!=L[0]&&t.context.texSubImage3D(t.target,0,0,0,0,t.width,t.height,t.depth,t.format,t.openGLDataType,L[0])):t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,L[0]),t._prevTexParams=n();else if(N)for(var F=L[0],V=0,j=0;j<C.length;j++){var G=C[j],U=o(G),z=a(G),H=new F.constructor(F.buffer,V,z);V+=H.byteLength,t.context.texSubImage3D(t.target,0,G[0],G[2],G[4],U[0],U[1],U[2],t.format,t.openGLDataType,H)}return t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(_,i(),e.useHalfFloat()),e.deactivate(),!0},e.create3DFilterableFromRaw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=void 0===n?W("width"):n,o=t.height,a=void 0===o?W("height"):o,s=t.depth,l=void 0===s?W("depth"):s,u=t.numComps,c=void 0===u?W("numComps"):u,d=t.dataType,f=void 0===d?W("dataType"):d,p=t.data,h=void 0===p?W("data"):p,m=t.preferSizeOverAccuracy,g=t.ranges,v=t.updatedExtents;return e.create3DFilterableFromDataArray({width:i,height:a,depth:l,dataArray:nH.newInstance({numberOfComponents:c,dataType:f,values:h,ranges:void 0===g?void 0:g}),preferSizeOverAccuracy:void 0!==m&&m,updatedExtents:void 0===v?[]:v})},e.create3DFilterableFromDataArray=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,o=void 0===i?W("width"):i,a=n.height,s=void 0===a?W("height"):a,l=n.depth,d=void 0===l?W("depth"):l,f=n.dataArray,p=void 0===f?W("dataArray"):f,h=n.preferSizeOverAccuracy,m=n.updatedExtents,g=c(p,void 0!==h&&h),v=g.numComps,y=g.dataType,b=g.data,x=g.scaleOffsets,w=[],A=[],C=0;C<v;++C)w[C]=0,A[C]=1;if(t.volumeInfo={scale:A,offset:w,dataComputedScale:x.scale,dataComputedOffset:x.offset,width:o,height:s,depth:d},t._openGLRenderWindow.getWebgl2())return e.create3DFromRaw({width:o,height:s,depth:d,numComps:v,dataType:y,data:b,updatedExtents:void 0===m?[]:m});var S=o*s*d,_=structuredClone(x),T=function(e,t,n,i,o){e[t]=n},O=Pp.UNSIGNED_CHAR;if(y===Pp.UNSIGNED_CHAR)for(var P=0;P<v;++P)_.offset[P]=0,_.scale[P]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(O=Pp.FLOAT,T=function(e,t,n,i,o){e[t]=(n-i)/o}):(O=Pp.UNSIGNED_CHAR,T=function(e,t,n,i,o){e[t]=255*(n-i)/o});if(e.getOpenGLDataType(O),e.getInternalFormat(O,v),e.getFormat(O,v),!t.internalFormat||!t.format||!t.openGLDataType)return Z("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=v,t.depth=1,t.numberOfDimensions=2;var M=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);M>4096&&(O===Pp.FLOAT||v>=3)&&(M=4096);var E=1,D=1;S>M*M&&(D=E=Math.ceil(Math.sqrt(S/(M*M))));var I,k=Math.sqrt(S)/E,N=Math.floor((k=e5(k))*E/o),R=Math.ceil(d/N),B=e5(s*R/D);t.width=k,t.height=B,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=N,t.volumeInfo.yreps=R,t.volumeInfo.xstride=E,t.volumeInfo.ystride=D,t.volumeInfo.offset=_.offset,t.volumeInfo.scale=_.scale;var L=k*B*v;I=O===Pp.FLOAT?new Float32Array(L):new Uint8Array(L);for(var F=0,V=Math.floor(o/E),j=Math.floor(s/D),G=0;G<R;G++)for(var U=Math.min(N,d-G*N),z=v*(t.width-U*Math.floor(o/E)),H=0;H<j;H++){for(var q=0;q<U;q++)for(var K=v*((G*N+q)*o*s+D*H*o),X=0;X<V;X++)for(var Y=0;Y<v;Y++)T(I,F,b[K+E*X*v+Y],_.offset[Y],_.scale[Y]),F++;F+=z}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),u(O)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=I&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,I)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,I),e.deactivate(),!0},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1},e.enableUseHalfFloat=function(e){t.enableUseHalfFloat=e}}(e,t)}var Pv=ew(Pg,"vtkOpenGLTexture"),Py=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:Pv,extend:Pg},O8);Po.vtkTexture=Pv;var Pb={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pb,n),es(e,t),t.colorBuffers&&Z("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),t.colorBuffers=[],eh(e,t,["colorBuffers"]),t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=function(e){if(t.context){var n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t._openGLRenderWindow.getActiveFramebuffer()}else Z("you must set the OpenGLRenderWindow before calling saveCurrentBindings")},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=function(e){if(t.context){var n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t._openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)}else Z("you must set the OpenGLRenderWindow before calling restorePreviousBindings")},e.restorePreviousBuffers=function(e){},e.bind=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n&&(n=t.context.FRAMEBUFFER),t.context.bindFramebuffer(n,t.glFramebuffer);for(var i=0;i<t.colorBuffers.length;i++)t.colorBuffers[i].bind();t._openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,n){t.context?(t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n):Z("you must set the OpenGLRenderWindow before calling create")},e.setColorBuffer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.context;if(i){var o=i.COLOR_ATTACHMENT0;if(n>0){if(!t._openGLRenderWindow.getWebgl2())return void Z("Using multiple framebuffer attachments requires WebGL 2");o+=n}t.colorBuffers[n]=e,i.framebufferTexture2D(i.FRAMEBUFFER,o,i.TEXTURE_2D,e.getHandle(),0)}else Z("you must set the OpenGLRenderWindow before calling setColorBuffer")},e.removeColorBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.context;if(n){var i=n.COLOR_ATTACHMENT0;if(e>0){if(!t._openGLRenderWindow.getWebgl2())return void Z("Using multiple framebuffer attachments requires WebGL 2");i+=e}n.framebufferTexture2D(n.FRAMEBUFFER,i,n.TEXTURE_2D,null,0),t.colorBuffers=t.colorBuffers.splice(e,1)}else Z("you must set the OpenGLRenderWindow before calling removeColorBuffer")},e.setDepthBuffer=function(e){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var n=t.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.getHandle(),0)}else Z("Attaching depth buffer textures to fbo requires WebGL 2");else Z("you must set the OpenGLRenderWindow before calling setDepthBuffer")},e.removeDepthBuffer=function(){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Z("Attaching depth buffer textures to framebuffers requires WebGL 2");else Z("you must set the OpenGLRenderWindow before calling removeDepthBuffer")},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer)},e.getSize=function(){return null==t.glFramebuffer?null:[t.glFramebuffer.width,t.glFramebuffer.height]},e.populateFramebuffer=function(){if(t.context){e.bind();var n=t.context,i=Py.newInstance();i.setOpenGLRenderWindow(t._openGLRenderWindow),i.setMinificationFilter(O6.LINEAR),i.setMagnificationFilter(O6.LINEAR),i.create2DFromRaw({width:t.glFramebuffer.width,height:t.glFramebuffer.height,numComps:4,dataType:eI.UNSIGNED_CHAR,data:null}),e.setColorBuffer(i),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}else Z("you must set the OpenGLRenderWindow before calling populateFrameBuffer")},e.getColorTexture=function(){return t.colorBuffers[0]}}var Pw={newInstance:ew(Px,"vtkFramebuffer"),extend:Px},PA={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function PC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PA,n),eE.obj(e,t),eE.get(e,t,["currentOperation"]),eE.setGet(e,t,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),eE.moveToProtected(e,t,["currentParent"]),t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(eE.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t._currentParent=i,t.preDelegateOperations.forEach(function(t){e.setCurrentOperation(t),n.traverse(e)}),t.delegates.forEach(function(t){t.traverse(n,e)}),t.postDelegateOperations.forEach(function(t){e.setCurrentOperation(t),n.traverse(e)}))}}var PS={newInstance:eE.newInstance(PC,"vtkRenderPass"),extend:PC},P_={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},PT={ObjectType:P_};function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var PM=PT.ObjectType,PE={objectType:PM.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function PD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PE,n),eE.obj(e,t),eE.get(e,t,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),eE.moveToProtected(e,t,["openGLRenderWindow"]),function(e,t){function n(e){switch(e){case PM.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case PM.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;case PM.ARRAY_BUFFER:default:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var i=null,o=null,a=!0,s="";e.getType=function(){return i},e.setType=function(e){i=e},e.getHandle=function(){return o},e.isReady=function(){return!1===a},e.generateBuffer=function(e){var a=n(e);return null===o&&(o=t.context.createBuffer(),i=e),n(i)===a},e.upload=function(l,u){return e.generateBuffer(u)?(t.context.bindBuffer(n(i),o),t.context.bufferData(n(i),l,t.context.STATIC_DRAW),t.allocatedGPUMemoryInBytes=l.length*l.BYTES_PER_ELEMENT,a=!1,!0):(s="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!o&&(t.context.bindBuffer(n(i),o),!0)},e.release=function(){return!!o&&(t.context.bindBuffer(n(i),null),!0)},e.releaseGraphicsResources=function(){null!==o&&(t.context.bindBuffer(n(i),null),t.context.deleteBuffer(o),o=null,t.allocatedGPUMemoryInBytes=0)},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getError=function(){return s}}(e,t)}var PI=PP(PP({newInstance:eE.newInstance(PD),extend:PD},{}),PT);function Pk(e){for(var t=0,n=0,i=0;i<3;++i){var o=e.getRange(i),a=o[1]-o[0];t+=a*a;var s=.5*(o[1]+o[0]);n+=s*s}var l=t>0&&(Math.abs(n)/t>1e6||Math.abs(Math.log10(t))>3||0===t&&n>1e6);if(l){for(var u=new Float64Array(3),c=new Float64Array(3),d=0;d<3;++d){var f=e.getRange(d),p=f[1]-f[0];u[d]=.5*(f[1]+f[0]),c[d]=p>0?1/p:1}return{useShiftAndScale:l,coordShift:u,coordScale:c}}return{useShiftAndScale:l,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}function PN(e,t){var n=new Float64Array(3);rb(n,t);var i=new Float64Array(16);return oN(i,sN(),e,n),i}var PR=eE.vtkErrorMacro,PB={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function PL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PB,n),PI.extend(e,t,n),eE.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),eE.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(P_.ARRAY_BUFFER),e.createVBO=function(n,i,o,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var l=a.points.getData(),u=null,c=null,d=null,f=a.colors?a.colors.getNumberOfComponents():0,p=a.tcoords?a.tcoords.getNumberOfComponents():0;a.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,u=a.normals.getData()),a.customAttributes&&a.customAttributes.forEach(function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())}),a.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=p,t.blockSize+=p,c=a.tcoords.getData()),a.colors?(t.colorComponents=a.colors.getNumberOfComponents(),t.colorOffset=0,d=a.colors.getData(),t.colorBO||(t.colorBO=PI.newInstance()),t.colorBO.setOpenGLRenderWindow(t._openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var h,m=0,g=0,v=0,y=0,b=0,x=0,w={anythingToPoints:function(e,t,n,i){for(var o=0;o<e;++o)h(t[n+o],i)},linesToWireframe:function(e,t,n,i){for(var o=0;o<e-1;++o)h(t[n+o],i),h(t[n+o+1],i)},polysToWireframe:function(e,t,n,i){if(e>2)for(var o=0;o<e;++o)h(t[n+o],i),h(t[n+(o+1)%e],i)},stripsToWireframe:function(e,t,n,i){if(e>2){for(var o=0;o<e-1;++o)h(t[n+o],i),h(t[n+o+1],i);for(var a=0;a<e-2;a++)h(t[n+a],i),h(t[n+a+2],i)}},polysToSurface:function(e,t,n,i){for(var o=0;o<e-2;o++)h(t[n+0],i),h(t[n+o+1],i),h(t[n+o+2],i)},stripsToSurface:function(e,t,n,i){for(var o=0;o<e-2;o++)h(t[n+o],i),h(t[n+o+1+o%2],i),h(t[n+o+1+(o+1)%2],i)}},A={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return e>1?2*(e-1):0},polysToWireframe:function(e,t){return e>2?2*e:0},stripsToWireframe:function(e,t){return e>2?4*e-6:0},polysToSurface:function(e,t){return e>2?3*(e-2):0},stripsToSurface:function(e,t,n){return e>2?3*(e-2):0}},C=null,S=null;o===mk.POINTS||"verts"===i?(C=w.anythingToPoints,S=A.anythingToPoints):o===mk.WIREFRAME||"lines"===i?(C=w["".concat(i,"ToWireframe")],S=A["".concat(i,"ToWireframe")]):(C=w["".concat(i,"ToSurface")],S=A["".concat(i,"ToSurface")]);for(var _=n.getData(),T=_.length,O=0,P=0;P<T;)O+=S(_[P],_),P+=_[P]+1;var M=null,E=new Float32Array(O*t.blockSize);d&&(M=new Uint8Array(4*O));var D=0,I=0,k=Pk(a.points),N=k.useShiftAndScale,R=k.coordShift,B=k.coordScale;if(N?e.setCoordShiftAndScale(R,B):!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null),s)if(s.points||s.cells){var L=new Int32Array(O+s.points.length);L.set(s.points),s.points=L;var F=new Int32Array(O+s.cells.length);F.set(s.cells),s.cells=F}else s.points=new Int32Array(O),s.cells=new Int32Array(O);var V=a.vertexOffset;h=function(e,n){if(s&&(s.points[V]=e,s.cells[V]=x+a.cellOffset),++V,m=3*e,t.coordShiftAndScaleEnabled?(E[D++]=(l[m++]-t.coordShift[0])*t.coordScale[0],E[D++]=(l[m++]-t.coordShift[1])*t.coordScale[1],E[D++]=(l[m++]-t.coordShift[2])*t.coordScale[2]):(E[D++]=l[m++],E[D++]=l[m++],E[D++]=l[m++]),null!==u&&(g=a.haveCellNormals?3*(x+a.cellOffset):3*e,E[D++]=u[g++],E[D++]=u[g++],E[D++]=u[g++]),t.customData.forEach(function(t){b=e*t.components;for(var n=0;n<t.components;++n)E[D++]=t.data[b++]}),null!==c){v=a.useTCoordsPerCell?n*p:e*p;for(var i=0;i<p;++i)E[D++]=c[v++]}null!==d&&(y=a.haveCellScalars?(x+a.cellOffset)*f:e*f,M[I++]=d[y++],M[I++]=d[y++],M[I++]=d[y++],M[I++]=4===f?d[y++]:255)};for(var j=0;j<T;j+=_[j]+1,x++)C(_[j],_,j+1,x+a.cellOffset);return t.elementCount=O,e.upload(E,P_.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(M,P_.ARRAY_BUFFER)),x},e.setCoordShiftAndScale=function(e,n){var i,o;null===e||e.constructor===Float64Array&&3===e.length?null===n||n.constructor===Float64Array&&3===n.length?(null!==t.coordShift&&null!==e&&rL(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&rL(n,t.coordScale)||(t.coordScale=n),i=t.coordShift,o=t.coordScale,t.coordShiftAndScaleEnabled=null!==i&&null!==o&&!(rB(i,[0,0,0])&&rB(o,[1,1,1])),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=PN(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):PR("Wrong type for coordScale, expected vec3 or null"):PR("Wrong type for coordShift, expected vec3 or null")}}var PF={newInstance:eE.newInstance(PL),extend:PL},PV=eE.vtkErrorMacro,Pj={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function PG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pj,n),eE.obj(e,t),eE.setGet(e,t,["shaderType","source","error","handle","context"]),t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;if(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),e="Fragment"===t.shaderType?t.context.FRAGMENT_SHADER:t.context.VERTEX_SHADER,t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var n=t.context.getShaderInfoLog(t.handle);return PV("Error compiling shader '".concat(t.source,"': ").concat(n)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}var PU={newInstance:eE.newInstance(PG,"vtkShader"),extend:PG},Pz=eE.vtkErrorMacro,PW={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function PH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PW,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=PU.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=PU.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=PU.newInstance(),t.geometryShader.setShaderType("Geometry"),eE.obj(e,t),eE.get(e,t,["lastCameraMTime"]),eE.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(Pz("Links failed: ".concat(t.error)),0):(Pz(t.error),0):(Pz(t.fragmentShader.getSource().split("\n").map(function(e,t){return"".concat(t,": ").concat(e)}).join("\n")),Pz(t.fragmentShader.getError()),0):(Pz(t.vertexShader.getSource().split("\n").map(function(e,t){return"".concat(t,": ").concat(e)}).join("\n")),Pz(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(e.release(),0!==t.vertexShaderHandle&&(t.context.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=0),0!==t.fragmentShaderHandle&&(t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=0),t.context.deleteProgram(t.handle),t.handle=0,e.setCompiled(!1))},e.bind=function(){return!(!t.linked&&!e.link()||(t.context.useProgram(t.handle),e.setBound(!0),0))},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.linked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var n=t.context.getProgramInfoLog(t.handle);return Pz("Error linking shader ".concat(n)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(n,i){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var a=new Float32Array(i);return t.context.uniformMatrix4fv(o,!1,a),!0},e.setUniformMatrix3x3=function(n,i){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var a=new Float32Array(i);return t.context.uniformMatrix3fv(o,!1,a),!0},e.setUniformf=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(o,i),!0)},e.setUniformfv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(o,i),!0)},e.setUniformi=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(o,i),!0)},e.setUniformiv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(o,i),!0)},e.setUniform2f=function(n,i,o){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===o)throw RangeError("Invalid number of values for array");return t.context.uniform2f(a,i,o),!0},e.setUniform2fv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(o,i),!0)},e.setUniform2i=function(n,i,o){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===o)throw RangeError("Invalid number of values for array");return t.context.uniform2i(a,i,o),!0},e.setUniform2iv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(o,i),!0)},e.setUniform3f=function(n,i,o,a){var s=e.findUniform(n);if(-1===s)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw RangeError("Invalid number of values for array");return t.context.uniform3f(s,i,o,a),!0},e.setUniform3fArray=function(n,i){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(i)||3!==i.length)throw RangeError("Invalid number of values for array");return t.context.uniform3f(o,i[0],i[1],i[2]),!0},e.setUniform3fv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(o,i),!0)},e.setUniform3i=function(n){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=a;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),3!==l.length)throw RangeError("Invalid number of values for array");return t.context.uniform3i(i,l[0],l[1],l[2]),!0},e.setUniform3iv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(o,i),!0)},e.setUniform4f=function(n){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=a;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),4!==l.length)throw RangeError("Invalid number of values for array");return t.context.uniform4f(i,l[0],l[1],l[2],l[3]),!0},e.setUniform4fv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(o,i),!0)},e.setUniform4i=function(n){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=a;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),4!==l.length)throw RangeError("Invalid number of values for array");return t.context.uniform4i(i,l[0],l[1],l[2],l[3]),!0},e.setUniform4iv=function(n,i){var o=e.findUniform(n);return -1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(o,i),!0)},e.findUniform=function(e){if(!e||!t.linked)return -1;var n=t.uniformLocs[e];return void 0!==n?n:null===(n=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(Pz("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;if(e in t.attributeLocs)return!0;if(!t.linked)return Pz("attempt to find uniform when the shader program is not linked"),!1;var n=t.context.getAttribLocation(t.handle,e);return -1!==n&&(t.attributeLocs[e]=n,!0)},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var i=t.context.createProgram();if(0===i)return t.error="Could not create shader program.",!1;t.handle=i,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.context.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}var Pq={newInstance:eE.newInstance(PH,"vtkShaderProgram"),extend:PH,substitute:function(e,t,n,i){var o="string"==typeof n?n:n.join("\n"),a=!1===i?t:RegExp(t,"g"),s=e.replace(a,o);return{replace:s!==o,result:s}}},PK={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function PX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PK,n),t.buffers=[],eE.obj(e,t),eE.get(e,t,["supported"]),eE.setGet(e,t,["forceEmulation"]),t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t._openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t._openGLRenderWindow&&t._openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var n=t.context,i=0;i<t.buffers.length;++i){var o=t.buffers[i];t.context.bindBuffer(n.ARRAY_BUFFER,o.buffer);for(var a=0;a<o.attributes.length;++a)for(var s=o.attributes[a],l=s.isMatrix?s.size:1,u=0;u<l;++u)n.enableVertexAttribArray(s.index+u),n.vertexAttribPointer(s.index+u,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*u/s.size),s.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(s.index+u,1):n.vertexAttribDivisor(s.index+u,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var n=t.context,i=0;i<t.buffers.length;++i){var o=t.buffers[i];t.context.bindBuffer(n.ARRAY_BUFFER,o.buffer);for(var a=0;a<o.attributes.length;++a)for(var s=o.attributes[a],l=s.isMatrix?s.size:1,u=0;u<l;++u)n.enableVertexAttribArray(s.index+u),n.vertexAttribPointer(s.index+u,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*u/s.size),s.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(s.index+u,0):n.vertexAttribDivisor(s.index+u,0)),n.disableVertexAttribArray(s.index+u)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,i,o,a,s,l,u){return e.addAttributeArrayWithDivisor(t,n,i,o,a,s,l,u,0,!1)},e.addAttributeArrayWithDivisor=function(n,i,o,a,s,l,u,c,d,f){if(!n||!n.isBound()||0===i.getHandle()||i.getType()!==P_.ARRAY_BUFFER||(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle()))return!1;var p=t.context,h={};if(h.name=o,h.index=p.getAttribLocation(t.handleProgram,o),h.offset=a,h.stride=s,h.type=l,h.size=u,h.normalize=c,h.isMatrix=f,h.divisor=d,-1===h.Index)return!1;if(i.bind(),p.enableVertexAttribArray(h.index),p.vertexAttribPointer(h.index,h.size,h.type,h.normalize,h.stride,h.offset),d>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(h.index,1):p.vertexAttribDivisor(h.index,1)),h.buffer=i.getHandle(),!t.supported){for(var m=!1,g=0;g<t.buffers.length;++g){var v=t.buffers[g];if(v.buffer===h.buffer){m=!0;for(var y=!1,b=0;b<v.attributes.length;++b)v.attributes[b].name===o&&(y=!0,v.attributes[b]=h);y||v.attributes.push(h)}}m||t.buffers.push({buffer:h.buffer,attributes:[h]})}return!0},e.addAttributeMatrixWithDivisor=function(n,i,o,a,s,l,u,c,d){var f=e.addAttributeArrayWithDivisor(n,i,o,a,s,l,u,c,d,!0);if(!f)return f;for(var p=t.context,h=p.getAttribLocation(t.handleProgram,o),m=1;m<u;m++)p.enableVertexAttribArray(h+m),p.vertexAttribPointer(h+m,u,l,c,s,a+s*m/u),d>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(h+m,1):p.vertexAttribDivisor(h+m,1));return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported){for(var i=0;i<t.buffers.length;++i)for(var o=t.buffers[i],a=0;a<o.attributes.length;++a)if(o.attributes[a].name===n)return o.attributes.splice(a,1),o.attributes.length||t.buffers.splice(i,1),!0}return!0},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}var PY={newInstance:eE.newInstance(PX,"vtkOpenGLVertexArrayObject"),extend:PX},PZ={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},PJ={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function PQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PJ,n),eE.obj(e,t),t.shaderSourceTime={},eE.obj(t.shaderSourceTime),t.attributeUpdateTime={},eE.obj(t.attributeUpdateTime),eE.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),t.program=Pq.newInstance(),t.VAO=PY.newInstance(),t.CABO=PF.newInstance(),t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.context=e.getContext(),t.program.setContext(t.context),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)},e.drawArrays=function(n,i,o,a){if(t.CABO.getElementCount()){var s=e.getOpenGLMode(o),l=e.haveWideLines(n,i),u=t.context,c=u.getParameter(u.DEPTH_WRITEMASK);t.pointPicking&&u.depthMask(!1),s===u.LINES&&l?(e.updateShaders(n,i,a),u.drawArraysInstanced(s,0,t.CABO.getElementCount(),2*Math.ceil(i.getProperty().getLineWidth()))):(u.lineWidth(i.getProperty().getLineWidth()),e.updateShaders(n,i,a),u.drawArrays(s,0,t.CABO.getElementCount()),u.lineWidth(1));var d=+(s===u.POINTS)||(s===u.LINES?2:3);return t.pointPicking&&u.depthMask(c),t.CABO.getElementCount()/d}return 0},e.getOpenGLMode=function(e){if(t.pointPicking)return t.context.POINTS;var n=t.primitiveType;return e===mk.POINTS||n===PZ.Points?t.context.POINTS:e===mk.WIREFRAME||n===PZ.Lines||n===PZ.TrisEdges||n===PZ.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.haveWideLines=function(e,n){return n.getProperty().getLineWidth()>1&&!(t.CABO.getOpenGLRenderWindow()&&t.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=n.getProperty().getLineWidth())},e.getNeedToRebuildShaders=function(t,n,i){return!!(i.getNeedToRebuildShaders(e,t,n)||0===e.getProgram()||e.getShaderSourceTime().getMTime()<i.getMTime()||e.getShaderSourceTime().getMTime()<n.getMTime())},e.updateShaders=function(n,i,o){if(e.getNeedToRebuildShaders(n,i,o)){var a={Vertex:null,Fragment:null,Geometry:null};o.buildShaders(a,n,i);var s=t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==e.getProgram()&&(e.setProgram(s),e.getVAO().releaseGraphicsResources()),e.getShaderSourceTime().modified()}else t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(e.getProgram());e.getVAO().bind(),o.setMapperShaderParameters(e,n,i),o.setPropertyShaderParameters(e,n,i),o.setCameraShaderParameters(e,n,i),o.setLightingShaderParameters(e,n,i),o.invokeShaderCallbacks(e,n,i)},e.setMapperShaderParameters=function(n,i,o){if(e.haveWideLines(n,i)){e.getProgram().setUniform2f("viewportSize",o.usize,o.vsize);var a=parseFloat(i.getProperty().getLineWidth());e.getProgram().setUniformf("lineWidthStepSize",a/Math.ceil(a)),e.getProgram().setUniformf("halfLineWidth",a/2)}t.primitiveType===PZ.Points||i.getProperty().getRepresentation()===mk.POINTS?e.getProgram().setUniformf("pointSize",i.getProperty().getPointSize()):t.pointPicking&&e.getProgram().setUniformf("pointSize",e.getPointPickingPrimitiveSize())},e.replaceShaderPositionVC=function(n,i,o){var a=n.Vertex;a=Pq.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,e.getOpenGLMode(o.getProperty().getRepresentation())===t.context.LINES&&e.haveWideLines(i,o)&&(a=Pq.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=a},e.getPointPickingPrimitiveSize=function(){return t.primitiveType===PZ.Points?2:t.primitiveType===PZ.Lines?4:6},e.getAllocatedGPUMemoryInBytes=function(){return e.getCABO().getAllocatedGPUMemoryInBytes()}}var P$={newInstance:eE.newInstance(PQ),extend:PQ,primTypes:PZ},P0=mG.Representation,P1=eE.vtkErrorMacro;function P2(e){var t=Pq.substitute(e.Fragment,"//VTK::RenderPassFragmentShader::Impl","\n      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);\n      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);\n      gl_FragData[1].r = weight;\n    ",!1);e.Fragment=t.result}var P3={framebuffer:null,copyShader:null,tris:null};function P4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,P3,n),PS.extend(e,t,n),t.VBOBuildTime={},eE.obj(t.VBOBuildTime,{mtime:0}),t.tris=P$.newInstance(),eE.get(e,t,["framebuffer"]),t.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),e.createVertexBuffer=function(){var e=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),o=nH.newInstance({numberOfComponents:3,values:e});o.setName("points");var a=nH.newInstance({numberOfComponents:2,values:n});a.setName("tcoords");var s=nH.newInstance({numberOfComponents:1,values:i});t.tris.getCABO().createVBO(s,"polys",P0.SURFACE,{points:o,tcoords:a,cellOffset:0}),t.VBOBuildTime.modified()},e.createFramebuffer=function(e){var n,i=e.getSize(),o=e.getContext();t.framebuffer=Pw.newInstance(),t.framebuffer.setOpenGLRenderWindow(e),(n=t.framebuffer).create.apply(n,m(i)),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind(),t.translucentRGBATexture=Py.newInstance(),t.translucentRGBATexture.setInternalFormat(o.RGBA16F),t.translucentRGBATexture.setFormat(o.RGBA),t.translucentRGBATexture.setOpenGLDataType(o.HALF_FLOAT),t.translucentRGBATexture.setOpenGLRenderWindow(e),t.translucentRGBATexture.create2DFromRaw({width:i[0],height:i[1],numComps:4,dataType:"Float32Array",data:null}),t.translucentRTexture=Py.newInstance(),t.translucentRTexture.setInternalFormat(o.R16F),t.translucentRTexture.setFormat(o.RED),t.translucentRTexture.setOpenGLDataType(o.HALF_FLOAT),t.translucentRTexture.setOpenGLRenderWindow(e),t.translucentRTexture.create2DFromRaw({width:i[0],height:i[1],numComps:1,dataType:"Float32Array",data:null}),t.translucentZTexture=Py.newInstance(),t.translucentZTexture.setOpenGLRenderWindow(e),t.translucentZTexture.createDepthFromRaw({width:i[0],height:i[1],dataType:"Float32Array",data:null}),t.framebuffer.setColorBuffer(t.translucentRGBATexture,0),t.framebuffer.setColorBuffer(t.translucentRTexture,1),t.framebuffer.setDepthBuffer(t.translucentZTexture)},e.createCopyShader=function(e){t.copyShader=e.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\nattribute vec4 vertexDC;\nattribute vec2 tcoordTC;\nvarying vec2 tcoord;\nvoid main() { tcoord = tcoordTC; gl_Position = vertexDC; }","//VTK::System::Dec\n\nin vec2 tcoord;\n\nuniform sampler2D translucentRTexture;\nuniform sampler2D translucentRGBATexture;\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  vec4 t1Color = texture(translucentRGBATexture, tcoord);\n  float t2Color = texture(translucentRTexture, tcoord).r;\n  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);\n}\n","")},e.createVBO=function(n){var i=n.getContext();t.tris.setOpenGLRenderWindow(n),e.createVertexBuffer();var o=t.copyShader;t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(o,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),i.FLOAT,3,i.FALSE)||P1("Error setting vertexDC in copy shader VAO."),t.copyVAO.addAttributeArray(o,t.tris.getCABO(),"tcoordTC",t.tris.getCABO().getTCoordOffset(),t.tris.getCABO().getStride(),i.FLOAT,2,i.FALSE)||P1("Error setting vertexDC in copy shader VAO.")},e.traverse=function(n,i,o){if(!t.deleted){var a=n.getSize(),s=n.getContext();if(t._supported=!1,i.getSelector()||!s||!n.getWebgl2()||!s.getExtension("EXT_color_buffer_half_float")&&!s.getExtension("EXT_color_buffer_float"))return e.setCurrentOperation("translucentPass"),void i.traverse(e);if(t._supported=!0,null===t.framebuffer)e.createFramebuffer(n);else{var l=t.framebuffer.getSize();null===l||l[0]!==a[0]||l[1]!==a[1]?(t.framebuffer.releaseGraphicsResources(),t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRTexture.releaseGraphicsResources(n),t.translucentZTexture.releaseGraphicsResources(n),e.createFramebuffer(n)):(t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind())}s.drawBuffers([s.COLOR_ATTACHMENT0]),s.clearBufferfv(s.COLOR,0,[0,0,0,0]),s.clearBufferfv(s.DEPTH,0,[1]),s.colorMask(!1,!1,!1,!1),o.getOpaqueActorCount()>0&&(o.setCurrentOperation("opaqueZBufferPass"),i.traverse(o)),s.colorMask(!0,!0,!0,!0),s.drawBuffers([s.COLOR_ATTACHMENT0,s.COLOR_ATTACHMENT1]),s.viewport(0,0,a[0],a[1]),s.scissor(0,0,a[0],a[1]),s.clearBufferfv(s.COLOR,0,[0,0,0,1]),s.clearBufferfv(s.COLOR,1,[0,0,0,0]),s.enable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFuncSeparate(s.ONE,s.ONE,s.ZERO,s.ONE_MINUS_SRC_ALPHA),e.setCurrentOperation("translucentPass"),i.traverse(e),s.drawBuffers([s.NONE]),t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader?e.createCopyShader(n):n.getShaderCache().readyShaderProgram(t.copyShader),t.copyVAO||(t.copyVAO=PY.newInstance(),t.copyVAO.setOpenGLRenderWindow(n)),t.copyVAO.bind(),t.VBOBuildTime.getMTime()<e.getMTime()&&e.createVBO(n),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),s.depthMask(!1),s.depthFunc(s.ALWAYS),s.viewport(0,0,a[0],a[1]),s.scissor(0,0,a[0],a[1]),t.translucentRGBATexture.activate(),t.copyShader.setUniformi("translucentRGBATexture",t.translucentRGBATexture.getTextureUnit()),t.translucentRTexture.activate(),t.copyShader.setUniformi("translucentRTexture",t.translucentRTexture.getTextureUnit()),s.drawArrays(s.TRIANGLES,0,t.tris.getCABO().getElementCount()),s.depthMask(!0),s.depthFunc(s.LEQUAL),t.translucentRGBATexture.deactivate(),t.translucentRTexture.deactivate();var u=i.getTiledSizeAndOrigin();s.scissor(u.lowerLeftU,u.lowerLeftV,u.usize,u.vsize),s.viewport(u.lowerLeftU,u.lowerLeftV,u.usize,u.vsize)}},e.getShaderReplacement=function(){return t._supported?P2:null},e.releaseGraphicsResources=function(n){t.framebuffer&&(t.framebuffer.releaseGraphicsResources(n),t.framebuffer=null),t.translucentRGBATexture&&(t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRGBATexture=null),t.translucentRTexture&&(t.translucentRTexture.releaseGraphicsResources(n),t.translucentRTexture=null),t.translucentZTexture&&(t.translucentZTexture.releaseGraphicsResources(n),t.translucentZTexture=null),t.copyVAO&&(t.copyVAO.releaseGraphicsResources(n),t.copyVAO=null),t.copyShader&&(t.copyShader.releaseGraphicsResources(n),t.copyShader=null),t.tris&&(t.tris.releaseGraphicsResources(n),t.tris=null),e.modified()}}var P5={newInstance:eE.newInstance(P4,"vtkOpenGLOrderIndependentTranslucentPass"),extend:P4},P6={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function P8(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,P6,n),PS.extend(e,t,n),eE.get(e,t,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=i,e.setCurrentOperation("buildPass"),n.traverse(e);for(var o=n.getRenderable().getNumberOfLayers(),a=n.getRenderable().getRenderersByReference(),s=0;s<o;s++)for(var l=0;l<a.length;l++){var u=a[l],c=n.getViewNodeFor(u);if(u.getDraw()&&u.getLayer()===s){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,t.overlayActorCount=0,e.setCurrentOperation("queryPass"),c.traverse(e),(t.opaqueActorCount>0||t.translucentActorCount>0)&&t.volumeCount>0||t.depthRequested){var d=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=Pw.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var f=t.framebuffer.getSize();null!==f&&f[0]===d[0]&&f[1]===d[1]||(t.framebuffer.create(d[0],d[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("zBufferPass"),c.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),c.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),c.traverse(e)),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=P5.newInstance()),t.translucentPass.traverse(n,c,e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),c.traverse(e)),t.overlayActorCount>0&&(e.setCurrentOperation("overlayPass"),c.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.requestDepth=function(){t.depthRequested=!0},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++},e.incrementOverlayActorCount=function(){return t.overlayActorCount++}}var P9={newInstance:eE.newInstance(P8,"vtkForwardPass"),extend:P8};function P7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Me=m8.PassTypes,Mt=l$.SelectionContent,Mn=l$.SelectionField,Mr=oe.FieldAssociations,Mi=eE.vtkErrorMacro;function Mo(e){return"".concat(e.propID," ").concat(e.compositeID)}function Ma(e,t,n,i){return n?n[4*(t*(i[2]-i[0]+1)+e)+3]:0}function Ms(e,t,n,i){if(!n)return 0;var o=4*(t*(i[2]-i[0]+1)+e),a=n[o],s=n[o+1];return 256*(256*n[o+2]+s)+a}function Ml(e,t){var n=t;return n<<=24,n|=e}function Mu(e,t,n,i,o){var a=[],s=0;return t.forEach(function(t,l){var u=l$.newInstance();switch(u.setContentType(Mt.INDICES),e){case Mr.FIELD_ASSOCIATION_CELLS:u.setFieldType(Mn.CELL);break;case Mr.FIELD_ASSOCIATION_POINTS:u.setFieldType(Mn.POINT);break;default:Mi("Unknown field association")}u.getProperties().propID=t.info.propID,u.getProperties().prop=t.info.prop,u.getProperties().compositeID=t.info.compositeID,u.getProperties().attributeID=t.info.attributeID,u.getProperties().pixelCount=t.pixelCount,n&&(u.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],u.getProperties().worldPosition=o.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,i)),u.setSelectionList(t.attributeIDs),a[s]=u,s++}),a}function Mc(e,t,n,i,o){for(var a=Math.floor(t),s=Math.floor(n),l=Math.floor(i),u=Math.floor(o),c=new Map,d=[0,0],f=s;f<=u;f++)for(var p=a;p<=l;p++){var h=function e(t,n,i,o){var a=i<0?0:i;if(0===a){if(o[0]=n[0],o[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;var s=[n[0]-t.area[0],n[1]-t.area[1]],l=Ms(s[0],s[1],t.pixBuffer[Me.ACTOR_PASS],t.area,"getPixelInformationWithData1");if(l<=0||l-1>=t.props.length)return null;var u={valid:!0};u.propID=l-1,u.prop=t.props[u.propID];var c=Ms(s[0],s[1],t.pixBuffer[Me.COMPOSITE_INDEX_PASS],t.area,"getPixelInformationWithData2");if((c<0||c>0xffffff)&&(c=0),u.compositeID=c-1,t.captureZValues){var d=4*(s[1]*(t.area[2]-t.area[0]+1)+s[0]);u.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,u.displayPosition=n}return t.pixBuffer[Me.ID_LOW24]&&0===Ma(s[0],s[1],t.pixBuffer[Me.ID_LOW24],t.area)||(u.attributeID=Ml(Ms(s[0],s[1],t.pixBuffer[Me.ID_LOW24],t.area,"getPixelInformationWithData3"),Ms(s[0],s[1],t.pixBuffer[Me.ID_HIGH24],t.area,"getPixelInformationWithData4"))),u}var f=[n[0],n[1]],p=[0,0],h=e(t,n,0,o);if(h&&h.valid)return h;for(var m=1;m<a;++m){for(var g=f[1]>m?f[1]-m:0;g<=f[1]+m;++g)if(p[1]=g,f[0]>=m&&(p[0]=f[0]-m,(h=e(t,p,0,o))&&h.valid)||(p[0]=f[0]+m,(h=e(t,p,0,o))&&h.valid))return h;for(var v=f[0]>=m?f[0]-(m-1):0;v<=f[0]+(m-1);++v)if(p[0]=v,f[1]>=m&&(p[1]=f[1]-m,(h=e(t,p,0,o))&&h.valid)||(p[1]=f[1]+m,(h=e(t,p,0,o))&&h.valid))return h}return o[0]=n[0],o[1]=n[1],null}(e,[p,f],0,d);if(h&&h.valid){var m=Mo(h);if(c.has(m)){var g=c.get(m);g.pixelCount++,e.captureZValues&&h.zValue<g.info.zValue&&(g.info=h),-1===g.attributeIDs.indexOf(h.attributeID)&&g.attributeIDs.push(h.attributeID)}else c.set(m,{info:h,pixelCount:1,attributeIDs:[h.attributeID]})}}return Mu(e.fieldAssociation,c,e.captureZValues,e.renderer,e.openGLRenderWindow)}var Md={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function Mf(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Md,o),TV.extend(e,t,o),t.propColorValue=[0,0,0],t.props=[],t.area||(t.area=[0,0,0,0]),eE.setGetArray(e,t,["area"],4),eE.setGet(e,t,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),eE.setGetArray(e,t,["propColorValue"],3),eE.moveToProtected(e,t,["renderer","openGLRenderWindow"]),eE.event(e,t,"event"),t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.rawPixBuffer=[],t.pixBuffer=[],t.zBuffer=null},e.beginSelection=function(){t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer,t._openGLRenderer),t.maxAttributeId=0;var n=t._openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var i=t.framebuffer.getSize();i&&i[0]===n[0]&&i[1]===n[1]?t.framebuffer.bind():(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer())}else t.framebuffer=Pw.newInstance(),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();if(t._openGLRenderer.clear(),t._openGLRenderer.setSelector(e),t.hitProps={},t.propPixels={},t.props=[],e.releasePixBuffers(),t.fieldAssociation===Mr.FIELD_ASSOCIATION_POINTS){var o=t._openGLRenderWindow.getContext(),a=o.isEnabled(o.BLEND);o.disable(o.BLEND),t._openGLRenderWindow.traverseAllPasses(),a&&o.enable(o.BLEND)}},e.endSelection=function(){t.hitProps={},t._openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending=e.isEnabled(e.BLEND),e.disable(e.BLEND)},e.postCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending&&e.enable(e.BLEND)},e.select=function(){var n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},n=w$(w1().mark(function n(i,o,a,s,l){var u,c;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._renderer=i,void 0===o?(u=t._openGLRenderWindow.getSize(),e.setArea(0,0,u[0]-1,u[1]-1)):e.setArea(o,a,s,l),e.captureBuffers()){n.next=4;break}return n.abrupt("return",!1);case 4:return(c={area:m(t.area),pixBuffer:m(t.pixBuffer),captureZValues:t.captureZValues,zBuffer:t.zBuffer,props:m(t.props),fieldAssociation:t.fieldAssociation,renderer:i,openGLRenderWindow:t._openGLRenderWindow}).generateSelection=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mc.apply(void 0,[c].concat(t))},n.abrupt("return",c);case 7:case"end":return n.stop()}},n)})),e.getSourceDataAsync=function(e,t,i,o,a){return n.apply(this,arguments)},e.captureBuffers=function(){if(!t._renderer||!t._openGLRenderWindow)return Mi("Renderer and view must be set before calling Select."),!1;t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer,t._openGLRenderer),t._openGLRenderWindow.getRenderable().preRender(),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t._renderer.getBackgroundByReference(),t._renderer.setBackground(0,0,0,0);var n=t._openGLRenderWindow.getRenderPasses();e.beginSelection();var i=[];for(t.currentPass=Me.MIN_KNOWN_PASS;t.currentPass<=Me.MAX_KNOWN_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===Me.ACTOR_PASS&&"function"==typeof n[0].requestDepth&&"function"==typeof n[0].getFramebuffer&&n[0].requestDepth(),t._openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass),i.push(t.currentPass));return i.forEach(function(n){t.currentPass=n,e.processPixelBuffers()}),t.currentPass=Me.MAX_KNOWN_PASS,e.endSelection(),t._renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.processPixelBuffers=function(){t.props.forEach(function(n,i){e.isPropHit(i)&&n.processSelectorPixelBuffers(e,t.propPixels[i])})},e.passRequired=function(e){if(e===Me.ID_HIGH24){if(t.fieldAssociation===Mr.FIELD_ASSOCIATION_POINTS)return t.maximumPointId>0xffffff;if(t.fieldAssociation===Mr.FIELD_ASSOCIATION_CELLS)return t.maximumCellId>0xffffff}return!0},e.savePixelBuffer=function(n){if(t.pixBuffer[n]=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),!t.rawPixBuffer[n]){var i=(t.area[2]-t.area[0]+1)*(t.area[3]-t.area[1]+1)*4;t.rawPixBuffer[n]=new Uint8Array(i),t.rawPixBuffer[n].set(t.pixBuffer[n])}if(n===Me.ACTOR_PASS){if(t.captureZValues){var o=t._openGLRenderWindow.getRenderPasses();if("function"==typeof o[0].requestDepth&&"function"==typeof o[0].getFramebuffer){var a=o[0].getFramebuffer();a.saveCurrentBindingsAndBuffers(),a.bind(),t.zBuffer=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),a.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.rawPixBuffer[n])}},e.buildPropHitList=function(e){for(var n=0,i=0;i<=t.area[3]-t.area[1];i++)for(var o=0;o<=t.area[2]-t.area[0];o++){var a=Ms(o,i,e,t.area,"buildPropHitList");a>0&&(--a in t.hitProps||(t.hitProps[a]=!0,t.propPixels[a]=[]),t.propPixels[a].push(4*n)),++n}},e.renderProp=function(n){t.currentPass===Me.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+1),t.props.push(n))},e.renderCompositeIndex=function(n){t.currentPass===Me.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+1)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.passTypeToString=function(e){return eE.enumToString(Me,e)},e.isPropHit=function(e){return!!t.hitProps[e]},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=function(n,i,o){var a=i<0?0:i;if(console.log("getPixelInformation called",a),0===a){if(o[0]=n[0],o[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;console.log(n),console.log(t.area);var s=[n[0]-t.area[0],n[1]-t.area[1]];console.log("adjusted displayPosition",s);var l=Ms(s[0],s[1],t.pixBuffer[Me.ACTOR_PASS],t.area,"getPixelInformation");if(console.log("actorid",l),l<=0||l-1>=t.props.length)return null;var u={valid:!0};u.propID=l-1,u.prop=t.props[u.propID];var c=Ms(s[0],s[1],t.pixBuffer[Me.COMPOSITE_INDEX_PASS],t.area,"getPixelInformation2");if((c<0||c>0xffffff)&&(c=0),u.compositeID=c-1,t.captureZValues){var d=4*(s[1]*(t.area[2]-t.area[0]+1)+s[0]);u.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,u.displayPosition=n}return t.pixBuffer[Me.ID_LOW24]&&0===Ma(s[0],s[1],t.pixBuffer[Me.ID_LOW24],t.area)||(u.attributeID=Ml(Ms(s[0],s[1],t.pixBuffer[Me.ID_LOW24],t.area,"getPixelInformation3"),Ms(s[0],s[1],t.pixBuffer[Me.ID_HIGH24],t.area,"getPixelInformation4"))),u}var f=[n[0],n[1]],p=[0,0],h=e.getPixelInformation(n,0,o);if(h&&h.valid)return h;for(var m=1;m<a;++m){for(var g=f[1]>m?f[1]-m:0;g<=f[1]+m;++g)if(p[1]=g,f[0]>=m&&(p[0]=f[0]-m,(h=e.getPixelInformation(p,0,o))&&h.valid)||(p[0]=f[0]+m,(h=e.getPixelInformation(p,0,o))&&h.valid))return h;for(var v=f[0]>=m?f[0]-(m-1):0;v<=f[0]+(m-1);++v)if(p[0]=v,f[1]>=m&&(p[1]=f[1]-m,(h=e.getPixelInformation(p,0,o))&&h.valid)||(p[1]=f[1]+m,(h=e.getPixelInformation(p,0,o))&&h.valid))return h}return o[0]=n[0],o[1]=n[1],null},e.generateSelection=function(n,i,o,a){for(var s=Math.floor(n),l=Math.floor(i),u=Math.floor(o),c=Math.floor(a),d=new Map,f=[0,0],p=l;p<=c;p++)for(var h=s;h<=u;h++){var m=[h,p],g=e.getPixelInformation(m,0,f);if(g&&g.valid){var v=Mo(g);if(d.has(v)){var y=d.get(v);y.pixelCount++,t.captureZValues&&g.zValue<y.info.zValue&&(y.info=g),-1===y.attributeIDs.indexOf(g.attributeID)&&y.attributeIDs.push(g.attributeID)}else d.set(v,{info:g,pixelCount:1,attributeIDs:[g.attributeID]})}}return Mu(t.fieldAssociation,d,t.captureZValues,t._renderer,t._openGLRenderWindow)},e.getRawPixelBuffer=function(e){return t.rawPixBuffer[e]},e.getPixelBuffer=function(e){return t.pixBuffer[e]},e.attach=function(e,n){t._openGLRenderWindow=e,t._renderer=n},i=e.setArea,e.setArea=function(){return!!i.apply(void 0,arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}var Mp=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P7(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(Mf,"vtkOpenGLHardwareSelector"),extend:Mf},m8),Mh=n(5735),Mm=n.n(Mh),Mg=["lastShaderProgramBound","context","_openGLRenderWindow"],Mv={lastShaderProgramBound:null,shaderPrograms:null,context:null};function My(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mv,n),t.shaderPrograms={},eE.obj(e,t),eE.setGet(e,t,Mg),eE.moveToProtected(e,t,["openGLRenderWindow"]),t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,i){var o=n;i.length>0&&(o=Pq.substitute(o,"VSOut","GSOut").result);var a=t._openGLRenderWindow.getWebgl2(),s="\n",l="#version 100\n";a?l="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(s="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(s+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),o=Pq.substitute(o,"//VTK::System::Dec",["".concat(l,"\n"),a?"":"#extension GL_OES_standard_derivatives : enable\n",s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var u=Pq.substitute(e,"//VTK::System::Dec",["".concat(l,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(a){u=Pq.substitute(u,"varying","out").result,o=Pq.substitute(o,"varying","in").result;for(var c="",d=0;o.includes("gl_FragData[".concat(d,"]"));)o=Pq.substitute(o,"gl_FragData\\[".concat(d,"\\]"),"fragOutput".concat(d)).result,c+="layout(location = ".concat(d,") out vec4 fragOutput").concat(d,";\n"),d++;o=Pq.substitute(o,"//VTK::Output::Dec",c).result}return{VSSource:u,FSSource:o,GSSource:Pq.substitute(i,"//VTK::System::Dec",l).result}},e.readyShaderProgramArray=function(t,n,i){var o=e.replaceShaderValues(t,n,i),a=e.getShaderProgram(o.VSSource,o.FSSource,o.GSSource);return e.readyShaderProgram(a)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShaderProgram(t)?t:null},e.getShaderProgram=function(e,n,i){var o="".concat(e).concat(n).concat(i),a=Mm().hash(o);if(!(a in t.shaderPrograms)){var s=Pq.newInstance();return s.setContext(t.context),s.getVertexShader().setSource(e),s.getFragmentShader().setSource(n),i&&s.getGeometryShader().setSource(i),s.setMd5Hash(a),t.shaderPrograms[a]=s,s}return t.shaderPrograms[a]},e.releaseGraphicsResources=function(n){e.releaseCurrentShaderProgram(),Object.keys(t.shaderPrograms).map(function(e){return t.shaderPrograms[e]}).forEach(function(e){return e.cleanup()}),t.shaderPrograms={}},e.releaseCurrentShaderProgram=function(){t.lastShaderProgramBound&&(t.lastShaderProgramBound.cleanup(),t.lastShaderProgramBound=null)},e.bindShaderProgram=function(e){return t.lastShaderProgramBound===e||(t.lastShaderProgramBound&&t.lastShaderProgramBound.release(),e.bind(),t.lastShaderProgramBound=e),1}}var Mb={newInstance:eE.newInstance(My,"vtkShaderCache"),extend:My},Mx=eE.vtkErrorMacro,Mw={context:null,numberOfTextureUnits:0,textureUnits:0};function MA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mw,n),eE.obj(e,t),t.textureUnits=[],eE.get(e,t,["numberOfTextureUnits"]),eE.setGet(e,t,["context"]),t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&Mx("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var i=0;i<t.numberOfTextureUnits;++i)t.textureUnits[i]=!1}e.modified()}},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return -1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1},e.freeAll=function(){for(var e=0;e<t.numberOfTextureUnits;++e)t.textureUnits[e]=!1}}var MC={newInstance:eE.newInstance(MA,"vtkOpenGLTextureUnitManager"),extend:MA},MS={size:void 0,selector:void 0};function M_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,MS,n),t.size||(t.size=[300,300]),eE.getArray(e,t,["size"],2),eE.get(e,t,["selector"]),Pt.extend(e,t,n),t.classHierarchy.push("vtkRenderWindowViewNode"),e.getViewNodeFactory=function(){return null},e.getAspectRatio=function(){return t.size[0]/t.size[1]},e.getAspectRatioForRenderer=function(e){var n=e.getViewportByReference();return t.size[0]*(n[2]-n[0])/((n[3]-n[1])*t.size[1])},e.isInViewport=function(t,n,i){var o=i.getViewportByReference(),a=e.getFramebufferSize();return o[0]*a[0]<=t&&o[2]*a[0]>=t&&o[1]*a[1]<=n&&o[3]*a[1]>=n},e.getViewportSize=function(t){var n=t.getViewportByReference(),i=e.getFramebufferSize();return[(n[2]-n[0])*i[0],(n[3]-n[1])*i[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(t,n,i){var o=e.getFramebufferSize();return[t/o[0],n/o[1],i]},e.normalizedDisplayToDisplay=function(t,n,i){var o=e.getFramebufferSize();return[t*o[0],n*o[1],i]},e.worldToView=function(e,t,n,i){return i.worldToView(e,t,n)},e.viewToWorld=function(e,t,n,i){return i.viewToWorld(e,t,n)},e.worldToDisplay=function(t,n,i,o){var a=o.worldToView(t,n,i),s=e.getViewportSize(o),l=o.viewToProjection(a[0],a[1],a[2],s[0]/s[1]),u=o.projectionToNormalizedDisplay(l[0],l[1],l[2]);return e.normalizedDisplayToDisplay(u[0],u[1],u[2])},e.displayToWorld=function(t,n,i,o){var a=e.displayToNormalizedDisplay(t,n,i),s=o.normalizedDisplayToProjection(a[0],a[1],a[2]),l=e.getViewportSize(o),u=o.projectionToView(s[0],s[1],s[2],l[0]/l[1]);return o.viewToWorld(u[0],u[1],u[2])},e.normalizedDisplayToViewport=function(t,n,i,o){var a=o.getViewportByReference();a=e.normalizedDisplayToDisplay(a[0],a[1],0);var s=e.normalizedDisplayToDisplay(t,n,i);return[s[0]-a[0]-.5,s[1]-a[1]-.5,i]},e.viewportToNormalizedViewport=function(t,n,i,o){var a=e.getViewportSize(o);return a&&0!==a[0]&&0!==a[1]?[t/(a[0]-1),n/(a[1]-1),i]:[t,n,i]},e.normalizedViewportToViewport=function(t,n,i,o){var a=e.getViewportSize(o);return[t*(a[0]-1),n*(a[1]-1),i]},e.displayToLocalDisplay=function(t,n,i){return[t,e.getFramebufferSize()[1]-n-1,i]},e.viewportToNormalizedDisplay=function(t,n,i,o){var a=o.getViewportByReference(),s=t+(a=e.normalizedDisplayToDisplay(a[0],a[1],0))[0]+.5,l=n+a[1]+.5;return e.displayToNormalizedDisplay(s,l,i)},e.getComputedDevicePixelRatio=function(){return t.size[0]/e.getContainerSize()[0]},e.getContainerSize=function(){eE.vtkErrorMacro("not implemented")},e.getPixelData=function(e,t,n,i){eE.vtkErrorMacro("not implemented")},e.createSelector=function(){eE.vtkErrorMacro("not implemented")}}var MT={newInstance:eE.newInstance(M_,"vtkRenderWindowViewNode"),extend:M_},MO="__getUnderlyingContext";function MP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var MM=eE.vtkDebugMacro,ME=eE.vtkErrorMacro,MD={position:"absolute",top:0,left:0,width:"100%",height:"100%"},MI=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function Mk(e,t,n){var i=e.createFramebuffer(),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),a===e.FRAMEBUFFER_COMPLETE}var MN=0,MR=[];function MB(e){e.preventDefault()}var ML={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function MF(e,t){var n,i,o,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ML,l),MT.extend(e,t,l),t.canvas||(t.canvas=document.createElement("canvas"),t.canvas.style.width="100%"),t.selector||(t.selector=Mp.newInstance(),t.selector.setOpenGLRenderWindow(e)),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t._textureResourceIds=new Map,t._graphicsResources=new Map,t._glInformation=null,t.myFactory=Pu.newInstance(),t.shaderCache=Mb.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=P9.newInstance(),eE.get(e,t,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),eE.setGet(e,t,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),eE.setGetArray(e,t,["size"],2),eE.event(e,t,"imageReady"),eE.event(e,t,"windowResizeEvent"),t.classHierarchy.push("vtkOpenGLRenderWindow"),e.getViewNodeFactory=function(){return t.myFactory},t.canvas.addEventListener("webglcontextlost",MB,!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),o=[0,0],e.onModified(function(){t.renderable&&(t.size[0]===o[0]&&t.size[1]===o[1]||(o[0]=t.size[0],o[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null}),e.buildPass=function(n){n&&t.renderable&&(e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.addMissingNodes(t.renderable.getChildRenderWindowsByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach(function(t){var n;null==(n=t.setOpenGLRenderWindow)||n.call(t,e)}))},e.initialize=function(){if(!t.initialized){if(t.rootOpenGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t.rootOpenGLRenderWindow)t.context2D=e.get2DContext();else{t.context=e.get3DContext(),e.resizeFromChildRenderWindows(),t.context&&(MN++,MR.forEach(function(e){return e(MN)})),t.textureUnitManager=MC.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND)}t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&ME("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect();t.containerSize=[e.width,e.height]}return t.containerSize||t.size},e.getFramebufferSize=function(){var e;return(null==(e=t.activeFramebuffer)?void 0:e.getSize())||t.size},e.getPixelData=function(e,n,i,o){var a=new Uint8Array((i-e+1)*(o-n+1)*4);return t.context.readPixels(e,n,i-e+1,o-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,a),a},e.get3DContext=function(){var e,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},s=null,l="u">typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&l&&(s=t.canvas.getContext("webgl2",a))&&(t.webgl2=!0,MM("using webgl2")),s||(MM("using webgl1"),s=t.canvas.getContext("webgl",a)||t.canvas.getContext("experimental-webgl",a)),new Proxy(s,(n||(e=new Map,i={apply:function(t,n,i){return e.has(i[0])?e.get(i[0]):t.apply(n,i)}},(o=Object.create(null)).getParameter=function(e,t,n,o){return new Proxy(o.bind(e),i)},o.depthMask=function(t,n,i,o){var a;return new Proxy(o.bind(t),(a=t.DEPTH_WRITEMASK,{apply:function(t,n,i){return e.set(a,i[0]),t.apply(n,i)}}))},n={get:function(e,t,n){if(t===MO)return function(){return e};var i=Reflect.get(e,t,e);i instanceof Function&&(i=i.bind(e));var a=o[t];return a?a(e,t,n,i):i}}),n))},e.get2DContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.canvas.getContext("2d",e)},e.restoreContext=function(){var t=PS.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(n){var i=t._textureResourceIds.get(n);if(void 0===i){var o=e.getTextureUnitManager().allocate();o<0?ME("Hardware does not support the number of textures defined."):(t._textureResourceIds.set(n,o),t.context.activeTexture(t.context.TEXTURE0+o))}else t.context.activeTexture(t.context.TEXTURE0+i)},e.deactivateTexture=function(n){var i=t._textureResourceIds.get(n);void 0!==i&&(e.getTextureUnitManager().free(i),t._textureResourceIds.delete(n))},e.getTextureUnitForTexture=function(e){var n=t._textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureByteSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.webgl2)switch(e){case eI.CHAR:case eI.SIGNED_CHAR:case eI.UNSIGNED_CHAR:break;case n:case i:case eI.UNSIGNED_SHORT:case eI.SHORT:case eI.VOID:return 2;default:return 4}return 1},e.getDefaultTextureInternalFormat=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.webgl2)switch(e){case eI.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;default:return t.context.RGBA8}case i&&!o&&eI.UNSIGNED_SHORT:switch(n){case 1:return i.R16_EXT;case 2:return i.RG16_EXT;case 3:return i.RGB16_EXT;default:return i.RGBA16_EXT}case i&&!o&&eI.SHORT:switch(n){case 1:return i.R16_SNORM_EXT;case 2:return i.RG16_SNORM_EXT;case 3:return i.RGB16_SNORM_EXT;default:return i.RGBA16_SNORM_EXT}default:switch(n){case 1:return o?t.context.R16F:t.context.R32F;case 2:return o?t.context.RG16F:t.context.RG32F;case 3:return o?t.context.RGB16F:t.context.RGB32F;default:return o?t.context.RGBA16F:t.context.RGBA32F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.resetCamera,a=void 0!==o&&o,s=i.size,l=void 0===s?null:s,u=i.scale,c=void 0===u?1:u;if(t.deleted)return null;t.imageFormat=n;var d=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:l||1!==c?l||t.size.map(function(e){return e*c}):null},new Promise(function(n,i){var o=e.onImageReady(function(i){if(null===t._screenshot.size)t.notifyStartCaptureImage=d,o.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach(function(e){return(0,e.restoreParamsFn)(e.arg)}),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(i);else{var s,l=document.createElement("img");if(l.style=MD,l.src=i,t._screenshot.placeHolder=t.el.appendChild(l),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,null==(s=t.rootOpenGLRenderWindow)||s.resizeFromChildRenderWindows(),t._screenshot.size=null,e.modified(),a){var u=!0!==a;t._screenshot.cameras=t.renderable.getRenderers().map(function(e){var t=e.getActiveCamera(),n=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:u?{renderer:e}:void 0,resetCameraFn:u?a:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(n))}}),t._screenshot.cameras.forEach(function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)})}e.traverseAllPasses()}})})},e.getHardwareMaximumLineWidth=function(){if(null!=i)return i;var t=e.get3DContext(),n=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);return i=n[1],n[1]},e.getGLInformations=function(){if(t._glInformation)return t._glInformation;for(var n=e.get3DContext(),i=n.getExtension("OES_texture_float"),o=n.getExtension("OES_texture_half_float"),a=n.getExtension("WEBGL_debug_renderer_info"),s=n.getExtension("WEBGL_draw_buffers"),l=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),u=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",l&&n.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[i&&Mk(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",i&&Mk(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",i&&Mk(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",i&&Mk(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",i&&Mk(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[o&&Mk(n,n.RGBA,o.HALF_FLOAT_OES)?"RGBA":"",o&&Mk(n,n.RGB,o.HALF_FLOAT_OES)?"RGB":"",o&&Mk(n,n.LUMINANCE,o.HALF_FLOAT_OES)?"LUMINANCE":"",o&&Mk(n,n.ALPHA,o.HALF_FLOAT_OES)?"ALPHA":"",o&&Mk(n,n.LUMINANCE_ALPHA,o.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[i&&Mk(n,n.RGBA,n.FLOAT)?"RGBA":"",i&&Mk(n,n.RGB,n.FLOAT)?"RGB":"",i&&Mk(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",i&&Mk(n,n.ALPHA,n.FLOAT)?"ALPHA":"",i&&Mk(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",s?n.getParameter(s.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax+"</sup>)"],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax+"</sup>)"],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax+"</sup>)"],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax+"</sup>)"],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax+"</sup>)"],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax+"</sup>)"],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax+"</sup>)"],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax+"</sup>)"],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax+"</sup>)"],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax+"</sup>)"],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax+"</sup>)"],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision+" (-2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin+"</sup> - 2<sup>"+n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax+"</sup>)"],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",a&&n.getParameter(a.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",a&&n.getParameter(a.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],c={};u.length;){var d=b(u.pop(),3),f=d[0],p=d[1],h=d[2];p&&(c[p]={label:f,value:h})}return t._glInformation=c,c},e.traverseAllPasses=function(){if(t.renderPasses)for(var n,i=0;i<t.renderPasses.length;++i)t.renderPasses[i].traverse(e,null);e.copyParentContent(),t.notifyStartCaptureImage&&function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,i=document.createElement("canvas"),o=i.getContext("2d");i.width=t.canvas.width,i.height=t.canvas.height,o.drawImage(t.canvas,0,0);var a=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach(function(e){e.getViewProps().forEach(function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var i=t[n],s=i.getBoundingClientRect(),l=s.x-a.x,u=s.y-a.y;o.drawImage(i,l,u)}})});var s=i.toDataURL(n);i.remove(),e.invokeImageReady(s)}();for(var o=t.renderable.getChildRenderWindowsByReference(),a=0;a<o.length;++a)null==(n=e.getViewNodeFor(o[a]))||n.traverseAllPasses()},e.copyParentContent=function(){var e=t.rootOpenGLRenderWindow;if(e&&t.context2D&&!t.children.some(function(e){var t;return!(null==(t=e.getSelector)||!t.call(e))})){var n=e.getCanvas(),i=t.canvas;t.context2D.drawImage(n,0,n.height-i.height,i.width,i.height,0,0,i.width,i.height)}},e.resizeFromChildRenderWindows=function(){var n=t.renderable.getChildRenderWindowsByReference();if(n.length>0){for(var i=[0,0],o=0;o<n.length;++o){var a,s=null==(a=e.getViewNodeFor(n[o]))?void 0:a.getSize();s&&(i[0]=s[0]>i[0]?s[0]:i[0],i[1]=s[1]>i[1]?s[1]:i[1])}e.setSize.apply(e,i)}},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(function(t){return e.setBackgroundImage(t.image)}),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.createSelector=function(){var t=Mp.newInstance();return t.setOpenGLRenderWindow(e),t},e.delete=eE.chain(function(){t.context&&(MN--,MR.forEach(function(e){return e(MN)})),e.setContainer(),e.setViewStream()},function(){t.canvas.removeEventListener("webglcontextlost",MB),t.canvas.removeEventListener("webglcontextrestored",e.restoreContext)},e.delete),e.setActiveFramebuffer=function(e){t.activeFramebuffer=e},a=e.setSize,e.setSize=function(t,n){var i=a(t,n);return i&&e.invokeWindowResizeEvent({width:t,height:n}),i},e.registerGraphicsResourceUser=function(n,i){t._graphicsResources.has(n)||e.setGraphicsResourceForObject(n,null,null);var o=t._graphicsResources.get(n);null==o||o.users.add(i)},e.unregisterGraphicsResourceUser=function(n,i){var o,a=t._graphicsResources.get(n);a&&(a.users.delete(i),a.users.size||(null==(o=a.oglObject)||o.releaseGraphicsResources(e),t._graphicsResources.delete(n)))},e.getGraphicsResourceForObject=function(e){return t._graphicsResources.get(e)},e.setGraphicsResourceForObject=function(n,i,o){var a,s;if(n){var l=t._graphicsResources.get(n);null==l||null==(a=l.oglObject)||a.releaseGraphicsResources(e),t._graphicsResources.set(n,{coreObject:n,oglObject:i,hash:o,users:null!=(s=null==l?void 0:l.users)?s:new Set})}},e.getGraphicsMemoryInfo=function(){var e=0;return t._graphicsResources.forEach(function(t){var n=t.oglObject;e+=n.getAllocatedGPUMemoryInBytes()}),e},e.releaseGraphicsResources=function(){null!==t.shaderCache&&t.shaderCache.releaseGraphicsResources(e),t._graphicsResources.forEach(function(t){t.oglObject.releaseGraphicsResources(e)}),t._graphicsResources.clear(),null!==t.textureUnitManager&&t.textureUnitManager.freeAll(),t.renderable.getRenderersByReference().forEach(function(t){var n=e.getViewNodeFor(t);null==n||n.releaseGraphicsResources()})},s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MP(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),MI.forEach(function(n){e[n]=function(){var e;return t.rootOpenGLRenderWindow?(e=t.rootOpenGLRenderWindow)[n].apply(e,arguments):s[n].apply(s,arguments)}})}var MV=eE.newInstance(MF,"vtkOpenGLRenderWindow");Od.WebGL=MV,Po.vtkRenderWindow=MV;var Mj={device:null,handle:null};function MG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mj,n),eE.obj(e,t),eE.get(e,t,["lastCameraMTime"]),eE.setGet(e,t,["device","handle"]),t.classHierarchy.push("vtkWebGPUShaderModule"),e.initialize=function(e,n){t.device=e,t.handle=t.device.getHandle().createShaderModule({code:n.getCode()})}}var MU={newInstance:eE.newInstance(MG,"vtkWebGPUShaderModule"),extend:MG},Mz={shaderModules:null,device:null,window:null};function MW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mz,n),t._shaderModules=new Map,eE.obj(e,t),eE.setGet(e,t,["device","window"]),t.classHierarchy.push("vtkWebGPUShaderCache"),e.getShaderModule=function(e){for(var n=e.getType(),i=e.getHash(),o=t._shaderModules.keys(),a=0;a<o.length;a++){var s=o[a];if(s.getHash()===i&&s.getType()===n)return t._shaderModules.get(s)}var l=MU.newInstance();return l.initialize(t.device,e),t._shaderModules.set(e,l),l}}var MH={newInstance:eE.newInstance(MW,"vtkWebGPUShaderCache"),extend:MW,substitute:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Array.isArray(n)?n.join("\n"):n,a=!1;-1!==e.search(t)&&(a=!0);var s="";i&&(s="g");var l=new RegExp(t,s);return{replace:a,result:e.replace(l,o)}}},Mq={device:null,handle:null,label:null};function MK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mq,n),eE.obj(e,t),t.bindables=[],t.bindGroupTime={},eE.obj(t.bindGroupTime,{mtime:0}),eE.get(e,t,["bindGroupTime","handle","sizeInBytes","usage"]),eE.setGet(e,t,["label","device","arrayInformation"]),t.classHierarchy.push("vtkWebGPUBindGroup"),e.setBindables=function(n){if(t.bindables.length===n.length){for(var i=!0,o=0;o<t.bindables.length;o++)t.bindables[o]!==n[o]&&(i=!1);if(i)return}t.bindables=n,e.modified()},e.getBindGroupLayout=function(e){for(var n=[],i=0;i<t.bindables.length;i++){var o=t.bindables[i].getBindGroupLayoutEntry();o.binding=i,n.push(o)}return e.getBindGroupLayout({entries:n})},e.getBindGroup=function(n){for(var i=e.getMTime(),o=0;o<t.bindables.length;o++){var a=t.bindables[o].getBindGroupTime().getMTime();i=a>i?a:i}if(i<t.bindGroupTime.getMTime())return t.bindGroup;for(var s=[],l=0;l<t.bindables.length;l++){var u=t.bindables[l].getBindGroupEntry();u.binding=l,s.push(u)}return t.bindGroup=n.getHandle().createBindGroup({layout:e.getBindGroupLayout(n),entries:s,label:t.label}),t.bindGroupTime.modified(),t.bindGroup},e.getShaderCode=function(e){for(var n=[],i=e.getBindGroupLayoutCount(t.label),o=0;o<t.bindables.length;o++)n.push(t.bindables[o].getShaderCode(o,i));return n.join("\n")}}var MX={newInstance:eE.newInstance(MK),extend:MK},MY={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function MZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,MY,n),es(e,t),t.layouts=[],t.shaderDescriptions=[],eu(e,t,["handle","pipelineDescription"]),ep(e,t,["device","renderEncoder","topology","vertexState"]),t.classHierarchy.push("vtkWebGPUPipeline"),e.getShaderDescriptions=function(){return t.shaderDescriptions},e.initialize=function(e,n){t.pipelineDescription=t.renderEncoder.getPipelineSettings(),t.pipelineDescription.primitive.topology=t.topology,t.pipelineDescription.vertex=t.vertexState,t.pipelineDescription.label=n;for(var i=[],o=0;o<t.layouts.length;o++)i.push(t.layouts[o].layout);t.pipelineLayout=e.getHandle().createPipelineLayout({bindGroupLayouts:i}),t.pipelineDescription.layout=t.pipelineLayout;for(var a=0;a<t.shaderDescriptions.length;a++){var s=t.shaderDescriptions[a],l=e.getShaderModule(s);"vertex"===s.getType()&&(t.pipelineDescription.vertex.module=l.getHandle(),t.pipelineDescription.vertex.entryPoint="main"),"fragment"===s.getType()&&(t.pipelineDescription.fragment.module=l.getHandle(),t.pipelineDescription.fragment.entryPoint="main")}t.handle=e.getHandle().createRenderPipeline(t.pipelineDescription)},e.getShaderDescription=function(e){for(var n=0;n<t.shaderDescriptions.length;n++)if(t.shaderDescriptions[n].getType()===e)return t.shaderDescriptions[n];return null},e.addBindGroupLayout=function(e){e&&t.layouts.push({layout:e.getBindGroupLayout(t.device),label:e.getLabel()})},e.getBindGroupLayout=function(e){return t.layouts[e].layout},e.getBindGroupLayoutCount=function(e){for(var n=0;n<t.layouts.length;n++)if(t.layouts[n].label===e)return n;return 0},e.bindVertexInput=function(e,t){t.bindBuffers(e)}}var MJ={newInstance:ew(MZ,"vtkWebGPUPipeline"),extend:MZ},MQ={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function M$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,MQ,n),t.outputNames=[],t.outputTypes=[],t.outputInterpolations=[],t.builtinOutputNames=[],t.builtinOutputTypes=[],t.builtinInputNames=[],t.builtinInputTypes=[],eE.obj(e,t),eE.setGet(e,t,["type","hash","code"]),eE.getArray(e,t,["outputTypes","outputNames","outputInterpolations"]),t.classHierarchy.push("vtkWebGPUShaderDescription"),e.hasOutput=function(e){return t.outputNames.includes(e)},e.addOutput=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t.outputTypes.push(e),t.outputNames.push(n),t.outputInterpolations.push(i)},e.addBuiltinOutput=function(e,n){t.builtinOutputTypes.push(e),t.builtinOutputNames.push(n)},e.addBuiltinInput=function(e,n){t.builtinInputTypes.push(e),t.builtinInputNames.push(n)},e.replaceShaderCode=function(e,n){var i=[],o=[];if(n&&i.push(n.getShaderCode()),e||t.builtinInputNames.length){var a=[];if(a.push("struct ".concat(t.type,"Input\n{")),e)for(var s=e.getOutputNamesByReference(),l=e.getOutputTypesByReference(),u=e.getOutputInterpolationsByReference(),c=0;c<s.length;c++)void 0!==u[c]?a.push("  @location(".concat(c,") @interpolate(").concat(u[c],") ").concat(s[c]," : ").concat(l[c],",")):a.push("  @location(".concat(c,") ").concat(s[c]," : ").concat(l[c],","));for(var d=0;d<t.builtinInputNames.length;d++)a.push("  ".concat(t.builtinInputNames[d]," : ").concat(t.builtinInputTypes[d],","));a.length>1&&(a.push("};"),o=a,i[i.length-1]+=",",i.push("input: ".concat(t.type,"Input")))}if(i.length&&(t.code=MH.substitute(t.code,"//VTK::IOStructs::Input",i).result),t.outputNames.length+t.builtinOutputNames.length){for(var f=["struct ".concat(t.type,"Output\n{")],p=0;p<t.outputNames.length;p++)void 0!==t.outputInterpolations[p]?f.push("  @location(".concat(p,") @interpolate(").concat(t.outputInterpolations[p],") ").concat(t.outputNames[p]," : ").concat(t.outputTypes[p],",")):f.push("  @location(".concat(p,") ").concat(t.outputNames[p]," : ").concat(t.outputTypes[p],","));for(var h=0;h<t.builtinOutputNames.length;h++)f.push("  ".concat(t.builtinOutputNames[h]," : ").concat(t.builtinOutputTypes[h],","));f.push("};"),o=o.concat(f),t.code=MH.substitute(t.code,"//VTK::IOStructs::Output",["-> ".concat(t.type,"Output")]).result}t.code=MH.substitute(t.code,"//VTK::IOStructs::Dec",o).result}}var M0={newInstance:eE.newInstance(M$,"vtkWebGPUShaderDescription"),extend:M$},M1={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}},M2=function(e){return!e||e.length<6?0:e in M1==!0?M1[e]:(Z("unknown format ".concat(e)),null)},M3=function(e){if(!e||e.length<5)return 0;var t=1;"x"===e[e.length-2]&&(t=Number(e[e.length-1]));var n=1===t?e.length-1:e.length-3,i=Number(e[n]);return Number.isNaN(i)?(Z("unknown format ".concat(e)),0):t*(5-i/2)},M4=function(e){if(!e||e.length<5)return 0;var t=1;return"x"===e[e.length-2]&&(t=Number(e[e.length-1])),t},M5=function(e){if(!e||e.length<5)return 0;if("f"===e[0])t="Float";else if("s"===e[0])t="Int";else{if("u"!==e[0])return void Z("unknown format ".concat(e));t="Uint"}var t,n=e.split("x")[0],i=Number(n[n.length-1]);if(!Number.isNaN(i))return t+=8*(5-i/2),t+="Array";Z("unknown format ".concat(e))},M6=function(e){if("f"===e[0]||"n"===e[1])t="f32";else if("s"===e[0]&&"i"===e[1])t="i32";else{if("u"!==e[0]||"i"!==e[1])return void Z("unknown format ".concat(e));t="u32"}var t,n=1;return"x"===e[e.length-2]&&(n=Number(e[e.length-1])),4===n?"vec4<".concat(t,">"):3===n?"vec3<".concat(t,">"):2===n?"vec2<".concat(t,">"):t},M8=function(e){if(!e)return 0;var t=1;return"vec"===e.substring(0,3)?t=Number(e[3]):"mat"===e.substring(0,3)&&(t=e[3]*e[5]),4*t},M9=function(e){if(e)return e.includes("f32")?"Float32Array":e.includes("i32")?"Int32Array":e.includes("u32")?"Uint32Array":void Z("unknown format ".concat(e))},M7={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,M7,n),es(e,t),t.bindingDescriptions=[],t.attributeDescriptions=[],t.inputs=[],ep(e,t,["created","device","handle","indexBuffer"]),t.classHierarchy.push("vtkWebGPUVertexInput"),e.addBuffer=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertex",o=n;Array.isArray(o)||(o=[o]);for(var a=0;a<t.inputs.length;a++)if(function(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!t.includes(e[n]))return!1;return!0}(t.inputs[a].names,o)){if(t.inputs[a].buffer===e)return;return void(t.inputs[a].buffer=e)}t.inputs.push({buffer:e,stepMode:i,names:o}),t.inputs=t.inputs.sort(function(e,t){return e.names[0]<t.names[0]?-1:+(e.names[0]>t.names[0])})},e.removeBufferIfPresent=function(e){for(var n=0;n<t.inputs.length;n++)t.inputs[n].names.includes(e)&&t.inputs.splice(n,1)},e.getBuffer=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer;return null},e.hasAttribute=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return!0;return!1},e.getAttributeTime=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer.getSourceTime();return 0},e.getShaderCode=function(){for(var e="",n=0,i=0;i<t.inputs.length;i++)for(var o=0;o<t.inputs[i].names.length;o++){var a=M6(t.inputs[i].buffer.getArrayInformation()[o].format);n>0&&(e+=",\n"),e="".concat(e,"  @location(").concat(n,") ").concat(t.inputs[i].names[o]," : ").concat(a),n++}return e},e.getVertexInputInformation=function(){var e={};if(t.inputs.length){for(var n=[],i=0,o=0;o<t.inputs.length;o++){for(var a=t.inputs[o].buffer,s={arrayStride:a.getStrideInBytes(),stepMode:t.inputs[o].stepMode,attributes:[]},l=a.getArrayInformation(),u=0;u<t.inputs[o].names.length;u++)s.attributes.push({shaderLocation:i,offset:l[u].offset,format:l[u].format}),i++;n.push(s)}e.buffers=n}return e},e.bindBuffers=function(e){for(var n=0;n<t.inputs.length;n++)e.setVertexBuffer(n,t.inputs[n].buffer.getHandle());t.indexBuffer&&e.setIndexBuffer(t.indexBuffer.getHandle(),t.indexBuffer.getArrayInformation()[0].format)},e.getReady=function(){},e.releaseGraphicsResources=function(){t.created&&(t.inputs=[],t.bindingDescriptions=[],t.attributeDescriptions=[])}}var Et={newInstance:ew(Ee,"vtkWebGPUVertexInput"),extend:Ee},En={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function Er(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,En,n),Pt.extend(e,t,n),t.textureViews=[],t.vertexInput=Et.newInstance(),t.bindGroup=MX.newInstance({label:"mapperBG"}),t.additionalBindables=[],t.fragmentShaderTemplate=t.fragmentShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",t.vertexShaderTemplate=t.vertexShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  // var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t.shaderReplacements=new Map,eE.get(e,t,["pipeline","vertexInput"]),eE.setGet(e,t,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),t.classHierarchy.push("vtkWebGPUSimpleMapper"),e.generateShaderDescriptions=function(n,i,o){var a=M0.newInstance({type:"vertex",hash:n,code:t.vertexShaderTemplate}),s=M0.newInstance({type:"fragment",hash:n,code:t.fragmentShaderTemplate}),l=i.getShaderDescriptions();l.push(a),l.push(s);for(var u=t.vertexShaderTemplate+t.fragmentShaderTemplate,c=RegExp("//VTK::[^:]*::","g"),d=u.match(c).filter(function(e,t,n){return n.indexOf(e)===t}),f=d.map(function(e){return"replaceShader".concat(e.substring(7,e.length-2))}),p=0;p<f.length;p++){var h=f[p];"replaceShaderIOStructs"!==h&&t.shaderReplacements.has(h)&&t.shaderReplacements.get(h)(n,i,o)}e.replaceShaderIOStructs(n,i,o)},e.replaceShaderIOStructs=function(e,t,n){var i=t.getShaderDescription("vertex");i.replaceShaderCode(null,n),t.getShaderDescription("fragment").replaceShaderCode(i)},e.replaceShaderRenderEncoder=function(e,n,i){t.renderEncoder.replaceShaderCode(n)},t.shaderReplacements.set("replaceShaderRenderEncoder",e.replaceShaderRenderEncoder),e.replaceShaderRenderer=function(e,n,i){if(t.WebGPURenderer){var o=t.WebGPURenderer.getBindGroup().getShaderCode(n),a=n.getShaderDescription("vertex"),s=a.getCode();s=MH.substitute(s,"//VTK::Renderer::Dec",[o]).result,a.setCode(s);var l=n.getShaderDescription("fragment");s=l.getCode(),s=MH.substitute(s,"//VTK::Renderer::Dec",[o]).result,l.setCode(s)}},t.shaderReplacements.set("replaceShaderRenderer",e.replaceShaderRenderer),e.replaceShaderMapper=function(e,n,i){var o=t.bindGroup.getShaderCode(n),a=n.getShaderDescription("vertex"),s=a.getCode();s=MH.substitute(s,"//VTK::Mapper::Dec",[o]).result,a.setCode(s);var l=n.getShaderDescription("fragment");l.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),s=l.getCode(),s=MH.substitute(s,"//VTK::Mapper::Dec",[o]).result,l.setCode(s)},t.shaderReplacements.set("replaceShaderMapper",e.replaceShaderMapper),e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,i.setCode(o)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=function(e,t,n){t.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.addTextureView=function(e){t.textureViews.includes(e)||t.textureViews.push(e)},e.prepareToDraw=function(n){t.renderEncoder=n,e.updateInput(),e.updateBuffers(),e.updateBindings(),e.updatePipeline()},e.updateInput=function(){},e.updateBuffers=function(){},e.updateBindings=function(){t.bindGroup.setBindables(e.getBindables())},e.computePipelineHash=function(){},e.registerDrawCallback=function(n){n.registerDrawCallback(t.pipeline,e.draw)},e.prepareAndDraw=function(n){e.prepareToDraw(n),n.setPipeline(t.pipeline),e.draw(n)},e.draw=function(e){var n=e.getBoundPipeline();e.activateBindGroup(t.bindGroup),t.WebGPURenderer&&t.WebGPURenderer.bindUBO(e),n.bindVertexInput(e,t.vertexInput);var i=t.vertexInput.getIndexBuffer();i?e.drawIndexed(i.getIndexCount(),t.numberOfInstances,0,0,0):e.draw(t.numberOfVertices,t.numberOfInstances,0,0)},e.getBindables=function(){var e=m(t.additionalBindables);t.UBO&&e.push(t.UBO),t.SSBO&&e.push(t.SSBO);for(var n=0;n<t.textureViews.length;n++){e.push(t.textureViews[n]);var i=t.textureViews[n].getSampler();i&&e.push(i)}return e},e.updatePipeline=function(){e.computePipelineHash(),t.pipeline=t.device.getPipeline(t.pipelineHash),t.pipeline||(t.pipeline=MJ.newInstance(),t.pipeline.setDevice(t.device),t.WebGPURenderer&&t.pipeline.addBindGroupLayout(t.WebGPURenderer.getBindGroup()),t.pipeline.addBindGroupLayout(t.bindGroup),e.generateShaderDescriptions(t.pipelineHash,t.pipeline,t.vertexInput),t.pipeline.setTopology(t.topology),t.pipeline.setRenderEncoder(t.renderEncoder),t.pipeline.setVertexState(t.vertexInput.getVertexInputInformation()),t.device.createPipeline(t.pipelineHash,t.pipeline))}}var Ei={newInstance:eE.newInstance(Er,"vtkWebGPUSimpleMapper"),extend:Er},Eo={};function Ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Eo,n),Ei.extend(e,t,n),t.classHierarchy.push("vtkWebGPUFullScreenQuad"),e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.addOutput("vec4<f32>","vertexVC");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,i.setCode(o)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.updateBuffers=function(){var e=t.device.getBufferManager().getFullScreenQuadBuffer();t.vertexInput.addBuffer(e,["vertexBC"]),t.numberOfVertices=6}}var Es={newInstance:eE.newInstance(Ea,"vtkWebGPUFullScreenQuad"),extend:Ea},El=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"],Eu={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function Ec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Eu,n),es(e,t),t.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},t.replaceShaderCodeFunction=function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,t.setCode(n)},t.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},t.colorTextureViews=[],eu(e,t,["boundPipeline","colorTextureViews"]),ep(e,t,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),function(e,t){t.classHierarchy.push("vtkWebGPURenderEncoder"),e.begin=function(e){t.drawCallbacks=[],t.handle=e.beginRenderPass(t.description),t.label&&t.handle.pushDebugGroup(t.label)},e.end=function(){for(var n=0;n<t.drawCallbacks.length;n++){var i=t.drawCallbacks[n],o=i.pipeline;e.setPipeline(o);for(var a=0;a<i.callbacks.length;a++)i.callbacks[a](e)}t.label&&t.handle.popDebugGroup(),t.handle.end(),t.boundPipeline=null},e.setPipeline=function(e){if(t.boundPipeline!==e){t.handle.setPipeline(e.getHandle());var n=e.getPipelineDescription();if(t.colorTextureViews.length!==n.fragment.targets.length)console.log("mismatched attachment counts on pipeline ".concat(n.fragment.targets.length," while encoder has ").concat(t.colorTextureViews.length)),console.trace();else for(var i=0;i<t.colorTextureViews.length;i++){var o,a=null==(o=t.colorTextureViews[i].getTexture())?void 0:o.getFormat();a&&a!==n.fragment.targets[i].format&&(console.log("mismatched attachments for attachment ".concat(i," on pipeline ").concat(n.fragment.targets[i].format," while encoder has ").concat(a)),console.trace())}if(!t.depthTextureView!=!("depthStencil"in n))console.log("mismatched depth attachments"),console.trace();else if(t.depthTextureView){var s,l=null==(s=t.depthTextureView.getTexture())?void 0:s.getFormat();l&&l!==n.depthStencil.format&&(console.log("mismatched depth attachments on pipeline ".concat(n.depthStencil.format," while encoder has ").concat(l)),console.trace())}t.boundPipeline=e}},e.replaceShaderCode=function(e){t.replaceShaderCodeFunction(e)},e.setColorTextureView=function(e,n){t.colorTextureViews[e]!==n&&(t.colorTextureViews[e]=n)},e.activateBindGroup=function(e){var n=t.boundPipeline.getDevice(),i=t.boundPipeline.getBindGroupLayoutCount(e.getLabel());t.handle.setBindGroup(i,e.getBindGroup(n));var o=n.getBindGroupLayoutDescription(e.getBindGroupLayout(n)),a=n.getBindGroupLayoutDescription(t.boundPipeline.getBindGroupLayout(i));o!==a&&(console.log("renderEncoder ".concat(t.pipelineHash," mismatched bind group layouts bind group has\n").concat(o,"\n versus pipeline\n").concat(a,"\n")),console.trace())},e.attachTextureViews=function(){for(var e=0;e<t.colorTextureViews.length;e++)t.description.colorAttachments[e]?t.description.colorAttachments[e].view=t.colorTextureViews[e].getHandle():t.description.colorAttachments[e]={view:t.colorTextureViews[e].getHandle()};t.depthTextureView&&(t.description.depthStencilAttachment.view=t.depthTextureView.getHandle())},e.registerDrawCallback=function(e,n){for(var i=0;i<t.drawCallbacks.length;i++)if(t.drawCallbacks[i].pipeline===e)return void t.drawCallbacks[i].callbacks.push(n);t.drawCallbacks.push({pipeline:e,callbacks:[n]})};for(var n=function(n){e[El[n]]=function(){var e;return(e=t.handle)[El[n]].apply(e,arguments)}},i=0;i<El.length;i++)n(i)}(e,t)}var Ed={newInstance:ew(Ec,"vtkWebGPURenderEncoder"),extend:Ec},Ef={device:null,handle:null,label:null,options:null};function Ep(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ef,n),eE.obj(e,t),t.options={},t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},t.bindGroupTime={},eE.obj(t.bindGroupTime,{mtime:0}),eE.get(e,t,["bindGroupTime","handle","options"]),eE.setGet(e,t,["bindGroupLayoutEntry","device","label"]),t.classHierarchy.push("vtkWebGPUSampler"),e.create=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.device=e,t.options.addressModeU=n.addressModeU?n.addressModeU:"clamp-to-edge",t.options.addressModeV=n.addressModeV?n.addressModeV:"clamp-to-edge",t.options.addressModeW=n.addressModeW?n.addressModeW:"clamp-to-edge",t.options.magFilter=n.magFilter?n.magFilter:"nearest",t.options.minFilter=n.minFilter?n.minFilter:"nearest",t.options.mipmapFilter=n.mipmapFilter?n.mipmapFilter:"nearest",t.options.label=t.label,t.handle=t.device.getHandle().createSampler(t.options),t.bindGroupTime.modified()},e.getShaderCode=function(e,n){return"@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": sampler;")},e.getBindGroupEntry=function(){return{resource:t.handle}}}var Eh={newInstance:eE.newInstance(Ep),extend:Ep},Em={texture:null,handle:null,sampler:null,label:null};function Eg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Em,n),eE.obj(e,t),t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},t.bindGroupTime={},eE.obj(t.bindGroupTime,{mtime:0}),eE.get(e,t,["bindGroupTime","texture"]),eE.setGet(e,t,["bindGroupLayoutEntry","label","sampler"]),t.classHierarchy.push("vtkWebGPUTextureView"),e.create=function(e,n){t.texture=e,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var i=M2(t.texture.getFormat());t.bindGroupLayoutEntry.texture.sampleType=i.sampleType},e.createFromTextureHandle=function(e,n){t.texture=null,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e,t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var i=M2(n.format);t.bindGroupLayoutEntry.texture.sampleType=i.sampleType,t.bindGroupTime.modified()},e.getBindGroupEntry=function(){return{resource:e.getHandle()}},e.getShaderCode=function(e,n){var i="f32";"sint"===t.bindGroupLayoutEntry.texture.sampleType?i="i32":"uint"===t.bindGroupLayoutEntry.texture.sampleType&&(i="u32");var o="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_").concat(t.options.dimension,"<").concat(i,">;");return"depth"===t.bindGroupLayoutEntry.texture.sampleType&&(o="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_depth_").concat(t.options.dimension,";")),o},e.addSampler=function(n,i){var o=Eh.newInstance({label:"".concat(t.label,"Sampler")});o.create(n,i),e.setSampler(o)},e.getBindGroupTime=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.bindGroupTime},e.getHandle=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.handle}}var Ev={newInstance:eE.newInstance(Eg),extend:Eg},Ey={device:null,handle:null,buffer:null,ready:!1,label:null};function Eb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ey,n),eE.obj(e,t),eE.get(e,t,["handle","ready","width","height","depth","format","usage"]),eE.setGet(e,t,["device","label"]),t.classHierarchy.push("vtkWebGPUTexture"),e.create=function(e,n){t.device=e,t.width=n.width,t.height=n.height,t.depth=n.depth?n.depth:1;var i=1===t.depth?"2d":"3d";t.format=n.format?n.format:"rgba8unorm",t.mipLevel=n.mipLevel?n.mipLevel:0,t.usage=n.usage?n.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label,dimension:i,mipLevelCount:t.mipLevel+1})},e.assignFromHandle=function(e,n,i){t.device=e,t.handle=n,t.width=i.width,t.height=i.height,t.depth=i.depth?i.depth:1,t.format=i.format?i.format:"rgba8unorm",t.usage=i.usage?i.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},e.writeImageData=function(n){var i=[],o=function(i){t.device.getHandle().queue.copyExternalImageToTexture({source:i,flipY:n.flip},{texture:t.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[i.width,i.height,t.depth]),3!==e.getDimensionality()&&t.mipLevel>0&&xQ.generateMipmaps(t.device.getHandle(),t.handle,t.mipLevel+1),t.ready=!0};if(n.canvas)o(n.canvas);else{if(n.imageBitmap)return n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.imageBitmap);if(n.jsImageData)return n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.jsImageData);if(n.image)return n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.image);var a=M2(t.format),s=(t.width,a.stride);n.nativeArray&&(i=n.nativeArray);var l=3===e.getDimensionality(),u=function(e,t,n){var i=2===a.elementSize&&"float"===a.sampleType,o=e.BYTES_PER_ELEMENT,s=e.length/(t*n)*o;if(!i&&s%256==0)return[e,s];var l=s/o,u=a.elementSize,c=256*Math.floor((l*u+255)/256),d=c/u,f=eE.newTypedArray(i?"Uint16Array":e.constructor.name,d*t*n),p=t*n;if(i)for(var h=0;h<p;h++)for(var m=h*l,g=h*d,v=0;v<l;v++)f[g+v]=n3.toHalf(e[m+v]);else if(d===l)f.set(e);else for(var y=0;y<p;y++)f.set(e.subarray(y*l,(y+1)*l),y*d);return[f,c]}(i,t.height,l?t.depth:1);s=u[1];var c=u[0];t.device.getHandle().queue.writeTexture({texture:t.handle,mipLevel:0,origin:{x:0,y:0,z:0}},c,{offset:0,bytesPerRow:s,rowsPerImage:t.height},{width:t.width,height:t.height,depthOrArrayLayers:l?t.depth:1}),!l&&t.mipLevel>0&&xQ.generateMipmaps(t.device.getHandle(),t.handle,t.mipLevel+1),t.ready=!0}},e.getScale=function(){var e=M2(t.format);return 2===e.elementSize&&"float"===e.sampleType?1:255},e.getNumberOfComponents=function(){return M2(t.format).numComponents},e.getDimensionality=function(){var e=0;return t.width>1&&e++,t.height>1&&e++,t.depth>1&&e++,e},e.resizeToMatch=function(e){e.getWidth()===t.width&&e.getHeight()===t.height&&e.getDepth()===t.depth||(t.width=e.getWidth(),t.height=e.getHeight(),t.depth=e.getDepth(),t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.resize=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e===t.width&&n===t.height&&i===t.depth||(t.width=e,t.height=n,t.depth=i,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.createView=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.dimension||(i.dimension=1===t.depth?"2d":"3d");var o=Ev.newInstance({label:n});return o.create(e,i),o}}var Ex={newInstance:eE.newInstance(Eb),extend:Eb},Ew={renderEncoder:null,colorTexture:null,depthTexture:null};function EA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ew,n),PS.extend(e,t,n),eE.get(e,t,["colorTexture","depthTexture"]),t.classHierarchy.push("vtkWebGPUOpaquePass"),e.traverse=function(n,i){if(!t.deleted){t._currentParent=i;var o=i.getDevice();if(t.renderEncoder)t.colorTexture.resize(i.getCanvas().width,i.getCanvas().height),t.depthTexture.resize(i.getCanvas().width,i.getCanvas().height);else{e.createRenderEncoder(),t.colorTexture=Ex.newInstance({label:"opaquePassColor"}),t.colorTexture.create(o,{width:i.getCanvas().width,height:i.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var a=t.colorTexture.createView("opaquePassColorTexture");t.renderEncoder.setColorTextureView(0,a),t.depthFormat="depth32float",t.depthTexture=Ex.newInstance({label:"opaquePassDepth"}),t.depthTexture.create(o,{width:i.getCanvas().width,height:i.getCanvas().height,format:t.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var s=t.depthTexture.createView("opaquePassDepthTexture");t.renderEncoder.setDepthTextureView(s)}t.renderEncoder.attachTextureViews(),e.setCurrentOperation("opaquePass"),n.setRenderEncoder(t.renderEncoder),n.traverse(e)}},e.getColorTextureView=function(){return t.renderEncoder.getColorTextureViews()[0]},e.getDepthTextureView=function(){return t.renderEncoder.getDepthTextureView()},e.createRenderEncoder=function(){t.renderEncoder=Ed.newInstance({label:"OpaquePass"}),t.renderEncoder.setPipelineHash("op")}}var EC={newInstance:eE.newInstance(EA,"vtkWebGPUOpaquePass"),extend:EA},ES={colorTextureView:null,depthTextureView:null};function E_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ES,n),PS.extend(e,t,n),eE.setGet(e,t,["colorTextureView","depthTextureView"]),t.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),e.traverse=function(n,i){if(!t.deleted){t._currentParent=i;var o=i.getDevice();if(t.translucentRenderEncoder)t.translucentColorTexture.resizeToMatch(t.colorTextureView.getTexture()),t.translucentAccumulateTexture.resizeToMatch(t.colorTextureView.getTexture());else{e.createRenderEncoder(),e.createFinalEncoder(),t.translucentColorTexture=Ex.newInstance({label:"translucentPassColor"}),t.translucentColorTexture.create(o,{width:i.getCanvas().width,height:i.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var a=t.translucentColorTexture.createView("oitpColorTexture");t.translucentRenderEncoder.setColorTextureView(0,a),t.translucentAccumulateTexture=Ex.newInstance({label:"translucentPassAccumulate"}),t.translucentAccumulateTexture.create(o,{width:i.getCanvas().width,height:i.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var s=t.translucentAccumulateTexture.createView("oitpAccumTexture");t.translucentRenderEncoder.setColorTextureView(1,s),t.fullScreenQuad=Es.newInstance(),t.fullScreenQuad.setDevice(i.getDevice()),t.fullScreenQuad.setPipelineHash("oitpfsq"),t.fullScreenQuad.setTextureViews(t.translucentRenderEncoder.getColorTextureViews()),t.fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));\n  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;\n  if (reveal == 1.0) { discard; }\n  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);\n  var total: f32 = max(tcolor.a, 0.01);\n  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n")}t.translucentRenderEncoder.setDepthTextureView(t.depthTextureView),t.translucentRenderEncoder.attachTextureViews(),e.setCurrentOperation("translucentPass"),n.setRenderEncoder(t.translucentRenderEncoder),n.traverse(e),e.finalPass(i,n)}},e.finalPass=function(e,n){t.translucentFinalEncoder.setColorTextureView(0,t.colorTextureView),t.translucentFinalEncoder.attachTextureViews(),t.translucentFinalEncoder.begin(e.getCommandEncoder()),n.scissorAndViewport(t.translucentFinalEncoder),t.fullScreenQuad.prepareAndDraw(t.translucentFinalEncoder),t.translucentFinalEncoder.end()},e.getTextures=function(){return[t.translucentColorTexture,t.translucentAccumulateTexture]},e.createRenderEncoder=function(){t.translucentRenderEncoder=Ed.newInstance({label:"translucentRender"});var e=t.translucentRenderEncoder.getDescription();e.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],e.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},t.translucentRenderEncoder.setReplaceShaderCodeFunction(function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addOutput("f32","outAccum"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,t.setCode(n)}),t.translucentRenderEncoder.setPipelineHash("oitpr"),t.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createFinalEncoder=function(){t.translucentFinalEncoder=Ed.newInstance({label:"translucentFinal"}),t.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t.translucentFinalEncoder.setReplaceShaderCodeFunction(function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)}),t.translucentFinalEncoder.setPipelineHash("oitpf"),t.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}var ET={newInstance:eE.newInstance(E_,"vtkWebGPUOrderIndependentTranslucentPass"),extend:E_},EO={BufferUsage:{Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},PrimitiveTypes:{Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6}};function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var EM=["getMappedRange","mapAsync","unmap"],EE={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function ED(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,EE,n),eE.obj(e,t),eE.get(e,t,["handle","sizeInBytes","usage"]),eE.setGet(e,t,["strideInBytes","device","arrayInformation","label","sourceTime"]),function(e,t){t.classHierarchy.push("vtkWebGPUBuffer"),e.create=function(e,n){t.handle=t.device.getHandle().createBuffer({size:e,usage:n,label:t.label}),t.sizeInBytes=e,t.usage=n},e.write=function(e){var n,i,o,a,s,l,u;n=t.device.getHandle(),i=t.handle,a=(o=e.buffer).byteLength,new Uint8Array((s=n.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0})).getMappedRange(0,a)).set(new Uint8Array(o)),s.unmap(),(l=n.createCommandEncoder()).copyBufferToBuffer(s,0,i,0,a),u=l.finish(),n.queue.submit([u]),s.destroy()},e.createAndWrite=function(e,n){var i=4*Math.ceil(e.byteLength/4);t.handle=t.device.getHandle().createBuffer({size:i,usage:n,mappedAtCreation:!0,label:t.label}),t.sizeInBytes=i,t.usage=n,new Uint8Array(t.handle.getMappedRange()).set(new Uint8Array(e.buffer)),t.handle.unmap()};for(var n=function(n){e[EM[n]]=function(){var e;return(e=t.handle)[EM[n]].apply(e,arguments)}},i=0;i<EM.length;i++)n(i)}(e,t)}var EI=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(ED),extend:ED},EO);function Ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var EN,ER=mG.Representation,EB=EO.PrimitiveTypes,EL=function(){function e(){E(this,e),this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}return I(e,[{key:"clear",value:function(){this.count=0}},{key:"has",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return!0}},{key:"get",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return this.values[t]}},{key:"set",value:function(e,t){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=t)}}]),e}();function EF(e,t,n){var i=e.pointIdToFlatId[t];return i<0&&(i=e.flatId,e.pointIdToFlatId[t]=i,e.flatIdToPointId[e.flatId]=t,e.flatIdToCellId[e.flatId]=n,e.flatId++),i}function EV(e,t,n){for(var i=e.length,o=0;o<i;o++){var a=e[o];if(n.cellProvokedMap.has(a)){n.ibo[n.iboId++]=n.cellProvokedMap.get(a);for(var s=o+1;s<o+i;s++){var l=EF(n,a=e[s%i],t);n.ibo[n.iboId++]=l}return}}for(var u=0;u<i;u++){var c=e[u];if(!n.provokedPointIds[c]){var d=EF(n,c,t);n.provokedPointIds[c]=1,n.cellProvokedMap.set(c,d),n.flatIdToCellId[d]=t,n.ibo[n.iboId++]=d;for(var f=u+1;f<u+i;f++)d=EF(n,c=e[f%i],t),n.ibo[n.iboId++]=d;return}}var p=e[0],h=n.flatId;n.cellProvokedMap.set(p,h),n.flatIdToPointId[n.flatId]=p,n.flatIdToCellId[n.flatId]=t,n.flatId++,n.ibo[n.iboId++]=h;for(var m=1;m<i;m++)h=EF(n,p=e[m],t),n.ibo[n.iboId++]=h}function Ej(e,t,n){var i=e.length;n.iboSize+=i;for(var o=0;o<i;o++){var a=e[o];if(n.cellProvokedMap.has(a))return}for(var s=0;s<i;s++){var l=e[s];if(!n.provokedPointIds[l])return n.provokedPointIds[l]=1,void n.cellProvokedMap.set(l,1)}n.cellProvokedMap.set(e[0],1),n.extraPoints++}var EG=new Uint32Array(1),EU=new Uint32Array(2),Ez=new Uint32Array(3),EW={anythingToPoints:function(e,t,n,i,o){for(var a=0;a<e;++a)EG[0]=t[n+a],EN(EG,i,o)},linesToWireframe:function(e,t,n,i,o){for(var a=0;a<e-1;++a)EU[0]=t[n+a],EU[1]=t[n+a+1],EN(EU,i,o)},polysToWireframe:function(e,t,n,i,o){if(e>2)for(var a=0;a<e;++a)EU[0]=t[n+a],EU[1]=t[n+(a+1)%e],EN(EU,i,o)},stripsToWireframe:function(e,t,n,i,o){if(e>2){for(var a=0;a<e-1;++a)EU[0]=t[n+a],EU[1]=t[n+a+1],EN(EU,i,o);for(var s=0;s<e-2;s++)EU[0]=t[n+s],EU[1]=t[n+s+2],EN(EU,i,o)}},polysToSurface:function(e,t,n,i,o){for(var a=0;a<e-2;a++)Ez[0]=t[n],Ez[1]=t[n+a+1],Ez[2]=t[n+a+2],EN(Ez,i,o)},stripsToSurface:function(e,t,n,i,o){for(var a=0;a<e-2;a++)Ez[0]=t[n+a],Ez[1]=t[n+a+1+a%2],Ez[2]=t[n+a+1+(a+1)%2],EN(Ez,i,o)}},EH={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function Eq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,EH,n),EI.extend(e,t,n),eE.setGet(e,t,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),t.classHierarchy.push("vtkWebGPUIndexBuffer"),e.buildIndexBuffer=function(e){var n=e.cells,i=e.primitiveType,o=e.representation,a=e.cellOffset,s=n.getData(),l=s.length,u=function(e){switch(e){case EB.Points:return"points";case EB.Lines:return"lines";case EB.Triangles:case EB.TriangleEdges:return"polys";case EB.TriangleStripEdges:case EB.TriangleStrips:return"strips";default:return""}}(i),c=e.numberOfPoints,d={provokedPointIds:new Uint8Array(c),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new EL},f=null;f=o===ER.POINTS||i===EB.Points?EW.anythingToPoints:o===ER.WIREFRAME||i===EB.Lines?EW["".concat(u,"ToWireframe")]:EW["".concat(u,"ToSurface")],EN=Ej;for(var p=a||0,h=0;h<l;)d.cellProvokedMap.clear(),f(s[h],s,h+1,p,d),h+=s[h]+1,p++;d.flatIdToPointId=c<=65535?new Uint16Array(c+d.extraPoints):new Uint32Array(c+d.extraPoints),c+d.extraPoints<36863?d.pointIdToFlatId=new Int16Array(c):d.pointIdToFlatId=new Int32Array(c),c+d.extraPoints<=65535?(d.ibo=new Uint16Array(d.iboSize),e.format="uint16"):(d.ibo=new Uint32Array(d.iboSize),e.format="uint32"),d.flatIdToCellId=p<=65535?new Uint16Array(c+d.extraPoints):new Uint32Array(c+d.extraPoints),d.pointIdToFlatId.fill(-1),d.provokedPointIds.fill(0),EN=EV,p=a||0;for(var m=0;m<l;)d.cellProvokedMap.clear(),f(s[m],s,m+1,p,d),m+=s[m]+1,p++;delete d.provokedPointIds,delete d.pointIdToFlatId,e.nativeArray=d.ibo,t.flatIdToPointId=d.flatIdToPointId,t.flatIdToCellId=d.flatIdToCellId,t.flatSize=d.flatId,t.indexCount=d.iboId}}var EK=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ek(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(Eq),extend:Eq},EO);function EX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function EY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var EZ=EO.BufferUsage,EJ=nH.VtkDataTypes;function EQ(e,t,n,i,o){var a={},s=e.getFlatSize();if(!s)return a;var l=[0,0,0,0];o.shift&&(o.shift.length?l=o.shift:l.fill(o.shift));var u=[1,1,1,1];o.scale&&(o.scale.length?u=o.scale:u.fill(o.scale));var c,d=!!Object.prototype.hasOwnProperty.call(o,"packExtra")&&o.packExtra,f=0,p=ee(i,s*(n+ +!!d)),h=e.getFlatIdToPointId();o.cellData&&(h=e.getFlatIdToCellId()),1===n?c=function(e){p[f++]=u[0]*t[e]+l[0]}:2===n?c=function(e){p[f++]=u[0]*t[e]+l[0],p[f++]=u[1]*t[e+1]+l[1]}:3!==n||d?3===n&&d?c=function(e){p[f++]=u[0]*t[e]+l[0],p[f++]=u[1]*t[e+1]+l[1],p[f++]=u[2]*t[e+2]+l[2],p[f++]=+u[3]+l[3]}:4===n&&(c=function(e){p[f++]=u[0]*t[e]+l[0],p[f++]=u[1]*t[e+1]+l[1],p[f++]=u[2]*t[e+2]+l[2],p[f++]=u[3]*t[e+3]+l[3]}):c=function(e){p[f++]=u[0]*t[e]+l[0],p[f++]=u[1]*t[e+1]+l[1],p[f++]=u[2]*t[e+2]+l[2]};for(var m=0;m<s;m++)c(n*h[m]);return a.nativeArray=p,a}var E$={device:null,fullScreenQuadBuffer:null};function E0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E$,n),es(e,t),ep(e,t,["device"]),function(e,t){function n(e){var n,i;if(e.dataArray&&!e.nativeArray&&(e.nativeArray=e.dataArray.getData()),e.usage===EZ.Index&&((n=EK.newInstance({label:e.label})).setDevice(t.device),i=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,n.buildIndexBuffer(e),n.createAndWrite(e.nativeArray,i),n.setArrayInformation([{format:e.format}])),n||(n=EI.newInstance({label:e.label})).setDevice(t.device),e.usage===EZ.UniformArray&&(i=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,i)),e.usage===EZ.Storage&&(i=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,i)),e.usage===EZ.Texture&&(i=GPUBufferUsage.COPY_SRC,n.createAndWrite(e.nativeArray,i)),e.usage===EZ.PointArray){i=GPUBufferUsage.VERTEX;var o=M5(e.format),a=EQ(e.indexBuffer,e.dataArray.getData(),e.dataArray.getNumberOfComponents(),o,{packExtra:e.packExtra,shift:e.shift,scale:e.scale,cellData:e.cellData,cellOffset:e.cellOffset});n.createAndWrite(a.nativeArray,i),n.setStrideInBytes(M3(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:e.cellData?"flat":"perspective"}])}if(e.usage===EZ.NormalsFromPoints){i=GPUBufferUsage.VERTEX;var s=M5(e.format),l=function(e,t){var n=t.getData(),i=e.getData();if(!i||!n)return null;for(var o=new Int8Array(4*e.getNumberOfCells()),a=i.length,s=0,l=0;l<a;){var u=function(e,t,n,i){var o=[];return tf([e[3*i]-e[3*n],e[3*i+1]-e[3*n+1],e[3*i+2]-e[3*n+2]],[e[3*t]-e[3*n],e[3*t+1]-e[3*n+1],e[3*t+2]-e[3*n+2]],o),th(o),o}(n,i[l+1],i[l+2],i[l+3]);o[s++]=127*u[0],o[s++]=127*u[1],o[s++]=127*u[2],o[s++]=127,l+=i[l]+1}return o}(e.cells,e.dataArray),u=EQ(e.indexBuffer,l,4,s,{cellData:!0});n.createAndWrite(u.nativeArray,i),n.setStrideInBytes(M3(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:"flat"}])}return e.usage===EZ.RawVertex&&(i=GPUBufferUsage.VERTEX,n.createAndWrite(e.nativeArray,i),n.setStrideInBytes(M3(e.format)),n.setArrayInformation([{offset:0,format:e.format}])),n.setSourceTime(e.time),n}t.classHierarchy.push("vtkWebGPUBufferManager"),e.hasBuffer=function(e){return t.device.hasCachedObject(e)},e.getBuffer=function(e){return e.hash?t.device.getCachedObject(e.hash,n,e):n(e)},e.getBufferForPointArray=function(t,n){var i=function(e){var t;switch(e.getDataType()){case EJ.UNSIGNED_CHAR:t="uint8";break;case EJ.FLOAT:t="float32";break;case EJ.UNSIGNED_INT:t="uint32";break;case EJ.INT:t="sint32";break;case EJ.DOUBLE:t="float32";break;case EJ.UNSIGNED_SHORT:t="uint16";break;case EJ.SHORT:t="sin16";break;default:t="float32"}switch(e.getNumberOfComponents()){case 2:t+="x2";break;case 3:t.includes("32")||Z("unsupported x3 type for ".concat(t)),t+="x3";break;case 4:t+="x4"}return t}(t),o={hash:"".concat(t.getMTime(),"I").concat(n.getMTime()).concat(i),usage:EZ.PointArray,format:i,dataArray:t,indexBuffer:n};return e.getBuffer(o)},e.getFullScreenQuadBuffer=function(){if(t.fullScreenQuadBuffer)return t.fullScreenQuadBuffer;t.fullScreenQuadBuffer=EI.newInstance(),t.fullScreenQuadBuffer.setDevice(t.device);var e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return t.fullScreenQuadBuffer.createAndWrite(e,GPUBufferUsage.VERTEX),t.fullScreenQuadBuffer.setStrideInBytes(12),t.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),t.fullScreenQuadBuffer}}(e,t)}var E1=EY(EY({newInstance:ew(E0),extend:E0},{}),EO),E2=E1.BufferUsage,E3=eE.vtkErrorMacro,E4={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function E5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E4,n),eE.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"uniform"}},t.sendTime={},eE.obj(t.sendTime,{mtime:0}),t.bindGroupTime={},eE.obj(t.bindGroupTime,{mtime:0}),t.sendDirty=!0,t.sortDirty=!0,eE.get(e,t,["binding","bindGroupTime"]),eE.setGet(e,t,["bindGroupLayoutEntry","device","label","sizeInBytes"]),t.classHierarchy.push("vtkWebGPUUniformBuffer"),e.addEntry=function(e,n){t._bufferEntryNames.has(e)?E3("entry named ".concat(e," already exists")):(t.sortDirty=!0,t._bufferEntryNames.set(e,t.bufferEntries.length),t.bufferEntries.push({name:e,type:n,sizeInBytes:M8(n),offset:-1,nativeType:M9(n),packed:!1}))},e.sortBufferEntries=function(){if(t.sortDirty){for(var e=0,n=[],i=4,o=0;o<t.bufferEntries.length;o++){var a=t.bufferEntries[o];a.sizeInBytes%16==0&&(i=Math.max(16,i)),a.sizeInBytes%8==0&&(i=Math.max(8,i))}for(var s=0;s<t.bufferEntries.length;s++){var l=t.bufferEntries[s];!1===l.packed&&l.sizeInBytes%16==0&&(l.packed=!0,l.offset=e,n.push(l),e+=l.sizeInBytes)}for(var u=0;u<t.bufferEntries.length;u++){var c=t.bufferEntries[u];if(!1===c.packed&&12===c.sizeInBytes)for(var d=0;d<t.bufferEntries.length;d++){var f=t.bufferEntries[d];if(!1===f.packed&&4===f.sizeInBytes){c.packed=!0,c.offset=e,n.push(c),e+=c.sizeInBytes,f.packed=!0,f.offset=e,n.push(f),e+=f.sizeInBytes;break}}}for(var p=0;p<t.bufferEntries.length;p++){var h=t.bufferEntries[p];if(!h.packed&&h.sizeInBytes%8==0)for(var m=p+1;m<t.bufferEntries.length;m++){var g=t.bufferEntries[m];if(!g.packed&&g.sizeInBytes%8==0){h.packed=!0,h.offset=e,n.push(h),e+=h.sizeInBytes,g.packed=!0,g.offset=e,n.push(g),e+=g.sizeInBytes;break}}}for(var v=0;v<t.bufferEntries.length;v++){var y=t.bufferEntries[v];if(!y.packed&&y.sizeInBytes%8==0)for(var b=!1,x=0;!b&&x<t.bufferEntries.length;x++){var w=t.bufferEntries[x];if(!w.packed&&4===w.sizeInBytes)for(var A=x+1;A<t.bufferEntries.length;A++){var C=t.bufferEntries[A];if(!C.packed&&4===C.sizeInBytes){y.packed=!0,y.offset=e,n.push(y),e+=y.sizeInBytes,w.packed=!0,w.offset=e,n.push(w),e+=w.sizeInBytes,C.packed=!0,C.offset=e,n.push(C),e+=C.sizeInBytes,b=!0;break}}}}for(var S=0;S<t.bufferEntries.length;S++){var _=t.bufferEntries[S];!_.packed&&_.sizeInBytes>4&&(_.packed=!0,_.offset=e,n.push(_),e+=_.sizeInBytes)}for(var T=0;T<t.bufferEntries.length;T++){var O=t.bufferEntries[T];O.packed||(O.packed=!0,O.offset=e,n.push(O),e+=O.sizeInBytes)}t.bufferEntries=n,t._bufferEntryNames.clear();for(var P=0;P<t.bufferEntries.length;P++)t._bufferEntryNames.set(t.bufferEntries[P].name,P);t.sizeInBytes=e,t.sizeInBytes=i*Math.ceil(t.sizeInBytes/i),t.sortDirty=!1}},e.sendIfNeeded=function(e){if(!t.UBO){var n={nativeArray:t.Float32Array,usage:E2.UniformArray,label:t.label};t.UBO=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),t.sendDirty=!1}t.sendDirty&&(e.getHandle().queue.writeBuffer(t.UBO.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes),t.sendDirty=!1),t.sendTime.modified()},e.createView=function(e){e in t==0&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes)),t[e]=eE.newTypedArray(e,t.arrayBuffer))},e.setValue=function(n,i){e.sortBufferEntries();var o=t._bufferEntryNames.get(n);if(void 0!==o){var a=t.bufferEntries[o];e.createView(a.nativeType);var s=t[a.nativeType];a.lastValue!==i&&(s[a.offset/s.BYTES_PER_ELEMENT]=i,t.sendDirty=!0),a.lastValue=i}else E3("entry named ".concat(n," not found in UBO"))},e.setArray=function(n,i){e.sortBufferEntries();var o=t._bufferEntryNames.get(n);if(void 0!==o){var a=t.bufferEntries[o];e.createView(a.nativeType);for(var s=t[a.nativeType],l=!1,u=0;u<i.length;u++)a.lastValue&&a.lastValue[u]===i[u]||(s[a.offset/s.BYTES_PER_ELEMENT+u]=i[u],l=!0);l&&(t.sendDirty=!0,a.lastValue=m(i))}else E3("entry named ".concat(n," not found in UBO"))},e.getBindGroupEntry=function(){return{resource:{buffer:t.UBO.getHandle()}}},e.getSendTime=function(){return t.sendTime.getMTime()},e.getShaderCode=function(n,i){e.sortBufferEntries();for(var o=["struct ".concat(t.label,"Struct\n{")],a=0;a<t.bufferEntries.length;a++){var s=t.bufferEntries[a];o.push("  ".concat(s.name,": ").concat(s.type,","))}return o.push("};\n@binding(".concat(n,") @group(").concat(i,") var<uniform> ").concat(t.label,": ").concat(t.label,"Struct;")),o.join("\n")}}var E6={newInstance:eE.newInstance(E5,"vtkWebGPUUniformBuffer"),extend:E5},E8=E1.BufferUsage,E9=eE.vtkErrorMacro,E7={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E7,n),eE.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t._sendTime={},eE.obj(t._sendTime,{mtime:0}),t.bindGroupTime={},eE.obj(t.bindGroupTime,{mtime:0}),t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},eE.get(e,t,["bindGroupTime"]),eE.setGet(e,t,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),t.classHierarchy.push("vtkWebGPUStorageBuffer"),e.addEntry=function(e,n){if(t._bufferEntryNames.has(e))E9("entry named ".concat(e," already exists"));else{t._bufferEntryNames.set(e,t.bufferEntries.length);var i=M8(n);t.bufferEntries.push({name:e,type:n,sizeInBytes:i,offset:t.sizeInBytes,nativeType:M9(n)}),t.sizeInBytes+=i}},e.send=function(e){if(!t._buffer){var n={nativeArray:t.Float32Array,usage:E8.Storage,label:t.label};return t._buffer=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),void t._sendTime.modified()}e.getHandle().queue.writeBuffer(t._buffer.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes*t.numberOfInstances),t._sendTime.modified()},e.createView=function(e){e in t==0&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes*t.numberOfInstances)),t[e]=eE.newTypedArray(e,t.arrayBuffer))},e.setValue=function(n,i,o){var a=t._bufferEntryNames.get(n);if(void 0!==a){var s=t.bufferEntries[a];e.createView(s.nativeType);var l=t[s.nativeType];l[(s.offset+i*t.sizeInBytes)/l.BYTES_PER_ELEMENT]=o}else E9("entry named ".concat(n," not found in UBO"))},e.setArray=function(n,i,o){var a=t._bufferEntryNames.get(n);if(void 0!==a){var s=t.bufferEntries[a];e.createView(s.nativeType);for(var l=t[s.nativeType],u=(s.offset+i*t.sizeInBytes)/l.BYTES_PER_ELEMENT,c=0;c<o.length;c++)l[u+c]=o[c]}else E9("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArray=function(n,i){var o=t._bufferEntryNames.get(n);if(void 0!==o){var a=t.bufferEntries[o];e.createView(a.nativeType);for(var s=t[a.nativeType],l=i.length/t.numberOfInstances,u=0;u<t.numberOfInstances;u++)for(var c=(a.offset+u*t.sizeInBytes)/s.BYTES_PER_ELEMENT,d=0;d<l;d++)s[c+d]=i[u*l+d]}else E9("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArrayColorToFloat=function(n,i){var o=t._bufferEntryNames.get(n);if(void 0!==o){var a=t.bufferEntries[o];e.createView(a.nativeType);for(var s=t[a.nativeType],l=i.length/t.numberOfInstances,u=0;u<t.numberOfInstances;u++)for(var c=(a.offset+u*t.sizeInBytes)/s.BYTES_PER_ELEMENT,d=0;d<l;d++)s[c+d]=i[u*l+d]/255}else E9("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArray3x3To4x4=function(n,i){var o=t._bufferEntryNames.get(n);if(void 0!==o){var a=t.bufferEntries[o];e.createView(a.nativeType);for(var s=t[a.nativeType],l=0;l<t.numberOfInstances;l++)for(var u=(a.offset+l*t.sizeInBytes)/s.BYTES_PER_ELEMENT,c=0;c<3;c++)for(var d=0;d<3;d++)s[u+4*c+d]=i[9*l+3*c+d]}else E9("entry named ".concat(n," not found in UBO"))},e.getSendTime=function(){return t._sendTime.getMTime()},e.getShaderCode=function(e,n){for(var i=["struct ".concat(t.label,"StructEntry\n{")],o=0;o<t.bufferEntries.length;o++){var a=t.bufferEntries[o];i.push("  ".concat(a.name,": ").concat(a.type,","))}return i.push("\n};\nstruct ".concat(t.label,"Struct\n{\n  values: array<").concat(t.label,"StructEntry>,\n};\n@binding(").concat(e,") @group(").concat(n,") var<storage, read> ").concat(t.label,": ").concat(t.label,"Struct;\n")),i.join("\n")},e.getBindGroupEntry=function(){return{resource:{buffer:t._buffer.getHandle()}}},e.clearData=function(){t.numberOfInstances=0,t.sizeInBytes=0,t.bufferEntries=[],t._bufferEntryNames=new Map,t._buffer=null,delete t.arrayBuffer,delete t.Float32Array}}var Dt={newInstance:eE.newInstance(De,"vtkWebGPUStorageBuffer"),extend:De},Dn=new Float64Array(16),Dr=new Float64Array(16),Di={volumes:null,rowLength:1024,lastVolumeLength:0};function Do(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Di,o),Es.extend(e,t,o),t.fragmentShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Volume::TraverseDec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\nfn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32\n{\n  // todo multicomponent support\n  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;\n}\n\nfn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>\n{\n  var result: vec4<f32>;\n\n  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;\n  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;\n  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;\n  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;\n  result.w = 0.0;\n\n  // divide by spacing as that is our delta\n  result = result / volumeSSBO.values[vNum].spacing;\n  // now we have a gradient in unit tcoords\n\n  var grad: f32 = length(result.xyz);\n  if (grad > 0.0)\n  {\n    // rotate to View Coords, needed for lighting and shading\n    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;\n    result = nMat * result;\n    result = result / length(result);\n  }\n\n  // store gradient magnitude in .w\n  result.w = grad;\n\n  return result;\n}\n\nfn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>\n{\n  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n\n  // convert to tcoords and reject if outside the volume\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;\n  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||\n      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }\n\n  var scalar: f32 = getTextureValue(vTex, tpos);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n\n  var gofactor: f32 = 1.0;\n  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);\n  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    normal = getGradient(vTex, tpos, vNum, scalar);\n    if (componentSSBO.values[cNum].gomin <  1.0)\n    {\n      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,\n      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);\n    }\n  }\n\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n\n  if (volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    color = color*abs(normal.z);\n  }\n\n  outColor = vec4<f32>(color.rgb, gofactor * opacity);\n\n  return outColor;\n}\n\n// adjust the start and end point of a raycast such that it intersects the unit cube.\n// This function is used to take a raycast starting point and step vector\n// and numSteps and return the startijng and ending steps for intersecting the\n// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates\n// that have valid values. So this funtion can be used to take a ray in texture coordinates\n// and bound it to intersecting the texture.\n//\nfn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>\n{\n  var result: vec2<f32> = vec2<f32>(0.0, numSteps);\n  var tpos2: vec4<f32> = tpos + tstep*numSteps;\n\n  // move tpos to the start of the volume\n  var adjust: f32 =\n    min(\n      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),\n      min(\n        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),\n        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));\n  if (adjust < 0.0)\n  {\n    result.x = result.x - adjust;\n  }\n\n  // adjust length to the end\n  adjust =\n    max(\n      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),\n      max(\n        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),\n        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));\n  if (adjust > 0.0)\n  {\n    result.y = result.y - adjust;\n  }\n\n  return result;\n}\n\nfn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>\n{\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n  return vec4<f32>(color.rgb, opacity);\n}\n\nfn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var maxVal: f32 = -1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar > maxVal)\n    {\n      maxVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);\n}\n\nfn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var minVal: f32 = 1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar < minVal)\n    {\n      minVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);\n}\n\nfn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var avgVal: f32 = 0.0;\n  var sampleCount: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      avgVal = avgVal + sample;\n      sampleCount = sampleCount + 1.0;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  if (sampleCount <= 0.0)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);\n}\n\nfn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var sumVal: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      sumVal = sumVal + sample;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);\n}\n\nfn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>\n{\n  // initial ray position is at the beginning\n  var rayPosSC: vec4<f32> = minPosSC;\n\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var curDist: f32 = 0.0;\n  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n  var sampleColor: vec4<f32>;\n//VTK::Volume::TraverseCalls\n\n  loop\n  {\n    // for each volume, sample and accumulate color\n//VTK::Volume::CompositeCalls\n\n    // increment position\n    curDist = curDist + mapperUBO.SampleDistance;\n    rayPosSC = rayPosSC + rayStepSC;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayLengthSC) { break; }\n    if (computedColor.a > 0.98) { break; }\n  }\n  return computedColor;\n}\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;\n  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;\n\n  // discard empty rays\n  if (rayMax <= rayMin) { discard; }\n  else\n  {\n    // compute start and end ray positions in view coordinates\n    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);\n    minPosSC = minPosSC * (1.0 / minPosSC.w);\n    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);\n    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);\n\n    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);\n    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);\n    rayStepSC.w = 0.0;\n\n    var computedColor: vec4<f32>;\n\n//VTK::Volume::Loop\n\n//VTK::RenderEncoder::Impl\n  }\n\n  return output;\n}\n",t.UBO=E6.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SampleDistance","f32"),t.SSBO=Dt.newInstance({label:"volumeSSBO"}),t.componentSSBO=Dt.newInstance({label:"componentSSBO"}),t.lutBuildTime={},eE.obj(t.lutBuildTime,{mtime:0}),t.classHierarchy.push("vtkWebGPUVolumePassFSQ"),e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,i.setCode(o),t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderVolume=function(e,n,i){for(var o=n.getShaderDescription("fragment"),a=o.getCode(),s=[],l=[],u=0;u<t.volumes.length;u++)t.volumes[u].getRenderable().getMapper().getBlendMode()===x8.COMPOSITE_BLEND?(s.push("    sampleColor = processVolume(volTexture".concat(u,", ").concat(u,", ").concat(t.rowStarts[u],", rayPosSC, tfunRows);")),s.push("    computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);")):(l.push("  sampleColor = traverseVals[".concat(u,"];")),l.push("  computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);"));a=MH.substitute(a,"//VTK::Volume::CompositeCalls",s).result,a=MH.substitute(a,"//VTK::Volume::TraverseCalls",l).result,a=MH.substitute(a,"//VTK::Volume::TraverseDec",["var<private> traverseVals: array<vec4<f32>,".concat(t.volumes.length,">;")]).result;for(var c=!1,d=0;d<t.volumes.length;d++){var f=t.volumes[d].getRenderable().getMapper().getBlendMode();f===x8.COMPOSITE_BLEND?c=!0:f===x8.MAXIMUM_INTENSITY_BLEND?a=MH.substitute(a,"//VTK::Volume::Loop",["    traverseMax(volTexture".concat(d,", ").concat(d,", ").concat(d,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(d,"];"),"//VTK::Volume::Loop"]).result:f===x8.MINIMUM_INTENSITY_BLEND?a=MH.substitute(a,"//VTK::Volume::Loop",["    traverseMin(volTexture".concat(d,", ").concat(d,", ").concat(d,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(d,"];"),"//VTK::Volume::Loop"]).result:f===x8.AVERAGE_INTENSITY_BLEND?a=MH.substitute(a,"//VTK::Volume::Loop",["    traverseAverage(volTexture".concat(d,", ").concat(d,", ").concat(d,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(d,"];"),"//VTK::Volume::Loop"]).result:f===x8.ADDITIVE_INTENSITY_BLEND&&(a=MH.substitute(a,"//VTK::Volume::Loop",["    traverseAdditive(volTexture".concat(d,", ").concat(d,", ").concat(d,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(d,"];"),"//VTK::Volume::Loop"]).result)}c&&(a=MH.substitute(a,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),o.setCode(a)},t.shaderReplacements.set("replaceShaderVolume",e.replaceShaderVolume),e.updateLUTImage=function(n){for(var i=e.getMTime(),o=0;o<t.volumes.length;o++){var a=t.volumes[o].getRenderable(),s=a.getMapper().getInputData();i=Math.max(i,a.getMTime(),s.getMTime())}if(!(i<t.lutBuildTime.getMTime())){t.numRows=0,t.rowStarts=[];for(var l=0;l<t.volumes.length;l++){t.rowStarts.push(t.numRows);var u=t.volumes[l].getRenderable(),c=u.getMapper(),d=u.getProperty(),f=c.getInputData(),p=(f.getPointData()&&f.getPointData().getScalars()).getNumberOfComponents(),h=d.getIndependentComponents()?p:1;t.numRows+=h}for(var m=new Uint8ClampedArray(2*t.numRows*t.rowLength*4),g=new Float32Array(2*t.numRows*t.rowLength),v=0,y=new Float32Array(3*t.rowLength),b=t.rowLength,x=0;x<t.volumes.length;x++)for(var w=t.volumes[x].getRenderable(),A=w.getMapper(),C=w.getProperty(),S=A.getInputData(),_=(S.getPointData()&&S.getPointData().getScalars()).getNumberOfComponents(),T=C.getIndependentComponents()?_:1,O=0;O<T;++O){var P=C.getRGBTransferFunction(O),M=P.getRange();P.getTable(M[0],M[1],b,y,1);for(var E=v*b*4,D=0;D<b;++D){m[E+4*D]=255*y[3*D],m[E+4*D+1]=255*y[3*D+1],m[E+4*D+2]=255*y[3*D+2],m[E+4*D+3]=255;for(var I=0;I<4;I++)m[E+4*(b+D)+I]=m[E+4*D+I]}var k=C.getScalarOpacity(O),N=t.sampleDist/C.getScalarOpacityUnitDistance(O),R=k.getRange();k.getTable(R[0],R[1],b,y,1),E=v*b;for(var B=0;B<b;++B)g[E+B]=1-Math.pow(1-y[B],N),g[E+B+b]=g[E+B];v+=2}var L={nativeArray:m,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},F=n.getTextureManager().getTexture(L).createView("tfunTexture");t.textureViews[2]=F;var V={nativeArray:g,width:t.rowLength,height:2*t.numRows,depth:1,format:"r16float"},j=n.getTextureManager().getTexture(V).createView("ofunTexture");t.textureViews[3]=j,t.lutBuildTime.modified()}},e.updateSSBO=function(n){for(var i=Math.max(e.getMTime(),t.WebGPURenderer.getStabilizedTime()),o=0;o<t.volumes.length;o++){var a=t.volumes[o].getRenderable(),s=a.getMapper(),l=s.getInputData();i=Math.max(i,a.getMTime(),l.getMTime(),s.getMTime())}if(!(i<t.SSBO.getSendTime())){var u=t.WebGPURenderer.getStabilizedCenterByReference();t.SSBO.clearData(),t.SSBO.setNumberOfInstances(t.volumes.length);for(var c=new Float64Array(16*t.volumes.length),d=new Float64Array(16*t.volumes.length),f=new Float64Array(4*t.volumes.length),p=new Float64Array(4*t.volumes.length),h=new Float64Array(4*t.volumes.length),m=new Float64Array(4*t.volumes.length),g=0;g<t.volumes.length;g++){var v=t.volumes[g].getRenderable(),y=v.getMapper().getInputData();od(Dn),ov(Dn,Dn,u),of(Dr,v.getMatrix()),op(Dr,Dr),og(Dn,Dr,Dn),og(Dn,y.getWorldToIndex(),Dn);var b=y.getDimensions();od(Dr),oy(Dr,Dr,[1/b[0],1/b[1],1/b[2]]),og(Dn,Dr,Dn);for(var x=0;x<16;x++)c[16*g+x]=Dn[x];op(Dn,Dn);for(var w=0;w<4;w++)d[16*g+4*w]=Dn[4*w],d[16*g+4*w+1]=Dn[4*w+1],d[16*g+4*w+2]=Dn[4*w+2],d[16*g+4*w+3]=0;f[4*g]=1/b[0],f[4*g+1]=1/b[1],f[4*g+2]=1/b[2],f[4*g+3]=1,p[4*g]=+!!v.getProperty().getShade();var A=y.getSpacing();h[4*g]=A[0],h[4*g+1]=A[1],h[4*g+2]=A[2],h[4*g+3]=1;var C=t.textureViews[g+4].getTexture().getScale(),S=v.getProperty().getIpScalarRange();m[4*g]=S[0]/C,m[4*g+1]=S[1]/C,m[4*g+2]=v.getProperty().getFilterMode()}t.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.SSBO.addEntry("planeNormals","mat4x4<f32>"),t.SSBO.addEntry("shade","vec4<f32>"),t.SSBO.addEntry("tstep","vec4<f32>"),t.SSBO.addEntry("spacing","vec4<f32>"),t.SSBO.addEntry("ipScalarRange","vec4<f32>"),t.SSBO.setAllInstancesFromArray("SCTCMatrix",c),t.SSBO.setAllInstancesFromArray("planeNormals",d),t.SSBO.setAllInstancesFromArray("shade",p),t.SSBO.setAllInstancesFromArray("tstep",f),t.SSBO.setAllInstancesFromArray("spacing",h),t.SSBO.setAllInstancesFromArray("ipScalarRange",m),t.SSBO.send(n),t.componentSSBO.clearData(),t.componentSSBO.setNumberOfInstances(t.numRows);for(var _=new Float64Array(t.numRows),T=new Float64Array(t.numRows),O=new Float64Array(t.numRows),P=new Float64Array(t.numRows),M=new Float64Array(t.numRows),E=new Float64Array(t.numRows),D=new Float64Array(t.numRows),I=new Float64Array(t.numRows),k=0,N=0;N<t.volumes.length;N++){var R=t.volumes[N].getRenderable(),B=R.getMapper(),L=R.getProperty(),F=B.getInputData(),V=(F.getPointData()&&F.getPointData().getScalars()).getNumberOfComponents(),j=L.getIndependentComponents(),G=M2(t.textureViews[N+4].getTexture().getFormat()),U=[255],z=[0];2===G.elementSize&&"float"===G.sampleType&&(U[0]=1);for(var W=0;W<V;W++){var H=j?W:0,q=U[W],K=L.getScalarOpacity(H).getRange(),X=q/(K[1]-K[0]),Y=(z[W]-K[0])/(K[1]-K[0]);P[k]=Y,O[k]=X;var Z=L.getRGBTransferFunction(H).getRange();if(T[k]=(z[W]-Z[0])/(Z[1]-Z[0]),_[k]=q/(Z[1]-Z[0]),L.getUseGradientOpacity(H)){var J=L.getGradientOpacityMinimumOpacity(H),Q=L.getGradientOpacityMaximumOpacity(H);M[k]=J,E[k]=Q;var $=[L.getGradientOpacityMinimumValue(H),L.getGradientOpacityMaximumValue(H)];I[k]=q*(Q-J)/($[1]-$[0]),D[k]=-$[0]*(Q-J)/($[1]-$[0])+J}else M[k]=1,E[k]=1,I[k]=0,D[k]=1;k++}}t.componentSSBO.addEntry("cScale","f32"),t.componentSSBO.addEntry("cShift","f32"),t.componentSSBO.addEntry("oScale","f32"),t.componentSSBO.addEntry("oShift","f32"),t.componentSSBO.addEntry("goShift","f32"),t.componentSSBO.addEntry("goScale","f32"),t.componentSSBO.addEntry("gomin","f32"),t.componentSSBO.addEntry("gomax","f32"),t.componentSSBO.setAllInstancesFromArray("cScale",_),t.componentSSBO.setAllInstancesFromArray("cShift",T),t.componentSSBO.setAllInstancesFromArray("oScale",O),t.componentSSBO.setAllInstancesFromArray("oShift",P),t.componentSSBO.setAllInstancesFromArray("goScale",I),t.componentSSBO.setAllInstancesFromArray("goShift",D),t.componentSSBO.setAllInstancesFromArray("gomin",M),t.componentSSBO.setAllInstancesFromArray("gomax",E),t.componentSSBO.send(n)}},n=e.updateBuffers,e.updateBuffers=function(){n();for(var i=t.volumes[0].getRenderable().getMapper().getSampleDistance(),o=0;o<t.volumes.length;o++){var a=t.volumes[o].getRenderable().getMapper().getSampleDistance();a<i&&(i=a)}t.sampleDist!==i&&(t.sampleDist=i,t.UBO.setValue("SampleDistance",i),t.UBO.sendIfNeeded(t.device));for(var s=0;s<t.volumes.length;s++){var l=t.volumes[s].getRenderable().getMapper().getInputData(),u=t.device.getTextureManager().getTextureForImageData(l);if(!t.textureViews[s+4]||t.textureViews[s+4].getTexture()!==u){var c=u.createView("volTexture".concat(s));t.textureViews[s+4]=c}}if(t.volumes.length<t.lastVolumeLength)for(var d=t.volumes.length;d<t.lastVolumeLength;d++)t.textureViews.pop();t.lastVolumeLength=t.volumes.length,e.updateLUTImage(t.device),e.updateSSBO(t.device),t.clampSampler||(t.clampSampler=Eh.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:"linear",magFilter:"linear"}))},e.computePipelineHash=function(){t.pipelineHash="volfsq";for(var e=0;e<t.volumes.length;e++){var n=t.volumes[e].getRenderable().getMapper().getBlendMode();t.pipelineHash+="".concat(n)}},e.setVolumes=function(n){if(!t.volumes||t.volumes.length!==n.length)return t.volumes=m(n),void e.modified();for(var i=0;i<n.length;i++)if(n[i]!==t.volumes[i])return t.volumes=m(n),void e.modified()},i=e.getBindables,e.getBindables=function(){var e=i();return e.push(t.componentSSBO),e.push(t.clampSampler),e}}var Da={newInstance:eE.newInstance(Do,"vtkWebGPUVolumePassFSQ"),extend:Do},Ds=mG.Representation,Dl=E1.BufferUsage,Du=E1.PrimitiveTypes,Dc=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],Dd={colorTextureView:null,depthTextureView:null,volumes:null};function Df(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dd,n),PS.extend(e,t,n),t._mapper=Ei.newInstance(),t._mapper.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Select::Dec\n\n//VTK::VolumePass::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Select::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::VolumePass::Impl\n\n  // use the maximum (closest) of the current value and the zbuffer\n  // the blend func will then take the min to find the farthest stop value\n  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._mapper.getShaderReplacements().set("replaceShaderVolumePass",function(e,t,n){t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),t._boundsPoly=lC.newInstance(),t._lastMTimes=[],eE.setGet(e,t,["colorTextureView","depthTextureView"]),t.classHierarchy.push("vtkWebGPUVolumePass"),e.initialize=function(n){t._clearEncoder||e.createClearEncoder(n),t._mergeEncoder||e.createMergeEncoder(n),t._copyEncoder||e.createCopyEncoder(n),t._depthRangeEncoder||e.createDepthRangeEncoder(n),t.fullScreenQuad||(t.fullScreenQuad=Da.newInstance(),t.fullScreenQuad.setDevice(n.getDevice()),t.fullScreenQuad.setTextureViews(m(t._depthRangeEncoder.getColorTextureViews()))),t._volumeCopyQuad||(t._volumeCopyQuad=Es.newInstance(),t._volumeCopyQuad.setPipelineHash("volpassfsq"),t._volumeCopyQuad.setDevice(n.getDevice()),t._volumeCopyQuad.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,\n    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._copyUBO=E6.newInstance({label:"mapperUBO"}),t._copyUBO.addEntry("tscale","vec2<f32>"),t._volumeCopyQuad.setUBO(t._copyUBO),t._volumeCopyQuad.setTextureViews([t._colorTextureView]))},e.traverse=function(n,i){if(!t.deleted){t._currentParent=i,e.initialize(i),e.computeTiming(i),e.renderDepthBounds(n,i),t._firstGroup=!0;var o=i.getDevice(),a=o.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(t.volumes.length>a){for(var s=n.getRenderable().getActiveCamera().getPosition(),l=[],u=0;u<t.volumes.length;u++){var c=t.volumes[u].getRenderable().getBounds(),d=[.5*(c[1]+c[0]),.5*(c[3]+c[2]),.5*(c[5]+c[4])];l[u]=tx(d,s)}var f=m(Array(t.volumes.length).keys());f.sort(function(e,t){return l[t]-l[e]});for(var p=[],h=f.length%a,g=0;g<f.length;g++)p.push(t.volumes[f[g]]),p.length>=h&&(e.rayCastPass(i,n,p),p=[],h=a,t._firstGroup=!1)}else e.rayCastPass(i,n,t.volumes);if(t._volumeCopyQuad.setWebGPURenderer(n),t._useSmallViewport){var v=t._colorTextureView.getTexture().getWidth(),y=t._colorTextureView.getTexture().getHeight();t._copyUBO.setArray("tscale",[t._smallViewportWidth/v,t._smallViewportHeight/y])}else t._copyUBO.setArray("tscale",[1,1]);t._copyUBO.sendIfNeeded(o),t._copyEncoder.setColorTextureView(0,t.colorTextureView),t._copyEncoder.attachTextureViews(),t._copyEncoder.begin(i.getCommandEncoder()),n.scissorAndViewport(t._copyEncoder),t._volumeCopyQuad.prepareAndDraw(t._copyEncoder),t._copyEncoder.end()}},e.delete=eE.chain(function(){t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)},e.delete),e.computeTiming=function(e){var n=e.getRenderable().getInteractor();if(null==t._lastScale){var i=t.volumes[0].getRenderable().getMapper();t._lastScale=i.getInitialInteractionScale()||1}t._useSmallViewport=!1,n.isAnimating()&&t._lastScale>1.5&&(t._useSmallViewport=!0),t._colorTexture.resize(e.getCanvas().width,e.getCanvas().height),t._animationRateSubscription||(t._animationRateSubscription=n.onAnimationFrameRateUpdate(function(){var e=t.volumes[0].getRenderable().getMapper();if(e.getAutoAdjustSampleDistances()){var i=n.getRecentAnimationFrameRate(),o=t._lastScale*n.getDesiredUpdateRate()/i;t._lastScale=o,t._lastScale>400&&(t._lastScale=400)}else t._lastScale=e.getImageSampleDistance()*e.getImageSampleDistance();t._lastScale<1.5&&(t._lastScale=1.5)}))},e.rayCastPass=function(e,n,i){var o=t._firstGroup?t._clearEncoder:t._mergeEncoder;o.attachTextureViews(),o.begin(e.getCommandEncoder());var a=t._colorTextureView.getTexture().getWidth(),s=t._colorTextureView.getTexture().getHeight();if(t._useSmallViewport){var l=e.getCanvas(),u=1/Math.sqrt(t._lastScale);t._smallViewportWidth=Math.ceil(u*l.width),t._smallViewportHeight=Math.ceil(u*l.height),a=t._smallViewportWidth,s=t._smallViewportHeight}o.getHandle().setViewport(0,0,a,s,0,1),o.getHandle().setScissorRect(0,0,a,s),t.fullScreenQuad.setWebGPURenderer(n),t.fullScreenQuad.setVolumes(i),t.fullScreenQuad.prepareAndDraw(o),o.end()},e.renderDepthBounds=function(n,i){e.updateDepthPolyData(n);var o=t._boundsPoly,a=o.getPoints(),s=o.getPolys(),l={hash:"vp".concat(s.getMTime()),usage:Dl.Index,cells:s,numberOfPoints:a.getNumberOfPoints(),primitiveType:Du.Triangles,representation:Ds.SURFACE},u=i.getDevice().getBufferManager().getBuffer(l);t._mapper.getVertexInput().setIndexBuffer(u),l={usage:Dl.PointArray,format:"float32x4",hash:"vp".concat(a.getMTime()).concat(s.getMTime()),dataArray:a,indexBuffer:u,packExtra:!0};var c=i.getDevice().getBufferManager().getBuffer(l);t._mapper.getVertexInput().addBuffer(c,["vertexBC"]),t._mapper.setNumberOfVertices(c.getSizeInBytes()/c.getStrideInBytes()),e.drawDepthRange(n,i)},e.updateDepthPolyData=function(e){for(var n=!1,i=0;i<t.volumes.length;i++){var o=t.volumes[i].getMTime();t._lastMTimes[i]&&o===t._lastMTimes[i]||(n=!0,t._lastMTimes[i]=o)}var a=e.getStabilizedTime();if((t._lastMTimes.length<=t.volumes.length||a!==t._lastMTimes[t.volumes.length])&&(n=!0,t._lastMTimes[t.volumes.length]=a),n){for(var s=e.getStabilizedCenterByReference(),l=8*t.volumes.length,u=new Float64Array(3*l),c=12*t.volumes.length,d=new Uint16Array(4*c),f=0;f<t.volumes.length;f++){t.volumes[f].getBoundingCubePoints(u,24*f);for(var p=12*f*4,h=8*f,m=0;m<12;m++)d[p++]=3,d[p++]=h+Dc[m][0],d[p++]=h+Dc[m][1],d[p++]=h+Dc[m][2]}for(var g=0;g<u.length;g+=3)u[g]-=s[0],u[g+1]-=s[1],u[g+2]-=s[2];t._boundsPoly.getPoints().setData(u,3),t._boundsPoly.getPoints().modified(),t._boundsPoly.getPolys().setData(d,1),t._boundsPoly.getPolys().modified(),t._boundsPoly.modified()}},e.drawDepthRange=function(n,i){t._depthRangeTexture.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeTexture2.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeEncoder.attachTextureViews(),e.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(t._depthRangeEncoder),n.volumeDepthRangePass(!0),t._mapper.setWebGPURenderer(n),t._mapper.prepareToDraw(t._depthRangeEncoder),t._mapper.registerDrawCallback(t._depthRangeEncoder),n.volumeDepthRangePass(!1)},e.createDepthRangeEncoder=function(e){var n=e.getDevice();t._depthRangeEncoder=Ed.newInstance({label:"VolumePass DepthRange"}),t._depthRangeEncoder.setPipelineHash("volr"),t._depthRangeEncoder.setReplaceShaderCodeFunction(function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor1"),t.addOutput("vec4<f32>","outColor2");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,t.setCode(n)}),t._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),t._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcFactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcFactor:"one",dstFactor:"one",operation:"min"}}}]}}),t._depthRangeTexture=Ex.newInstance({label:"volumePassMaxDepth"}),t._depthRangeTexture.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var i=t._depthRangeTexture.createView("maxTexture");t._depthRangeEncoder.setColorTextureView(0,i),t._depthRangeTexture2=Ex.newInstance({label:"volumePassDepthMin"}),t._depthRangeTexture2.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var o=t._depthRangeTexture2.createView("minTexture");t._depthRangeEncoder.setColorTextureView(1,o),t._mapper.setDevice(e.getDevice()),t._mapper.setTextureViews([t.depthTextureView])},e.createClearEncoder=function(e){t._colorTexture=Ex.newInstance({label:"volumePassColor"}),t._colorTexture.create(e.getDevice(),{width:e.getCanvas().width,height:e.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),t._colorTextureView=t._colorTexture.createView("volumePassColorTexture"),t._colorTextureView.addSampler(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._clearEncoder=Ed.newInstance({label:"VolumePass Clear"}),t._clearEncoder.setColorTextureView(0,t._colorTextureView),t._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),t._clearEncoder.setPipelineHash("volpf"),t._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createCopyEncoder=function(e){t._copyEncoder=Ed.newInstance({label:"volumePassCopy"}),t._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._copyEncoder.setPipelineHash("volcopypf"),t._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createMergeEncoder=function(e){t._mergeEncoder=Ed.newInstance({label:"volumePassMerge"}),t._mergeEncoder.setColorTextureView(0,t._colorTextureView),t._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._mergeEncoder.setReplaceShaderCodeFunction(function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)}),t._mergeEncoder.setPipelineHash("volpf"),t._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.setVolumes=function(n){if(!t.volumes||t.volumes.length!==n.length)return t.volumes=m(n),void e.modified();for(var i=0;i<n.length;i++)if(n[i]!==t.volumes[i])return t.volumes=m(n),void e.modified()}}var Dp={newInstance:eE.newInstance(Df,"vtkWebGPUVolumePass"),extend:Df},Dh={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function Dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dh,n),PS.extend(e,t,n),eE.setGet(e,t,["opaquePass","translucentPass","volumePass"]),t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=i,e.setCurrentOperation("buildPass"),n.traverse(e),t.opaquePass||(t.opaquePass=EC.newInstance());for(var o=n.getRenderable().getNumberOfLayers(),a=n.getChildren(),s=0;s<o;s++)for(var l=0;l<a.length;l++){var u=a[l],c=n.getRenderable().getRenderers()[l];c.getDraw()&&c.getLayer()===s&&(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumes=[],e.setCurrentOperation("queryPass"),u.traverse(e),e.setCurrentOperation("cameraPass"),u.traverse(e),t.opaquePass.traverse(u,n),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=ET.newInstance()),t.translucentPass.setColorTextureView(t.opaquePass.getColorTextureView()),t.translucentPass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.translucentPass.traverse(u,n)),t.volumes.length>0&&(t.volumePass||(t.volumePass=Dp.newInstance()),t.volumePass.setColorTextureView(t.opaquePass.getColorTextureView()),t.volumePass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.volumePass.setVolumes(t.volumes),t.volumePass.traverse(u,n)),e.finalPass(n,u))}}},e.finalPass=function(n,i){t._finalBlitEncoder||e.createFinalBlitEncoder(n),t._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),t._finalBlitEncoder.attachTextureViews(),t._finalBlitEncoder.begin(n.getCommandEncoder()),i.scissorAndViewport(t._finalBlitEncoder),t._fullScreenQuad.prepareAndDraw(t._finalBlitEncoder),t._finalBlitEncoder.end()},e.createFinalBlitEncoder=function(e){t._finalBlitEncoder=Ed.newInstance({label:"forwardPassBlit"}),t._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._finalBlitEncoder.setPipelineHash("fpf"),t._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:e.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),t._fsqSampler=Eh.newInstance({label:"finalPassSampler"}),t._fsqSampler.create(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._fullScreenQuad=Es.newInstance(),t._fullScreenQuad.setDevice(e.getDevice()),t._fullScreenQuad.setPipelineHash("fpfsq"),t._fullScreenQuad.setTextureViews([t.opaquePass.getColorTextureView()]),t._fullScreenQuad.setAdditionalBindables([t._fsqSampler]),t._fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._finalBlitOutputTextureView=Ev.newInstance(),t._finalBlitEncoder.setColorTextureView(0,t._finalBlitOutputTextureView)},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.addVolume=function(e){t.volumes.push(e)}}var Dg={newInstance:eE.newInstance(Dm,"vtkForwardPass"),extend:Dm},Dv=nH.VtkDataTypes,Dy={handle:null,device:null};function Db(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dy,n),eE.obj(e,t),eE.setGet(e,t,["device"]),function(e,t){function n(e){if(e.imageData){e.dataArray=e.imageData.getPointData().getScalars(),e.time=e.dataArray.getMTime(),e.nativeArray=e.dataArray.getData();var t=e.imageData.getDimensions();switch(e.width=t[0],e.height=t[1],e.depth=t[2],e.dataArray.getNumberOfComponents()){case 1:e.format="r";break;case 2:e.format="rg";break;default:e.format="rgba"}switch(e.dataArray.getDataType()){case Dv.UNSIGNED_CHAR:e.format+="8unorm";break;case Dv.FLOAT:case Dv.UNSIGNED_INT:case Dv.INT:case Dv.DOUBLE:case Dv.UNSIGNED_SHORT:case Dv.SHORT:default:e.format+="16float"}}e.image&&(e.width=e.image.width,e.height=e.image.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.jsImageData&&(e.width=e.jsImageData.width,e.height=e.jsImageData.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.nativeArray=e.jsImageData.data,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.imageBitmap&&(e.width=e.imageBitmap.width,e.height=e.imageBitmap.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.canvas&&(e.width=e.canvas.width,e.height=e.canvas.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT)}function i(e){var n=Ex.newInstance({label:e.label});return n.create(t.device,{width:e.width,height:e.height,depth:e.depth,format:e.format,usage:e.usage,mipLevel:e.mipLevel}),(e.nativeArray||e.image||e.canvas||e.imageBitmap)&&n.writeImageData(e),n}t.classHierarchy.push("vtkWebGPUTextureManager"),e.getTexture=function(e){return e.hash?t.device.getCachedObject(e.hash,i,e):i(e)},e.getTextureForImageData=function(e){var i={time:e.getMTime()};return i.imageData=e,n(i),i.hash=i.time+i.format+i.mipLevel,t.device.getTextureManager().getTexture(i)},e.getTextureForVTKTexture=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o={time:e.getMTime(),label:i};return e.getInputData()?o.imageData=e.getInputData():e.getImage()?o.image=e.getImage():e.getJsImageData()?o.jsImageData=e.getJsImageData():e.getImageBitmap()?o.imageBitmap=e.getImageBitmap():e.getCanvas()&&(o.canvas=e.getCanvas()),n(o),o.mipLevel=e.getMipLevel(),o.hash=o.time+o.format+o.mipLevel,t.device.getTextureManager().getTexture(o)}}(e,t)}var Dx={newInstance:eE.newInstance(Db),extend:Db};function Dw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Dw=function(){return!!e})()}var DA=function(e){R(i,e);var t,n=(t=Dw(),function(){var e,n=k(i);return e=t?Reflect.construct(n,arguments,k(this).constructor):n.apply(this,arguments),L(this,e)});function i(){var e,t,o;return E(this,i),(o=n.call(this)).registry=new FinalizationRegistry(function(n){var a=N((e=B(o),k(i.prototype)),"get",e).call(e,n);a&&a.deref&&void 0===a.deref()&&N((t=B(o),k(i.prototype)),"delete",t).call(t,n)}),o}return I(i,[{key:"getValue",value:function(e){var t=N(k(i.prototype),"get",this).call(this,e);if(t){var n=t.deref();if(void 0!==n)return n;N(k(i.prototype),"delete",this).call(this,e)}}},{key:"setValue",value:function(e,t){var n;return t&&"object"===g(t)&&(n=new WeakRef(t),this.registry.register(t,e),N(k(i.prototype),"set",this).call(this,e,n)),n}}]),i}(F(Map)),DC={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function DS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,DC,n),es(e,t),ep(e,t,["handle"]),eu(e,t,["bufferManager","shaderCache","textureManager"]),t.objectCache=new DA,t.shaderCache=MH.newInstance(),t.shaderCache.setDevice(e),t.bindGroupLayouts=[],t.bufferManager=E1.newInstance(),t.bufferManager.setDevice(e),t.textureManager=Dx.newInstance(),t.textureManager.setDevice(e),t.pipelines={},t.classHierarchy.push("vtkWebGPUDevice"),e.initialize=function(e){t.handle=e},e.createCommandEncoder=function(){return t.handle.createCommandEncoder()},e.submitCommandEncoder=function(e){t.handle.queue.submit([e.finish()])},e.getShaderModule=function(e){return t.shaderCache.getShaderModule(e)},e.getBindGroupLayout=function(e){if(!e.entries)return null;for(var n=0;n<e.entries.length;n++){var i=e.entries[n];i.binding=i.binding||0,i.visibility=i.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}for(var o=JSON.stringify(e),a=0;a<t.bindGroupLayouts.length;a++)if(t.bindGroupLayouts[a].sval===o)return t.bindGroupLayouts[a].layout;var s=t.handle.createBindGroupLayout(e);return t.bindGroupLayouts.push({sval:o,layout:s}),s},e.getBindGroupLayoutDescription=function(e){for(var n=0;n<t.bindGroupLayouts.length;n++)if(t.bindGroupLayouts[n].layout===e)return t.bindGroupLayouts[n].sval;return vtkErrorMacro("layout not found"),console.trace(),null},e.getPipeline=function(e){return e in t.pipelines?t.pipelines[e]:null},e.createPipeline=function(n,i){i.initialize(e,n),t.pipelines[n]=i},e.onSubmittedWorkDone=function(){return t.handle.queue.onSubmittedWorkDone()},e.hasCachedObject=function(e){return t.objectCache.getValue(e)},e.getCachedObject=function(e,n){if(!e)return vtkErrorMacro("attempt to cache an object without a hash"),null;var i=t.objectCache.getValue(e);if(i)return i;for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];var l=n.apply(void 0,a);return t.objectCache.setValue(e,l),l}}var D_={newInstance:ew(DS,"vtkWebGPUDevice"),extend:DS},DT={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function DO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,DT,n),PS.extend(e,t,n),eE.get(e,t,["colorTexture","depthTexture"]),t.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),e.traverse=function(n,i){if(!t.deleted){t._currentParent=null,e.setCurrentOperation("buildPass"),n.traverse(e);var o=n.getDevice();if(t.selectionRenderEncoder)t.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),t.depthTexture.resizeToMatch(t.colorTexture);else{e.createRenderEncoder(),t.colorTexture=Ex.newInstance({label:"hardwareSelectorColor"}),t.colorTexture.create(o,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var a=t.colorTexture.createView("hardwareSelectColorTexture");t.selectionRenderEncoder.setColorTextureView(0,a),t.depthTexture=Ex.newInstance({label:"hardwareSelectorDepth"}),t.depthTexture.create(o,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var s=t.depthTexture.createView("hardwareSelectDepthTexture");t.selectionRenderEncoder.setDepthTextureView(s)}t.selectionRenderEncoder.attachTextureViews(),i.setRenderEncoder(t.selectionRenderEncoder),e.setCurrentOperation("cameraPass"),i.traverse(e),e.setCurrentOperation("opaquePass"),i.traverse(e)}},e.createRenderEncoder=function(){t.selectionRenderEncoder=Ed.newInstance({label:"HardwareSelectionPass"}),t.selectionRenderEncoder.setPipelineHash("sel"),t.selectionRenderEncoder.setReplaceShaderCodeFunction(function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<u32>","outColor");var n=t.getCode();n=MH.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,t.setCode(n)}),t.selectionRenderEncoder.getDescription().colorAttachments[0].clearValue=[0,0,0,0],t.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}var DP={newInstance:eE.newInstance(DO,"vtkWebGPUHardwareSelectionPass"),extend:DO},DM=l$.SelectionContent,DE=l$.SelectionField,DD=oe.FieldAssociations,DI=eE.vtkErrorMacro;function Dk(e,t,n,i){var o=4*((n.height-t-1)*n.colorBufferWidth+e)+i;return n.colorValues[o]}var DN={};function DR(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,DN,i),TV.extend(e,t,i),t._selectionPass=DP.newInstance(),eE.setGet(e,t,["_WebGPURenderWindow"]),eE.moveToProtected(e,t,["WebGPURenderWindow"]),t.classHierarchy.push("vtkWebGPUHardwareSelector"),e.endSelection=function(){t.WebGPURenderer.setSelector(null)},n=w$(w1().mark(function e(n){var i,o,a,s,l,u,c,d,f,p,h;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t._WebGPURenderWindow){e.next=3;break}return DI("Renderer and view must be set before calling Select."),e.abrupt("return",!1);case 3:if(t._WebGPURenderWindow.getRenderable().preRender(),t._WebGPURenderWindow.getInitialized()){e.next=8;break}return t._WebGPURenderWindow.initialize(),e.next=8,new Promise(function(e){t._WebGPURenderWindow.onInitialized(e)});case 8:if(i=t._WebGPURenderWindow.getViewNodeFor(n)){e.next=11;break}return e.abrupt("return",!1);case 11:if(o=i.getSuppressClear(),i.setSuppressClear(!0),t._selectionPass.traverse(t._WebGPURenderWindow,i),i.setSuppressClear(o),a=t._WebGPURenderWindow.getDevice(),s=t._selectionPass.getColorTexture(),l=t._selectionPass.getDepthTexture(),(u={area:[0,0,s.getWidth()-1,s.getHeight()-1],captureZValues:t.captureZValues,fieldAssociation:t.fieldAssociation,renderer:n,webGPURenderer:i,webGPURenderWindow:t._WebGPURenderWindow,width:s.getWidth(),height:s.getHeight()}).colorBufferWidth=16*Math.floor((u.width+15)/16),u.colorBufferSizeInBytes=u.colorBufferWidth*u.height*16,(c=EI.newInstance({label:"hardwareSelectColorBuffer"})).setDevice(a),c.create(u.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(d=t._WebGPURenderWindow.getCommandEncoder()).copyTextureToBuffer({texture:s.getHandle()},{buffer:c.getHandle(),bytesPerRow:16*u.colorBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1}),t.captureZValues&&(u.zbufferBufferWidth=64*Math.floor((u.width+63)/64),(f=EI.newInstance({label:"hardwareSelectDepthBuffer"})).setDevice(a),u.zbufferSizeInBytes=u.height*u.zbufferBufferWidth*4,f.create(u.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),d.copyTextureToBuffer({texture:l.getHandle(),aspect:"depth-only"},{buffer:f.getHandle(),bytesPerRow:4*u.zbufferBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1})),a.submitCommandEncoder(d),p=c.mapAsync(GPUMapMode.READ),!t.captureZValues){e.next=37;break}return h=f.mapAsync(GPUMapMode.READ),e.next=33,Promise.all([p,h]);case 33:u.depthValues=new Float32Array(f.getMappedRange().slice()),f.unmap(),e.next=39;break;case 37:return e.next=39,p;case 39:return u.colorValues=new Uint32Array(c.getMappedRange().slice()),c.unmap(),u.generateSelection=function(e,t,n,i){return function(e,t,n,i,o){for(var a,s,l,u=Math.floor(t),c=Math.floor(n),d=Math.floor(i),f=Math.floor(o),p=new Map,h=[0,0],m=c;m<=f;m++)for(var g=u;g<=d;g++){var v=function e(t,n,i,o){var a=i<0?0:i;if(0===a){if(o[0]=n[0],o[1]=n[1],n[0]<0||n[0]>=t.width||n[1]<0||n[1]>=t.height)return null;var s=Dk(n[0],n[1],t,0);if(s<=0)return null;var l={};l.propID=s;var u=Dk(n[0],n[1],t,1);if((u<0||u>0xffffff)&&(u=0),l.compositeID=u,t.captureZValues){var c=(t.height-n[1]-1)*t.zbufferBufferWidth+n[0];l.zValue=t.depthValues[c],l.zValue=t.webGPURenderer.convertToOpenGLDepth(l.zValue),l.displayPosition=n}return l}var d=[n[0],n[1]],f=[0,0],p=e(t,n,0,o);if(p)return p;for(var h=1;h<a;++h){for(var m=d[1]>h?d[1]-h:0;m<=d[1]+h;++m)if(f[1]=m,d[0]>=h&&(f[0]=d[0]-h,p=e(t,f,0,o))||(f[0]=d[0]+h,p=e(t,f,0,o)))return p;for(var g=d[0]>=h?d[0]-(h-1):0;g<=d[0]+(h-1);++g)if(f[0]=g,d[1]>=h&&(f[1]=d[1]-h,p=e(t,f,0,o))||(f[1]=d[1]+h,p=e(t,f,0,o)))return p}return o[0]=n[0],o[1]=n[1],null}(e,[g,m],0,h);if(v){var y="".concat(v.propID," ").concat(v.compositeID);if(p.has(y)){var b=p.get(y);b.pixelCount++,e.captureZValues&&v.zValue<b.info.zValue&&(b.info=v),-1===b.attributeIDs.indexOf(v.attributeID)&&b.attributeIDs.push(v.attributeID)}else p.set(y,{info:v,pixelCount:1,attributeIDs:[v.attributeID]})}}return a=e.fieldAssociation,s=[],l=0,p.forEach(function(t,n){var i=l$.newInstance();switch(i.setContentType(DM.INDICES),a){case DD.FIELD_ASSOCIATION_CELLS:i.setFieldType(DE.CELL);break;case DD.FIELD_ASSOCIATION_POINTS:i.setFieldType(DE.POINT);break;default:DI("Unknown field association")}i.getProperties().propID=t.info.propID;var o=e.webGPURenderer.getPropFromID(t.info.propID);i.getProperties().prop=o.getRenderable(),i.getProperties().compositeID=t.info.compositeID,i.getProperties().pixelCount=t.pixelCount,e.captureZValues&&(i.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],i.getProperties().worldPosition=e.webGPURenderWindow.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,e.renderer)),i.setSelectionList(t.attributeIDs),s[l]=i,l++}),s}(u,e,t,n,i)},e.abrupt("return",u);case 43:case"end":return e.stop()}},e)})),e.getSourceDataAsync=function(e){return n.apply(this,arguments)}}var DB={newInstance:eE.newInstance(DR,"vtkWebGPUHardwareSelector"),extend:DR},DL=Object.create(null),DF={};function DV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,DF,n),t.overrides=DL,Pi.extend(e,t,n),t.classHierarchy.push("vtkWebGPUViewNodeFactory")}var Dj={newInstance:eE.newInstance(DV,"vtkWebGPUViewNodeFactory"),extend:DV},DG=eE.vtkErrorMacro,DU={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Dz={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function DW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dz,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",MT.extend(e,t,n),t.myFactory=Dj.newInstance(),t.renderPasses[0]=Dg.newInstance(),t.selector||(t.selector=DB.newInstance(),t.selector.setWebGPURenderWindow(e)),eE.event(e,t,"imageReady"),eE.event(e,t,"initialized"),eE.get(e,t,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),eE.setGet(e,t,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),eE.setGetArray(e,t,["size"],2),eE.event(e,t,"windowResizeEvent"),function(e,t){t.classHierarchy.push("vtkWebGPURenderWindow"),e.getViewNodeFactory=function(){return t.myFactory};var n=[0,0];function i(){return(i=w$(w1().mark(function n(){var i,o,a,s,l,u,c,d=arguments;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=d.length>0&&void 0!==d[0]?d[0]:t.imageFormat,a=(o=document.createElement("canvas")).getContext("2d"),o.width=t.canvas.width,o.height=t.canvas.height,n.next=7,e.getPixelsAsync();case 7:l=new ImageData((s=n.sent).colorValues,s.width,s.height),a.putImageData(l,0,0),u=t.canvas.getBoundingClientRect(),t.renderable.getRenderers().forEach(function(e){e.getViewProps().forEach(function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var i=t[n],o=i.getBoundingClientRect(),s=o.x-u.x,l=o.y-u.y;a.drawImage(i,s,l)}})}),c=o.toDataURL(i),o.remove(),e.invokeImageReady(c);case 17:case"end":return n.stop()}},n)}))).apply(this,arguments)}e.onModified(function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]),e.recreateSwapChain())),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null}),e.recreateSwapChain=function(){t.context&&(t.context.unconfigure(),t.presentationFormat=navigator.gpu.getPreferredCanvasFormat(t.adapter),t.context.configure({device:t.device.getHandle(),format:t.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:t.size[0],height:t.size[1]}),t._configured=!0)},e.getCurrentTexture=function(){return t.context.getCurrentTexture()},e.buildPass=function(n){n?t.renderable&&(e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize()):t.initialized&&(t._configured||e.recreateSwapChain(),t.commandEncoder=t.device.createCommandEncoder())},e.initialize=function(){if(!t.initializing){if(t.initializing=!0,!navigator.gpu)return void DG("WebGPU is not enabled.");e.create3DContextAsync().then(function(){t.initialized=!0,t.deleted||e.invokeInitialized()})}},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&DG("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect();t.containerSize=[e.width,e.height]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.size},e.create3DContextAsync=w$(w1().mark(function e(){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.gpu.requestAdapter({powerPreference:"high-performance"});case 2:if(t.adapter=e.sent,!t.deleted){e.next=5;break}return e.abrupt("return");case 5:return t.device=D_.newInstance(),e.t0=t.device,e.next=9,t.adapter.requestDevice();case 9:if(e.t1=e.sent,e.t0.initialize.call(e.t0,e.t1),!t.deleted){e.next=14;break}return t.device=null,e.abrupt("return");case 14:t.context=t.canvas.getContext("webgpu");case 15:case"end":return e.stop()}},e)})),e.releaseGraphicsResources=function(){var n=PS.newInstance();n.setCurrentOperation("Release"),n.traverse(e,null),t.adapter=null,t.device=null,t.context=null,t.initialized=!1,t.initializing=!1},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.resetCamera,a=void 0!==o&&o,s=i.size,l=void 0===s?null:s,u=i.scale,c=void 0===u?1:u;if(t.deleted)return null;t.imageFormat=n;var d=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:l||1!==c?l||t.size.map(function(e){return e*c}):null},new Promise(function(n,i){var o=e.onImageReady(function(i){if(null===t._screenshot.size)t.notifyStartCaptureImage=d,o.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach(function(e){return(0,e.restoreParamsFn)(e.arg)}),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(i);else{var s=document.createElement("img");if(s.style=DU,s.src=i,t._screenshot.placeHolder=t.el.appendChild(s),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),a){var l=!0!==a;t._screenshot.cameras=t.renderable.getRenderers().map(function(e){var t=e.getActiveCamera(),n=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:l?{renderer:e}:void 0,resetCameraFn:l?a:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(n))}}),t._screenshot.cameras.forEach(function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)})}e.traverseAllPasses()}})})},e.traverseAllPasses=function(){if(!t.deleted)if(t.initialized){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.commandEncoder&&(t.device.submitCommandEncoder(t.commandEncoder),t.commandEncoder=null,t.notifyStartCaptureImage&&t.device.onSubmittedWorkDone().then(function(){!function(){i.apply(this,arguments)}()}))}else{e.initialize();var o=e.onInitialized(function(){o.unsubscribe(),e.traverseAllPasses()})}},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(function(t){return e.setBackgroundImage(t.image)}),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.getUniquePropID=function(){return t.nextPropID++},e.getPropFromID=function(e){for(var n=0;n<t.children.length;n++){var i=t.children[n].getPropFromID(e);if(null!==i)return i}return null},e.getPixelsAsync=w$(w1().mark(function e(){var n,i,o,a,s,l,u,c,d,f,p;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.device,(o={width:(i=t.renderPasses[0].getOpaquePass().getColorTexture()).getWidth(),height:i.getHeight()}).colorBufferWidth=32*Math.floor((o.width+31)/32),o.colorBufferSizeInBytes=o.colorBufferWidth*o.height*8,(a=EI.newInstance()).setDevice(n),a.create(o.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(s=t.device.createCommandEncoder()).copyTextureToBuffer({texture:i.getHandle()},{buffer:a.getHandle(),bytesPerRow:8*o.colorBufferWidth,rowsPerImage:o.height},{width:o.width,height:o.height,depthOrArrayLayers:1}),n.submitCommandEncoder(s),l=a.mapAsync(GPUMapMode.READ),e.next=14,l;case 14:for(o.colorValues=new Uint16Array(a.getMappedRange().slice()),a.unmap(),u=new Uint8ClampedArray(o.height*o.width*4),c=0;c<o.height;c++)for(d=0;d<o.width;d++)f=4*(c*o.width+d),p=4*(c*o.colorBufferWidth+d),u[f]=255*n3.fromHalf(o.colorValues[p]),u[f+1]=255*n3.fromHalf(o.colorValues[p+1]),u[f+2]=255*n3.fromHalf(o.colorValues[p+2]),u[f+3]=255*n3.fromHalf(o.colorValues[p+3]);return o.colorValues=u,e.abrupt("return",o);case 20:case"end":return e.stop()}},e)})),e.createSelector=function(){var t=DB.newInstance();return t.setWebGPURenderWindow(e),t};var o=e.setSize;e.setSize=function(t,n){var i=o(t,n);return i&&e.invokeWindowResizeEvent({width:t,height:n}),i},e.delete=eE.chain(e.delete,e.setViewStream)}(e,t)}var DH=eE.newInstance(DW,"vtkWebGPURenderWindow");Od.WebGPU=DH,DL.vtkRenderWindow=DH;var Dq=sr.extractURLParameters(),DK={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},DX={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function DY(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}var DZ={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function DJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,DZ,n),eE.obj(e,t),eE.get(e,t,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),function(e,t){t.classHierarchy.push("vtkFullScreenRenderWindow");var n,i=document.querySelector("body");function o(t){"c"===String.fromCharCode(t.charCode)&&e.toggleControllerVisibility()}t.rootContainer||(t.rootContainer=i),t.container||(t.container=document.createElement("div"),DY(t.container,t.containerStyle||DK),t.rootContainer.appendChild(t.container)),t.rootContainer===i&&(document.documentElement.style.height="100%",i.style.height="100%",i.style.padding="0",i.style.margin="0"),t.renderWindow=Om.newInstance(),t.renderer=yj.newInstance(),t.renderWindow.addRenderer(t.renderer),t.apiSpecificRenderWindow=t.renderWindow.newAPISpecificView(null!=(n=Dq.viewAPI)?n:t.defaultViewAPI),t.apiSpecificRenderWindow.setContainer(t.container),t.renderWindow.addView(t.apiSpecificRenderWindow),t.interactor=hj.newInstance(),t.interactor.setInteractorStyle(vi.newInstance()),t.interactor.setView(t.apiSpecificRenderWindow),t.interactor.initialize(),t.interactor.bindEvents(t.container),e.setBackground=t.renderer.setBackground,e.removeController=function(){var e=t.controlContainer;e&&e.parentNode.removeChild(e)},e.setControllerVisibility=function(e){t.controllerVisibility=e,t.controlContainer&&(t.controlContainer.style.display=e?"block":"none")},e.toggleControllerVisibility=function(){e.setControllerVisibility(!t.controllerVisibility)},e.addController=function(n){t.controlContainer=document.createElement("div"),DY(t.controlContainer,t.controlPanelStyle||DX),t.rootContainer.appendChild(t.controlContainer),t.controlContainer.innerHTML=n,e.setControllerVisibility(t.controllerVisibility),t.rootContainer.addEventListener("keypress",o)},e.setBackground.apply(e,m(t.background)),e.addRepresentation=function(e){e.getActors().forEach(function(e){t.renderer.addActor(e)})},e.removeRepresentation=function(e){e.getActors().forEach(function(e){return t.renderer.removeActor(e)})},e.delete=eE.chain(e.setContainer,t.apiSpecificRenderWindow.delete,function(){var n;null==(n=t.rootContainer)||n.removeEventListener("keypress",o),window.removeEventListener("resize",e.resize)},e.delete),e.resize=function(){var e=t.container.getBoundingClientRect(),n=window.devicePixelRatio||1;t.apiSpecificRenderWindow.setSize(Math.floor(e.width*n),Math.floor(e.height*n)),t.resizeCallback&&t.resizeCallback(e),t.renderWindow.render()},e.setResizeCallback=function(n){t.resizeCallback=n,e.resize()},t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}(e,t)}var DQ={newInstance:eE.newInstance(DJ),extend:DJ},D$=sr.extractURLParameters(),D0={background:[.32,.34,.43],listenWindowResize:!0,container:null};function D1(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,D0,o),eE.obj(e,t),eE.get(e,t,["renderWindow","renderer","_apiSpecificRenderWindow","interactor","container"]),eE.moveToProtected(e,t,["_apiSpecificRenderWindow"]),eE.event(e,t,"resize"),i=e.invokeResize,delete e.invokeResize,t.renderWindow=Om.newInstance(),t.renderer=yj.newInstance(),t.renderWindow.addRenderer(t.renderer),t._apiSpecificRenderWindow=t.renderWindow.newAPISpecificView(null!=(n=D$.viewAPI)?n:t.defaultViewAPI),t.renderWindow.addView(t._apiSpecificRenderWindow),t.interactor=hj.newInstance(),t.interactor.setInteractorStyle(vi.newInstance()),t.interactor.setView(t._apiSpecificRenderWindow),t.interactor.initialize(),e.setBackground=t.renderer.setBackground,e.setBackground.apply(e,m(t.background)),e.resize=function(){if(t.container){var e=t.container.getBoundingClientRect(),n=window.devicePixelRatio||1;t._apiSpecificRenderWindow.setSize(Math.floor(e.width*n),Math.floor(e.height*n)),i(),t.renderWindow.render()}},e.setContainer=function(e){t.container&&t.interactor.unbindEvents(t.container),t.container=e,t._apiSpecificRenderWindow.setContainer(t.container),t.container&&t.interactor.bindEvents(t.container)},e.delete=eE.chain(e.setContainer,t._apiSpecificRenderWindow.delete,function(){window.removeEventListener("resize",e.resize)},e.delete),t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}var D2={newInstance:eE.newInstance(D1),extend:D1},D3=wP.newInstance(),D4=D3.connect,D5=D3.disconnect,D6={viewId:"-1",interactiveQuality:60,interactiveRatio:1/window.devicePixelRatio,stillQuality:100,stillRatio:1,rpcMouseEvent:"viewport.mouse.interaction",rpcGestureEvent:null,rpcWheelEvent:null,canvasElement:null};function D8(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,D6,i),eE.obj(e,t,i),eE.get(e,t,["container","viewStream","canvasView","interactor","interactorStyle","interactiveQuality","interactiveRatio","stillQuality","stillRatio","canvasElement"]),eE.setGet(e,t,["session","rpcMouseEvent","rpcGestureEvent","rpcWheelEvent"]),t.classHierarchy.push("vtkRemoteView"),t.canvasView=O4.newInstance({canvas:t.canvasElement}),t.interactorStyle=vb.newInstance(),t.interactor=hj.newInstance(),t.interactor.setView(t.canvasView),t.interactor.initialize(),t.interactor.setInteractorStyle(t.interactorStyle),t.interactorStyle.onRemoteMouseEvent(function(e){t.session&&t.rpcMouseEvent&&t.session.call(t.rpcMouseEvent,[e])}),t.interactorStyle.onRemoteWheelEvent(function(e){t.session&&t.rpcWheelEvent&&t.session.call(t.rpcWheelEvent,[e])}),t.interactorStyle.onRemoteGestureEvent(function(e){t.session&&t.rpcGestureEvent&&t.session.call(t.rpcGestureEvent,[e])}),e.delete=eE.chain(function(){t.session=null,t.canvasView&&(t.canvasView.setViewStream(null),t.canvasView.delete()),t.interactor&&t.interactor.delete(),t.viewStream&&t.viewStream.delete()},e.delete),e.getCanvasElement=function(){return t.canvasView.getCanvas()},e.setViewStream=function(n){t.viewStream=n,t.canvasView.setViewStream(t.viewStream),t.viewStream.setStillQuality(t.stillQuality),t.viewStream.setStillRatio(t.stillRatio),t.viewStream.setInteractiveQuality(t.interactiveQuality),t.viewStream.setInteractiveRatio(t.interactiveRatio),t.interactor.onStartAnimation(t.viewStream.startInteraction),t.interactor.onEndAnimation(t.viewStream.endInteraction),e.setViewId(n.getViewId())},e.setViewId=function(n){t.viewStream||e.setViewStream(D3.createViewStream(n)),t.viewStream.setViewId(n),t.interactorStyle.setRemoteEventAddOn({view:n}),e.modified()},e.setContainer=function(n){t.container&&t.interactor.unbindEvents(n),t.container=n,t.canvasView.setContainer(t.container),n&&(t.interactor.bindEvents(n),e.resize())},e.resize=function(){if(t.container&&t.canvasView){var n=t.container.getBoundingClientRect(),i=n.width,o=n.height;t.canvasView.setSize(i,o),e.render()}},e.render=function(){t.viewStream&&t.viewStream.render()},e.resetCamera=function(){t.viewStream&&t.viewStream.resetCamera()},n={modified:e.modified},eE.set(n,t,["interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),e.setInteractiveQuality=function(e){var i=n.setInteractiveQuality(e);return t.viewStream&&i&&t.viewStream.setInteractiveQuality(t.interactiveQuality),i},e.setInteractiveRatio=function(e){var i=n.setInteractiveRatio(e);return t.viewStream&&i&&t.viewStream.setInteractiveRatio(t.interactiveRatio),i},e.setStillQuality=function(e){var i=n.setStillQuality(e);return t.viewStream&&i&&t.viewStream.setStillQuality(t.stillQuality),i},e.setStillRatio=function(e){var i=n.setStillRatio(e);return t.viewStream&&i&&t.viewStream.setStillRatio(t.stillRatio),i},t.viewStream&&e.setViewStream(t.viewStream)}var D9={newInstance:eE.newInstance(D8,"vtkRemoteView"),extend:D8,SHARED_IMAGE_STREAM:D3,connectImageStream:D4,disconnectImageStream:D5},D7=n(3918),Ie={};Ie.styleTagTransform=vD(),Ie.setAttributes=vO(),Ie.insert=v_().bind(null,"head"),Ie.domAPI=vC(),Ie.insertStyleElement=vM(),vw()(D7.A,Ie);var It=D7.A&&D7.A.locals?D7.A.locals:void 0;function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Ir={left:function(e){return{top:"0",left:"0",bottom:"0",right:"unset",height:"unset",width:"".concat(e,"px")}},right:function(e){return{top:"0",right:"0",bottom:"0",left:"unset",height:"unset",width:"".concat(e,"px")}},top:function(e){return{top:"0",left:"0",right:"0",bottom:"unset",width:"unset",height:"".concat(e,"px")}},bottom:function(e){return{bottom:"0",left:"0",right:"0",top:"unset",width:"unset",height:"".concat(e,"px")}}},Ii={rootContainer:null,controlPosition:"left",controlSize:10};function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ii,n),D2.extend(e,t),eE.get(e,t,["rootContainer","controlContainer","renderWindowContainer"]),function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);function i(e){t.renderWindowContainer.style[e]="0px"}function o(){var e,n,o,a;["left","right","top","bottom"].forEach(i),t.renderWindowContainer.style[t.controlPosition]="".concat(t.controlSize,"px"),e=t.controlContainer,n=t.controlPosition,o=t.controlSize,Object.keys(a=Ir[n](o)).forEach(function(t){e.style[t]=a[t]})}t.renderWindowContainer=document.createElement("div"),t.renderWindowContainer.classList.add(It.renderWindow),n.setContainer(t.renderWindowContainer),t.controlContainer=document.createElement("div"),t.controlContainer.classList.add(It.control),e.setContainer=function(n){t.rootContainer&&(t.rootContainer.removeChild(t.container),t.rootContainer.removeChild(t.controlContainer),t.rootContainer.classList.remove(It.rootContainer)),t.rootContainer=n,t.rootContainer&&(t.rootContainer.appendChild(t.container),t.rootContainer.appendChild(t.controlContainer),t.rootContainer.classList.add(It.rootContainer),o(),e.resize())},e.setControlSize=function(n){t.controlSize=n,o(),e.modified()},e.setControlPosition=function(n){t.controlPosition=n,o(),e.modified()},t.listenWindowResize&&window.addEventListener("resize",e.resize),o(),e.resize()}(e,t)}var Ia={newInstance:eE.newInstance(Io,"vtkRenderWindowWithControlBar"),extend:Io},Is="resetcamera",Il="orientation",Iu={mode:Il,focalPoint:[0,0,0],distance:6.8,active:!0};function Ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Iu,n),es(e,t),ep(e,t,["mode","active","srcRenderer","dstRenderer","distance"]),eg(e,t,["focalPoint"],3,0),function(e,t){t.classHierarchy.push("vtkCameraSynchronizer");var n=new Float64Array(9),i=new Float64Array(3),o=[];function a(){for(;o.length;)o.pop().unsubscribe();if(t.srcRenderer&&t.dstRenderer){var n=t.srcRenderer.getActiveCamera(),i=t.srcRenderer.getRenderWindow().getInteractor();o.push(n.onModified(function(){i.isAnimating()||e.update()})),o.push(i.onAnimation(e.update)),o.push(i.onEndAnimation(e.update))}}t._onSrcRendererChanged=a,t._onDstRendererChanged=a,e.update=function(){if(t.active&&t.srcRenderer&&t.dstRenderer){var e,o,a,s=t.srcRenderer.getActiveCamera(),l=t.dstRenderer.getActiveCamera(),u=(e=s.getReferenceByName("position"),o=s.getReferenceByName("focalPoint"),a=s.getReferenceByName("viewUp"),(n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==o[0]||n[4]!==o[1]||n[5]!==o[2]||n[6]!==a[0]||n[7]!==a[1]||n[8]!==a[2])&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=o[0],n[4]=o[1],n[5]=o[2],n[6]=a[0],n[7]=a[1],n[8]=a[2],n));u&&(t.mode===Il?(i[0]=u[0]-u[3],i[1]=u[1]-u[4],i[2]=u[2]-u[5],th(i),l.setPosition(t.focalPoint[0]+t.distance*i[0],t.focalPoint[1]+t.distance*i[1],t.focalPoint[2]+t.distance*i[2]),l.setFocalPoint(t.focalPoint[0],t.focalPoint[1],t.focalPoint[2])):(l.setPosition(u[0],u[1],u[2]),l.setFocalPoint(u[3],u[4],u[5])),l.setViewUp(u[6],u[7],u[8]),t.mode===Is&&t.dstRenderer.resetCamera())}},e.delete=eA(function(){return e.setSrcRenderer(null)},e.delete),a()}(e,t)}var Id={newInstance:ew(Ic,"vtkCameraSynchronizer"),extend:Ic,SynchronizationMode:{MODE_RESET_CAMERA:Is,MODE_ORIENTATION:Il,MODE_SAME:"same"}},If={},Ip={CameraSync:function(){function e(t,n){E(this,e),this.ctx=t,this.behavior=Id.newInstance(this.getProperties(n)),this.behavior.update()}return I(e,[{key:"getProperties",value:function(e){var t=e.actorBounds,n=e.srcRenderer,i=e.dstRenderer;return{distance:3.4*Math.max(t[1]-t[0],t[3]-t[2],t[5]-t[4]),focalPoint:[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])],mode:Id.SynchronizationMode.MODE_ORIENTATION,srcRenderer:this.ctx.getInstance(n),dstRenderer:this.ctx.getInstance(i)}}},{key:"update",value:function(e){this.behavior.set(this.getProperties(e)),this.behavior.update()}},{key:"delete",value:function(){this.behavior.delete()}}]),e}()},Ih=function(e,t,n){var i=e.get("synchronizedViewId").synchronizedViewId;if(t.behaviors&&i){If[i]||(If[i]={});var o=If[i];if(t.behaviors.autoOrientation){var a=e.getRenderers();if(!o.autoOrientationAxes&&2===a.length){for(var s=null,l=null,u=0;u<a.length;u++){var c=a[u];c.getInteractive()?s=c:l=c}s&&l&&(o.autoOrientationAxes=Id.newInstance({srcRenderer:s,dstRenderer:l}))}o.autoOrientationAxes&&2!==a.length&&(o.autoOrientationAxes.delete(),delete o.autoOrientationAxes)}for(var d=Object.keys(t.behaviors),f=Object.keys(o),p=0;p<d.length;p++){var h=d[p];if(o[h])o[h].update(t.behaviors[h]);else{var m=t.behaviors[h];Ip[m.type]?o[h]=new Ip[m.type](n,m):console.log("No mapping for",m)}}for(var g=0;g<f.length;g++){var v=d[g];t.behaviors[v]||(o[v].delete(),delete o[v])}}};function Im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Im(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Im(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Iv={},Iy=/instance:\${([^}]+)}/,Ib={},Ix=[],Iw={},IA={vtkPoints:a3,vtkCellArray:nQ,vtkDataArray:nH};function IC(e){return e.map(function(e){return Iy.exec(e)}).filter(function(e){return e}).map(function(e){return e[1]})}function IS(e,t,n,i){if(!t)return Promise.reject(Error("No instance provided."));var o=Iv[e];return o&&o.update?o.update(t,n,i):Promise.reject(Error("No updater for ".concat(e)))}function I_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Iv[e];return n&&n.build?n.build(t):(console.log("No builder for",e),null)}function IT(){Object.keys(Iv).forEach(function(e){delete Iv[e]})}function IO(e){if(1===e[1].length)return -1===Ix.indexOf(e[1][0]);for(var t=!1,n=0;n<e[1].length;n++)t=t||-1===Ix.indexOf(e[1][n]);return t}function IP(e,t,n){n.start(),e.set(t.properties),t.dependencies&&t.dependencies.forEach(function(e){var t=e.id,i=e.type;if(Iw[i]){var o=Iw[i],a=o.key,s=o.value;if(!a||e.properties[a]===s)return void Ix.push("instance:${".concat(t,"}"))}var l=n.getInstance(t);l||(l=I_(i,{managedInstanceId:t}),n.registerInstance(t,l)),IS(i,l,e,n)}),t.calls&&t.calls.filter(IO).forEach(function(t){e[t[0]].apply(null,t[1].map(function(e){var t=Iy.exec(e);return t?n.getInstance(t[1]):e}))});var i=[];if(t.arrays){var o=[],a=Object.values(t.arrays).map(function(t){return n.start(),n.getArray(t.hash,t.dataType,n).then(function(n){var i=t.registration?t.registration:"addArray",a=t.location?e.getReferenceByName(t.location):e,s=null;if(s=t.location?e.getReferenceByName(t.location).getArray(t.name):e["get".concat(i.substring(3))]())return s.getData()!==n&&o.push([s.setData,[n,t.numberOfComponents]]),s;var l=IA[t.vtkClass?t.vtkClass:"vtkDataArray"].newInstance(Ig(Ig({},t),{},{values:n}));return o.push([a[i],[l]]),l}).catch(function(e){console.log("Error fetching array",JSON.stringify(t),e)}).finally(n.end)});n.start(),i.push(Promise.all(a).then(function(){return o.length&&e.modified(),function(e){for(;e.length;){var t=b(e.shift(),2),n=t[0],i=t[1];n.apply(void 0,m(i))}}(o),!0}).catch(function(e){console.error("Error in array handling for state",JSON.stringify(t),e)}).finally(n.end))}return n.end(),Promise.all(i)}function IM(e,t,n){Ib[t.id]||IP(e,t,n),Ib[t.id]=!0}function IE(e,t){for(var n=[],i=e.getNumberOfArrays(),o=0;o<i;o++){var a=e.getArray(o).getName();t.has(a)||n.push(a)}for(var s=0;s<n.length;s++)e.removeArray(n[s])}function ID(e){var t=e.name?"_".concat(e.name):"";return"".concat(e.hash,"_").concat(e.dataType).concat(t)}function II(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,n,i){i.start();var o=Ig({},n.properties);n.arrays||(n.arrays={});for(var a=0;a<e.length;a++){var s=e[a];if(n.properties[s]){var l=n.properties[s];l.registration="set".concat(en(s));var u=ID(l);n.arrays[u]=l,delete o[s]}}for(var c=n.properties.fields||[],d=0;d<c.length;d++){var f=c[d],p=ID(f);n.arrays[p]=f}delete o.fields;var h={pointData:new Set,cellData:new Set,fieldData:new Set};c.forEach(function(e){var t=e.location,n=e.name;h[t].add(n)}),IE(t.getPointData(),h.pointData),IE(t.getCellData(),h.cellData);var m=Ig({},n);m.properties=o;var g=IP(t,m,i);return i.end(),g}}var Ik=II(["points","polys","verts","lines","strips"]),IN=II([]);function IR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:IP;I_||IS?Iv[e]={build:t,update:n}:delete Iv[e]}var IB={vtkMapper:["vtkOpenGLPolyDataMapper","vtkCompositePolyDataMapper2","vtkDataSetMapper"],vtkProperty:["vtkOpenGLProperty"],vtkRenderer:["vtkOpenGLRenderer"],vtkCamera:["vtkOpenGLCamera"],vtkColorTransferFunction:["vtkPVDiscretizableColorTransferFunction"],vtkActor:["vtkOpenGLActor","vtkPVLODActor"],vtkLight:["vtkOpenGLLight","vtkPVLight"],vtkTexture:["vtkOpenGLTexture"],vtkImageMapper:["vtkOpenGLImageSliceMapper"],vtkVolumeMapper:["vtkFixedPointVolumeRayCastMapper"]},IL={vtkAxesActor:{build:S0.newInstance,update:IP},vtkRenderWindow:{build:Om.newInstance,update:function(e,t,n){t.calls&&t.calls.filter(IO).filter(function(e){return"removeRenderer"===e[0]}).forEach(function(e){IC(e[1]).forEach(function(e){n.getInstance(e).getViewProps().forEach(function(e){var t=e.get("flattenedDepIds").flattenedDepIds;t&&t.forEach(function(e){return n.unregisterInstance(e)}),n.unregisterInstance(n.getInstanceId(e))})})}),e.render(),IP(e,t,n),Ih(e,t,n)}},vtkRenderer:{build:yj.newInstance,update:function(e,t,n){IP(e,t,n);var i=new Set;t.dependencies&&t.dependencies.forEach(function(e){var t=n.getInstance(e.id);if(t){var o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.dependencies&&t.dependencies.forEach(function(t){n.push(t.id),e(t,n)}),n}(e);t.set({flattenedDepIds:o},!0),o.forEach(function(e){return i.add(e)})}});var o=new Set;t.calls&&t.calls.filter(IO).filter(function(e){return"removeViewProp"===e[0]}).forEach(function(e){IC(e[1]).forEach(function(e){var t=n.getInstance(e).get("flattenedDepIds").flattenedDepIds;t&&t.forEach(function(e){return o.add(e)}),o.add(e)})}),m(o).filter(function(e){return!i.has(e)}).forEach(function(e){return n.unregisterInstance(e)})}},vtkLookupTable:{build:aZ.newInstance,update:IP},vtkCamera:{build:yM.newInstance,update:IM},vtkPolyData:{build:lC.newInstance,update:Ik},vtkImageData:{build:aP.newInstance,update:IN},vtkMapper:{build:gd.newInstance,update:IP},vtkGlyph3DMapper:{build:TB.newInstance,update:IP},vtkProperty:{build:mG.newInstance,update:IP},vtkActor:{build:mH.newInstance,update:IP},vtkLight:{build:yI.newInstance,update:IP},vtkColorTransferFunction:{build:xO.newInstance,update:function(e,t,n){if(n.start(),t.properties.nodes){var i=t.properties.nodes.map(function(e){var t=b(e,6);return{x:t[0],r:t[1],g:t[2],b:t[3],midpoint:t[4],sharpness:t[5]}});e.set(Ig(Ig({},t.properties),{},{nodes:i}),!0)}else e.set(t.properties);n.end()}},vtkTexture:{build:xQ.newInstance,update:IP},vtkVolume:{build:xz.newInstance,update:IP},vtkVolumeMapper:{build:wn.newInstance,update:IP},vtkVolumeProperty:{build:xj.newInstance,update:IP},vtkImageSlice:{build:T8.newInstance,update:IP},vtkImageMapper:{build:TY.newInstance,update:IP},vtkImageProperty:{build:T0.newInstance,update:IP},vtkPiecewiseFunction:{build:lW.newInstance,update:function(e,t,n){if(n.start(),t.properties.nodes){var i=t.properties.nodes.map(function(e){var t=b(e,4);return{x:t[0],y:t[1],midpoint:t[2],sharpness:t[3]}});e.set(Ig(Ig({},t.properties),{},{nodes:i}),!0),e.sortAndUpdateRange()}else e.set(t.properties);n.end()}},vtkCubeAxesActor:{build:TC.newInstance,update:IP},vtkScalarBarActor:{build:OT.newInstance,update:IP}};function IF(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&IT(),Object.keys(IL).forEach(function(e){var t=IL[e];IR(e,t.build,t.update)})}function IV(){Object.keys(IB).forEach(function(e){IB[e].forEach(function(t){Iv[t]=Iv[e]})})}IF(),IV(),Iw.vtkPVLight={};var Ij={build:I_,update:IS,genericUpdater:IP,oneTimeGenericUpdater:IM,setTypeMapping:IR,clearTypeMapping:IT,getSupportedTypes:function(){return Object.keys(Iv)},clearOneTimeUpdaters:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var i=t;return 1===i.length&&Array.isArray(i[0])&&(i=i[0]),i.forEach(function(e){delete Ib[e]}),i}Object.keys(Ib).forEach(function(e){delete Ib[e]})},updateRenderWindow:function(e,t,n){return IS("vtkRenderWindow",e,t,n)},excludeInstance:function(e,t,n){Iw[e]={key:t,value:n}},setDefaultMapping:IF,applyDefaultAliases:IV,alwaysUpdateCamera:function(){IR("vtkCamera",yM.newInstance),IV()}};function IG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function IU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IG(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Iz={};function IW(){var e={},t=null;return{setFetchArrayFunction:function(e){t=e},getArray:function(n,i,o){var a=e[n];return a?(a.mtimes[o.getActiveViewId()]=o.getMTime(),new Promise(function(e,t){e(a.array)})):t?new Promise(function(a,s){t(n).then(function(t){var s=t;if("string"==typeof t&&(s=f.toArrayBuffer(t)),s instanceof Blob){var l=new FileReader;l.onload=function(){var t=ee(i,l.result),s=y({},o.getActiveViewId(),o.getMTime());e[n]={mtimes:s,array:t},a(t)},l.readAsArrayBuffer(s)}else{var u=ee(i,s),c=y({},o.getActiveViewId(),o.getMTime());e[n]={mtimes:c,array:u},a(u)}},function(e){console.log("Error getting data array:"),console.log(e),s(e)})}):Promise.reject(Error('No array fetcher found, please use "setArrayFetcher" to provide one'))},emptyCachedArrays:function(){Object.keys(e).forEach(function(t){delete e[t]})},freeOldArrays:function(t,n){var i=n.getMTime()-t;Object.keys(e).filter(function(t){return e[t].mtimes[n.getActiveViewId()]}).filter(function(t){return e[t].mtimes[n.getActiveViewId()]<i}).forEach(function(t){delete e[t]})}}}function IH(){var e={};return{getInstance:function(t){return e[t]},getInstanceId:function(t){var n=null;return Object.keys(e).forEach(function(i){t===e[i]&&(n=i)}),n},registerInstance:function(t,n){e[t]=n,n.set({remoteId:t},!0,!0)},unregisterInstance:function(t){delete e[t]},emptyCachedInstances:function(){Object.keys(e).forEach(function(t){delete e[t]})}}}function Iq(){var e=0,t={start:function(){e+=1,t.invokeProgressEvent(e)},end:function(){e-=1,t.invokeProgressEvent(e),0===e&&t.invokeProgressDone()},resetProgress:function(){e=0}},n={};return ex(t,n,"progressEvent"),ex(t,n,"progressDone"),t}function IK(){var e={},t="default";return{getMTime:function(n){return e[n||t]||1},incrementMTime:function(n){var i=n||t;e[i]||(e[i]=1),e[i]+=1},setActiveViewId:function(e){t=e},getActiveViewId:function(){return t}}}function IX(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=Iz[e];return t||(t=IU(IU(IU(IU({},IW()),IH()),Iq()),IK()),Iz[e]=t),t}function IY(e,t){var n=-1,i=100,o=function(e){return e.get("managedInstanceId").managedInstanceId},a=function(){return eS(e,o)};function s(t){e.set({synchronizedViewId:t},!0,!0)}function l(){return e.get("synchronizedViewId").synchronizedViewId}return{synchronize:function(o){l()||s(o.id);var a=o.mtime||0;return l()===o.id&&n<a?new Promise(function(s,l){var u=t.onProgressDone(function(){u.unsubscribe(),e.render(),s(!0)});n=a,t.setActiveViewId(o.id),t.incrementMTime(),Ij.updateRenderWindow(e,o,t),t.freeOldArrays(i,t)}):Promise.resolve(!1)},setSynchronizedViewId:s,getSynchronizedViewId:l,updateGarbageCollectorThreshold:function(e){i=e},getManagedInstanceIds:a,clearOneTimeUpdaters:function(){Ij.clearOneTimeUpdaters(a())}}}var IZ={synchronizerContextName:"default",synchronizerContext:null,synchronizedViewId:null};function IJ(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,IZ,i),Om.extend(e,t),eu(e,t,["synchronizerContext"]),t.classHierarchy.push("vtkSynchronizableRenderWindow"),t.synchronizerContext||(t.synchronizerContext=IX(t.synchronizerContextName)),Object.keys(n=IY(e,t.synchronizerContext)).forEach(function(t){e[t]?e[t]=eA(e[t],n[t]):e[t]=n[t]})}var IQ={newInstance:ew(IJ,"vtkSynchronizableRenderWindow"),extend:IJ,getSynchronizerContext:IX,setSynchronizerContext:function(e,t){Iz[e]=t},clearSynchronizerContext:function(e){if(e&&Iz[e]&&delete Iz[e],!e)for(var t=Object.keys(Iz),n=0;n<t.length;n++)delete Iz[t[n]]},decorate:function(e){var t=IY(e,IX(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default"));return IU(IU(IU({},t),e),{},{delete:eA(e.delete,t.delete)})},createInstanceMap:IH,createArrayHandler:IW,createProgressHandler:Iq,createSceneMtimeHandler:IK,vtkObjectManager:Ij},I$={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function I0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I$,n),Pt.extend(e,t,n),t.keyMatrixTime={},es(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:o7(new Float64Array(9)),mcwc:od(new Float64Array(16))},ep(e,t,["context"]),eu(e,t,["activeTextures"]),t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(n){if(n){t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var i=0;i<t.children.length;i++){var o=t.children[i];o.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(o)):t.oglmapper=o}}},e.traverseZBufferPass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseOpaqueZBufferPass=function(t){return e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t._openGLRenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount())},e.zBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,i){if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var o=0;o<t.activeTextures.length;o++)t.activeTextures[o].deactivate()},e.translucentPass=function(n,i){if(n)t.context.depthMask(t._openGLRenderer.getSelector()&&t.renderable.getNestedPickable()),e.activateTextures();else if(t.activeTextures)for(var o=0;o<t.activeTextures.length;o++)t.activeTextures[o].deactivate()},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),ol(t.keyMatrices.mcwc,t.renderable.getMatrix()),of(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?o7(t.keyMatrices.normalMatrix):(o4(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),at(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),ae(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices}}var I1=ew(I0);Po.vtkActor=I1;var I2={context:null,activeTextures:null};function I3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I2,n),Pt.extend(e,t,n),ep(e,t,["context"]),eu(e,t,["activeTextures"]),t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(n){if(n&&t.renderable){t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var i=0;i<t.children.length;i++){var o=t.children[i];o.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(o)):t.oglmapper=o}}},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&n.incrementOverlayActorCount()},e.traverseOpaquePass=function(n){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&!t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseOverlayPass=function(n){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable)&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.opaquePass=function(n,i){if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var o=0;o<t.activeTextures.length;o++)t.activeTextures[o].deactivate()},e.translucentPass=function(n,i){if(n)t.context.depthMask(!1),e.activateTextures();else if(t.activeTextures)for(var o=0;o<t.activeTextures.length;o++)t.activeTextures[o].deactivate()},e.overlayPass=function(n,i){if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var o=0;o<t.activeTextures.length;o++)t.activeTextures[o].deactivate()}}var I4=ew(I3);Po.vtkActor2D=I4;var I5={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function I6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I5,n),Pt.extend(e,t,n),t.keyMatrixTime={},es(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},ep(e,t,["context","keyMatrixTime"]),t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(n){n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var n=t._openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),t.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},e.translucentPass=e.opaquePass,e.zBufferPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(n){if(n!==t.lastRenderer||t._openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){ol(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),o4(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),at(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),of(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var i=t._openGLRenderer.getAspectRatio();ol(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(i,-1,1)),of(t.keyMatrices.vcpc,t.keyMatrices.vcpc),og(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}var I8=ew(I6);Po.vtkCamera=I8;var I9=eE.vtkErrorMacro,I7={framebuffer:null,convolutionShader:null,tris:null,kernel:[0,0,0,0,1,0,0,0,0],oldKernelDimension:3,kernelDimension:3};function ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I7,n),PS.extend(e,t,n),t.VBOBuildTime={},eE.obj(t.VBOBuildTime,{mtime:0}),t.tris=P$.newInstance(),eE.setGet(e,t,["kernel","kernelDimension"]),eE.get(e,t,["framebuffer"]),t.classHierarchy.push("vtkConvolution2DPass"),e.computeKernelWeight=function(e){var t=e.reduce(function(e,t){return e+t});return t<=0?1:t},e.traverse=function(n){if(!t.deleted)if(t.kernelDimension%2==1){null===t.kernel&&(t.kernel=new Float32Array(t.kernelDimension),t.kernel[Math.floor(t.kernelDimension/2)]=1);var i=t.kernelDimension*t.kernelDimension;if(t.kernel.length===i){null===t.framebuffer&&(t.framebuffer=Pw.newInstance());var o=n.getSize(),a=n.getContext();if(null!==a){t.VBOBuildTime.getMTime()<e.getMTime()&&(t.tris.setOpenGLRenderWindow(n),e.buildVertexBuffer()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var s=t.framebuffer.getSize();if(null!==s&&s[0]===o[0]&&s[1]===o[1]||(t.framebuffer.create(o[0],o[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),t.delegates.forEach(function(t){t.traverse(n,e)}),t.framebuffer.restorePreviousBindingsAndBuffers(),null!==t.convolutionShader&&t.oldKernelDimension!==t.kernelDimension&&(t.convolutionShader=null,t.oldKernelDimension=t.kernelDimension),null===t.convolutionShader){t.convolutionShader=n.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\nattribute vec4 vertexDC;\nattribute vec2 tcoordTC;\nvarying vec2 tcoord;\nvoid main() { tcoord = tcoordTC; gl_Position = vertexDC; }",e.getFragmentShaderCode(t.kernelDimension),"");var l=t.convolutionShader;t.copyVAO=PY.newInstance(),t.copyVAO.setOpenGLRenderWindow(n),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(l,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),a.FLOAT,3,a.FALSE)||I9("Error setting vertexDC in copy shader VAO."),t.copyVAO.addAttributeArray(l,t.tris.getCABO(),"tcoordTC",t.tris.getCABO().getTCoordOffset(),t.tris.getCABO().getStride(),a.FLOAT,2,a.FALSE)||I9("Error setting vertexDC in copy shader VAO.")}else n.getShaderCache().readyShaderProgram(t.convolutionShader);a.viewport(0,0,o[0],o[1]),a.scissor(0,0,o[0],o[1]);var u=t.framebuffer.getColorTexture();u.activate(),t.convolutionShader.setUniformi("u_image",u.getTextureUnit()),t.convolutionShader.setUniform2f("u_textureSize",u.getWidth(),u.getHeight()),t.convolutionShader.setUniformfv("u_kernel",t.kernel),t.convolutionShader.setUniformf("u_kernelWeight",e.computeKernelWeight(t.kernel)),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),u.deactivate()}else t.delegates.forEach(function(t){t.traverse(n,e)})}else I9("The given kernel is invalid. 2D convolution kernels have to be 1D arrays with ".concat(i," components representing the ").concat(t.kernelDimension,"x").concat(t.kernelDimension," kernel in row-major form."))}else I9("Invalid kernel dimension! Kernel dimension must be odd (e.g. 3, 5, 7, ...).")},e.getFragmentShaderCode=function(e){for(var t=e*e,n=["//VTK::System::Dec\n//VTK::Output::Dec\nuniform sampler2D u_image;\nuniform vec2 u_textureSize;","uniform float u_kernel[".concat(t,"];"),"uniform float u_kernelWeight;\nvarying vec2 tcoord;\nvoid main(){\n    vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n    vec4 colorSum =\n"].join("\n"),i=Math.floor(e/2),o=0,a=-i;a<=i;++a)for(var s=-i;s<=i;++s)n+="        texture2D(u_image, tcoord + onePixel * vec2(".concat(s,", ").concat(a,")) * u_kernel[").concat(o,"]"),++o!==t&&(n+=" +\n");return n+";\n    gl_FragData[0] = vec4((colorSum / u_kernelWeight).rgb, texture2D(u_image, tcoord).a);\n}"},e.buildVertexBuffer=function(){var e=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),o=nH.newInstance({numberOfComponents:3,values:e});o.setName("points");var a=nH.newInstance({numberOfComponents:2,values:n});a.setName("tcoords");var s=nH.newInstance({numberOfComponents:1,values:i});t.tris.getCABO().createVBO(s,"polys",mk.SURFACE,{points:o,tcoords:a,cellOffset:0}),t.VBOBuildTime.modified()}}var kt={newInstance:eE.newInstance(ke,"vtkConvolution2DPass"),extend:ke},kn={};Po.vtkCubeAxesActor=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kn,n),Pt.extend(e,t,n),t.CubeAxesActorHelper=TC.newCubeAxesActorHelper(),t.classHierarchy.push("vtkOpenGLCubeAxesActor"),e.buildPass=function(n){n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,n){if(e){var i=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,o=t._openGLRenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([o.usize,o.vsize],i,t._openGLRenderWindow.getRenderable())}}},"vtkOpenGLCubeAxesActor");var kr=n(1665),ki=n.n(kr),ko=n(2081),ka=n.n(ko),ks=function(e,t){e.replaceShaderCoincidentOffset=function(n,i,o){var a=e.getCoincidentParameters(i,o);if(a&&(0!==a.factor||0!==a.offset)){var s=n.Fragment;s=Pq.substitute(s,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==a.factor?(s=Pq.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=Pq.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=Pq.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t._openGLRenderWindow.getWebgl2()&&(0!==a.factor?(s=Pq.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=Pq.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=Pq.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=s}}},kl=function(e,t){e.applyShaderReplacements=function(e,t,n){var i=null;if(t&&(i=t.ShaderReplacements),i)for(var o=0;o<i.length;o++){var a=i[o];if(n&&a.replaceFirst||!n&&!a.replaceFirst){var s=a.shaderType,l=e[s],u=Pq.substitute(l,a.originalValue,a.replacementValue,a.replaceAll);e[s]=u.result}}},e.buildShaders=function(n,i,o){e.getReplacedShaderTemplate(n,i,o),t.lastRenderPassShaderReplacement=t.currentRenderPass?t.currentRenderPass.getShaderReplacement():null,t.lastRenderPassShaderReplacement&&t.lastRenderPassShaderReplacement(n);var a=t.renderable.getViewSpecificProperties().OpenGL;e.applyShaderReplacements(n,a,!0),e.replaceShaderValues(n,i,o),e.applyShaderReplacements(n,a)},e.getReplacedShaderTemplate=function(n,i,o){var a=t.renderable.getViewSpecificProperties().OpenGL;e.getShaderTemplate(n,i,o);var s=n.Vertex;if(a){var l=a.VertexShaderCode;void 0!==l&&""!==l&&(s=l)}n.Vertex=s;var u=n.Fragment;if(a){var c=a.FragmentShaderCode;void 0!==c&&""!==c&&(u=c)}n.Fragment=u;var d=n.Geometry;if(a){var f=a.GeometryShaderCode;void 0!==f&&(d=f)}n.Geometry=d}};function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var kd=oe.FieldAssociations,kf=P$.primTypes,kp=mG.Representation,kh=mG.Shading,km=gd.ScalarMode,kg=Py.Filter,kv=Py.Wrap,ky={type:"StartEvent"},kb={type:"EndEvent"},kx=mP.CoordinateSystem,kw={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:m6.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function kA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kw,n),Pt.extend(e,t,n),ks(e,t,n),kl(e,t,n),t.primitives=[],t.primTypes=kf,t.tmpMat3=o7(new Float64Array(9)),t.tmpMat4=od(new Float64Array(16));for(var a=kf.Start;a<kf.End;a++)t.primitives[a]=P$.newInstance(),t.primitives[a].setPrimitiveType(a),t.primitives[a].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ep(e,t,["context"]),t.VBOBuildTime={},es(t.VBOBuildTime,{mtime:0}),t.selectionStateChanged={},es(t.selectionStateChanged,{mtime:0}),function(e,t){function n(e,t,n){return t.identity(n),e.reduce(function(e,n,i){return 0===i?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e},n)}t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=function(n){n&&(t.currentRenderPass=null,t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),t._openGLRenderer=t.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),t.openGLCamera=t._openGLRenderer.getViewNodeFor(t._openGLRenderer.getRenderable().getActiveCamera(),t.openGLCamera))},e.translucentPass=function(n,i){n&&(t.currentRenderPass=i,e.render())},e.zBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.opaquePass=function(t){t&&e.render()},e.render=function(){var n=t._openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(var i=kf.Start;i<kf.End;i++)t.primitives[i].setOpenGLRenderWindow(t._openGLRenderWindow)}var o=t.openGLActor.getRenderable(),a=t._openGLRenderer.getRenderable();e.renderPiece(a,o)},e.getShaderTemplate=function(e,t,n){e.Vertex=ki(),e.Fragment=ka(),e.Geometry=""},e.replaceShaderColor=function(e,n,i){var o=e.Vertex,a=e.Geometry,s=e.Fragment,l=t.lastBoundBO.getReferenceByName("lastLightComplexity"),u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var c=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(c=c.concat(["  vec3 specularColor;","  float specularPower;"])),c=c.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(c=c.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(u=u.concat(["varying vec4 vertexColorVSOutput;"]),o=Pq.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Pq.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=Pq.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=Pq.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?(t.renderable.getAreScalarsMappedFromCells()||t.renderable.getInterpolateScalarsBeforeMapping())&&t.renderable.getColorCoordinates()&&!t.drawingEdges?s=Pq.substitute(s,"//VTK::Color::Impl",c.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!t.drawingEdges&&(u=u.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(u=u.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),c=c.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):c=c.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),t.haveCellScalars&&!t.drawingEdges&&(u=u.concat(["uniform samplerBuffer texture1;"])),s=Pq.substitute(s,"//VTK::Color::Impl",c).result):s=Pq.substitute(s,"//VTK::Color::Impl",c.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,s=Pq.substitute(s,"//VTK::Color::Dec",u).result,e.Vertex=o,e.Geometry=a,e.Fragment=s},e.replaceShaderLight=function(e,n,i){var o=e.Fragment,a=t.lastBoundBO.getReferenceByName("lastLightComplexity"),s=t.lastBoundBO.getReferenceByName("lastLightCount"),l=[];switch(a){case 0:o=Pq.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=Pq.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var u=0;u<s;++u)l=l.concat(["uniform vec3 lightColor".concat(u,";"),"uniform vec3 lightDirectionVC".concat(u,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(u,"; // normalized")]);o=Pq.substitute(o,"//VTK::Light::Dec",l).result,l=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var c=0;c<s;++c)l=l.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(c,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(c,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(c,") < 0.0)"),"    {","    float sf = sign(df)*pow(max(1e-5,\n                                              dot(reflect(lightDirectionVC".concat(c,",normalVCVSOutput),\n                                                  normalize(-vertexVC.xyz))),\n                                         specularPower);"),"    specularL += (sf".concat(""," * lightColor").concat(c,");"),"    }"]);l=l.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Pq.substitute(o,"//VTK::Light::Impl",l,!1).result;break;case 3:for(var d=0;d<s;++d)l=l.concat(["uniform vec3 lightColor".concat(d,";"),"uniform vec3 lightDirectionVC".concat(d,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(d,"; // normalized"),"uniform vec3 lightPositionVC".concat(d,";"),"uniform vec3 lightAttenuation".concat(d,";"),"uniform float lightConeAngle".concat(d,";"),"uniform float lightExponent".concat(d,";"),"uniform int lightPositional".concat(d,";")]);o=Pq.substitute(o,"//VTK::Light::Dec",l).result,l=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var f=0;f<s;++f)l=l.concat(["  attenuation = 1.0;","  if (lightPositional".concat(f," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(f,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(f,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(f,".x"),"       + lightAttenuation".concat(f,".y * distanceVC"),"       + lightAttenuation".concat(f,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(f," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(f,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(f,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(f,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(f,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = sign(df)*attenuation*pow(max(1e-5,\n                                                           dot(reflect(lightDirectionVC".concat(f,",\n                                                                       normalVCVSOutput),\n                                                               normalize(-vertexVC.xyz))),\n                                                       specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(f,");"),"    }"]);l=l.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Pq.substitute(o,"//VTK::Light::Impl",l,!1).result;break;default:Z("bad light complexity")}e.Fragment=o},e.replaceShaderNormal=function(e,n,i){if(t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var o=e.Vertex,a=e.Geometry,s=e.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(o=Pq.substitute(o,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,o=Pq.substitute(o,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,a=Pq.substitute(a,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,a=Pq.substitute(a,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,s=Pq.substitute(s,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,s=Pq.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(s=Pq.substitute(s,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,s=Pq.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===t.context.LINES?(s=Pq.substitute(s,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,s=Pq.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(s=Pq.substitute(s,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,s=Pq.substitute(s,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,s=Pq.substitute(s,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=s}},e.replaceShaderPositionVC=function(e,n,i){t.lastBoundBO.replaceShaderPositionVC(e,n,i);var o=e.Vertex,a=e.Geometry,s=e.Fragment;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Pq.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=Pq.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Pq.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,s=Pq.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=Pq.substitute(s,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=Pq.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Pq.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=s},e.replaceShaderTCoord=function(e,n,i){if(t.lastBoundBO.getCABO().getTCoordOffset()){var o=e.Vertex,a=e.Geometry,s=e.Fragment;if(!t.drawingEdges){o=Pq.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var l=t.openGLActor.getActiveTextures(),u=2,c=2;if(l&&l.length>0&&(u=l[0].getComponents(),l[0].getTarget()===t.context.TEXTURE_CUBE_MAP&&(c=3)),t.renderable.getColorTextureMap()&&(u=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),c=2),2===c){if(o=Pq.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=Pq.substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,s=Pq.substitute(s,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(u){case 1:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=Pq.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,a=Pq.substitute(a,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,s=Pq.substitute(s,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,u){case 1:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:s=Pq.substitute(s,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}e.Vertex=o,e.Geometry=a,e.Fragment=s}}},e.replaceShaderClip=function(e,n,i){var o=e.Vertex,a=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var s=t.renderable.getNumberOfClippingPlanes();o=Pq.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[".concat(s,"];"),"varying float clipDistancesVSOutput[".concat(s,"];")]).result,o=Pq.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(s,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,a=Pq.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[".concat(s,"];")]).result,a=Pq.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(s,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=o,e.Fragment=a},e.getCoincidentParameters=function(e,n){var i={factor:0,offset:0},o=n.getProperty();if(t.renderable.getResolveCoincidentTopology()==mZ.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===kp.SURFACE){var a=t.lastBoundBO.getPrimitiveType();a===kf.Points||o.getRepresentation()===kp.POINTS?i=t.renderable.getCoincidentTopologyPointOffsetParameter():a===kf.Lines||o.getRepresentation()===kp.WIREFRAME?i=t.renderable.getCoincidentTopologyLineOffsetParameters():a!==kf.Tris&&a!==kf.TriStrips||(i=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),a!==kf.TrisEdges&&a!==kf.TriStripsEdges||((i=t.renderable.getCoincidentTopologyPolygonOffsetParameters()).factor/=2,i.offset/=2)}var s=t._openGLRenderer.getSelector();return s&&s.getFieldAssociation()===kd.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},e.replaceShaderPicking=function(e,n,i){var o=e.Fragment,a=e.Vertex;if(o=Pq.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,t._openGLRenderer.getSelector()){switch(t.lastSelectionState!==m6.ID_LOW24&&t.lastSelectionState!==m6.ID_HIGH24||(a=Pq.substitute(a,"//VTK::Picking::Dec",["flat out int vertexIDVSOutput;\n","uniform int VertexIDOffset;\n"]).result,a=Pq.substitute(a,"//VTK::Picking::Impl","  vertexIDVSOutput = gl_VertexID + VertexIDOffset;\n").result,o=Pq.substitute(o,"//VTK::Picking::Dec","flat in int vertexIDVSOutput;\n").result,o=Pq.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),t.lastSelectionState){case m6.ID_LOW24:o=Pq.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case m6.ID_HIGH24:o=Pq.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=Pq.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=Pq.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}e.Fragment=o,e.Vertex=a}},e.replaceShaderValues=function(n,i,o){if(e.replaceShaderColor(n,i,o),e.replaceShaderNormal(n,i,o),e.replaceShaderLight(n,i,o),e.replaceShaderTCoord(n,i,o),e.replaceShaderPicking(n,i,o),e.replaceShaderClip(n,i,o),e.replaceShaderCoincidentOffset(n,i,o),e.replaceShaderPositionVC(n,i,o),t.haveSeenDepthRequest){var a=n.Fragment;a=Pq.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,n.Fragment=a=Pq.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result}},e.getNeedToRebuildShaders=function(e,n,i){var o=0,a=0,s=e.getPrimitiveType(),l=t.currentInput,u=!1,c=l.getPointData().getNormals(),d=l.getCellData().getNormals(),f=i.getProperty().getInterpolation()===kh.FLAT,p=i.getProperty().getRepresentation(),h=e.getOpenGLMode(p,s);if(h===t.context.TRIANGLES||d&&!c||!f&&c?u=!0:f||h!==t.context.LINES||(u=!0),i.getProperty().getLighting()&&u){o=0;for(var m=n.getLightsByReference(),g=0;g<m.length;++g){var v=m[g];v.getSwitch()>0&&(a++,0===o&&(o=1)),1===o&&(a>1||1!==v.getIntensity()||!v.lightTypeIsHeadLight())&&(o=2),o<3&&v.getPositional()&&(o=3)}}var y=!1,b=t.lastBoundBO.getReferenceByName("lastLightComplexity"),x=t.lastBoundBO.getReferenceByName("lastLightCount");return b===o&&x===a||(t.lastBoundBO.set({lastLightComplexity:o},!0),t.lastBoundBO.set({lastLightCount:a},!0),y=!0),(!t.currentRenderPass&&t.lastRenderPassShaderReplacement||t.currentRenderPass&&t.currentRenderPass.getShaderReplacement()!==t.lastRenderPassShaderReplacement)&&(y=!0),!!(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||e.getShaderSourceTime().getMTime()<t.renderable.getMTime()||e.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||e.getShaderSourceTime().getMTime()<t.selectionStateChanged.getMTime()||y)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,!0)},e.invokeShaderCallbacks=function(e,n,i){var o=t.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(function(t){t.callback(t.userData,e,n,i)})},e.setMapperShaderParameters=function(n,i,o){if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),n.getProgram().isUniformUsed("VertexIDOffset")&&n.getProgram().setUniformi("VertexIDOffset",t.vertexIDOffset),n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){var a=t.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||Z("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&a>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||Z("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),t.renderable.getCustomShaderAttributes().forEach(function(e,i){n.getProgram().isAttributeUsed("".concat(e,"MC"))&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"".concat(e,"MC"),n.getCABO().getCustomData()[i].offset,n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getCustomData()[i].components,!1)||Z("Error setting ".concat(e,"MC in shader VAO.")))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||Z("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||Z("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(t.renderable.getNumberOfClippingPlanes()){var s=t.renderable.getNumberOfClippingPlanes(),l=[],u=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,c=u?ol(t.tmpMat4,o.getMatrix()):o.getMatrix();u&&(of(c,c),og(c,c,u),of(c,c));for(var d=0;d<s;d++){var f=[];t.renderable.getClippingPlaneInDataCoords(c,d,f);for(var p=0;p<4;p++)l.push(f[p])}n.getProgram().setUniformi("numClipPlanes",s),n.getProgram().setUniform4fv("clipPlanes",l)}t.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var h=t.openGLActor.getActiveTextures();if(h)for(var m=0;m<h.length;++m){var g=h[m].getTextureUnit(),v="texture".concat(g+1);n.getProgram().isUniformUsed(v)&&n.getProgram().setUniformi(v,g)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",+!!t.renderDepth),n.getProgram().isUniformUsed("coffset")){var y=e.getCoincidentParameters(i,o);n.getProgram().setUniformf("coffset",y.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",y.factor)}n.setMapperShaderParameters(i,o,t._openGLRenderer.getTiledSizeAndOrigin());var b=t._openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",b?b.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",b?b.getCurrentPass()+1:0)},e.setLightingShaderParameters=function(e,n,i){var o=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(o<2)){for(var a=e.getProgram(),s=0,l=n.getLightsByReference(),u=0;u<l.length;++u){var c=l[u];if(c.getSwitch()>0){var d=c.getColorByReference(),f=c.getIntensity();t.lightColor[0]=d[0]*f,t.lightColor[1]=d[1]*f,t.lightColor[2]=d[2]*f;var p=c.getDirection(),h=n.getActiveCamera().getViewMatrix(),g=m(p);c.lightTypeIsSceneLight()&&(g[0]=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],g[1]=h[4]*p[0]+h[5]*p[1]+h[6]*p[2],g[2]=h[8]*p[0]+h[9]*p[1]+h[10]*p[2],th(g)),t.lightDirection[0]=g[0],t.lightDirection[1]=g[1],t.lightDirection[2]=g[2],th(t.lightDirection),a.setUniform3fArray("lightColor".concat(s),t.lightColor),a.setUniform3fArray("lightDirectionVC".concat(s),t.lightDirection),s++}}if(!(o<3)){var v=n.getActiveCamera().getViewMatrix();of(v,v),s=0;for(var y=0;y<l.length;++y){var b=l[y];if(b.getSwitch()>0){var x=b.getTransformedPosition(),w=new Float64Array(3);rO(w,x,v),a.setUniform3fArray("lightAttenuation".concat(s),b.getAttenuationValuesByReference()),a.setUniformi("lightPositional".concat(s),b.getPositional()),a.setUniformf("lightExponent".concat(s),b.getExponent()),a.setUniformf("lightConeAngle".concat(s),b.getConeAngle()),a.setUniform3fArray("lightPositionVC".concat(s),[w[0],w[1],w[2]]),s++}}}}},e.setCameraShaderParameters=function(e,a,s){var l=e.getProgram(),u=t.openGLCamera.getKeyMatrices(a),c=a.getActiveCamera(),d=t.openGLCamera.getKeyMatrixTime().getMTime(),f=l.getLastCameraMTime(),p=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,h=s.getIsIdentity(),m=h?{mcwc:null,normalMatrix:null}:t.openGLActor.getKeyMatrices();if(s.getCoordinateSystem()===kx.DISPLAY){var g=t._openGLRenderer.getTiledSizeAndOrigin();od(t.tmpMat4),t.tmpMat4[0]=2/g.usize,t.tmpMat4[12]=-1,t.tmpMat4[5]=2/g.vsize,t.tmpMat4[13]=-1,og(t.tmpMat4,t.tmpMat4,p),l.setUniformMatrix("MCPCMatrix",t.tmpMat4)}else l.setUniformMatrix("MCPCMatrix",n([u.wcpc,m.mcwc,p],i,t.tmpMat4));l.isUniformUsed("MCVCMatrix")&&l.setUniformMatrix("MCVCMatrix",n([u.wcvc,m.mcwc,p],i,t.tmpMat4)),l.isUniformUsed("normalMatrix")&&l.setUniformMatrix3x3("normalMatrix",n([u.normalMatrix,m.normalMatrix],o,t.tmpMat3)),f!==d&&(l.isUniformUsed("cameraParallel")&&l.setUniformi("cameraParallel",c.getParallelProjection()),l.setLastCameraMTime(d)),h||l.setLastCameraMTime(0)},e.setPropertyShaderParameters=function(e,n,i){var o=e.getProgram(),a=i.getProperty(),s=a.getOpacity(),l=t.drawingEdges?a.getEdgeColorByReference():a.getAmbientColorByReference(),u=t.drawingEdges?a.getEdgeColorByReference():a.getDiffuseColorByReference(),c=t.drawingEdges?1:a.getAmbient(),d=t.drawingEdges?0:a.getDiffuse(),f=t.drawingEdges?0:a.getSpecular(),p=a.getSpecularPower();o.setUniformf("opacityUniform",s),o.setUniform3fArray("ambientColorUniform",l),o.setUniform3fArray("diffuseColorUniform",u),o.setUniformf("ambient",c),o.setUniformf("diffuse",d);var h=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(h<1)){var m=a.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",m),o.setUniformf("specularPowerUniform",p),o.setUniformf("specular",f),o.isUniformUsed("ambientIntensityBF")){if(s=(a=i.getBackfaceProperty()).getOpacity(),l=a.getAmbientColor(),c=a.getAmbient(),u=a.getDiffuseColor(),d=a.getDiffuse(),m=a.getSpecularColor(),f=a.getSpecular(),o.setUniformf("ambientIntensityBF",c),o.setUniformf("diffuseIntensityBF",d),o.setUniformf("opacityUniformBF",s),o.setUniform3fArray("ambientColorUniformBF",l),o.setUniform3fArray("diffuseColorUniformBF",u),h<1)return;o.setUniformf("specularIntensityBF",f),o.setUniform3fArray("specularColorUniformBF",m),o.setUniformf("specularPowerUniformBF",p)}}},e.updateMaximumPointCellIds=function(e,n){var i,o,a=t._openGLRenderer.getSelector();if(a){if(null!=(i=t.selectionWebGLIdsToVTKIds)&&null!=(i=i.points)&&i.length){var s=t.selectionWebGLIdsToVTKIds.points.length;a.setMaximumPointId(s-1)}if(null!=(o=t.selectionWebGLIdsToVTKIds)&&null!=(o=o.cells)&&o.length){var l=t.selectionWebGLIdsToVTKIds.cells.length;a.setMaximumCellId(l-1)}a.getFieldAssociation()===kd.FIELD_ASSOCIATION_POINTS&&(t.pointPicking=!0)}},e.renderPieceStart=function(n,i){t.primitiveIDOffset=0,t.vertexIDOffset=0;var o,a=(o=t._openGLRenderer.getSelector())?o.getCurrentPass():m6.MIN_KNOWN_PASS-1;t.lastSelectionState!==a&&(t.selectionStateChanged.modified(),t.lastSelectionState=a),t._openGLRenderer.getSelector()&&t._openGLRenderer.getSelector().renderProp(i),e.updateBufferObjects(n,i),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=function(n,i){for(var o=i.getProperty().getRepresentation(),a=i.getProperty().getEdgeVisibility()&&o===kp.SURFACE,s=t._openGLRenderer.getSelector(),l=s&&s.getFieldAssociation()===kd.FIELD_ASSOCIATION_POINTS&&(t.lastSelectionState===m6.ID_LOW24||t.lastSelectionState===m6.ID_HIGH24),u=kf.Start;u<kf.End;u++)t.primitives[u].setPointPicking(l),t.primitives[u].getCABO().getElementCount()&&(t.drawingEdges=a&&(u===kf.TrisEdges||u===kf.TriStripsEdges),t.drawingEdges&&(t.renderDepth||t.lastSelectionState>=0)||(t.lastBoundBO=t.primitives[u],t.primitiveIDOffset+=t.primitives[u].drawArrays(n,i,o,e),t.vertexIDOffset+=t.primitives[u].getCABO().getElementCount()))},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=function(n,i){if(e.invokeEvent(ky),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(kb),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var o=t.context,a=i.getProperty().getBackfaceCulling(),s=i.getProperty().getFrontfaceCulling();a||s?s?(t._openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(t._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)):t._openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i)}}else Z("No input!")},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n),e.updateMaximumPointCellIds()},e.getNeedToRebuildBufferObjects=function(n,i){var o=t.VBOBuildTime.getMTime();return o<e.getMTime()||o<t.renderable.getMTime()||o<i.getMTime()||o<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var i=t.currentInput;if(null!==i){t.renderable.mapScalars(i,1);var o=t.renderable.getColorMapColors();t.haveCellScalars=!1;var a=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(a!==km.USE_CELL_DATA&&a!==km.USE_CELL_FIELD_DATA&&a!==km.USE_FIELD_DATA&&i.getPointData().getScalars()||a===km.USE_POINT_FIELD_DATA||!o||(t.haveCellScalars=!0));var s=n.getProperty().getInterpolation()!==kh.FLAT?i.getPointData().getNormals():null;null===s&&i.getCellData().getNormals()&&(t.haveCellNormals=!0,s=i.getCellData().getNormals());var l=n.getProperty().getRepresentation(),u=i.getPointData().getTCoords();t.openGLActor.getActiveTextures()||(u=null);var c=!1;if(t.renderable.getColorCoordinates()){u=t.renderable.getColorCoordinates(),c=t.renderable.getAreScalarsMappedFromCells(),t.internalColorTexture||(t.internalColorTexture=Py.newInstance({resizable:!0}));var d=t.internalColorTexture;d.setMinificationFilter(kg.NEAREST),d.setMagnificationFilter(kg.NEAREST),d.setWrapS(kv.CLAMP_TO_EDGE),d.setWrapT(kv.CLAMP_TO_EDGE),d.setOpenGLRenderWindow(t._openGLRenderWindow);var f=t.renderable.getColorTextureMap(),p=f.getExtent(),h=f.getPointData().getScalars();d.create2DFromRaw({width:p[1]-p[0]+1,height:p[3]-p[2]+1,numComps:h.getNumberOfComponents(),dataType:h.getDataType(),data:h.getData()}),d.activate(),d.sendParameters(),d.deactivate()}var m="".concat(i.getMTime(),"A").concat(l,"B").concat(i.getMTime())+"C".concat(s?s.getMTime():1,"D").concat(o?o.getMTime():1)+"E".concat(n.getProperty().getEdgeVisibility())+"F".concat(u?u.getMTime():1);if(t.VBOBuildString!==m){var g={points:i.getPoints(),normals:s,tcoords:u,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:c,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals,customAttributes:t.renderable.getCustomShaderAttributes().map(function(e){return i.getPointData().getArrayByName(e)})};t.renderable.getPopulateSelectionSettings()&&(t.selectionWebGLIdsToVTKIds={points:null,cells:null});for(var v=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],y=n.getProperty().getEdgeVisibility()&&l===kp.SURFACE,b=kf.Start;b<kf.End;b++)b!==kf.TrisEdges&&b!==kf.TriStripsEdges?(g.cellOffset+=t.primitives[b].getCABO().createVBO(v[b].cells,v[b].inRep,l,g,t.selectionWebGLIdsToVTKIds),g.vertexOffset+=t.primitives[b].getCABO().getElementCount()):y?t.primitives[b].getCABO().createVBO(v[b].cells,v[b].inRep,kp.WIREFRAME,kc(kc({},g),{},{tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1})):t.primitives[b].releaseGraphicsResources();t.renderable.getPopulateSelectionSettings()&&t.renderable.setSelectionWebGLIdsToVTKIds(t.selectionWebGLIdsToVTKIds),t.VBOBuildString=m}t.VBOBuildTime.modified()}},e.getAllocatedGPUMemoryInBytes=function(){var e=0;return t.primitives.forEach(function(t){e+=t.getAllocatedGPUMemoryInBytes()}),e}}(e,t)}var kC=ew(kA,"vtkOpenGLPolyDataMapper"),kS={newInstance:kC,extend:kA};function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}Po.vtkMapper=kC;var kT=mG.Representation,kO=PI.ObjectType,kP=Mp.PassTypes,kM={type:"StartEvent"},kE={type:"EndEvent"},kD={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function kI(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kD,i),kS.extend(e,t,i),t.tmpMat3=o7(new Float64Array(9)),t.normalMatrix=o7(new Float64Array(9)),t.mcpcMatrix=od(new Float64Array(16)),t.mcvcMatrix=od(new Float64Array(16)),t.tmpColor=[],t.glyphBOBuildTime={},es(t.glyphBOBuildTime,{mtime:0}),t.classHierarchy.push("vtkOpenGLGlyph3DMapper"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k_(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.renderPiece=function(n,i){if(e.invokeEvent(kM),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(1),e.invokeEvent(kE),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var o=t.context;t._openGLRenderWindow.getWebgl2()?(t.hardwareSupport=!0,t.extension=null):t.extension||(t.extension=t.context.getExtension("ANGLE_instanced_arrays"),t.hardwareSupport=!!t.extension);var a=i.getProperty().getBackfaceCulling(),s=i.getProperty().getFrontfaceCulling();a||s?s?(t._openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(t._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)):t._openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i)}}else Z("No input!")},e.multiply4x4WithOffset=function(e,t,n,i){var o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7],p=t[8],h=t[9],m=t[10],g=t[11],v=t[12],y=t[13],b=t[14],x=t[15],w=n[i],A=n[i+1],C=n[i+2],S=n[i+3];e[0]=w*o+A*u+C*p+S*v,e[1]=w*a+A*c+C*h+S*y,e[2]=w*s+A*d+C*m+S*b,e[3]=w*l+A*f+C*g+S*x,w=n[i+4],A=n[i+5],C=n[i+6],S=n[i+7],e[4]=w*o+A*u+C*p+S*v,e[5]=w*a+A*c+C*h+S*y,e[6]=w*s+A*d+C*m+S*b,e[7]=w*l+A*f+C*g+S*x,w=n[i+8],A=n[i+9],C=n[i+10],S=n[i+11],e[8]=w*o+A*u+C*p+S*v,e[9]=w*a+A*c+C*h+S*y,e[10]=w*s+A*d+C*m+S*b,e[11]=w*l+A*f+C*g+S*x,w=n[i+12],A=n[i+13],C=n[i+14],S=n[i+15],e[12]=w*o+A*u+C*p+S*v,e[13]=w*a+A*c+C*h+S*y,e[14]=w*s+A*d+C*m+S*b,e[15]=w*l+A*f+C*g+S*x},e.replaceShaderNormal=function(e,i,o){if(t.hardwareSupport&&t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=e.Vertex;t.lastBoundBO.getCABO().getNormalOffset()&&(a=Pq.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=Pq.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=a}n.replaceShaderNormal(e,i,o)},e.replaceShaderClip=function(e,i,o){if(t.hardwareSupport){var a=e.Vertex,s=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var l=t.renderable.getNumberOfClippingPlanes();a=Pq.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[".concat(l,"];"),"varying float clipDistancesVSOutput[".concat(l,"];")]).result,a=Pq.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(l,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    vec4 gVertex = gMatrix * vertexMC;","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], gVertex);","    }"]).result,s=Pq.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[".concat(l,"];")]).result,s=Pq.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(l,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=a,e.Fragment=s}n.replaceShaderClip(e,i,o)},e.replaceShaderColor=function(e,i,o){if(t.hardwareSupport&&t.renderable.getColorArray()){var a=e.Vertex,s=e.Geometry,l=e.Fragment,u=t.lastBoundBO.getReferenceByName("lastLightComplexity"),c=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];u&&(c=c.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var d=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(d=d.concat(["  vec3 specularColor;","  float specularPower;"])),d=d.concat(["  opacity = opacityUniform;"]),u&&(d=d.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),t.drawingEdges||(c=c.concat(["varying vec4 vertexColorVSOutput;"]),a=Pq.substitute(a,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,a=Pq.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,s=Pq.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Pq.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,d=d.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),l=Pq.substitute(l,"//VTK::Color::Impl",d).result,l=Pq.substitute(l,"//VTK::Color::Dec",c).result,e.Vertex=a,e.Geometry=s,e.Fragment=l}n.replaceShaderColor(e,i,o)},e.replaceShaderPositionVC=function(e,i,o){if(t.hardwareSupport){var a=e.Vertex;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=Pq.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,a=Pq.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(a=Pq.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),e.Vertex=a}n.replaceShaderPositionVC(e,i,o)},e.replaceShaderPicking=function(e,i,o){if(t.hardwareSupport){var a=e.Fragment,s=e.Vertex;s=Pq.substitute(s,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,e.Vertex=s=Pq.substitute(s,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,a=Pq.substitute(a,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,e.Fragment=a=Pq.substitute(a,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result}else n.replaceShaderPicking(e,i,o)},e.updateGlyphShaderParameters=function(n,i,o,a,s,l,u,c){var d=o.getProgram();if(n){var f=t.normalMatrix,p=9*u,h=t.tmpMat3,m=f[0],g=f[1],v=f[2],y=f[3],b=f[4],x=f[5],w=f[6],A=f[7],C=f[8],S=l[p],_=l[p+1],T=l[p+2],O=l[p+3],P=l[p+4],M=l[p+5],E=l[p+6],D=l[p+7],I=l[p+8];h[0]=S*m+_*y+T*w,h[1]=S*g+_*b+T*A,h[2]=S*v+_*x+T*C,h[3]=O*m+P*y+M*w,h[4]=O*g+P*b+M*A,h[5]=O*v+P*x+M*C,h[6]=E*m+D*y+I*w,h[7]=E*g+D*b+I*A,h[8]=E*v+D*x+I*C,d.setUniformMatrix3x3("normalMatrix",t.tmpMat3)}if(e.multiply4x4WithOffset(t.tmpMat4,t.mcpcMatrix,s,16*u),d.setUniformMatrix("MCPCMatrix",t.tmpMat4),i&&(e.multiply4x4WithOffset(t.tmpMat4,t.mcvcMatrix,s,16*u),d.setUniformMatrix("MCVCMatrix",t.tmpMat4)),a){var k=a.getData();t.tmpColor[0]=k[4*u]/255,t.tmpColor[1]=k[4*u+1]/255,t.tmpColor[2]=k[4*u+2]/255,d.setUniform3fArray("ambientColorUniform",t.tmpColor),d.setUniform3fArray("diffuseColorUniform",t.tmpColor)}c&&d.setUniform3fArray("mapperIndex",c.getPropColorValue())},e.renderPieceDraw=function(n,i){var o=i.getProperty().getRepresentation(),a=t.context,s=i.getProperty().getEdgeVisibility()&&o===kT.SURFACE,l=t.openGLCamera.getKeyMatrices(n),u=t.openGLActor.getKeyMatrices();ai(t.normalMatrix,l.normalMatrix,u.normalMatrix),og(t.mcpcMatrix,l.wcpc,u.mcwc),og(t.mcvcMatrix,l.wcvc,u.mcwc);var c=t.renderable.getMatrixArray(),d=t.renderable.getNormalArray(),f=t.renderable.getColorArray(),p=c.length/16,h=!1;t._openGLRenderer.getSelector()&&t._openGLRenderer.getSelector().getCurrentPass()===kP.COMPOSITE_INDEX_PASS&&(h=!0);for(var m=t.primTypes.Start;m<t.primTypes.End;m++){var g=t.primitives[m].getCABO();if(g.getElementCount()){t.drawingEdges=s&&(m===t.primTypes.TrisEdges||m===t.primTypes.TriStripsEdges),t.lastBoundBO=t.primitives[m],t.primitives[m].updateShaders(n,i,e);var v=t.primitives[m].getProgram(),y=t.primitives[m].getOpenGLMode(o),b=v.isUniformUsed("normalMatrix"),x=v.isUniformUsed("MCVCMatrix");if(t.hardwareSupport)t.extension?t.extension.drawArraysInstancedANGLE(y,0,g.getElementCount(),p):a.drawArraysInstanced(y,0,g.getElementCount(),p);else for(var w=0;w<p;++w)h&&t._openGLRenderer.getSelector().renderCompositeIndex(w),e.updateGlyphShaderParameters(b,x,t.primitives[m],f,c,d,w,h?t._openGLRenderer.getSelector():null),a.drawArrays(y,0,g.getElementCount())}}},e.setMapperShaderParameters=function(e,i,o){e.getCABO().getElementCount()&&(t.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())?(e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.matrixBuffer,"gMatrix",0,64,t.context.FLOAT,4,!1,1)||Z("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.normalBuffer,"gNormal",0,36,t.context.FLOAT,3,!1,1)||Z("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.colorBuffer,"gColor",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||Z("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.pickBuffer,"mapperIndexVS",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||Z("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(e,i,o),e.getAttributeUpdateTime().modified()):n.setMapperShaderParameters(e,i,o)},e.getNeedToRebuildBufferObjects=function(e,i){return t.renderable.buildArrays(),t.VBOBuildTime.getMTime()<t.renderable.getBuildTime().getMTime()||n.getNeedToRebuildBufferObjects(e,i)},e.getNeedToRebuildShaders=function(e,i,o){return!!(n.getNeedToRebuildShaders(e,i,o)||e.getShaderSourceTime().getMTime()<t.renderable.getMTime()||e.getShaderSourceTime().getMTime()<t.currentInput.getMTime())},e.buildBufferObjects=function(e,i){var o=t.renderable.getMatrixArray(),a=Pk(t.renderable.getInputData(0).getPoints()),s=a.useShiftAndScale,l=a.coordShift,u=a.coordScale;if(t.hardwareSupport){var c=t.renderable.getNormalArray(),d=t.renderable.getColorArray();if(t.matrixBuffer||(t.matrixBuffer=PI.newInstance(),t.matrixBuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.normalBuffer=PI.newInstance(),t.normalBuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.colorBuffer=PI.newInstance(),t.colorBuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.pickBuffer=PI.newInstance(),t.pickBuffer.setOpenGLRenderWindow(t._openGLRenderWindow)),s){var f=o.buffer,p=PN(l,u);op(p,p);for(var h=0;h<o.byteLength;h+=64){var m=new Float32Array(f,h,16);og(m,p,m)}}if(t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.matrixBuffer.upload(o,kO.ARRAY_BUFFER),t.normalBuffer.upload(c,kO.ARRAY_BUFFER),d?t.colorBuffer.upload(d.getData(),kO.ARRAY_BUFFER):t.colorBuffer.releaseGraphicsResources();for(var g=o.length/16,v=new Uint8Array(4*g),y=0;y<g;++y){var b=y+1,x=4*y;v[x]=b%256,b-=v[x],b/=256,v[x+1]=b%256,b-=v[x+1],b/=256,v[x+2]=b%256,v[x+3]=255}t.pickBuffer.upload(v,kO.ARRAY_BUFFER),t.glyphBOBuildTime.modified()}}if(n.buildBufferObjects(e,i),s)for(var w=PZ.Start;w<PZ.End;w++)t.primitives[w].getCABO().setCoordShiftAndScale(l,u)}}var kk=ew(kI,"vtkOpenGLGlyph3DMapper");function kN(e,t,n){return e.length>0?"".concat(e.map(function(e){var t;return null!=(t=null==e?void 0:e.getMTime())?t:"x"}).join("/"),"-").concat(t,"-").concat(n):"0"}function kR(e,t){return"".concat(t.getMTime())}Po.vtkGlyph3DMapper=kk;var kB=Tj.SlicingMode,kL={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineOpacityTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function kF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kL,n),Pt.extend(e,t,n),ks(e,t,n),kl(e,t,n),t.tris=P$.newInstance(),t.imagemat=od(new Float64Array(16)),t.imagematinv=od(new Float64Array(16)),t.projectionToWorld=od(new Float64Array(16)),t.idxToView=od(new Float64Array(16)),t.idxNormalMatrix=o7(new Float64Array(9)),t.modelToView=od(new Float64Array(16)),t.projectionToView=od(new Float64Array(16)),ep(e,t,[]),t.VBOBuildTime={},es(t.VBOBuildTime),function(e,t){function n(n){t.openGLTexture.releaseGraphicsResources(n),[t._colorTransferFunc,t._pwFunc,t._labelOutlineThicknessArray,t._labelOutlineOpacity].forEach(function(t){return n.unregisterGraphicsResourceUser(t,e)})}t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(i){if(i){t.currentRenderPass=null,t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var o=t._openGLRenderWindow;t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==t._openGLRenderWindow&&n(o),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow);var a=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(a.getActiveCamera(),t.openGLCamera),t.renderable.isA("vtkImageMapper")&&t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(a.getActiveCamera())}},e.translucentPass=function(n,i){n&&(t.currentRenderPass=i,e.render())},e.zBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()==mZ.PolygonOffset?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t.openGLImageSlice.getRenderable(),i=t._openGLRenderer.getRenderable();e.renderPiece(i,n)},e.getShaderTemplate=function(e,t,n){e.Vertex=ki(),e.Fragment=ka(),e.Geometry=""},e.replaceShaderValues=function(n,i,o){var a=n.Vertex,s=n.Fragment;a=Pq.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,a=Pq.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,a=Pq.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;var l=t.openGLTexture.getComponents(),u=o.getProperty().getIndependentComponents(),c=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(o.getProperty().getUseLabelOutline()&&(c=c.concat(["uniform sampler2D labelOutlineTexture1;","uniform sampler2D labelOutlineOpacityTexture1;"])),u){for(var d=1;d<l;d++)c=c.concat(["uniform float cshift".concat(d,";"),"uniform float cscale".concat(d,";"),"uniform float pwfshift".concat(d,";"),"uniform float pwfscale".concat(d,";")]);switch(l){case 1:c=c.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:c=c.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:c=c.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:c=c.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Z("Unsupported number of independent coordinates.")}}if(s=Pq.substitute(s,"//VTK::TCoord::Dec",c).result,!0===o.getProperty().getUseLabelOutline()&&(s=Pq.substitute(s,"//VTK::LabelOutline::Dec",["uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;","uniform int sliceAxis;"]).result,s=Pq.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,s=Pq.substitute(s,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","vec2 getSliceCoords(vec3 coord, int axis) {","  if (axis == 0) return coord.yz;","  if (axis == 1) return coord.xz;","  if (axis == 2) return coord.xy;","}","#endif"]).result),u){for(var f=["r","g","b","a"],p=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"],h=0;h<l;h++)p=p.concat(["vec3 tcolor".concat(h," = mix").concat(h," * texture2D(colorTexture1, vec2(tvalue.").concat(f[h]," * cscale").concat(h," + cshift").concat(h,", height").concat(h,")).rgb;"),"float compWeight".concat(h," = mix").concat(h," * texture2D(pwfTexture1, vec2(tvalue.").concat(f[h]," * pwfscale").concat(h," + pwfshift").concat(h,", height").concat(h,")).r;")]);switch(l){case 1:p=p.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:p=p.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Z("Unsupported number of independent coordinates.")}s=Pq.substitute(s,"//VTK::TCoord::Impl",p).result}else switch(l){case 1:s=Pq.substitute(s,"//VTK::TCoord::Impl",m(function(){for(var e="\n                #ifdef vtkImageLabelOutlineOn\n                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord);\n                  float centerValue = texture2D(texture1, getSliceCoords(centerPosIS, sliceAxis)).r;\n                  bool pixelOnBorder = false;\n                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;\n                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;\n                  float opacityToUse = scalarOpacity * opacity;\n                  int segmentIndex = int(centerValue * 255.0);\n                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;\n                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;\n                  float outlineOpacity = texture2D(labelOutlineOpacityTexture1, vec2(textureCoordinate, 0.5)).r;\n                  int actualThickness = int(textureValue * 255.0);\n\n                  if (segmentIndex == 0){\n                    gl_FragData[0] = vec4(0.0, 0.0, 0.0, 0.0);\n                    return;\n                  }\n\n                  for (int i = -actualThickness; i <= actualThickness; i++) {\n                    for (int j = -actualThickness; j <= actualThickness; j++) {\n                      if (i == 0 || j == 0) {\n                        continue;\n                      }\n                      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),\n                        gl_FragCoord.y + float(j),\n                        gl_FragCoord.z, gl_FragCoord.w);\n                      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n                      float value = texture2D(texture1, getSliceCoords(neighborPosIS, sliceAxis)).r;\n                      if (value != centerValue) {\n                        pixelOnBorder = true;\n                        break;\n                      }\n                    }\n                    if (pixelOnBorder == true) {\n                      break;\n                    }\n                  }\n                  if (pixelOnBorder == true) {\n                    gl_FragData[0] = vec4(tColor, outlineOpacity);\n                  }\n                  else {\n                    gl_FragData[0] = vec4(tColor, opacityToUse);\n                  }\n                #else\n                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;\n                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;\n                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;\n                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);\n                #endif\n                ".split("\n"),t=[],n=0;n<e.length;++n){var i=e[n].trim();i.length>0&&t.push(i)}return t}())).result;break;case 2:s=Pq.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:s=Pq.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:s=Pq.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(s=Pq.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Pq.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=a,n.Fragment=s,e.replaceShaderClip(n,i,o),e.replaceShaderCoincidentOffset(n,i,o)},e.replaceShaderClip=function(e,n,i){var o=e.Vertex,a=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var s=t.renderable.getNumberOfClippingPlanes();s>6&&(Z("OpenGL has a limit of 6 clipping planes"),s=6),o=Pq.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Pq.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,a=Pq.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,a=Pq.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=o,e.Fragment=a},e.getNeedToRebuildShaders=function(e,n,i){var o,a=t.openGLTexture.getComponents(),s=i.getProperty().getIndependentComponents(),l=!1;return(!t.currentRenderPass&&t.lastRenderPassShaderReplacement||t.currentRenderPass&&t.currentRenderPass.getShaderReplacement()!==t.lastRenderPassShaderReplacement)&&(l=!0),!!(l||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===(null==(o=e.getProgram())?void 0:o.getHandle())||e.getShaderSourceTime().getMTime()<t.renderable.getMTime()||e.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||e.getShaderSourceTime().getMTime()<i.getProperty().getMTime()||t.lastTextureComponents!==a||t.lastIndependentComponents!==s)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=a,t.lastIndependentComponents=s,!0)},e.updateShaders=function(n,i,o){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,i,o)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,i,o);var s=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,i,o),e.setCameraShaderParameters(n,i,o),e.setPropertyShaderParameters(n,i,o)},e.setMapperShaderParameters=function(n,i,o){n.getCABO().getElementCount()&&(t.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),t.context.FALSE)||Z("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());var a=t.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",a);var s=t.openGLTexture.getComponents(),l=o.getProperty().getIndependentComponents();if(l)for(var u=0;u<s;u++)n.getProgram().setUniformf("mix".concat(u),o.getProperty().getComponentWeight(u));for(var c=t.openGLTexture.getShiftAndScale(),d=0;d<s;d++){var f=o.getProperty().getColorWindow(),p=o.getProperty().getColorLevel(),h=l?d:0,m=o.getProperty().getRGBTransferFunction(h);if(m&&o.getProperty().getUseLookupTableScalarRange()){var g=m.getRange();f=g[1]-g[0],p=.5*(g[1]+g[0])}var v=c.scale/f,y=(c.shift-p)/f+.5;n.getProgram().setUniformf("cshift".concat(d),y),n.getProgram().setUniformf("cscale".concat(d),v)}for(var b=0;b<s;b++){var x=1,w=0,A=l?b:0,C=o.getProperty().getPiecewiseFunction(A);if(C){var S=C.getRange(),_=S[1]-S[0],T=.5*(S[0]+S[1]);x=c.scale/_,w=(c.shift-T)/_+.5}n.getProgram().setUniformf("pwfshift".concat(b),w),n.getProgram().setUniformf("pwfscale".concat(b),x)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",+!!t.renderDepth),n.getProgram().isUniformUsed("coffset")){var O=e.getCoincidentParameters(i,o);n.getProgram().setUniformf("coffset",O.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",O.factor)}var P=t.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",P);var M=t.pwfTexture.getTextureUnit();if(n.getProgram().setUniformi("pwfTexture1",M),o.getProperty().getUseLabelOutline()){var E=t.labelOutlineThicknessTexture.getTextureUnit();n.getProgram().setUniformi("labelOutlineTexture1",E);var D=t.labelOutlineOpacityTexture.getTextureUnit();n.getProgram().setUniformi("labelOutlineOpacityTexture1",D)}if(t.renderable.getNumberOfClippingPlanes()){var I=t.renderable.getNumberOfClippingPlanes();I>6&&(Z("OpenGL has a limit of 6 clipping planes"),I=6);var k=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,N=k?ol(t.imagematinv,o.getMatrix()):o.getMatrix();k&&(of(N,N),og(N,N,k),of(N,N)),of(t.imagemat,t.currentInput.getIndexToWorld()),og(t.imagematinv,N,t.imagemat);for(var R=[],B=0;B<I;B++){var L=[];t.renderable.getClippingPlaneInDataCoords(t.imagematinv,B,L);for(var F=0;F<4;F++)R.push(L[F])}n.getProgram().setUniformi("numClipPlanes",I),n.getProgram().setUniform4fv("clipPlanes",R)}},e.setCameraShaderParameters=function(n,i,o){var a=n.getProgram(),s=t.openGLImageSlice.getKeyMatrices(),l=t.currentInput,u=l.getIndexToWorld();og(t.imagemat,s.mcwc,u);var c=t.openGLCamera.getKeyMatrices(i);if(og(t.imagemat,c.wcpc,t.imagemat),n.getCABO().getCoordShiftAndScaleEnabled()){var d=n.getCABO().getInverseShiftAndScaleMatrix();og(t.imagemat,t.imagemat,d)}if(a.setUniformMatrix("MCPCMatrix",t.imagemat),!0===o.getProperty().getUseLabelOutline()){var f=l.getWorldToIndex(),p=l.getDimensions(),h=t.renderable.getClosestIJKAxis().ijkMode;h===kB.NONE&&(h=kB.K),a.setUniform3i("imageDimensions",p[0],p[1],p[2]),a.setUniformi("sliceAxis",h),a.setUniformMatrix("vWCtoIDX",f);var m=t.openGLCamera.getKeyMatrices(i);op(t.projectionToWorld,m.wcpc),t.openGLCamera.getKeyMatrices(i),a.setUniformMatrix("PCWCMatrix",t.projectionToWorld);var g=e.getRenderTargetSize();a.setUniformf("vpWidth",g[0]),a.setUniformf("vpHeight",g[1]);var v=e.getRenderTargetOffset();a.setUniformf("vpOffsetX",v[0]/g[0]),a.setUniformf("vpOffsetY",v[1]/g[1])}},e.setPropertyShaderParameters=function(e,t,n){var i=e.getProgram(),o=n.getProperty().getOpacity();i.setUniformf("opacity",o)},e.renderPieceStart=function(n,i){e.updateBufferObjects(n,i),t.lastBoundBO=null},e.renderPieceDraw=function(n,i){var o=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),i.getProperty().getUseLabelOutline()&&(t.labelOutlineThicknessTexture.activate(),t.labelOutlineOpacityTexture.activate()),t.pwfTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,i),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),i.getProperty().getUseLabelOutline()&&(t.labelOutlineThicknessTexture.deactivate(),t.labelOutlineOpacityTexture.deactivate()),t.pwfTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.renderPiece=function(n,i){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getCurrentImage(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i)):Z("No input!")},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,i){var o,a,s,l,u;return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<i.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<i.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()||!(null!=(o=t.openGLTexture)&&o.getHandle())||!(null!=(a=t.colorTexture)&&a.getHandle())||i.getProperty().getUseLabelOutline()&&(!(null!=(s=t.labelOutlineThicknessTexture)&&s.getHandle())||!(null!=(l=t.labelOutlineOpacityTexture)&&l.getHandle()))||!(null!=(u=t.pwfTexture)&&u.getHandle())},e.buildBufferObjects=function(n,i){var o,a,s=t.currentInput;if(s){var l=s.getPointData()&&s.getPointData().getScalars();if(l){for(var u=l.getDataType(),c=l.getNumberOfComponents(),d=i.getProperty(),f=d.getInterpolationType(),p=d.getIndependentComponents(),h=p?c:1,m=p?2*h:1,g=[],v=0;v<h;++v)g.push(d.getRGBTransferFunction(v));var y=kN(g,p,h),b=d.getRGBTransferFunction(),x=t._openGLRenderWindow.getGraphicsResourceForObject(b);if(null!=x&&null!=(o=x.oglObject)&&o.getHandle()&&(null==x?void 0:x.hash)===y)t.colorTexture=x.oglObject;else{t.colorTexture=Py.newInstance({resizable:!0}),t.colorTexture.setOpenGLRenderWindow(t._openGLRenderWindow);var w=t.renderable.getColorTextureWidth();w<=0&&(w=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));var A=new Uint8ClampedArray(w*m*3);if(f===TZ.NEAREST?(t.colorTexture.setMinificationFilter(O6.NEAREST),t.colorTexture.setMagnificationFilter(O6.NEAREST)):(t.colorTexture.setMinificationFilter(O6.LINEAR),t.colorTexture.setMagnificationFilter(O6.LINEAR)),b){for(var C=new Float32Array(3*w),S=0;S<h;S++){var _=d.getRGBTransferFunction(S),T=_.getRange();if(_.getTable(T[0],T[1],w,C,1),p)for(var O=0;O<3*w;O++)A[S*w*6+O]=255*C[O],A[S*w*6+O+3*w]=255*C[O];else for(var P=0;P<3*w;P++)A[S*w*6+P]=255*C[P]}t.colorTexture.resetFormatAndType(),t.colorTexture.create2DFromRaw({width:w,height:m,numComps:3,dataType:eI.UNSIGNED_CHAR,data:A})}else{for(var M=0;M<3*w;++M)A[M]=255*M/(3*(w-1)),A[M+1]=255*M/(3*(w-1)),A[M+2]=255*M/(3*(w-1));t.colorTexture.create2DFromRaw({width:w,height:1,numComps:3,dataType:eI.UNSIGNED_CHAR,data:A})}b&&(t._openGLRenderWindow.setGraphicsResourceForObject(b,t.colorTexture,y),b!==t._colorTransferFunc&&(t._openGLRenderWindow.registerGraphicsResourceUser(b,e),t._openGLRenderWindow.unregisterGraphicsResourceUser(t._colorTransferFunc,e)),t._colorTransferFunc=b)}for(var E=[],D=0;D<h;++D)E.push(d.getPiecewiseFunction(D));var I=kN(E,p,h),k=d.getPiecewiseFunction(),N=t._openGLRenderWindow.getGraphicsResourceForObject(k);if(null!=N&&null!=(a=N.oglObject)&&a.getHandle()&&(null==N?void 0:N.hash)===I)t.pwfTexture=N.oglObject;else{var R=t.renderable.getOpacityTextureWidth();R<=0&&(R=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));var B=R*m,L=new Uint8ClampedArray(B);if(t.pwfTexture=Py.newInstance({resizable:!0}),t.pwfTexture.setOpenGLRenderWindow(t._openGLRenderWindow),f===TZ.NEAREST?(t.pwfTexture.setMinificationFilter(O6.NEAREST),t.pwfTexture.setMagnificationFilter(O6.NEAREST)):(t.pwfTexture.setMinificationFilter(O6.LINEAR),t.pwfTexture.setMagnificationFilter(O6.LINEAR)),k){for(var F=new Float32Array(B),V=new Float32Array(R),j=0;j<h;++j){var G=d.getPiecewiseFunction(j);if(null===G)F.fill(1);else{var U=G.getRange();if(G.getTable(U[0],U[1],R,V,1),p)for(var z=0;z<R;z++)F[j*R*2+z]=V[z],F[j*R*2+z+R]=V[z];else for(var W=0;W<R;W++)F[j*R*2+W]=V[W]}}t.pwfTexture.resetFormatAndType(),t.pwfTexture.create2DFromRaw({width:R,height:m,numComps:1,dataType:eI.FLOAT,data:F})}else L.fill(255),t.pwfTexture.create2DFromRaw({width:R,height:1,numComps:1,dataType:eI.UNSIGNED_CHAR,data:L});k&&(t._openGLRenderWindow.setGraphicsResourceForObject(k,t.pwfTexture,I),k!==t._pwFunc&&(t._openGLRenderWindow.registerGraphicsResourceUser(k,e),t._openGLRenderWindow.unregisterGraphicsResourceUser(t._pwFunc,e)),t._pwFunc=k)}i.getProperty().getUseLabelOutline()&&(e.updatelabelOutlineThicknessTexture(i),e.updateLabelOutlineOpacityTexture(i));var H=t.renderable.getClosestIJKAxis().ijkMode,q=t.renderable.getSlice();H!==t.renderable.getSlicingMode()&&(q=t.renderable.getSliceAtPosition(q));var K,X=t.renderable.isA("vtkImageArrayMapper")?t.renderable.getSubSlice():Math.round(q),Y=s.getExtent();H===kB.I&&(K=X-Y[0]),H===kB.J&&(K=X-Y[2]),H!==kB.K&&H!==kB.NONE||(K=X-Y[4]);var J="".concat(q,"A").concat(s.getMTime(),"A").concat(l.getMTime(),"B").concat(e.getMTime(),"C").concat(t.renderable.getSlicingMode(),"D").concat(i.getProperty().getInterpolationType());if(t.VBOBuildString!==J){var Q,$,ee=s.getDimensions();t.openGLTexture||(t.openGLTexture=Py.newInstance({resizable:!0})),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture.setOglNorm16Ext(t.context.getExtension("EXT_texture_norm16")),f===TZ.NEAREST?(new Set([1,3,4]).has(c)&&u===eI.UNSIGNED_CHAR&&!p&&t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(O6.NEAREST),t.openGLTexture.setMagnificationFilter(O6.NEAREST)):(4!==c||u!==eI.UNSIGNED_CHAR||p?t.openGLTexture.setMinificationFilter(O6.LINEAR):(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(O6.LINEAR_MIPMAP_LINEAR)),t.openGLTexture.setMagnificationFilter(O6.LINEAR)),t.openGLTexture.setWrapS(O5.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(O5.CLAMP_TO_EDGE);for(var et=ee[0]*ee[1]*c,en=new Float32Array(12),er=new Float32Array(8),ei=0;ei<4;ei++)er[2*ei]=ei%2?1:0,er[2*ei+1]=+(ei>1);var eo=[kB.X,kB.Y,kB.Z].includes(t.renderable.getSlicingMode())?q:X,ea=s.getSpatialExtent(),es=l.getData(),el=null;if(H===kB.I){el=new es.constructor(ee[2]*ee[1]*c);for(var eu=0,ec=0;ec<ee[2];ec++)for(var ed=0;ed<ee[1];ed++){var ef=(K+ed*ee[0]+ec*ee[0]*ee[1])*c;eu=(ec*ee[1]+ed)*c;for(var ep=ef+c;ef<ep;)el[eu++]=es[ef++]}ee[0]=ee[1],ee[1]=ee[2],en[0]=eo,en[1]=ea[2],en[2]=ea[4],en[3]=eo,en[4]=ea[3],en[5]=ea[4],en[6]=eo,en[7]=ea[2],en[8]=ea[5],en[9]=eo,en[10]=ea[3],en[11]=ea[5]}else if(H===kB.J){el=new es.constructor(ee[2]*ee[0]*c);for(var eh=0,em=0;em<ee[2];em++)for(var eg=0;eg<ee[0];eg++){var ev=(eg+K*ee[0]+em*ee[0]*ee[1])*c;eh=(em*ee[0]+eg)*c;for(var ey=ev+c;ev<ey;)el[eh++]=es[ev++]}ee[1]=ee[2],en[0]=ea[0],en[1]=eo,en[2]=ea[4],en[3]=ea[1],en[4]=eo,en[5]=ea[4],en[6]=ea[0],en[7]=eo,en[8]=ea[5],en[9]=ea[1],en[10]=eo,en[11]=ea[5]}else H===kB.K||H===kB.NONE?(el=es.subarray(K*et,(K+1)*et),en[0]=ea[0],en[1]=ea[2],en[2]=eo,en[3]=ea[1],en[4]=ea[2],en[5]=eo,en[6]=ea[0],en[7]=ea[3],en[8]=eo,en[9]=ea[1],en[10]=ea[3],en[11]=eo):Z("Reformat slicing not yet supported.");var eb=l.getRanges();t.openGLTexture.resetFormatAndType(),t.openGLTexture.create2DFilterableFromRaw({width:ee[0],height:ee[1],numComps:c,dataType:l.getDataType(),data:el,preferSizeOverAccuracy:!(null==(Q=($=t.renderable).getPreferSizeOverAccuracy)||!Q.call($)),ranges:eb}),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();var ex=nH.newInstance({numberOfComponents:3,values:en});ex.setName("points");var ew=nH.newInstance({numberOfComponents:2,values:er});ew.setName("tcoords");var eA=new Uint16Array(8);eA[0]=3,eA[1]=0,eA[2]=1,eA[3]=3,eA[4]=3,eA[5]=0,eA[6]=3,eA[7]=2;var eC=nH.newInstance({numberOfComponents:1,values:eA});t.tris.getCABO().createVBO(eC,"polys",mk.SURFACE,{points:ex,tcoords:ew,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=J}}}},e.updateLabelOutlineOpacityTexture=function(n){var i,o,a=n.getProperty().getLabelOutlineOpacity();"number"==typeof a&&(a=(null==(o=t._cachedLabelOutlineOpacityObj)?void 0:o[0])===a?t._cachedLabelOutlineOpacityObj:[a],t._cachedLabelOutlineOpacityObj=a);var s=t._openGLRenderWindow.getGraphicsResourceForObject(a),l="".concat(a.join("-"));if(null!=s&&null!=(i=s.oglObject)&&i.getHandle()&&(null==s?void 0:s.hash)===l)t.labelOutlineOpacityTexture=s.oglObject;else{var u,c=t.renderable.getLabelOutlineTextureWidth();c<=0&&(c=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));for(var d=new Float32Array(+c),f=0;f<c;++f)d[f]=null!=(u=a[f])?u:a[0];t.labelOutlineOpacityTexture=Py.newInstance({resizable:!1}),t.labelOutlineOpacityTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.labelOutlineOpacityTexture.resetFormatAndType(),t.labelOutlineOpacityTexture.setMinificationFilter(O6.NEAREST),t.labelOutlineOpacityTexture.setMagnificationFilter(O6.NEAREST),t.labelOutlineOpacityTexture.create2DFromRaw({width:c,height:1,numComps:1,dataType:eI.FLOAT,data:d}),a&&(t._openGLRenderWindow.setGraphicsResourceForObject(a,t.labelOutlineOpacityTexture,l),a!==t._labelOutlineOpacity&&(t._openGLRenderWindow.registerGraphicsResourceUser(a,e),t._openGLRenderWindow.unregisterGraphicsResourceUser(t._labelOutlineOpacity,e)),t._labelOutlineOpacity=a)}},e.updatelabelOutlineThicknessTexture=function(n){var i,o=n.getProperty().getLabelOutlineThicknessByReference(),a=t._openGLRenderWindow.getGraphicsResourceForObject(o),s="".concat(o.join("-"));if(null!=a&&null!=(i=a.oglObject)&&i.getHandle()&&(null==a?void 0:a.hash)===s)t.labelOutlineThicknessTexture=a.oglObject;else{var l=t.renderable.getLabelOutlineTextureWidth();l<=0&&(l=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));for(var u=new Uint8Array(+l),c=0;c<l;++c){var d=void 0!==o[c]?o[c]:o[0];u[c]=d}t.labelOutlineThicknessTexture=Py.newInstance({resizable:!1}),t.labelOutlineThicknessTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.labelOutlineThicknessTexture.resetFormatAndType(),t.labelOutlineThicknessTexture.setMinificationFilter(O6.NEAREST),t.labelOutlineThicknessTexture.setMagnificationFilter(O6.NEAREST),t.labelOutlineThicknessTexture.create2DFromRaw({width:l,height:1,numComps:1,dataType:eI.UNSIGNED_CHAR,data:u}),o&&(t._openGLRenderWindow.setGraphicsResourceForObject(o,t.labelOutlineThicknessTexture,s),o!==t._labelOutlineThicknessArray&&(t._openGLRenderWindow.registerGraphicsResourceUser(o,e),t._openGLRenderWindow.unregisterGraphicsResourceUser(t._labelOutlineThicknessArray,e)),t._labelOutlineThicknessArray=o)}},e.getRenderTargetSize=function(){if(t._useSmallViewport)return[t._smallViewportWidth,t._smallViewportHeight];var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.usize,e.vsize]},e.getRenderTargetOffset=function(){var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.lowerLeftU,e.lowerLeftV]},e.delete=eA(function(){t._openGLRenderWindow&&n(t._openGLRenderWindow)},e.delete)}(e,t)}var kV=ew(kF,"vtkOpenGLImageMapper");Po.vtkAbstractImageMapper=kV;var kj={context:null,keyMatrixTime:null,keyMatrices:null};function kG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kj,n),Pt.extend(e,t,n),t.keyMatrixTime={},es(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:od(new Float64Array(16))},ep(e,t,["context"]),t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&t.renderable&&(t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseZBufferPass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.traverseOpaqueZBufferPass=function(t){return e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t._openGLRenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount())},e.zBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(e,n){e&&t.context.depthMask(!0)},e.translucentPass=function(e,n){t.context.depthMask(!e)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(ol(t.keyMatrices.mcwc,t.renderable.getMatrix()),of(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices}}var kU=ew(kG,"vtkOpenGLImageSlice");Po.vtkImageSlice=kU;var kz={};function kW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kz,n),Pt.extend(e,t,n),t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(n,i){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");var o=t._openGLRenderer.getAspectRatio(),a=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,s=t._openGLRenderer.getTiledSizeAndOrigin(),l=null;if(t.renderable.getUseZValues()){var u=i.getZBufferTexture(),c=Math.floor(u.getWidth()),d=Math.floor(u.getHeight()),f=t._openGLRenderWindow.getContext();u.bind();var p=i.getFramebuffer();p?p.saveCurrentBindingsAndBuffers():Y("No framebuffer to save/restore");var h=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,h),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,u.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(l=new Uint8Array(c*d*4),f.viewport(0,0,c,d),f.readPixels(0,0,c,d,f.RGBA,f.UNSIGNED_BYTE,l)),p&&p.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(h)}t.renderable.invokeCallback(t.renderable.getInputData(),a,o,s,l)},e.queryPass=function(e,n){e&&t.renderable.getUseZValues()&&n.requestDepth()}}var kH=ew(kW,"vtkOpenGLPixelSpaceCallbackMapper");Po.vtkPixelSpaceCallbackMapper=kH;var kq=n(979),kK=n.n(kq),kX=n(8147),kY=n.n(kX),kZ=P$.primTypes,kJ=Py.Filter,kQ=Py.Wrap,k$={type:"StartEvent"},k0={type:"EndEvent"},k1={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function k2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,k1,n),Pt.extend(e,t,n),ks(e,t,n),kl(e,t,n),t.primitives=[],t.primTypes=kZ,t.tmpMat4=od(new Float64Array(16));for(var o=kZ.Start;o<kZ.End;o++)t.primitives[o]=P$.newInstance(),t.primitives[o].setPrimitiveType(o),t.primitives[o].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ep(e,t,["context"]),t.VBOBuildTime={},es(t.VBOBuildTime,{mtime:0}),t.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),e.buildPass=function(n){n&&(t.openGLActor2D=e.getFirstAncestorOfType("vtkOpenGLActor2D"),t._openGLRenderer=t.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),t.openGLCamera=t._openGLRenderer.getViewNodeFor(t._openGLRenderer.getRenderable().getActiveCamera(),t.openGLCamera))},e.overlayPass=function(t){t&&e.render()},e.getShaderTemplate=function(e,t,n){e.Vertex=kY(),e.Fragment=kK(),e.Geometry=""},e.render=function(){var n=t._openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(var i=kZ.Start;i<kZ.End;i++)t.primitives[i].setOpenGLRenderWindow(t._openGLRenderWindow)}var o=t.openGLActor2D.getRenderable(),a=t._openGLRenderer.getRenderable();e.renderPiece(a,o)},e.renderPiece=function(n,i){if(e.invokeEvent(k$),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(k0),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var o=t.context;t._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK),e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i)}}else Z("No input!")},e.renderPieceStart=function(n,i){t.primitiveIDOffset=0,t._openGLRenderer.getSelector()&&(t._openGLRenderer.getSelector().getCurrentPass(),t._openGLRenderer.getSelector().renderProp(i)),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),e.updateBufferObjects(n,i),t.lastBoundBO=null},e.getNeedToRebuildShaders=function(e,n,i){return e.getShaderSourceTime().getMTime()<t.renderable.getMTime()||e.getShaderSourceTime().getMTime()<t.currentInput.getMTime()},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,i){var o=t.VBOBuildTime.getMTime();return!!(o<e.getMTime()||o<t._openGLRenderWindow.getMTime()||o<t.renderable.getMTime()||o<i.getMTime()||o<t.currentInput.getMTime()||t.renderable.getTransformCoordinate()&&o<n.getMTime())},e.buildBufferObjects=function(e,n){var i=t.currentInput;if(null!==i){t.renderable.mapScalars(i,n.getProperty().getOpacity());var o=t.renderable.getColorMapColors(),a=n.getProperty().getRepresentation(),s=i.getPointData().getTCoords();t.openGLActor2D.getActiveTextures()||(s=null);var l=!1;if(t.renderable.getColorCoordinates()){s=t.renderable.getColorCoordinates(),l=t.renderable.getAreScalarsMappedFromCells(),t.internalColorTexture||(t.internalColorTexture=Py.newInstance({resizable:!0}));var u=t.internalColorTexture;u.setMinificationFilter(kJ.NEAREST),u.setMagnificationFilter(kJ.NEAREST),u.setWrapS(kQ.CLAMP_TO_EDGE),u.setWrapT(kQ.CLAMP_TO_EDGE),u.setOpenGLRenderWindow(t._openGLRenderWindow);var c=t.renderable.getColorTextureMap(),d=c.getExtent(),f=c.getPointData().getScalars();u.create2DFromRaw({width:d[1]-d[0]+1,height:d[3]-d[2]+1,numComps:f.getNumberOfComponents(),dataType:f.getDataType(),data:f.getData()}),u.activate(),u.sendParameters(),u.deactivate()}var p=t.renderable.getTransformCoordinate(),h=e.getRenderWindow().getViews()[0].getViewportSize(e),m="".concat(i.getMTime(),"A").concat(a,"B").concat(i.getMTime())+"C".concat(o?o.getMTime():1)+"D".concat(s?s.getMTime():1)+"E".concat(p?e.getMTime():1)+"F".concat(h);if(t.VBOBuildString!==m){var g=i.getPoints();if(p){var v=a3.newInstance(),y=g.getNumberOfPoints();v.setNumberOfPoints(y);for(var b=[],x=0;x<y;++x){g.getPoint(x,b),p.setValue(b);var w=p.getComputedDoubleViewportValue(e);v.setPoint(x,w[0],w[1],0)}g=v}var A={points:g,tcoords:s,colors:o,cellOffset:0,useTCoordsPerCell:l,haveCellScalars:t.renderable.getAreScalarsMappedFromCells(),customAttributes:t.renderable.getCustomShaderAttributes().map(function(e){return i.getPointData().getArrayByName(e)})};A.cellOffset+=t.primitives[kZ.Points].getCABO().createVBO(i.getVerts(),"verts",a,A),A.cellOffset+=t.primitives[kZ.Lines].getCABO().createVBO(i.getLines(),"lines",a,A),A.cellOffset+=t.primitives[kZ.Tris].getCABO().createVBO(i.getPolys(),"polys",a,A),A.cellOffset+=t.primitives[kZ.TriStrips].getCABO().createVBO(i.getStrips(),"strips",a,A),t.VBOBuildTime.modified(),t.VBOBuildString=m}}},e.renderPieceDraw=function(n,i){var o=i.getProperty().getRepresentation();t.context.depthMask(!0);for(var a=kZ.Start;a<kZ.End;a++)t.primitives[a].getCABO().getElementCount()&&(t.lastBoundBO=t.primitives[a],t.primitiveIDOffset+=t.primitives[a].drawArrays(n,i,o,e))},e.renderPieceFinish=function(e,n){t.lastBoundBO&&t.lastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.replaceShaderValues=function(t,n,i){e.replaceShaderColor(t,n,i),e.replaceShaderTCoord(t,n,i),e.replaceShaderPicking(t,n,i),e.replaceShaderPositionVC(t,n,i)},e.replaceShaderColor=function(e,n,i){var o=e.Vertex,a=e.Geometry,s=e.Fragment,l=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],u=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];0!==t.lastBoundBO.getCABO().getColorComponents()?(l=l.concat(["varying vec4 vertexColorVSOutput;"]),o=Pq.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Pq.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=Pq.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=Pq.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,s=Pq.substitute(s,"//VTK::Color::Impl",u.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):t.renderable.getAreScalarsMappedFromCells()&&(u=u.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),u=u.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),s=Pq.substitute(s,"//VTK::Color::Dec",l).result,s=Pq.substitute(s,"//VTK::Color::Impl",u).result,e.Vertex=o,e.Geometry=a,e.Fragment=s},e.replaceShaderTCoord=function(e,n,i){if(t.lastBoundBO.getCABO().getTCoordOffset()){var o=e.Vertex,a=e.Geometry,s=e.Fragment,l=t.lastBoundBO.getCABO().getTCoordComponents();1===l?(o=Pq.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=Pq.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput[];\n","out float tcoordVCGSOutput;"]).result,a=Pq.substitute(a,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,s=Pq.substitute(s,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s=Pq.substitute(s,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):2===l&&(o=Pq.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=Pq.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];\n","out vec2 tcoordVCGSOutput;"]).result,a=Pq.substitute(a,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,s=Pq.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s=Pq.substitute(s,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),t.renderable.getAreScalarsMappedFromCells()&&(a=Pq.substitute(a,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=s}},e.replaceShaderPicking=function(e,t,n){var i=e.Fragment;i=Pq.substitute(i,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,e.Fragment=i=Pq.substitute(i,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result},e.replaceShaderPositionVC=function(e,n,i){t.lastBoundBO.replaceShaderPositionVC(e,n,i)},e.invokeShaderCallbacks=function(e,n,i){var o=t.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(function(t){t.callback(t.userData,e,n,i)})},e.setMapperShaderParameters=function(e,n,i){if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),e.getProgram().isAttributeUsed("vertexWC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexWC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,!1)||Z("Error setting vertexWC in shader VAO.")),e.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){t.renderable.getCustomShaderAttributes().forEach(function(n,i){e.getProgram().isAttributeUsed("".concat(n,"MC"))&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(n,"MC"),e.getCABO().getCustomData()[i].offset,e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getCustomData()[i].components,!1)||Z("Error setting ".concat(n,"MC in shader VAO.")))}),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||Z("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||Z("Error setting scalarColor in shader VAO."):e.getVAO().removeAttributeArray("scalarColor"),t.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&t.internalColorTexture.getTextureUnit()>-1&&e.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var o=t.openGLActor2D.getActiveTextures();if(o)for(var a=0;a<o.length;++a){var s=o[a].getTextureUnit(),l="texture".concat(s+1);e.getProgram().isUniformUsed(l)&&e.getProgram().setUniformi(l,s)}e.setMapperShaderParameters(n,i,t._openGLRenderer.getTiledSizeAndOrigin());var u=t._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)}},e.setPropertyShaderParameters=function(e,n,i){var o=t.renderable.getColorMapColors();if(!o||0===o.getNumberOfComponents()){var a=e.getProgram(),s=i.getProperty(),l=s.getOpacity();a.setUniformf("opacityUniform",l);var u=s.getColor();a.setUniform3fArray("diffuseColorUniform",u)}},e.setLightingShaderParameters=function(e,t,n){},e.setCameraShaderParameters=function(e,n,o){var a=e.getProgram(),s=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,l=n.getRenderWindow().getViews()[0].getViewportSize(n),u=n.getViewport(),c=o.getActualPositionCoordinate().getComputedDoubleViewportValue(n),d=[0,0,1,1];if(d[0]=u[0]>=0?u[0]:0,d[1]=u[1]>=0?u[1]:0,d[2]=u[2]<=1?u[2]:1,d[3]=u[3]<=1?u[3]:1,!(d[0]>=d[2]||d[1]>=d[3])){l[0]=eY(l[0]*(d[2]-d[0])/(u[2]-u[0])),l[1]=eY(l[1]*(d[3]-d[1])/(u[3]-u[1]));var f=t._openGLRenderer.getParent().getSize(),p=eY(c[0]-(d[0]-u[0])*f[0]),h=eY(c[1]-(d[1]-u[1])*f[1]),m=-p,g=-p+l[0],v=-h,y=-h+l[1];m===g&&(g=m+1),v===y&&(y=v+1);var b,x,w=od(new Float64Array(16));w[0]=2/(g-m),w[5]=2/(y-v),w[3]=-1*(g+m)/(g-m),w[7]=-1*(y+v)/(y-v),w[10]=0,w[11]=o.getProperty().getDisplayLocation()===SM.FOREGROUND?-1:1,w[15]=1,of(w,w),a.setUniformMatrix("WCVCMatrix",(b=[w,s],x=t.tmpMat4,i.identity(x),b.reduce(function(e,t,n){return 0===n?t?i.copy(e,t):i.identity(e):t?i.multiply(e,e,t):e},x)))}},e.getAllocatedGPUMemoryInBytes=function(){var e=0;return t.primitives.forEach(function(t){e+=t.getAllocatedGPUMemoryInBytes()}),e}}var k3=ew(k2,"vtkOpenGLPolyDataMapper2D");Po.vtkMapper2D=k3;var k4={context:null,_openGLRenderWindow:null,selector:null};function k5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,k4,n),Pt.extend(e,t,n),eu(e,t,["shaderCache"]),ep(e,t,["selector"]),ev(0,t,["openGLRenderWindow"]),t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(n){n&&t.renderable&&(e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps(),!0),e.removeUnusedNodes())},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),i=0;i<n.length;++i)n[i].getSwitch()>0&&e++;return e||(Y("No lights are on, creating one."),t.renderable.createLight()),e},e.zBufferPass=function(n){if(n){var i=0,o=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),i|=o.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(o.clearDepth(1),i|=o.DEPTH_BUFFER_BIT,t.context.depthMask(!0));var a=e.getTiledSizeAndOrigin();o.enable(o.SCISSOR_TEST),o.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),o.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),o.colorMask(!0,!0,!0,!0),i&&o.clear(i),o.enable(o.DEPTH_TEST)}},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=e[0]-0,i=e[1]-0,o=t._parent.normalizedDisplayToDisplay(n,i),a=Math.round(o[0]),s=Math.round(o[1]),l=e[2]-0,u=e[3]-0,c=t._parent.normalizedDisplayToDisplay(l,u),d=Math.round(c[0])-a,f=Math.round(c[1])-s;return d<0&&(d=0),f<0&&(f=0),{usize:d,vsize:f,lowerLeftU:a,lowerLeftV:s}},e.clear=function(){var n=0,i=t.context;if(!t.renderable.getTransparent()){var o=t.renderable.getBackgroundByReference();i.clearColor(o[0],o[1],o[2],o[3]),n|=i.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),n|=i.DEPTH_BUFFER_BIT,i.depthMask(!0)),i.colorMask(!0,!0,!0,!0);var a=e.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),i.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),n&&i.clear(n),i.enable(i.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources(),t.renderable&&t.renderable.getViewProps().forEach(function(e){e.modified()})},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}var k6=ew(k5,"vtkOpenGLRenderer");function k8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}Po.vtkRenderer=k6;var k9=eE.vtkErrorMacro,k7={};function Ne(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,k7,i),eE.obj(e,t),eE.algo(e,t,1,1),t._cubeSource=fq.newInstance(),eE.moveToProtected(e,t,["cubeSource","tmpOut"]),t.classHierarchy.push("vtkImageDataOutlineFilter"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k8(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.requestData=function(e,n){var i=e[0];if(i&&i.isA("vtkImageData")){var o=i.getSpatialExtent();o?(t._cubeSource.setBounds(o),t._cubeSource.setMatrix(i.getIndexToWorld()),n[0]=t._cubeSource.getOutputData()):k9("Unable to fetch spatial extents of input image.")}else k9("Invalid or missing input")},e.getMTime=function(){return Math.max(n.getMTime(),t._cubeSource.getMTime())},e.setGenerateFaces=t._cubeSource.setGenerateFaces,e.setGenerateLines=t._cubeSource.setGenerateLines,e.getGenerateFaces=t._cubeSource.getGenerateFaces,e.getGenerateLines=t._cubeSource.getGenerateLines}var Nt={newInstance:eE.newInstance(Ne,"vtkImageDataOutlineFilter"),extend:Ne},Nn=n(5780),Nr=n.n(Nn),Ni=n(4196),No=n.n(Ni);function Na(e,t,n){return t.identity(n),e.reduce(function(e,n,i){return 0===i?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e},n)}var Ns={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastNumberOfComponents:0,lastMultiTexturePerVolumeEnabled:!1,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,scalarTextures:[],_scalarTexturesCore:[],colorTexture:null,_colorTextureCore:null,pwfTexture:null,_pwfTextureCore:null,_externalOpenGLTexture:!1,resliceGeom:null,resliceGeomUpdateString:null,tris:null};function Nl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ns,n),Pt.extend(e,t,n),ks(e,t,n),kl(e,t,n),t.tris=P$.newInstance(),t.scalarTextures=[],t.colorTexture=null,t.pwfTexture=null,t.VBOBuildTime={},es(t.VBOBuildTime),t.tmpMat4=od(new Float64Array(16)),t.outlineFilter=Nt.newInstance(),t.outlineFilter.setGenerateFaces(!0),t.outlineFilter.setGenerateLines(!1),t.cubePolyData=lC.newInstance(),t.cutter=uW.newInstance(),t.lineToSurfaceFilter=cV.newInstance(),t.transform=uo.newInstance(),eu(e,t,["scalarTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLImageResliceMapper");var n=new Map;function a(t,i,o){i!==o&&(function(t,i){var o;if(i){var a=(null!=(o=n.get(i))?o:0)-1;a<=0?(t.unregisterGraphicsResourceUser(i,e),n.delete(i)):n.set(i,a)}}(t,i),function(t,i){var o;if(i){var a=null!=(o=n.get(i))?o:0;n.set(i,a+1),a<=0&&t.registerGraphicsResourceUser(i,e)}}(t,o))}function s(t){m(n.keys()).forEach(function(n){return t.unregisterGraphicsResourceUser(n,e)})}e.buildPass=function(n){if(n){t.currentRenderPass=null,t._openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var i=t._openGLRenderer.getRenderable();t._openGLCamera=t._openGLRenderer.getViewNodeFor(i.getActiveCamera(),t.openGLCamera);var o=t._openGLRenderWindow;t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==t._openGLRenderWindow&&s(o),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow)}},e.translucentPass=function(n,i){n&&(t.currentRenderPass=i,e.render())},e.zBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()==mZ.PolygonOffset?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t._openGLImageSlice.getRenderable(),i=t._openGLRenderer.getRenderable();e.renderPiece(i,n)},e.renderPiece=function(n,i){e.invokeEvent({type:"StartEvent"}),t.renderable.update();var o=t.renderable.getNumberOfInputPorts();t.currentValidInputs=[];for(var a=0;a<o;++a){var s=t.renderable.getInputData(a);s&&!s.isDeleted()&&t.currentValidInputs.push({imageData:s,inputIndex:a})}var l=t.currentValidInputs.length;if(l<=0)Z("No input!");else{var u=t.currentValidInputs[0].imageData.getPointData().getScalars();t.multiTexturePerVolumeEnabled=l>1,t.numberOfComponents=t.multiTexturePerVolumeEnabled?l:u.getNumberOfComponents(),e.updateResliceGeometry(),e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i),e.invokeEvent({type:"EndEvent"})}},e.renderPieceStart=function(n,i){e.updateBufferObjects(n,i);var o=i.getProperties();t.currentValidInputs.forEach(function(e){var n=e.inputIndex,i=o[n].getInterpolationType(),a=t.scalarTextures[n];i===TZ.NEAREST?(a.setMinificationFilter(O6.NEAREST),a.setMagnificationFilter(O6.NEAREST)):(a.setMinificationFilter(O6.LINEAR),a.setMagnificationFilter(O6.LINEAR))}),o[t.currentValidInputs[0].inputIndex].getInterpolationType()===TZ.NEAREST?(t.colorTexture.setMinificationFilter(O6.NEAREST),t.colorTexture.setMagnificationFilter(O6.NEAREST),t.pwfTexture.setMinificationFilter(O6.NEAREST),t.pwfTexture.setMagnificationFilter(O6.NEAREST)):(t.colorTexture.setMinificationFilter(O6.LINEAR),t.colorTexture.setMagnificationFilter(O6.LINEAR),t.pwfTexture.setMinificationFilter(O6.LINEAR),t.pwfTexture.setMagnificationFilter(O6.LINEAR)),t.lastBoundBO=null},e.renderPieceDraw=function(n,i){var o=t.context,a=[].concat(m(t.scalarTextures),[t.colorTexture,t.pwfTexture]);a.forEach(function(e){return e.activate()}),e.updateShaders(t.tris,n,i),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),a.forEach(function(e){return e.deactivate()})},e.renderPieceFinish=function(e,t){},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,i){var o,a,s;return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<i.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<(null==(o=i.getProperty(t.currentValidInputs[0].inputIndex))?void 0:o.getMTime())||t.currentValidInputs.some(function(e){var n=e.imageData;return t.VBOBuildTime.getMTime()<n.getMTime()})||t.VBOBuildTime.getMTime()<t.resliceGeom.getMTime()||t.scalarTextures.length!==t.currentValidInputs.length||!t.scalarTextures.every(function(e){return!(null==e||!e.getHandle())})||!(null!=(a=t.colorTexture)&&a.getHandle())||!(null!=(s=t.pwfTexture)&&s.getHandle())},e.buildBufferObjects=function(e,n){var i,o,s=n.getProperties();t.currentValidInputs.forEach(function(e,n){var i,o=e.imageData,l=o.getPointData().getScalars(),u=t._openGLRenderWindow.getGraphicsResourceForObject(l),c=kR(0,l),d=!(null!=u&&null!=(i=u.oglObject)&&i.getHandle())||(null==u?void 0:u.hash)!==c,f=s[n],p=f.getUpdatedExtents(),h=!!p.length;if(d&&!h){var m=Py.newInstance();m.setOpenGLRenderWindow(t._openGLRenderWindow);var g=o.getDimensions();m.setOglNorm16Ext(t.context.getExtension("EXT_texture_norm16")),m.resetFormatAndType(),m.create3DFilterableFromDataArray({width:g[0],height:g[1],depth:g[2],dataArray:l}),t._openGLRenderWindow.setGraphicsResourceForObject(l,m,c),t.scalarTextures[n]=m}else t.scalarTextures[n]=u.oglObject;if(h){f.setUpdatedExtents([]);var v=o.getDimensions();t.scalarTextures[n].create3DFilterableFromDataArray({width:v[0],height:v[1],depth:v[2],dataArray:l,updatedExtents:p})}a(t._openGLRenderWindow,t._scalarTexturesCore[n],l),t._scalarTexturesCore[n]=l});for(var l=t.currentValidInputs[0],u=s[l.inputIndex],c=u.getIndependentComponents(),d=c?t.numberOfComponents:1,f=c?2*d:1,p=[],h=0;h<d;++h)p.push(u.getRGBTransferFunction(h));var m=kN(p,c,d),g=u.getRGBTransferFunction(),v=t._openGLRenderWindow.getGraphicsResourceForObject(g);if(null!=v&&null!=(i=v.oglObject)&&i.getHandle()&&(null==v?void 0:v.hash)===m)t.colorTexture=v.oglObject;else{var y=t.renderable.getColorTextureWidth();y<=0&&(y=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));var b=new Uint8ClampedArray(y*f*3),x=Py.newInstance();if(x.setOpenGLRenderWindow(t._openGLRenderWindow),g){for(var w=new Float32Array(3*y),A=0;A<d;A++){var C=u.getRGBTransferFunction(A),S=C.getRange();if(C.getTable(S[0],S[1],y,w,1),c)for(var _=0;_<3*y;_++)b[A*y*6+_]=255*w[_],b[A*y*6+_+3*y]=255*w[_];else for(var T=0;T<3*y;T++)b[A*y*3+T]=255*w[T]}x.resetFormatAndType(),x.create2DFromRaw({width:y,height:f,numComps:3,dataType:eI.UNSIGNED_CHAR,data:b})}else{for(var O=0;O<3*y;++O)for(var P=255*O/(3*(y-1)),M=0;M<f;++M)b[M*y*3+O+0]=P,b[M*y*3+O+1]=P,b[M*y*3+O+2]=P;x.resetFormatAndType(),x.create2DFromRaw({width:y,height:1,numComps:3,dataType:eI.UNSIGNED_CHAR,data:b})}g&&t._openGLRenderWindow.setGraphicsResourceForObject(g,x,m),t.colorTexture=x}a(t._openGLRenderWindow,t._colorTextureCore,g),t._colorTextureCore=g;for(var E=[],D=0;D<d;++D)E.push(u.getPiecewiseFunction(D));var I=kN(E,c,d),k=u.getPiecewiseFunction(),N=t._openGLRenderWindow.getGraphicsResourceForObject(k);if(null!=N&&null!=(o=N.oglObject)&&o.getHandle()&&(null==N?void 0:N.hash)===I)t.pwfTexture=N.oglObject;else{var R=t.renderable.getOpacityTextureWidth();R<=0&&(R=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));var B=R*f,L=new Uint8ClampedArray(B),F=Py.newInstance();if(F.setOpenGLRenderWindow(t._openGLRenderWindow),k){for(var V=new Float32Array(B),j=new Float32Array(R),G=0;G<d;++G){var U=u.getPiecewiseFunction(G);if(null===U)V.fill(1);else{var z=U.getRange();if(U.getTable(z[0],z[1],R,j,1),c)for(var W=0;W<R;W++)V[G*R*2+W]=j[W],V[G*R*2+W+R]=j[W];else for(var H=0;H<R;H++)V[H]=j[H]}}F.resetFormatAndType(),F.create2DFromRaw({width:R,height:f,numComps:1,dataType:eI.FLOAT,data:V})}else L.fill(255),F.resetFormatAndType(),F.create2DFromRaw({width:R,height:f,numComps:1,dataType:eI.UNSIGNED_CHAR,data:L});k&&t._openGLRenderWindow.setGraphicsResourceForObject(k,F,I),t.pwfTexture=F}a(t._openGLRenderWindow,t._pwfTextureCore,k),t._pwfTextureCore=k;var q="".concat(t.resliceGeom.getMTime(),"A").concat(t.renderable.getSlabThickness());if(!t.tris.getCABO().getElementCount()||t.VBOBuildString!==q){var K=nH.newInstance({numberOfComponents:3,values:t.resliceGeom.getPoints().getData()});K.setName("points");var X=nH.newInstance({numberOfComponents:1,values:t.resliceGeom.getPolys().getData()}),Y={points:K,cellOffset:0};if(t.renderable.getSlabThickness()>0){var J=t.resliceGeom.getPointData().getNormals();J?Y.normals=J:Z("Slab mode requested without normals")}t.tris.getCABO().createVBO(X,"polys",mk.SURFACE,Y)}t.VBOBuildString=q,t.VBOBuildTime.modified()},e.updateShaders=function(n,i,o){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,i,o)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,i,o);var s=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,i,o),e.setCameraShaderParameters(n,i,o),e.setPropertyShaderParameters(n,i,o)},e.setMapperShaderParameters=function(n,i,o){var a=n.getProgram(),s=t.currentValidInputs[0].imageData;if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){t.scalarTextures.forEach(function(e,t){a.setUniformi("volumeTexture[".concat(t,"]"),e.getTextureUnit())}),a.isAttributeUsed("vertexWC")&&(n.getVAO().addAttributeArray(a,n.getCABO(),"vertexWC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting vertexWC in shader VAO.")),a.isAttributeUsed("normalWC")&&(n.getVAO().addAttributeArray(a,n.getCABO(),"normalWC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting normalWC in shader VAO.")),a.isUniformUsed("slabThickness")&&a.setUniformf("slabThickness",t.renderable.getSlabThickness()),a.isUniformUsed("spacing")&&a.setUniform3fv("spacing",s.getSpacing()),a.isUniformUsed("slabType")&&a.setUniformi("slabType",t.renderable.getSlabType()),a.isUniformUsed("slabType")&&a.setUniformi("slabType",t.renderable.getSlabType()),a.isUniformUsed("slabTrapezoid")&&a.setUniformi("slabTrapezoid",t.renderable.getSlabTrapezoidIntegration());var l,u=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null;if(a.isUniformUsed("WCTCMatrix")){var c=s.getDimensions();ol(t.tmpMat4,s.getIndexToWorld()),ov(t.tmpMat4,t.tmpMat4,[-.5,-.5,-.5]),oy(t.tmpMat4,t.tmpMat4,c),op(t.tmpMat4,t.tmpMat4),u&&og(t.tmpMat4,t.tmpMat4,u),a.setUniformMatrix("WCTCMatrix",t.tmpMat4)}a.isUniformUsed("vboScaling")&&a.setUniform3fv("vboScaling",null!=(l=n.getCABO().getCoordScale())?l:[1,1,1]),n.getAttributeUpdateTime().modified()}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",+!!t.renderDepth),n.getProgram().isUniformUsed("coffset")){var d=e.getCoincidentParameters(i,o);n.getProgram().setUniformf("coffset",d.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",d.factor)}},e.setCameraShaderParameters=function(e,n,o){var a=t._openGLCamera.getKeyMatrices(n),s=t._openGLImageSlice.getKeyMatrices(),l=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,u=e.getProgram();u.isUniformUsed("MCPCMatrix")&&(od(t.tmpMat4),u.setUniformMatrix("MCPCMatrix",Na([a.wcpc,s.mcwc,l],i,t.tmpMat4))),u.isUniformUsed("MCVCMatrix")&&(od(t.tmpMat4),u.setUniformMatrix("MCVCMatrix",Na([a.wcvc,s.mcwc,l],i,t.tmpMat4)))},e.setPropertyShaderParameters=function(e,n,i){var o=e.getProgram(),a=i.getProperty(t.currentValidInputs[0].inputIndex),s=a.getOpacity();o.setUniformf("opacity",s);var l=t.numberOfComponents,u=a.getIndependentComponents();if(u)for(var c=0;c<l;++c)o.setUniformf("mix".concat(c),a.getComponentWeight(c));for(var d=0;d<l;d++){var f=t.multiTexturePerVolumeEnabled,p=f?d:0,h=f?0:d,m=t.scalarTextures[p].getVolumeInfo(),g=m.scale[h],v=m.offset[h],y=u?d:0,b=a.getColorWindow(),x=a.getColorLevel(),w=a.getRGBTransferFunction(y);if(w&&a.getUseLookupTableScalarRange()){var A=w.getRange();b=A[1]-A[0],x=.5*(A[1]+A[0])}var C=g/b,S=(v-x)/b+.5;o.setUniformf("cshift".concat(d),S),o.setUniformf("cscale".concat(d),C);var _=1,T=0,O=a.getPiecewiseFunction(y);if(O){var P=O.getRange(),M=P[1]-P[0];_=g/M,T=(v-.5*(P[0]+P[1]))/M+.5}o.setUniformf("pwfshift".concat(d),T),o.setUniformf("pwfscale".concat(d),_)}var E=t.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",E);var D=t.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",D),o.setUniform4fv("backgroundColor",t.renderable.getBackgroundColor())},e.getNeedToRebuildShaders=function(e,n,i){var o,a=i.getProperty(t.currentValidInputs[0].inputIndex).getIndependentComponents(),s=t.renderable.getSlabThickness(),l=t.renderable.getSlabType(),u=t.renderable.getSlabTrapezoidIntegration(),c=!1;return(!t.currentRenderPass&&t.lastRenderPassShaderReplacement||t.currentRenderPass&&t.currentRenderPass.getShaderReplacement()!==t.lastRenderPassShaderReplacement)&&(c=!0),!(!c&&t.lastHaveSeenDepthRequest===t.haveSeenDepthRequest&&t.lastNumberOfComponents===t.numberOfComponents&&t.lastMultiTexturePerVolumeEnabled===t.multiTexturePerVolumeEnabled&&0!==(null==(o=e.getProgram())?void 0:o.getHandle())&&t.lastIndependentComponents===a&&t.lastSlabThickness===s&&t.lastSlabType===l&&t.lastSlabTrapezoidIntegration===u)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastNumberOfComponents=t.numberOfComponents,t.lastMultiTexturePerVolumeEnabled=t.multiTexturePerVolumeEnabled,t.lastIndependentComponents=a,t.lastSlabThickness=s,t.lastSlabType=l,t.lastSlabTrapezoidIntegration=u,!0)},e.getShaderTemplate=function(e,t,n){e.Vertex=Nr(),e.Fragment=No(),e.Geometry=""},e.replaceShaderValues=function(n,i,o){if(e.replaceShaderTCoord(n,i,o),e.replaceShaderPositionVC(n,i,o),t.haveSeenDepthRequest){var a=n.Fragment;a=Pq.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,n.Fragment=a=Pq.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result}e.replaceShaderCoincidentOffset(n,i,o)},e.replaceShaderTCoord=function(e,n,i){var o=e.Vertex,a=e.Geometry,s=e.Fragment,l=t.renderable.getSlabThickness();o=Pq.substitute(o,"//VTK::TCoord::Dec",["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"]).result,o=Pq.substitute(o,"//VTK::TCoord::Impl",["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"]).result;var u=t.numberOfComponents,c=i.getProperty(t.currentValidInputs[0].inputIndex).getIndependentComponents(),d=["in vec3 fragTexCoord;","uniform highp sampler3D volumeTexture[".concat(t.scalarTextures.length,"];"),"uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(d.push("vec4 rawSampleTexture(vec3 pos) {"),t.multiTexturePerVolumeEnabled){d.push("vec4 rawSample;");for(var f=0;f<t.scalarTextures.length;++f)d.push("rawSample[".concat(f,"] = texture(volumeTexture[").concat(f,"], pos)[0];"));d.push("return rawSample;","}")}else d.push("return texture(volumeTexture[0], pos);","}");if(c){for(var p=1;p<u;p++)d=d.concat(["uniform float cshift".concat(p,";"),"uniform float cscale".concat(p,";"),"uniform float pwfshift".concat(p,";"),"uniform float pwfscale".concat(p,";")]);switch(u){case 1:d=d.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:d=d.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Z("Unsupported number of independent coordinates.")}}l>0&&(d=(d=d.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"])).concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),s=Pq.substitute(s,"//VTK::TCoord::Dec",d).result;var h=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = rawSampleTexture(fragTexCoord);"];if(l>0&&(h=h.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = rawSampleTexture(fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = rawSampleTexture(fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),c){for(var m=["r","g","b","a"],g=0;g<u;++g)h=h.concat(["vec3 tcolor".concat(g," = texture2D(colorTexture1, vec2(tvalue.").concat(m[g]," * cscale").concat(g," + cshift").concat(g,", height").concat(g,")).rgb;"),"float compWeight".concat(g," = mix").concat(g," * texture2D(pwfTexture1, vec2(tvalue.").concat(m[g]," * pwfscale").concat(g," + pwfshift").concat(g,", height").concat(g,")).r;")]);switch(u){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Z("Unsupported number of independent coordinates.")}}else switch(u){case 1:h=h.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:h=h.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}s=Pq.substitute(s,"//VTK::TCoord::Impl",h).result,e.Vertex=o,e.Fragment=s,e.Geometry=a},e.replaceShaderPositionVC=function(n,i,o){var a=n.Vertex,s=n.Geometry,l=n.Fragment,u=t.renderable.getSlabThickness(),c=["attribute vec4 vertexWC;"];c=c.concat(["//".concat(e.getMTime()).concat(t.resliceGeomUpdateString)]),u>0&&(c=c.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),a=Pq.substitute(a,"//VTK::PositionVC::Dec",c).result;var d=["gl_Position = MCPCMatrix * vertexWC;"];u>0&&(d=d.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),a=Pq.substitute(a,"//VTK::PositionVC::Impl",d).result,a=Pq.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;var f=[];u>0&&(f=f.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),l=Pq.substitute(l,"//VTK::PositionVC::Dec",f).result,n.Vertex=a,n.Geometry=s,n.Fragment=l},e.updateResliceGeometry=function(){var e,n="",i=t.currentValidInputs[0].imageData,a=null==i?void 0:i.getBounds(),s=!0,l=2,u=t.renderable.getSlicePolyData(),c=t.renderable.getSlicePlane();if(u)n=n.concat("PolyData".concat(u.getMTime()));else if(c){n=n.concat("Plane".concat(c.getMTime()));var d=o3();i&&(n=n.concat("Image".concat(i.getMTime())),o9.apply(o,[d].concat(m(i.getDirection()))),at(d,d));var f=m(c.getNormal());rP(f,f,d);var p=b(function(e){nR.normalize(e);for(var t=[0,0,0],n=0;n<3;++n){rN(t),t[n]=1;var i=nR.dot(e,t);if(i<-.999999||i>.999999)return[!0,n]}return[!1,2]}(f),2);s=p[0],l=p[1]}else{var h=r8.newInstance();h.setNormal(0,0,1);var g=[0,1,0,1,0,1];i&&(g=a),h.setOrigin(g[0],g[2],.5*(g[5]+g[4])),t.renderable.setSlicePlane(h),n=n.concat("Plane".concat(null==c?void 0:c.getMTime())),i&&(n=n.concat("Image".concat(i.getMTime())))}if(!t.resliceGeom||t.resliceGeomUpdateString!==n){if(u)t.resliceGeom||(t.resliceGeom=lC.newInstance()),t.resliceGeom.getPoints().setData(u.getPoints().getData(),3),t.resliceGeom.getPolys().setData(u.getPolys().getData(),1),t.resliceGeom.getPointData().setNormals(u.getPointData().getNormals());else if(c)if(s){for(var v=new Float32Array(12),y=i.worldToIndex(c.getOrigin(),[0,0,0]),x=[(l+1)%3,(l+2)%3].sort(),w=i.getSpatialExtent(),A=0,C=0;C<2;++C)for(var S=0;S<2;++S)v[A+l]=y[l],v[A+x[0]]=w[2*x[0]+S],v[A+x[1]]=w[2*x[1]+C],A+=3;t.transform.setMatrix(i.getIndexToWorld()),t.transform.transformPoints(v,v);var _=new Uint16Array(8);_[0]=3,_[1]=0,_[2]=1,_[3]=3,_[4]=3,_[5]=0,_[6]=3,_[7]=2;var T=c.getNormal();nR.normalize(T);for(var O=new Float32Array(12),P=0;P<4;++P)O[3*P]=T[0],O[3*P+1]=T[1],O[3*P+2]=T[2];t.resliceGeom||(t.resliceGeom=lC.newInstance()),t.resliceGeom.getPoints().setData(v,3),t.resliceGeom.getPolys().setData(_,1);var M=nH.newInstance({numberOfComponents:3,values:O,name:"Normals"});t.resliceGeom.getPointData().setNormals(M)}else{t.outlineFilter.setInputData(i),t.cutter.setInputConnection(t.outlineFilter.getOutputPort()),t.cutter.setCutFunction(c),t.lineToSurfaceFilter.setInputConnection(t.cutter.getOutputPort()),t.lineToSurfaceFilter.update(),t.resliceGeom||(t.resliceGeom=lC.newInstance());var E=t.lineToSurfaceFilter.getOutputData();t.resliceGeom.getPoints().setData(E.getPoints().getData(),3),t.resliceGeom.getPolys().setData(E.getPolys().getData(),1),t.resliceGeom.getPointData().setNormals(E.getPointData().getNormals());var D=c.getNormal(),I=t.resliceGeom.getNumberOfPoints();nR.normalize(D);for(var k=new Float32Array(3*I),N=0;N<I;++N)k[3*N]=D[0],k[3*N+1]=D[1],k[3*N+2]=D[2];var R=nH.newInstance({numberOfComponents:3,values:k,name:"Normals"});t.resliceGeom.getPointData().setNormals(R)}else Z("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");t.resliceGeomUpdateString=n,null==(e=t.resliceGeom)||e.modified()}},e.setScalarTextures=function(e){t.scalarTextures=m(e),t._externalOpenGLTexture=!0},e.delete=eA(function(){t._openGLRenderWindow&&s(t._openGLRenderWindow)},e.delete)}(e,t)}var Nu=ew(Nl,"vtkOpenGLImageResliceMapper");Po.vtkImageResliceMapper=Nu;var Nc={};Po.vtkScalarBarActor=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nc,n),Pt.extend(e,t,n),t.scalarBarActorHelper=OT.newScalarBarActorHelper(),t.classHierarchy.push("vtkOpenGLScalarBarActor"),e.buildPass=function(n){n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,n){if(e){var i=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,o=t._openGLRenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([o.usize,o.vsize],i,t._openGLRenderWindow.getRenderable())}}},"vtkOpenGLScalarBarActor");var Nd={context:null};function Nf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nd,n),Pt.extend(e,t,n),t.openGLTexture=Py.newInstance(),t.tris=P$.newInstance(),t.keyMatrixTime={},es(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:o7(new Float64Array(9)),mcwc:od(new Float64Array(16))},ep(e,t,["context"]),eu(e,t,["activeTextures"]),t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=function(n){if(n){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow);var i=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(i.getActiveCamera(),t.openGLCamera)}},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&n.incrementOpaqueActorCount()},e.opaquePass=function(n,i){if(n&&!t._openGLRenderer.getSelector()){e.updateBufferObjects(),t.context.depthMask(!0),t._openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t._openGLRenderWindow);var o=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",o);var a=t._openGLRenderer.getRenderable(),s=t.openGLCamera.getKeyMatrices(a),l=new Float64Array(16);if(op(l,s.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",l),"box"===t.lastFormat){var u=a.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",u[0],u[1],u[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=function(){if(!t.tris.getCABO().getElementCount()){for(var e=new Float32Array(12),n=0;n<4;n++)e[3*n]=n%2*2-1,e[3*n+1]=n>1?1:-1,e[3*n+2]=1;var i=nH.newInstance({numberOfComponents:3,values:e});i.setName("points");var o=new Uint16Array(8);o[0]=3,o[1]=0,o[2]=1,o[3]=3,o[4]=3,o[5]=0,o[6]=3,o[7]=2;var a=nH.newInstance({numberOfComponents:1,values:o});t.tris.getCABO().createVBO(a,"polys",mk.SURFACE,{points:i,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting vertexMC in shader VAO."));var s=t.renderable.getTextures();s.length||Z("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==s[0]&&(t.openGLTexture.releaseGraphicsResources(t._openGLRenderWindow),t.openGLTexture.setRenderable(s[0]))}}var Np=ew(Nf);Po.vtkSkybox=Np;var Nh=n(7239),Nm=n.n(Nh);function Ng(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Nv={};function Ny(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nv,i),kS.extend(e,t,i),t.classHierarchy.push("vtkOpenGLSphereMapper"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ng(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ng(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getShaderTemplate=function(e,t,n){e.Vertex=Nm(),e.Fragment=ka(),e.Geometry=""},e.replaceShaderValues=function(e,i,o){var a=e.Vertex,s=e.Fragment;a=Pq.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,s=Pq.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=Pq.substitute(s,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result,s=Pq.substitute(s,"//VTK::Normal::Dec",["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var l="";t.context.getExtension("EXT_frag_depth")&&(l="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t._openGLRenderWindow.getWebgl2()&&(l="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),s=Pq.substitute(s,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",l]).result,s=Pq.substitute(s,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(s=Pq.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=s,n.replaceShaderValues(e,i,o)},e.setMapperShaderParameters=function(e,i,o){if(e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),t.context.FLOAT,2,!1)||Z("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",t.invert?-1:1),e.getProgram().isUniformUsed("scaleFactor")){var a=t.currentInput.getPointData();null!=t.renderable.getScaleArray()&&a.hasArray(t.renderable.getScaleArray())?e.getProgram().setUniformf("scaleFactor",t.renderable.getScaleFactor()):e.getProgram().setUniformf("scaleFactor",1)}n.setMapperShaderParameters(e,i,o)},e.setCameraShaderParameters=function(e,n,i){var o=e.getProgram(),a=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrices(n);o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",s.vcpc);var l=new Float64Array(16);if(o.isUniformUsed("MCVCMatrix"))if(i.getIsIdentity())ol(l,s.wcvc),e.getCABO().getCoordShiftAndScaleEnabled()&&og(l,l,e.getCABO().getInverseShiftAndScaleMatrix()),o.setUniformMatrix("MCVCMatrix",l);else{var u=t.openGLActor.getKeyMatrices();og(l,s.wcvc,u.mcwc),e.getCABO().getCoordShiftAndScaleEnabled()&&og(l,l,e.getCABO().getInverseShiftAndScaleMatrix()),o.setUniformMatrix("MCVCMatrix",l)}o.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var i=t.currentInput;if(null!==i){t.renderable.mapScalars(i,1);var o=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),s=i.getPointData(),l=i.getPoints(),u=l.getNumberOfPoints(),c=l.getData(),d=null;null!=t.renderable.getScaleArray()&&s.hasArray(t.renderable.getScaleArray())&&(d=s.getArray(t.renderable.getScaleArray()).getData());var f=null,p=0,h=null;o?(p=o.getNumberOfComponents(),a.setColorOffset(0),a.setColorBOStride(4),f=o.getData(),h=new Uint8Array(3*u*4),a.getColorBO()||a.setColorBO(PI.newInstance()),a.getColorBO().setOpenGLRenderWindow(t._openGLRenderWindow)):a.getColorBO()&&a.setColorBO(null),a.setColorComponents(p);var m=new Float32Array(5*u*3);a.setStride(20);var g=Math.cos(eK(30)),v=0,y=0,b=Pk(l),x=b.useShiftAndScale,w=b.coordShift,A=b.coordScale;x&&a.setCoordShiftAndScale(w,A);for(var C=0,S=0,_=0;_<u;++_){var T=t.renderable.getRadius();d&&(T=d[_]),v=3*_;var O=(c[v++]-w[0])*A[0],P=(c[v++]-w[1])*A[1],M=(c[v++]-w[2])*A[2];m[C++]=O,m[C++]=P,m[C++]=M,m[C++]=-2*T*g,m[C++]=-T,f&&(y=_*p,h[S++]=f[y],h[S++]=f[y+1],h[S++]=f[y+2],h[S++]=f[y+3]),m[C++]=O,m[C++]=P,m[C++]=M,m[C++]=2*T*g,m[C++]=-T,f&&(h[S++]=f[y],h[S++]=f[y+1],h[S++]=f[y+2],h[S++]=f[y+3]),m[C++]=O,m[C++]=P,m[C++]=M,m[C++]=0,m[C++]=2*T,f&&(h[S++]=f[y],h[S++]=f[y+1],h[S++]=f[y+2],h[S++]=f[y+3])}a.setElementCount(C/5),a.upload(m,P_.ARRAY_BUFFER),o&&a.getColorBO().upload(h,P_.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var Nb=ew(Ny,"vtkOpenGLSphereMapper");Po.vtkSphereMapper=Nb;var Nx=n(5826),Nw=n.n(Nx);function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var NC={};function NS(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NC,i),kS.extend(e,t,i),t.classHierarchy.push("vtkOpenGLStickMapper"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NA(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.getShaderTemplate=function(e,t,n){e.Vertex=Nw(),e.Fragment=ka(),e.Geometry=""},e.replaceShaderValues=function(e,i,o){var a=e.Vertex,s=e.Fragment;a=Pq.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,s=Pq.substitute(s,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,s=Pq.substitute(s,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result,s=Pq.substitute(s,"//VTK::Normal::Dec",["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var l="";t.context.getExtension("EXT_frag_depth")&&(l="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t._openGLRenderWindow.getWebgl2()&&(l="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),s=Pq.substitute(s,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",l]).result,s=Pq.substitute(s,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(s=Pq.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=s,n.replaceShaderValues(e,i,o)},e.setMapperShaderParameters=function(e,i,o){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),t.context.FLOAT,3,!1)||Z("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,3,!0)||Z("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),t.context.FLOAT,1,!1)||Z("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(e,i,o)},e.setCameraShaderParameters=function(e,n,i){var o=e.getProgram(),a=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrices(n);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",s.vcpc),i.getIsIdentity())o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",s.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",s.normalMatrix);else{var l=t.openGLActor.getKeyMatrices();if(o.isUniformUsed("MCVCMatrix")){var u=new Float64Array(16);og(u,s.wcvc,l.mcwc),o.setUniformMatrix("MCVCMatrix",u)}if(o.isUniformUsed("normalMatrix")){var c=new Float64Array(9);ai(c,s.normalMatrix,l.normalMatrix),o.setUniformMatrix3x3("normalMatrix",c)}}o.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var i=t.currentInput;if(null!==i){t.renderable.mapScalars(i,1);var o=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),s=i.getPointData(),l=i.getPoints(),u=l.getNumberOfPoints(),c=l.getData(),d=null,f=0;a.setColorBOStride(4),a.getColorBO()||a.setColorBO(PI.newInstance()),a.getColorBO().setOpenGLRenderWindow(t._openGLRenderWindow),o&&(f=o.getNumberOfComponents(),a.setColorOffset(4),d=o.getData(),a.setColorBOStride(8)),a.setColorComponents(f),a.setStride(28);var p=new Float32Array(7*u*12),h=new Uint8Array(12*u*(d?8:4)),m=null,g=null;null!=t.renderable.getScaleArray()&&s.hasArray(t.renderable.getScaleArray())&&(m=s.getArray(t.renderable.getScaleArray()).getData()),null!=t.renderable.getOrientationArray()&&s.hasArray(t.renderable.getOrientationArray())?g=s.getArray(t.renderable.getOrientationArray()).getData():Z(["Error setting orientationArray.\n","You have to specify the stick orientation"]);for(var v=[0,1,3,0,3,2,2,3,5,2,5,4],y=0,b=0,x=0,w=0,A=0;A<u;++A){var C=t.renderable.getLength(),S=t.renderable.getRadius();m&&(C=m[2*A],S=m[2*A+1]);for(var _=0;_<v.length;++_)y=3*A,p[x++]=c[y++],p[x++]=c[y++],p[x++]=c[y++],y=3*A,p[x++]=g[y++]*C,p[x++]=g[y++]*C,p[x++]=g[y++]*C,p[x++]=S,h[w++]=v[_]%2*255,h[w++]=255*(v[_]>=4),h[w++]=255*(v[_]>=2),h[w++]=255,b=A*f,d&&(h[w++]=d[b],h[w++]=d[b+1],h[w++]=d[b+2],h[w++]=d[b+3])}a.setElementCount(x/7),a.upload(p,P_.ARRAY_BUFFER),a.getColorBO().upload(h,P_.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var N_=ew(NS,"vtkOpenGLStickMapper");Po.vtkStickMapper=N_;var NT={};function NO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NT,n),Pt.extend(e,t,n),t.keyMatrixTime={},es(t.keyMatrixTime,{mtime:0}),t.normalMatrix=new Float64Array(9),t.MCWCMatrix=new Float64Array(16),ep(e,t,["context"]),t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&n.incrementVolumeCount()},e.traverseVolumePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=function(e){t.renderable&&t.renderable.getVisibility()&&t.context.depthMask(!e)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),ol(t.MCWCMatrix,t.renderable.getMatrix()),of(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?o7(t.normalMatrix):(o4(t.normalMatrix,t.MCWCMatrix),at(t.normalMatrix,t.normalMatrix),ae(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}var NP=ew(NO,"vtkOpenGLVolume");Po.vtkVolume=NP;var NM=n(169),NE=n.n(NM),ND=n(5513),NI=n.n(ND),Nk={idxToView:od(new Float64Array(16)),vecISToVCMatrix:o7(new Float64Array(9)),modelToView:od(new Float64Array(16)),projectionToView:od(new Float64Array(16)),projectionToWorld:od(new Float64Array(16))},NN={context:null,VBOBuildTime:null,scalarTextures:[],_scalarTexturesCore:[],opacityTexture:null,_opacityTextureCore:null,colorTexture:null,_colorTextureCore:null,labelOutlineThicknessTexture:null,_labelOutlineThicknessTextureCore:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,fullViewportTime:1,idxToView:null,vecISToVCMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function NR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NN,n),Pt.extend(e,t,n),kl(e,t,n),t.VBOBuildTime={},es(t.VBOBuildTime,{mtime:0}),t.tris=P$.newInstance(),t.jitterTexture=Py.newInstance(),t.jitterTexture.setWrapS(O5.REPEAT),t.jitterTexture.setWrapT(O5.REPEAT),t.framebuffer=Pw.newInstance(),ep(e,t,["context"]),function(e,t){function n(e){return e.getUseLabelOutline()||t.renderable.getBlendMode()===x8.LABELMAP_EDGE_PROJECTION_BLEND}t.classHierarchy.push("vtkOpenGLVolumeMapper");var i=new Map;function o(t,n,o){n!==o&&(function(t,n){var o;if(n){var a=(null!=(o=i.get(n))?o:0)-1;a<=0?(t.unregisterGraphicsResourceUser(n,e),i.delete(n)):i.set(n,a)}}(t,n),function(t,n){var o;if(n){var a=null!=(o=i.get(n))?o:0;i.set(n,a+1),a<=0&&t.registerGraphicsResourceUser(n,e)}}(t,o))}function a(t){m(i.keys()).forEach(function(n){return t.unregisterGraphicsResourceUser(n,e)})}e.buildPass=function(){t.zBufferTexture=null},e.zBufferPass=function(e,n){if(e){var i=n.getZBufferTexture();i!==t.zBufferTexture&&(t.zBufferTexture=i)}},e.opaqueZBufferPass=function(t,n){return e.zBufferPass(t,n)},e.volumePass=function(n,i){if(n){var o=t._openGLRenderWindow;t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==t._openGLRenderWindow&&a(o),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var s=t.openGLVolume.getRenderable();t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var l=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(l.getActiveCamera(),t.openGLCamera),e.renderPiece(l,s)}},e.getShaderTemplate=function(e,t,n){e.Vertex=NE(),e.Fragment=NI(),e.Geometry=""},e.replaceShaderValues=function(e,n,i){var o=e.Fragment;o=Pq.substitute(o,"//VTK::EnabledColorFunctions","#define EnableColorForValueFunctionId".concat(t.previousState.colorForValueFunctionId)).result;var a=[];t.previousState.surfaceLightingEnabled&&a.push("Surface"),t.previousState.volumeLightingEnabled&&a.push("Volume"),o=Pq.substitute(o,"//VTK::EnabledLightings",a.map(function(e){return"#define Enable".concat(e,"Lighting")})).result,t.previousState.multiTexturePerVolumeEnabled&&(o=Pq.substitute(o,"//VTK::EnabledMultiTexturePerVolume","#define EnabledMultiTexturePerVolume").result),t.previousState.useIndependentComponents&&(o=Pq.substitute(o,"//VTK::EnabledIndependentComponents","#define EnabledIndependentComponents").result),t.previousState.gradientOpacityEnabled&&(o=Pq.substitute(o,"//VTK::EnabledGradientOpacity","#define EnabledGradientOpacity").result),o=Pq.substitute(o,"//VTK::vtkProportionalComponents",t.previousState.proportionalComponents.map(function(e){return"#define vtkComponent".concat(e,"Proportional")}).join("\n")).result,o=Pq.substitute(o,"//VTK::vtkForceNearestComponents",t.previousState.forceNearestComponents.map(function(e){return"#define vtkComponent".concat(e,"ForceNearest")}).join("\n")).result,t.previousState.hasZBufferTexture&&(o=Pq.substitute(o,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,o=Pq.substitute(o,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {","zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}\n","zdepth = -zdepth/rayDirVC.z;","dists.y = min(zdepth,dists.y);"]).result),o=Pq.substitute(o,"//VTK::BlendMode","".concat(t.previousState.blendMode)).result,o=Pq.substitute(o,"//VTK::NumberOfLights","".concat(t.previousState.numberOfLights)).result,o=Pq.substitute(o,"//VTK::MaxLaoKernelSize","".concat(t.previousState.maxLaoKernelSize)).result,o=Pq.substitute(o,"//VTK::NumberOfComponents","".concat(t.previousState.numberOfComponents)).result,e.Fragment=o=Pq.substitute(o,"//VTK::MaximumNumberOfSamples","".concat(t.previousState.maximumNumberOfSamples)).result;var s=t.previousState.numberOfClippingPlanes;s>0&&(o=Pq.substitute(o,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,o=Pq.substitute(o,"//VTK::ClipPlane::Impl",["for(int i = 0; i < ".concat(s,"; i++) {"),"  float rayDirRatio = dot(rayDirVC, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result),e.Fragment=o},e.getNeedToRebuildShaders=function(i,o,a){var s,l,u,c=!!t.zBufferTexture,d=t.currentValidInputs.length,f=t.numberOfLights,p=t.numberOfComponents,h=t.useIndependentComponents,m=a.getProperties(),g=t.currentValidInputs[0],v=m[g.inputIndex],y=g.imageData.getBounds(),b=Math.ceil(iG.getDiagonalLength(y)/e.getCurrentSampleDistance(o));b>t.renderable.getMaximumSamplesPerRay()&&J("The number of steps required ".concat(b," is larger than the ")+"specified maximum number of steps ".concat(t.renderable.getMaximumSamplesPerRay(),".\n")+"Please either change the volumeMapper sampleDistance or its maximum number of samples.");for(var x=h?p:1,w=!1,A=0;A<x;++A)if(v.getUseGradientOpacity(A)){w=!0;break}var C=0,_=v.getLAOKernelSize();_>C&&v.getLocalAmbientOcclusion()&&v.getAmbient()>0&&(C=_);for(var T=t.renderable.getClippingPlanes().length,O=null==(s=t.renderable.getViewSpecificProperties().OpenGL)?void 0:s.ShaderReplacements,P=null==(l=t.currentRenderPass)?void 0:l.getShaderReplacement(),M=t.renderable.getBlendMode(),E=function(){if(M!==x8.LABELMAP_EDGE_PROJECTION_BLEND&&n(v))return 5;if(h)switch(v.getColorMixPreset()){case xE.ADDITIVE:return 1;case xE.COLORIZE:return 2;case xE.CUSTOM:return 3;default:return 4}return 0}(),D=1>v.getVolumetricScatteringBlending(),I=v.getVolumetricScatteringBlending()>0,k=!1,N=0;N<p;++N)if(v.getForceNearestInterpolation(N)){k=!0;break}for(var R=[],B=[],L=0;L<p;L++)v.getOpacityMode(L)===xM.PROPORTIONAL&&R.push(L),v.getForceNearestInterpolation(L)&&B.push(L);var F={numberOfComponents:p,useIndependentComponents:h,proportionalComponents:R,forceNearestComponents:B,blendMode:M,numberOfLights:f,numberOfValidInputs:d,maximumNumberOfSamples:b,hasZBufferTexture:c,maxLaoKernelSize:C,numberOfClippingPlanes:T,mapperShaderReplacements:O,renderPassShaderReplacements:P,colorForValueFunctionId:E,surfaceLightingEnabled:D,volumeLightingEnabled:I,forceNearestInterpolationEnabled:k,multiTexturePerVolumeEnabled:d>1,gradientOpacityEnabled:w};return(0===(null==(u=i.getProgram())?void 0:u.getHandle())||!t.previousState||!S()(t.previousState,F))&&(t.previousState=F,!0)},e.updateShaders=function(n,i,o){if(e.getNeedToRebuildShaders(n,i,o)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,i,o);var s=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,i,o),e.setCameraShaderParameters(n,i,o),e.setPropertyShaderParameters(n,i,o),e.getClippingPlaneShaderParameters(n,i,o)},e.setMapperShaderParameters=function(n,i,o){var a=n.getProgram();n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(a.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(a,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified());var s=e.getCurrentSampleDistance(i);a.setUniformf("sampleDistance",s);var l=s*t.renderable.getVolumeShadowSamplingDistFactor();a.setUniformf("volumeShadowSampleDistance",l),t.scalarTextures.forEach(function(e,t){a.setUniformi("volumeTexture[".concat(t,"]"),e.getTextureUnit())});var u=o.getProperties()[t.currentValidInputs[0].inputIndex].getIpScalarRange(),c=new Float32Array(4),d=new Float32Array(4),f=function(e,t,n){var i;null!=t&&null!=(i=t.dataComputedScale)&&i.length&&(c[e]=u[0]*t.dataComputedScale[n]+t.dataComputedOffset[n],d[e]=u[1]*t.dataComputedScale[n]+t.dataComputedOffset[n],c[e]=(c[e]-t.offset[n])/t.scale[n],d[e]=(d[e]-t.offset[n])/t.scale[n])};if(t.previousState.multiTexturePerVolumeEnabled)t.scalarTextures.forEach(function(e,t){f(t,e.getVolumeInfo(),0)});else for(var p=t.scalarTextures[0].getVolumeInfo(),h=0;h<4;++h)f(h,p,h);var m="volume";if(a.setUniform4f("".concat(m,".ipScalarRangeMin"),c[0],c[1],c[2],c[3]),a.setUniform4f("".concat(m,".ipScalarRangeMax"),d[0],d[1],d[2],d[3]),null!==t.zBufferTexture){a.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());var g=t._useSmallViewport?[t._smallViewportWidth,t._smallViewportHeight]:t._openGLRenderWindow.getFramebufferSize();a.setUniformf("vpZWidth",g[0]),a.setUniformf("vpZHeight",g[1])}},e.setCameraShaderParameters=function(i,o,a){var s=Nk.idxToView,l=Nk.vecISToVCMatrix,u=Nk.modelToView,c=Nk.projectionToView,d=Nk.projectionToWorld,f=t.openGLCamera.getKeyMatrices(o),p=t.openGLVolume.getKeyMatrices();og(u,f.wcvc,p.mcwc);var h=i.getProgram(),g=t.openGLCamera.getRenderable(),v=g.getParallelProjection(),y=g.getClippingRange();h.setUniformf("camThick",y[1]-y[0]),h.setUniformf("camNear",y[0]),h.setUniformf("camFar",y[1]),h.setUniformi("cameraParallel",v);var b=t.currentValidInputs[0],x=b.imageData.getBounds(),w=iG.getCorners(x,[]).map(function(e){return rO(e,e,u),v||rp(e,e,-y[0]/(e[2]*re(e))),rO(e,e,f.vcpc),e}),A=iG.addPoints(m(iG.INIT_BOUNDS),w);h.setUniformf("dcxmin",A[0]),h.setUniformf("dcxmax",A[1]),h.setUniformf("dcymin",A[2]),h.setUniformf("dcymax",A[3]);var C=e.getRenderTargetSize();h.setUniformf("vpWidth",C[0]),h.setUniformf("vpHeight",C[1]);var S=e.getRenderTargetOffset();h.setUniformf("vpOffsetX",S[0]/C[0]),h.setUniformf("vpOffsetY",S[1]/C[1]),op(c,f.vcpc),h.setUniformMatrix("PCVCMatrix",c),h.setUniformi("twoSidedLighting",o.getTwoSidedLighting());for(var _=Array(2*t.previousState.maxLaoKernelSize),T=0;T<t.previousState.maxLaoKernelSize;T++)_[2*T]=Math.random(),_[2*T+1]=Math.random();if(h.setUniform2fv("kernelSample",_),t.numberOfLights>0){var O=0;o.getLights().forEach(function(e){if(e.getSwitch()>0){var t="lights[".concat(O,"]"),n=rp([],e.getColor(),e.getIntensity());h.setUniform3fv("".concat(t,".color"),n);var i=e.getTransformedPosition();rO(i,i,u),h.setUniform3fv("".concat(t,".positionVC"),i);var o=m(e.getDirection());rP(o,o,f.normalMatrix),rx(o,o),h.setUniform3fv("".concat(t,".directionVC"),o);var a=[-.5*o[0],-.5*o[1],-.5*(o[2]-1)];h.setUniform3fv("".concat(t,".halfAngleVC"),a);var s=e.getAttenuationValues();h.setUniform3fv("".concat(t,".attenuation"),s);var l=e.getExponent();h.setUniformf("".concat(t,".exponent"),l);var c=e.getConeAngle();h.setUniformf("".concat(t,".coneAngle"),c);var d=e.getPositional();h.setUniformi("".concat(t,".isPositional"),d),O++}})}var P="volume",M=a.getProperties()[b.inputIndex],E=b.imageData,D=E.getSpatialExtent(),I=E.getSpacing(),k=E.getDimensions(),N=E.getIndexToWorld(),R=E.getWorldToIndex(),B=E.getDirectionByReference();og(s,u,N),h.setUniform3fv("".concat(P,".spacing"),I);var L=rb([],I);h.setUniform3fv("".concat(P,".inverseSpacing"),L),h.setUniform3iv("".concat(P,".dimensions"),k),h.setUniform3fv("".concat(P,".inverseDimensions"),rb([],k)),h.setUniformMatrix("".concat(P,".worldToIndex"),R),l.fill(0);var F=ra(new Float64Array(3),k,I);l[0]=F[0],l[4]=F[1],l[8]=F[2],ai(l,B,l),ai(l,p.normalMatrix,l),ai(l,f.normalMatrix,l),h.setUniformMatrix3x3("".concat(P,".vecISToVCMatrix"),l),h.setUniformMatrix3x3("".concat(P,".vecVCToISMatrix"),at(new Float32Array(9),l));var V=rt(D[0],D[2],D[4]),j=rO(new Float64Array(3),V,s);h.setUniform3fv("".concat(P,".originVC"),j);var G=re(F);if(h.setUniformf("".concat(P,".diagonalLength"),G),n(M)){var U=g.getDistance();g.setClippingRange(U,U+.1),op(d,t.openGLCamera.getKeyMatrices(o).wcpc),g.setClippingRange(y[0],y[1]),t.openGLCamera.getKeyMatrices(o),h.setUniformMatrix("".concat(P,".PCWCMatrix"),d)}if(M.getVolumetricScatteringBlending()>0&&(h.setUniformf("".concat(P,".globalIlluminationReach"),M.getGlobalIlluminationReach()),h.setUniformf("".concat(P,".volumetricScatteringBlending"),M.getVolumetricScatteringBlending()),h.setUniformf("".concat(P,".anisotropy"),M.getAnisotropy()),h.setUniformf("".concat(P,".anisotropySquared"),Math.pow(M.getAnisotropy(),2))),M.getLocalAmbientOcclusion()&&M.getAmbient()>0){var z=M.getLAOKernelSize();h.setUniformi("".concat(P,".kernelSize"),z);var W=M.getLAOKernelRadius();h.setUniformi("".concat(P,".kernelRadius"),W)}else h.setUniformi("".concat(P,".kernelSize"),0)},e.setPropertyShaderParameters=function(e,n,i){var o=e.getProgram();o.setUniformi("jtexture",t.jitterTexture.getTextureUnit());var a=i.getProperties();o.setUniformi("labelOutlineThicknessTexture",t.labelOutlineThicknessTexture.getTextureUnit()),o.setUniformi("opacityTexture",t.opacityTexture.getTextureUnit()),o.setUniformi("colorTexture",t.colorTexture.getTextureUnit());var s="volume",l=a[t.currentValidInputs[0].inputIndex],u=t.previousState.numberOfComponents,c=t.previousState.useIndependentComponents;if(c){for(var d=new Float32Array(4),f=0;f<u;f++)d[f]=l.getComponentWeight(f);o.setUniform4fv("".concat(s,".independentComponentMix"),d);for(var p=new Float32Array(4),h=1/u,m=0;m<u;++m)p[m]=(m+.5)*h;o.setUniform4fv("".concat(s,".transferFunctionsSampleHeight"),p)}var g=t.colorForValueFunctionId;o.setUniformi("".concat(s,".colorForValueFunctionId"),g);var v=l.getComputeNormalFromOpacity();o.setUniformi("".concat(s,".computeNormalFromOpacity"),v);for(var y=new Float32Array(4),b=new Float32Array(4),x=new Float32Array(4),w=new Float32Array(4),A=0;A<u;A++){var C=t.previousState.multiTexturePerVolumeEnabled,S=C?A:0,_=C?0:A,T=t.scalarTextures[S].getVolumeInfo(),O=c?A:0,P=T.scale[_],M=l.getRGBTransferFunction(O).getRange();y[A]=P/(M[1]-M[0]),b[A]=(T.offset[_]-M[0])/(M[1]-M[0]);var E=l.getScalarOpacity(O).getRange();x[A]=P/(E[1]-E[0]),w[A]=(T.offset[_]-E[0])/(E[1]-E[0])}if(o.setUniform4fv("".concat(s,".colorTextureScale"),y),o.setUniform4fv("".concat(s,".colorTextureShift"),b),o.setUniform4fv("".concat(s,".opacityTextureScale"),x),o.setUniform4fv("".concat(s,".opacityTextureShift"),w),t.previousState.gradientOpacityEnabled){var D=[,,,,],I=[,,,,],k=[,,,,],N=[,,,,];if(c)for(var R=0;R<u;++R){var B=t.previousState.multiTexturePerVolumeEnabled,L=B?R:0,F=B?0:R,V=t.scalarTextures[L].getVolumeInfo().scale[F];if(l.getUseGradientOpacity(R)){var j=[l.getGradientOpacityMinimumOpacity(R),l.getGradientOpacityMaximumOpacity(R)],G=[l.getGradientOpacityMinimumValue(R),l.getGradientOpacityMaximumValue(R)];k[R]=j[0],N[R]=j[1],D[R]=V*(j[1]-j[0])/(G[1]-G[0]),I[R]=-G[0]*(j[1]-j[0])/(G[1]-G[0])+j[0]}else k[R]=1,N[R]=1,D[R]=0,I[R]=1}else{var U=u-1,z=t.previousState.multiTexturePerVolumeEnabled,W=t.scalarTextures[z?U:0].getVolumeInfo().scale[z?0:U],H=[l.getGradientOpacityMinimumOpacity(0),l.getGradientOpacityMaximumOpacity(0)],q=[l.getGradientOpacityMinimumValue(0),l.getGradientOpacityMaximumValue(0)];k[0]=H[0],N[0]=H[1],D[0]=W*(H[1]-H[0])/(q[1]-q[0]),I[0]=-q[0]*(H[1]-H[0])/(q[1]-q[0])+H[0]}o.setUniform4f("".concat(s,".gradientOpacityScale"),D),o.setUniform4f("".concat(s,".gradientOpacityShift"),I),o.setUniform4f("".concat(s,".gradientOpacityMin"),k),o.setUniform4f("".concat(s,".gradientOpacityMax"),N)}var K=l.getLabelOutlineOpacity();if(o.setUniformf("".concat(s,".outlineOpacity"),K),t.numberOfLights>0){o.setUniformf("".concat(s,".ambient"),l.getAmbient()),o.setUniformf("".concat(s,".diffuse"),l.getDiffuse()),o.setUniformf("".concat(s,".specular"),l.getSpecular());var X=l.getSpecularPower();o.setUniformf("".concat(s,".specularPower"),0===X?1:X)}},e.getClippingPlaneShaderParameters=function(e,n,i){if(t.renderable.getClippingPlanes().length>0){for(var o=t.openGLCamera.getKeyMatrices(n),a=[],s=[],l=[],u=t.renderable.getClippingPlanes(),c=u.length,d=0;d<c;++d){var f=u[d].getNormal(),p=u[d].getOrigin();rP(f,f,o.normalMatrix),rO(p,p,o.wcvc);var h=-1*rw(p,f);a.push(f[0]),a.push(f[1]),a.push(f[2]),s.push(h),l.push(p[0]),l.push(p[1]),l.push(p[2])}var m=e.getProgram();m.setUniform3fv("vClipPlaneNormals",a),m.setUniformfv("vClipPlaneDistances",s),m.setUniform3fv("vClipPlaneOrigins",l),m.setUniformi("clip_numPlanes",c)}},e.delete=eA(function(){t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)},function(){t._openGLRenderWindow&&a(t._openGLRenderWindow)},e.delete),e.getRenderTargetSize=function(){if(t._useSmallViewport)return[t._smallViewportWidth,t._smallViewportHeight];var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.usize,e.vsize]},e.getRenderTargetOffset=function(){var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.lowerLeftU,e.lowerLeftV]},e.getCurrentSampleDistance=function(e){var n=e.getVTKWindow().getInteractor(),i=t.renderable.getSampleDistance();return n.isAnimating()?i*t.renderable.getInteractionSampleDistanceFactor():i},e.renderPieceStart=function(n,i){var o=n.getVTKWindow().getInteractor();if(t._lastScale||(t._lastScale=t.renderable.getInitialInteractionScale()),t._useSmallViewport=!1,o.isAnimating()&&t._lastScale>1.5&&(t._useSmallViewport=!0),t._animationRateSubscription||(t._animationRateSubscription=o.onAnimationFrameRateUpdate(function(){if(t.renderable.getAutoAdjustSampleDistances()){var e=o.getRecentAnimationFrameRate(),n=o.getDesiredUpdateRate()/e;(n>1.15||n<.85)&&(t._lastScale*=n),t._lastScale>400&&(t._lastScale=400),t._lastScale<1.5&&(t._lastScale=1.5)}else t._lastScale=t.renderable.getImageSampleDistance()*t.renderable.getImageSampleDistance()})),t._useSmallViewport){var a=t._openGLRenderWindow.getFramebufferSize(),s=1/Math.sqrt(t._lastScale);if(t._smallViewportWidth=Math.ceil(s*a[0]),t._smallViewportHeight=Math.ceil(s*a[1]),t._smallViewportHeight>a[1]&&(t._smallViewportHeight=a[1]),t._smallViewportWidth>a[0]&&(t._smallViewportWidth=a[0]),t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(a[0],a[1]),t.framebuffer.populateFramebuffer();else{var l=t.framebuffer.getSize();l&&l[0]===a[0]&&l[1]===a[1]||(t.framebuffer.create(a[0],a[1]),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();var u=t.context;u.clearColor(0,0,0,0),u.colorMask(!0,!0,!0,!0),u.clear(u.COLOR_BUFFER_BIT),u.viewport(0,0,t._smallViewportWidth,t._smallViewportHeight),t.fvp=[t._smallViewportWidth/a[0],t._smallViewportHeight/a[1]]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,i);var c=i.getProperties();t.currentValidInputs.forEach(function(e){var n=e.inputIndex,i=c[n].getInterpolationType(),o=t.scalarTextures[n];i===xP.NEAREST?(o.setMinificationFilter(O6.NEAREST),o.setMagnificationFilter(O6.NEAREST)):(o.setMinificationFilter(O6.LINEAR),o.setMagnificationFilter(O6.LINEAR))}),null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=function(n,i){var o=t.context,a=[].concat(m(t.scalarTextures),[t.colorTexture,t.opacityTexture,t.labelOutlineThicknessTexture,t.jitterTexture]);a.forEach(function(e){return e.activate()}),e.updateShaders(t.tris,n,i),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),a.forEach(function(e){return e.deactivate()})},e.renderPieceFinish=function(e,n){if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t._useSmallViewport){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\nattribute vec4 vertexDC;\nuniform vec2 tfactor;\nvarying vec2 tcoord;\nvoid main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }","//VTK::System::Dec\n//VTK::Output::Dec\nuniform sampler2D texture1;\nvarying vec2 tcoord;\nvoid main() { gl_FragData[0] = texture2D(texture1,tcoord); }","");var i=t.copyShader;t.copyVAO=PY.newInstance(),t.copyVAO.setOpenGLRenderWindow(t._openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(i,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Z("Error setting vertexDC in copy shader VAO.")}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);var o=t._openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,o[0],o[1]);var a=t.framebuffer.getColorTexture();a.activate(),t.copyShader.setUniformi("texture",a.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);var s=t.context;s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),a.deactivate(),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(n,i){e.invokeEvent({type:"StartEvent"}),t.renderable.update();var o=t.renderable.getNumberOfInputPorts();t.currentValidInputs=[];for(var a=0;a<o;++a){var s=t.renderable.getInputData(a);s&&!s.isDeleted()&&t.currentValidInputs.push({imageData:s,inputIndex:a})}var l,u,c,d=0;if(t.currentValidInputs.length>0){var f=i.getProperties(),p=t.currentValidInputs[0],h=p.imageData.getPointData().getScalars(),m=f[p.inputIndex];m.getShade()&&t.renderable.getBlendMode()===x8.COMPOSITE_BLEND&&n.getLights().forEach(function(e){e.getSwitch()>0&&d++});var g=t.currentValidInputs.length;t.numberOfComponents=g>1?g:h.getNumberOfComponents(),l=t.numberOfComponents,u=m.getIndependentComponents(),c=m.getColorMixPreset(),t.useIndependentComponents=u&&l>=2||!!c}d!==t.numberOfLights&&(t.numberOfLights=d,e.modified()),e.invokeEvent({type:"EndEvent"}),0!==t.currentValidInputs.length&&(e.renderPieceStart(n,i),e.renderPieceDraw(n,i),e.renderPieceFinish(n,i))},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,i){var o,a,s,l,u;return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<i.getMTime()||t.VBOBuildTime.getMTime()<(null==(o=i.getProperty(t.currentValidInputs[0].inputIndex))?void 0:o.getMTime())||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.currentValidInputs.some(function(e){var n=e.imageData;return t.VBOBuildTime.getMTime()<n.getMTime()})||t.scalarTextures.length!==t.currentValidInputs.length||!t.scalarTextures.every(function(e){return!(null==e||!e.getHandle())})||!(null!=(a=t.colorTexture)&&a.getHandle())||!(null!=(s=t.opacityTexture)&&s.getHandle())||!(null!=(l=t.labelOutlineThicknessTexture)&&l.getHandle())||!(null!=(u=t.jitterTexture)&&u.getHandle())},e.buildBufferObjects=function(n,i){if(!t.jitterTexture.getHandle()){for(var a,s,l,u=new Float32Array(1024),c=0;c<1024;++c)u[c]=Math.random();t.jitterTexture.setMinificationFilter(O6.NEAREST),t.jitterTexture.setMagnificationFilter(O6.NEAREST),t.jitterTexture.create2DFromRaw({width:32,height:32,numComps:1,dataType:eI.FLOAT,data:u})}for(var d=i.getProperties(),f=t.currentValidInputs[0],p=d[f.inputIndex],h=t.numberOfComponents,m=t.useIndependentComponents,g=m?h:1,v=[],y=0;y<g;++y)v.push(p.getScalarOpacity(y));var b=kN(v,m,g),x=p.getScalarOpacity(),w=t._openGLRenderWindow.getGraphicsResourceForObject(x);if(null!=w&&null!=(a=w.oglObject)&&a.getHandle()&&w.hash===b)t.opacityTexture=w.oglObject;else{var A=Py.newInstance();A.setOpenGLRenderWindow(t._openGLRenderWindow);var C=t.renderable.getOpacityTextureWidth();C<=0&&(C=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));for(var S=2*C*g,_=new Float32Array(S),T=new Float32Array(C),O=0;O<g;++O){var P=p.getScalarOpacity(O),M=e.getCurrentSampleDistance(n)/p.getScalarOpacityUnitDistance(O),E=P.getRange();P.getTable(E[0],E[1],C,T,1);for(var D=0;D<C;++D)_[O*C*2+D]=1-Math.pow(1-T[D],M),_[O*C*2+D+C]=_[O*C*2+D]}if(A.resetFormatAndType(),A.setMinificationFilter(O6.LINEAR),A.setMagnificationFilter(O6.LINEAR),t._openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))A.create2DFromRaw({width:C,height:2*g,numComps:1,dataType:eI.FLOAT,data:_});else{for(var I=new Uint8ClampedArray(S),k=0;k<S;++k)I[k]=255*_[k];A.create2DFromRaw({width:C,height:2*g,numComps:1,dataType:eI.UNSIGNED_CHAR,data:I})}x&&t._openGLRenderWindow.setGraphicsResourceForObject(x,A,b),t.opacityTexture=A}o(t._openGLRenderWindow,t._opacityTextureCore,x),t._opacityTextureCore=x;for(var N=[],R=0;R<g;++R)N.push(p.getRGBTransferFunction(R));var B=kN(N,m,g),L=p.getRGBTransferFunction(),F=t._openGLRenderWindow.getGraphicsResourceForObject(L);if(null!=F&&null!=(s=F.oglObject)&&s.getHandle()&&(null==F?void 0:F.hash)===B)t.colorTexture=F.oglObject;else{var V=Py.newInstance();V.setOpenGLRenderWindow(t._openGLRenderWindow);var j=t.renderable.getColorTextureWidth();j<=0&&(j=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));for(var G=new Uint8ClampedArray(2*j*g*3),U=new Float32Array(3*j),z=0;z<g;++z){var W=p.getRGBTransferFunction(z),H=W.getRange();W.getTable(H[0],H[1],j,U,1);for(var q=0;q<3*j;++q)G[z*j*6+q]=255*U[q],G[z*j*6+q+3*j]=255*U[q]}V.resetFormatAndType(),V.setMinificationFilter(O6.LINEAR),V.setMagnificationFilter(O6.LINEAR),V.create2DFromRaw({width:j,height:2*g,numComps:3,dataType:eI.UNSIGNED_CHAR,data:G}),t._openGLRenderWindow.setGraphicsResourceForObject(L,V,B),t.colorTexture=V}o(t._openGLRenderWindow,t._colorTextureCore,L),t._colorTextureCore=L,t.currentValidInputs.forEach(function(e,n){var i,a=e.imageData,s=d[e.inputIndex],l=a.getPointData().getScalars(),u=t._openGLRenderWindow.getGraphicsResourceForObject(l),c=kR(0,l),f=!(null!=u&&null!=(i=u.oglObject)&&i.getHandle())||(null==u?void 0:u.hash)!==c,p=s.getUpdatedExtents(),h=!!p.length;if(f&&!h){var m=Py.newInstance();m.setOpenGLRenderWindow(t._openGLRenderWindow);var g=a.getDimensions();m.setOglNorm16Ext(t.context.getExtension("EXT_texture_norm16")),m.resetFormatAndType(),m.create3DFilterableFromDataArray({width:g[0],height:g[1],depth:g[2],dataArray:l,preferSizeOverAccuracy:s.getPreferSizeOverAccuracy()}),t._openGLRenderWindow.setGraphicsResourceForObject(l,m,c),t.scalarTextures[n]=m}else t.scalarTextures[n]=u.oglObject;if(h){s.setUpdatedExtents([]);var v=a.getDimensions();t.scalarTextures[n].create3DFilterableFromDataArray({width:v[0],height:v[1],depth:v[2],dataArray:l,updatedExtents:p})}o(t._openGLRenderWindow,t._scalarTexturesCore[n],l),t._scalarTexturesCore[n]=l});var K=p.getLabelOutlineThickness(),X=t._openGLRenderWindow.getGraphicsResourceForObject(K),Y=K.join("-");if(null!=X&&null!=(l=X.oglObject)&&l.getHandle()&&(null==X?void 0:X.hash)===Y)t.labelOutlineThicknessTexture=X.oglObject;else{var Z=Py.newInstance();Z.setOpenGLRenderWindow(t._openGLRenderWindow);var J=t.renderable.getLabelOutlineTextureWidth();J<=0&&(J=t.context.getParameter(t.context.MAX_TEXTURE_SIZE));for(var Q=new Uint8Array(+J),$=0;$<J;++$){var ee=void 0!==K[$]?K[$]:K[0];Q[$]=ee}Z.resetFormatAndType(),Z.setMinificationFilter(O6.NEAREST),Z.setMagnificationFilter(O6.NEAREST),Z.create2DFromRaw({width:J,height:1,numComps:1,dataType:eI.UNSIGNED_CHAR,data:Q}),K&&t._openGLRenderWindow.setGraphicsResourceForObject(K,Z,Y),t.labelOutlineThicknessTexture=Z}if(o(t._openGLRenderWindow,t._labelOutlineThicknessTextureCore,K),t._labelOutlineThicknessTextureCore=K,!t.tris.getCABO().getElementCount()){for(var et=new Float32Array(12),en=0;en<4;en++)et[3*en]=en%2*2-1,et[3*en+1]=en>1?1:-1,et[3*en+2]=-1;var er=new Uint16Array(8);er[0]=3,er[1]=0,er[2]=1,er[3]=3,er[4]=3,er[5]=0,er[6]=3,er[7]=2;var ei=nH.newInstance({numberOfComponents:3,values:et});ei.setName("points");var eo=nH.newInstance({numberOfComponents:1,values:er});t.tris.getCABO().createVBO(eo,"polys",mk.SURFACE,{points:ei,cellOffset:0})}t.VBOBuildTime.modified()}}(e,t)}var NB=ew(NR,"vtkOpenGLVolumeMapper");Po.vtkVolumeMapper=NB;var NL=mP.CoordinateSystem,NF={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};DL.vtkActor=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NF,n),Pt.extend(e,t,n),t.keyMatricesTime={},eE.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},eE.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],t.classHierarchy.push("vtkWebGPUActor"),e.buildPass=function(n){n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount())},e.getBufferShift=function(n){return e.getKeyMatrices(n),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var n=t.renderable.getMatrix();t.bufferShift[0]=n[3],t.bufferShift[1]=n[7],t.bufferShift[2]=n[11];var i=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===NL.WORLD&&(t.bufferShift[0]-=i[0],t.bufferShift[1]-=i[1],t.bufferShift[2]-=i[2]),of(t.keyMatrices.bcwc,n),t.renderable.getIsIdentity()?od(t.keyMatrices.normalMatrix):(ol(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,op(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),of(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),ov(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===NL.WORLD?ov(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]):ol(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}});var NV=mP.CoordinateSystem,Nj={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};DL.vtkActor2D=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nj,n),Pt.extend(e,t,n),t.keyMatricesTime={},eE.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},eE.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],t.classHierarchy.push("vtkWebGPUActor2D"),e.buildPass=function(n){n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount())},e.getBufferShift=function(n){return e.getKeyMatrices(n),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.bufferShift[0]=0,t.bufferShift[1]=0,t.bufferShift[2]=0;var n=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===NV.WORLD&&(t.bufferShift[0]-=n[0],t.bufferShift[1]-=n[1],t.bufferShift[2]-=n[2]),od(t.keyMatrices.bcwc),od(t.keyMatrices.normalMatrix),ov(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===NV.WORLD?ov(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-n[0],-n[1],-n[2]]):ol(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}});var NG={keyMatrixTime:null,keyMatrices:null};DL.vtkCamera=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NG,n),Pt.extend(e,t,n),t.keyMatrixTime={},eE.obj(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},eE.setGet(e,t,["keyMatrixTime"]),t.classHierarchy.push("vtkWebGPUCamera"),e.getProjectionMatrix=function(e,n,i,o){if(od(e),t.renderable.getParallelProjection()){var a=t.renderable.getParallelScale(),s=a*n,l=(o[0]-1)*s,u=(o[0]+1)*s,c=(o[1]-1)*a,d=(o[1]+1)*a,f=1/(u-l),p=1/(d-c);e[0]=2*f,e[5]=2*p,e[10]=1/(i[1]-i[0]),e[12]=(u+l)*f,e[13]=(d+c)*p,e[14]=i[1]/(i[1]-i[0])}else{var h,m,g=Math.tan(Math.PI*t.renderable.getViewAngle()/360);!0===t.renderable.getUseHorizontalViewAngle()?(h=i[0]*g,m=i[0]*g/n):(h=i[0]*g*n,m=i[0]*g);var v=(o[0]-1)*h,y=(o[0]+1)*h,b=(o[1]-1)*m,x=(o[1]+1)*m;e[0]=2*i[0]/(y-v),e[5]=2*i[0]/(x-b),e[12]=(v+y)/(y-v),e[13]=(b+x)/(x-b),e[10]=0,e[14]=i[0],e[11]=-1,e[15]=0}},e.convertToOpenGLDepth=function(e){if(t.renderable.getParallelProjection())return 1-e;var n=t.renderable.getClippingRangeByReference(),i=-n[0]/e;return .5*(i=(n[0]+n[1])/(n[1]-n[0])+2*n[0]*n[1]/(i*(n[1]-n[0])))+.5},e.getKeyMatrices=function(n){var i=n.getRenderable();if(Math.max(n.getParent().getMTime(),e.getMTime(),i.getMTime(),t.renderable.getMTime(),n.getStabilizedTime())>t.keyMatrixTime.getMTime()){var o=t.renderable.getViewMatrix();ol(t.keyMatrices.normalMatrix,o),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,op(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),of(t.keyMatrices.wcvc,o);var a=n.getStabilizedCenterByReference();ov(t.keyMatrices.scvc,t.keyMatrices.wcvc,a);var s=n.getAspectRatio(),l=t.renderable.getClippingRangeByReference();e.getProjectionMatrix(t.keyMatrices.vcpc,s,l,t.renderable.getWindowCenterByReference()),og(t.keyMatrices.scpc,t.keyMatrices.vcpc,t.keyMatrices.scvc),op(t.keyMatrices.pcsc,t.keyMatrices.scpc),t.keyMatrixTime.modified()}return t.keyMatrices}});var NU={};DL.vtkCubeAxesActor=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NU,n),Pt.extend(e,t,n),t.CubeAxesActorHelper=TC.newCubeAxesActorHelper(),t.classHierarchy.push("vtkWebGPUCubeAxesActor"),e.buildPass=function(n){n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,n){if(e){var i=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,o=t.WebGPURenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([o.usize,o.vsize],i,t.WebGPURenderWindow.getRenderable())}}},"vtkWebGPUCubeAxesActor");var Nz=E1.BufferUsage,NW=E1.PrimitiveTypes,NH=mG.Representation,Nq=gd.ScalarMode,NK=mP.CoordinateSystem,NX=SR.DisplayLocation;function NY(e){return e.indexOf("edge")>=0}var NZ={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function NJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NZ,n),Ei.extend(e,t,n),t.fragmentShaderTemplate='\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\nstruct Material {\n  ior: f32,\n  roughness: f32,\n  metallic: f32,\n  base: vec3<f32>,\n};\n\nstruct DirectionalLight {\n  direction: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  position: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct SpotLight {\n  position: vec3<f32>,\n  direction: vec3<f32>,\n  cones: vec2<f32>,\n  color: vec3<f32>,\n};\n\nconst pi: f32 = 3.14159265359;\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1.0) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);\n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);\n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n\n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = light.color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V);\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n\n  var theta: f32 = mdot(normalize(light.direction), L);\n  var epsilon: f32 = light.cones.x - light.cones.y;\n  var intensity: f32 = (theta - light.cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist * dist;\n\n  var incoming: vec3<f32> = light.color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n  var ior: f32 = mapperUBO.BaseIOR;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);\n  var _metallicMap: vec4<f32> = vec4<f32>(1.0);\n  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);\n  var _emissionMap: vec4<f32> = vec4<f32>(0.);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  // Use texture alpha for transparency\n  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n',t.vertexShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t._tmpMat3=o7(new Float64Array(9)),t._tmpMat4=od(new Float64Array(16)),t.UBO=E6.newInstance({label:"mapperUBO"}),t.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),t.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("MCWCNormals","mat4x4<f32>"),t.UBO.addEntry("AmbientColor","vec4<f32>"),t.UBO.addEntry("DiffuseColor","vec4<f32>"),t.UBO.addEntry("EdgeColor","vec4<f32>"),t.UBO.addEntry("SpecularColor","vec4<f32>"),t.UBO.addEntry("AmbientIntensity","f32"),t.UBO.addEntry("DiffuseIntensity","f32"),t.UBO.addEntry("Roughness","f32"),t.UBO.addEntry("Metallic","f32"),t.UBO.addEntry("Ambient","f32"),t.UBO.addEntry("Normal","f32"),t.UBO.addEntry("Emission","f32"),t.UBO.addEntry("NormalStrength","f32"),t.UBO.addEntry("BaseIOR","f32"),t.UBO.addEntry("SpecularIntensity","f32"),t.UBO.addEntry("LineWidth","f32"),t.UBO.addEntry("Opacity","f32"),t.UBO.addEntry("ZValue","f32"),t.UBO.addEntry("PropID","u32"),t.UBO.addEntry("ClipNear","f32"),t.UBO.addEntry("ClipFar","f32"),t.UBO.addEntry("Time","u32"),ep(e,t,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),t.textures=[],t.classHierarchy.push("vtkWebGPUCellArrayMapper"),e.buildPass=function(n){n&&(t.is2D?(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.forceZValue=!0):(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.forceZValue=!1),t.coordinateSystem=t.WebGPUActor.getRenderable().getCoordinateSystem(),t.useRendererMatrix=t.coordinateSystem!==NK.DISPLAY,t.WebGPURenderer=t.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice())},e.translucentPass=function(n){n&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.opaquePass=function(n){n&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.updateUBO=function(){var n,i=t.WebGPUActor.getRenderable().getProperty(),o=t.UBO.getSendTime();if(!(e.getMTime()<=o&&i.getMTime()<=o&&t.renderable.getMTime()<=o)){var a=t.WebGPUActor.getKeyMatrices(t.WebGPURenderer);if(t.UBO.setArray("BCWCMatrix",a.bcwc),t.UBO.setArray("BCSCMatrix",a.bcsc),t.UBO.setArray("MCWCNormals",a.normalMatrix),t.is2D){var s,l,u=null!=(s=null==(l=i.getDisplayLocation)?void 0:l.call(i))?s:NX.BACKGROUND;t.UBO.setValue("ZValue",+(u===NX.FOREGROUND));var c=i.getColorByReference();t.UBO.setValue("AmbientIntensity",1),t.UBO.setArray("DiffuseColor",[].concat(m(c),[1])),t.UBO.setValue("DiffuseIntensity",0),t.UBO.setValue("SpecularIntensity",0)}else t.UBO.setValue("AmbientIntensity",i.getAmbient()),t.UBO.setArray("AmbientColor",[].concat(m(i.getAmbientColorByReference()),[1])),t.UBO.setValue("DiffuseIntensity",i.getDiffuse()),t.UBO.setArray("DiffuseColor",[].concat(m(i.getDiffuseColorByReference()),[1])),t.UBO.setValue("Roughness",i.getRoughness()),t.UBO.setValue("BaseIOR",i.getBaseIOR()),t.UBO.setValue("Metallic",i.getMetallic()),t.UBO.setValue("NormalStrength",i.getNormalStrength()),t.UBO.setValue("Emission",i.getEmission()),t.UBO.setValue("SpecularIntensity",i.getSpecular()),i.getSpecularColorByReference()&&t.UBO.setArray("SpecularColor",[].concat(m(i.getSpecularColorByReference()),[1]));var d=null==(n=i.getEdgeColorByReference)?void 0:n.call(i);d&&t.UBO.setArray("EdgeColor",[].concat(m(d),[1])),t.UBO.setValue("LineWidth",i.getLineWidth()),t.UBO.setValue("Opacity",i.getOpacity()),t.UBO.setValue("PropID",t.WebGPUActor.getPropID()),t.UBO.sendIfNeeded(t.WebGPURenderWindow.getDevice())}},e.haveWideLines=function(){var e=t.WebGPUActor.getRenderable(),n=e.getProperty().getRepresentation();return!(1>=e.getProperty().getLineWidth())&&t.primitiveType!==NW.Verts&&(t.primitiveType!==NW.Triangles&&t.primitiveType!==NW.TriangleStrips||n===NH.WIREFRAME)},e.replaceShaderPosition=function(n,i,o){var a=i.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),a.hasOutput("vertexVC")||a.addOutput("vec4<f32>","vertexVC");var s=a.getCode();t.useRendererMatrix?(s=MH.substitute(s,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,t.forceZValue&&(s=MH.substitute(s,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(s=MH.substitute(s,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,t.forceZValue&&(s=MH.substitute(s,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),e.haveWideLines()&&(a.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),s=MH.substitute(s,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),s=MH.substitute(s,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,a.setCode(s)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderNormal=function(e,n,i){var o=i.getBuffer("normalMC"),a=t.WebGPUActor.getRenderable();if(o){var s=n.getShaderDescription("vertex");s.hasOutput("normalVC")||s.addOutput("vec3<f32>","normalVC",o.getArrayInformation()[0].interpolation),s.hasOutput("tangentVC")||s.addOutput("vec3<f32>","tangentVC",o.getArrayInformation()[0].interpolation),s.hasOutput("bitangentVC")||s.addOutput("vec3<f32>","bitangentVC",o.getArrayInformation()[0].interpolation);var l=s.getCode();l=MH.substitute(l,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,s.setCode(l);var u=n.getShaderDescription("fragment");l=u.getCode(),l=a.getProperty().getNormalTexture()?MH.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:MH.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,u.setCode(l)}},t.shaderReplacements.set("replaceShaderNormal",e.replaceShaderNormal),e.replaceShaderLight=function(e,n,i){if(!e.includes("sel")){var o=n.getShaderDescription("vertex");o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");var a=t.WebGPURenderer.getRenderable(),s=n.getShaderDescription("fragment"),l=s.getCode();if(!l.includes("var normal:")||!t.useRendererMatrix||NY(e)||t.is2D||e.includes("sel"))l=MH.substitute(l,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,s.setCode(l);else{var u,c=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];null!=(u=a.getEnvironmentTexture())&&u.getImageLoaded()&&c.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),l=MH.substitute(l,"//VTK::Light::Impl",c).result,s.setCode(l)}}},t.shaderReplacements.set("replaceShaderLight",e.replaceShaderLight),e.replaceShaderColor=function(e,t,n){if(NY(e)){var i=t.getShaderDescription("fragment"),o=i.getCode();return o=MH.substitute(o,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,void i.setCode(o)}var a=n.getBuffer("colorVI");if(a){var s=t.getShaderDescription("vertex");s.addOutput("vec4<f32>","color",a.getArrayInformation()[0].interpolation);var l=s.getCode();l=MH.substitute(l,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,s.setCode(l);var u=t.getShaderDescription("fragment");l=u.getCode(),l=MH.substitute(l,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,u.setCode(l)}},t.shaderReplacements.set("replaceShaderColor",e.replaceShaderColor),e.replaceShaderTCoord=function(e,n,i){var o,a,s,l,u,c,d,f;if(i.hasAttribute("tcoord")){var p=n.getShaderDescription("vertex"),h=M4(i.getBuffer("tcoord").getArrayInformation()[0].format),m=p.getCode();p.addOutput("vec".concat(h,"<f32>"),"tcoordVS"),m=MH.substitute(m,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,p.setCode(m);var g=n.getShaderDescription("fragment");m=g.getCode();var v=t.WebGPUActor.getRenderable(),y=v.getProperty(),b=function(e){return!!e&&e.getDimensionality()===h},x=[],w=null==(o=y.getDiffuseTexture)?void 0:o.call(y);(null!=w&&w.getImageLoaded()||v.getTextures()[0]||t.colorTexture)&&(b(w)||b(v.getTextures()[0])||b(t.colorTexture))&&x.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");var A=null==(a=y.getORMTexture)?void 0:a.call(y),C=null==(s=y.getRMTexture)?void 0:s.call(y),S=null==(l=y.getRoughnessTexture)?void 0:l.call(y),_=null==(u=y.getMetallicTexture)?void 0:u.call(y),T=null==(c=y.getAmbientOcclusionTexture)?void 0:c.call(y),O=null==(d=y.getEmissionTexture)?void 0:d.call(y),P=null==(f=y.getNormalTexture)?void 0:f.call(y);null!=A&&A.getImageLoaded()?b(A)&&x.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):null!=C&&C.getImageLoaded()?b(C)&&x.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(null!=S&&S.getImageLoaded()&&b(S)&&x.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),null!=_&&_.getImageLoaded()&&b(_)&&x.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),null!=T&&T.getImageLoaded()&&b(T)&&x.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),null!=O&&O.getImageLoaded()&&b(O)&&x.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),null!=P&&P.getImageLoaded()&&b(P)&&x.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),m=MH.substitute(m,"//VTK::TCoord::Impl",x).result,g.setCode(m)}},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderSelect=function(e,t,n){if(e.includes("sel")){var i=t.getShaderDescription("fragment"),o=i.getCode();o=MH.substitute(o,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,i.setCode(o)}},t.shaderReplacements.set("replaceShaderSelect",e.replaceShaderSelect),e.getUsage=function(e,t){return e===NH.POINTS||t===NW.Points?Nz.Verts:t===NW.Lines?Nz.Lines:e===NH.WIREFRAME?t===NW.Triangles?Nz.LinesFromTriangles:Nz.LinesFromStrips:t===NW.Triangles?Nz.Triangles:t===NW.TriangleStrips?Nz.Strips:t===NW.TriangleEdges?Nz.LinesFromTriangles:Nz.LinesFromStrips},e.getHashFromUsage=function(e){return"pt".concat(e)},e.getTopologyFromUsage=function(e){switch(e){case Nz.Triangles:return"triangle-list";case Nz.Verts:return"point-list";case Nz.Lines:default:return"line-list"}},e.buildVertexInput=function(){var n,i,o=t.currentInput,a=t.cellArray,s=t.primitiveType,l=t.WebGPUActor.getRenderable().getProperty().getRepresentation(),u=t.WebGPURenderWindow.getDevice(),c=!1;s===NW.TriangleEdges&&(c=!0,l=NH.WIREFRAME);var d=t.vertexInput,f=o.getPoints(),p=null;if(a?(p=u.getBufferManager().getBuffer({hash:"R".concat(l,"P").concat(s).concat(a.getMTime()),usage:Nz.Index,cells:a,numberOfPoints:f.getNumberOfPoints(),primitiveType:s,representation:l}),d.setIndexBuffer(p)):d.setIndexBuffer(null),f){var h,m,g,v=t.WebGPUActor.getBufferShift(t.WebGPURenderer);d.addBuffer(u.getBufferManager().getBuffer({hash:"".concat(f.getMTime(),"I").concat(null!=(h=null==(m=p)||null==(g=m.getMTime)?void 0:g.call(m))?h:0).concat(v.join(),"float32x4"),usage:Nz.PointArray,format:"float32x4",dataArray:f,indexBuffer:p,shift:v,packExtra:!0}),["vertexBC"])}else d.removeBufferIfPresent("vertexBC");var y=e.getUsage(l,s);if(t._usesCellNormals=!1,t.is2D||y!==Nz.Triangles&&y!==Nz.Strips)d.removeBufferIfPresent("normalMC");else{var b=o.getPointData().getNormals(),x={format:"snorm8x4",indexBuffer:p,packExtra:!0,shift:0,scale:127};b?(x.hash="".concat(b.getMTime(),"I").concat(p.getMTime(),"snorm8x4"),x.dataArray=b,x.usage=Nz.PointArray,d.addBuffer(u.getBufferManager().getBuffer(x),["normalMC"])):s===NW.Triangles?(t._usesCellNormals=!0,x.hash="PFN".concat(f.getMTime(),"I").concat(p.getMTime(),"snorm8x4"),x.dataArray=f,x.cells=a,x.usage=Nz.NormalsFromPoints,d.addBuffer(u.getBufferManager().getBuffer(x),["normalMC"])):d.removeBufferIfPresent("normalMC")}var w=!1;if(t.renderable.getScalarVisibility()){var A=t.renderable.getColorMapColors();if(A&&!c){var C=t.renderable.getScalarMode(),S=(C===Nq.USE_CELL_DATA||C===Nq.USE_CELL_FIELD_DATA||C===Nq.USE_FIELD_DATA||!o.getPointData().getScalars())&&C!==Nq.USE_POINT_FIELD_DATA&&A;d.addBuffer(u.getBufferManager().getBuffer({usage:Nz.PointArray,format:"unorm8x4",hash:"".concat(S).concat(A.getMTime(),"I").concat(p.getMTime(),"unorm8x4"),dataArray:A,indexBuffer:p,cellData:S,cellOffset:0}),["colorVI"]),w=!0}}w||d.removeBufferIfPresent("colorVI");var _=null;(_=null!=(n=(i=t.renderable).getInterpolateScalarsBeforeMapping)&&n.call(i)&&t.renderable.getColorCoordinates()?t.renderable.getColorCoordinates():o.getPointData().getTCoords())&&!c?d.addBuffer(u.getBufferManager().getBufferForPointArray(_,d.getIndexBuffer()),["tcoord"]):d.removeBufferIfPresent("tcoord")},e.updateTextures=function(){var e,n,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,x,w,A=[],C=[],S=null==(e=(n=t.renderable).getColorTextureMap)?void 0:e.call(n);S&&!t.colorTexture&&(t.colorTexture=xQ.newInstance({label:"polyDataColor"})),S&&(t.colorTexture.setInputData(S),C.push(["DiffuseTexture",t.colorTexture]));var _=t.WebGPUActor.getRenderable(),T=t.WebGPURenderer.getRenderable();[["DiffuseTexture",null==(i=(o=_.getProperty()).getDiffuseTexture)?void 0:i.call(o)],["DiffuseTexture",_.getTextures()[0]],["DiffuseTexture",t.colorTexture],["ORMTexture",null==(a=(s=_.getProperty()).getORMTexture)?void 0:a.call(s)],["RMTexture",null==(l=(u=_.getProperty()).getRMTexture)?void 0:l.call(u)],["RoughnessTexture",null==(c=(d=_.getProperty()).getRoughnessTexture)?void 0:c.call(d)],["MetallicTexture",null==(f=(p=_.getProperty()).getMetallicTexture)?void 0:f.call(p)],["NormalTexture",null==(h=(m=_.getProperty()).getNormalTexture)?void 0:h.call(m)],["AmbientOcclusionTexture",null==(g=(v=_.getProperty()).getAmbientOcclusionTexture)?void 0:g.call(v)],["EmissionTexture",null==(y=(x=_.getProperty()).getEmissionTexture)?void 0:y.call(x)],["EnvironmentTexture",null==(w=T.getEnvironmentTexture)?void 0:w.call(T)]].forEach(function(e){var t=b(e,2),n=t[0],i=t[1];i&&((i.getInputData()||i.getJsImageData()||i.getCanvas()||i.getImageBitmap())&&C.push([n,i]),i.getImage()&&i.getImageLoaded()&&C.push([n,i]))}),C.forEach(function(e){var n=b(e,2),i=n[0],o=n[1],a=t.device.getTextureManager().getTextureForVTKTexture(o,i);if(a.getReady()){for(var s=!1,l=0;l<t.textures.length;++l)if(t.textures[l]===a){s=!0,A[l]=!0;break}if(!s){A[t.textures.length]=!0;var u=a.createView(i);t.textures.push(a),t.textureViews.push(u);var c=o.getInterpolate()?"linear":"nearest",d=null;o.getEdgeClamp()&&o.getRepeat()?d="mirror-repeat":o.getEdgeClamp()?d="clamp-to-edge":o.getRepeat()&&(d="repeat");var f={addressModeU:d,addressModeV:d,addressModeW:d,minFilter:c,magFilter:c};"EnvironmentTexture"===i&&(f={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:c,magFilter:c,mipmapFilter:"linear"}),u.addSampler(t.device,f)}}});for(var O=t.textures.length-1;O>=0;O--)A[O]||(t.textures.splice(O,1),t.textureViews.splice(O,1))},e.computePipelineHash=function(){var n="pd".concat(t.useRendererMatrix?"r":"").concat(t.forceZValue?"z":"");if(t.primitiveType===NW.TriangleEdges||t.primitiveType===NW.TriangleStripEdges)n+="edge";else{if(t.vertexInput.hasAttribute("normalMC")&&(n+="n"),t.vertexInput.hasAttribute("colorVI")&&(n+="c"),t.vertexInput.hasAttribute("tcoord")){var i=M4(t.vertexInput.getBuffer("tcoord").getArrayInformation()[0].format);n+="t".concat(i)}t.textures.length&&(n+="tx".concat(t.textures.length))}t._usesCellNormals&&(n+="cn"),t.SSBO&&(n+="ssbo"),n+=e.getHashFromUsage(t.usage),n+=t.renderEncoder.getPipelineHash(),t.pipelineHash=n},e.updateBuffers=function(){t.primitiveType!==NW.TriangleEdges&&t.primitiveType!==NW.TriangleStripEdges&&e.updateTextures();var n=t.WebGPUActor.getRenderable(),i=n.getProperty().getRepresentation();t.usage=e.getUsage(i,t.primitiveType),e.buildVertexInput();var o=t.vertexInput.getBuffer("vertexBC");if(e.setNumberOfVertices(o.getSizeInBytes()/o.getStrideInBytes()),e.setTopology(e.getTopologyFromUsage(t.usage)),e.updateUBO(),e.haveWideLines()){var a=n.getProperty();e.setNumberOfInstances(Math.ceil(2*a.getLineWidth()))}else e.setNumberOfInstances(1)}}var NQ={newInstance:ew(NJ,"vtkWebGPUCellArrayMapper"),extend:NJ},N$=E1.PrimitiveTypes,N0={primitives:null};function N1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,N0,n),Pt.extend(e,t,n),t.primitives=[],t.classHierarchy.push("vtkWebGPUPolyDataMapper"),e.createCellArrayMapper=function(){return NQ.newInstance()},e.buildPass=function(n){if(n){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.renderable.getStatic()||t.renderable.update();var i=t.renderable.getInputData();t.renderable.mapScalars(i,1),e.updateCellArrayMappers(i)}},e.updateCellArrayMappers=function(n){if(n){for(var i=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],o=[],a=0,s=N$.Points;s<=N$.TriangleStrips;s++)if(i[s].getNumberOfValues()>0){t.primitives[s]||(t.primitives[s]=e.createCellArrayMapper());var l=t.primitives[s];l.setCellArray(i[s]),l.setCurrentInput(n),l.setCellOffset(a),l.setPrimitiveType(s),l.setRenderable(t.renderable),a+=i[s].getNumberOfCells(),o.push(l)}else t.primitives[s]=null;if(t.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(i[N$.Triangles].getNumberOfValues()>0){var u=N$.TriangleEdges;t.primitives[u]||(t.primitives[u]=e.createCellArrayMapper());var c=t.primitives[u];c.setCellArray(i[N$.Triangles]),c.setCurrentInput(n),c.setCellOffset(t.primitives[N$.Triangles].getCellOffset()),c.setPrimitiveType(u),c.setRenderable(t.renderable),o.push(c)}else t.primitives[N$.TriangleEdges]=null;if(i[N$.TriangleStrips].getNumberOfValues()>0){var d=N$.TriangleStripEdges;t.primitives[d]||(t.primitives[d]=e.createCellArrayMapper());var f=t.primitives[d];f.setCellArray(i[N$.TriangleStrips]),f.setCurrentInput(n),f.setCellOffset(t.primitives[N$.TriangleStrips].getCellOffset()),f.setPrimitiveType(d),f.setRenderable(t.renderable),o.push(f)}else t.primitives[N$.TriangleStripEdges]=null}e.prepareNodes(),e.addMissingChildren(o),e.removeUnusedNodes()}else Z("No input!")}}var N2=ew(N1,"vtkWebGPUPolyDataMapper");function N3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}DL.vtkMapper=N2;var N4=ew(function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,{},i),NQ.extend(e,t,i),t.classHierarchy.push("vtkWebGPUGlyph3DCellArrayMapper"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N3(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.setGlyphInstances=function(e){t.glyphInstances=e},e.updateBuffers=function(){n.updateBuffers(),e.setNumberOfInstances(t.glyphInstances)},e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.hasOutput("vertexVC")||i.addOutput("vec3<f32>","vertexVC");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["    var vertexSC: vec4<f32> = mapperUBO.BCSCMatrix*glyphSSBO.values[input.instanceIndex].matrix*vertexBC;","    output.vertexVC = (rendererUBO.SCVCMatrix*vertexSC).xyz;","    output.Position = rendererUBO.SCPCMatrix*vertexSC;"]).result,i.setCode(o)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderNormal=function(e,t,i){if(i.hasAttribute("normalMC")){var o=t.getShaderDescription("vertex"),a=o.getCode();a=MH.substitute(a,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals"," * mapperUBO.MCWCNormals"," * glyphSSBO.values[input.instanceIndex].normal*normalMC).xyz);"]).result,o.setCode(a)}n.replaceShaderNormal(e,t,i)},t.shaderReplacements.set("replaceShaderNormal",e.replaceShaderNormal),e.replaceShaderColor=function(e,i,o){if(t.renderable.getColorArray()){var a=i.getShaderDescription("vertex");a.addOutput("vec4<f32>","color");var s=a.getCode();s=MH.substitute(s,"//VTK::Color::Impl",["  output.color = glyphSSBO.values[input.instanceIndex].color;"]).result,a.setCode(s);var l=i.getShaderDescription("fragment");s=l.getCode(),s=MH.substitute(s,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(s)}else n.replaceShaderColor(e,i,o)},t.shaderReplacements.set("replaceShaderColor",e.replaceShaderColor),e.replaceShaderSelect=function(e,t,n){if(e.includes("sel")){var i=t.getShaderDescription("vertex");i.addOutput("u32","compositeID","flat");var o=i.getCode();o=MH.substitute(o,"//VTK::Select::Impl",["  output.compositeID = input.instanceIndex;"]).result,i.setCode(o);var a=t.getShaderDescription("fragment");o=a.getCode(),o=MH.substitute(o,"//VTK::Select::Impl",["var compositeID: u32 = input.compositeID;"]).result,a.setCode(o)}},t.shaderReplacements.set("replaceShaderSelect",e.replaceShaderSelect)},"vtkWebGPUGlyph3DCellArrayMapper"),N5={};DL.vtkGlyph3DMapper=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,N5,n),N1(e,t,n),t.glyphBOBuildTime={},es(t.glyphBOBuildTime,{mtime:0}),t.SSBO=Dt.newInstance({label:"glyphSSBO"}),t.classHierarchy.push("vtkWebGPUGlyph3DMapper"),e.createCellArrayMapper=function(){var e=N4();return e.setSSBO(t.SSBO),e.setRenderable(t.renderable),e},e.buildPass=function(n){if(n){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.renderable.getStatic()||t.renderable.update();var i=t.renderable.getInputData(1);t.renderable.mapScalars(i,1),e.updateSSBO(),e.updateCellArrayMappers(i);for(var o=0;o<t.children.length;o++)t.children[o].setGlyphInstances(t.numInstances)}},e.updateSSBO=function(){t.currentInput=t.renderable.getInputData(1),t.renderable.buildArrays();var n=t.renderable.getMatrixArray(),i=t.renderable.getNormalArray();if(t.carray=t.renderable.getColorArray(),t.numInstances=n.length/16,t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.WebGPURenderWindow=e.getFirstAncestorOfType("vtkWebGPURenderWindow");var o=t.WebGPURenderWindow.getDevice();t.SSBO.clearData(),t.SSBO.setNumberOfInstances(t.numInstances),t.SSBO.addEntry("matrix","mat4x4<f32>"),t.SSBO.addEntry("normal","mat4x4<f32>"),t.carray&&t.SSBO.addEntry("color","vec4<f32>"),t.SSBO.setAllInstancesFromArray("matrix",n),t.SSBO.setAllInstancesFromArray3x3To4x4("normal",i),t.carray&&t.SSBO.setAllInstancesFromArrayColorToFloat("color",t.carray.getData()),t.SSBO.send(o),t.glyphBOBuildTime.modified()}}},"vtkWebGPUGlyph3DMapper");var N6=Tj.SlicingMode,N8=new Float64Array(16),N9=new Float64Array(16),N7=new Float64Array(16),Re=new Float64Array(4),Rt=new Float64Array(4),Rn={rowLength:1024};DL.vtkImageMapper=ew(function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rn,o),Es.extend(e,t,o),e.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Image::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  //VTK::Image::Sample\n\n  // var computedColor: vec4<f32> = vec4<f32>(1.0,0.7, 0.5, 1.0);\n\n//VTK::RenderEncoder::Impl\n\n  return output;\n}\n"),t.UBO=E6.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.UBO.addEntry("Origin","vec4<f32>"),t.UBO.addEntry("Axis2","vec4<f32>"),t.UBO.addEntry("Axis1","vec4<f32>"),t.UBO.addEntry("cScale","vec4<f32>"),t.UBO.addEntry("cShift","vec4<f32>"),t.lutBuildTime={},es(t.lutBuildTime,{mtime:0}),t.imagemat=od(new Float64Array(16)),t.imagematinv=od(new Float64Array(16)),t.VBOBuildTime={},es(t.VBOBuildTime),t.classHierarchy.push("vtkWebGPUImageMapper"),e.buildPass=function(n){if(n){t.WebGPUImageSlice=e.getFirstAncestorOfType("vtkWebGPUImageSlice"),t.WebGPURenderer=t.WebGPUImageSlice.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice();var i=t.WebGPURenderer.getRenderable();t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(i.getActiveCamera())}},e.translucentPass=function(t){t&&e.render()},e.opaquePass=function(t){t&&e.render()},e.render=function(){t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw)},e.computePipelineHash=function(){var e=t.currentInput.getExtent();e[0]===e[1]||e[2]===e[3]||e[4]===e[5]?(t.dimensions=2,t.pipelineHash="img2"):(t.dimensions=3,t.pipelineHash="img3")},e.updateUBO=function(){var n=t.UBO.getSendTime(),i=t.WebGPUImageSlice.getRenderable(),o=i.getMapper();if(e.getMTime()>n||t.renderable.getMTime()>n||i.getProperty().getMTime()>n){var a=o.getInputData(),s=t.WebGPURenderer.getStabilizedCenterByReference();od(N8),ov(N8,N8,s),of(N9,i.getMatrix()),op(N9,N9),og(N8,N9,N8),og(N8,a.getWorldToIndex(),N8),op(N7,N8),oC(N9,[.5,.5,.5]),og(N8,N9,N8);var l=a.getDimensions();od(N9),oy(N9,N9,[1/l[0],1/l[1],1/l[2]]),og(N8,N9,N8),t.UBO.setArray("SCTCMatrix",N8);var u=t.currentInput.getExtent(),c=t.renderable.getClosestIJKAxis().ijkMode,d=t.renderable.getSlice();c!==t.renderable.getSlicingMode()&&(d=t.renderable.getSliceAtPosition(d));var f=2,p=0,h=1;c===N6.I?(f=0,p=1,h=2):c===N6.J&&(f=1,p=2,h=0),Re[f]=d,Re[p]=u[2*p]-.5,Re[h]=u[2*h]-.5,Re[3]=1,sk(Re,Re,N7),t.UBO.setArray("Origin",Re),Rt[f]=d,Rt[p]=u[2*p+1]+.5,Rt[h]=u[2*h]-.5,Rt[3]=1,sk(Rt,Rt,N7),sI(Rt,Rt,Re),Rt[3]=1,t.UBO.setArray("Axis1",Rt),Rt[f]=d,Rt[p]=u[2*p]-.5,Rt[h]=u[2*h+1]+.5,Rt[3]=1,sk(Rt,Rt,N7),sI(Rt,Rt,Re),Rt[3]=1,t.UBO.setArray("Axis2",Rt);for(var m=[1,1,1,1],g=[0,0,0,0],v=t.textureViews[0],y=v.getTexture().getScale(),b=v.getTexture().getNumberOfComponents(),x=0;x<b;x++){var w=i.getProperty().getColorWindow(),A=i.getProperty().getColorLevel(),C=i.getProperty().getRGBTransferFunction(0);if(C){var S=C.getRange();w=S[1]-S[0],A=.5*(S[1]+S[0])}m[x]=y/w,g[x]=-A/w+.5}t.UBO.setArray("cScale",m),t.UBO.setArray("cShift",g),t.UBO.sendIfNeeded(t.device)}},e.updateLUTImage=function(){var n=t.WebGPUImageSlice.getRenderable().getProperty(),i=(e.getTextureViews()[0].getTexture().getNumberOfComponents(),function(e,t,n){if(t.apply(e)){var i=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(i,"-").concat(1)}return"0"}(n,n.getRGBTransferFunction,0));if(t.colorTextureString!==i){t.numRows=1;var o=new Uint8ClampedArray(2*t.numRows*t.rowLength*4),a=n.getRGBTransferFunction();if(a)for(var s=new Float32Array(3*t.rowLength),l=0;l<1;l++){var u=(a=n.getRGBTransferFunction(l)).getRange();a.getTable(u[0],u[1],t.rowLength,s,1);for(var c=0;c<t.rowLength;c++){var d=l*t.rowLength*8+4*c;o[d]=255*s[3*c],o[d+1]=255*s[3*c+1],o[d+2]=255*s[3*c+2],o[d+3]=255;for(var f=0;f<4;f++)o[d+4*t.rowLength+f]=o[d+f]}}else for(var p=0;p<t.rowLength;++p){var h=255*p/(t.rowLength-1);o[4*p]=h,o[4*p+1]=h,o[4*p+2]=h,o[4*p+3]=255;for(var m=0;m<4;m++)o[4*p+4*t.rowLength+m]=o[4*p+m]}var g={nativeArray:o,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},v=t.device.getTextureManager().getTexture(g).createView("tfunTexture");t.textureViews[1]=v,t.colorTextureString=i}},n=e.updateBuffers,e.updateBuffers=function(){n();var i=t.device.getTextureManager().getTextureForImageData(t.currentInput),o=t.textureViews;if(!o[0]||o[0].getTexture()!==i){var a=i.createView("imgTexture");o[0]=a}e.updateLUTImage(),e.updateUBO();var s=t.WebGPUImageSlice.getRenderable().getProperty().getInterpolationType()===TZ.NEAREST?"nearest":"linear";t.clampSampler&&s===t.clampSampler.getOptions().minFilter||(t.clampSampler=Eh.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:s,magFilter:s}),t.additionalBindables=[t.clampSampler])},i=e.getShaderReplacements(),e.replaceShaderPosition=function(e,n,i){var o=n.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var a=o.getCode(),s=["var pos: vec4<f32> = mapperUBO.Origin +","   (vertexBC.x * 0.5 + 0.5) * mapperUBO.Axis1 + (vertexBC.y * 0.5 + 0.5) * mapperUBO.Axis2;","pos.w = 1.0;"];2===t.dimensions?s.push("var tcoord : vec2<f32> = (mapperUBO.SCTCMatrix * pos).xy;"):s.push("var tcoord : vec3<f32> = (mapperUBO.SCTCMatrix * pos).xyz;"),s.push("output.tcoordVS = tcoord;","output.Position = rendererUBO.SCPCMatrix * pos;"),a=MH.substitute(a,"//VTK::Position::Impl",s).result,o.setCode(a)},i.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=function(e,n,i){var o=n.getShaderDescription("vertex");2===t.dimensions?o.addOutput("vec2<f32>","tcoordVS"):o.addOutput("vec3<f32>","tcoordVS")},i.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderImage=function(e,n,i){var o=n.getShaderDescription("fragment"),a=o.getCode();t.dimensions,a=MH.substitute(a,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result,a=MH.substitute(a,"//VTK::Image::Sample",["    var coord: vec2<f32> =","      vec2<f32>(computedColor.r * mapperUBO.cScale.r + mapperUBO.cShift.r, 0.5);","    computedColor = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);"]).result,o.setCode(a)},i.set("replaceShaderImage",e.replaceShaderImage)},"vtkWebGPUImageMapper");var Rr={bufferShift:void 0,keyMatrixTime:null,keyMatrices:null,propID:void 0};DL.vtkImageSlice=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rr,n),Pt.extend(e,t,n),t.keyMatricesTime={},es(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},t.keyMatrixTime={},es(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:od(new Float64Array(16))},t.bufferShift=[0,0,0,0],eu(e,t,["propID","keyMatricesTime"]),t.classHierarchy.push("vtkWebGPUImageSlice"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&t.renderable&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.queryPass=function(e,n){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount())},e.getBufferShift=function(n){return e.getKeyMatrices(n),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var n=t.renderable.getMatrix(),i=e.getStabilizedCenterByReference();t.bufferShift[0]=n[3]-i[0],t.bufferShift[1]=n[7]-i[1],t.bufferShift[2]=n[11]-i[2],of(t.keyMatrices.bcwc,n),t.renderable.getIsIdentity()?od(t.keyMatrices.normalMatrix):(ol(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,op(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),of(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),ov(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),ov(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]),t.keyMatricesTime.modified()}return t.keyMatrices}},"vtkWebGPUImageSlice");var Ri={};function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}DL.vtkPixelSpaceCallbackMapper=eE.newInstance(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ri,n),Pt.extend(e,t,n),t.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),e.opaquePass=function(n,i){t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent();var o=t.WebGPURenderer.getAspectRatio(),a=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,s=t.WebGPURenderer.getTiledSizeAndOrigin();t.renderable.getUseZValues(),t.renderable.invokeCallback(t.renderable.getInputData(),a,o,s,null)}},"vtkWebGPUPixelSpaceCallbackMapper");var Ra=E1.PrimitiveTypes;DL.vtkMapper2D=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({primitives:[]},n)),Pt.extend(e,t,n),t.primitives=[],t.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),e.createCellArrayMapper=function(){return NQ.newInstance()},e.buildPass=function(n){if(n){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.renderable.getStatic()||t.renderable.update();var i=t.renderable.getInputData();t.renderable.mapScalars(i,1),e.updateCellArrayMappers(i)}},e.updateCellArrayMappers=function(n){for(var i=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],o=[],a=0,s=Ra.Points;s<=Ra.Triangles;s++)if(i[s].getNumberOfValues()>0){t.primitives[s]||(t.primitives[s]=e.createCellArrayMapper());var l=t.primitives[s];l.setCellArray(i[s]),l.setCurrentInput(n),l.setCellOffset(a),l.setPrimitiveType(s),l.setRenderable(t.renderable),l.setIs2D(!0),a+=i[s].getNumberOfCells(),o.push(l)}else t.primitives[s]=null;e.prepareNodes(),e.addMissingChildren(o),e.removeUnusedNodes()}},"vtkWebGPUPolyDataMapper2D");var Rs="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",Rl=new Float64Array(16),Ru=new Float64Array(16),Rc={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};DL.vtkRenderer=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rc,n),Pt.extend(e,t,n),t.UBO=E6.newInstance({label:"rendererUBO"}),t.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("WCVCNormals","mat4x4<f32>"),t.UBO.addEntry("viewportSize","vec2<f32>"),t.UBO.addEntry("LightCount","i32"),t.UBO.addEntry("MaxEnvironmentMipLevel","f32"),t.UBO.addEntry("BackgroundDiffuseStrength","f32"),t.UBO.addEntry("BackgroundSpecularStrength","f32"),t.UBO.addEntry("cameraParallel","u32"),t.SSBO=Dt.newInstance({label:"rendererLightSSBO"}),t.lightTimeString="",t.bindGroup=MX.newInstance({label:"rendererBG"}),t.bindGroup.setBindables([t.UBO,t.SSBO]),t.tmpMat4=od(new Float64Array(16)),t.stabilizedTime={},es(t.stabilizedTime,{mtime:0}),eu(e,t,["bindGroup","stabilizedTime"]),eh(e,t,["stabilizedCenter"]),ep(e,t,["renderEncoder","selector","suppressClear","UBO"]),t.classHierarchy.push("vtkWebGPURenderer"),e.buildPass=function(n){n&&t.renderable&&(t.camera=t.renderable.getActiveCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.camera),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes(),t.webgpuCamera=e.getViewNodeFor(t.camera,t.webgpuCamera),e.updateStabilizedMatrix())},e.updateStabilizedMatrix=function(){var e=t.camera.getClippingRange(),n=t.camera.getPositionByReference(),i=[],o=[];rp(o,t.camera.getDirectionOfProjectionByReference(),.5*(e[0]+e[1])),ri(i,n,o),rV(o,i,t.stabilizedCenter),rW(o)/(e[1]-e[0])>t.recenterThreshold&&(t.stabilizedCenter=i,t.stabilizedTime.modified())},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),i=0;i<n.length;++i)n[i].getSwitch()>0&&e++;return e||(Y("No lights are on, creating one."),t.renderable.createLight()),e},e.updateUBO=function(){var n=t.UBO.getSendTime();if(t._parent.getMTime()>n||e.getMTime()>n||t.camera.getMTime()>n||t.renderable.getMTime()>n){var i,o=t.webgpuCamera.getKeyMatrices(e);t.UBO.setArray("WCVCMatrix",o.wcvc),t.UBO.setArray("SCPCMatrix",o.scpc),t.UBO.setArray("PCSCMatrix",o.pcsc),t.UBO.setArray("SCVCMatrix",o.scvc),t.UBO.setArray("VCPCMatrix",o.vcpc),t.UBO.setArray("WCVCNormals",o.normalMatrix),t.UBO.setValue("LightCount",t.renderable.getLights().length),t.UBO.setValue("MaxEnvironmentMipLevel",null==(i=t.renderable.getEnvironmentTexture())?void 0:i.getMipLevel()),t.UBO.setValue("BackgroundDiffuseStrength",t.renderable.getEnvironmentTextureDiffuseStrength()),t.UBO.setValue("BackgroundSpecularStrength",t.renderable.getEnvironmentTextureSpecularStrength());var a=e.getYInvertedTiledSizeAndOrigin();t.UBO.setArray("viewportSize",[a.usize,a.vsize]),t.UBO.setValue("cameraParallel",t.camera.getParallelProjection());var s=t._parent.getDevice();t.UBO.sendIfNeeded(s)}},e.updateSSBO=function(){for(var n,i=t.renderable.getLights(),o=t.webgpuCamera.getKeyMatrices(e),a="".concat(t.renderable.getMTime()),s=0;s<i.length;s++)a+=i[s].getMTime();if(a!==t.lightTimeString){for(var l=new Float32Array(4*i.length),u=new Float32Array(4*i.length),c=new Float32Array(4*i.length),d=new Float32Array(4*i.length),f=0;f<i.length;f++){var p=4*f,h=i[f].getPosition();rO(h,h,o.wcvc),l[p]=h[0],l[p+1]=h[1],l[p+2]=h[2],l[p+3]=0,u[p]=-i[f].getDirection()[0],u[p+1]=-i[f].getDirection()[1],u[p+2]=-i[f].getDirection()[2],u[p+3]=0,c[p]=i[f].getColor()[0],c[p+1]=i[f].getColor()[1],c[p+2]=i[f].getColor()[2],c[p+3]=5*i[f].getIntensity(),d[p]=(n=i[f]).getPositional()?n.getConeAngle()>=90?0:2:1,d[p+1]=Math.cos(eK(i[f].getConeAngle())),d[p+2]=Math.cos(eK(i[f].getConeAngle()+i[f].getConeFalloff())),d[p+3]=0}t.SSBO.clearData(),t.SSBO.setNumberOfInstances(i.length),t.SSBO.addEntry("LightPos","vec4<f32>"),t.SSBO.addEntry("LightDir","vec4<f32>"),t.SSBO.addEntry("LightColor","vec4<f32>"),t.SSBO.addEntry("LightData","vec4<f32>"),t.SSBO.setAllInstancesFromArray("LightPos",l),t.SSBO.setAllInstancesFromArray("LightDir",u),t.SSBO.setAllInstancesFromArray("LightColor",c),t.SSBO.setAllInstancesFromArray("LightData",d);var m=t._parent.getDevice();t.SSBO.send(m)}t.lightTimeString=a},e.scissorAndViewport=function(t){var n=e.getYInvertedTiledSizeAndOrigin();t.getHandle().setViewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize,0,1),t.getHandle().setScissorRect(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)},e.bindUBO=function(e){e.activateBindGroup(t.bindGroup)},e.opaquePass=function(n){n?(t.renderEncoder.begin(t._parent.getCommandEncoder()),e.updateUBO(),e.updateSSBO()):(e.scissorAndViewport(t.renderEncoder),e.clear(),t.renderEncoder.end())},e.clear=function(){var n;if(!t.renderable.getTransparent()&&!t.suppressClear){var i=t._parent.getDevice();if(!t.clearFSQ){t.clearFSQ=Es.newInstance(),t.clearFSQ.setDevice(i),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(Rs);var o=E6.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(o),t.backgroundTex=t.renderable.getEnvironmentTexture()}if("clearfsqwithtexture"!==t.clearFSQ.getPipelineHash()&&t.renderable.getUseEnvironmentTextureAsBackground()&&null!=(n=t.backgroundTex)&&n.getImageLoaded()){t.clearFSQ.setFragmentShaderTemplate("\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);\n  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);\n  // textureSampleLevel gets rid of some ugly artifacts\n  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);\n  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n");var a=E6.newInstance({label:"mapperUBO"});a.addEntry("FSQMatrix","mat4x4<f32>"),a.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(a);var s=i.getTextureManager().getTextureForVTKTexture(t.backgroundTex,"EnvironmentTexture");if(s.getReady()){var l=s.createView("EnvironmentTexture");t.clearFSQ.setTextureViews([l]),t.backgroundTexLoaded=!0;var u=t.backgroundTex.getInterpolate()?"linear":"nearest";l.addSampler(i,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:u,magFilter:u,mipmapFilter:"linear"})}t.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if("clearfsqwithtexture"===t.clearFSQ.getPipelineHash()&&!t.renderable.getUseEnvironmentTextureAsBackground()){t.clearFSQ=Es.newInstance(),t.clearFSQ.setDevice(i),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(Rs);var c=E6.newInstance({label:"mapperUBO"});c.addEntry("FSQMatrix","mat4x4<f32>"),c.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(c)}var d=t.webgpuCamera.getKeyMatrices(e),f=t.renderable.getBackgroundByReference();t.clearFSQ.getUBO().setArray("BackgroundColor",f),of(Ru,d.normalMatrix),o1(Rl,d.scvc,d.pcsc),o1(Rl,Ru,Rl),t.clearFSQ.getUBO().setArray("FSQMatrix",Rl),t.clearFSQ.getUBO().sendIfNeeded(i),t.clearFSQ.prepareAndDraw(t.renderEncoder)}},e.translucentPass=function(n){n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.volumeDepthRangePass=function(n){n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.convertToOpenGLDepth=function(e){return t.webgpuCamera.convertToOpenGLDepth(e)},e.getYInvertedTiledSizeAndOrigin=function(){var n=e.getTiledSizeAndOrigin();return n.lowerLeftV=t._parent.getSizeByReference()[1]-n.vsize-n.lowerLeftV,n},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=e[0]-0,i=e[1]-0,o=t._parent.normalizedDisplayToDisplay(n,i),a=Math.round(o[0]),s=Math.round(o[1]),l=e[2]-0,u=e[3]-0,c=t._parent.normalizedDisplayToDisplay(l,u),d=Math.round(c[0])-a,f=Math.round(c[1])-s;return d<0&&(d=0),f<0&&(f=0),{usize:d,vsize:f,lowerLeftU:a,lowerLeftV:s}},e.getPropFromID=function(e){for(var n=0;n<t.children.length;n++)if((t.children[n].getPropID?t.children[n].getPropID():-1)===e)return t.children[n];return null},e.getStabilizedTime=function(){return t.stabilizedTime.getMTime()},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()}},"vtkWebGPURenderer");var Rd={};DL.vtkScalarBarActor=ew(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rd,n),Pt.extend(e,t,n),t.scalarBarActorHelper=OT.newScalarBarActorHelper(),t.classHierarchy.push("vtkWebGPUScalarBarActor"),e.buildPass=function(n){n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,n){if(e){var i=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,o=t.WebGPURenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([o.usize,o.vsize],i,t.WebGPURenderWindow.getRenderable())}}},"vtkWebGPUScalarBarActor");var Rf=E1.BufferUsage,Rp={};DL.vtkSphereMapper=ew(function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rp,i),NQ.extend(e,t,i),e.setVertexShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::Color::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertexVC: vec4<f32> = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);\n\n  //VTK::Color::Impl\n\n  // compute the projected vertex position\n  output.centerVC = vertexVC.xyz;\n  output.radiusVC = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (rendererUBO.cameraParallel == 0u)\n    {\n    var dir: vec3<f32> = normalize(-vertexVC.xyz);\n    var base2: vec3<f32> = normalize(cross(dir,vec3<f32>(1.0,0.0,0.0)));\n    var base1: vec3<f32> = cross(base2,dir);\n    dir = vertexVC.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    vertexVC = vec4<f32>(dir, 1.0);\n    }\n  else\n    {\n    // add in the offset\n    var tmp2: vec2<f32> = vertexVC.xy + offsetMC;\n    vertexVC = vec4<f32>(tmp2, vertexVC.zw);\n    }\n\n  output.vertexVC = vec4<f32>(vertexVC.xyz, 0.0);\n\n  //VTK::Position::Impl\n\n  return output;\n}\n"),t.classHierarchy.push("vtkWebGPUSphereMapper"),n=e.buildPass,e.buildPass=function(i){if(i){t.renderable.getStatic()||t.renderable.update();var o=t.renderable.getInputData();e.setCellArray(o.getVerts()),e.setCurrentInput(o)}n(i)},e.replaceShaderNormal=function(e,t,n){var i=t.getShaderDescription("vertex");i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC"),i.addOutput("vec3<f32>","centerVC"),i.addOutput("f32","radiusVC");var o=t.getShaderDescription("fragment");o.addBuiltinOutput("f32","@builtin(frag_depth) fragDepth");var a=o.getCode();a=MH.substitute(a,"//VTK::Normal::Impl",["\n    // compute the eye position and unit direction\n    var vertexVC: vec4<f32>;\n    var EyePos: vec3<f32>;\n    var EyeDir: vec3<f32>;\n    var invertedDepth: f32 = 1.0;\n    if (rendererUBO.cameraParallel != 0u) {\n      EyePos = vec3<f32>(input.vertexVC.x, input.vertexVC.y, input.vertexVC.z + 3.0*input.radiusVC);\n      EyeDir = vec3<f32>(0.0, 0.0, -1.0);\n    }\n    else {\n      EyeDir = input.vertexVC.xyz;\n      EyePos = vec3<f32>(0.0,0.0,0.0);\n      var lengthED: f32 = length(EyeDir);\n      EyeDir = normalize(EyeDir);\n      // we adjust the EyePos to be closer if it is too far away\n      // to prevent floating point precision noise\n      if (lengthED > input.radiusVC*3.0) {\n        EyePos = input.vertexVC.xyz - EyeDir*3.0*input.radiusVC;\n      }\n    }\n\n    // translate to Sphere center\n    EyePos = EyePos - input.centerVC;\n    // scale to radius 1.0\n    EyePos = EyePos * (1.0 / input.radiusVC);\n    // find the intersection\n    var b: f32 = 2.0*dot(EyePos,EyeDir);\n    var c: f32 = dot(EyePos,EyePos) - 1.0;\n    var d: f32 = b*b - 4.0*c;\n    var normal: vec3<f32> = vec3<f32>(0.0,0.0,1.0);\n    if (d < 0.0) { discard; }\n    else {\n      var t: f32 = (-b - invertedDepth*sqrt(d))*0.5;\n\n      // compute the normal, for unit sphere this is just\n      // the intersection point\n      normal = invertedDepth*normalize(EyePos + t*EyeDir);\n      // compute the intersection point in VC\n      vertexVC = vec4<f32>(normal * input.radiusVC + input.centerVC, 1.0);\n    }\n    // compute the pixel's depth\n    var pos: vec4<f32> = rendererUBO.VCPCMatrix * vertexVC;\n    output.fragDepth = pos.z / pos.w;\n    "]).result,o.setCode(a)},e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["  output.Position = rendererUBO.VCPCMatrix*vertexVC;"]).result,i.setCode(o)},e.computePipelineHash=function(){t.pipelineHash="spm",t.vertexInput.hasAttribute("colorVI")&&(t.pipelineHash+="c"),t.pipelineHash+=t.renderEncoder.getPipelineHash()},e.updateBuffers=function(){var n=t.currentInput;t.renderable.mapScalars(n,1);var i=n.getPoints(),o=i.getNumberOfPoints(),a=i.getData();e.setNumberOfInstances(1),e.setNumberOfVertices(3*o);var s=t.vertexInput,l="spm".concat(i.getMTime(),"float32x3");if(!t.device.getBufferManager().hasBuffer(l)){for(var u={hash:l,usage:Rf.RawVertex,format:"float32x3"},c=new Float32Array(3*o*3),d=0,f=0,p=0;p<o;++p)d=3*p,c[f++]=a[d],c[f++]=a[d+1],c[f++]=a[d+2],c[f++]=a[d],c[f++]=a[d+1],c[f++]=a[d+2],c[f++]=a[d],c[f++]=a[d+1],c[f++]=a[d+2];u.nativeArray=c;var h=t.device.getBufferManager().getBuffer(u);s.addBuffer(h,["vertexBC"])}var m=n.getPointData(),g=null;null!=t.renderable.getScaleArray()&&m.hasArray(t.renderable.getScaleArray())&&(g=m.getArray(t.renderable.getScaleArray()).getData());var v=t.renderable.getRadius();if(g||v!==t._lastRadius){if(l="spm".concat(g?m.getArray(t.renderable.getScaleArray()).getMTime():v,"float32x2"),!t.device.getBufferManager().hasBuffer(l)){for(var y={hash:l,usage:Rf.RawVertex,format:"float32x2"},b=new Float32Array(3*o*2),x=Math.cos(eK(30)),w=0,A=0;A<o;++A){var C=t.renderable.getRadius();g&&(C=g[A]*t.renderable.getScaleFactor()),b[w++]=-2*C*x,b[w++]=-C,b[w++]=2*C*x,b[w++]=-C,b[w++]=0,b[w++]=2*C}y.nativeArray=b;var S=t.device.getBufferManager().getBuffer(y);s.addBuffer(S,["offsetMC"])}t._lastRadius=v}var _=!1;if(t.renderable.getScalarVisibility()){var T=t.renderable.getColorMapColors();if(T){if(l="spm".concat(T.getMTime(),"unorm8x4"),!t.device.getBufferManager().hasBuffer(l)){var O={hash:l,usage:Rf.RawVertex,format:"unorm8x4"},P=T.getNumberOfComponents();4!==P&&Z("this should be 4");for(var M=new Uint8ClampedArray(3*o*4),E=0,D=T.getData(),I=0;I<o;++I)for(var k=I*P,N=0;N<3;N++)M[E++]=D[k],M[E++]=D[k+1],M[E++]=D[k+2],M[E++]=D[k+3];O.nativeArray=M;var R=t.device.getBufferManager().getBuffer(O);s.addBuffer(R,["colorVI"])}_=!0}}_||s.removeBufferIfPresent("colorVI"),e.setTopology("triangle-list"),e.updateUBO()};var o=t.shaderReplacements;o.set("replaceShaderPosition",e.replaceShaderPosition),o.set("replaceShaderNormal",e.replaceShaderNormal)},"vtkWebGPUSphereMapper");var Rh=E1.BufferUsage,Rm={};DL.vtkStickMapper=ew(function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rm,i),NQ.extend(e,t,i),e.setVertexShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::Color::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var offsetsArray: array<vec3<f32>, 12> = array<vec3<f32>, 12>(\n    vec3<f32>(-1.0, -1.0, -1.0),\n    vec3<f32>(1.0, -1.0, -1.0),\n    vec3<f32>(1.0, -1.0, 1.0),\n\n    vec3<f32>(-1.0, -1.0, -1.0),\n    vec3<f32>(1.0, -1.0, 1.0),\n    vec3<f32>(-1.0, -1.0, 1.0),\n\n    vec3<f32>(-1.0, -1.0, 1.0),\n    vec3<f32>(1.0, -1.0, 1.0),\n    vec3<f32>(1.0, 1.0, 1.0),\n\n    vec3<f32>(-1.0, -1.0, 1.0),\n    vec3<f32>(1.0, 1.0, 1.0),\n    vec3<f32>(-1.0, 1.0, 1.0)\n  );\n\n  var output : vertexOutput;\n\n  var vertexVC: vec4<f32> = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);\n\n  //VTK::Color::Impl\n\n  // compute the projected vertex position\n  output.centerVC = vertexVC.xyz;\n  output.radiusVC = radiusMC;\n  output.lengthVC = length(orientMC);\n  output.orientVC = (rendererUBO.WCVCNormals * vec4<f32>(normalize(orientMC), 0.0)).xyz;\n\n  // make sure it is pointing out of the screen\n  if (output.orientVC.z < 0.0)\n    {\n    output.orientVC = -output.orientVC;\n    }\n\n  // make the basis\n  var xbase: vec3<f32>;\n  var ybase: vec3<f32>;\n  var dir: vec3<f32> = vec3<f32>(0.0,0.0,1.0);\n  if (rendererUBO.cameraParallel == 0u)\n    {\n    dir = normalize(-vertexVC.xyz);\n    }\n  if (abs(dot(dir,output.orientVC)) == 1.0)\n    {\n    xbase = normalize(cross(vec3<f32>(0.0,1.0,0.0),output.orientVC));\n    ybase = cross(xbase,output.orientVC);\n    }\n  else\n    {\n    xbase = normalize(cross(output.orientVC,dir));\n    ybase = cross(output.orientVC,xbase);\n    }\n\n\n  var vertIdx: u32 = input.vertexIndex % 12u;\n  var offsets: vec3<f32> = offsetsArray[vertIdx];\n\n  vertexVC = vec4<f32>(vertexVC.xyz +\n    output.radiusVC * offsets.x * xbase +\n    output.radiusVC * offsets.y * ybase +\n    0.5 * output.lengthVC * offsets.z * output.orientVC, 1.0);\n\n  output.vertexVC = vertexVC;\n\n  //VTK::Position::Impl\n\n  return output;\n}\n"),t.classHierarchy.push("vtkWebGPUStickMapper"),n=e.buildPass,e.buildPass=function(i){if(i){t.renderable.getStatic()||t.renderable.update();var o=t.renderable.getInputData();e.setCellArray(o.getVerts()),e.setCurrentInput(o)}n(i)},e.replaceShaderNormal=function(e,t,n){var i=t.getShaderDescription("vertex");i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC"),i.addOutput("vec3<f32>","centerVC"),i.addOutput("vec3<f32>","orientVC"),i.addOutput("f32","radiusVC"),i.addOutput("f32","lengthVC"),i.addBuiltinInput("u32","@builtin(vertex_index) vertexIndex");var o=t.getShaderDescription("fragment");o.addBuiltinOutput("f32","@builtin(frag_depth) fragDepth");var a=o.getCode();a=MH.substitute(a,"//VTK::Normal::Impl",["\n    // compute the eye position and unit direction\n    var vertexVC: vec4<f32>;\n    var EyePos: vec3<f32>;\n    var EyeDir: vec3<f32>;\n\n    if (rendererUBO.cameraParallel != 0u)\n    {\n      EyePos = vec3<f32>(input.vertexVC.x, input.vertexVC.y, input.vertexVC.z + 3.0*input.radiusVC);\n      EyeDir = vec3<f32>(0.0, 0.0, -1.0);\n    }\n    else\n    {\n      EyeDir = input.vertexVC.xyz;\n      EyePos = vec3<f32>(0.0,0.0,0.0);\n      var lengthED: f32 = length(EyeDir);\n      EyeDir = normalize(EyeDir);\n      // we adjust the EyePos to be closer if it is too far away\n      // to prevent floating point precision noise\n      if (lengthED > input.radiusVC*3.0)\n      {\n        EyePos = input.vertexVC.xyz - EyeDir*3.0*input.radiusVC;\n      }\n    }\n    // translate to Sphere center\n    EyePos = EyePos - input.centerVC;\n\n    // rotate to new basis\n    // base1, base2, orientVC\n    var base1: vec3<f32>;\n    if (abs(input.orientVC.z) < 0.99)\n    {\n      base1 = normalize(cross(input.orientVC,vec3<f32>(0.0,0.0,1.0)));\n    }\n    else\n    {\n      base1 = normalize(cross(input.orientVC,vec3<f32>(0.0,1.0,0.0)));\n    }\n    var base2: vec3<f32> = cross(input.orientVC,base1);\n    EyePos = vec3<f32>(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,input.orientVC));\n    EyeDir = vec3<f32>(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,input.orientVC));\n\n    // scale to radius 1.0\n    EyePos = EyePos * (1.0 / input.radiusVC);\n\n    // find the intersection\n    var a: f32 = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n    var b: f32 = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n    var c: f32 = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n    var d: f32 = b*b - 4.0*a*c;\n    var normal: vec3<f32> = vec3<f32>(0.0,0.0,1.0);\n    if (d < 0.0) { discard; }\n    else\n    {\n      var t: f32 = (-b - sqrt(d))*(0.5 / a);\n      var tz: f32 = EyePos.z + t*EyeDir.z;\n      var iPoint: vec3<f32> = EyePos + t*EyeDir;\n      if (abs(iPoint.z)*input.radiusVC > input.lengthVC*0.5)\n      {\n        // test for end cap\n        var t2: f32 = (-b + sqrt(d))*(0.5 / a);\n        var tz2: f32 = EyePos.z + t2*EyeDir.z;\n        if (tz2*input.radiusVC > input.lengthVC*0.5 || tz*input.radiusVC < -0.5*input.lengthVC) { discard; }\n        else\n        {\n          normal = input.orientVC;\n          var t3: f32 = (input.lengthVC*0.5/input.radiusVC - EyePos.z)/EyeDir.z;\n          iPoint = EyePos + t3*EyeDir;\n          vertexVC = vec4<f32>(input.radiusVC*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*input.orientVC) + input.centerVC, 1.0);\n        }\n      }\n      else\n      {\n        // The normal is the iPoint.xy rotated back into VC\n        normal = iPoint.x*base1 + iPoint.y*base2;\n        // rescale rerotate and translate\n        vertexVC = vec4<f32>(input.radiusVC*(normal + iPoint.z*input.orientVC) + input.centerVC, 1.0);\n      }\n    }\n    // compute the pixel's depth\n    var pos: vec4<f32> = rendererUBO.VCPCMatrix * vertexVC;\n    output.fragDepth = pos.z / pos.w;\n  "]).result,o.setCode(a)},e.replaceShaderPosition=function(e,t,n){var i=t.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var o=i.getCode();o=MH.substitute(o,"//VTK::Position::Impl",["  output.Position = rendererUBO.VCPCMatrix*vertexVC;"]).result,i.setCode(o)},e.computePipelineHash=function(){t.pipelineHash="stm",t.vertexInput.hasAttribute("colorVI")&&(t.pipelineHash+="c"),t.pipelineHash+=t.renderEncoder.getPipelineHash()},e.updateBuffers=function(){var n=t.currentInput;t.renderable.mapScalars(n,1);var i=t.device,o=n.getPoints(),a=n.getPointData(),s=o.getNumberOfPoints(),l=o.getData();e.setNumberOfInstances(s),e.setNumberOfVertices(12);var u=t.vertexInput,c="stm".concat(o.getMTime(),"float32x3");if(!i.getBufferManager().hasBuffer(c)){for(var d={hash:c,usage:Rh.RawVertex,format:"float32x3"},f=new Float32Array(3*s),p=0,h=0,m=0;m<s;++m)p=3*m,f[h++]=l[p],f[h++]=l[p+1],f[h++]=l[p+2];d.nativeArray=f;var g=i.getBufferManager().getBuffer(d);u.addBuffer(g,["vertexBC"],"instance")}var v=null;null!=t.renderable.getScaleArray()&&a.hasArray(t.renderable.getScaleArray())&&(v=a.getArray(t.renderable.getScaleArray()).getData());var y=t.renderable.getRadius();if(v||y!==t._lastRadius){if(c="stm".concat(v?a.getArray(t.renderable.getScaleArray()).getMTime():y,"float32"),!i.getBufferManager().hasBuffer(c)){for(var b={hash:c,usage:Rh.RawVertex,format:"float32"},x=new Float32Array(s),w=0,A=0;A<s;++A){var C=t.renderable.getRadius();v&&(C=v[2*A+1]),x[w++]=C}b.nativeArray=x;var S=i.getBufferManager().getBuffer(b);u.addBuffer(S,["radiusMC"],"instance")}t._lastRadius=y}var _=null;if(null!=t.renderable.getOrientationArray()&&a.hasArray(t.renderable.getOrientationArray())?_=a.getArray(t.renderable.getOrientationArray()).getData():Z(["Error setting orientationArray.\n","You have to specify the stick orientation"]),c="stm".concat(a.getArray(t.renderable.getOrientationArray()).getMTime(),"float32x3"),!i.getBufferManager().hasBuffer(c)){for(var T={hash:c,usage:Rh.RawVertex,format:"float32x3"},O=new Float32Array(3*s),P=0,M=0,E=0;E<s;++E){P=3*E;var D=t.renderable.getLength();v&&(D=v[2*E]),O[M++]=_[P]*D,O[M++]=_[P+1]*D,O[M++]=_[P+2]*D}T.nativeArray=O;var I=i.getBufferManager().getBuffer(T);u.addBuffer(I,["orientMC"],"instance")}var k=!1;if(t.renderable.getScalarVisibility()){var N=t.renderable.getColorMapColors();if(N){if(c="stm".concat(N.getMTime(),"unorm8x4"),!i.getBufferManager().hasBuffer(c)){var R={usage:Rh.RawVertex,format:"unorm8x4"},B=N.getNumberOfComponents();4!==B&&Z("this should be 4");for(var L=new Uint8ClampedArray(4*s),F=0,V=N.getData(),j=0;j<s;++j){var G=j*B;L[F++]=V[G],L[F++]=V[G+1],L[F++]=V[G+2],L[F++]=V[G+3]}R.nativeArray=L;var U=i.getBufferManager().getBuffer(R);u.addBuffer(U,["colorVI"],"instance")}k=!0}}k||u.removeBufferIfPresent("colorVI"),e.setTopology("triangle-list"),e.updateUBO()};var o=t.shaderReplacements;o.set("replaceShaderPosition",e.replaceShaderPosition),o.set("replaceShaderNormal",e.replaceShaderNormal)},"vtkWebGPUStickMapper");var Rg={propID:void 0,keyMatricesTime:null};DL.vtkVolume=eE.newInstance(function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rg,o),Pt.extend(e,t,o),t.keyMatricesTime={},eE.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={bcwc:new Float64Array(16),bcsc:new Float64Array(16)},eE.get(e,t,["propID","keyMatricesTime"]),t.classHierarchy.push("vtkWebGPUVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),t.renderable.getMapper().update())},e.queryPass=function(n,i){if(n&&t.renderable&&t.renderable.getVisibility()){var o=t.renderable.getMapper().getBounds();o&&6===o.length&&!(o[0]>o[1])&&i.addVolume(e)}},n=new Float64Array(3),i=new Float64Array(3),e.getBoundingCubePoints=function(e,o){var a=t.renderable.getMapper().getInputData();if(a)for(var s=a.getExtent(),l=t.renderable.getMatrix(),u=0,c=4;c<6;c++){n[2]=s[c];for(var d=2;d<4;d++){n[1]=s[d];for(var f=0;f<2;f++){n[0]=s[f],a.indexToWorld(n,i);var p=o+3*u;e[p++]=l[0]*i[0]+l[1]*i[1]+l[2]*i[2]+l[3],e[p++]=l[4]*i[0]+l[5]*i[1]+l[6]*i[2]+l[7],e[p++]=l[8]*i[0]+l[9]*i[1]+l[10]*i[2]+l[11],u++}}}},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var n=t.renderable.getMatrix(),i=e.getStabilizedCenterByReference();of(t.keyMatrices.bcwc,n),ov(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]),t.keyMatricesTime.modified()}return t.keyMatrices}},"vtkWebGPUVolume");var Rv={XrSessionTypes:{HmdVR:0,MobileAR:1,LookingGlassVR:2,HmdAR:3}};function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Rb=Rv.XrSessionTypes;function Rx(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,{initialized:!1,drawControllersRay:!1,inputSourceToRay:{},initCanvasSize:null,initBackground:null,renderWindow:null,xrSession:null,xrSessionType:0,xrReferenceSpace:null},o),eE.obj(e,t),eE.event(e,t,"event"),eE.get(e,t,["xrSession"]),eE.setGet(e,t,["renderWindow","drawControllersRay"]),t.classHierarchy.push("vtkWebXRRenderWindowHelper"),e.initialize=function(e){t.initialized||(t.renderWindow=e,t.initialized=!0)},e.getXrSupported=function(){return void 0!==navigator.xr},e.startXR=function(n){if(void 0===navigator.xr)throw Error("WebXR is not available");t.xrSessionType=void 0!==n?n:Rb.HmdVR;var i=[Rb.HmdAR,Rb.MobileAR].includes(t.xrSessionType),o=i?"immersive-ar":"immersive-vr";if(!navigator.xr.isSessionSupported(o))throw i?Error("Device does not support AR session"):Error("VR display is not available");if(null!==t.xrSession)throw Error("XR Session already exists!");navigator.xr.requestSession(o).then(e.enterXR,function(){throw Error("Failed to create XR session!")})},n=w$(w1().mark(function n(i){var o,a,s;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.xrSession=i,t.initCanvasSize=t.renderWindow.getSize(),null===t.xrSession){n.next=19;break}return o=t.renderWindow.get3DContext(),n.next=6,o.makeXRCompatible();case 6:a=new window.XRWebGLLayer(t.xrSession,o[MO]()),t.renderWindow.setSize(a.framebufferWidth,a.framebufferHeight),t.xrSession.updateRenderState({baseLayer:a}),t.xrSession.requestReferenceSpace("local").then(function(e){t.xrReferenceSpace=e}),[Rb.HmdAR,Rb.MobileAR].includes(t.xrSessionType)&&(s=t.renderWindow.getRenderable().getRenderers()[0],t.initBackground=s.getBackground(),s.setBackground([0,0,0,0])),e.resetXRScene(),t.renderWindow.getRenderable().getInteractor().switchToXRAnimation(),t.xrSceneFrame=t.xrSession.requestAnimationFrame(t.xrRender),e.modified(),n.next=20;break;case 19:throw Error("Failed to enter XR with a null xrSession.");case 20:case"end":return n.stop()}},n)})),e.enterXR=function(e){return n.apply(this,arguments)},e.resetXRScene=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1.5,i=t.renderWindow.getRenderable().getRenderers()[0];i.resetCamera();var o=i.getActiveCamera(),a=o.getPhysicalScale(),s=o.getPhysicalTranslation(),l=n*a;a/=e,s[2]+=l,o.setPhysicalScale(a),o.setPhysicalTranslation(s),o.setClippingRange(.1*a,100*a)},e.stopXR=w$(w1().mark(function n(){var i,o,a,s;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==navigator.xr){n.next=2;break}return n.abrupt("return");case 2:if(null===t.xrSession){n.next=12;break}return t.xrSession.cancelAnimationFrame(t.xrSceneFrame),t.renderWindow.getRenderable().getInteractor().returnFromXRAnimation(),(i=t.renderWindow.get3DContext()).bindFramebuffer(i.FRAMEBUFFER,null),o=t.renderWindow.getRenderable().getRenderers()[0],t.xrSession.inputSources.forEach(function(e){t.inputSourceToRay[e.handedness]&&(o.removeActor(t.inputSourceToRay[e.handedness].actor),t.inputSourceToRay[e.handedness].visible=!1)}),n.next=11,t.xrSession.end().catch(function(e){if(!(e instanceof DOMException))throw e});case 11:t.xrSession=null;case 12:null!==t.initCanvasSize&&(a=t.renderWindow).setSize.apply(a,m(t.initCanvasSize)),s=t.renderWindow.getRenderable().getRenderers()[0],null!=t.initBackground&&(s.setBackground(t.initBackground),t.initBackground=null),s.getActiveCamera().setProjectionMatrix(null),s.resetCamera(),s.setViewport(0,0,1,1),t.renderWindow.traverseAllPasses(),e.modified();case 20:case"end":return n.stop()}},n)})),i=w$(w1().mark(function e(n,i){var o,a,s,l,u,c,d,f,p;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=i.session,(a=[Rb.HmdVR,Rb.HmdAR].includes(t.xrSessionType))&&t.drawControllersRay&&t.xrReferenceSpace&&(l=(s=t.renderWindow.getRenderable().getRenderers()[0]).getActiveCamera(),u=[],l.getPhysicalToWorldMatrix(u),o.inputSources.forEach(function(e){var n;if(null!=e.targetRaySpace&&null!=e.gripSpace&&"tracked-pointer"===e.targetRayMode){null==t.inputSourceToRay[e.handedness]&&(t.inputSourceToRay[e.handedness]=function(){var e=pt.newInstance(),t=gd.newInstance();t.setInputConnection(e.getOutputPort());var n=mH.newInstance();return n.getProperty().setColor(1,0,0),n.getProperty().setLineWidth(5),n.setMapper(t),n.setPickable(!1),{lineSource:e,mapper:t,actor:n,visible:!1}}());var o=t.inputSourceToRay[e.handedness],a=i.getPose(e.targetRaySpace,t.xrReferenceSpace);if(null!=a){var c=rt(a.transform.position.x,a.transform.position.y,a.transform.position.z),d=l.physicalOrientationToWorldDirection([a.transform.orientation.x,a.transform.orientation.y,a.transform.orientation.z,a.transform.orientation.w]),f=rO([],c,u),p=s.getActiveCamera().getClippingRange()[1];o.visible||(s.addActor(o.actor),o.visible=!0),o.lineSource.setPoint1(f[0]-d[0]*p,f[1]-d[1]*p,f[2]-d[2]*p),(n=o.lineSource).setPoint2.apply(n,m(f))}}}),t.renderWindow.render()),t.renderWindow.getRenderable().getInteractor().updateXRGamepads(o,i,t.xrReferenceSpace),t.xrSceneFrame=t.xrSession.requestAnimationFrame(t.xrRender),(c=i.getViewerPose(t.xrReferenceSpace))&&(d=t.renderWindow.get3DContext(),t.xrSessionType===Rb.MobileAR&&null!==t.initCanvasSize&&(d.canvas.width=t.initCanvasSize[0],d.canvas.height=t.initCanvasSize[1]),f=o.renderState.baseLayer,d.bindFramebuffer(d.FRAMEBUFFER,f.framebuffer),d.clear(d.COLOR_BUFFER_BIT),d.clear(d.DEPTH_BUFFER_BIT),t.renderWindow.setSize(f.framebufferWidth,f.framebufferHeight),p=t.renderWindow.getRenderable().getRenderers()[0],c.views.forEach(function(e,n){var i=f.getViewport(e);if(a)if("left"===e.eye)p.setViewport(0,0,.5,1);else{if("right"!==e.eye)return;p.setViewport(.5,0,1,1)}else if(t.xrSessionType===Rb.LookingGlassVR){var o=i.x/f.framebufferWidth,s=i.y/f.framebufferHeight,l=(i.x+i.width)/f.framebufferWidth,u=(i.y+i.height)/f.framebufferHeight;p.setViewport(o,s,l,u)}else p.setViewport(0,0,1,1);p.getActiveCamera().computeViewParametersFromPhysicalMatrix(e.transform.inverse.matrix),p.getActiveCamera().setProjectionMatrix(e.projectionMatrix),t.renderWindow.traverseAllPasses()}),d.scissor(0,0,f.framebufferWidth,f.framebufferHeight),d.disable(d.SCISSOR_TEST));case 7:case"end":return e.stop()}},e)})),t.xrRender=function(e,t){return i.apply(this,arguments)},e.delete=eE.chain(e.delete)}var Rw=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({newInstance:eE.newInstance(Rx,"vtkWebXRRenderWindowHelper"),extend:Rx},Rv),RA={boundMTime:0,actors:[],volumes:[],sourceDependencies:[],rescaleOnColorBy:!0},RC={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RA,n),mP.extend(e,t,n),ep(e,t,["rescaleOnColorBy"]),eu(e,t,["input","mapper","actors","volumes"]),function(e,t){function n(){if(t.input)for(var e=0;e<t.sourceDependencies.length;++e)t.sourceDependencies[e].setInputData(t.input.getDataset())}t.classHierarchy.push("vtkAbstractRepresentationProxy"),e.setInput=function(i){if(t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null),e.gcPropertyLinks("source"),t.input=i,e.updateColorByDomain(),t.input&&(n(),t.sourceSubscription=t.input.onDatasetChange(n)),t.links)for(var o=0;o<t.links.length;o++){var a=t.links[o],s=a.link,l=a.property,u=a.persistent,c=a.updateOnBind,d=a.type;if(void 0===d||"source"===d){var f=i.getPropertyLink(s,u);e.registerPropertyLinkForGC(f,"source"),f.bind(e,l,c)}}},e.getInputDataSet=function(){return t.input?t.input.getDataset():null},e.getDataArray=function(t,n){var i=b(e.getColorBy(),2),o=i[0],a=i[1],s=e.getInputDataSet(),l=s?s.getReferenceByName(n||a):null;return l?l.getArrayByName(t||o):null},e.getLookupTableProxy=function(n){var i=n||e.getColorBy()[0];return i?t.proxyManager.getLookupTable(i):null},e.setLookupTableProxy=function(){},e.getPiecewiseFunctionProxy=function(n){var i=n||e.getColorBy()[0];return i?t.proxyManager.getPiecewiseFunction(i):null},e.setPiecewiseFunctionProxy=function(){},e.rescaleTransferFunctionToDataRange=function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=e.getDataArray(n,i).getRange(o);t.proxyManager.rescaleTransferFunctionToDataRange(n,a)},e.isVisible=function(){return t.actors.length?t.actors[0].getVisibility():!!t.volumes.length&&t.volumes[0].getVisibility()},e.setVisibility=function(n){for(var i=0,o=t.actors.length;o--;)i+=t.actors[o].setVisibility(n);for(o=t.volumes.length;o--;)i+=t.volumes[o].setVisibility(n);i&&e.modified()},e.setColorBy=function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=gd.ColorMode.DEFAULT,s=gd.ScalarMode.DEFAULT,l=!!e.getDataArray(n,i),u=n?e.getLookupTableProxy(n).getLookupTable():null;u&&(-1===o?u.setVectorModeToMagnitude():(u.setVectorModeToComponent(),u.setVectorComponent(o))),l&&(a=gd.ColorMode.MAP_SCALARS,s="pointData"===i?gd.ScalarMode.USE_POINT_FIELD_DATA:gd.ScalarMode.USE_CELL_FIELD_DATA,t.mapper.setLookupTable&&t.mapper.setLookupTable(u),t.rescaleOnColorBy&&e.rescaleTransferFunctionToDataRange(n,i,o)),t.mapper.set({colorByArrayName:n,colorMode:a,scalarMode:s,scalarVisibility:l},!0)},e.getColorBy=function(){if(!t.mapper.getColorByArrayName){var n=e.getInputDataSet();return n.getPointData().getScalars()?[n.getPointData().getScalars().getName(),"pointData",-1]:n.getCellData().getScalars()?[n.getCellData().getScalars().getName(),"cellData",-1]:n.getPointData().getNumberOfArrays()?[n.getPointData().getArrayByIndex(0).getName(),"pointData",-1]:n.getCellData().getNumberOfArrays()?[n.getCellData().getArrayByIndex(0).getName(),"cellData",-1]:[]}var i=[],o=t.mapper.get("colorByArrayName","colorMode","scalarMode","scalarVisibility"),a=o.colorByArrayName,s=o.colorMode,l=o.scalarMode;if(o.scalarVisibility&&a&&(i.push(a),i.push(l===gd.ScalarMode.USE_POINT_FIELD_DATA?"pointData":"cellData")),s===gd.ColorMode.MAP_SCALARS&&a){var u=e.getLookupTableProxy(a).getLookupTable(),c=u.getVectorMode()===aq.VectorMode.MAGNITUDE?-1:u.getVectorComponent();i.push(c)}return i},e.listDataArrays=function(){var n=[];if(!t.input)return n;for(var i=e.getInputDataSet(),o=i.getPointData(),a=o.getNumberOfArrays(),s=0;s<a;s++){var l=o.getArrayByIndex(s);n.push({name:l.getName(),location:"pointData",numberOfComponents:l.getNumberOfComponents(),dataRange:l.getRange()})}var u=i.getCellData();a=u.getNumberOfArrays();for(var c=0;c<a;c++){var d=u.getArrayByIndex(c);n.push({name:d.getName(),location:"cellData",numberOfComponents:d.getNumberOfComponents(),dataRange:d.getRange()})}return n},e.updateColorByDomain=function(){e.updateProxyProperty("colorBy",{domain:{arrays:e.listDataArrays(),solidColor:!t.disableSolidColor}})},e.delete=eA(function(){t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null)},e.delete);var i=[],o=m(iG.INIT_BOUNDS);function a(e){e&&(iG.addBounds(o,e.getBounds()),i.push(e))}e.getNestedProps=function(){return i},e.getBounds=function(){return t.boundMTime<t.mtime&&(t.boundMTime=t.mtime,iG.reset(o),i.length=0,t.actors.forEach(a),t.volumes.forEach(a)),o}}(e,t),eP(e,t)}},RS={Preset:0,RGBPoints:1,HSVPoints:2,Nodes:3},R_={Preset:"Cool to Warm",RGBPoints:[[0,0,0,0],[1,1,1,1]],HSVPoints:[[0,0,0,0],[1,0,0,1]],Nodes:[{x:0,r:0,g:0,b:0,midpoint:.5,sharpness:0},{x:1,r:1,g:1,b:1,midpoint:.5,sharpness:0}]},RT={mode:RS.Preset,presetName:R_.Preset,rgbPoints:R_.RGBPoints,hsvPoints:R_.HSVPoints,nodes:R_.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function RO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RT,n),eE.obj(e,t),eE.setGet(e,t,["arrayName"]),eE.get(e,t,["mode","lookupTable","presetName","rgbPoints","hsvPoints","nodes","dataRange"]),t.classHierarchy.push("vtkLookupTableProxy"),t.lookupTable=t.lookupTable||xO.newInstance(),t.lookupTable.setVectorModeToMagnitude(),e.setPresetName=function(n){t.presetName!==n&&(t.presetName=n,t.mode=RS.Preset,e.applyMode())},e.setRGBPoints=function(n){t.rgbPoints!==n&&(t.rgbPoints=(n||R_.RGBPoints).slice(),e.applyMode())},e.setHSVPoints=function(n){t.hsvPoints!==n&&(t.hsvPoints=(n||R_.HSVPoints).slice(),e.applyMode())},e.setNodes=function(n){t.nodes!==n&&(t.nodes=(n||R_.Nodes).slice(),e.applyMode())},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){switch(t.mode){case RS.Preset:var n=Sx.getPresetByName(t.presetName);n&&t.lookupTable.applyColorMap(n);break;case RS.RGBPoints:t.lookupTable.removeAllPoints(),t.rgbPoints.forEach(function(e){var n;return(n=t.lookupTable).addRGBPointLong.apply(n,m(e))});break;case RS.HSVPoints:t.lookupTable.removeAllPoints(),t.hsvPoints.forEach(function(e){var n;return(n=t.lookupTable).addHSVPointLong.apply(n,m(e))});break;case RS.Nodes:t.lookupTable.setNodes(t.nodes)}t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.modified()},e.setDataRange=function(n,i){t.dataRange[0]===n&&t.dataRange[1]===i||(t.dataRange[0]=n,t.dataRange[1]=i,t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.applyMode())},e.applyMode(),eE.proxy(e,t)}var RP={newInstance:eE.newInstance(RO,"vtkLookupTableProxy"),extend:RO,Mode:RS,Defaults:R_};function RM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RM(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var RD={Gaussians:0,Points:1,Nodes:2},RI={Gaussians:[{position:.5,height:1,width:.5,xBias:.5,yBias:.5}],Points:[[0,0],[1,1]],Nodes:[{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}]};function Rk(e){return e.map(function(e){return RE({},e)})}var RN={mode:RD.Gaussians,gaussians:RI.Gaussians,points:RI.Points,nodes:RI.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function RR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RN,n),eE.obj(e,t),eE.setGet(e,t,["arrayName"]),eE.get(e,t,["piecewiseFunction","gaussians","nodes","points","mode","dataRange"]),t.classHierarchy.push("vtkPiecewiseFunctionProxy"),t.piecewiseFunction=t.piecewiseFunction||lW.newInstance(),e.setGaussians=function(n){t.gaussians=Rk(n||[]),0===t.gaussians.length&&(t.gaussians=Rk(RI.Gaussians)),e.applyMode()},e.setPoints=function(n){t.points=(n||[]).slice(),0===t.points.length&&(t.points=RI.Points.slice()),e.applyMode()},e.setNodes=function(n){t.nodes=(n||[]).slice(),0===t.nodes.length&&(t.nodes=RI.Nodes.slice()),e.applyMode()},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){var n,i,o,a,s,l,u,c,d,f;switch(t.mode){case RD.Gaussians:yy.applyGaussianToPiecewiseFunction(t.gaussians,255,t.dataRange,t.piecewiseFunction),e.modified();break;case RD.Points:n=t.points,i=t.dataRange,o=t.piecewiseFunction,a=i[1]-i[0],s=n.map(function(e){var t=b(e,2),n=t[0],o=t[1];return[n*a+i[0],o]}),o.removeAllPoints(),s.forEach(function(e){var t=b(e,2),n=t[0],i=t[1];return o.addPoint(n,i)}),e.modified();break;case RD.Nodes:l=t.nodes,u=t.dataRange,c=t.piecewiseFunction,d=u[1]-u[0],f=l.map(function(e){return RE(RE({},e),{},{x:e.x*d+u[0]})}),c.setNodes(f),e.modified()}},e.getLookupTableProxy=function(){return t.proxyManager.getLookupTable(t.arrayName)},e.setDataRange=function(n,i){t.dataRange[0]===n&&t.dataRange[1]===i||(t.dataRange[0]=n,t.dataRange[1]=i,e.applyMode())},e.applyMode(),eE.proxy(e,t)}var RB={newInstance:eE.newInstance(RR,"vtkPiecewiseFunctionProxy"),extend:RR,Mode:RD,Defaults:RI};function RL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function RF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RL(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var RV=eE.vtkErrorMacro;function Rj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function RG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rj(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RU(e){var t={};return e.listPropertyNames().forEach(function(n){t[n]=e.getPropertyByName(n).value}),t}function Rz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function RW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rz(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,{proxyIdMapping:{},proxyByGroup:{},proxyConfiguration:{},sv2rMapping:{},r2svMapping:{},collapseState:{},lookupTables:{},piecewiseFunctions:{},animating:!1},n),eE.obj(e,t),eE.setGet(e,t,["proxyConfiguration","activeSource","activeView"]),eE.event(e,t,"ActiveSourceChange"),eE.event(e,t,"ActiveViewChange"),eE.event(e,t,"ProxyRegistrationChange"),function(e,t){function n(n){var i=n.getProxyId?n.getProxyId():n,o=t.proxyIdMapping[i];return Object.keys(t.proxyByGroup).forEach(function(e){var n=t.proxyByGroup[e],i=n.indexOf(o);-1!==i&&n.splice(i,1)}),delete t.proxyIdMapping[i],o.gcPropertyLinks("application"),o.gcPropertyLinks("source"),o.setProxyManager(null),e.invokeProxyRegistrationChange({action:"unregister",proxyId:i,proxyName:o.getProxyName(),proxyGroup:o.getProxyGroup(),proxy:o}),o}e.setActiveSource=function(n){t.activeSource!==n&&(t.activeSourceSubscription&&(t.activeSourceSubscription.unsubscribe(),t.activeSourceSubscription=null),t.activeSource=n,n&&(t.activeSourceSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveSourceChange(n))},e.setActiveView=function(n){t.activeView!==n&&(t.activeViewSubscription&&(t.activeViewSubscription.unsubscribe(),t.activeViewSubscription=null),t.activeView=n,n&&(t.activeViewSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveViewChange(n))},e.getProxyById=function(e){return t.proxyIdMapping[e]},e.getProxyGroups=function(){return Object.keys(t.proxyByGroup)},e.getProxyInGroup=function(e){return[].concat(t.proxyByGroup[e]||[])},e.getSources=function(){return[].concat(t.proxyByGroup.Sources||[])},e.getRepresentations=function(){return[].concat(t.proxyByGroup.Representations||[])},e.getViews=function(){return[].concat(t.proxyByGroup.Views||[])},e.createProxy=function(n,i,o){var a=t.proxyConfiguration.definitions;if(!a[n]||!a[n][i])return null;var s=a[n][i],l=RF(RF({},s.options),o),u=s.class.newInstance(RF(RF({},l),{},{proxyGroup:n,proxyName:i,proxyManager:e}));if(s.proxyProps){var c={};Object.keys(s.proxyProps).forEach(function(t){var n=s.proxyProps[t];c[t]=e.createProxy(n.group,n.name,n.options)}),u.set(c)}return s.props&&u.set(s.props),function(n){if(n){t.proxyIdMapping[n.getProxyId()]=n;var i=n.getProxyGroup();t.proxyByGroup[i]||(t.proxyByGroup[i]=[]),-1===t.proxyByGroup[i].indexOf(n)&&t.proxyByGroup[i].push(n),n.setProxyManager(e),eE.setImmediate(function(){e.invokeProxyRegistrationChange({action:"register",proxyId:n.getProxyId(),proxyName:n.getProxyName(),proxyGroup:n.getProxyGroup(),proxy:n})})}}(u),l.activateOnCreate&&u.activate(),u},e.getRepresentation=function(n,i){var o=n||e.getActiveSource(),a=i||e.getActiveView();if(!o||!a||!o.getType())return null;var s=o.getProxyId(),l=a.getProxyId(),u=t.sv2rMapping[s];u||(u={},t.sv2rMapping[s]=u);var c=u[l];if(!c){var d=a.getProxyName(),f=o.getType(),p=t.proxyConfiguration.representations[d][f];if(!p)return RV("No definition for representation of ".concat(f," in view ").concat(d)),null;c=e.createProxy("Representations",p.name,p.options),t.r2svMapping[c.getProxyId()]={sourceId:s,viewId:l},u[l]=c,c.setInput(o),a.addRepresentation(c)}return c},e.deleteProxy=function(i){var o=i.getProxyGroup().toLowerCase();if("views"===o)i.getRepresentations().forEach(function(t){e.deleteProxy(t)}),i.setContainer(null),n(i),e.getActiveView()===i&&e.setActiveView(e.getViews()[0]);else if("representations"===o){var a=t.r2svMapping[i.getProxyId()],s=a.sourceId,l=a.viewId;e.getProxyById(l).removeRepresentation(i),delete t.r2svMapping[i.getProxyId()],delete t.sv2rMapping[s][l],n(i)}else if("sources"===o){var u=t.sv2rMapping[i.getProxyId()];Object.keys(u).forEach(function(t){e.deleteProxy(u[t])}),n(i),e.getActiveSource()===i&&e.setActiveSource(e.getSources()[0])}else n(i);i.delete()}}(e,t),e.loadState=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,o){var a={},s={},l={},u=n.datasetHandler||M,c=[];t.sources.forEach(function(t){var n=t.id,i=t.group,o=t.name,s=t.props;c.push(Promise.resolve(u(s.dataset)).then(function(t){if(t){var l=e.createProxy(i,o);return l.setName(s.name),l.setInputData(t,s.type),a[n]=l,l}return null}))}),Promise.all(c).then(function(){var n=e.getViews();function o(e){a[e]&&l[e]&&a[e].resetOrientation().then(function(){a[e].getCamera().set(l[e]),a[e].getRenderer().updateLightsGeometryToFollowCamera(),a[e].renderLater()})}t.views.forEach(function(i){var o=i.id,s=i.group,u=i.name,c=i.props,d=i.camera,f=null;t.options.recycleViews&&(f=n.find(function(e){return e.getProxyGroup()===s&&e.getProxyName()===u&&e.getName()===c.name})),f?f.setDisableAnimation(!0):f=e.createProxy(s,u,{disableAnimation:!0}),f.set(c,!0),a[o]=f,l[o]=d}),t.representations.forEach(function(t){var n=t.source,i=t.view,s=t.props;e.getRepresentation(a[n],a[i]).set(s,!0),o(i)}),Object.keys(t.fields).forEach(function(n){var i=t.fields[n],o=i.lookupTable,a=i.piecewiseFunction,s=e.getLookupTable(n,o);s.setPresetName(o.presetName),s.setDataRange.apply(s,m(o.dataRange));var l=e.getPiecewiseFunction(n,a);switch(a.mode){case RB.Mode.Gaussians:l.setGaussians(a.gaussians);break;case RB.Mode.Points:l.setPoints(a.points);break;case RB.Mode.Nodes:l.setNodes(a.nodes)}l.setMode(a.mode),l.setDataRange.apply(l,m(a.dataRange))}),Object.keys(l).forEach(o),Object.keys(a).forEach(function(e){var t=a[e].getProxyId();s[e]=t}),t.views.forEach(function(e){a[e.id].setDisableAnimation(!1)}),i(RG(RG({},t.userData),{},{$oldToNewIdMapping:s}))}).catch(o)})},e.saveState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,o){var a=e.getSources(),s=e.getViews(),l=t.datasetHandler||function(e){return e.getState()};delete t.datasetHandler;var u=[],c=new Set,d={userData:n,options:t,sources:[],views:[],representations:[],fields:{}};a.forEach(function(e){var t=Promise.resolve(l(e.getDataset(),e));u.push(t),d.sources.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:{name:e.getName(),type:e.getType(),dataset:t}})}),s.forEach(function(e){var t=e.getCamera().get("position","viewUp","focalPoint");d.views.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:Object.assign(RU(e),e.get("axis","orientation","viewUp")),camera:t}),e.getRepresentations().forEach(function(t){d.representations.push({source:t.getInput().getProxyId(),view:e.getProxyId(),props:RU(t)}),c.add(t.getColorBy()[0])})}),c.forEach(function(t){d.fields[t]={lookupTable:e.getLookupTable(t).get("mode","presetName","rgbPoints","hsvPoints","nodes","arrayName","arrayLocation","dataRange"),piecewiseFunction:e.getPiecewiseFunction(t).get("mode","gaussians","points","nodes","arrayName","arrayLocation","dataRange")}}),Promise.all(u).then(function(){for(var e=function(e){d.sources[e].props.dataset.then(function(t){d.sources[e].props.dataset=t})},t=0;t<d.sources.length;t++)e(t);i(d)}).catch(o)})},function(e,t){function n(){t.animating=!1;for(var n=e.getViews(),i=0;i<n.length;i++)n[i].setAnimation(!1,e)}e.create3DView=function(t){return e.createProxy("Views","View3D",t)},e.create2DView=function(t){return e.createProxy("Views","View2D",t)},e.render=function(t){var n=t||e.getActiveView();n&&n.renderLater()},e.renderAllViews=function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getViews(),i=0;i<n.length;i++)n[i].render(t)},e.setAnimationOnAllViews=function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getViews().filter(function(e){return!t||e.getContainer()}),i=0;i<n.length;i++)n[i].setAnimation(t,e)},e.autoAnimateViews=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;if(!t.animating){t.animating=!0;for(var o=e.getViews().filter(function(e){return e.getContainer()}),a=0;a<o.length;a++)o[a].setAnimation(!0,e);t.clearAnimations=eE.debounce(n,i)}t.clearAnimations()},e.resizeAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resize()},e.resetCamera=function(t){var n=t||e.getActiveView();n&&n.resetCamera&&n.resetCamera()},e.createRepresentationInAllViews=function(t){for(var n=e.getViews(),i=0;i<n.length;i++)e.getRepresentation(t,n[i])},e.resetCameraInAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resetCamera()}}(e,t),e.getSections=function(){var n=[],i=e.getActiveSource();if(!i)return[];var o=e.getActiveView();if(i){var a=i.getProxySection();a.ui.length&&n.push(Object.assign(a,{collapsed:t.collapseState[a.name]}))}if(i&&o){var s=e.getRepresentation(i,o);if(s){var l=s.getProxySection();l.ui.length&&n.push(Object.assign(l,{collapsed:t.collapseState[l.name]}))}}if(o){var u=o.getProxySection();u.ui.length&&n.push(Object.assign(u,{collapsed:t.collapseState[u.name]}))}return n},e.updateCollapseState=function(n,i){t.collapseState[n]=i,e.modified()},e.applyChanges=function(t){for(var n={},i=Object.keys(t),o=i.length;o--;){var a=i[o],s=b(a.split(":"),2),l=s[0],u=s[1];if(n[l]||(n[l]={}),"__command_execute__"===t[a]){var c=e.getProxyById(l);c&&c[u]()}else n[l][u]=t[a]}var d=Object.keys(n);for(o=d.length;o--;){var f=d[o],p=e.getProxyById(f);p&&p.set(n[f])}e.modified(),e.renderAllViews()},e.getLookupTable=function(n,i){return t.lookupTables[n]||(t.lookupTables[n]=e.createProxy("Proxy","LookupTable",RW({arrayName:n},i))),t.lookupTables[n]},e.getPiecewiseFunction=function(n,i){return t.piecewiseFunctions[n]||(t.piecewiseFunctions[n]=e.createProxy("Proxy","PiecewiseFunction",RW({arrayName:n},i))),t.piecewiseFunctions[n]},e.rescaleTransferFunctionToDataRange=function(t,n){var i=e.getLookupTable(t),o=e.getPiecewiseFunction(t);i.setDataRange(n[0],n[1]),o.setDataRange(n[0],n[1])},eE.proxy(e,t),t.classHierarchy.push("vtkProxyManager")}var Rq={newInstance:eE.newInstance(RH,"vtkProxyManager"),extend:RH},RK={name:"Default source"};function RX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RK,n),eE.obj(e,t),eE.get(e,t,["name","type","dataset","algo","inputProxy"]),eE.set(e,t,["name"]),eE.event(e,t,"DatasetChange"),eE.proxy(e,t),t.classHierarchy.push("vtkSourceProxy"),e.setInputProxy=function(n){t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null),t.inputProxy=n,t.inputProxy&&(t.inputSubscription=n.onModified(e.update,-1).unsubscribe),e.update()},e.setInputData=function(n,i){t.dataset!==n&&(t.dataset=n,t.type=i||n.getClassName(),e.modified(),e.invokeDatasetChange())},e.setInputAlgorithm=function(n,i){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.type=i,t.algo!==n&&(t.algo=n,t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),n&&o&&(t.algoSubscription=n.onModified(function(){e.update()},-1).unsubscribe,e.update()))},e.update=function(){t.algo&&t.inputProxy&&t.algo.setInputData(t.inputProxy.getDataset()),t.updateDomain&&t.inputProxy&&t.updateDomain(e,t.inputProxy.getDataset()),t.algo&&e.setInputData(t.algo.getOutputData(),t.type)},e.getUpdate=function(){return t.algo.getMTime()>t.dataset.getMTime()},e.delete=eE.chain(function(){t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null)},e.delete),t.inputProxy&&(t.inputSubscription=t.inputProxy.onModified(function(){e.update()},-1).unsubscribe),t.algoFactory&&e.setInputAlgorithm(t.algoFactory.newInstance(),null,t.autoUpdate),e.update(),t.proxyPropertyMapping&&eE.proxyPropertyMapping(e,t,t.proxyPropertyMapping)}var RY={newInstance:eE.newInstance(RX,"vtkSourceProxy"),extend:RX},RZ={slice:g5.vtkMouseCameraSliceManipulator,multiRotate:g5.vtkMouseCameraTrackballMultiRotateManipulator,pan:g5.vtkMouseCameraTrackballPanManipulator,roll:g5.vtkMouseCameraTrackballRollManipulator,rotate:g5.vtkMouseCameraTrackballRotateManipulator,axisRotate:g5.vtkMouseCameraAxisRotateManipulator,zoom:g5.vtkMouseCameraTrackballZoomManipulator,zoomToMouse:g5.vtkMouseCameraTrackballZoomToMouseManipulator,range:g5.vtkMouseRangeManipulator,vrPan:g5.vtkVRButtonPanManipulator,gestureCamera:g5.vtkGestureCameraManipulator,movement:g5.vtkKeyboardCameraManipulator,freeLook:g5.vtkMouseCameraTrackballFirstPersonManipulator,unicam:g5.vtkMouseCameraUnicamManipulator,unicamRotate:g5.vtkMouseCameraUnicamRotateManipulator},RJ={"3D":[{type:"rotate"},{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,control:!0}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"vrPan"},{type:"gestureCamera"}],"2D":[{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"roll",options:{shift:!0}},{type:"vrPan"},{type:"gestureCamera"}],FirstPerson:[{type:"movement"},{type:"freeLook"}],Unicam:[{type:"unicam"}],zRotateTop:[{type:"pan",options:{shift:!0}},{type:"axisRotate",options:{rotationAxis:[0,0,1],useHalfAxis:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}}],zRotateAll:[{type:"pan",options:{shift:!0}},{type:"axisRotate",options:{rotationAxis:[0,0,1],useHalfAxis:!1}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}}]};function RQ(e,t){t.removeAllManipulators();for(var n=0;n<e.length;n++){var i=e[n],o=RZ[i.type].newInstance(i.options);o.isA("vtkCompositeVRManipulator")?t.addVRManipulator(o):o.isA("vtkCompositeGestureManipulator")?t.addGestureManipulator(o):o.isA("vtkCompositeKeyboardManipulator")?t.addKeyboardManipulator(o):t.addMouseManipulator(o)}return!0}var R$=function(e,t){return RQ(RJ[e],t)},R0=["format"],R1={representations:[],sectionName:"view",annotationOpacity:1,resetCameraOnFirstRender:!0,presetToOrientationAxes:"lps",orientationAxesType:"arrow",disableAnimation:!1,axis:1,orientation:0,viewUp:[0,0,1]};function R2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,R1,n),es(e,t),ep(e,t,["name","disableAnimation","resetCameraOnFirstRender"]),eu(e,t,["annotationOpacity","camera","container","cornerAnnotation","interactor","interactorStyle2D","interactorStyle3D","_openGLRenderWindow","orientationAxesType","presetToOrientationAxes","renderer","renderWindow","representations","useParallelRendering"]),ev(0,t,["openGLRenderWindow"]),ex(e,t,"Resize"),function(e,t){function n(){var e=b(t.renderer.getBackground(),3),n=e[0],i=e[1],o=e[2];t.cornerAnnotation.getAnnotationContainer().style.color=n+i+o>1.5?"black":"white"}t.classHierarchy.push("vtkViewProxy"),t.renderWindow=Om.newInstance(),t.renderer=yj.newInstance({background:[0,0,0]}),t.renderWindow.addRenderer(t.renderer),t._openGLRenderWindow=t.renderWindow.newAPISpecificView(),t.renderWindow.addView(t._openGLRenderWindow),t.interactor=hj.newInstance(),t.interactor.setView(t._openGLRenderWindow),t.interactorStyle3D=mt.newInstance(),t.interactorStyle2D=mt.newInstance(),t._resetCamera=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t.renderer.resetCamera(e)},R$("3D",t.interactorStyle3D),R$("2D",t.interactorStyle2D),t.cornerAnnotation=vV.newInstance(),t.interactor.setInteractorStyle(t.useParallelRendering?t.interactorStyle2D:t.interactorStyle3D),t.camera=t.renderer.getActiveCamera(),t.camera.setParallelProjection(!!t.useParallelRendering),t.orientationAxesArrow=S0.newInstance(),t.orientationAxesCube=SK.newInstance(),SG.applyPreset("default",t.orientationAxesCube),SG.applyPreset("lps",t.orientationAxesCube),t.orientationAxesMap={arrow:t.orientationAxesArrow,cube:t.orientationAxesCube},t.orientationWidget=yX.newInstance({actor:t.orientationAxesArrow,interactor:t.renderWindow.getInteractor()}),t.orientationWidget.setEnabled(!0),t.orientationWidget.setViewportCorner(yX.Corners.BOTTOM_LEFT),t.orientationWidget.setViewportSize(.1),e.setPresetToInteractor3D=function(e){return Array.isArray(e)?RQ(e,t.interactorStyle3D):R$(e,t.interactorStyle3D)},e.setPresetToInteractor2D=function(e){return Array.isArray(e)?RQ(e,t.interactorStyle2D):R$(e,t.interactorStyle2D)},e.setOrientationAxesType=function(n){var i=t.orientationAxesMap[n];i&&(t.orientationAxesType=n,t.orientationWidget.setActor(i),e.renderLater())},e.registerOrientationAxis=function(e,n){t.orientationAxesMap[e]=n},e.unregisterOrientationAxis=function(e){delete t.orientationAxesMap[e]},e.listOrientationAxis=function(){return Object.keys(t.orientationAxesMap)},e.setPresetToOrientationAxes=function(n){var i=!1;return"string"==typeof n?t.presetToOrientationAxes!==n&&(t.presetToOrientationAxes=n,i=SG.applyPreset(n,t.orientationAxesCube),e.modified()):(t.presetToOrientationAxes="Custom",i=SG.applyDefinitions(n,t.orientationAxesCube),e.modified()),i},e.setContainer=function(e){var n=t.orientationWidget.getEnabled();t.container&&(t.orientationWidget.setEnabled(!1),t.interactor.unbindEvents(t.container),t._openGLRenderWindow.setContainer(null),t.cornerAnnotation.setContainer(null)),t.container=e,e&&(t._openGLRenderWindow.setContainer(e),t.cornerAnnotation.setContainer(e),t.interactor.initialize(),t.interactor.bindEvents(e),t.orientationWidget.setEnabled(n))},e.resize=function(){if(t.container){var n=t.container.getBoundingClientRect();if(n.width!==n.height||0!==n.width){var i=window.devicePixelRatio||1,o=Math.max(10,Math.floor(i*n.width)),a=Math.max(10,Math.floor(i*n.height));t._openGLRenderWindow.setSize(o,a),e.invokeResize({width:o,height:a}),e.renderLater()}}},e.renderLater=function(){e.render(!1)},e.render=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.representations.length>0&&t.resetCameraOnFirstRender&&(t.resetCameraOnFirstRender=!1,e.resetCamera()),t.orientationWidget.updateMarkerOrientation(),t.renderer.resetCameraClippingRange(),n?t.renderWindow.render():setTimeout(t.renderWindow.render,0)},e.addRepresentation=function(e){e&&-1===t.representations.indexOf(e)&&(t.representations.push(e),t.renderer.addViewProp(e))},e.removeRepresentation=function(e){e&&(-1!==t.representations.indexOf(e)&&(t.representations=t.representations.filter(function(t){return t!==e}),t.renderer.removeViewProp(e)),0===t.representations.length&&(t.resetCameraOnFirstRender=!0))},e.setCameraParameters=function(e){var n,i,o=e.position,a=e.focalPoint,s=e.bounds,l=e.parallelScale,u=e.viewAngle;null!=o&&(n=t.camera).setPosition.apply(n,m(o)),null!=a&&(i=t.camera).setFocalPoint.apply(i,m(a)),null!=s?t.renderer.resetCameraClippingRange(s):t.renderer.resetCameraClippingRange(),null!=l&&t.camera.setParallelScale(l),null!=u&&t.camera.setViewAngle(u)},e.resetCamera=function(){t._resetCamera(),t.interactorStyle2D.setCenterOfRotation(t.camera.getFocalPoint()),t.interactorStyle3D.setCenterOfRotation(t.camera.getFocalPoint()),e.renderLater()},e.captureImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,R0);return t.renderWindow.captureImages(void 0===n?"image/png":n,i)[0]},e.openCaptureImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_blank",n=new Image;return e.captureImage().then(function(e){n.src=e;var i=window.open("",t);i.document.write(n.outerHTML),i.document.title="vtk.js Image Capture",window.focus()})},e.setCornerAnnotation=function(e,n){t.cornerAnnotation.updateTemplates(y({},e,function(e){return vV.applyTemplate(n,e)}))},e.setCornerAnnotations=function(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.keys(n).forEach(function(t){e.setCornerAnnotation(t,n[t])}):t.cornerAnnotation.updateTemplates(n)},e.updateCornerAnnotation=function(e){return t.cornerAnnotation.updateMetadata(e)},e.setAnnotationOpacity=function(n){t.annotationOpacity!==Number(n)&&(t.annotationOpacity=Number(n),t.cornerAnnotation.getAnnotationContainer().style.opacity=n,e.modified())},e.setBackground=eA(t.renderer.setBackground,n),e.getBackground=t.renderer.getBackground,e.setAnimation=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!t.disableAnimation||!n)if(n)t.renderWindow.getInteractor().requestAnimation(i);else{var o=i===e||0==="".concat(i).indexOf("ViewProxy.moveCamera.");t.renderWindow.getInteractor().cancelAnimation(i,o)}},e.updateOrientation=function(n,i,o){var a,s,l,u,c,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0===n)return Promise.resolve();var f=t.camera.getPosition(),p=t.camera.getViewUp(),h=t.camera.getFocalPoint();t.axis=n,t.orientation=i,t.viewUp=o;var g=t.camera.getFocalPoint();g[t.axis]+=t.orientation,(a=t.camera).setPosition.apply(a,m(g)),(s=t.camera).setViewUp.apply(s,m(o)),t.renderer.resetCamera();var v=t.camera.getFocalPoint(),y=t.camera.getPosition(),b=t.camera.getViewUp();return(l=t.camera).setFocalPoint.apply(l,m(h)),(u=t.camera).setPosition.apply(u,m(f)),(c=t.camera).setViewUp.apply(c,m(p)),e.moveCamera(v,y,b,d)},e.moveCamera=function(n,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=t.camera.getFocalPoint(),l=t.camera.getPosition(),u=t.camera.getViewUp(),c=[{focalPoint:n,position:i,viewUp:o}];if(a){var d=[(s[0]-n[0])/a,(s[1]-n[1])/a,(s[2]-n[2])/a],f=[(l[0]-i[0])/a,(l[1]-i[1])/a,(l[2]-i[2])/a],p=[(u[0]-o[0])/a,(u[1]-o[1])/a,(u[2]-o[2])/a],h=d[0]||d[1]||d[2]||f[0]||f[1]||f[2]||p[0]||p[1]||p[2],g=d.map(function(e){return 1e-6>Math.abs(e)?0:1}).reduce(function(e,t){return e+t},0),v=f.map(function(e){return 1e-6>Math.abs(e)?0:1}).reduce(function(e,t){return e+t},0),y=p.map(function(e){return 1e-6>Math.abs(e)?0:1}).reduce(function(e,t){return e+t},0);if(h)if(1===y&&0===v&&0===g)for(var b=s.map(function(e,t){return 1e-6>Math.abs(l[t]-e)?t:null}).filter(function(e){return null!==e}),x=b.find(function(e){return 1e-6>Math.abs(p[e])}),w=0;w<a;w++){var A=[o[0]+(w+1)*p[0],o[1]+(w+1)*p[1],o[2]+(w+1)*p[2]];A[x]=Math.sin(Math.PI*w/(a-1)),c.push({focalPoint:n,position:i,viewUp:A})}else for(var C=0;C<a;C++)c.push({focalPoint:[n[0]+(C+1)*d[0],n[1]+(C+1)*d[1],n[2]+(C+1)*d[2]],position:[i[0]+(C+1)*f[0],i[1]+(C+1)*f[1],i[2]+(C+1)*f[2]],viewUp:[o[0]+(C+1)*p[0],o[1]+(C+1)*p[1],o[2]+(C+1)*p[2]]})}return 1===c.length?(t.camera.set(c.pop()),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera(),Promise.resolve()):new Promise(function(n,i){var o=performance.now().toString(),a="ViewProxy.moveCamera.".concat(o);e.setAnimation(!0,a);var s=null;s=setInterval(function(){if(c.length){var i,o,l,u=c.pop(),d=u.focalPoint,f=u.position,p=u.viewUp;(i=t.camera).setFocalPoint.apply(i,m(d)),(o=t.camera).setPosition.apply(o,m(f)),(l=t.camera).setViewUp.apply(l,m(p)),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera()}else clearInterval(s),e.setAnimation(!1,a),n()},1)})},e.resetOrientation=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.updateOrientation(t.axis,t.orientation,t.viewUp,n)},e.rotate=function(e){var n,i=t.camera.get("viewUp","focalPoint","position"),o=i.viewUp,a=i.focalPoint,s=i.position,l=[a[0]-s[0],a[1]-s[1],a[2]-s[2]];a$.buildFromDegree().rotate(Number.isNaN(e)?90:e,l).apply(o),(n=t.camera).setViewUp.apply(n,m(o)),t.camera.modified(),t.orientationWidget.updateMarkerOrientation(),t.renderWindow.render()},e.focusTo=eA(t.camera.setFocalPoint,t.interactorStyle2D.setCenterOfRotation,t.interactorStyle3D.setCenterOfRotation),e.delete=eA(function(){e.setContainer(null),t.orientationWidget.setEnabled(!1),t.orientationWidget.delete(),t.orientationAxesArrow.delete(),t.orientationAxesCube.delete(),t.interactorStyle2D.delete(),t.interactorStyle3D.delete(),t.cornerAnnotation.delete(),t.interactor.delete(),t.renderer.delete(),t._openGLRenderWindow.delete(),t.renderWindow.delete()},e.delete),e.resetOrientation(),n()}(e,t),eP(e,t),eM(e,t,{orientationAxesVisibility:{modelKey:"orientationWidget",property:"enabled"},orientationAxesCorner:{modelKey:"orientationWidget",property:"viewportCorner"},orientationAxesSize:{modelKey:"orientationWidget",property:"viewportSize"},cameraViewUp:{modelKey:"camera",property:"viewUp",modified:!1},cameraPosition:{modelKey:"camera",property:"position",modified:!1},cameraFocalPoint:{modelKey:"camera",property:"focalPoint",modified:!1}})}var R3={newInstance:ew(R2,"vtkViewProxy"),extend:R2},R4={axis:2,orientation:-1,viewUp:[0,1,0],useParallelRendering:!0,sliceRepresentationSubscriptions:[],fitProps:!1};function R5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,R4,n),R3.extend(e,t,n),eE.get(e,t,["axis"]),eE.setGet(e,t,["fitProps"]),function(e,t){t.classHierarchy.push("vtkView2DProxy"),e.updateWidthHeightAnnotation=function(){var n=t.cornerAnnotation.getMetadata(),i=n.ijkOrientation,o=n.dimensions;if(i&&o){var a=o;o.length>3&&(a=o.split(",").map(Number));var s=t.camera.getDirectionOfProjection(),l=t.camera.getViewUp(),u=[0,0,0];tf(s,l,u);var c=nM(u),d=nM(l),f=a["IJK".indexOf(i[c])],p=a["IJK".indexOf(i[d])];e.updateCornerAnnotation({sliceWidth:f,sliceHeight:p})}};var n=e.updateOrientation;e.updateOrientation=function(i,o,a){for(var s=n(i,o,a),l=t.representations.length;l--;){var u=t.representations[l],c="XYZ"[i];u.setSlicingMode&&u.setSlicingMode(c)}return e.updateCornerAnnotation({axis:"XYZ"[i]}),s};var i=e.addRepresentation;e.addRepresentation=function(n){i(n),n.setSlicingMode&&n.setSlicingMode("XYZ"[t.axis]),e.bindRepresentationToManipulator(n)};var o=e.removeRepresentation;e.removeRepresentation=function(n){if(o(n),n===t.sliceRepresentation){e.bindRepresentationToManipulator(null);for(var i=t.representations.length;i--;)e.bindRepresentationToManipulator(t.representations[i])&&(i=0)}};var a=t._resetCamera;function s(n){e.updateCornerAnnotation({windowWidth:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowWidth&&t.sliceRepresentation.setWindowWidth(n)}function l(n){e.updateCornerAnnotation({windowLevel:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowLevel&&t.sliceRepresentation.setWindowLevel(n)}function u(n){var i=Number(n),o={slice:Number.isInteger(i)?n:i.toFixed(2)};if(t.sliceRepresentation&&t.sliceRepresentation.setSlice&&t.sliceRepresentation.setSlice(i),t.sliceRepresentation&&t.sliceRepresentation.getAnnotations){var a=t.sliceRepresentation.getAnnotations();Object.keys(a).forEach(function(e){o[e]=function e(t){return Array.isArray(t)?t.map(e).join(", "):Number.isInteger(t)?t:Number.isFinite(t)?.01>Math.abs(t)?"0":t.toFixed(2):t}(a[e])})}e.updateCornerAnnotation(o)}t._resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=a(n);if(!t.fitProps||!t.useParallelRendering||!i)return i;var o=[];if(n?iG.getCorners(n,o):e.getRepresentations().forEach(function(e){return[e.getActors(),e.getVolumes()].flat().forEach(function(e){return o.push.apply(o,m(function(e){if(!e.getVisibility()||!e.getUseBounds())return[];var t,n,i,o=e.getBounds(),a=null,s=null==e||null==(t=e.getMapper)?void 0:t.call(e),l=null==s||null==(n=s.getBounds)?void 0:n.call(s);if(iG.isValid(l)&&e.getMatrix&&(o=l,of(a=e.getMatrix().slice(),a),s.isA("vtkImageMapper")&&null!=(i=s.getInputData())&&i.isA("vtkImageData"))){e.computeMatrix();var u=s.getInputData();o=u.getSpatialExtent();var c=u.getIndexToWorld();o1(a,a,c)}if(!iG.isValid(o))return[];var d=[];return iG.getCorners(o,d),a&&d.forEach(function(e){return rO(e,e,a)}),d}(e)))})}),!o)return i;var s=iG.reset([]),l=t.camera.getViewMatrix();of(l,l);for(var u=0;u<o.length;++u){var c=o[u];rO(c,c,l),iG.addPoint.apply(iG,[s].concat(m(c)))}var d=t.renderer.getRenderWindow().getViews()[0].getViewportSize(t.renderer),f=d[1]&&d[0]?d[0]/d[1]:1,p=iG.getLength(s,0),h=.5*Math.max(iG.getLength(s,1),p/f),g=iG.getCenter(s),v=h/Math.tan(.5*eK(t.camera.getViewAngle())),y=[g[0],g[1],s[5]+v],b=new Float64Array(16),x=new Float64Array(3),w=new Float64Array(3);if(op(b,l),rO(x,g,b),rO(w,y,b),h<=0)return i;var A=iG.transformBounds(s,b);return e.setCameraParameters({position:w,focalPoint:x,bounds:A,parallelScale:h}),!0},t.rangeManipulator=g2.newInstance({button:1,scrollEnabled:!0}),t.interactorStyle2D.addMouseManipulator(t.rangeManipulator),e.bindRepresentationToManipulator=function(n){var i=0;if(!n.getProxyId)return i;for(t.rangeManipulator.removeAllListeners(),t.sliceRepresentation=n;t.sliceRepresentationSubscriptions.length;)t.sliceRepresentationSubscriptions.pop().unsubscribe();if(n){if(t.sliceRepresentationSubscriptions.push(t.camera.onModified(e.updateWidthHeightAnnotation)),n.getWindowWidth){var o=function(){return s(n.getWindowWidth())},a=n.getPropertyDomainByName("windowWidth"),c=a.min,d=a.max,f=a.step;f&&"any"!==f||(f=1/512),t.rangeManipulator.setVerticalListener(c,d,f,n.getWindowWidth,s),t.sliceRepresentationSubscriptions.push(n.onModified(o)),o(),i++}if(n.getWindowLevel){var p=function(){return l(n.getWindowLevel())},h=n.getPropertyDomainByName("windowLevel"),m=h.min,g=h.max,v=h.step;v&&"any"!==v||(v=1/512),t.rangeManipulator.setHorizontalListener(m,g,v,n.getWindowLevel,l),t.sliceRepresentationSubscriptions.push(n.onModified(p)),p(),i++}var y=n.getPropertyDomainByName("slice");if(n.getSlice&&y){var b=function(){return u(n.getSlice())};t.rangeManipulator.setScrollListener(y.min,y.max,y.step,n.getSlice,u),t.sliceRepresentationSubscriptions.push(n.onModified(b)),b(),i++}}return i}}(e,t)}var R6=eE.newInstance(R5,"vtkView2DProxy"),R8={representation:{"Surface with edges":{property:{edgeVisibility:!0,representation:2}},Surface:{property:{edgeVisibility:!1,representation:2}},Wireframe:{property:{edgeVisibility:!1,representation:1}},Points:{property:{edgeVisibility:!1,representation:0}}}},R9={representation:"Surface"},R7={representation:"Surface"};function Be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,R7,n),RC.extend(e,t,n),t.classHierarchy.push("vtkGeometryRepresentationProxy"),t.mapper=gd.newInstance({interpolateScalarsBeforeMapping:!0,useLookupTableScalarRange:!0,scalarVisibility:!1}),t.actor=mH.newInstance(),t.property=t.actor.getProperty(),t.sourceDependencies.push(t.mapper),t.actor.setMapper(t.mapper),t.actors.push(t.actor),eE.proxyPropertyState(e,t,R8,R9),eE.proxyPropertyMapping(e,t,{opacity:{modelKey:"property",property:"opacity"},visibility:{modelKey:"actor",property:"visibility"},color:{modelKey:"property",property:"diffuseColor"},interpolateScalarsBeforeMapping:{modelKey:"mapper",property:"interpolateScalarsBeforeMapping"},pointSize:{modelKey:"property",property:"pointSize"},useShadow:{modelKey:"property",property:"lighting"},lineWidth:{modelKey:"property",property:"lineWidth"},useBounds:{modelKey:"actor",property:"useBounds"}})}var Bt={newInstance:eE.newInstance(Be,"vtkGeometryRepresentationProxy"),extend:Be},Bn={};function Br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bn,n),RC.extend(e,t,n),t.classHierarchy.push("vtkGlyphRepresentationProxy"),t.property=mG.newInstance(),t.sourceDependencies.push({setInputData:function(e){t.actors.length=0;var n=xO.newInstance();n.applyColorMap({RGBPoints:e.rgbPoints}),t.glyph={};for(var i=e.glyph.length;i--;){var o=e.glyph[i];t.glyph[o.id]=M(o)}for(i=e.mapping.length;i--;){var a=e.mapping[i],s=t.glyph[a.glyphId],l=lC.newInstance();l.getPoints().setData(Float32Array.from(a.coordinates),3),a.scale&&l.getPointData().addArray(nH.newInstance({name:"scaling",values:Float32Array.from(a.scale),numberOfComponents:3}));var u=TB.newInstance({useLookupTableScalarRange:!0,lookupTable:n,orient:!1,scaling:!!a.scale,scaleArray:"scaling",scaleMode:TB.ScaleModes.SCALE_BY_COMPONENTS}),c=mH.newInstance();t.property&&c.setProperty(t.property),c.setMapper(u),u.setInputData(l,0),u.setInputConnection(s.getOutputPort(),1),t.actors.push(c)}}}),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]},eE.proxyPropertyMapping(e,t,{edgeVisibility:{modelKey:"property",property:"edgeVisibility"}})}var Bi={newInstance:eE.newInstance(Br,"vtkGlyphRepresentationProxy"),extend:Br},Bo={};function Ba(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bo,n),RC.extend(e,t,n),t.classHierarchy.push("vtkMoleculeRepresentationProxy"),t.filter=dg.newInstance(),t.sphereMapper=OI.newInstance(),t.stickMapper=OR.newInstance(),t.sphereActor=mH.newInstance(),t.stickActor=mH.newInstance(),t.sourceDependencies.push(t.filter),t.sphereMapper.setInputConnection(t.filter.getOutputPort(0)),t.sphereMapper.setScaleArray(t.filter.getSphereScaleArrayName()),t.sphereActor.setMapper(t.sphereMapper),t.stickMapper.setInputConnection(t.filter.getOutputPort(1)),t.stickMapper.setScaleArray("stickScales"),t.stickMapper.setOrientationArray("orientation"),t.stickActor.setMapper(t.stickMapper),t.actors.push(t.sphereActor),t.actors.push(t.stickActor),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]},eE.proxyPropertyMapping(e,t,{tolerance:{modelKey:"filter",property:"tolerance"},atomicRadiusScaleFactor:{modelKey:"filter",property:"atomicRadiusScaleFactor"},bondRadius:{modelKey:"filter",property:"bondRadius"},deltaBondFactor:{modelKey:"filter",property:"deltaBondFactor"},radiusType:{modelKey:"filter",property:"radiusType"},hideElements:{modelKey:"filter",property:"hideElements"}})}var Bs={newInstance:eE.newInstance(Ba,"vtkMoleculeRepresentationProxy"),extend:Ba},Bl={};function Bu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bl,n),RC.extend(e,t,n),t.classHierarchy.push("vtkSkyboxRepresentationProxy"),t.actor=OM.newInstance(),t.actors.push(t.actor),t.sourceDependencies.push({setInputData:function(n){t.actor.removeAllTextures(),t.actor.addTexture(n);var i=t.input.getAlgo().getPositions();e.updateProxyProperty("position",{values:i})}}),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]},e.setPosition=function(e){t.input.getAlgo().setPosition(e)},e.getPosition=function(){return t.input.getAlgo().getPosition()}}var Bc={newInstance:eE.newInstance(Bu,"vtkSkyboxRepresentationProxy"),extend:Bu};function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Bf(e,t){return e+t}function Bp(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Bf,0)/t.length}function Bh(e,t,n,i){var o,a,s,l,u=t.getRange(),c=e.getSpacing(),d=e.getBounds(),f=e.getExtent(),p=n.mapper.getSlicingMode(),h="IJKXYZ"[p];switch(p){case TY.SlicingMode.I:case TY.SlicingMode.J:case TY.SlicingMode.K:o=f[2*(l="IJK".indexOf(h))],a=f[2*l+1],s=1;break;case TY.SlicingMode.X:case TY.SlicingMode.Y:case TY.SlicingMode.Z:o=d[2*(l="XYZ".indexOf(h))],a=d[2*l+1],s=c[n.mapper.getClosestIJKAxis().ijkMode]}var m={slice:{domain:{min:o,max:a,step:s}},windowWidth:{domain:{min:0,max:u[1]-u[0],step:"any"}},windowLevel:{domain:{min:u[0],max:u[1],step:"any"}}};return i("slice",m.slice),i("windowWidth",m.windowWidth),i("windowLevel",m.windowLevel),{slice:Bp(m.slice.domain.min,m.slice.domain.max),windowWidth:m.windowWidth.domain.max,windowLevel:Math.floor(Bp(m.windowLevel.domain.min,m.windowLevel.domain.max))}}var Bm={};function Bg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bm,n),RC.extend(e,t,n),eE.get(e,t,["slicingMode"]),function(e,t){function n(n){t.mapper.setSlicingMode(TY.SlicingMode[n]);var i="".concat(n.toLowerCase(),"Slice");if(i in t&&void 0!==t[i]&&t.mapper.setSlice(t[i]),t.input){var o=Bh(e.getInputDataSet(),e.getDataArray(),t,e.updateProxyProperty);e.set(o)}e.modified()}t.classHierarchy.push("vtkSliceRepresentationProxy"),t.mapper=TY.newInstance(),t.actor=T8.newInstance(),t.property=t.actor.getProperty(),t.actor.setMapper(t.mapper),t.actors.push(t.actor),t.sourceDependencies.push(t.mapper),t.sourceDependencies.push({setInputData:function(n){var i=Bh(n,e.getDataArray(),t,e.updateProxyProperty);e.set(i);var o=n.getBounds(),a=n.getExtent();switch(t.mapper.getSlicingMode()){case TY.SlicingMode.I:e.setSlice(Math.floor(Bp(a[0],a[1])));break;case TY.SlicingMode.J:e.setSlice(Math.floor(Bp(a[2],a[3])));break;case TY.SlicingMode.K:e.setSlice(Math.floor(Bp(a[4],a[5])));break;case TY.SlicingMode.X:e.setSlice(Bp(o[0],o[1]));break;case TY.SlicingMode.Y:e.setSlice(Bp(o[2],o[3]));break;case TY.SlicingMode.Z:e.setSlice(Bp(o[4],o[5]))}}}),e.setSlicingMode=function(e){return!!e&&t.slicingMode!==e&&(t.slicingMode=e,n(e),!0)},e.getSliceIndex=function(){return -1!=="XYZ".indexOf(t.slicingMode)?t.mapper.getSliceAtPosition(t.mapper.getSlice()):t.mapper.getSlice()},e.getAnnotations=function(){var n={},i=e.getSliceIndex(),o=t.mapper.getBoundsForSlice(),a=t.mapper.getSlicingModeNormal(),s=t.mapper.getClosestIJKAxis().ijkMode,l=[.5*(o[0]+o[1]),.5*(o[2]+o[3]),.5*(o[4]+o[5])],u=0;o[1]-o[0]<Number.EPSILON&&(u=o[0]),o[3]-o[2]<Number.EPSILON&&(u=o[2]),o[5]-o[4]<Number.EPSILON&&(u=o[4]);var c=t.mapper.getInputData();if(c){n.sliceSpacing=c.getSpacing()[s],n.dimensions=c.getDimensions(),n.sliceCount=c.getDimensions()[s];for(var d=[],f=0;f<3;f++){var p=[0,0,0,0,0,0];p[2*f+1]=1;var h=c.extentToBounds(p);h[1]-h[0]>Number.EPSILON&&(d[0]="IJK"[f]),h[3]-h[2]>Number.EPSILON&&(d[1]="IJK"[f]),h[5]-h[4]>Number.EPSILON&&(d[2]="IJK"[f])}n.ijkOrientation=d.join("")}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ijkMode:s,sliceBounds:o,sliceIndex:i,sliceNormal:a,sliceOrigin:l,slicePosition:u},n)};var i=e.setColorBy;e.setColorBy=function(n,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(null===n)t.property.setRGBTransferFunction(null),t.property.setPiecewiseFunction(null);else{i(n,o,a);var s=e.getLookupTableProxy(n),l=e.getPiecewiseFunctionProxy(n);t.property.setRGBTransferFunction(s.getLookupTable()),t.property.setPiecewiseFunction(l.getPiecewiseFunction())}},n(t.slicingMode||"X")}(e,t),eE.proxyPropertyMapping(e,t,{visibility:{modelKey:"actor",property:"visibility"},windowWidth:{modelKey:"property",property:"colorWindow"},windowLevel:{modelKey:"property",property:"colorLevel"},interpolationType:{modelKey:"property",property:"interpolationType"},slice:{modelKey:"mapper",property:"slice"}})}var Bv={newInstance:eE.newInstance(Bg,"vtkSliceRepresentationProxy"),extend:Bg},By={slicingMode:TY.SlicingMode.NONE,slice:0,offset:0};function Bb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,By,n),RC.extend(e,t,n),eE.get(e,t,["slicingMode","slice","offset"]),t.classHierarchy.push("vtkSlicedGeometryRepresentationProxy"),t.plane=r8.newInstance(),t.cutter=uW.newInstance(),t.cutter.setCutFunction(t.plane),t.mapper=gd.newInstance(),t.actor=mH.newInstance(),t.property=t.actor.getProperty(),t.property.setLighting(!1),t.mapper.setInputConnection(t.cutter.getOutputPort()),t.actor.setMapper(t.mapper),t.actors.push(t.actor),t.sourceDependencies.push(t.cutter),e.setSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=t.slice!==n;t.slice=n;var o=t.plane.getNormal();return!(!t.plane.setOrigin(o[0]*n,o[1]*n,o[2]*n)&&!i||(e.modified(),0))},e.setOffset=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=t.offset!==n;t.offset=n;var o=t.plane.getNormal();return!(!t.actor.setPosition(n*o[0],n*o[1],n*o[2])&&!i||(e.modified(),0))},e.setSlicingMode=function(n){if(t.slicingMode!==n&&n){switch(t.slicingMode=n,TY.SlicingMode[n]){case TY.SlicingMode.X:t.plane.setNormal(1,0,0);break;case TY.SlicingMode.Y:t.plane.setNormal(0,1,0);break;case TY.SlicingMode.Z:t.plane.setNormal(0,0,1);break;default:return}var i=e.setSlice(t.slice);(i=e.setOffset(t.offset)||i)||e.modified()}else console.log("skip setSlicingMode",n)},eE.proxyPropertyState(e,t),eE.proxyPropertyMapping(e,t,{opacity:{modelKey:"property",property:"opacity"},visibility:{modelKey:"actor",property:"visibility"},color:{modelKey:"property",property:"diffuseColor"},useShadow:{modelKey:"property",property:"lighting"},useBounds:{modelKey:"actor",property:"useBounds"}})}var Bx=eE.newInstance(Bb,"vtkSlicedGeometryRepresentationProxy");function Bw(e,t){return e+t}function BA(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Bw,0)/t.length}function BC(e,t,n){n.mapper;var i=n.property;i.setInterpolationTypeToLinear();for(var o=t.getNumberOfComponents(),a=iG.getDiagonalLength(e.getBounds())/Math.max.apply(Math,m(e.getDimensions())),s=0;s<o;s++){i.setScalarOpacityUnitDistance(s,a);var l=t.getRange(s);i.setGradientOpacityMinimumValue(s,0),i.setGradientOpacityMaximumValue(s,.05*(l[1]-l[0])),i.setShade(!0),i.setUseGradientOpacity(s,!0),i.setGradientOpacityMinimumOpacity(s,0),i.setGradientOpacityMaximumOpacity(s,1)}i.setAmbient(.2),i.setDiffuse(.7),i.setSpecular(.3),i.setSpecularPower(8)}var BS={sampleDistance:-1,edgeGradient:-1,disableSolidColor:!0,is2DVolume:!1};function B_(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BS,i),RC.extend(e,t,i),eE.get(e,t,["sampleDistance","edgeGradient","cropFilter","is2DVolume"]),t.classHierarchy.push("vtkVolumeRepresentationProxy"),t.mapper=wn.newInstance(),t.volume=xz.newInstance(),t.property=t.volume.getProperty(),t.cropFilter=cz.newInstance(),t.mapper.setInputConnection(t.cropFilter.getOutputPort()),t.sourceDependencies.push(t.cropFilter),t.mapperX=TY.newInstance({slicingMode:TY.SlicingMode.X}),t.actorX=T8.newInstance({visibility:!1}),t.propertySlices=t.actorX.getProperty(),t.mapperY=TY.newInstance({slicingMode:TY.SlicingMode.Y}),t.actorY=T8.newInstance({visibility:!1,property:t.propertySlices}),t.mapperZ=TY.newInstance({slicingMode:TY.SlicingMode.Z}),t.actorZ=T8.newInstance({visibility:!1,property:t.propertySlices}),t.mapperX.setInputConnection(t.cropFilter.getOutputPort()),t.mapperY.setInputConnection(t.cropFilter.getOutputPort()),t.mapperZ.setInputConnection(t.cropFilter.getOutputPort()),t.volume.setMapper(t.mapper),t.volumes.push(t.volume),t.actorX.setMapper(t.mapperX),t.actors.push(t.actorX),t.actorY.setMapper(t.mapperY),t.actors.push(t.actorY),t.actorZ.setMapper(t.mapperZ),t.actors.push(t.actorZ),t.sourceDependencies.push({setInputData:function(n){var i,o,a,s,l,u,c,d,f,p=b(e.getColorBy(),2),h=p[0],m=p[1];e.rescaleTransferFunctionToDataRange(h,m);var g=e.getLookupTableProxy(h),v=e.getPiecewiseFunctionProxy(h);t.property.setRGBTransferFunction(0,g.getLookupTable()),t.property.setScalarOpacity(0,v.getPiecewiseFunction()),BC(n,e.getDataArray(),t),(t.sampleDistance<0||t.sampleDistance>1)&&e.setSampleDistance(),(t.edgeGradient<0||t.edgeGradient>1)&&e.setEdgeGradient();var y=(i=e.getDataArray(),o=e.updateProxyProperty,a=i.getRange(),s=n.getSpacing(),l=n.getBounds(),u=t.mapperX.getClosestIJKAxis().ijkMode,c=t.mapperY.getClosestIJKAxis().ijkMode,d=t.mapperZ.getClosestIJKAxis().ijkMode,o("xSlice",(f={xSlice:{domain:{min:l[0],max:l[1],step:s[u]}},ySlice:{domain:{min:l[2],max:l[3],step:s[c]}},zSlice:{domain:{min:l[4],max:l[5],step:s[d]}},windowWidth:{domain:{min:0,max:a[1]-a[0],step:"any"}},windowLevel:{domain:{min:a[0],max:a[1],step:"any"}}}).xSlice),o("ySlice",f.ySlice),o("zSlice",f.zSlice),o("windowWidth",f.windowWidth),o("windowLevel",f.windowLevel),{xSlice:BA(f.xSlice.domain.min,f.xSlice.domain.max),ySlice:BA(f.ySlice.domain.min,f.ySlice.domain.max),zSlice:BA(f.zSlice.domain.min,f.zSlice.domain.max),windowWidth:f.windowWidth.domain.max,windowLevel:Math.floor(BA(f.windowLevel.domain.min,f.windowLevel.domain.max))});e.set(y),2===n.getDimensions().reduce(function(e,t){return e+ +(t>1)},0)&&e.setIs2DVolume(!0)}}),e.setIs2DVolume=function(n){t.is2DVolume=n,n&&(e.getVisibility()&&e.setSliceVisibility(!0),t.volume.setVisibility(!1))},e.isVisible=function(){return t.volume.getVisibility()},e.setVisibility=function(n){n?t.is2DVolume?e.setSliceVisibility(!0):t.volume.setVisibility(!0):(t.volume.setVisibility(!1),e.setSliceVisibility(!1))},e.getVisibility=function(){return t.volume.getVisibility()||e.getSliceVisibility()},e.isVisible=e.getVisibility,e.setSliceVisibility=function(n){if(n&&t.is2DVolume){var i=e.getInputDataSet().getDimensions().indexOf(1);t.actors[i]&&t.actors[i].setVisibility(!0)}else t.actors.forEach(function(e){return e.setVisibility(n)})},e.getSliceVisibility=function(){return t.actorX.getVisibility()||t.actorY.getVisibility()||t.actorZ.getVisibility()},e.setSampleDistance=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4;if(t.sampleDistance!==n){t.sampleDistance=n;var i=.7*Math.sqrt(e.getInputDataSet().getSpacing().map(function(e){return e*e}).reduce(function(e,t){return e+t},0));t.mapper.setSampleDistance(i*Math.pow(2,3*n-1.5)),e.modified()}},e.setEdgeGradient=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;if(t.edgeGradient!==n){t.edgeGradient=n;var i=e.getDataArray(),o=i.getNumberOfComponents();if(0===n)for(var a=0;a<o;a++)t.volume.getProperty().setUseGradientOpacity(a,!1);else for(var s=0;s<o;s++){var l=i.getRange(s);t.volume.getProperty().setUseGradientOpacity(s,!0);var u=Math.max(0,n-.3)/.7;u>0?t.volume.getProperty().setGradientOpacityMinimumValue(s,Math.exp(Math.log(.2*(l[1]-l[0]))*u*u)):t.volume.getProperty().setGradientOpacityMinimumValue(s,0),t.volume.getProperty().setGradientOpacityMaximumValue(s,Math.exp(Math.log(+(l[1]-l[0]))*n*n))}e.modified()}},n=e.setColorBy,e.setColorBy=function(i,o){n(i,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1);var a=e.getLookupTableProxy(i),s=e.getPiecewiseFunctionProxy(i);t.property.setRGBTransferFunction(0,a.getLookupTable()),t.property.setScalarOpacity(0,s.getPiecewiseFunction())},eE.proxyPropertyMapping(e,t,{xSlice:{modelKey:"mapperX",property:"slice"},ySlice:{modelKey:"mapperY",property:"slice"},zSlice:{modelKey:"mapperZ",property:"slice"},volumeVisibility:{modelKey:"volume",property:"visibility"},xSliceVisibility:{modelKey:"actorX",property:"visibility"},ySliceVisibility:{modelKey:"actorY",property:"visibility"},zSliceVisibility:{modelKey:"actorZ",property:"visibility"},windowWidth:{modelKey:"propertySlices",property:"colorWindow"},windowLevel:{modelKey:"propertySlices",property:"colorLevel"},useShadow:{modelKey:"property",property:"shade"},croppingPlanes:{modelKey:"cropFilter",property:"croppingPlanes"}})}var BT={Core:{vtkAbstractRepresentationProxy:RC,vtkLookupTableProxy:RP,vtkPiecewiseFunctionProxy:RB,vtkProxyManager:Rq,vtkSourceProxy:RY,vtkView2DProxy:{newInstance:R6,extend:R5},vtkViewProxy:R3},Representations:{vtkGeometryRepresentationProxy:Bt,vtkGlyphRepresentationProxy:Bi,vtkMoleculeRepresentationProxy:Bs,vtkSkyboxRepresentationProxy:Bc,vtkSliceRepresentationProxy:Bv,vtkSlicedGeometryRepresentationProxy:{newInstance:Bx,extend:Bb},vtkVolumeRepresentationProxy:{newInstance:eE.newInstance(B_,"vtkVolumeRepresentationProxy"),extend:B_,updateConfiguration:BC}}},BO={DEFAULT:0,GEOMETRY:1,SLICE:2,VOLUME:3,YZ_PLANE:4,XZ_PLANE:5,XY_PLANE:6},BP={PICKING_BUFFER:0,FRONT_BUFFER:1},BM={ViewTypes:BO,RenderingTypes:BP,CaptureOn:{MOUSE_MOVE:0,MOUSE_RELEASE:1}},BE={contextVisibility:!0,handleVisibility:!0,hasFocus:!1};function BD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BE,n),mP.extend(e,t,n),hK.extend(e,t,n),eE.setGet(e,t,["contextVisibility","handleVisibility","_widgetManager"]),eE.get(e,t,["representations","widgetState","activeState"]),eE.moveToProtected(e,t,["widgetManager"]),eE.event(e,t,"ActivateHandle"),t.classHierarchy.push("vtkAbstractWidget"),t.actorToRepresentationMap=new WeakMap,e.getBounds=t.widgetState.getBounds,e.getNestedProps=function(){return t.representations},e.activateHandle=function(n){var i=n.selectedState,o=n.representation;t.widgetState.activateOnly(i),t.activeState=i,i&&i.updateManipulator&&i.updateManipulator(),e.invokeActivateHandle({selectedState:i,representation:o}),e.updateCursor&&e.updateCursor()},e.deactivateAllHandles=function(){t.widgetState.deactivate()},e.hasActor=function(e){return t.actorToRepresentationMap.has(e)},e.grabFocus=function(){t.hasFocus=!0},e.loseFocus=function(){t.hasFocus=!1},e.hasFocus=function(){return t.hasFocus},e.placeWidget=function(e){return t.widgetState.placeWidget(e)},e.getPlaceFactor=function(){return t.widgetState.getPlaceFactor()},e.setPlaceFactor=function(e){return t.widgetState.setPlaceFactor(e)},e.getRepresentationFromActor=function(e){return t.actorToRepresentationMap.get(e)},e.updateRepresentationForRender=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BP.FRONT_BUFFER,n=0;n<t.representations.length;n++)t.representations[n].updateActorVisibility(e,t.contextVisibility,t.handleVisibility)},e.getViewWidgets=function(){return t._factory.getViewWidgets()},e.setPriority(.5)}var BI={newInstance:eE.newInstance(BD,"vtkAbstractWidget"),extend:BD};function Bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function BN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bk(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var BR=BM.ViewTypes,BB=BM.RenderingTypes,BL=BM.CaptureOn,BF=eE.vtkErrorMacro,BV=1;function Bj(e){var t=e.getActiveCamera(),n=e.getRenderWindow(),i=n.getInteractor(),o=i.getView();return{renderer:e,renderWindow:n,interactor:i,apiSpecificRenderWindow:o,camera:t}}function BG(e,t){var n=t.dispHeightFactor,i=t.cameraPosition,o=t.cameraDir,a=t.isParallel,s=t.rendererPixelDims,l=1;if(a)l=n;else{var u=m(e);nR.subtract(u,i,u),l=nR.dot(u,o)*n}return l/s[1]}function BU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BN(BN({viewId:null,widgets:[],activeWidget:null,renderer:null,viewType:BR.DEFAULT,isAnimating:!1,pickingEnabled:!0,selections:null,previousSelectedData:null,widgetInFocus:null,captureOn:BL.MOUSE_MOVE},e),{},{cursorStyles:e.cursorStyles?BN({},e.cursorStyles):{default:"default",hover:"pointer"}})}(n)),eE.obj(e,t),eE.setGet(e,t,["captureOn","cursorStyles",{type:"enum",name:"viewType",enum:BR}]),eE.get(e,t,["selections","widgets","viewId","pickingEnabled","activeWidget"]),function(e,t){t.viewId||(t.viewId="view-".concat(BV++)),t.classHierarchy.push("vtkWidgetManager");var n,i,o=new WeakMap,a=[];function s(e){return e&&(e.isA("vtkAbstractWidget")?e:e.getWidgetForView({viewId:t.viewId}))}function l(){var e=t._apiSpecificRenderWindow,n=t._camera,i=t._renderer;if(i&&e&&n){var o=b(e.getSize(),2),a=o[0],s=o[1],l=b(i.getViewport(),4),u=l[0],c=l[1],d=l[2],f=l[3],p=e.getComputedDevicePixelRatio(),h=[a*(d-u)/p,s*(f-c)/p],m=n.getPosition(),g=n.getDirectionOfProjection(),v=n.getParallelProjection(),y=v?2*n.getParallelScale():2*Math.tan(nR.radiansFromDegrees(n.getViewAngle())/2);t.widgets.forEach(function(e){e.getNestedProps().forEach(function(e){e.getScaleInPixels()&&e.setDisplayScaleParams({dispHeightFactor:y,cameraPosition:m,cameraDir:g,isParallel:v,rendererPixelDims:h})})})}}function u(){return(u=w$(w1().mark(function n(i,o,a){var s,l,u,c,d,f,p,h,m,g,v;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return p=function(e){o&&t._interactor.invokeLeftButtonRelease(i),e.activateHandle({selectedState:c,representation:d}),o&&t._interactor.invokeLeftButtonPress(i)},s=i.position,n.next=4,e.getSelectedDataForXY(s.x,s.y);case 4:if(u=(l=n.sent).requestCount,c=l.selectedState,d=l.representation,f=l.widget,!u&&a===t._currentUpdateSelectionCallID){n.next=11;break}return n.abrupt("return");case 11:if((h=e.getCursorStyles()[f?"hover":"default"])&&t._apiSpecificRenderWindow.setCursor(h),t.activeWidget=null,m=!1,t.widgetInFocus===f&&f.hasFocus())p(f),t.activeWidget=f,m=!0;else for(g=0;g<t.widgets.length;g++)(v=t.widgets[g])===f&&v.getNestedPickable()?(p(v),t.activeWidget=v,m=!0):(m||(m=!!v.getActiveState()),v.deactivateAllHandles());m&&t._interactor.render();case 19:case"end":return n.stop()}},n)}))).apply(this,arguments)}var c=function(){for(var e=!1,n=0;n<t.widgets.length;n++){var i=t.widgets[n];e||(e=!!i.getActiveState()),i.deactivateAllHandles()}e&&t._interactor.render()},d=(n=w$(w1().mark(function e(n){var i,o,a=arguments;return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.length>1&&void 0!==a[1]&&a[1],t.isAnimating||!t.pickingEnabled||n.pokedRenderer!==t._renderer){e.next=8;break}return t._currentUpdateSelectionCallID=o=Symbol("UpdateSelection"),e.next=6,function(e,t,n){return u.apply(this,arguments)}(n,i,o);case 6:e.next=9;break;case 8:c();case 9:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});function f(e){e.updateRepresentationForRender(t.renderingType)}function p(){t.renderingType=BB.FRONT_BUFFER,t.widgets.forEach(f)}function h(e,t,n,i){return m.apply(this,arguments)}function m(){return(m=w$(w1().mark(function e(n,i,o,a){return w1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._captureInProgress){e.next=4;break}return e.next=3,t._captureInProgress;case 3:return e.abrupt("return");case 4:return t.renderingType=BB.PICKING_BUFFER,t.widgets.forEach(f),t._capturedBuffers=null,t._captureInProgress=t._selector.getSourceDataAsync(t._renderer,n,i,o,a),e.next=9,t._captureInProgress;case 9:t._capturedBuffers=e.sent,t._captureInProgress=null,t.previousSelectedData=null,p();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){t._renderer.removeActor(e),e.delete()}function v(){t._renderer.getRenderWindow().getInteractor().render(),e.renderWidgets()}e.enablePicking=function(){t.pickingEnabled=!0,e.renderWidgets()},e.renderWidgets=function(){if(t.pickingEnabled&&t.captureOn===BL.MOUSE_RELEASE){var n=b(t._apiSpecificRenderWindow.getSize(),2);h(0,0,n[0],n[1])}p(),e.modified()},e.disablePicking=function(){t.pickingEnabled=!1},e.setRenderer=function(n){var i=Bj(n);for(Object.assign(t,i),eE.moveToProtected({},t,Object.keys(i));a.length;)a.pop().unsubscribe();t._selector=t._apiSpecificRenderWindow.createSelector(),t._selector.setFieldAssociation(i5.FIELD_ASSOCIATION_POINTS),a.push(t._apiSpecificRenderWindow.onWindowResizeEvent(l)),a.push(t._camera.onModified(l)),l(),a.push(t._interactor.onStartAnimation(function(){t.isAnimating=!0})),a.push(t._interactor.onEndAnimation(function(){t.isAnimating=!1,e.renderWidgets()})),a.push(t._interactor.onMouseMove(function(e){return d(e),eE.VOID})),a.push(t._interactor.onLeftButtonPress(function(e){var t=e.deviceType,n="touch"===t||"pen"===t;return n&&d(e,n),eE.VOID},.25)),e.modified(),t.pickingEnabled&&e.enablePicking()},e.addWidget=function(n,i,a){if(!t._renderer)return BF("Widget manager MUST BE link to a view before registering widgets"),null;var s=t.viewId,u=t._renderer,c=n.getWidgetForView({viewId:s,renderer:u,viewType:i||BR.DEFAULT,initialValues:a});return null!=c&&-1===t.widgets.indexOf(c)&&(t.widgets.push(c),c.setWidgetManager(e),function(e){for(var t=e.getRepresentations(),n=0;n<t.length;n++)for(var i=t[n],a={widget:e,representation:i},s=i.getActors(),l=0;l<s.length;l++){var u=s[l];o.set(u,a)}}(c),l(),t._renderer.addActor(c),e.modified()),c},e.removeWidgets=function(){t.widgets.forEach(g),t.widgets=[],t.widgetInFocus=null,v()},e.removeWidget=function(n){var i=s(n),o=t.widgets.indexOf(i);-1!==o&&(t.widgets.splice(o,1),t.widgetInFocus===i&&e.releaseFocus(),g(i),v())},i=w$(w1().mark(function n(i,o){var a;return w1().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.selections=null,!t.pickingEnabled){n.next=12;break}if(t._capturedBuffers&&t.captureOn!==BL.MOUSE_MOVE){n.next=7;break}return n.next=5,h(i,o,i,o);case 5:n.next=11;break;case 7:if(!(i<(a=t._capturedBuffers.area)[0]||i>a[2]||o<a[1]||o>a[3])){n.next=11;break}return n.next=11,h(i,o,i,o);case 11:t.selections=t._capturedBuffers.generateSelection(i,o,i,o);case 12:return n.abrupt("return",e.getSelectedData());case 13:case"end":return n.stop()}},n)})),e.getSelectedDataForXY=function(e,t){return i.apply(this,arguments)},e.getSelectedData=function(){if(!t.selections||!t.selections.length)return t.previousSelectedData=null,{};var e=t.selections[0].getProperties(),n=e.propID,i=e.compositeID,a=e.prop,s=t.selections[0].getProperties(),l=s.widget,u=s.representation;if(t.previousSelectedData&&t.previousSelectedData.prop===a&&t.previousSelectedData.widget===l&&t.previousSelectedData.compositeID===i)return t.previousSelectedData.requestCount++,t.previousSelectedData;if(o.has(a)){var c=o.get(a);l=c.widget,u=c.representation}if(l&&u){var d=u.getSelectedState(a,i);return t.previousSelectedData={requestCount:0,propID:n,compositeID:i,prop:a,widget:l,representation:u,selectedState:d},t.previousSelectedData}return t.previousSelectedData=null,{}},e.grabFocus=function(e){var n=s(e);t.widgetInFocus&&t.widgetInFocus!==n&&t.widgetInFocus.loseFocus(),t.widgetInFocus=n,t.widgetInFocus&&t.widgetInFocus.grabFocus()},e.releaseFocus=function(){return e.grabFocus(null)};var y=e.delete;e.delete=function(){for(;a.length;)a.pop().unsubscribe();y()}}(e,t)}var Bz={newInstance:eE.newInstance(BU,"vtkWidgetManager"),extend:BU,Constants:BM,getPixelWorldHeightAtCoord:BG};function BW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function BH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BW(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bq(){}function BK(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,o),eE.obj(e,t),eE.get(e,t,["widgetState"]),eE.event(e,t,"WidgetChange"),t.classHierarchy.push("vtkAbstractWidgetFactory"),n={},e.getWidgetForView=function(i){var o=i.viewId,a=i.renderer,s=i.viewType,l=i.initialValues;if(!n[o]){if(!a)return null;var u=Bj(a),c=u.interactor,d=u.apiSpecificRenderWindow,f=u.camera,p={},h={};eE.obj(h,p),Object.assign(h,{onWidgetChange:e.onWidgetChange}),Object.assign(p,{widgetState:t.widgetState,manipulator:t.manipulator,viewType:s,renderer:a,camera:f,apiSpecificRenderWindow:d,factory:e}),eE.moveToProtected(h,p,["renderer","camera","apiSpecificRenderWindow","factory"]),eE.get(h,p,["viewType"]),eE.safeArrays(p),BI.extend(h,p,l),p.representations=e.getRepresentationsForViewType(s).map(function(e){var t=e.builder,n=e.labels,i=e.initialValues;return t.newInstance(BH(BH({_parentProp:h,labels:n},i),l))}),p.representations.forEach(function(e){e.setInputData(p.widgetState),e.getActors().forEach(function(t){p.actorToRepresentationMap.set(t,e)})}),t.behavior(h,p),["coincidentTopologyParameters"].concat(m(t.methodsToLink||[])).forEach(function(e){var t,n="set".concat(eE.capitalize(e)),i="get".concat(eE.capitalize(e)),o=(y(t={},e,[]),y(t,n,[]),y(t,i,[]),t);p.representations.forEach(function(t){t[e]&&o[e].push(t[e]),t[n]&&o[n].push(t[n]),t[i]&&o[i].push(t[i])}),Object.keys(o).forEach(function(e){var t=o[e];1===t.length?h[e]=t[0]:t.length>1&&(h[e]=eE.chain.apply(eE,m(t)))})}),h.delete=eE.chain(function(){delete n[o]},h.delete),h.setInteractor(c);var g=Object.freeze(h);return n[o]=g,g}return n[o]},e.getViewIds=function(){return Object.keys(n)},e.getViewWidgets=function(){return Object.values(n)},e.setVisibility=function(e){for(var t=Object.keys(n),i=0;i<t.length;i++)n[t[i]].setVisibility(e)},e.setPickable=function(e){for(var t=Object.keys(n),i=0;i<t.length;i++)n[t[i]].setPickable(e)},e.setDragable=function(e){for(var t=Object.keys(n),i=0;i<t.length;i++)n[t[i]].setDragable(e)},e.setContextVisibility=function(e){for(var t=Object.keys(n),i=0;i<t.length;i++)n[t[i]].setContextVisibility(e)},e.setHandleVisibility=function(e){for(var t=Object.keys(n),i=0;i<t.length;i++)n[t[i]].setHandleVisibility(e)},e.placeWidget=function(e){return t.widgetState.placeWidget(e)},e.getPlaceFactor=function(){return t.widgetState.getPlaceFactor()},e.setPlaceFactor=function(e){return t.widgetState.setPlaceFactor(e)},i=Bq,e.delete=eE.chain(e.delete,function(){return i()}),t.widgetState&&(i=t.widgetState.onModified(function(){return e.invokeWidgetChange(t.widgetState)}).unsubscribe)}var BX={newInstance:eE.newInstance(BK,"vtkAbstractWidget"),extend:BK},BY="default";function BZ(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var BJ={active:!1},BQ={extend:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BJ,i),eE.obj(e,t),eE.setGet(e,t,["active"]),t.classHierarchy.push("vtkWidgetState"),n=[],t.labels={},t.nestedStates=[],e.bindState=function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[BY];if(t.nestedStates.push(i),n.push(i.onModified(e.modified)),Array.isArray(o)&&o.length)for(var a=0;a<o.length;a++){var s=o[a];t.labels[s]||(t.labels[s]=[]),t.labels[s].push(i)}else{var l=Array.isArray(o)?BY:o||BY;t.labels[l]||(t.labels[l]=[]),t.labels[l].push(i)}},e.unbindState=function(i){for(;n.length;)n.pop().unsubscribe();BZ(t.nestedStates,i);for(var o=0;o<t.nestedStates.length;o++)n.push(t.nestedStates[o].onModified(e.modified));Object.keys(t.labels).forEach(function(e){BZ(t.labels[e],i)})},e.unbindAll=function(){for(;n.length;)n.pop().unsubscribe();t.nestedStates=[]},e.activate=function(){return e.setActive(!0)},e.deactivate=function(n){n!==e&&e.setActive(!1);for(var i=0;i<t.nestedStates.length;i++)t.nestedStates[i].deactivate(n)},e.activateOnly=function(t){t&&t.setActive(!0),e.deactivate(t)},e.getStatesWithLabel=function(e){return t.labels[e]},e.getAllNestedStates=function(){return t.nestedStates},e.delete=eE.chain(e.unbindAll,e.delete)}},B$={bounds:[-1,1,-1,1,-1,1],placeFactor:1},B0={extend:function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B$,o),eE.setGetArray(e,t,["bounds"],6),eE.get(e,t,["placeFactor"]),eE.event(e,t,"BoundsChange"),t.bounds=t.bounds.slice(),n=[],i=m(iG.INIT_BOUNDS),e.containsPoint=function(e,t,n){return Array.isArray(e)?iG.containsPoint(i,e[0],e[1],e[2]):iG.containsPoint(i,e,t,n)},e.placeWidget=function(o){t.bounds=[];for(var a=[(o[0]+o[1])/2,(o[2]+o[3])/2,(o[4]+o[5])/2],s=0;s<6;s++){var l=a[Math.floor(s/2)];n[s]=o[s],t.bounds[s]=(o[s]-l)*t.placeFactor+l}iG.setBounds(i,t.bounds),e.invokeBoundsChange(t.bounds),e.modified()},e.setPlaceFactor=function(o){if(t.placeFactor!==o){t.placeFactor=o,t.bounds=[];for(var a=[(n[0]+n[1])/2,(n[2]+n[3])/2,(n[4]+n[5])/2],s=0;s<6;s++){var l=a[Math.floor(s/2)];t.bounds[s]=(n[s]-l)*t.placeFactor+l}iG.setBounds(i,t.bounds),e.invokeBoundsChange(t.bounds),e.modified()}}}},B1={color:.5},B2={color3:[255,255,255],opacity:255},B3={corner:[0,0,0]},B4={direction:[1,0,0]},B5={manipulator:null},B6={name:""};function B8(e,t){return 3===e.length&&3===t.length&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var B9={up:[0,1,0],right:[1,0,0],direction:[0,0,1]};function B7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Le={origin:null,offset:null},Lt={scale1:.5},Ln={scale3:[1,1,1]},Lr={text:"DefaultText"},Li={visible:!0},Lo={shape:""};function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ll=eE.vtkErrorMacro,Lu={bounds:B0,color:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B1,n),eE.setGet(e,t,["color"])}},color3:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B2,n),eE.setGetArray(e,t,["color3"],3,255),eE.setGet(e,t,["opacity"])}},corner:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B3,n),eE.setGetArray(e,t,["corner"],3),e.translate=function(t,n,i){var o=b(e.getCornerByReference(),3),a=o[0],s=o[1],l=o[2];e.setCorner(a+t,s+n,l+i)}}},direction:{extend:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B4,i),eE.setGetArray(e,t,["direction"],3),n="degree"===t.angleUnit?a$.buildFromDegree():a$.buildFromRadian(),e.rotateFromDirections=function(i,o){n.identity().rotateFromDirections(i,o).apply(t.direction),e.modified()},e.rotate=function(e,i){n.identity().rotate(e,i).apply(t.direction)},e.rotateX=function(e){n.identity().rotateX(e).apply(t.direction)},e.rotateY=function(e){n.identity().rotateY(e).apply(t.direction)},e.rotateZ=function(e){n.identity().rotateZ(e).apply(t.direction)}}},manipulator:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B5,n),eE.setGet(e,t,["manipulator"]),e.updateManipulator=function(){if(t.manipulator){var e=t.origin,n=t.normal,i=t.direction,o=t.manipulator,a=o.setHandleOrigin,s=o.setHandleCenter,l=o.setHandleNormal,u=o.setHandleDirection;e&&a?a(e):e&&s&&s(e),i&&u?u(i):i&&!n&&l?l(i):n&&u&&u(n)}}}},name:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B6,n),eE.setGet(e,t,["name"])}},orientation:{extend:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B9,i),eE.setGetArray(e,t,["up","right","direction"],3),n={o:[],p1:[],p2:[]},e.normalize=function(){th(t.up),th(t.right),th(t.direction),e.modified()},e.updateFromOriginRightUp=function(i,o,a){B8(i,n.o)&&B8(o,n.p1)&&B8(a,n.p2)||(n.o=i.slice(),n.p1=o.slice(),n.p2=a.slice(),t.up=[a[0]-i[0],a[1]-i[1],a[2]-i[2]],t.right=[o[0]-i[0],o[1]-i[1],o[2]-i[2]],tf(t.up,t.right,t.direction),tf(t.direction,t.up,t.right),e.normalize(),e.modified())}}},origin:{extend:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Le,i),eE.setGetArray(e,t,["origin","offset"],3),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B7(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),e.translate=function(t,n,i){var o=b(e.getOriginByReference(),3),a=o[0],s=o[1],l=o[2];e.setOrigin(a+t,s+n,l+i)},e.getOrigin=function(e){var i=n.getOrigin();if(!t.offset)return i;if(!e)return nR.add(i,t.offset,i);var o=BG(i,e),a=e.rendererPixelDims,s=Math.min(a[0],a[1]);return nR.multiplyAccumulate(i,t.offset,s*o,i)}}},scale1:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lt,n),eE.setGet(e,t,["scale1"])}},scale3:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ln,n),eE.setGetArray(e,t,["scale3"],3)}},text:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lr,n),eE.setGet(e,t,["text"])}},visible:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Li,n),eE.setGet(e,t,["visible"]),e.isVisible=e.getVisible}},shape:{extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lo,n),eE.setGet(e,t,["shape"])}}};function Lc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};arguments.length>4&&void 0!==arguments[4]&&arguments[4]||BQ.extend(n,i,t);for(var o=0;o<e.length;o++){var a=Lu[e[o]];a?a.extend(n,i,t):Ll("Invalid mixin name:",e[o])}return eE.safeArrays(i),Object.freeze(n)}var Ld=function(){function e(){E(this,e),this.publicAPI={},this.model={},BQ.extend(this.publicAPI,this.model),B0.extend(this.publicAPI,this.model)}return I(e,[{key:"addDynamicMixinState",value:function(e){var t=this,n=e.labels,i=e.mixins,o=e.name,a=e.initialValues,s="".concat(o,"List");return this.model[s]=[],this.publicAPI["add".concat(eE.capitalize(o))]=function(e){var o=Lc(i,Ls(Ls({},a),e));return t.publicAPI.bindState(o,n),t.model[s].push(o),t.publicAPI.modified(),o},this.publicAPI["remove".concat(eE.capitalize(o))]=function(e){var n=t.model[s].indexOf(e);-1===n&&e<t.model[s].length&&(n=e);var i=t.model[s][n];i&&t.publicAPI.unbindState(i),t.model[s].splice(n,1),t.publicAPI.modified()},this.publicAPI["get".concat(eE.capitalize(o),"List")]=function(){return t.model[s].slice()},this.publicAPI["clear".concat(eE.capitalize(o),"List")]=function(){for(;t.model[s].length;){var e=t.model[s].pop();e&&t.publicAPI.unbindState(e)}t.publicAPI.modified()},this}},{key:"addStateFromMixin",value:function(e){var t=e.labels,n=e.mixins,i=e.name,o=Lc(n,e.initialValues);return this.model[i]=o,this.publicAPI.bindState(o,t),eE.setGet(this.publicAPI,this.model,[i]),this}},{key:"addStateFromInstance",value:function(e){var t=e.labels,n=e.name,i=e.instance;return this.model[n]=i,this.publicAPI.bindState(i,t),eE.setGet(this.publicAPI,this.model,[n]),this}},{key:"addField",value:function(e){var t=e.name,n=e.initialValue;return Array.isArray(n)?eE.setGetArray(this.publicAPI,this.model,[t],n.length):eE.setGet(this.publicAPI,this.model,[t]),this.model[t]=n,this}},{key:"build",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lc(t,{},this.publicAPI,this.model,!0)}}]),e}(),Lf={createBuilder:function(){return new Ld}};function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Lh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Lm={useCameraFocalPoint:!1,useCameraNormal:!1};function Lg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lm,n),eE.obj(e,t),eE.setGet(e,t,["useCameraFocalPoint","useCameraNormal"]),eE.setGetArray(e,t,["userOrigin","handleOrigin","widgetOrigin","userNormal","handleNormal","widgetNormal"],3),t.classHierarchy.push("vtkAbstractManipulator"),t._prevWorldCoords=[],e.getOrigin=function(e){return t.userOrigin?t.userOrigin:t.useCameraFocalPoint?e.pokedRenderer.getActiveCamera().getFocalPoint():t.handleOrigin?t.handleOrigin:t.widgetOrigin?t.widgetOrigin:[0,0,0]},e.getNormal=function(e){return t.userNormal?t.userNormal:t.useCameraNormal?e.pokedRenderer.getActiveCamera().getDirectionOfProjection():t.handleNormal?t.handleNormal:t.widgetNormal?t.widgetNormal:[0,0,1]},t._computeDeltaFromPrevCoords=function(e){var n;return null!=(n=t._prevWorldCoords)&&n.length&&null!=e&&e.length?to(e,t._prevWorldCoords,[]):[0,0,0]},t._addWorldDeltas=function(e){var n=e.worldCoords,i=t._computeDeltaFromPrevCoords(n);return n&&(t._prevWorldCoords=n),Lh(Lh({},e),{worldDelta:i})}}var Lv={extend:Lg,newInstance:eE.newInstance(Lg,"vtkAbstractManipulator")};function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Lb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lv.extend(e,t,function(e){if(!e.picker){var t=S8.newInstance();t.initializePickList(),t.setPickFromList(!0),t.setTolerance(0),e.picker=t}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)}(n)),eE.setGet(e,t,["picker"]),t.classHierarchy.push("vtkPickerManipulator"),e.handleEvent=function(e){var n=e.position,i=e.pokedRenderer;return t.picker.pick([n.x,n.y,0],i),t.picker.getPickedPositions().length>0?t.position=t.picker.getPickedPositions()[0]:t.position=null,t._addWorldDeltas({worldCoords:t.position})}}var Lx={extend:Lb,newInstance:eE.newInstance(Lb,"vtkPickerManipulator")};function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LA(e,t,n,i,o,a){if(1-Math.abs(tc(o.getActiveCamera().getViewPlaneNormal(),i))<1e-6)return[];var s=a.displayToWorld(e,t,0,o),l=[0,0,0];to(a.displayToWorld(e,t,1,o),s,l);var u=[0,0,0];tf(i,l,u),tf(u,l,u);var c=tc([s[0]-n[0],s[1]-n[1],s[2]-n[2]],u),d=tc(u,i),f=i.slice();return ta(f,0===d?0:c/d),ti(n,f,f),f}function LC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lv.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n)),t.classHierarchy.push("vtkLineManipulator"),e.handleEvent=function(n,i){return t._addWorldDeltas({worldCoords:LA(n.position.x,n.position.y,e.getOrigin(n),e.getNormal(n),n.pokedRenderer,i)})}}var LS={projectDisplayToLine:LA,extend:LC,newInstance:eE.newInstance(LC,"vtkLineManipulator")};function L_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LT(e,t,n,i,o,a){var s=a.displayToWorld(e,t,0,o),l=a.displayToWorld(e,t,1,o);return r8.intersectWithLine(s,l,n,i).x}function LO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lv.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L_(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n)),t.classHierarchy.push("vtkPlaneManipulator"),e.handleEvent=function(n,i){return t._addWorldDeltas({worldCoords:LT(n.position.x,n.position.y,e.getOrigin(n),e.getNormal(n),n.pokedRenderer,i)})}}var LP={intersectDisplayWithPlane:LT,extend:LO,newInstance:eE.newInstance(LO,"vtkPlaneManipulator")};function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LE(e,t,n,i,o,a,s,l){var u=s.getActiveCamera(),c=u.getViewUp(),d=u.getDirectionOfProjection(),f=s.getRenderWindow().getInteractor().getView().getViewportSize(s),p=360*(n-e)/f[0],h=360*(i-t)/f[1],m=new Float64Array([a[0],a[1],a[2]]),g=[0,0,0];tf(d,c,g);var v=od(new Float64Array(16));return ob(v,v,eK(p),c),ob(v,v,eK(-h),g),rO(m,m,v),m}function LD(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lv.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o)),t.classHierarchy.push("vtkTrackballManipulator"),n=0,i=0,e.handleEvent=function(o,a){var s=LE(n,i,o.position.x,o.position.y,e.getOrigin(o),e.getNormal(o),o.pokedRenderer);return n=o.position.x,i=o.position.y,t._addWorldDeltas({worldCoords:s})},e.reset=function(e){n=e.position.x,i=e.position.y}}var LI={trackballRotate:LE,extend:LD,newInstance:eE.newInstance(LD,"vtkTrackballManipulator")};function Lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var LN=eE.vtkErrorMacro,LR=eE.vtkWarningMacro,LB=["active","inactive","static"];function LL(e,t){e&&e.setResolveCoincidentTopologyToPolygonOffset&&(e.setResolveCoincidentTopologyToPolygonOffset(),m3.forEach(function(n){if(t[n]){var i="setRelativeCoincidentTopology".concat(n,"OffsetParameters");if(e[i]){var o=t[n],a=o.factor,s=o.offset;e[i](a,s)}}}))}function LF(e,t,n,i,o){var a,s=(null==(a=e["get".concat(eE.capitalize(t))])?void 0:a.call(e))||e.getPointData().getArrayByName(t);if(s&&(void 0===i||s.getDataType()===i)&&(void 0===o||s.getNumberOfComponents()===o))s.getNumberOfTuples()!==n&&s.resize(n);else{var l,u,c,d=nH,f=i,p=o;"points"===t?(d=a3,f=null!=(c=f)?c:"Float32Array",p=null!=o?o:3):(ly.includes(t)?(d=nQ,f=null!=(l=f)?l:"Uint16Array"):f=null!=(u=f)?u:"Float32Array",p=null!=o?o:1),s=d.newInstance({name:t,dataType:f,numberOfComponents:p,size:p*n,empty:0===n}),"points"===t||ly.includes(t)?e["set".concat(eE.capitalize(t))](s):e.getPointData().addArray(s)}return s}var LV={extend:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mP.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lk(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,actors:[],labels:[],behavior:1,coincidentTopologyParameters:{Point:{factor:-1,offset:-1},Line:{factor:-1,offset:-1},Polygon:{factor:-1,offset:-1}},scaleInPixels:!1,displayScaleParams:{dispHeightFactor:1,cameraPosition:[0,0,0],cameraDir:[1,0,0],isParallel:!1,rendererPixelDims:[1,1]},_internalArrays:{}},i)),eE.algo(e,t,1,1),eE.get(e,t,["labels","displayScaleParams","coincidentTopologyParameters"]),eE.set(e,t,[{type:"object",name:"displayScaleParams"},{type:"object",name:"coincidentTopologyParameters"}]),eE.setGet(e,t,["scaleInPixels","activeScaleFactor","activeColor","useActiveColor"]),t.classHierarchy.push("vtkWidgetRepresentation"),n={mtimes:{},states:[]},t._onCoincidentTopologyParametersChanged=function(){e.getActors().forEach(function(e){LL(e.getMapper(),t.coincidentTopologyParameters)})},e.getActors=function(){return t.actors},e.getNestedProps=e.getActors,e.setLabels=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];1===i.length?t.labels=[].concat(i[0]):t.labels=i,e.modified()},e.getRepresentationStates=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.inputData[0];return n.mtimes.representation===e.getMTime()&&n.mtimes.input===i.getMTime()||(n.mtimes.representation=e.getMTime(),n.mtimes.input=i.getMTime(),n.states=[],t.labels.forEach(function(e){n.states=n.states.concat(i.getStatesWithLabel(e)||[])})),n.states},e.getSelectedState=function(t,n){var i=e.getRepresentationStates();return n<i.length?i[n]:(LN("Representation ".concat(e.getClassName()," should implement getSelectedState(prop, compositeID) method.")),null)},e.updateActorVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BP.FRONT_BUFFER,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!0;switch(t.behavior){case 0:o=e===BP.PICKING_BUFFER||i;break;case 1:o=n;break;default:o=!0}for(var a=o,s=0;s<t.actors.length;s++)t.visibilityFlagArray?t.actors[s].setVisibility(a&&t.visibilityFlagArray[s]):t.actors[s].setVisibility(a);if(t.alwaysVisibleActors)for(var l=0;l<t.alwaysVisibleActors.length;l++)t.alwaysVisibleActors[l].setVisibility(!0)},t.actors.push=function(){LR("You should use publicAPI.addActor() to initialize the actor properly");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){return e.addActor(t)})},e.addActor=function(e){LL(e.getMapper(),t.coincidentTopologyParameters),Array.prototype.push.apply(t.actors,[e])},e.setLabels(t.labels)},mergeStyles:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o={active:{},inactive:{},static:{}};return LB.forEach(function(t){var i=o[t];e.forEach(function(e){i[e]||(i[e]={}),n.filter(function(n){return n&&n[t]&&n[t][e]}).forEach(function(n){return Object.assign(i[e],n[t][e])})})}),o},applyStyles:function(e,t,n){n?Object.keys(e).forEach(function(i){var o=e[i].actor===n?t.active[i]:t.inactive[i];o&&e[i].actor.getProperty().set(o)}):(Object.keys(t.static).forEach(function(n){e[n]&&e[n].actor.getProperty().set(t.static[n])}),Object.keys(t.inactive).forEach(function(n){e[n]&&e[n].actor.getProperty().set(t.inactive[n])}))},connectPipeline:function(e){var t=e.source;e.filter&&(t.isA("vtkDataSet")?e.filter.setInputData(t):e.filter.setInputConnection(t.getOutputPort()),t=e.filter),t&&(t.isA("vtkDataSet")?e.mapper.setInputData(t):e.mapper.setInputConnection(t.getOutputPort())),e.glyph&&e.mapper.setInputConnection(e.glyph.getOutputPort(),1),e.actor.setMapper(e.mapper)}};function Lj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lj(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var LU={behavior:0,pickable:!0,dragable:!0,scaleInPixels:!0},Lz={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=LG(LG({},LU),n);LV.extend(e,t,i),t.classHierarchy.push("vtkHandleRepresentation")}};function LW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LW(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Lq={behavior:1,pickable:!1,dragable:!0},LK={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=LH(LH({},Lq),n);LV.extend(e,t,i),t.classHierarchy.push("vtkContextRepresentation")}};function LX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function LY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LZ(e,t){return function(e,n){for(var i=LF(e,"points",n.length).getData(),o=0,a=0;a<n.length;++a){var s=n[a].getOrigin(t.scaleInPixels&&t.displayScaleParams);i[o++]=s[0],i[o++]=s[1],i[o++]=s[2]}}}function LJ(e,t,n){var i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T,O,P,M,E,D;return LY(LY({defaultScale:1},n),{},{_pipeline:LY({source:null!=(i=null==(o=n._pipeline)?void 0:o.source)?i:e,glyph:null!=(a=null==(s=n._pipeline)?void 0:s.glyph)?a:pS.newInstance({phiResolution:8,thetaResolution:8}),mapper:null!=(l=null==(u=n._pipeline)?void 0:u.mapper)?l:TB.newInstance({scalarMode:ak.USE_POINT_FIELD_DATA}),actor:null!=(c=null==(d=n._pipeline)?void 0:d.actor)?c:mH.newInstance({parentProp:e})},n._pipeline),applyMixin:LY({origin:null!=(f=null==(p=n.applyMixin)?void 0:p.origin)?f:LZ(0,t),noPosition:null!=(h=null==(m=n.applyMixin)?void 0:m.noPosition)?h:function(e,t){LF(e,"points",0)},color3:null!=(g=null==(v=n.applyMixin)?void 0:v.color3)?g:function(e,n){t._pipeline.mapper.setColorByArrayName("color");for(var i=LF(e,"color",n.length,"Uint8Array",4),o=i.getData(),a=0,s=0;s<n.length;++s){var l=n[s].getColor3();n[s].getActive()&&t.useActiveColor&&(l=t.activeColor),o[a++]=l[0],o[a++]=l[1],o[a++]=l[2],o[a++]=n[s].getOpacity()}i.dataChange()},color:null!=(y=null==(b=n.applyMixin)?void 0:b.color)?y:function(e,n){t._pipeline.mapper.setColorByArrayName("color");for(var i=LF(e,"color",n.length).getData(),o=0;o<n.length;++o){var a=n[o].getColor();n[o].getActive()&&t.useActiveColor&&(a=t.activeColor),i[o]=a}},noColor:null!=(x=null==(w=n.applyMixin)?void 0:w.noColor)?x:function(e,n){t._pipeline.mapper.setColorByArrayName(null)},scale3:null!=(A=null==(C=n.applyMixin)?void 0:C.scale3)?A:function(n,i){t._pipeline.mapper.setScaleArray("scale"),t._pipeline.mapper.setScaleFactor(1),t._pipeline.mapper.setScaling(!0),t._pipeline.mapper.setScaleMode(TB.ScaleModes.SCALE_BY_COMPONENTS);for(var o=LF(n,"scale",i.length,"Float32Array",3).getData(),a=0,s=0;s<i.length;++s){var l,u,c=i[s],d=c.getActive()?t.activeScaleFactor:1;e.getScaleInPixels()&&(d*=BG(c.getOrigin(),t.displayScaleParams));var f=null!=(l=null==(u=c.getScale3)?void 0:u.call(c))?l:t.defaultScale;o[a++]=d*f[0],o[a++]=d*f[1],o[a++]=d*f[2]}},scale1:null!=(S=null==(_=n.applyMixin)?void 0:_.scale1)?S:function(n,i){t._pipeline.mapper.setScaleArray("scale"),t._pipeline.mapper.setScaleFactor(1),t._pipeline.mapper.setScaling(!0);for(var o=LF(n,"scale",i.length).getData(),a=0;a<i.length;++a){var s,l,u=i[a],c=u.getActive()?t.activeScaleFactor:1;e.getScaleInPixels()&&(c*=BG(u.getOrigin(),t.displayScaleParams));var d=null!=(s=null==(l=u.getScale1)?void 0:l.call(u))?s:t.defaultScale;o[a]=c*d}},noScale:null!=(T=null==(O=n.applyMixin)?void 0:O.noScale)?T:function(e,n){t._pipeline.mapper.setScaleArray(null),t._pipeline.mapper.setScaleFactor(t.defaultScale),t._pipeline.mapper.setScaling(1!==t.defaultScale)},direction:null!=(P=null==(M=n.applyMixin)?void 0:M.direction)?P:function(e,n){t._pipeline.mapper.setOrientationArray("orientation"),t._pipeline.mapper.setOrientationMode(TP.MATRIX);for(var i=LF(e,"orientation",n.length,"Float64Array",9).getData(),o=0;o<n.length;++o){var a=n[o],s=a.getRight?a.getRight():[1,0,0],l=a.getUp?a.getUp():[0,1,0],u=a.getDirection?a.getDirection():[0,0,1];i.set(s,9*o),i.set(l,9*o+3),i.set(u,9*o+6)}},noOrientation:null!=(E=null==(D=n.applyMixin)?void 0:D.noOrientation)?E:function(e,n){t._pipeline.mapper.setOrientationArray(null)}},n.applyMixin)})}function LQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};1===n.behavior?LK.extend(e,t,LJ(e,t,n)):Lz.extend(e,t,LJ(e,t,n)),"lighting"in n&&t._pipeline.actor.getProperty().setLighting(n.lighting),eE.setGet(e,t._pipeline,["defaultScale"]),eE.get(e,t._pipeline,["glyph","mapper","actor"]),eE.setGet(e,t.applyMixin,Object.keys(t.applyMixin)),function(e,t){t.classHierarchy.push("vtkGlyphRepresentation");var n=LY({},e),i=lC.newInstance({mtime:0});function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.every(function(t){var n,i;return null!=(null==(n=e[0])||null==(i=n["get".concat(eE.capitalize(t))])?void 0:i.call(n))})}e.getRepresentationStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.inputData[0];return n.getRepresentationStates(e).filter(function(e){var t,n,i;return(null==(t=e.getOrigin)?void 0:t.call(e))&&(null==(n=null==(i=e.isVisible)?void 0:i.call(e))||n)})},e.getMixins=function(e){var n={};return o(e,"origin")?n.position=t.applyMixin.origin:n.position=t.applyMixin.noPosition,o(e,"color3")?n.color=t.applyMixin.color3:o(e,"color")?n.color=t.applyMixin.color:n.color=t.applyMixin.noColor,o(e,"scale3")?n.scale=t.applyMixin.scale3:o(e,"scale1")?n.scale=t.applyMixin.scale1:n.scale=t.applyMixin.noScale,o(e,"direction")?n.orientation=t.applyMixin.direction:n.orientation=t.applyMixin.noOrientation,n},e.requestData=function(t,n){var o=e.getRepresentationStates(t[0]);n[0]=i,Object.values(e.getMixins(o)).forEach(function(e){return e(i,o)}),i.getPoints().modified(),i.modified()},LV.connectPipeline(t._pipeline),e.addActor(t._pipeline.actor)}(e,t)}var L$={newInstance:eE.newInstance(LQ,"vtkGlyphRepresentation"),extend:LQ};function L0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function L1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L0(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L2(e,t){var n,i,o,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,L1(L1({behavior:1,glyphResolution:32,drawBorder:!1,drawFace:!0},l),{},{_pipeline:L1({glyph:null!=(n=null==l||null==(i=l.pipeline)?void 0:i.glyph)?n:fF.newInstance({resolution:null!=(o=l.glyphResolution)?o:32,radius:1,lines:null!=(a=l.drawBorder)&&a,face:null==(s=l.drawFace)||s,direction:[0,0,1]})},null==l?void 0:l.pipeline)})),eE.setGet(e,t,["glyphResolution","drawFace","drawBorder"]),eE.get(e,t._pipeline,["glyph","mapper","actor"]),t.classHierarchy.push("vtkCircleContextRepresentation"),t._pipeline.actor.getProperty().setOpacity(.2),t._pipeline.mapper.setResolveCoincidentTopology(mZ.PolygonOffset),t._pipeline.mapper.setRelativeCoincidentTopologyPolygonOffsetParameters(-1,-1),e.setGlyphResolution=eE.chain(e.setGlyphResolution,t._pipeline.glyph.setResolution),e.setDrawBorder=eE.chain(e.setDrawBorder,function(e){return t._pipeline.glyph.setLines(e)}),e.setDrawFace=eE.chain(e.setDrawFace,function(e){return t._pipeline.glyph.setFace(e)}),e.setOpacity=function(e){t._pipeline.actor.getProperty().setOpacity(e)}}var L3={newInstance:eE.newInstance(L2,"vtkCircleContextRepresentation"),extend:L2},L4={defaultColor:[1,0,.5],opacity:.2};function L5(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,L4,i),LK.extend(e,t,i),eE.setGetArray(e,t,["defaultColor"],3),eE.get(e,t,["mapper","actor"]),eE.setGet(e,t,["opacity"]),t.classHierarchy.push("vtkConvexFaceContextRepresentation"),t.internalPolyData=lC.newInstance({mtime:0}),t.points=new Float32Array(12),t.cells=new Uint8Array([4,0,1,2,3]),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getPolys().setData(t.cells),t.mapper=gd.newInstance({scalarVisibility:!1}),t.actor=mH.newInstance({parentProp:e}),t.actor.getProperty().setOpacity(t.opacity),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),e.addActor(t.actor),e.requestData=function(n,i){for(var o=e.getRepresentationStates(n[0]).filter(function(e){return e.getOrigin()}),a=function(e,t){var n=LF(e,"points",t).getData(),i=e.getPolys().getNumberOfValues(),o=LF(e,"polys",t+1).getData();if(i!==o.length){o[0]=t;for(var a=0;a<t;a++)o[a+1]=a}return n}(t.internalPolyData,o.length),s=0;s<o.length;s++){var l=o[s].getOrigin();a[3*s]=l[0],a[3*s+1]=l[1],a[3*s+2]=l[2]}t.internalPolyData.modified(),i[0]=t.internalPolyData},e.getSelectedState=function(n,i){var o=t.inputData[0],a=e.getRepresentationStates(o);return o.updateFromOriginRightUp&&o.updateFromOriginRightUp(a[0].getOrigin(),a[a.length-1].getOrigin(),a[1].getOrigin()),o},n=e.updateActorVisibility,e.updateActorVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BP.FRONT_BUFFER,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];0===t.behavior&&e===BP.PICKING_BUFFER?t.actor.getProperty().setOpacity(1):t.actor.getProperty().setOpacity(t.opacity),n(e,i,o)}}var L6={newInstance:eE.newInstance(L5,"vtkConvexFaceContextRepresentation"),extend:L5};function L8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function L9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L8(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_pipeline:{glyph:fq.newInstance()}},n)),t.classHierarchy.push("vtkCubeHandleRepresentation")}var L7={newInstance:eE.newInstance(L9,"vtkCubeHandleRepresentation"),extend:L9},Fe=BM.RenderingTypes,Ft=mN.Interpolation,Fn=mN.Representation,Fr=["plane","outline","normal","origin","display2D"],Fi={active:{plane:{opacity:1,color:[0,.9,0]},normal:{opacity:1,color:[0,.9,0]},origin:{opacity:1,color:[0,.9,0]}},inactive:{plane:{opacity:.6,color:[1,1,1]},normal:{opacity:1,color:[.9,0,0]},origin:{opacity:1,color:[1,0,0]}},static:{display2D:{representation:Fn.POINT},outline:{color:[1,1,1],opacity:1,representation:Fn.WIREFRAME,interpolation:Ft.FLAT}}},Fo={sphereResolution:24,handleSizeRatio:.05,axisScale:.1,normalVisible:!0,originVisible:!0,planeVisible:!0,outlineVisible:!0};function Fa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fo,n),LV.extend(e,t,n),eE.get(e,t,["sphereResolution","representationStyle"]),eE.setGet(e,t,["handleSizeRatio","axisScale","normalVisible","originVisible","planeVisible","outlineVisible"]),t.classHierarchy.push("vtkImplicitPlaneRepresentation"),t.plane=r8.newInstance(),t.matrix=a$.buildFromDegree(),t._pipelines={},t._pipelines.outline={source:fq.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({pickable:!1,_parentProp:e})},t._pipelines.plane={source:uW.newInstance({cutFunction:t.plane}),filter:cV.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({pickable:!0,_parentProp:e})},t._pipelines.origin={source:pS.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({pickable:!0,_parentProp:e})},t._pipelines.normal={source:fI.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({pickable:!0,_parentProp:e})},t._pipelines.display2D={source:e,mapper:Oc.newInstance(),actor:mH.newInstance({pickable:!1,_parentProp:e})},t._pipelines.plane.source.setInputConnection(t._pipelines.outline.source.getOutputPort()),LV.connectPipeline(t._pipelines.outline),LV.connectPipeline(t._pipelines.plane),LV.connectPipeline(t._pipelines.origin),LV.connectPipeline(t._pipelines.normal),LV.connectPipeline(t._pipelines.display2D),e.addActor(t._pipelines.outline.actor),e.addActor(t._pipelines.plane.actor),e.addActor(t._pipelines.origin.actor),e.addActor(t._pipelines.normal.actor),e.addActor(t._pipelines.display2D.actor),e.requestData=function(e,n){var i,o=e[0],a=o.getOrigin();if(a){var s=o.getNormal(),l=o.getBounds();t.plane.setOrigin(a),t.plane.setNormal(s),t._pipelines.outline.source.setCenter(.5*(l[0]+l[1]),.5*(l[2]+l[3]),.5*(l[4]+l[5]));var u=l[1]-l[0],c=l[3]-l[2],d=l[5]-l[4];t._pipelines.outline.source.setXLength(u),t._pipelines.outline.source.setYLength(c),t._pipelines.outline.source.setZLength(d);var f=1;t.scaleInPixels&&(f=BG(a,t.displayScaleParams)),t._pipelines.normal.source.set({height:Math.max(u,c,d),radius:t.handleSizeRatio*Math.min(u,c,d)*t.axisScale*f,resolution:t.sphereResolution});var p=t._pipelines.normal.source.getOutputData(),h=lC.newInstance();h.shallowCopy(p),h.getPoints().setData(Float32Array.from(p.getPoints().getData()),3),h.getPointData().removeAllArrays(),t.matrix.identity().translate(a[0],a[1],a[2]).rotateFromDirections([0,1,0],s).apply(h.getPoints().getData()),t._pipelines.normal.mapper.setInputData(h),t._pipelines.origin.actor.setPosition(a);var m=t.handleSizeRatio*Math.min(u,c,d)*f;t._pipelines.origin.actor.setScale(m,m,m),LV.applyStyles(t._pipelines,t.representationStyle,o.getActive()&&o.getActiveHandle());var g=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance();g.shallowCopy(t._pipelines.plane.filter.getOutputData()),n[0]=g}},e.setSphereResolution=function(e){return t.sphereResolution=e,t._pipelines.origin.source.setPhiResolution(e)&&t._pipelines.origin.source.setThetaResolution(e)},e.setRepresentationStyle=function(n){t.representationStyle=LV.mergeStyles(Fr,t.representationStyle,n),LV.applyStyles(t._pipelines,t.representationStyle),e.modified()},e.updateActorVisibility=function(e,n,i){var o=t.planeVisible,a=t.originVisible,s=t.normalVisible,l=t.outlineVisible;if(e===Fe.PICKING_BUFFER)t._pipelines.plane.actor.setVisibility(o),t._pipelines.origin.actor.setVisibility(a),t._pipelines.normal.actor.setVisibility(s),t._pipelines.plane.actor.getProperty().setOpacity(1);else{t._pipelines.outline.actor.setVisibility(l&&n),t._pipelines.plane.actor.setVisibility(o&&i),t._pipelines.origin.actor.setVisibility(a&&i),t._pipelines.normal.actor.setVisibility(s&&i);var u=t.inputData[0];u&&LV.applyStyles(t._pipelines,t.representationStyle,u.getActive()&&u.getActiveHandle())}},e.getSelectedState=function(e,n){var i=t.inputData[0];switch(i.setActiveHandle(e),e){case t._pipelines.plane.actor:i.setUpdateMethodName("updateFromPlane");break;case t._pipelines.origin.actor:i.setUpdateMethodName("updateFromOrigin");break;case t._pipelines.normal.actor:i.setUpdateMethodName("updateFromNormal");break;default:i.setUpdateMethodName("updateFromPlane")}return i},e.setRepresentationStyle(Fi),e.setSphereResolution(t.sphereResolution)}var Fs={newInstance:eE.newInstance(Fa,"vtkImplicitPlaneRepresentation"),extend:Fa,generateState:function(){return Lf.createBuilder().addField({name:"origin",initialValue:[0,0,0]}).addField({name:"normal",initialValue:[0,0,1]}).addField({name:"activeHandle",initialValue:null}).addField({name:"updateMethodName"}).build()}};function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fc(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,Fu({infiniteLine:!0,glyphResolution:4,holeWidth:0,_pipeline:{glyph:fI.newInstance({resolution:null!=(n=o.glyphResolution)?n:4,initAngle:null!=(i=o.glyphAngle)?i:Math.PI/4,direction:[0,0,1]})}},o)),eE.setGet(e,t,["infiniteLine","glyphResolution","holeWidth"]),function(e,t){function n(n){if(t.displayCallback){for(var i=[],o=e.getRepresentationStates(),a=0;a<o.length;a++)o[a].getActive()&&i.push(n[a]);if(i.length)return void t.displayCallback(i)}t.displayCallback()}t.classHierarchy.push("vtkLineHandleRepresentation"),t.displayMapper=Oc.newInstance(),t.displayActor=mH.newInstance({parentProp:e}),t.displayActor.setMapper(t.displayMapper),t.displayMapper.setInputConnection(e.getOutputPort()),e.addActor(t.displayActor),t.alwaysVisibleActors=[t.displayActor],e.setGlyphResolution=eE.chain(e.setGlyphResolution,t._pipeline.glyph.setThetaResolution,t._pipeline.glyph.setPhiResolution),e.setDisplayCallback=function(e){t.displayCallback=e,t.displayMapper.setCallback(e?n:null)};var i=Fu({},e);e.requestData=function(n,o){if(i.requestData(n,o),t.holeWidth){var a=o[0],s=a.getPoints();[s].concat(m(a.getPointData().getArrays())).forEach(function(e){var t=e.getNumberOfValues();e.resize(2*e.getNumberOfTuples());for(var n=e.getData(),i=0;i<t;++i)n[i+t]=n[i]});for(var l=e.getRepresentationStates(n[0]).length,u=a.getPointData().getArrayByName("scale"),c=a.getPointData().getArrayByName("orientation"),d=[1,1,1],f=[1,0,0,0,1,0,0,0,1],p=0;p<l;++p){var h,g,v=p+l,y=null!=(h=null==u?void 0:u.getTuple(p))?h:d,b=null!=(g=null==c?void 0:c.getTuple(p))?g:f,x=s.getTuple(p);y[2]*=.5,null==u||u.setTuple(p,y),null==u||u.setTuple(v,y);var w=t.holeWidth;e.getScaleInPixels()&&(w*=BG(x,t.displayScaleParams));var A=rt(0,0,.5*y[2]+w);rP(A,A,b),s.setTuple(p,ri(n9(),x,A)),s.setTuple(v,rV(n9(),x,A))}}},e.getSelectedState=function(t,n){var i=e.getRepresentationStates();return i[n%i.length]};var o=e.getScale3();e.setScale3(function(e,n){if(o(e,n),t.infiniteLine)for(var i=LF(e,"scale",n.length,"Float32Array",3).getData(),a=0;a<n.length;++a)i[3*a+2]=1e5})}(e,t)}var Fd={newInstance:eE.newInstance(Fc,"vtkLineHandleRepresentation"),extend:Fc},Ff={edgeColor:[1,1,1]};function Fp(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ff,i),LK.extend(e,t,i),eE.setGetArray(e,t,["edgeColor"],3),eE.get(e,t,["mapper","actor"]),t.classHierarchy.push("vtkOutlineContextRepresentation"),t.bbox=m(iG.INIT_BOUNDS),t.internalPolyData=lC.newInstance({mtime:0}),t.points=new Float32Array(24),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getLines().setData(Uint16Array.from(dW)),t.mapper=gd.newInstance({scalarVisibility:!1}),t.actor=mH.newInstance({parentProp:e}),(n=t.actor.getProperty()).setEdgeColor.apply(n,m(t.edgeColor)),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),e.addActor(t.actor),e.requestData=function(n,i){var o=e.getRepresentationStates(n[0]).filter(function(e){return e.getOrigin&&e.getOrigin()});iG.reset(t.bbox);for(var a=0;a<o.length;a++){var s=o[a].getOrigin();s&&iG.addPoint.apply(iG,[t.bbox].concat(m(s)))}for(var l=0;l<dz.length;l++)t.points[l]=t.bbox[dz[l]];t.internalPolyData.getPoints().modified(),t.internalPolyData.modified(),i[0]=t.internalPolyData}}var Fh={newInstance:eE.newInstance(Fp,"vtkOutlineContextRepresentation"),extend:Fp};function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Fv={threshold:Number.EPSILON,closePolyLine:!1,lineThickness:2,scaleInPixels:!0};function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Fg(Fg({},Fv),n);LV.extend(e,t,i),eE.setGet(e,t,["threshold","closePolyLine","lineThickness"]),function(e,t){t.classHierarchy.push("vtkPolyLineRepresentation");var n=Fg({},e),i=lC.newInstance({mtime:0});function o(n){var o=n;e.getScaleInPixels()&&i&&(o*=BG(iG.getCenter(i.getBounds()),t.displayScaleParams)),t._pipelines.tubes.filter.setRadius(o)}t._pipelines={tubes:{source:e,filter:fh.newInstance({radius:t.lineThickness,numberOfSides:12,capping:!1}),mapper:gd.newInstance(),actor:mH.newInstance({parentProp:e})}},LV.connectPipeline(t._pipelines.tubes),e.addActor(t._pipelines.tubes.actor),e.requestData=function(n,a){var s,l,u=n[0];a[0]=i;var c=e.getRepresentationStates(u).reduce(function(e,t){var n=t.getOrigin&&t.getOrigin()?t.getOrigin():null,i=e.length&&e[e.length-1].getOrigin();return!n||i&&tU(n,i)||e.push(t),e},[]),d=c.length,f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null;if(t<2)(i=LF(e,"points",1).getData()).set([0,0,0]),LF(e,"lines",0).getData();else if(!e.getPoints()||e.getPoints().length!==3*t){i=LF(e,"points",t).getData();var o=t+ +!!n;if(1!==e.getLines().getNumberOfCells()||e.getLines().getCellSizes()[0]!==o){var a=LF(e,"lines",o+1),s=a.getData();s[0]=o;for(var l=1;l<=o;l++)s[l]=l-1;n&&(s[o]=0),a.setData(s)}}return i}(a[0],d,t.closePolyLine&&d>2);if(f)for(var p=0;p<d;p++){var h=c[p].getOrigin();f[3*p]=h[0],f[3*p+1]=h[1],f[3*p+2]=h[2]}a[0].getPoints().modified(),a[0].modified(),o(null!=(s=null==(l=u.getLineThickness)?void 0:l.call(u))?s:t.lineThickness)},e.getSelectedState=function(e,n){return t.inputData[0]},e.updateActorVisibility=function(e,i,a){var s,l,u=t.inputData[0],c=null!=(s=null==(l=u.getLineThickness)?void 0:l.call(u))?s:t.lineThickness;return e===BP.PICKING_BUFFER&&(c=Math.max(4,c)),o(c),n.updateActorVisibility(e,i,a)}}(e,t)}var Fb={newInstance:eE.newInstance(Fy,"vtkPolyLineRepresentation"),extend:Fy};function Fx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Fw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fx(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_pipeline:{glyph:pP.newInstance({})}},n)),t.classHierarchy.push("vtkRotateTransformHandleRepresentation")}var FA={newInstance:eE.newInstance(Fw,"vtkRotateTransformHandleRepresentation"),extend:Fw};function FC(e,t){var n,i=e.getPoints().getData();(n=a$.buildFromRadian()).translate.apply(n,m(t)).apply(i),e.modified()}var FS={capPolyData:null};function F_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FS,n),fI.extend(e,t,n),eE.algo(e,t,2,1),t.classHierarchy.push("vtkTransformHandleSource"),e.requestData=function(e,n){var i,o,a,s,l=fI.newInstance({height:t.height,initAngle:t.initAngle,radius:t.radius,resolution:t.resolution,capping:t.capping,pointType:t.pointType,center:[0,0,0],direction:[0,1,0]}),u=u4.newInstance();u.setInputConnection(l.getOutputPort(),0),e[0]&&(FC(e[0],[0,t.height/2,0]),u.addInputData(e[0])),e[1]&&(i=e[1],o=i.getPoints().getData(),a$.buildFromRadian().rotateFromDirections([0,1,0],[0,-1,0]).apply(o),i.getPoints().modified(),i.modified(),FC(e[1],[0,-t.height/2,0]),u.addInputData(e[1]));var c=u.getOutputData(),d=c.getPoints().getData();(a=(s=a$.buildFromRadian()).translate.apply(s,m(t.center)).rotateFromDirections([0,1,0],t.direction)).translate.apply(a,m(t.center.map(function(e){return -1*e}))).apply(d),n[0]=c}}var FT={newInstance:eE.newInstance(F_,"vtkTransformHandleSource"),extend:F_};function FO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function FP(e,t){var n,i,o,a,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,(a=FT.newInstance({height:null!=(n=u.height)?n:1,radius:null!=(i=u.radius)?i:1,resolution:null!=(o=u.glyphResolution)?o:12,direction:[0,0,1]}),s=fq.newInstance(u.cubeSource),l=fq.newInstance(u.cubeSource),a.addInputConnection(s.getOutputPort()),a.addInputConnection(l.getOutputPort()),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FO(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_pipeline:{glyph:a}},u))),t.classHierarchy.push("vtkScaleTransformHandleRepresentation")}var FM={newInstance:eE.newInstance(FP,"vtkScaleTransformHandleRepresentation"),extend:FP};function FE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,n),function(e,t){function n(n){if(t.displayCallback){for(var i=[],o=e.getRepresentationStates(),a=0;a<o.length;a++)o[a].getActive()&&i.push(n[a]);if(i.length)return void t.displayCallback(i)}t.displayCallback()}t.classHierarchy.push("vtkSphereHandleRepresentation"),t.displayMapper=Oc.newInstance(),t.displayActor=mH.newInstance({parentProp:e}),t.displayActor.setMapper(t.displayMapper),t.displayMapper.setInputConnection(e.getOutputPort()),e.addActor(t.displayActor),t.alwaysVisibleActors=[t.displayActor],e.getGlyphResolution=function(){return t._pipeline.glyph.getPhiResolution()},e.setGlyphResolution=function(e){return t._pipeline.glyph.setPhiResolution(e)||t._pipeline.glyph.setThetaResolution(e)},e.setDisplayCallback=function(e){t.displayCallback=e,t.displayMapper.setCallback(e?n:null)}}(e,t)}var FD={newInstance:eE.newInstance(FE,"vtkSphereHandleRepresentation"),extend:FE},FI=eE.vtkErrorMacro,Fk={};function FN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fk,n),eE.obj(e,t),t.classHierarchy.push("vtkSpline1D"),e.computeCloseCoefficients=function(e,n,i,o){FI("".concat(t.classHierarchy.slice(-1)[0]," should implement computeCloseCoefficients"))},e.computeOpenCoefficients=function(e,n,i,o){FI("".concat(t.classHierarchy.slice(-1)[0]," should implement computeOpenCoefficients"))},e.getValue=function(e,n){FI("".concat(t.classHierarchy.slice(-1)[0]," should implement getValue"))}}var FR={newInstance:eE.newInstance(FN,"vtkSpline1D"),extend:FN},FB={};function FL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FB,n),FR.extend(e,t,n),eE.obj(e,t),t.classHierarchy.push("vtkCardinalSpline1D"),e.computeCloseCoefficients=function(e,n,i,o){t.coefficients&&t.coefficients.length===4*e||(t.coefficients=new Float32Array(4*e));for(var a=e-1,s=1;s<a;s++){var l=i[s]-i[s-1],u=i[s+1]-i[s];t.coefficients[4*s+0]=u,t.coefficients[4*s+1]=2*(u+l),t.coefficients[4*s+2]=l,n[s]=3*(u*(o[s]-o[s-1])/l+l*(o[s+1]-o[s])/u)}var c=i[a]-i[a-1],d=i[1]-i[0];t.coefficients[4*a+0]=d,t.coefficients[4*a+1]=2*(d+c),t.coefficients[4*a+2]=c,n[a]=3*(d*(o[a]-o[a-1])/c+c*(o[1]-o[0])/d);var f=t.coefficients[4*a+0],p=t.coefficients[4*a+1],h=t.coefficients[4*a+2],m=n[a];t.coefficients[2]=0,n[0]=0,t.coefficients[3]=1;for(var g=1;g<=a;g++)t.coefficients[4*g+1]-=t.coefficients[4*g+0]*t.coefficients[4*(g-1)+2],t.coefficients[4*g+2]=t.coefficients[4*g+2]/t.coefficients[4*g+1],n[g]=(n[g]-t.coefficients[4*g+0]*n[g-1])/t.coefficients[4*g+1],t.coefficients[4*g+3]=-t.coefficients[4*g+0]*t.coefficients[4*(g-1)+3]/t.coefficients[4*g+1];t.coefficients[4*a+0]=1,t.coefficients[4*a+1]=0;for(var v=a-1;v>0;v--)t.coefficients[4*v+0]=t.coefficients[4*v+3]-t.coefficients[4*v+2]*t.coefficients[4*(v+1)+0],t.coefficients[4*v+1]=n[v]-t.coefficients[4*v+2]*t.coefficients[4*(v+1)+1];n[0]=(m-h*t.coefficients[5]-f*t.coefficients[4*(a-1)+1])/(p+h*t.coefficients[4]+f*t.coefficients[4*(a-1)+0]),n[a]=n[0];for(var y=1;y<a;y++)n[y]=t.coefficients[4*y+0]*n[a]+t.coefficients[4*y+1];for(var b=0;b<a;b++){var x=i[b+1]-i[b];t.coefficients[4*b+0]=o[b],t.coefficients[4*b+1]=n[b],t.coefficients[4*b+2]=3*(o[b+1]-o[b])/(x*x)-(n[b+1]+2*n[b])/x,t.coefficients[4*b+3]=2*(o[b]-o[b+1])/(x*x*x)+(n[b+1]+n[b])/(x*x)}t.coefficients[4*a+0]=o[a],t.coefficients[4*a+1]=n[a],t.coefficients[4*a+2]=t.coefficients[2],t.coefficients[4*a+3]=t.coefficients[3]},e.computeOpenCoefficients=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.coefficients&&t.coefficients.length===4*e||(t.coefficients=new Float32Array(4*e));var s=e-1;switch(a.leftConstraint){case 1:t.coefficients[1]=1,t.coefficients[2]=0,n[0]=a.leftValue;break;case 2:t.coefficients[1]=2,t.coefficients[2]=1,n[0]=(o[1]-o[0])/(i[1]-i[0])*3-.5*(i[1]-i[0])*a.leftValue;break;case 3:t.coefficients[1]=2,Math.abs(a.leftValue+2)>1e-4?(t.coefficients[2]=(.5+a.leftValue)/(2+a.leftValue)*4,n[0]=(1+a.leftValue)/(2+a.leftValue)*6*((o[1]-o[0])/(i[1]-i[0]))):(t.coefficients[2]=0,n[0]=0);break;default:t.coefficients[1]=1,t.coefficients[2]=0,n[0]=o[2]-o[0]}for(var l=1;l<s;l++){var u=i[l]-i[l-1],c=i[l+1]-i[l];t.coefficients[4*l+0]=c,t.coefficients[4*l+1]=2*(c+u),t.coefficients[4*l+2]=u,n[l]=3*(c*(o[l]-o[l-1])/u+u*(o[l+1]-o[l])/c)}switch(a.rightConstraint){case 1:t.coefficients[4*s+0]=0,t.coefficients[4*s+1]=1,n[s]=a.rightValue;break;case 2:t.coefficients[4*s+0]=1,t.coefficients[4*s+1]=2,n[s]=(o[s]-o[s-1])/(i[s]-i[s-1])*3+.5*(i[s]-i[s-1])*a.rightValue;break;case 3:t.coefficients[4*s+1]=2,Math.abs(a.rightValue+2)>1e-4?(t.coefficients[4*s+0]=(.5+a.rightValue)/(2+a.rightValue)*4,n[s]=(1+a.rightValue)/(2+a.rightValue)*6*((o[s]-o[e-2])/(i[s]-i[e-2]))):(t.coefficients[4*s+0]=0,n[s]=0);break;default:t.coefficients[4*s+0]=0,t.coefficients[4*s+1]=1,n[s]=o[s]-o[s-2]}t.coefficients[2]/=t.coefficients[1],n[0]/=t.coefficients[4*s+1],t.coefficients[4*s+3]=1;for(var d=1;d<=s;d++)t.coefficients[4*d+1]-=t.coefficients[4*d+0]*t.coefficients[4*(d-1)+2],t.coefficients[4*d+2]/=t.coefficients[4*d+1],n[d]=(n[d]-t.coefficients[4*d+0]*n[d-1])/t.coefficients[4*d+1];for(var f=s-1;f>=0;f--)n[f]-=t.coefficients[4*f+2]*n[f+1];for(var p=0;p<s;p++){var h=i[p+1]-i[p];t.coefficients[4*p+0]=o[p],t.coefficients[4*p+1]=n[p],t.coefficients[4*p+2]=3*(o[p+1]-o[p])/(h*h)-(n[p+1]+2*n[p])/h,t.coefficients[4*p+3]=2*(o[p]-o[p+1])/(h*h*h)+(n[p+1]+n[p])/(h*h)}t.coefficients[4*s+0]=o[s],t.coefficients[4*s+1]=n[s],t.coefficients[4*s+2]=t.coefficients[2],t.coefficients[4*s+3]=t.coefficients[3]},e.getValue=function(e,n){return t.coefficients[4*e+3]*(n*n*n)+t.coefficients[4*e+2]*(n*n)+t.coefficients[4*e+1]*n+t.coefficients[4*e+0]}}var FF={newInstance:eE.newInstance(FL,"vtkCardinalSpline1D"),extend:FL},FV={tension:0,bias:0,continuity:0};function Fj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FV,n),FR.extend(e,t,n),eE.obj(e,t),t.classHierarchy.push("vtkKochanekSpline1D"),e.computeCloseCoefficients=function(e,n,i,o){t.coefficients&&t.coefficients.length===4*e||(t.coefficients=new Float32Array(4*e));for(var a=e-1,s=1;s<a;s++){var l=o[s]-o[s-1],u=o[s+1]-o[s],c=l*((1-t.tension)*(1-t.continuity)*(1+t.bias))+u*((1-t.tension)*(1+t.continuity)*(1-t.bias)),d=l*((1-t.tension)*(1+t.continuity)*(1+t.bias))+u*((1-t.tension)*(1-t.continuity)*(1-t.bias)),f=i[s+1]-i[s],p=i[s]-i[s-1];c*=p/(p+f),d*=f/(p+f),t.coefficients[4*s+0]=o[s],t.coefficients[4*s+1]=d,t.coefficients[4*s+2]=c}t.coefficients[0]=o[0],t.coefficients[4*a+0]=o[a],t.coefficients[4*a+1]=0,t.coefficients[4*a+2]=0,t.coefficients[4*a+3]=0;var h=o[a]-o[a-1],m=o[1]-o[0],g=h*((1-t.tension)*(1-t.continuity)*(1+t.bias))+m*((1-t.tension)*(1+t.continuity)*(1-t.bias)),v=h*((1-t.tension)*(1+t.continuity)*(1+t.bias))+m*((1-t.tension)*(1-t.continuity)*(1-t.bias)),y=i[1]-i[0],b=i[a]-i[a-1];g*=b/(b+y),v*=y/(b+y),t.coefficients[1]=v,t.coefficients[2]=g,t.coefficients[4*a+1]=v,t.coefficients[4*a+2]=g;for(var x=0;x<a;x++)t.coefficients[4*x+2]=-3*o[x]+3*o[x+1]+-2*t.coefficients[4*x+1]+-1*t.coefficients[4*(x+1)+2],t.coefficients[4*x+3]=2*o[x]+-2*o[x+1]+ +t.coefficients[4*x+1]+ +t.coefficients[4*(x+1)+2]},e.computeOpenCoefficients=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.coefficients&&t.coefficients.length===4*e||(t.coefficients=new Float32Array(4*e));for(var s=e-1,l=1;l<s;l++){var u=o[l]-o[l-1],c=o[l+1]-o[l],d=u*((1-t.tension)*(1-t.continuity)*(1+t.bias))+c*((1-t.tension)*(1+t.continuity)*(1-t.bias)),f=u*((1-t.tension)*(1+t.continuity)*(1+t.bias))+c*((1-t.tension)*(1-t.continuity)*(1-t.bias)),p=i[l+1]-i[l],h=i[l]-i[l-1];d*=h/(h+p),f*=p/(h+p),t.coefficients[4*l+0]=o[l],t.coefficients[4*l+1]=f,t.coefficients[4*l+2]=d}switch(t.coefficients[0]=o[0],t.coefficients[4*s+0]=o[s],a.leftConstraint){case 1:t.coefficients[1]=a.leftValue;break;case 2:t.coefficients[1]=(6*(o[1]-o[0])-2*t.coefficients[6]-a.leftValue)/4;break;case 3:Math.abs(a.leftValue+2)>1e-4?t.coefficients[1]=(3*(1+a.leftValue)*(o[1]-o[0])-(1+2*a.leftValue)*t.coefficients[6])/(2+a.leftValue):t.coefficients[1]=0;break;default:t.coefficients[1]=o[2]-o[0]}switch(a.rightConstraint){case 1:t.coefficients[4*s+2]=a.leftValue;break;case 2:t.coefficients[4*s+2]=(6*(o[s]-o[s-1])-2*t.coefficients[4*(s-1)+1]+a.leftValue)/4;break;case 3:Math.abs(a.leftValue+2)>1e-4?t.coefficients[4*s+2]=(3*(1+a.leftValue)*(o[s]-o[s-1])-(1+2*a.leftValue)*t.coefficients[4*(s-1)+1])/(2+a.leftValue):t.coefficients[4*s+2]=0;break;default:t.coefficients[4*s+2]=o[s]-o[s-2]}for(var m=0;m<s;m++)t.coefficients[4*m+2]=-3*o[m]+3*o[m+1]+-2*t.coefficients[4*m+1]+-1*t.coefficients[4*(m+1)+2],t.coefficients[4*m+3]=2*o[m]+-2*o[m+1]+ +t.coefficients[4*m+1]+ +t.coefficients[4*(m+1)+2]},e.getValue=function(e,n){return t.coefficients[4*e+3]*(n*n*n)+t.coefficients[4*e+2]*(n*n)+t.coefficients[4*e+1]*n+t.coefficients[4*e+0]}}var FG={newInstance:eE.newInstance(Fj,"vtkKochanekSpline1D"),extend:Fj},FU="KOCHANEK_SPLINE",Fz=eE.vtkErrorMacro,FW={close:!1,intervals:[],kind:FU,boundaryConditionValues:[0,0,0],tension:0,continuity:0,bias:0};function FH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FW,n),eE.obj(e,t),eE.setGet(e,t,["close","intervals"]),function(e,t){function n(e,n,i){0===n.length&&Fz("Splines require at least one points"),1===n.length&&n.push(n[0]);var o,a=n.length,s=null;if(o=new Float32Array(a),0===t.intervals.length){s=new Float32Array(a);for(var l=0;l<s.length;l++)s[l]=l}else s=t.intervals;t.close?e.computeCloseCoefficients(a,o,s,n):e.computeOpenCoefficients(a,o,s,n,{leftConstraint:t.boundaryCondition,leftValue:i,rightConstraint:t.boundaryCondition,rightValue:i})}t.classHierarchy.push("vtkSpline3D"),e.computeCoefficients=function(e){var i=e.map(function(e){return e[0]}),o=e.map(function(e){return e[1]}),a=e.map(function(e){return e[2]});n(t.splineX,i,t.boundaryConditionValues[0]),n(t.splineY,o,t.boundaryConditionValues[1]),n(t.splineZ,a,t.boundaryConditionValues[2])},e.getPoint=function(e,n){return[t.splineX.getValue(e,n),t.splineY.getValue(e,n),t.splineZ.getValue(e,n)]},t.kind===FU?(t.splineX=FG.newInstance({tension:t.tension,continuity:t.continuity,bias:t.bias}),t.splineY=FG.newInstance({tension:t.tension,continuity:t.continuity,bias:t.bias}),t.splineZ=FG.newInstance({tension:t.tension,continuity:t.continuity,bias:t.bias})):"CARDINAL_SPLINE"===t.kind?(t.splineX=FF.newInstance(),t.splineY=FF.newInstance(),t.splineZ=FF.newInstance()):Fz("Unknown spline type ".concat(t.kind))}(e,t)}var Fq={newInstance:eE.newInstance(FH,"vtkSpline3D"),extend:FH},FK={resolution:16,fill:!0,outputBorder:!1,borderColor:[.1,1,.1],errorBorderColor:[1,0,0]};function FX(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FK,i),LK.extend(e,t,i),eE.get(e,t,["mapper"]),eE.setGet(e,t,["resolution","boundaryCondition","fill","outputBorder"]),eE.setGetArray(e,t,["borderColor","errorBorderColor"],3),t.classHierarchy.push("vtkSplineContextRepresentation"),t.internalPolyData=lC.newInstance({mtime:0}),t._pipelines={area:{source:e,filter:fl.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({parentProp:e})},border:{source:e,filter:du.newInstance(),mapper:gd.newInstance(),actor:mH.newInstance({parentProp:e})}},LV.connectPipeline(t._pipelines.area),t._pipelines.area.actor.getProperty().setOpacity(.2),t._pipelines.area.actor.getProperty().setColor(0,1,0),e.addActor(t._pipelines.area.actor),LV.connectPipeline(t._pipelines.border),t._pipelines.border.actor.getProperty().setOpacity(1),t._pipelines.border.actor.getProperty().setColor(.1,1,.1),t._pipelines.border.actor.setVisibility(t.outputBorder),e.addActor(t._pipelines.border.actor),n=e.getRepresentationStates,e.getRepresentationStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.inputData[0];return n(e).filter(function(e){var t,n;return(null==(t=e.getOrigin)?void 0:t.call(e))&&(null==(n=e.isVisible)?void 0:n.call(e))})},e.requestData=function(n,i){var o,a=n[0];i[0]=t.internalPolyData;var s=a.getSplineClosed(),l=e.getRepresentationStates(a).map(function(e){return e.getOrigin()});if(!(l.length<=1)){var u=l.length;s?l.push(l[0]):--u;var c=Fq.newInstance({close:a.getSplineClosed(),kind:a.getSplineKind(),tension:a.getSplineTension(),bias:a.getSplineBias(),continuity:a.getSplineContinuity(),boundaryCondition:a.getSplineBoundaryCondition(),boundaryConditionValues:a.getSplineBoundaryConditionValues()});c.computeCoefficients(l);var d=LF(t.internalPolyData,"points",(u+!s)*t.resolution).getData(),f=new Uint32Array(u*t.resolution+2);f[0]=u*t.resolution+1,f[u*t.resolution+1]=0;for(var p=0;p<u;p++)for(var h=0;h<t.resolution;h++){var g=h/t.resolution,v=c.getPoint(p,g);d[3*(p*t.resolution+h)+0]=v[0],d[3*(p*t.resolution+h)+1]=v[1],d[3*(p*t.resolution+h)+2]=v[2],f[p*t.resolution+h+1]=p*t.resolution+h}if(s)f[u*t.resolution+1]=0;else{var y=u*t.resolution+1,b=c.getPoint(u,0);d[3*y+0]=b[0],d[3*y+1]=b[1],d[3*y+2]=b[2],f[u*t.resolution+1]=y}t.fill&&t.internalPolyData.getPolys().setData(f),t.internalPolyData.getLines().setData(t.outputBorder?f:[]),t.internalPolyData.modified(),t._pipelines.area.filter.update(),(o=t._pipelines.border.actor.getProperty()).setColor.apply(o,m(l.length<=3||0===t._pipelines.area.filter.getErrorCount()?t.borderColor:t.errorBorderColor))}},e.getSelectedState=function(e,n){return t.state},e.setFill=eE.chain(e.setFill,function(){t._pipelines.area.actor.setVisibility(t.fill)}),e.setOutputBorder=eE.chain(e.setOutputBorder,function(e){return t._pipelines.border.actor.setVisibility(e)})}var FY={newInstance:eE.newInstance(FX,"vtkSplineContextRepresentation"),extend:FX};function FZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function FJ(e,t){var n,i,o,a,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,(a=FT.newInstance({height:null!=(n=u.height)?n:1,radius:null!=(i=u.radius)?i:1,resolution:null!=(o=u.glyphResolution)?o:12,direction:[0,0,1]}),s=fM.newInstance(u.coneSource),l=fM.newInstance(u.coneSource),a.addInputConnection(s.getOutputPort()),a.addInputConnection(l.getOutputPort()),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FZ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_pipeline:{glyph:a}},u))),t.classHierarchy.push("vtkTranslateTransformHandleRepresentation")}var FQ={newInstance:eE.newInstance(FJ,"vtkTranslateTransformHandleRepresentation"),extend:FJ};function F$(e,t){t.classHierarchy.push("vtkAngleWidgetProp"),t._isDragging=!1;var n=gS.newInstance();function i(e){return e.altKey||e.controlKey||e.shiftKey}n.setPickFromList(1),e.getBounds=function(){return t.widgetState.getHandleList().reduce(function(t,n){return iG.inflate(iG.addPoint.apply(iG,[t].concat(m(n.getOrigin()))),e.getScaleInPixels()?0:n.getScale1()/2)},m(iG.INIT_BOUNDS))},e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleLeftButtonPress=function(o){if(!t.activeState||!t.activeState.getActive()||!t.pickable||i(o))return eE.VOID;n.initializePickList(),n.setPickList(e.getNestedProps());var a,s,l,u=null!=(a=null==(s=t.activeState)||null==(l=s.getManipulator)?void 0:l.call(s))?a:t.manipulator,c=u.handleEvent(o,t._apiSpecificRenderWindow).worldCoords;if(t.activeState===t.widgetState.getMoveHandle()&&t.widgetState.getHandleList().length<3&&u){var d=t.widgetState.getMoveHandle();d.setOrigin.apply(d,m(c));var f=t.widgetState.addHandle();f.setOrigin.apply(f,m(d.getOrigin())),f.setColor(d.getColor()),f.setScale1(d.getScale1()),f.setManipulator(u)}else t.dragable&&(t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e));return e.invokeStartInteractionEvent(),eE.EVENT_ABORT},e.handleMouseMove=function(n){var o,a,s,l=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator;if(l&&t.pickable&&t.dragable&&t.activeState&&t.activeState.getActive()&&!i(n)){var u=l.handleEvent(n,t._apiSpecificRenderWindow),c=u.worldCoords,d=u.worldDelta;if((t.activeState===t.widgetState.getMoveHandle()||t._isDragging)&&c.length&&t.activeState.setOrigin){var f=t.activeState.getOrigin();return f?t.activeState.setOrigin(ti(f,d,[])):t.activeState.setOrigin(c),e.invokeInteractionEvent(),eE.EVENT_ABORT}}return t.hasFocus&&t._widgetManager.disablePicking(),eE.VOID},e.handleLeftButtonRelease=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?t.hasFocus&&3===t.widgetState.getHandleList().length?(e.loseFocus(),eE.VOID):(t._isDragging?(t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),t._isDragging=!1):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&(t._widgetManager.enablePicking(),t._interactor.render()),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.grabFocus=function(){!t.hasFocus&&t.widgetState.getHandleList().length<3&&(t.activeState=t.widgetState.getMoveHandle(),t.activeState.activate(),t.activeState.setVisible(!0),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setVisible(!1),t.widgetState.getMoveHandle().setOrigin(null),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()}}function F0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function F1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F0(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:F$,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:30,visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:30}}).build()},n)),BX.extend(e,t,n),eE.setGet(e,t,["manipulator"]),t.classHierarchy.push("vtkAngleWidget"),t.methodsToLink=["activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale","scaleInPixels"],t._onManipulatorChanged=function(){t.widgetState.getMoveHandle().setManipulator(t.manipulator),t.widgetState.getHandleList().forEach(function(e){e.setManipulator(t.manipulator)})},e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["handles","moveHandle"]},{builder:Fb,labels:["handles","moveHandle"]}]},e.getAngle=function(){var e=t.widgetState.getHandleList();if(3!==e.length||!e[0].getOrigin()||!e[1].getOrigin()||!e[2].getOrigin())return 0;var n=[0,0,0],i=[0,0,0];return to(e[0].getOrigin(),e[1].getOrigin(),n),to(e[2].getOrigin(),e[1].getOrigin(),i),tw(n,i)},t.widgetState.onBoundsChange(function(e){var n=[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])];t.widgetState.getMoveHandle().setOrigin(n)}),e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0}))}var F2,F3={newInstance:eE.newInstance(F1,"vtkAngleWidget"),extend:F1},F4="POINTS",F5="PLACEMENT",F6="RATIO",F8=(y(F2={},F4,{CORNER_TO_CORNER:0,CENTER_TO_CORNER:1,RADIUS:2,DIAMETER:3}),y(F2,F5,{CLICK:0,DRAG:1,CLICK_AND_DRAG:2}),y(F2,F6,{FIXED:0,FREE:1}),F2),F9="CENTER";function F7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F7(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vt(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ve({modifierBehavior:{None:(y(n={},F5,F8[F5].CLICK_AND_DRAG),y(n,F4,F8[F4].CORNER_TO_CORNER),y(n,F6,F8[F6].FREE),n)},resetAfterPointPlacement:!1},o)),BX.extend(e,t,o),eE.setGet(e,t,["manipulator","modifierBehavior","resetAfterPointPlacement"]),t.classHierarchy.push("vtkShapeWidget"),i=Ve({},e),t.methodsToLink=["scaleInPixels"],e.setManipulator=function(e){i.setManipulator(e),t.widgetState.getStatesWithLabel("moveHandle").forEach(function(t){return t.setManipulator(e)})}}var Vn,Vr,Vi,Vo={newInstance:eE.newInstance(Vt,"vtkShapeWidget"),extend:Vt},Va="translateAxis",Vs="rotateLine",Vl="translateCenter",Vu=(y(Vn={},BO.YZ_PLANE,[0,0,1]),y(Vn,BO.XZ_PLANE,[0,0,1]),y(Vn,BO.XY_PLANE,[0,-1,0]),BO.YZ_PLANE,BO.XZ_PLANE,BO.XY_PLANE,y(Vr={},BO.YZ_PLANE,0),y(Vr,BO.XZ_PLANE,1),y(Vr,BO.XY_PLANE,2),["X","Y","Z"]),Vc=(y(Vi={},BO.YZ_PLANE,"X"),y(Vi,BO.XZ_PLANE,"Y"),y(Vi,BO.XY_PLANE,"Z"),Vi),Vd={X:BO.YZ_PLANE,Y:BO.XZ_PLANE,Z:BO.XY_PLANE};function Vf(e,t,n,i){var o=[];to(n,t,o),th(o);var a=[];to(i,t,a),th(a);var s=[0,0,1];tf(o,a,s),th(s);var l=m(e),u=[].concat(s);ta(u,1e-6),iG.addBounds(l,e[0]+u[0],e[1]+u[0],e[2]+u[1],e[3]+u[1],e[4]+u[2],e[5]+u[2]),iG.addBounds(l,e[0]-u[0],e[1]-u[0],e[2]-u[1],e[3]-u[1],e[4]-u[2],e[5]-u[2]);var c=r8.newInstance();c.setOrigin.apply(c,m(t)),c.setNormal.apply(c,s);var d=fq.newInstance();d.setBounds(l);var f=uW.newInstance();f.setCutFunction(c),f.setInputConnection(d.getOutputPort());var p=f.getOutputData();if(0===p.getNumberOfPoints())return!1;for(var h=ij.computeLocalBounds(p.getPoints(),o,a,s),g=0;g<3;g+=1)t[g]=h[0]*o[g]+h[2]*a[g]+h[4]*s[g],n[g]=h[1]*o[g]+h[2]*a[g]+h[4]*s[g],i[g]=h[0]*o[g]+h[3]*a[g]+h[4]*s[g];return!0}function Vp(e,t,n){var i=m(e);return a$.buildFromRadian().rotate(n,t).apply(i),i}function Vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vu,t=[];return e.forEach(function(n){e.forEach(function(e){n!==e&&t.push("".concat(n,"in").concat(e))})}),t}function Vm(e,t){var n=t[0],i=t[3],o=Object.keys(e.getPlanes()).map(function(e){return Vc[e]}).find(function(e){return e!==n&&e!==i});return"".concat(o,"in").concat(i)}function Vg(e,t,n,i){return ta(m(e),t*(i?1:n)/2)}function Vv(e,t,n){var i=Object.keys(e.getPlanes()).map(function(e){return Vc[e]}),o=i.reduce(function(t,n){return i.filter(function(e){return n!==e}).forEach(function(i){var o=tf(e.getPlanes()[Vd[n]].normal,e.getPlanes()[Vd[i]].normal,[]);t["".concat(n).concat(i)]=o,t["".concat(i).concat(n)]=o}),t},{}),a=e.getImage().getBounds(),s=e.getCenter(),l=iG.getDiagonalLength(a);e.getCenterHandle().setOrigin(s),Vh(i).forEach(function(i){var a,u,c,d,f,p,h=i[0],m=i[3],g=o["".concat(h).concat(m)];e["getRotationHandle".concat(i,"0")]().setOrigin(s),null==(a=e["getRotationHandle".concat(i,"0")]().getManipulator())||a.setHandleOrigin(s),null==(u=e["getRotationHandle".concat(i,"0")]().getManipulator())||u.setHandleNormal(e.getPlanes()[Vd[h]].normal),e["getRotationHandle".concat(i,"0")]().setOffset(Vg(g,n,l,t)),e["getRotationHandle".concat(i,"1")]().setOrigin(s),null==(c=e["getRotationHandle".concat(i,"1")]().getManipulator())||c.setHandleOrigin(s),null==(d=e["getRotationHandle".concat(i,"1")]().getManipulator())||d.setHandleNormal(e.getPlanes()[Vd[h]].normal),e["getRotationHandle".concat(i,"1")]().setOffset(Vg(g,-n,l,t));var v=e["getAxis".concat(i)]();v.setOrigin(s),null==(f=v.getManipulator())||f.setHandleOrigin(s),null==(p=v.getManipulator())||p.setHandleNormal(e.getPlanes()[Vd[h]].normal),th(g);var y=e.getPlanes()[Vd[m]].normal,b=tf(g,y,[]);v.setRight(y),v.setUp(b),v.setDirection(g)})}function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var Vb=eE.vtkErrorMacro;function Vx(e,t){t.classHierarchy.push("vtkShapeWidgetProp"),t._isDragging=!1,t.keysDown={};var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vy(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.setText=function(e){t.widgetState.getText().setText(e),t._interactor.render()},e.setResetAfterPointPlacement=t._factory.setResetAfterPointPlacement,e.getResetAfterPointPlacement=t._factory.getResetAfterPointPlacement,e.setModifierBehavior=t._factory.setModifierBehavior,e.getModifierBehavior=t._factory.getModifierBehavior,e.isBehaviorActive=function(n,i){return Object.keys(t.keysDown).some(function(o){return t.keysDown[o]&&e.getModifierBehavior()[o]&&e.getModifierBehavior()[o][n]===i})},e.isOppositeBehaviorActive=function(t,n){return Object.values(F8[t]).some(function(i){return n!==i&&e.isBehaviorActive(t,i)})},e.getActiveBehaviorFromCategory=function(t){return Object.values(F8[t]).find(function(n){return e.isBehaviorActive(t,n)||!e.isOppositeBehaviorActive(t,n)&&e.getModifierBehavior().None[t]===n})},e.isRatioFixed=function(){return e.getActiveBehaviorFromCategory(F6)===F8[F6].FIXED},e.isDraggingEnabled=function(){var t=e.getActiveBehaviorFromCategory(F5);return t===F8[F5].DRAG||t===F8[F5].CLICK_AND_DRAG},e.isDraggingForced=function(){return e.isBehaviorActive(F5,F8[F5].DRAG)||e.getModifierBehavior().None[F5]===F8[F5].DRAG},e.getPoint1=function(){return t.point1},e.getPoint2=function(){return t.point2},e.setPoints=function(n,i){t.point1=n,t.point2=i,t.point1Handle.setOrigin(t.point1),t.point2Handle.setOrigin(t.point2),e.updateShapeBounds()},e.placePoint1=function(n){t.hasFocus&&(e.setPoints(n,n),t.point1Handle.deactivate(),t.point2Handle.activate(),t.activeState=t.point2Handle,t.point2Handle.setVisible(!0),t.widgetState.getText().setVisible(!0),e.updateShapeBounds(),t.shapeHandle.setVisible(!0))},e.placePoint2=function(n){t.hasFocus&&(t.point2=n,t.point2Handle.setOrigin(t.point2),e.updateShapeBounds())},e.makeSquareFromPoints=function(e,n){var i=[0,0,0];ro(i,n,e);var o=t.shapeHandle.getDirection(),a=t.shapeHandle.getRight(),s=t.shapeHandle.getUp(),l=rw(i,o),u=rw(i,a),c=rw(i,s),d=Math.abs(u),f=Math.abs(c);return d<1e-6?u=c:f<1e-6?c=u:d>f?c=c/f*d:u=u/d*f,[e[0]+u*a[0]+c*s[0]+l*o[0],e[1]+u*a[1]+c*s[1]+l*o[1],e[2]+u*a[2]+c*s[2]+l*o[2]]};var i=function(e,n){var i=rm(e,n),o=t.shapeHandle.getUp(),a=t.shapeHandle.getRight();return{point1:[e[0]+(o[0]-a[0])*i,e[1]+(o[1]-a[1])*i,e[2]+(o[2]-a[2])*i],point2:[e[0]+(a[0]-o[0])*i,e[1]+(a[1]-o[1])*i,e[2]+(a[2]-o[2])*i]}};e.getBounds=function(){return t.point1&&t.point2?iG.addPoints(iG.reset([]),[t.point1,t.point2]):nR.uninitializeBounds([])},e.setCorners=function(t,n){e.updateTextPosition(t,n)},e.updateShapeBounds=function(){if(t.point1&&t.point2){var n=m(t.point1),o=m(t.point2);switch(e.isRatioFixed()&&(o=e.makeSquareFromPoints(n,o)),e.getActiveBehaviorFromCategory(F4)){case F8[F4].CORNER_TO_CORNER:e.setCorners(n,o);break;case F8[F4].CENTER_TO_CORNER:var a=[0,0,0];ro(a,n,o),ri(n,n,a),e.setCorners(n,o);break;case F8[F4].RADIUS:var s=i(n,o);e.setCorners(s.point1,s.point2);break;case F8[F4].DIAMETER:var l,u=(l=o,i([.5*(n[0]+l[0]),.5*(n[1]+l[1]),.5*(n[2]+l[2])],n));e.setCorners(u.point1,u.point2);break;default:Vb("vtk internal error")}}};var o=function(e,t,n){var i=[0,0,0];switch(e){case"MIN":break;case"MAX":nR.subtract(n,t,i);break;default:nR.subtract(n,t,i),nR.multiplyScalar(i,.5)}return i};e.updateTextPosition=function(e,n){var i=function(e,n){var i,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=iG.getCenter(e),c=t._renderer.getActiveCamera().getDirectionOfProjection(),d=t._renderer.getActiveCamera().getViewUp(),f=Array.isArray(l)?m(l):[l,l,u?l:0],p=(i=t._apiSpecificRenderWindow).worldToDisplay.apply(i,m(iG.getMinPoint(e)).concat([t._renderer])),h=(a=t._apiSpecificRenderWindow).worldToDisplay.apply(a,m(iG.getMaxPoint(e)).concat([t._renderer])),g=iG.addPoints(iG.reset([]),[p,h]),v=[],y=[],b=[],x=[];if(u&&c&&d&&iG.intersectPlane(g,u,c)){var w,A,C=(w=t._apiSpecificRenderWindow).worldToDisplay.apply(w,m(u).concat([t._renderer])),S=nR.add(u,c,[]),_=(A=t._apiSpecificRenderWindow).worldToDisplay.apply(A,m(S).concat([t._renderer])),T=nR.subtract(_,C,[]),O=10*iG.getDiagonalLength(g);r8.projectPoint(iG.getCenter(g),C,T,v);var P=nR.cross(d,T,[]);nR.normalize(P),nR.normalize(d),nR.normalize(T),nR.multiplyAccumulate(v,d,-O,v),nR.multiplyAccumulate(v,P,-O,v),x=v,Vf(g,v,y=nR.multiplyAccumulate(v,P,2*O,[]),b=nR.multiplyAccumulate(v,d,2*O,[]))}else v=[g[0],g[2],g[4]],y=[g[1],g[2],g[4]],b=[g[0],g[3],g[4]],x=[g[0],g[2],g[5]];var M=o(n[0],v,y),E=o(n[1],v,b),D=o(n[2],v,x),I=v;return nR.add(I,M,I),nR.add(I,E,I),nR.add(I,D,I),nR.add(I,f,I),(s=t._apiSpecificRenderWindow).displayToWorld.apply(s,I.concat([t._renderer]))}(iG.addPoints(iG.reset([]),[e,n]),t.widgetState.getTextPosition(),t.widgetState.getTextWorldMargin());t.widgetState.getText().setOrigin(i)},e.reset=function(){t.point1=null,t.point2=null,t.widgetState.getText().setVisible(!1),t.point1Handle.setOrigin(null),t.point2Handle.setOrigin(null),t.shapeHandle.setOrigin(null),t.shapeHandle.setVisible(!1),t.point2Handle.setVisible(!1),t.point2Handle.deactivate(),t.hasFocus?(t.point1Handle.activate(),t.activeState=t.point1Handle):(t.point1Handle.setVisible(!1),t.point1Handle.deactivate(),t.activeState=null),e.updateShapeBounds()},e.handleMouseMove=function(n){var i,o,a,s=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator;if(!(s&&t.activeState&&t.activeState.getActive()&&t.pickable&&t.dragable))return eE.VOID;if(!t.point2){var l=t._camera.getDirectionOfProjection(),u=t._camera.getViewUp(),c=[];rA(c,u,l),nR.normalize(c),rA(u,l,c),nR.normalize(u),t.shapeHandle.setUp(u),t.shapeHandle.setRight(c),t.shapeHandle.setDirection(l)}var d=s.handleEvent(n,t._apiSpecificRenderWindow),f=d.worldCoords,p=d.worldDelta;return f.length?(t.hasFocus?t.point1?(t.point2Handle.setOrigin(f),t.point2=f,e.updateShapeBounds(),e.invokeInteractionEvent()):t.point1Handle.setOrigin(f):t._isDragging&&(t.activeState===t.point1Handle?(nR.add(t.point1Handle.getOrigin(),p,t.point1),t.point1Handle.setOrigin(t.point1)):(nR.add(t.point2Handle.getOrigin(),p,t.point2),t.point2Handle.setOrigin(t.point2)),e.updateShapeBounds(),e.invokeInteractionEvent()),t.hasFocus||t._isDragging?eE.EVENT_ABORT:eE.VOID):eE.VOID},e.handleLeftButtonPress=function(n){var i,o,a,s=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator;if(!(t.activeState&&t.activeState.getActive()&&t.pickable&&s))return eE.VOID;var l=s.handleEvent(n,t._apiSpecificRenderWindow).worldCoords;return t.hasFocus?t.point1?(t.point2Handle.setOrigin(l),e.placePoint2(t.point2Handle.getOrigin()),e.invokeInteractionEvent(),e.invokeEndInteractionEvent(),e.getResetAfterPointPlacement()?e.reset():e.loseFocus()):(t.point1Handle.setOrigin(l),e.placePoint1(t.point1Handle.getOrigin()),e.invokeStartInteractionEvent()):(t.point1&&(t.activeState===t.point1Handle||t.activeState===t.point2Handle)&&t.dragable&&(t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e)),e.invokeStartInteractionEvent()),eE.EVENT_ABORT},e.handleLeftButtonRelease=function(n){if(t._isDragging)return t._isDragging=!1,t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent(),eE.EVENT_ABORT;if(!t.hasFocus||!t.pickable)return eE.VOID;var i=t._apiSpecificRenderWindow.getSize();return n.position.x<0||n.position.x>i[0]-1||n.position.y<0||n.position.y>i[1]-1?eE.VOID:(t.point1&&(e.placePoint2(t.point2Handle.getOrigin()),e.isDraggingEnabled())&&(rg(t.point1,t.point2)>100||e.isDraggingForced())&&(e.invokeInteractionEvent(),e.invokeEndInteractionEvent(),e.getResetAfterPointPlacement()?e.reset():e.loseFocus()),eE.EVENT_ABORT)},e.handleKeyDown=function(n){var i=n.key;"Escape"===i?t.hasFocus&&(e.reset(),e.loseFocus(),e.invokeEndInteractionEvent()):t.keysDown[i]=!0,t.hasFocus&&t.point1&&(t.point2=t.point2Handle.getOrigin(),e.updateShapeBounds())},e.handleKeyUp=function(n){var i=n.key;t.keysDown[i]=!1,t.hasFocus&&t.point1&&(t.point2=t.point2Handle.getOrigin(),e.updateShapeBounds())},e.grabFocus=function(){t.hasFocus||(e.reset(),t.point1Handle.activate(),t.activeState=t.point1Handle,t.point1Handle.setVisible(!0),t.shapeHandle.setVisible(!1),t._interactor.requestAnimation(e)),n.grabFocus()},e.loseFocus=function(){t.hasFocus&&t._interactor.cancelAnimation(e),t.point1||(t.point1Handle.setVisible(!1),t.point2Handle.setVisible(!1)),t.widgetState.deactivate(),t.point1Handle.deactivate(),t.point2Handle.deactivate(),t.activeState=null,t._interactor.render(),t._widgetManager.enablePicking(),n.loseFocus()}}function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VA(e,t){t.shapeHandle=t.widgetState.getEllipseHandle(),t.point1Handle=t.widgetState.getPoint1Handle(),t.point2Handle=t.widgetState.getPoint2Handle(),t.point1Handle.setManipulator(t.manipulator),t.point2Handle.setManipulator(t.manipulator),Vx(e,t);var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vw(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);t.classHierarchy.push("vtkEllipseWidgetProp"),e.setCorners=function(e,i){n.setCorners&&n.setCorners(e,i);var o=[.5*(e[0]+i[0]),.5*(e[1]+i[1]),.5*(e[2]+i[2])],a=[0,0,0];ro(a,i,o);var s=t.shapeHandle.getRight(),l=t.shapeHandle.getUp(),u=t.shapeHandle.getDirection(),c=rw(a,s),d=rw(a,l),f=rw(a,u);t.shapeHandle.setOrigin(o),t.shapeHandle.setScale3([c,d,f])}}function VC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VS(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vo.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VC(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:VA,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"point1Handle",initialValues:{scale1:10,visible:!1}}).addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"point2Handle",initialValues:{scale1:10,visible:!1}}).addStateFromMixin({labels:["ellipseHandle"],mixins:["origin","color","scale3","visible","orientation"],name:"ellipseHandle",initialValues:{scale3:[1,1,1]}}).addStateFromMixin({labels:["SVGtext"],mixins:["origin","color","text","visible"],name:"text",initialValues:{text:""}}).addField({name:"textPosition",initialValue:[F9,F9,F9]}).addField({name:"textWorldMargin",initialValue:0}).build(),modifierBehavior:{None:(y(n={},F5,F8[F5].CLICK_AND_DRAG),y(n,F4,F8[F4].CENTER_TO_CORNER),y(n,F6,F8[F6].FREE),n),Shift:y({},F6,F8[F6].FIXED),Control:y({},F4,F8[F4].CORNER_TO_CORNER)}},i)),eE.setGet(e,t,["widgetState"]),t.classHierarchy.push("vtkEllipseWidget"),t.methodsToLink=[].concat(m(t.methodsToLink),["activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale","drawBorder","drawFace","opacity"]),e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["moveHandle"]},{builder:L3,labels:["ellipseHandle"]}]},e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0}))}var V_={newInstance:eE.newInstance(VS,"vtkEllipseWidget"),extend:VS},VT=eE.vtkErrorMacro,VO=[2,0,1,2,0,2,2,0,4,2,1,3,2,1,5,2,2,3,2,2,6,2,3,7,2,4,5,2,4,6,2,5,7,2,6,7],VP={edgeColor:[1,1,1]};function VM(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,VP,o),LK.extend(e,t,o),eE.setGetArray(e,t,["edgeColor"],3),eE.get(e,t,["mapper","actor"]),t.classHierarchy.push("vtkCroppingOutlineRepresentation"),t.internalPolyData=lC.newInstance({mtime:0}),LF(t.internalPolyData,"lines",VO.length).getData().set(VO),i=LZ(0,t),t.mapper=gd.newInstance({scalarVisibility:!1}),t.actor=mH.newInstance({parentProp:e}),(n=t.actor.getProperty()).setEdgeColor.apply(n,m(t.edgeColor)),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),e.addActor(t.actor),e.requestData=function(n,o){var a=e.getRepresentationStates(n[0]).filter(function(e){return e.getOrigin&&e.getOrigin()});8===a.length?(i(t.internalPolyData,a),t.internalPolyData.getPoints().modified(),t.internalPolyData.modified(),o[0]=t.internalPolyData):VT("CroppingOutlineRepresentation did not get 8 states")}}var VE={newInstance:eE.newInstance(VM,"vtkCroppingOutlineRepresentation"),extend:VM},VD=["-","=","+"];function VI(e,t){var n=new Float64Array(3);return rO(n,e,t),n}function Vk(e){var t=b(e.split("").map(function(e){return VD.indexOf(e)-1}),3),n=t[0],i=t[1],o=t[2];return n*i*o!=0?"corners":n*i!=0||i*o!=0||o*n!=0?"edges":"faces"}function VN(e,t){return VI([(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2],t)}function VR(e,t){var n=n9();return ro(n,e,t),rx(n,n),n}function VB(e,t){t._isDragging=!1,e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleLeftButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable?(t.dragable&&(t.activeState.getManipulator().handleEvent(n,t._apiSpecificRenderWindow),t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e)),eE.EVENT_ABORT):eE.VOID},e.handleMouseMove=function(n){return t._isDragging?e.handleEvent(n):eE.VOID},e.handleLeftButtonRelease=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?(t._isDragging&&(t._isDragging=!1,t._interactor.cancelAnimation(e),t.widgetState.deactivate()),eE.EVENT_ABORT):eE.VOID},e.handleEvent=function(e){if(t.pickable&&t.activeState&&t.activeState.getActive()){var n=t.activeState.getManipulator();if(n){var i=t.activeState.getName(),o=Vk(i),a=i.split("").map(function(e){return VD.indexOf(e)}),s=t.widgetState.getCroppingPlanes().getPlanes(),l=t.widgetState.getIndexToWorldT(),u=[],c=[];if("corners"===o){var d=n.handleEvent(e,t._apiSpecificRenderWindow);u=d.worldCoords,c=d.worldDelta}if("faces"===o){var f=VN(s,l);n.setHandleOrigin(f),n.setHandleNormal(VR(t.activeState.getOrigin(),f));var p=n.handleEvent(e,t._apiSpecificRenderWindow);u=p.worldCoords,c=p.worldDelta}if("edges"===o){var h=a.map(function(e){return 1===e?e:0}).map(function(e){return VD[e+1]}).join(""),g=t.widgetState.getStatesWithLabel(h)[0],v=VN(s,l);n.setHandleNormal(VR(g.getOrigin(),v));var y=n.handleEvent(e,t._apiSpecificRenderWindow);u=y.worldCoords,c=y.worldDelta}if(u.length&&c.length){for(var b,x=VI(u,t.widgetState.getWorldToIndexT()),w=0;w<3;w++)0===a[w]?s[2*w]=x[w]:2===a[w]&&(s[2*w+1]=x[w]);return t.activeState.setOrigin(ti(t.activeState.getOrigin(),c,[])),(b=t.widgetState.getCroppingPlanes()).setPlanes.apply(b,m(s)),eE.EVENT_ABORT}}}return eE.VOID},t._camera=t._renderer.getActiveCamera(),t.classHierarchy.push("vtkImageCroppingWidgetProp")}function VL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VL(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,VF({behavior:VB,widgetState:function(){var e=Lf.createBuilder();e.addField({name:"indexToWorldT",initialValue:Array(16).fill(0)}).addField({name:"worldToIndexT",initialValue:Array(16).fill(0)});var t=Lf.createBuilder().addField({name:"planes",initialValue:[0,1,0,1,0,1]}).build();e.addStateFromInstance({labels:["croppingPlanes"],name:"croppingPlanes",instance:t});for(var n=-1;n<2;n++)for(var i=-1;i<2;i++)for(var o=-1;o<2;o++)if(0!==n||0!==i||0!==o){var a=VD[n+1]+VD[i+1]+VD[o+1],s=Vk(a);e.addStateFromMixin({labels:["handles",a,s],mixins:["name","origin","color","scale1","visible","manipulator"],name:a,initialValues:{scale1:30,origin:[n,i,o],visible:!0,name:a}})}return e.build()}()},n)),BX.extend(e,t,n),eE.setGet(e,t,["cornerManipulator","edgeManipulator","faceManipulator"]),function(e,t){t.classHierarchy.push("vtkImageCroppingWidget");var n=VF({},e),i=null;function o(e,n){t.widgetState.getStatesWithLabel(e).forEach(function(e){e.setVisible(n)})}e.setFaceHandlesEnabled=function(e){return o("faces",e)},e.setEdgeHandlesEnabled=function(e){return o("edges",e)},e.setCornerHandlesEnabled=function(e){return o("corners",e)},e.copyImageDataDescription=function(n){(i=t.widgetState).setIndexToWorldT.apply(i,m(n.getIndexToWorld())),(o=t.widgetState).setWorldToIndexT.apply(o,m(n.getWorldToIndex()));var i,o,a=n.getDimensions();t.widgetState.getCroppingPlanes().setPlanes([0,a[0],0,a[1],0,a[2]]),e.modified()},e.updateHandles=function(){for(var e=t.widgetState.getCroppingPlanes().getPlanes(),n=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2],i=[e[0],n[0],e[1]],o=[e[2],n[1],e[3]],a=[e[4],n[2],e[5]],s=t.widgetState.getIndexToWorldT(),l=function(e){return VD[e]},u=0;u<3;u++)for(var c=0;c<3;c++)for(var d=0;d<3;d++)if(1!==u||1!==c||1!==d){var f=[u,c,d].map(l).join(""),p=VI([i[u],o[c],a[d]],s),h=b(t.widgetState.getStatesWithLabel(f),1)[0];h.setOrigin.apply(h,m(p))}},e.delete=eE.chain(e.delete,function(){i&&i.unsubscribe()}),t.methodsToLink=["scaleInPixels"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["handles"]},{builder:VE,labels:["corners"]}]},i=t.widgetState.getCroppingPlanes().onModified(e.updateHandles),e.setCornerManipulator=function(e){n.setCornerManipulator(e),t.widgetState.getStatesWithLabel("corners").forEach(function(t){return t.setManipulator(e)})},e.setEdgeManipulator=function(e){n.setEdgeManipulator(e),t.widgetState.getStatesWithLabel("edges").forEach(function(t){return t.setManipulator(e)})},e.setFaceManipulator=function(e){n.setFaceManipulator(e),t.widgetState.getStatesWithLabel("faces").forEach(function(t){return t.setManipulator(e)})},e.setCornerManipulator(LP.newInstance({useCameraNormal:!0})),e.setEdgeManipulator(LP.newInstance()),e.setFaceManipulator(LS.newInstance())}(e,t)}var Vj={newInstance:eE.newInstance(VV,"vtkImageCroppingWidget"),extend:VV};function VG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VU(e,t){t.classHierarchy.push("vtkPlaneWidget"),t._isDragging=!1,t._draggingWidgetOrigin=[0,0,0],e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.updateCursor=function(){switch(t.activeState.getUpdateMethodName()){case"updateFromOrigin":t._apiSpecificRenderWindow.setCursor("crosshair");break;case"updateFromPlane":t._apiSpecificRenderWindow.setCursor("move");break;case"updateFromNormal":t._apiSpecificRenderWindow.setCursor("alias");break;default:t._apiSpecificRenderWindow.setCursor("grabbing")}},e.handleLeftButtonPress=function(n){if(!t.activeState||!t.activeState.getActive()||!t.pickable)return eE.VOID;t.lineManipulator.setWidgetOrigin(t.activeState.getOrigin()),t.lineManipulator.setWidgetNormal(t.activeState.getNormal()),t.planeManipulator.setWidgetOrigin(t.activeState.getOrigin()),t.planeManipulator.setWidgetNormal(t.activeState.getNormal()),t.trackballManipulator.reset(n),t.trackballManipulator.setWidgetNormal(t.activeState.getNormal());var i=null;switch(t.activeState.getUpdateMethodName()){case"updateFromOrigin":i=t.planeManipulator;break;case"updateFromPlane":i=t.lineManipulator;break;case"updateFromNormal":i=t.trackballManipulator}return i&&i.handleEvent(n,t._apiSpecificRenderWindow),t.dragable&&(t._draggingWidgetOrigin=t.widgetState.getOrigin(),t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e)),e.invokeStartInteractionEvent(),eE.EVENT_ABORT},e.handleMouseMove=function(n){return t._isDragging?e.handleEvent(n):eE.VOID},e.handleLeftButtonRelease=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?(t._isDragging&&(t._interactor.cancelAnimation(e),t._isDragging=!1),t.widgetState.deactivate(),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.handleEvent=function(n){return t.pickable&&t.activeState&&t.activeState.getActive()?(e[t.activeState.getUpdateMethodName()](n),e.invokeInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.updateFromOrigin=function(e){t.planeManipulator.setWidgetNormal(t.widgetState.getNormal());var n,i=t.planeManipulator.handleEvent(e,t._apiSpecificRenderWindow),o=i.worldCoords,a=i.worldDelta;ti(t._draggingWidgetOrigin,a,t._draggingWidgetOrigin),(n=t.widgetState).containsPoint.apply(n,m(o))&&t.activeState.setOrigin(t._draggingWidgetOrigin)},e.updateFromPlane=function(e){t.lineManipulator.setWidgetNormal(t.activeState.getNormal());var n,i=t.lineManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldDelta;ti(t._draggingWidgetOrigin,i,t._draggingWidgetOrigin),(n=t.widgetState).containsPoint.apply(n,m(t._draggingWidgetOrigin))&&t.activeState.setOrigin(t._draggingWidgetOrigin)},e.updateFromNormal=function(e){t.trackballManipulator.setWidgetNormal(t.activeState.getNormal());var n=t.trackballManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;t.activeState.setNormal(n)},t.lineManipulator=LS.newInstance(),t.planeManipulator=LP.newInstance(),t.trackballManipulator=LI.newInstance()}function Vz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VG(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:VU,widgetState:Fs.generateState()},n)),BX.extend(e,t,n),t.classHierarchy.push("vtkPlaneWidget"),t.methodsToLink=["representationStyle","sphereResolution","handleSizeRatio","axisScale","normalVisible","originVisible","planeVisible","outlineVisible"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:Fs}]}}var VW={newInstance:eE.newInstance(Vz,"vtkImplicitPlaneWidget"),extend:Vz};function VH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Vq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VH(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VK(e,t){t.classHierarchy.push("vtkInteractiveOrientationWidgetProp"),eE.event(e,t,"OrientationChange"),e.handleRightButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable?(e.invokeOrientationChange(Vq({action:"rightPress",event:n},t.activeState.get("up","right","direction"))),eE.EVENT_ABORT):eE.VOID},e.handleLeftButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable?(e.invokeOrientationChange(Vq({action:"leftPress",event:n},t.activeState.get("up","right","direction"))),eE.EVENT_ABORT):eE.VOID}}var VX=[[-1,-1,-1],[-1,1,-1],[1,-1,-1],[1,1,-1],[-1,-1,1],[-1,1,1],[1,-1,1],[1,1,1]];function VY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VY(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:VK,widgetState:Lf.createBuilder().addStateFromMixin({labels:["handles","---"],mixins:["origin"],name:"handle",initialValues:{origin:VX[0]}}).addStateFromMixin({labels:["handles","-+-"],mixins:["origin"],name:"handle",initialValues:{origin:VX[1]}}).addStateFromMixin({labels:["handles","+--"],mixins:["origin"],name:"handle",initialValues:{origin:VX[2]}}).addStateFromMixin({labels:["handles","++-"],mixins:["origin"],name:"handle",initialValues:{origin:VX[3]}}).addStateFromMixin({labels:["handles","--+"],mixins:["origin"],name:"handle",initialValues:{origin:VX[4]}}).addStateFromMixin({labels:["handles","-++"],mixins:["origin"],name:"handle",initialValues:{origin:VX[5]}}).addStateFromMixin({labels:["handles","+-+"],mixins:["origin"],name:"handle",initialValues:{origin:VX[6]}}).addStateFromMixin({labels:["handles","+++"],mixins:["origin"],name:"handle",initialValues:{origin:VX[7]}}).build("orientation","name")},n)),BX.extend(e,t,n),t.classHierarchy.push("vtkInteractiveOrientationWidget"),t.methodsToLink=["closePolyLine","activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale"],e.setBounds=function(e){for(var n=t.widgetState.getStatesWithLabel("handles"),i=0;i<n.length;i++){var o=VX[i],a=o[0]>0?e[1]:e[0],s=o[1]>0?e[3]:e[2],l=o[2]>0?e[5]:e[4];n[i].setOrigin(a,s,l)}},e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:L6,labels:["---","--+","-++","-+-"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 1"}},{builder:L6,labels:["---","+--","+-+","--+"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 2"}},{builder:L6,labels:["+--","++-","+++","+-+"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 3"}},{builder:L6,labels:["++-","-+-","-++","+++"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 4"}},{builder:L6,labels:["-++","--+","+-+","+++"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 5"}},{builder:L6,labels:["-+-","++-","+--","---"],initialValues:{behavior:0,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 6"}}]}}var VJ={newInstance:eE.newInstance(VZ,"vtkInteractiveOrientationWidget"),extend:VZ};function VQ(e,t){function n(e){return e.altKey||e.controlKey||e.shiftKey}t.classHierarchy.push("vtkLabelWidgetProp"),t._isDragging=!1,e.setText=function(e){t.widgetState.getText().setText(e),t._interactor.render()},e.getText=function(){return t.widgetState.getText().getText()},e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleLeftButtonPress=function(i){if(!t.activeState||!t.activeState.getActive()||!t.pickable||n(i))return eE.VOID;var o,a,s,l=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator,u=l.handleEvent(i,t._apiSpecificRenderWindow).worldCoords;if(t.activeState===t.widgetState.getMoveHandle()&&l){var c=t.widgetState.getMoveHandle();c.setOrigin(u),t.widgetState.getText().setOrigin(c.getOrigin()),e.loseFocus()}else t.dragable&&(t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e));return e.invokeStartInteractionEvent(),eE.EVENT_ABORT},e.handleLeftButtonRelease=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?(t._isDragging?(t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),t._isDragging=!1):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&(t._widgetManager.enablePicking(),t._interactor.render()),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.handleMouseMove=function(i){var o,a,s,l=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator;if(l&&t.pickable&&t.dragable&&t.activeState&&t.activeState.getActive()&&!n(i)){var u=l.handleEvent(i,t._apiSpecificRenderWindow),c=u.worldCoords,d=u.worldDelta;if(!(t.widgetState.getMoveHandle()===t.activeState||t._isDragging)||!c.length||!d.length)return eE.VOID;var f=t.activeState.getOrigin(),p=f?ti(f,d,[]):c;return t.activeState.setOrigin(p),t.widgetState.getText().setOrigin(p),e.invokeInteractionEvent(),eE.EVENT_ABORT}return eE.VOID},e.reset=function(){t.widgetState.getMoveHandle().setOrigin(null),t.widgetState.getText().setOrigin(null),t.widgetState.getText().setText("")},e.grabFocus=function(){t.hasFocus||(e.reset(),t.activeState=t.widgetState.getMoveHandle(),t.widgetState.getMoveHandle().activate(),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()}}function V$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function V0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V$(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V1(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,V0({behavior:VQ,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:10,visible:!1}}).addStateFromMixin({labels:["SVGtext"],mixins:["origin","color","text","visible","manipulator"],name:"text",initialValues:{visible:!0}}).build()},i)),BX.extend(e,t,i),eE.setGet(e,t,["manipulator"]),t.classHierarchy.push("vtkLabelWidget"),n=V0({},e),t.methodsToLink=["scaleInPixels"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["moveHandle"]}]},e.setManipulator=function(e){n.setManipulator(e),t.widgetState.getMoveHandle().setManipulator(e),t.widgetState.getText().setManipulator(e)},e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0}))}var V2={newInstance:eE.newInstance(V1,"vtkLabelWidget"),extend:V1},V3=Lf.createBuilder().addField({name:"posOnLine",initialValue:.5}).build();function V4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function V5(e,t,n){var i=eE.newTypedArray(t.pointType,30),o=new Uint32Array(11);o[0]=10;for(var a=0;a<10;a++){var s=a%2==1?t.height:.4*t.height;i[3*a+0]=s*Math.cos((2*a-1)*Math.PI/10),i[3*a+1]=s*Math.sin((2*a-1)*Math.PI/10),i[3*a+2]=0,o[1+a]=a}return n.getPoints().setData(i,3),n.getPolys().setData(o,1),n}function V6(e,t,n){var i=eE.newTypedArray(t.pointType,18),o=.5*t.height*t.thickness,a=.5*t.height-o,s=(.9*t.height+o-a-(.5*t.height-o-a))*(1-t.base);i[0]=-(t.width/2*1)-o,i[1]=t.height/4-a-s,i[2]=0,i[3]=0,i[4]=.9*t.height+o-a-s,i[5]=0,i[6]=t.width/2+o,i[7]=t.height/4-a-s,i[8]=0,i[9]=t.width/3,i[10]=.1*t.height-o-a-s,i[11]=0,i[12]=0,i[13]=.5*t.height-o-a-s,i[14]=0,i[15]=-(t.width/3*1),i[16]=.1*t.height-o-a-s,i[17]=0;var l=Uint8Array.from([3,0,1,5,3,1,4,5,3,1,4,3,3,1,2,3]);return n.getPoints().setData(i,3),n.getPolys().setData(l,1),n}function V8(e,t,n){var i=eE.newTypedArray(t.pointType,12),o=t.height/3*t.thickness,a=t.height/3-o,s=(t.height-a-(t.height/3-o-a))*(1-t.base);i[0]=-(t.width/2*1),i[1]=0-a-s,i[2]=0,i[3]=0,i[4]=t.height-a-s,i[5]=0,i[6]=t.width/2,i[7]=0-a-s,i[8]=0,i[9]=0,i[10]=t.height/3-o-a-s,i[11]=0;var l=Uint8Array.from([3,0,1,3,3,1,2,3]);return n.getPoints().setData(i,3),n.getPolys().setData(l,1),n}function V9(e,t,n){var i=eE.newTypedArray(t.pointType,9),o=t.height*(1-t.base);i[0]=-(t.width/2*1),i[1]=0-o,i[2]=0,i[3]=0,i[4]=t.height-o,i[5]=0,i[6]=t.width/2,i[7]=0-o,i[8]=0;var a=Uint8Array.from([3,0,1,2]);return n.getPoints().setData(i,3),n.getPolys().setData(a,1),n}function V7(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V4(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({base:0,center:[0,0,0],height:1,direction:[1,0,0],pointType:"Float64Array",thickness:0,width:1},i)),eE.obj(e,t),eE.setGet(e,t,["height","width","thickness","base"]),eE.setGetArray(e,t,["center","direction"],3),eE.algo(e,t,0,1),y(n={},"triangle",V9),y(n,"star",V5),y(n,"arrow4points",V8),y(n,"arrow6points",V6),e.requestData=function(n,i){var o,a,s=(null==(o=i[0])?void 0:o.initialize())||lC.newInstance();i[0]=r[t.shape](e,t,s),(a=a$.buildFromRadian()).translate.apply(a,m(t.center)).rotateFromDirections([1,0,0],t.direction).apply(i[0].getPoints().getData())}}var je={newInstance:eE.newInstance(V7,"vtkArrow2DSource"),extend:V7},jt={radius:1,spacing:2,width:4,pointType:"Float64Array"};function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.center=[0,0,0],t.orientation=[1,0,0],Object.assign(t,jt,n),eE.obj(e,t),eE.setGet(e,t,["radius","spacing","width"]),eE.setGetArray(e,t,["center","orientation"],3),eE.algo(e,t,0,1),e.requestData=function(e,n){var i,o,a=(null==(i=n[0])?void 0:i.initialize())||lC.newInstance(),s=eE.newTypedArray(t.pointType,48);s[0]=t.radius,s[1]=t.radius/t.width,s[2]=0,s[3]=t.radius+t.spacing,s[4]=t.radius/t.width,s[5]=0,s[6]=t.radius,s[7]=-(t.radius/t.width*1),s[8]=0,s[9]=t.radius+t.spacing,s[10]=-(t.radius/t.width*1),s[11]=0,s[12]=-1*t.radius,s[13]=t.radius/t.width,s[14]=0,s[15]=-1*(t.radius+t.spacing),s[16]=t.radius/t.width,s[17]=0,s[18]=-1*t.radius,s[19]=-(t.radius/t.width*1),s[20]=0,s[21]=-1*(t.radius+t.spacing),s[22]=-(t.radius/t.width*1),s[23]=0,s[24]=t.radius/t.width,s[25]=t.radius,s[26]=0,s[27]=t.radius/t.width,s[28]=t.radius+t.spacing,s[29]=0,s[30]=-(t.radius/t.width*1),s[31]=t.radius,s[32]=0,s[33]=-(t.radius/t.width*1),s[34]=t.radius+t.spacing,s[35]=0,s[36]=t.radius/t.width,s[37]=-1*t.radius,s[38]=0,s[39]=t.radius/t.width,s[40]=-1*(t.radius+t.spacing),s[41]=0,s[42]=-(t.radius/t.width*1),s[43]=-1*t.radius,s[44]=0,s[45]=-(t.radius/t.width*1),s[46]=-1*(t.radius+t.spacing),s[47]=0;var l=Uint8Array.from([3,0,1,2,3,2,1,3,3,4,6,5,3,6,5,7,3,8,11,9,3,8,10,11,3,12,13,15,3,12,15,14]);(o=a$.buildFromRadian()).translate.apply(o,m(t.center)).rotateFromDirections([1,0,0],t.orientation).apply(s),a.getPoints().setData(s,3),a.getPolys().setData(l,1),n[0]=a}}var jr={newInstance:eE.newInstance(jn,"vtkArrow2DSource"),extend:jn},ji={NONE:"voidSphere",SPHERE:"sphere",CUBE:"cube",CONE:"cone",ARROWHEAD3:"triangle",ARROWHEAD4:"4pointsArrowHead",ARROWHEAD6:"6pointsArrowHead",STAR:"star",DISK:"disk",CIRCLE:"circle",VIEWFINDER:"viewFinder"},jo={ShapeType:ji,Shapes2D:[ji.ARROWHEAD3,ji.ARROWHEAD4,ji.ARROWHEAD6,ji.STAR,ji.DISK,ji.CIRCLE,ji.VIEWFINDER],Shapes3D:[ji.SPHERE,ji.CUBE,ji.CONE],ShapesOrientable:[ji.CONE,ji.ARROWHEAD3,ji.ARROWHEAD4,ji.ARROWHEAD6]};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var jl=jo.ShapeType,ju=jo.Shapes2D,jc=jo.ShapesOrientable;function jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,js({faceCamera:null,orientation:[1,0,0],shape:jl.SPHERE,viewMatrix:od(new Float64Array(16))},n)),L$.extend(e,t,n),eE.setGetArray(e,t,["visibilityFlagArray"],2),eE.setGetArray(e,t,["orientation"],3),eE.setGetArray(e,t,["viewMatrix"],16),eE.setGet(e,t,["faceCamera"]),function(e,t){t.classHierarchy.push("vtkArrowHandleRepresentation");var n=js({},e);function i(n){if(t.displayCallback){for(var i=[],o=e.getRepresentationStates(),a=0;a<o.length;a++)o[a].getActive()&&i.push(n[a]);if(i.length)return void t.displayCallback(i)}t.displayCallback()}function o(n,i){t._pipeline.mapper.setOrientationArray("orientation"),t._pipeline.mapper.setOrientationMode(TP.MATRIX);for(var o=LF(n,"orientation",i.length,"Float32Array",9).getData(),a=[1,1,1],s=0;s<i.length;++s){var l,u,c,d=function(n){var i,o,a,s,l,u=!0===t.faceCamera||null==t.faceCamera&&e.is2DShape(),c=new Float64Array(9);o4(c,t.viewMatrix);var d=o7(new Float64Array(9));u&&at(d,c);var f=null;return f=e.isOrientableShape()?(rP(i=new Float64Array(3),t.orientation,d),i[2]=0,o=a$.buildFromDegree().rotateFromDirections([0,1,0],i).getMatrix(),o4(a=new Float64Array(9),o),a):o7(new Float64Array(9)),u&&(s=f,ai(l=new Float64Array(9),c,s),rP(n,n,l),f=l),f}(null!=(l=null==(u=(c=i[s]).getScale3)?void 0:u.call(c))?l:a);o.set(d,9*s)}}t.displayMapper=Oc.newInstance(),t.displayActor=mH.newInstance({parentProp:e}),t.displayActor.setMapper(t.displayMapper),t.displayMapper.setInputConnection(e.getOutputPort()),e.addActor(t.displayActor),t.alwaysVisibleActors=[t.displayActor],e.setGlyphResolution=eE.chain(e.setGlyphResolution,function(e){return t._pipeline.glyph.setPhiResolution(e)},function(e){return t._pipeline.glyph.setThetaResolution(e)}),e.setDisplayCallback=function(e){t.displayCallback=e,t.displayMapper.setCallback(e?i:null)},e.is2DShape=function(){return ju.includes(t.shape)},e.isOrientableShape=function(){return jc.includes(t.shape)},e.setDirection(o),e.setNoOrientation(o),e.requestData=function(i,o){var a,s,l,u,c=null==(u=e.getRepresentationStates(i[0])[0])?void 0:u.getShape(),d=null==t._pipeline.glyph;return t.shape!==c&&Object.values(jl).includes(c)&&(t.shape=c,d=!0),d&&t.shape&&(t._pipeline.glyph=(a=t.shape,(l=(y(s={},jl.STAR,{builder:je,initialValues:{shape:"star",height:.6}}),y(s,jl.ARROWHEAD3,{builder:je,initialValues:{shape:"triangle"}}),y(s,jl.ARROWHEAD4,{builder:je,initialValues:{shape:"arrow4points"}}),y(s,jl.ARROWHEAD6,{builder:je,initialValues:{shape:"arrow6points"}}),y(s,jl.CONE,{builder:fM,initialValues:{direction:[0,1,0]}}),y(s,jl.SPHERE,{builder:pS}),y(s,jl.CUBE,{builder:fq,initialValues:{xLength:.8,yLength:.8,zLength:.8}}),y(s,jl.DISK,{builder:fF,initialValues:{resolution:30,radius:.5,direction:[0,0,1],lines:!1,face:!0}}),y(s,jl.CIRCLE,{builder:fF,initialValues:{resolution:30,radius:.5,direction:[0,0,1],lines:!0,face:!1}}),y(s,jl.VIEWFINDER,{builder:jr,initialValues:{radius:.1,spacing:.3,width:1.4}}),y(s,jl.NONE,{builder:pS}),s)[a]).builder.newInstance(l.initialValues)),t._pipeline.mapper.setInputConnection(t._pipeline.glyph.getOutputPort(),1)),n.requestData(i,o)},e.updateActorVisibility=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BP.FRONT_BUFFER,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.getRepresentationStates().length>0;n.updateActorVisibility(t,i,o&&a)}}(e,t)}var jf={newInstance:eE.newInstance(jd,"vtkArrowHandleRepresentation"),extend:jd};function jp(e){var t=[0,0,0],n=e.widgetState.getHandle1().getOrigin(),i=e.widgetState.getHandle2().getOrigin();if(!n||!i)return null;var o=e.widgetState.getPositionOnLine().getPosOnLine();return o=1-o,to(n,i,t),ta(t,o),ti(t,i,t),t}function jh(e){e.widgetState.getText().setOrigin(jp(e))}function jm(e,t){if(2===e)return null!=t.getMoveHandle().getOrigin();var n=t.getHandle1().getOrigin();if(0===e)return null!=n;var i=t.getHandle2().getOrigin();return n&&i&&!tU(n,i,0)}function jg(e,t){return((!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&!jm(e,t)?t.getMoveHandle():t["getHandle".concat(e+1)]()).getOrigin()||null}function jv(e){var t=0;return jm(0,e)&&(t=1+jm(1,e)),t}var jy=jo.ShapeType,jb=["getHandle1","getHandle2","getMoveHandle"];function jx(e,t){function n(e){return e.altKey||e.controlKey||e.shiftKey}function i(n){var i=function(n){var i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=jg(n,t.widgetState),l=a?(i=e.computeWorldToDisplay.apply(e,[t._renderer].concat(m(s))),e.computeDisplayToWorld(t._renderer,a.position.x,a.position.y,i[2])):jg(1-n,t.widgetState);return s&&l?(th(o=to(s,l,[])),o):null}(Math.min(1,n));t.representations[n].setOrientation(i)}t.classHierarchy.push("vtkLineWidgetProp"),t._isDragging=!1,e.getHandle=function(e){return t.widgetState[jb[e]]()},e.getHandleIndex=function(e){switch(e){case t.widgetState.getHandle1():return 0;case t.widgetState.getHandle2():return 1;case t.widgetState.getMoveHandle():return 2;default:return -1}},e.isPlaced=function(){return 2===jv(t.widgetState)},e.setText=function(e){t.widgetState.getText().setText(e),t._interactor.render()},e.updateHandleOrientations=function(){i(0),i(1),i(2)},e.rotateHandlesToFaceCamera=function(){t.representations[0].setViewMatrix(Array.from(t._camera.getViewMatrix())),t.representations[1].setViewMatrix(Array.from(t._camera.getViewMatrix()))},e.updateHandleVisibility=function(n){var i=e.getHandle(n),o=i.getVisible()&&jm(n,t.widgetState);t.representations[n].setVisibilityFlagArray([o,o&&i.getShape()!==jy.NONE]),t.representations[n].updateActorVisibility(),t._interactor.render()},e.placeHandle=function(n){var i,o=e.getHandle(n);o.setOrigin.apply(o,m(t.widgetState.getMoveHandle().getOrigin())),e.updateHandleOrientations(),e.rotateHandlesToFaceCamera(),t.widgetState.getText().setOrigin(jp(t)),e.updateHandleVisibility(n),0===n&&((i=e.getHandle(1)).setOrigin.apply(i,m(t.widgetState.getMoveHandle().getOrigin())),e.updateHandleVisibility(1),t.widgetState.getMoveHandle().setShape(e.getHandle(1).getShape())),1===n&&e.loseFocus()},e.handleLeftButtonPress=function(i){var o,a,s;return t.activeState&&t.activeState.getActive()&&t.pickable&&!n(i)?(t.activeState===t.widgetState.getMoveHandle()&&0===jv(t.widgetState)?e.placeHandle(0):t.widgetState.getMoveHandle().getActive()&&1===jv(t.widgetState)?e.placeHandle(1):t.dragable&&!t.widgetState.getText().getActive()&&(t._isDragging=!0,(null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator).handleEvent(i,t._apiSpecificRenderWindow),t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e)),e.invokeStartInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.handleMouseMove=function(i){var o,a,s,l=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator;if(l&&t.pickable&&t.dragable&&t.activeState&&t.activeState.getActive()&&!n(i)){var u=l.handleEvent(i,t._apiSpecificRenderWindow),c=u.worldCoords,d=u.worldDelta,f=t.activeState===t.widgetState.getMoveHandle()||t._isDragging,p=!t.activeState.setOrigin;if(f){if(p)for(var h=0;h<2;h++){var m=e.getHandle(h).getOrigin();e.getHandle(h).setOrigin(ti(m,d,[]))}else t.activeState.getOrigin()?t.activeState.setOrigin(ti(t.activeState.getOrigin(),d,[])):t.activeState.setOrigin(c),e.updateHandleVisibility(e.getHandleIndex(t.activeState));return e.updateHandleOrientations(),jh(t),e.invokeInteractionEvent(),eE.EVENT_ABORT}}return eE.VOID},e.handleLeftButtonRelease=function(){if(!t.activeState||!t.activeState.getActive()||!t.pickable)return e.rotateHandlesToFaceCamera(),eE.VOID;if(t.hasFocus&&e.isPlaced())return e.loseFocus(),eE.VOID;if(t._isDragging&&e.isPlaced()){var n=t.widgetState.getText().getActive();t.widgetState.deactivate(),t.activeState=null,n||t._interactor.cancelAnimation(e),t._apiSpecificRenderWindow.setCursor("pointer"),t.hasFocus=!1,t._isDragging=!1}else t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate();return(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&(t._widgetManager.enablePicking(),t._interactor.render()),e.invokeEndInteractionEvent(),eE.EVENT_ABORT},e.grabFocus=function(){t.hasFocus||e.isPlaced()||(t.activeState=t.widgetState.getMoveHandle(),t.activeState.setShape(e.getHandle(0).getShape()),t.activeState.activate(),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setOrigin(null),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()},e.reset=function(){t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getHandle1().setOrigin(null),t.widgetState.getHandle2().setOrigin(null),t.widgetState.getMoveHandle().setOrigin(null),t.widgetState.getText().setOrigin(null),t.widgetState.getText().setText(""),t.activeState=null}}function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jC(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jA({behavior:jx,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator","shape"],name:"moveHandle",initialValues:{scale1:30,visible:!0}}).addStateFromMixin({labels:["handle1"],mixins:["origin","color","scale1","visible","manipulator","shape"],name:"handle1",initialValues:{scale1:30}}).addStateFromMixin({labels:["handle2"],mixins:["origin","color","scale1","visible","manipulator","shape"],name:"handle2",initialValues:{scale1:30}}).addStateFromMixin({labels:["SVGtext"],mixins:["origin","color","text","visible"],name:"text",initialValues:{text:""}}).addStateFromInstance({name:"positionOnLine",instance:V3}).addField({name:"lineThickness"}).build()},o)),BX.extend(e,t,o),eE.setGet(e,t,["manipulator"]),t.classHierarchy.push("vtkLineWidget"),n=jA({},e),t.methodsToLink=["activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale","scaleInPixels"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:jf,labels:["handle1"],initialValues:{visibilityFlagArray:[!1,!1],coincidentTopologyParameters:{Point:{factor:-1,offset:-1},Line:{factor:-1,offset:-1},Polygon:{factor:-3,offset:-3}}}},{builder:jf,labels:["handle2"],initialValues:{visibilityFlagArray:[!1,!1],coincidentTopologyParameters:{Point:{factor:-1,offset:-1},Line:{factor:-1,offset:-1},Polygon:{factor:-3,offset:-3}}}},{builder:jf,labels:["moveHandle"],initialValues:{visibilityFlagArray:[!1,!1],coincidentTopologyParameters:{Point:{factor:-1,offset:-1},Line:{factor:-1,offset:-1},Polygon:{factor:-3,offset:-3}}}},{builder:Fb,labels:["handle1","handle2","moveHandle"],initialValues:{behavior:0,pickable:!0}}]},e.getDistance=function(){var e=jg(0,t.widgetState),n=jg(1,t.widgetState);return e&&n?Math.sqrt(tx(e,n)):0},e.setManipulator=function(e){n.setManipulator(e),t.widgetState.getMoveHandle().setManipulator(e),t.widgetState.getHandle1().setManipulator(e),t.widgetState.getHandle2().setManipulator(e)},t.widgetState.onBoundsChange(function(e){var n=[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])];t.widgetState.getMoveHandle().setOrigin(n)}),i=t.widgetState.getPositionOnLine().onModified(function(){jh(t)}),e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0})),e.delete=eE.chain(e.delete,function(){i.unsubscribe(),i=null})}var jS={newInstance:eE.newInstance(jC,"vtkLineWidget"),extend:jC};function j_(e,t){t.painting=t._factory.getPainting(),e.handleLeftButtonPress=function(n){var i,o,a,s=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator;if(!(s&&t.activeState&&t.activeState.getActive()))return t.painting=!1,eE.VOID;var l=s.handleEvent(n,t._apiSpecificRenderWindow).worldCoords;return null!=l&&l.length?(t.painting=!0,t.widgetState.addTrail().set(t.activeState.get("origin","up","right","direction","scale1")),e.invokeStartInteractionEvent(),eE.EVENT_ABORT):(t.painting=!1,eE.VOID)},e.handleMouseMove=function(t){return e.handleEvent(t)},e.handleLeftButtonRelease=function(){return t.painting&&(e.invokeEndInteractionEvent(),t.widgetState.clearTrailList()),t.painting=!1,eE.VOID},e.handleEvent=function(n){var i,o,a,s,l,u,c,d,f=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator;if(!(f&&t.activeState&&t.activeState.getActive()))return t.painting=!1,eE.VOID;var p=t._camera.getDirectionOfProjection(),h=t._camera.getViewUp(),g=[];rA(g,h,p),(s=t.activeState).setUp.apply(s,m(h)),(l=t.activeState).setRight.apply(l,g),(u=t.activeState).setDirection.apply(u,m(p));var v=f.handleEvent(n,t._apiSpecificRenderWindow).worldCoords;return null!=v&&v.length?((c=t.widgetState).setTrueOrigin.apply(c,m(v)),(d=t.activeState).setOrigin.apply(d,m(v)),t.painting?(t.widgetState.addTrail().set(t.activeState.get("origin","up","right","direction","scale1")),e.invokeInteractionEvent(),eE.EVENT_ABORT):eE.VOID):eE.VOID},e.grabFocus=function(){if(!t.hasFocus){t.activeState=t.widgetState.getHandle(),t.activeState.activate(),t._interactor.requestAnimation(e);var n=t._apiSpecificRenderWindow.getCanvas();n.onmouseenter=function(){t.hasFocus&&t.activeState===t.widgetState.getHandle()&&t.activeState.setVisible(!0)},n.onmouseleave=function(){t.hasFocus&&t.activeState===t.widgetState.getHandle()&&t.activeState.setVisible(!1)}}t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&t._interactor.cancelAnimation(e),t.widgetState.deactivate(),t.widgetState.getHandle().deactivate(),t.activeState=null,t.hasFocus=!1},eE.get(e,t,["painting"])}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jT(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jP(e,t){var n,i,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jO({radius:1,painting:!1,color:[1],behavior:j_,widgetState:(i=null!=(n=null==s?void 0:s.radius)?n:1,Lf.createBuilder().addField({name:"trueOrigin",initialValue:[0,0,0]}).addStateFromMixin({labels:["handle"],mixins:["origin","color","scale1","orientation","manipulator","visible"],name:"handle",initialValues:{scale1:2*i,orientation:[1,0,0,0,1,0,0,0,1]}}).addDynamicMixinState({labels:["trail"],mixins:["origin","color","scale1","orientation","visible"],name:"trail",initialValues:{scale1:2*i,orientation:[1,0,0,0,1,0,0,0,1]}}).build())},s)),BX.extend(e,t,s),eE.get(e,t,["painting"]),eE.setGet(e,t,["manipulator","radius","color"]),t.classHierarchy.push("vtkPaintWidget"),o=jO({},e),e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:return[{builder:L3,labels:["handle","trail"]}];case BO.VOLUME:default:return[{builder:FD,labels:["handle"]}]}},e.setManipulator=function(e){o.setManipulator(e),t.widgetState.getHandle().setManipulator(e)},a=e.setRadius,e.setRadius=function(e){a(e)&&t.widgetState.getHandle().setScale1(e)},e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0}))}var jM={newInstance:eE.newInstance(jP,"vtkPaintWidget"),extend:jP};function jE(e,t){function n(e){return e.altKey||e.controlKey||e.shiftKey}function i(n){var i,o,a,s=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator;if(!s)return eE.VOID;var l=s.handleEvent(n,t._apiSpecificRenderWindow),u=l.worldCoords,c=l.worldDelta,d=t.activeState===t.widgetState.getMoveHandle()||t._isDragging,f=!t.activeState.setOrigin;if(u.length&&d&&!f){var p=t.activeState.getOrigin();return p?t.activeState.setOrigin(ti(p,c,[])):t.activeState.setOrigin(u),e.invokeInteractionEvent(),eE.EVENT_ABORT}return eE.VOID}t.classHierarchy.push("vtkPolyLineWidgetProp"),t._isDragging=!1,e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleRightButtonPress=function(i){return t.activeState&&t.activeState.getActive()&&t.pickable&&!n(i)?(t.activeState!==t.widgetState.getMoveHandle()&&(t._interactor.requestAnimation(e),t.activeState.deactivate(),t.widgetState.removeHandle(t.activeState),t.activeState=null,t._interactor.cancelAnimation(e)),e.invokeStartInteractionEvent(),e.invokeInteractionEvent(),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.handleLeftButtonPress=function(o){if(!t.activeState||!t.activeState.getActive()||!t.pickable||n(o))return eE.VOID;var a,s,l,u=null!=(a=null==(s=t.activeState)||null==(l=s.getManipulator)?void 0:l.call(s))?a:t.manipulator;if(t.activeState===t.widgetState.getMoveHandle()&&u){i(o);var c=t.widgetState.getMoveHandle(),d=t.widgetState.addHandle();d.setOrigin(c.getOrigin()),d.setColor(c.getColor()),d.setScale1(c.getScale1()),d.setManipulator(u)}else t.dragable&&(u.handleEvent(o,t._apiSpecificRenderWindow),t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e));return e.invokeStartInteractionEvent(),eE.EVENT_ABORT},e.handleMouseMove=function(e){return t.pickable&&t.dragable&&t.activeState&&t.activeState.getActive()&&!n(e)&&i(e)===eE.EVENT_ABORT?eE.EVENT_ABORT:(t.hasFocus&&t._widgetManager.disablePicking(),eE.VOID)},e.handleLeftButtonRelease=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?(t._isDragging?(t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),t._isDragging=!1):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&(t._widgetManager.enablePicking(),t._interactor.render()),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):eE.VOID},e.handleKeyDown=function(t){"Escape"===t.key&&e.loseFocus()},e.grabFocus=function(){t.hasFocus||(t.activeState=t.widgetState.getMoveHandle(),t.activeState.activate(),t.activeState.setVisible(!0),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setVisible(!1),t.widgetState.getMoveHandle().setOrigin(null),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()}}function jD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jD(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jk(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jI({manipulator:null,behavior:jE,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:30,visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:30}}).build()},i)),BX.extend(e,t,i),eE.setGet(e,t,["manipulator"]),t.classHierarchy.push("vtkPolyLineWidget"),n=jI({},e),t.methodsToLink=["activeColor","activeScaleFactor","closePolyLine","defaultScale","glyphResolution","lineThickness","useActiveColor","scaleInPixels"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["handles"]},{builder:FD,labels:["moveHandle"]},{builder:Fb,labels:["handles","moveHandle"]}]},e.setManipulator=function(e){n.setManipulator(e),t.widgetState.getMoveHandle().setManipulator(e),t.widgetState.getHandleList().forEach(function(t){t.setManipulator(e)})},e.setManipulator(t.manipulator||LP.newInstance({useCameraFocalPoint:!0,useCameraNormal:!0}))}var jN={newInstance:eE.newInstance(jk,"vtkPolyLineWidget"),extend:jk},jR={drawBorder:!1,drawFace:!0};function jB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jR,n),LK.extend(e,t,n),eE.setGetArray(e,t,["color"],1),eE.setGet(e,t,["drawBorder","drawFace"]),eE.get(e,t,["mapper","actor"]),t.classHierarchy.push("vtkRectangleContextRepresentation"),t.internalPolyData=lC.newInstance({mtime:0}),t.mapper=gd.newInstance(),t.actor=mH.newInstance({parentProp:e}),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),t.actor.getProperty().setOpacity(.2),t.actor.getProperty().setColor(0,1,0),e.addActor(t.actor),e.setOpacity=function(e){t.actor.getProperty().setOpacity(e)},e.requestData=function(n,i){var o=e.getRepresentationStates(n[0])[0];if(null!=o&&o.getVisible()&&null!=o&&o.getOrigin()){var a=o.getOrigin(),s=o.getCorner(),l=[0,0,0];ro(l,s,a);var u=o.getUp(),c=rw(l,u),d=LF(t.internalPolyData,"points",4).getData();if(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[0]+c*u[0],d[4]=a[1]+c*u[1],d[5]=a[2]+c*u[2],d[6]=s[0],d[7]=s[1],d[8]=s[2],d[9]=s[0]-c*u[0],d[10]=s[1]-c*u[1],d[11]=s[2]-c*u[2],t.drawFace){var f=new Uint32Array([4,0,1,2,3]);t.internalPolyData.getPolys().setData(f,1)}if(t.drawBorder){var p=new Uint32Array([5,0,1,2,3,0]);t.internalPolyData.getLines().setData(p,1)}}else t.internalPolyData.getPoints().setData([],0),t.internalPolyData.getPolys().setData([],0),t.internalPolyData.getLines().setData([],0);t.internalPolyData.modified(),i[0]=t.internalPolyData},e.getSelectedState=function(e,n){return t.state}}var jL={newInstance:eE.newInstance(jB,"vtkRectangleContextRepresentation"),extend:jB};function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jV(e,t){t.shapeHandle=t.widgetState.getRectangleHandle(),t.point1Handle=t.widgetState.getPoint1Handle(),t.point2Handle=t.widgetState.getPoint2Handle(),t.point1Handle.setManipulator(t.manipulator),t.point2Handle.setManipulator(t.manipulator),Vx(e,t);var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);t.classHierarchy.push("vtkRectangleWidgetProp"),e.setCorners=function(e,i){n.setCorners&&n.setCorners(e,i),t.shapeHandle.setOrigin(e),t.shapeHandle.setCorner(i)}}function jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jG(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vo.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jj(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:jV,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"point1Handle",initialValues:{scale1:10,visible:!1}}).addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"point2Handle",initialValues:{scale1:10,visible:!1}}).addStateFromMixin({labels:["rectangleHandle"],mixins:["origin","corner","color","visible","orientation"],name:"rectangleHandle",initialValues:{visible:!1}}).addStateFromMixin({labels:["SVGtext"],mixins:["origin","color","text","visible"],name:"text",initialValues:{text:""}}).addField({name:"textPosition",initialValue:[F9,F9,F9]}).addField({name:"textWorldMargin",initialValue:0}).build(),modifierBehavior:{None:(y(n={},F5,F8[F5].CLICK_AND_DRAG),y(n,F4,F8[F4].CORNER_TO_CORNER),y(n,F6,F8[F6].FREE),n),Shift:y({},F6,F8[F6].FIXED),Control:y({},F4,F8[F4].CENTER_TO_CORNER)}},i)),eE.setGet(e,t,["widgetState"]),t.classHierarchy.push("vtkRectangleWidget"),t.methodsToLink=[].concat(m(t.methodsToLink),["activeScaleFactor","activeColor","useActiveColor","drawBorder","drawFace","opacity"]),e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["moveHandle"]},{builder:jL,labels:["rectangleHandle"]}]},t.manipulator=LP.newInstance({useCameraNormal:!0})}var jU={newInstance:eE.newInstance(jG,"vtkRectangleWidget"),extend:jG};function jz(e,t){t._isDragging=!1;var n,i,o=!1;eE.setGet(e,t,["keepOrthogonality",{type:"object",name:"cursorStyles"}]),e.setCursorStyles((y(n={},Vl,"move"),y(n,Vs,"alias"),y(n,Va,"pointer"),y(n,"default","default"),n)),e.setEnableTranslation=function(e){t.representations[0].setPickable(e),t.representations[2].setPickable(e)},e.setEnableRotation=function(e){t.representations[1].setPickable(e)},e.getActiveInteraction=function(){return t.widgetState.getStatesWithLabel("rotation").includes(t.activeState)?Vs:t.widgetState.getStatesWithLabel("line").includes(t.activeState)?Va:t.widgetState.getStatesWithLabel("center").includes(t.activeState)?Vl:null},e.getActiveLineName=function(){return Vh(Object.keys(t.widgetState.getPlanes()).map(function(e){return Vc[e]})).find(function(e){return t.widgetState.getStatesWithLabel(e).includes(t.activeState)})},e.getActiveLineHandle=function(){var n,i;return null==(n=(i=t.widgetState)["getAxis".concat(e.getActiveLineName())])?void 0:n.call(i)},e.getOtherLineHandle=function(e){var n,i;return null==(n=(i=t.widgetState)["getAxis".concat(Vm(t.widgetState,e))])?void 0:n.call(i)},e.getActiveRotationPointName=function(){return t.widgetState.getStatesWithLabel("point0").includes(t.activeState)?"point0":t.widgetState.getStatesWithLabel("point1").includes(t.activeState)?"point1":null},e.startScrolling=function(t){t&&(i=t),o=!0,e.startInteraction()},e.endScrolling=function(){o=!1,e.endInteraction()},e.updateCursor=function(){var n=e.getCursorStyles();if(n)switch(e.getActiveInteraction()){case Vl:t._apiSpecificRenderWindow.setCursor(n.translateCenter);break;case Vs:t._apiSpecificRenderWindow.setCursor(n.rotateLine);break;case Va:t._apiSpecificRenderWindow.setCursor(n.translateAxis);break;default:t._apiSpecificRenderWindow.setCursor(n.default)}},e.handleLeftButtonPress=function(n){if(t.activeState&&t.activeState.getActive()){t._isDragging=!0;var o,a,s,l=t.viewType,u=t.widgetState.getPlanes()[l].normal,c=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator;c.setWidgetOrigin(t.widgetState.getCenter()),c.setWidgetNormal(u),i=c.handleEvent(n,t._apiSpecificRenderWindow).worldCoords,e.startInteraction()}else{if(1!==t.widgetState.getScrollingMethod())return eE.VOID;e.startScrolling(n.position)}return eE.EVENT_ABORT},e.handleMouseMove=function(n){if(t._isDragging)return e.handleEvent(n);if(o&&i.y!==n.position.y){var a=i.y-n.position.y;e.translateCenterOnPlaneDirection(a),i=n.position,e.invokeInteractionEvent(e.getActiveInteraction())}return eE.VOID},e.handleLeftButtonRelease=function(){(t._isDragging||o)&&e.endScrolling(),t._isDragging=!1,t.widgetState.deactivate()},e.handleRightButtonPress=function(n){2===t.widgetState.getScrollingMethod()&&e.startScrolling(n.position)},e.handleRightButtonRelease=function(){2===t.widgetState.getScrollingMethod()&&e.endScrolling()},e.handleStartMouseWheel=function(){e.startInteraction()},e.handleMouseWheel=function(t){var n=t.spinY;return o=!0,e.translateCenterOnPlaneDirection(n),e.invokeInteractionEvent(Vl),o=!1,eE.EVENT_ABORT},e.handleEndMouseWheel=function(){e.endScrolling()},e.handleMiddleButtonPress=function(n){0===t.widgetState.getScrollingMethod()&&e.startScrolling(n.position)},e.handleMiddleButtonRelease=function(){0===t.widgetState.getScrollingMethod()&&e.endScrolling()},e.handleEvent=function(n){if(t.activeState.getActive()){var i=e.getActiveInteraction();return e[i](n),e.invokeInteractionEvent(i),eE.EVENT_ABORT}return eE.VOID},e.startInteraction=function(){e.invokeStartInteractionEvent(),e.getViewWidgets().forEach(function(t){t.getInteractor().requestAnimation(e)})},e.endInteraction=function(){e.invokeEndInteractionEvent(),e.getViewWidgets().forEach(function(t){t.getInteractor().cancelAnimation(e)})},e.translateCenterOnPlaneDirection=function(n){var i=t.widgetState.getPlanes()[t.viewType].normal,o=t.widgetState.getCenter(),a=t.widgetState.getImage().getSpacing(),s=i.map(function(e){return Math.abs(e)}),l=s.indexOf(Math.max.apply(Math,m(s))),u=n*a[l]/Math.abs(i[l]),c=[o[0]+u*i[0],o[1]+u*i[1],o[2]+u*i[2]];c=e.getBoundedCenter(c),t.widgetState.setCenter(c),Vv(t.widgetState,t._factory.getScaleInPixels(),t._factory.getRotationHandlePosition())},e[Va]=function(n){var o,a,s,l,u,c=e.getActiveLineHandle(),d=e.getActiveLineName(),f=ti(c.getOrigin(),c.getDirection(),[]),p=c.getDirection();th(p);var h=e.getOtherLineHandle(d),m=t.widgetState.getCenter(),g=null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator,v=null,y=[];if(null!=(l=t.activeState)&&null!=(u=l.getManipulator)&&u.call(l))ti(m,to(v=g.handleEvent(n,t._apiSpecificRenderWindow).worldCoords,i,[]),y);else if(h){var b=h.getDirection();th(b);var x=tc(p,b);1!==x&&-1!==x||tf(p,g.getWidgetNormal(),b);var w=[];v=g.handleEvent(n,t._apiSpecificRenderWindow).worldCoords,sY.distanceToLine(v,c.getOrigin(),f,w),y=tl(m,b,tc(to(v,w,[]),b),y)}y=e.getBoundedCenter(y),t.widgetState.setCenter(y),Vv(t.widgetState,t._factory.getScaleInPixels(),t._factory.getRotationHandlePosition()),i=v},e.getBoundedCenter=function(e){var n,i,o=t.widgetState.getCenter(),a=t.widgetState.getImage().getBounds();return iG.containsPoint.apply(iG,[a].concat(m(e)))?e:(to(o,e,n=[0,0,0]),i=[0,0,0],iG.intersectBox(a,e,n,i,[0,0,0]),i)},e[Vl]=function(n){var o,a,s,l=(null!=(o=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?o:t.manipulator).handleEvent(n,t._apiSpecificRenderWindow).worldCoords,u=to(l,i,[]);i=l;var c=ti(t.widgetState.getCenter(),u,[]);c=e.getBoundedCenter(c),t.widgetState.setCenter(c),Vv(t.widgetState,t._factory.getScaleInPixels(),t._factory.getRotationHandlePosition())},e[Vs]=function(n){var i,o,a,s=e.getActiveLineHandle(),l=null!=(i=null==(o=t.activeState)||null==(a=o.getManipulator)?void 0:a.call(o))?i:t.manipulator,u=l.getWidgetNormal(),c=l.handleEvent(n,t._apiSpecificRenderWindow).worldCoords;if(c&&c.length){var d=[0,0,0];to(c,t.widgetState.getCenter(),d),th(d);var f=s.getDirection();th(f);var p=e.getActiveRotationPointName();("point1"===p||!p&&0>tc(d,f))&&ta(f,-1);var h=tA(f,d,u);e.rotateLineInView(e.getActiveLineName(),h)}},e.rotateLineInView=function(n,i){var o=Vd[n[0]],a=Vd[n[3]],s=t.widgetState.getPlanes()[a].normal;if(e.rotatePlane(o,i,s),e.getKeepOrthogonality()){var l=Vm(t.widgetState,n)[0];e.rotatePlane(Vd[l],i,s)}Vv(t.widgetState,t._factory.getScaleInPixels(),t._factory.getRotationHandlePosition())},e.rotatePlane=function(e,n,i){var o=t.widgetState.getPlanes()[e],a=o.normal,s=o.viewUp,l=Vp(a,i,n),u=Vp(s,i,n);t.widgetState.getPlanes()[e]={normal:l,viewUp:u}},e.setViewPlane=function(e,n,i){var o=i;null==o&&(o=t.widgetState.getPlanes()[e].viewUp),t.widgetState.getPlanes()[e]={normal:n,viewUp:o},Vv(t.widgetState,t._factory.getScaleInPixels(),t._factory.getRotationHandlePosition())}}function jW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var jq={X:{normal:[1,0,0],viewUp:[0,0,1],color3:[255,0,0]},Y:{normal:[0,-1,0],viewUp:[0,0,1],color3:[0,255,0]},Z:{normal:[0,0,-1],viewUp:[0,-1,0],color3:[0,0,255]}},jK={X:[255,0,0],Y:[0,255,0],Z:[0,0,255]};function jX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var jY=eE.vtkErrorMacro;function jZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jX(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({behavior:jz,widgetState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vu,t=Lf.createBuilder().addField({name:"center",initialValue:[0,0,0]}).addField({name:"image",initialValue:null}).addField({name:"activeViewType",initialValue:null}).addField({name:"planes",initialValue:e.reduce(function(e,t){return jH(jH({},e),{},y({},Vd[t],{normal:jq[t].normal,viewUp:jq[t].viewUp}))},{})}).addField({name:"scrollingMethod",initialValue:0}).addField({name:"cameraOffsets",initialValue:{}}).addField({name:"viewUpFromViewType",initialValue:{}}).addStateFromMixin({labels:["handles","sphere","center"],mixins:["origin","color3","scale1","visible","manipulator"],name:"centerHandle",initialValues:{scale1:30,color3:[255,255,255]}});return e.reduce(function(t,n){return e.filter(function(e){return e!==n}).reduce(function(e,t){e.addStateFromMixin({labels:["handles","line","lineIn".concat(n),"".concat(t,"in").concat(n)],mixins:["origin","color3","scale3","orientation","visible","manipulator"],name:"axis".concat(t,"in").concat(n),initialValues:{scale3:[4,4,4],color3:jK[t]}});for(var i=0;i<2;++i)e.addStateFromMixin({labels:["handles","sphere","rotation","rotationIn".concat(n),"".concat(t,"in").concat(n),"point".concat(i)],mixins:["origin","color3","scale1","visible","manipulator"],name:"rotationHandle".concat(t,"in").concat(n).concat(i),initialValues:{scale1:30,color3:jK[t]}});return e},t)},t),t.build()}(n.planes),rotationHandlePosition:.5,scaleInPixels:!0,manipulator:LP.newInstance()},n)),BX.extend(e,t,n),eE.setGet(e,t,["scaleInPixels","rotationHandlePosition","manipulator"]),t.classHierarchy.push("vtkResliceCursorWidget"),t.methodsToLink=["scaleInPixels","holeWidth","infiniteLine"],e.getRepresentationsForViewType=function(e){switch(e){case BO.XY_PLANE:case BO.XZ_PLANE:case BO.YZ_PLANE:return[{builder:Fd,labels:["lineIn".concat(Vc[e])],initialValues:{useActiveColor:!1,scaleInPixels:t.scaleInPixels}},{builder:FD,labels:["rotationIn".concat(Vc[e])],initialValues:{useActiveColor:!1,scaleInPixels:t.scaleInPixels,lighting:!1}},{builder:FD,labels:["center"],initialValues:{useActiveColor:!1,scaleInPixels:t.scaleInPixels,lighting:!1}}];case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:default:return[]}},e.setImage=function(n){t.widgetState.setImage(n);var i=n.getCenter();e.setCenter(i)},e.setCenter=function(n){t.widgetState.setCenter(n),Vv(t.widgetState,t.scaleInPixels,t.rotationHandlePosition),e.modified()},e.updateCameraPoints=function(n,i,o,a){var s,l,u,c,d,f;e.resetCamera(n,i,o,!a),a&&(s=n.getActiveCamera().getFocalPoint(),l=t.widgetState.getCenter(),c=(u=n.getRenderWindow().getViews()[0].getViewportSize(n))[0]/u[1],d=to(n.worldToNormalizedDisplay.apply(n,m(s).concat([c])),n.worldToNormalizedDisplay.apply(n,m(l).concat([c])),[0,0,0]),(f=t.widgetState.getCameraOffsets())[i]=d,t.widgetState.setCameraOffsets(f))},e.resetCamera=function(n,i,o,a){var s,l,u=t.widgetState.getImage().getCenter(),c=n.getActiveCamera().getFocalPoint(),d=Math.sqrt(tx(n.getActiveCamera().getPosition(),c)),f=e.getPlaneNormalFromViewType(i),p=o?u:c,h=tl(p,f,d,[0,0,0]);(s=n.getActiveCamera()).setFocalPoint.apply(s,m(p)),(l=n.getActiveCamera()).setPosition.apply(l,m(h)),n.getActiveCamera().setViewUp(t.widgetState.getPlanes()[i].viewUp),function(e,n,i,o,a){var s=e.getActiveCamera().getFocalPoint(),l=e.getActiveCamera().getDistance(),u=tl(s,n,l,[0,0,0]),c=s;if(o&&(c=r8.intersectWithLine(s,u,t.widgetState.getCenter(),n).x),a){var d=t.widgetState.getCenter(),f=e.getRenderWindow().getViews()[0].getViewportSize(e),p=f[0]/f[1],h=ti(e.worldToNormalizedDisplay.apply(e,m(d).concat([p])),t.widgetState.getCameraOffsets()[i],[0,0,0]),g=e.normalizedDisplayToWorld.apply(e,m(h).concat([p])),v=r8.intersectWithLine(g,u,d,n);c[0]=v.x[0],c[1]=v.x[1],c[2]=v.x[2]}e.getActiveCamera().setFocalPoint(c[0],c[1],c[2]);var y=tl(c,n,l,[0,0,0]);e.getActiveCamera().setPosition(y[0],y[1],y[2]);var b=t.widgetState.getImage().getBounds();o&&e.resetCamera(b),e.resetCameraClippingRange(b)}(n,f,i,o,a)},e.getPlaneSource=function(n){var i,o,a=function(n){for(var i=t.widgetState.getImage().getBounds(),o=e.getWidgetState().getCenter(),a=t.widgetState.getImage().getCenter(),s=[],l=0;l<3;l++)s[l]=-Math.abs(o[l]-a[l]),s[l]*=2;var u=po.newInstance();return n===BO.XZ_PLANE?(u.setOrigin(i[0]+s[0],o[1],i[4]+s[2]),u.setPoint1(i[1]-s[0],o[1],i[4]+s[2]),u.setPoint2(i[0]+s[0],o[1],i[5]-s[2])):n===BO.XY_PLANE?(u.setOrigin(i[0]+s[0],i[2]+s[1],o[2]),u.setPoint1(i[1]-s[0],i[2]+s[1],o[2]),u.setPoint2(i[0]+s[0],i[3]-s[1],o[2])):n===BO.YZ_PLANE&&(u.setOrigin(o[0],i[2]+s[1],i[4]+s[2]),u.setPoint1(o[0],i[3]-s[1],i[4]+s[2]),u.setPoint2(o[0],i[2]+s[1],i[5]-s[2])),u}(n),s=t.widgetState.getPlanes()[n],l=s.normal,u=s.viewUp;i=t.widgetState.getCenter(),a.setNormal(l),o=tA(to(a.getPoint2(),a.getOrigin(),[]),u,l),a.rotate(o,l),a.setCenter(i);var c=m(a.getOrigin()),d=m(a.getPoint1()),f=m(a.getPoint2());return Vf(t.widgetState.getImage().getBounds(),c,d,f),a.setOrigin.apply(a,m(c)),a.setPoint1.apply(a,m(d)),a.setPoint2.apply(a,m(f)),a},e.getResliceAxes=function(n){var i=e.getPlaneSource(n),o=t.widgetState.getPlanes()[n].normal,a=i.getOrigin(),s=[];to(i.getPoint1(),a,s),th(s);var l=[];to(i.getPoint2(),a,l),th(l);for(var u=od(new Float64Array(16)),c=0;c<3;c++)u[c]=s[c],u[4+c]=l[c],u[8+c]=o[c],u[12+c]=a[c];return u},e.updateReslicePlane=function(n,i){var o=t.widgetState.getImage().getSpacing(),a=e.getPlaneSource(i),s=e.getResliceAxes(i),l=a.getOrigin(),u=to(a.getPoint1(),l,[]),c=th(u),d=to(a.getPoint2(),l,[]),f=th(d),p=Math.abs(u[0]*o[0])+Math.abs(u[1]*o[1])+Math.abs(u[2]*o[2]),h=Math.abs(d[0]*o[0])+Math.abs(d[1]*o[1])+Math.abs(d[2]*o[2]),m=0,g=0,v=0===p?Number.MAX_SAFE_INTEGER:c/p;if(v>0x3fffffff)jY("Invalid X extent: ",v," on view type : ",i),m=0;else for(m=1;m<v;)m<<=1;var y=0===h?Number.MAX_SAFE_INTEGER:f/h;if(y>0x3fffffff)jY("Invalid Y extent:",y," on view type : ",i),g=0;else for(g=1;g<y;)g<<=1;var b=0===m?1:c/m,x=0===g?1:f/g,w=n.setResliceAxes(s);return w=n.setOutputSpacing([b,x,1])||w,w=n.setOutputOrigin([.5*b,.5*x,0])||w,w=n.setOutputExtent([0,m-1,0,g-1,0,0])||w},e.getPlaneSourceFromViewType=function(t){var n=po.newInstance(),i=e.getWidgetState().getCenter(),o=e.getPlaneNormalFromViewType(t);return n.setNormal(o),n.setOrigin(i),n},e.getPlaneNormalFromViewType=function(t){return e.getWidgetState().getPlanes()[t].normal},e.getOtherPlaneNormals=function(t){return[BO.YZ_PLANE,BO.XZ_PLANE,BO.XY_PLANE].filter(function(e){return e!==t}).map(function(t){return e.getPlaneNormalFromViewType(t)})},e.getResliceMatrix=function(){for(var t,n,i=od(new Float64Array(16)),o=0;o<3;o++)i[4*o+0]=e.getPlaneNormalFromViewType(BO.YZ_PLANE)[o],i[4*o+1]=e.getPlaneNormalFromViewType(BO.XZ_PLANE)[o],i[4*o+2]=e.getPlaneNormalFromViewType(BO.XY_PLANE)[o];var a=e.getWidgetState().getCenter();return(t=(n=a$.buildFromRadian()).translate.apply(n,m(a)).multiply(i)).translate.apply(t,m(ta(m(a),-1))).getMatrix()},e.getDisplayScaleParams=function(){return[BO.YZ_PLANE,BO.XZ_PLANE,BO.XY_PLANE].reduce(function(t,n){var i,o,a;return t[n]=null==(i=((a=e.getViewIds().map(function(t){return e.getWidgetForView({viewId:t})}).find(function(e){return e.getViewType()===n}))?a.getRepresentations():[])[0])||null==(o=i.getDisplayScaleParams)?void 0:o.call(i),t},{})},e.setScaleInPixels=eE.chain(e.setScaleInPixels,function(n){e.getViewWidgets().forEach(function(e){return e.setScaleInPixels(n)}),Vv(t.widgetState,t.scaleInPixels,t.rotationHandlePosition)}),e.getPlaneExtremities=function(t){var n=e.getWidgetState().getPlanes()[t].normal,i=iG.getDiagonalLength(e.getWidgetState().getImage().getBounds()),o=tl(e.getWidgetState().getCenter(),n,-i,[]),a=tl(e.getWidgetState().getCenter(),n,i,[]),s=sd.intersectWithLine(e.getWidgetState().getImage().getBounds(),o,a);return[s.x1,s.x2]}}var jJ={newInstance:eE.newInstance(jZ,"vtkResliceCursorWidget"),extend:jZ};function jQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function j$(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L$.extend(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jQ(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({glyphResolution:32,drawBorder:!1,drawFace:!0,behavior:1,_pipeline:{glyph:pS.newInstance({phiResolution:null!=(n=o.glyphResolution)?n:32,thetaResolution:null!=(i=o.glyphResolution)?i:32})}},o)),eE.setGet(e,t,["glyphResolution"]),t.classHierarchy.push("vtkSphereContextRepresentation"),e.setGlyphResolution=eE.chain(e.setGlyphResolution,t._pipeline.glyph.setThetaResolution,t._pipeline.glyph.setPhiResolution),e.setDrawBorder=function(e){t._pipeline.glyph.setLines(e)},e.setDrawFace=function(e){t._pipeline.glyph.setFace(e)},e.setOpacity=function(e){t._pipeline.actor.getProperty().setOpacity(e)},t._pipeline.actor.getProperty().setOpacity(.2)}var j0={newInstance:eE.newInstance(j$,"vtkSphereContextRepresentation"),extend:j$};function j1(e,t){var n=t.widgetState,i=n.getMoveHandle(),o=n.getCenterHandle(),a=n.getBorderHandle(),s=n.getSphereHandle();function l(){return!!o.getOrigin()&&!!a.getOrigin()}function u(){var e=o.getOrigin();if(e){o.setVisible(!0);var n=a.getOrigin();if(n)a.setVisible(!0);else if(!(n=i.getOrigin()))return;l()&&i.setVisible(!1);var u=rm(e,n);s.setVisible(!0),s.setOrigin(e),s.setScale1(2*u),t._interactor.render()}}function c(e){var n,i,o;return(null!=(n=null==(i=t.activeState)||null==(o=i.getManipulator)?void 0:o.call(i))?n:t.manipulator).handleEvent(e,t._apiSpecificRenderWindow)}t._isDragging=!1,t.classHierarchy.push("vtkSphereWidgetProp"),i.setVisible(!0),o.setVisible(!1),a.setVisible(!1),s.setVisible(!0),e.setCenterAndRadius=function(e,n){var i=o.getOrigin(),s=a.getOrigin(),l=[e[0]+n,e[1],e[2]];if(s){var c=rV(n9(),s,i),d=re(c);d>1e-10&&(l=ri(n9(),e,rp(n9(),c,n/d)))}o.setOrigin(e),a.setOrigin(l),u(),t._widgetManager.enablePicking()},e.handleLeftButtonPress=function(n){if((s=t.activeState)!==o&&s!==a&&s!==i)return t.activeState=null,eE.VOID;var s,l=c(n).worldCoords;return t.activeState===i?(o.getOrigin()?a.getOrigin()||(a.setOrigin(l),e.loseFocus()):o.setOrigin(l),u()):(t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),e.invokeStartInteractionEvent()),eE.EVENT_ABORT},e.handleLeftButtonRelease=function(i){return t._isDragging?(l()&&(t._widgetManager.enablePicking(),t._apiSpecificRenderWindow.setCursor("pointer"),t._isDragging=!1,t.activeState=null,n.deactivate()),e.invokeEndInteractionEvent(),eE.EVENT_ABORT):(t.activeState=null,eE.VOID)},e.handleMouseMove=function(e){if(!t.activeState)return eE.VOID;var n=c(e),i=n.worldCoords,o=n.worldDelta;return t.hasFocus?t.activeState.setOrigin(i):t._isDragging&&t.activeState.setOrigin(ti(t.activeState.getOrigin(),o,[])),u(),eE.VOID};var d=e.grabFocus;e.grabFocus=function(){d(),i.setVisible(!0),o.setVisible(!1),a.setVisible(!1),o.setOrigin(null),a.setOrigin(null),t.activeState=i,t._interactor.render()};var f=e.loseFocus;e.loseFocus=function(){f(),t.activeState=null}}function j2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function j3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j2(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j4(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,j3({behavior:j1,widgetState:Lf.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:20,visible:!0}}).addStateFromMixin({labels:["centerHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"centerHandle",initialValues:{scale1:20,visible:!0}}).addStateFromMixin({labels:["borderHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"borderHandle",initialValues:{scale1:20,visible:!0}}).addStateFromMixin({labels:["sphereHandle"],mixins:["origin","color","scale1","visible","orientation"],name:"sphereHandle",initialValues:{visible:!0,radius:1}}).build()},i)),BX.extend(e,t,i),eE.setGet(e,t,["manipulator","widgetState"]),t.classHierarchy.push("vtkSphereWidget"),n=j3({},e),t.methodsToLink=["scaleInPixels"],e.getRepresentationsForViewType=function(e){return[{builder:FD,labels:["moveHandle"]},{builder:FD,labels:["centerHandle"]},{builder:FD,labels:["borderHandle"]},{builder:j0,labels:["sphereHandle"]}]},e.getRadius=function(){var e=t.widgetState.getCenterHandle(),n=t.widgetState.getBorderHandle();return Math.sqrt(tx(e.getOrigin(),n.getOrigin()))},e.setManipulator=function(e){n.setManipulator(e),t.widgetState.getMoveHandle().setManipulator(e),t.widgetState.getCenterHandle().setManipulator(e),t.widgetState.getBorderHandle().setManipulator(e)},e.setManipulator(t.manipulator||LP.newInstance({useCameraNormal:!0}))}var j5={newInstance:eE.newInstance(j4,"vtkSphereWidget"),extend:j4};function j6(e,t){t.classHierarchy.push("vtkSplineWidgetProp"),t._isDragging=!1,t.keysDown={},t.moveHandle=t.widgetState.getMoveHandle();var n=function(){if(null!=e.getHandleSizeInPixels()){var n=e.getHandleSizeInPixels();t.moveHandle.setScale1(n),t.widgetState.getHandleList().forEach(function(e){e.setScale1(n)})}},i=function(){var n;(!t.lastHandle||t.keysDown.Control||!t.freeHand||rg(t.moveHandle.getOrigin(),t.lastHandle.getOrigin())>e.getFreehandMinDistance()*e.getFreehandMinDistance())&&(t.lastHandle=t.widgetState.addHandle(),t.lastHandle.setVisible(!1),(n=t.lastHandle).setOrigin.apply(n,m(t.moveHandle.getOrigin())),t.lastHandle.setColor(t.moveHandle.getColor()),t.lastHandle.setScale1(t.moveHandle.getScale1()),t.lastHandle.setManipulator(t.manipulator),t.firstHandle||(t.firstHandle=t.lastHandle),t._apiSpecificRenderWindow.setCursor("grabbing"))},o=function(){var e=t.widgetState.getHandleList(),n=t.moveHandle.getScale1()*rm(t._apiSpecificRenderWindow.displayToWorld(0,0,0,t._renderer),t._apiSpecificRenderWindow.displayToWorld(1,0,0,t._renderer));return e.reduce(function(e,n){var i=e.closestHandle,o=e.closestDistance;if(n!==t.moveHandle&&t.moveHandle.getOrigin()&&n.getOrigin()){var a=rg(t.moveHandle.getOrigin(),n.getOrigin());if(a<o)return{closestHandle:n,closestDistance:a}}return{closestHandle:i,closestDistance:o}},{closestHandle:null,closestDistance:n*n}).closestHandle};e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.setResetAfterPointPlacement=t._factory.setResetAfterPointPlacement,e.getResetAfterPointPlacement=t._factory.getResetAfterPointPlacement,e.setResetAfterPointPlacement(e.getResetAfterPointPlacement()),e.setFreehandMinDistance=t._factory.setFreehandMinDistance,e.getFreehandMinDistance=t._factory.getFreehandMinDistance,e.setFreehandMinDistance(e.getFreehandMinDistance()),e.setAllowFreehand=t._factory.setAllowFreehand,e.getAllowFreehand=t._factory.getAllowFreehand,e.setAllowFreehand(e.getAllowFreehand()),e.setDefaultCursor=t._factory.setDefaultCursor,e.getDefaultCursor=t._factory.getDefaultCursor,e.setDefaultCursor(e.getDefaultCursor()),e.setHandleSizeInPixels=function(e){t._factory.setHandleSizeInPixels(e),n()},e.getHandleSizeInPixels=t._factory.getHandleSizeInPixels,e.setHandleSizeInPixels(t._factory.getHandleSizeInPixels()),e.setResolution=function(e){t._factory.setResolution(e),t.representations[1].setResolution(e)},e.setResolution(t._factory.getResolution()),e.getPoints=function(){return t.representations[1].getOutputData().getPoints().getData()},e.reset=function(){t.widgetState.clearHandleList(),t.lastHandle=null,t.firstHandle=null},e.handleRightButtonPress=function(n){if(!t.activeState||!t.activeState.getActive()||!t.pickable)return eE.VOID;if(t.activeState!==t.moveHandle)t._interactor.requestAnimation(e),t.activeState.deactivate(),t.widgetState.removeHandle(t.activeState),t.activeState=null,t._interactor.cancelAnimation(e);else{var i=o();if(i)t.widgetState.removeHandle(i);else if(t.lastHandle){t.widgetState.removeHandle(t.lastHandle);var a=t.widgetState.getHandleList();t.lastHandle=a[a.length-1]}}return e.invokeInteractionEvent(),eE.EVENT_ABORT},e.handleLeftButtonPress=function(n){var a,s,l,u=null!=(a=null==(s=t.activeState)||null==(l=s.getManipulator)?void 0:l.call(s))?a:t.manipulator;if(!(u&&t.activeState&&t.activeState.getActive()&&t.pickable))return eE.VOID;if(u.handleEvent(n,t._apiSpecificRenderWindow),t.activeState===t.moveHandle){if(0===t.widgetState.getHandleList().length)i();else{var c=o();c&&!t.keysDown.Control?(t.moveHandle.deactivate(),t.moveHandle.setVisible(!1),t.activeState=c,c.activate(),t._isDragging=!0,t.lastHandle.setVisible(!0)):i()}t.freeHand=e.getAllowFreehand()&&!t._isDragging}else t.dragable&&(t._isDragging=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e));return e.invokeStartInteractionEvent(),eE.EVENT_ABORT},e.handleLeftButtonRelease=function(n){var i;return t._isDragging?t.hasFocus?((i=t.moveHandle).setOrigin.apply(i,m(t.activeState.getOrigin())),t.activeState.deactivate(),t.moveHandle.activate(),t.activeState=t.moveHandle,t.draggedPoint||(rg(t.moveHandle.getOrigin(),t.lastHandle.getOrigin())<t.moveHandle.getScale1()*t.moveHandle.getScale1()||rg(t.moveHandle.getOrigin(),t.firstHandle.getOrigin())<t.moveHandle.getScale1()*t.moveHandle.getScale1())&&(t.lastHandle.setVisible(!0),e.invokeEndInteractionEvent(),e.getResetAfterPointPlacement()?e.reset():e.loseFocus()),t._interactor.render()):(t._apiSpecificRenderWindow.setCursor(t.defaultCursor),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()):t.activeState!==t.moveHandle&&t.widgetState.deactivate(),t.freeHand=!1,t.draggedPoint=!1,t._isDragging=!1,t.hasFocus?eE.EVENT_ABORT:eE.VOID},e.handleMouseMove=function(e){var n,a,s,l=null!=(n=null==(a=t.activeState)||null==(s=a.getManipulator)?void 0:s.call(a))?n:t.manipulator;if(!(l&&t.activeState&&t.activeState.getActive()&&t.pickable))return eE.VOID;var u=l.handleEvent(e,t._apiSpecificRenderWindow),c=u.worldCoords,d=u.worldDelta,f=o();f?(t.moveHandle.setVisible(!1),f!==t.firstHandle&&t._apiSpecificRenderWindow.setCursor("grabbing")):!t._isDragging&&t.hasFocus&&(t.moveHandle.setVisible(!0),t._apiSpecificRenderWindow.setCursor(t.defaultCursor)),t.lastHandle&&t.lastHandle.setVisible(!0);var p=t._isDragging||t.activeState===t.moveHandle;if(c.length&&p){var h=t.activeState.getOrigin();h?t.activeState.setOrigin(ti(h,d,[])):t.activeState.setOrigin(c),t._isDragging&&(t.draggedPoint=!0),t.freeHand&&t.activeState===t.moveHandle&&i()}return t.hasFocus?eE.EVENT_ABORT:eE.VOID},e.handleKeyDown=function(n){var i=n.key;if(t.keysDown[i]=!0,t.hasFocus){if("Enter"===i)t.widgetState.getHandleList().length>0&&(e.invokeEndInteractionEvent(),e.getResetAfterPointPlacement()?e.reset():e.loseFocus());else if("Escape"===i)e.reset(),e.loseFocus(),e.invokeEndInteractionEvent();else if(("Delete"===i||"Backspace"===i)&&t.lastHandle){t.widgetState.removeHandle(t.lastHandle);var o=t.widgetState.getHandleList();t.lastHandle=o[o.length-1]}}},e.handleKeyUp=function(e){var n=e.key;t.keysDown[n]=!1},e.grabFocus=function(){t.hasFocus||(t.activeState=t.moveHandle,t.activeState.activate(),t.activeState.setVisible(!0),t._interactor.requestAnimation(e),n()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&t._interactor.cancelAnimation(e),t.widgetState.deactivate(),t.moveHandle.deactivate(),t.moveHandle.setVisible(!1),t.activeState=null,t._interactor.render(),t.hasFocus=!1}}function j8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function j9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j8(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j7(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,j9({freehandMinDistance:.1,allowFreehand:!0,resolution:32,defaultCursor:"pointer",handleSizeInPixels:10,resetAfterPointPlacement:!1,behavior:j6,widgetState:Lf.createBuilder().addField({name:"splineKind",initialValue:FU}).addField({name:"splineClosed",initialValue:!0}).addField({name:"splineBoundaryCondition",initialValue:0}).addField({name:"splineBoundaryConditionValues",initialValue:[0,0,0]}).addField({name:"splineTension",initialValue:0}).addField({name:"splineContinuity",initialValue:0}).addField({name:"splineBias",initialValue:0}).addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:10,visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:10}}).build()},i)),BX.extend(e,t,i),eE.setGet(e,t,["manipulator","freehandMinDistance","allowFreehand","resolution","defaultCursor","handleSizeInPixels","resetAfterPointPlacement"]),t.classHierarchy.push("vtkSplineWidget"),n=j9({},e),t.methodsToLink=["boundaryCondition","close","outputBorder","fill","borderColor","errorBorderColor","scaleInPixels"],e.getRepresentationsForViewType=function(e){switch(e){case BO.DEFAULT:case BO.GEOMETRY:case BO.SLICE:case BO.VOLUME:}return[{builder:FD,labels:["handles","moveHandle"]},{builder:FY,labels:["handles","moveHandle"]}]},e.setManipulator=function(e){n.setManipulator(e),t.widgetState.getMoveHandle().setManipulator(e),t.widgetState.getHandleList().forEach(function(t){t.setManipulator(e)})},e.setManipulator(t.manipulator||t.manipulator||LP.newInstance({useCameraNormal:!0}))}var Ge={newInstance:eE.newInstance(j7,"vtkSplineWidget"),extend:j7},Gt={TRANSLATE:"translate",SCALE:"scale",ROTATE:"rotate"};function Gn(e,t){var n=!1;t.rotationManipulator=LP.newInstance(),t.lineManipulator=LS.newInstance();var i={startQuat:sN(),dragStartVec:[0,0,0]},o={startDistFromOrigin:0,startScale:1},a={startPos:0,dragStartCoord:[0,0,0]};e.getBounds=function(){return m(iG.INIT_BOUNDS)},e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleLeftButtonPress=function(n){if(!t.activeState||!t.activeState.getActive()||!t.pickable)return eE.VOID;var i=b(t.activeState.getName().split(":"),2),o=i[0],a=i[1],s="XYZ".indexOf(a);return"translate"===o?e.handleTranslateStartEvent(n,a,s):"scale"===o?e.handleScaleStartEvent(n,a,s):"rotate"===o&&e.handleRotateStartEvent(n,a,s),t._interactor.requestAnimation(e),eE.EVENT_ABORT},e.handleTranslateStartEvent=function(e,i,o){t.lineManipulator.setHandleOrigin(t.activeState.getOrigin()),t.lineManipulator.setHandleNormal(t.activeState.getDirection());var s=t.lineManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;s.length&&(n=!0,a.dragStartCoord=s,a.startPos=t.widgetState.getTransform().getTranslation()[o])},e.handleScaleStartEvent=function(e,i,a){t.lineManipulator.setHandleOrigin(t.activeState.getOrigin()),t.lineManipulator.setHandleNormal(t.activeState.getDirection());var s=t.lineManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;s.length&&(n=!0,o.startScale=t.widgetState.getTransform().getScale()[a],o.startDistFromOrigin=rU(s,t.activeState.getOrigin())||1e-4)},e.handleRotateStartEvent=function(e,o){t.rotationManipulator.setHandleOrigin(t.activeState.getOrigin()),t.rotationManipulator.setHandleNormal(t.activeState.getDirection());var a=t.rotationManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;a.length&&(n=!0,rV(i.dragStartVec,a,t.activeState.getOrigin()),rx(i.dragStartVec,i.dragStartVec),i.startQuat=t.widgetState.getTransform().getRotation())},e.handleMouseMove=function(i){return n&&t.pickable?e.handleEvent(i):eE.VOID},e.handleLeftButtonRelease=function(){n&&t.pickable&&t._interactor.cancelAnimation(e),n=!1,t.widgetState.deactivate()},e.handleEvent=function(n){if(t.pickable&&t.activeState&&t.activeState.getActive()){var i=b(t.activeState.getName().split(":"),2),o=i[0],a=i[1],s="XYZ".indexOf(a);if("translate"===o)return e.handleTranslateEvent(n,a,s);if("scale"===o)return e.handleScaleEvent(n,a,s);if("rotate"===o)return e.handleRotateEvent(n,a,s)}return eE.VOID},e.handleTranslateEvent=function(e,n,i){t.lineManipulator.setHandleOrigin(t.activeState.getOrigin()),t.lineManipulator.setHandleNormal(t.activeState.getDirection());var o=t.lineManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;if(o.length){var s=[0,0,0];s[i]=1;var l=[0,0,0];rV(l,o,a.dragStartCoord);var u=Math.sign(rw(s,l))*rW(l),c=t.widgetState.getTransform().getTranslation();c[i]=a.startPos+u,t.widgetState.getTransform().setTranslation(c)}return eE.EVENT_ABORT},e.handleScaleEvent=function(e,n,i){t.lineManipulator.setHandleOrigin(t.activeState.getOrigin()),t.lineManipulator.setHandleNormal(t.activeState.getDirection());var a=t.lineManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords;if(a.length){var s=rU(t.activeState.getOrigin(),a)/o.startDistFromOrigin*o.startScale,l=t.widgetState.getTransform().getScale();l[i]=s,t.widgetState.getTransform().setScale(l)}return eE.EVENT_ABORT},e.handleRotateEvent=function(e){t.rotationManipulator.setHandleOrigin(t.activeState.getOrigin()),t.rotationManipulator.setHandleNormal(t.activeState.getDirection());var n=t.rotationManipulator.handleEvent(e,t._apiSpecificRenderWindow).worldCoords,o=[0,0,0];if(n.length){rV(o,n,t.activeState.getOrigin()),rx(o,o);var a=rk(i.dragStartVec,o),s=[0,0,0];rA(s,o,i.dragStartVec),rx(s,s);var l=rw(s,t.activeState.getDirection()),u=sN();sR(u,t.activeState.getDirection(),-l*a),sL(u,u,i.startQuat),sG(u,u);var c=t.activeState.getDirection();t.widgetState.getTransform().setRotation(u),t.activeState.setDirection(c)}return eE.EVENT_ABORT},t.camera=t._renderer.getActiveCamera(),t.classHierarchy.push("vtkTransformControlsWidgetProp")}function Gr(e){var t=e.getTransform(),n=e.getScaleHandleX(),i=e.getScaleHandleY(),o=e.getScaleHandleZ(),a=e.getRotateHandleX(),s=e.getRotateHandleY(),l=e.getRotateHandleZ();e.getStatesWithLabel("handles").forEach(function(e){e.setOrigin(t.getTranslation())});var u=o3();af(u,t.getRotation()),[n,a].forEach(function(e){e.setDirection(u.slice(0,3)),e.setUp(u.slice(3,6).map(function(e){return-e})),e.setRight(u.slice(6,9))}),[i,s].forEach(function(e){e.setDirection(u.slice(3,6)),e.setUp(u.slice(6,9)),e.setRight(u.slice(0,3))}),[o,l].forEach(function(e){e.setDirection(u.slice(6,9)),e.setUp(u.slice(3,6)),e.setRight(u.slice(0,3))})}var Gi={mode:Gt.TRANSLATE};function Go(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gi,o),BX.extend(e,t,o),eE.setGet(e,t,["mode"]),eE.get(e,t,["lineManipulator","rotateManipulator"]),t.classHierarchy.push("vtkTransformControlsWidget"),t.behavior=Gn,n=Lf.createBuilder().addField({name:"translation",initialValue:[0,0,0]}).addField({name:"scale",initialValue:[1,1,1]}).addField({name:"rotation",initialValue:[0,0,0,1]}).build(),t.widgetState=Lf.createBuilder().addStateFromInstance({labels:[],name:"transform",instance:n}).addStateFromMixin({labels:["handles","translateHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"translateHandleZ",initialValues:{name:"translate:Z",scale3:[1,1,320],origin:[0,0,0],color3:[0,255,0],up:[0,1,0],right:[1,0,0],direction:[0,0,1]}}).addStateFromMixin({labels:["handles","translateHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"translateHandleX",initialValues:{name:"translate:X",scale3:[1,1,320],origin:[0,0,0],color3:[0,0,255],up:[0,1,0],right:[0,0,-1],direction:[1,0,0]}}).addStateFromMixin({labels:["handles","translateHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"translateHandleY",initialValues:{name:"translate:Y",scale3:[1,1,320],origin:[0,0,0],color3:[255,0,0],up:[0,0,1],right:[1,0,0],direction:[0,1,0]}}).addStateFromMixin({labels:["handles","scaleHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"scaleHandleZ",initialValues:{name:"scale:Z",scale3:[1,1,320],origin:[0,0,0],color3:[0,255,0],up:[0,0,1],right:[0,1,0],direction:[1,0,0]}}).addStateFromMixin({labels:["handles","scaleHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"scaleHandleX",initialValues:{name:"scale:X",scale3:[1,1,320],origin:[0,0,0],color3:[0,0,255],up:[1,0,0],right:[0,-1,0],direction:[0,0,1]}}).addStateFromMixin({labels:["handles","scaleHandles"],mixins:["name","origin","color3","scale3","orientation","visible"],name:"scaleHandleY",initialValues:{name:"scale:Y",scale3:[1,1,320],origin:[0,0,0],color3:[255,0,0],up:[0,1,0],right:[1,0,0],direction:[0,0,1]}}).addStateFromMixin({labels:["handles","rotateHandles"],mixins:["name","origin","color3","scale1","orientation","visible"],name:"rotateHandleZ",initialValues:{name:"rotate:Z",scale1:240,origin:[0,0,0],color3:[0,255,0],up:[0,1,0],right:[1,0,0],direction:[0,0,1]}}).addStateFromMixin({labels:["handles","rotateHandles"],mixins:["name","origin","color3","scale1","orientation","visible"],name:"rotateHandleX",initialValues:{name:"rotate:X",scale1:240,origin:[0,0,0],color3:[0,0,255],up:[0,1,0],right:[0,0,-1],direction:[1,0,0]}}).addStateFromMixin({labels:["handles","rotateHandles"],mixins:["name","origin","color3","scale1","orientation","visible"],name:"rotateHandleY",initialValues:{name:"rotate:Y",scale1:240,origin:[0,0,0],color3:[255,0,0],up:[0,0,1],right:[1,0,0],direction:[0,1,0]}}).build(),t.methodsToLink=["scaleInPixels","activeScaleFactor","useActiveColor","activeColor"],e.getRepresentationsForViewType=function(e){return[{builder:FQ,labels:["translateHandles"],initialValues:{radius:3,glyphResolution:12,coneSource:{radius:8,height:.05,direction:[0,1,0]}}},{builder:FM,labels:["scaleHandles"],initialValues:{radius:3,glyphResolution:12,cubeSource:{xLength:20,yLength:.0625,zLength:20}}},{builder:FA,labels:["rotateHandles"]}]},e.updateHandleVisibility=function(){t.widgetState.getStatesWithLabel("translateHandles").forEach(function(e){e.setVisible("translate"===t.mode)}),t.widgetState.getStatesWithLabel("scaleHandles").forEach(function(e){e.setVisible("scale"===t.mode)}),t.widgetState.getStatesWithLabel("rotateHandles").forEach(function(e){e.setVisible("rotate"===t.mode)})},t._onModeChanged=function(){e.updateHandleVisibility()},i=t.widgetState.getTransform().onModified(function(e){Gr(t.widgetState)}),e.delete=eE.chain(e.delete,function(){i.unsubscribe()}),Gr(t.widgetState),e.updateHandleVisibility()}var Ga=eE.newInstance(Go,"vtkTransformControlsWidget");M.Common={Core:{vtkBase64:f,vtkCellArray:nQ,vtkDataArray:nH,vtkEndian:n0,vtkHalfFloat:n3,vtkImageHelper:aE,vtkLookupTable:aZ,vtkMath:e,vtkMatrixBuilder:a$,vtkPoints:a3,vtkProgressHandler:a6,vtkScalarsToColors:aq,vtkStringArray:se,vtkURLExtract:sr,vtkVariantArray:{newInstance:sa,extend:so}},DataModel:{vtkBoundingBox:iG,vtkBox:sd,vtkCell:sh,vtkCone:sv,vtkCylinder:sw,vtkDataSet:oe,vtkDataSetAttributes:i3,vtkITKHelper:lM,vtkImageData:aP,vtkImplicitBoolean:lB,vtkLine:sY,vtkMolecule:lj,vtkPiecewiseFunction:lW,vtkPlane:r8,vtkPlanes:lY,vtkPointSet:sQ,vtkPolyData:lC,vtkSelectionNode:l$,vtkSphere:l4,vtkStructuredData:oo,vtkTriangle:ls,vtkTriangleStrip:lv},Transform:{vtkLandmarkTransform:ut,vtkTransform:uo},System:{vtkMobileVR:{isMobile:uu,isIOS:uc,isWebViewAndroid:ud,isSafari:uf,isFirefoxAndroid:up,hardware:ug,getVRHeadset:function(){return new Promise(function(e,t){var n=document.querySelector("body"),i=document.createElement("select");i.innerHTML=us.map(function(e,t){return'<option value="'.concat(t,'">').concat(e.label,"</option>")}).join(""),i.style.zIndex=1e3,i.style.position="absolute",i.style.left="50%",i.style.top="50%",i.style.transform="translate(-50%, -50%)",i.addEventListener("change",function(t){n.removeChild(i),e(us[Number(t.target.value)])}),n.appendChild(i)})}},vtkTimerLog:{getUniversalTime:function(){return+new Date}}}},M.Filters=pB,M.Imaging=hc,M.Interaction={Manipulators:g5,Misc:{vtkDeviceOrientationToCamera:{addCameraToSynchronize:function(e,t,n){var i={subscription:e.onAnimation(function(){if(g8.update&&Number.isFinite(g8.device.alpha)){var e=g8.device,i=e.alpha,o=e.beta,a=e.gamma,s=g8.screen;t.setDeviceAngles(i,o,a,s),n&&n()}}),renderWindowInteractor:e},o=g6.length;return g6.push(i),g8.update&&i.renderWindowInteractor.requestAnimation(i),o},addWindowListeners:function(){window.addEventListener("orientationchange",ve,!1),window.addEventListener("deviceorientation",g7,!1),g8.update=!0,g6.filter(function(e){return!!e}).forEach(function(e){return e.renderWindowInteractor.requestAnimation(e)})},isDeviceOrientationSupported:function(){return g8.supported},removeCameraToSynchronize:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=g6[e];n&&(n.subscription.unsubscribe(),t&&n.renderWindowInteractor.cancelAnimation(n)),g6[e]=null},removeWindowListeners:function(){window.removeEventListener("orientationchange",ve,!1),window.removeEventListener("deviceorientation",g7,!1),g8.update=!1,g6.filter(function(e){return!!e}).forEach(function(e){return e.renderWindowInteractor.cancelAnimation(e)})}}},Style:{vtkInteractorStyleImage:vs,vtkInteractorStyleManipulator:mt,vtkInteractorStyleMPRSlice:vd,vtkInteractorStyleRemoteMouse:vb,vtkInteractorStyleTrackballCamera:vi},UI:{vtkCornerAnnotation:vV,vtkFPSMonitor:vX,vtkIcons:{Contrast:vY,Logo:vZ,Spacing:vJ,Tint:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Tint</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Tint" stroke="#000000" stroke-width="10" fill="#000000">\n            <path d="M90,24 C110,53.4848089 135,82.5 135,110 C135,137.5 117.5,156.484809 90,156.484809 C62.5,156.484809 45,137.5 45,110 C45,82.5 70,53.4848089 90,24 Z" id="Path-2"></path>\n        </g>\n    </g>\n</svg>'},vtkSlider:v8,vtkVolumeController:{newInstance:y_,extend:yS}},Widgets:{vtkOrientationMarkerWidget:yX,vtkPiecewiseGaussianWidget:yy}},M.IO=Sg,M.Proxy=BT,M.Rendering={Core:O0,Misc:{vtkCanvasView:O4,vtkFullScreenRenderWindow:DQ,vtkGenericRenderWindow:D2,vtkRemoteView:D9,vtkRenderWindowWithControlBar:Ia,vtkSynchronizableRenderWindow:IQ,vtkTextureLODsDownloader:x2},OpenGL:{vtkActor:{newInstance:I1,extend:I0},vtkActor2D:{newInstance:I4,extend:I3},vtkBufferObject:PI,vtkCamera:{newInstance:I8,extend:I6},vtkCellArrayBufferObject:PF,vtkConvolution2DPass:kt,vtkForwardPass:P9,vtkFramebuffer:Pw,vtkGlyph3DMapper:{newInstance:kk,extend:kI},vtkHardwareSelector:Mp,vtkHelper:P$,vtkImageMapper:{newInstance:kV,extend:kF},vtkImageSlice:{newInstance:kU,extend:kG},vtkPixelSpaceCallbackMapper:{newInstance:kH,extend:kW},vtkPolyDataMapper:kS,vtkPolyDataMapper2D:{newInstance:k3,extend:k2},vtkRenderWindow:{newInstance:MV,extend:MF,pushMonitorGLContextCount:function(e){MR.push(e)},popMonitorGLContextCount:function(e){return MR.pop()}},vtkRenderer:{newInstance:k6,extend:k5},vtkImageResliceMapper:{newInstance:Nu,extend:Nl},vtkShader:PU,vtkShaderCache:Mb,vtkShaderProgram:Pq,vtkSkybox:{newInstance:Np,extend:Nf},vtkSphereMapper:{newInstance:Nb,extend:Ny},vtkStickMapper:{newInstance:N_,extend:NS},vtkTexture:Py,vtkTextureUnitManager:MC,vtkVertexArrayObject:PY,vtkViewNodeFactory:Pu,vtkVolume:{newInstance:NP,extend:NO},vtkVolumeMapper:{newInstance:NB,extend:NR}},SceneGraph:{vtkRenderPass:PS,vtkRenderWindowViewNode:MT,vtkViewNode:Pt,vtkViewNodeFactory:Pi},WebGPU:{vtkRenderWindow:{newInstance:DH,extend:DW}},WebXR:{vtkRenderWindowHelper:Rw}},M.Widgets={Core:{vtkAbstractWidget:BI,vtkAbstractWidgetFactory:BX,vtkStateBuilder:Lf,vtkWidgetManager:Bz,vtkWidgetState:BQ},Manipulators:{vtkPickerManipulator:Lx,vtkLineManipulator:LS,vtkPlaneManipulator:LP,vtkTrackballManipulator:LI},Representations:{vtkCircleContextRepresentation:L3,vtkContextRepresentation:LK,vtkConvexFaceContextRepresentation:L6,vtkCubeHandleRepresentation:L7,vtkGlyphRepresentation:L$,vtkHandleRepresentation:Lz,vtkImplicitPlaneRepresentation:Fs,vtkLineHandleRepresentation:Fd,vtkOutlineContextRepresentation:Fh,vtkPolyLineRepresentation:Fb,vtkRotateTransformHandleRepresentation:FA,vtkScaleTransformHandleRepresentation:FM,vtkSphereHandleRepresentation:FD,vtkSplineContextRepresentation:FY,vtkTranslateTransformHandleRepresentation:FQ,vtkWidgetRepresentation:LV},Widgets3D:{vtkAngleWidget:F3,vtkEllipseWidget:V_,vtkImageCroppingWidget:Vj,vtkImplicitPlaneWidget:VW,vtkInteractiveOrientationWidget:VJ,vtkLabelWidget:V2,vtkLineWidget:jS,vtkPaintWidget:jM,vtkPolyLineWidget:jN,vtkRectangleWidget:jU,vtkResliceCursorWidget:jJ,vtkShapeWidget:Vo,vtkSphereWidget:j5,vtkSplineWidget:Ge,vtkTransformControlsWidget:{newInstance:Ga,extend:Go,TransformMode:Gt}}},M.mtime=eE.getCurrentGlobalMTime,M.macro=eE,window.vtk=M}(),{}}()},9186(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(4692),a=n(8899),s=n(2923),l=n(6732),u=n(5204),c=n(4128),d=function(e){"use strict";if(!(this instanceof d))return new d(e);s.call(this);var t=n(4341);e=e||{};var i,a=this,f=this._exit,p=this.geoOn,h=this.geoOff,m=void 0===e.selectionAPI?"auto":e.selectionAPI,g={},v=void 0===e.layer?null:e.layer,y=e.gcs,b=void 0===e.visible||e.visible,x=void 0===e.bin?null:e.bin,w=void 0===e.renderer||v&&e.renderer===v.renderer()?null:e.renderer,A=l(),C=l(),S=l(),_=[],T=[];return this._subfeatureStyles={},Object.defineProperty(this,"ready",{get:function(){return i}}),this._bindMouseHandlers=function(){a.selectionAPI()&&(a._unbindMouseHandlers(),a.geoOn(c.mousemove,a._handleMousemove),a.geoOn(c.mousedown,a._handleMousedown),a.geoOn(c.mouseup,a._handleMouseup),a.geoOn(c.mouseclick,a._handleMouseclick),a.geoOn(c.brushend,a._handleBrushend),a.geoOn(c.brush,a._handleBrush))},this._unbindMouseHandlers=function(){a.geoOff(c.mousemove,a._handleMousemove),a.geoOff(c.mousedown,a._handleMousedown),a.geoOff(c.mouseup,a._handleMouseup),a.geoOff(c.mouseclick,a._handleMouseclick),a.geoOff(c.brushend,a._handleBrushend),a.geoOff(c.brush,a._handleBrush)},this.pointSearch=function(e,t){return{index:[],found:[]}},this.boxSearch=function(e,t,n,i){return a.polygonSearch([e,{x:e.x,y:t.y},t,{x:t.x,y:e.y}],n,i)},this.polygonSearch=function(e,t,n){return{index:[],found:[]}},this._handleMousedown=function(e){this._handleMousemove(e,c.feature.mousedown)},this._handleMouseup=function(e){this._handleMousemove(e,c.feature.mouseup)},this._handleMousemove=function(e,t){var n,i=e&&e.mouse?e.mouse:a.layer().map().interactor().mouse(),o=a.data(),s=a.pointSearch(i.geo),l=[],u=[],f=-1,p=-1;if(T.length||s.index.length){if(n=s.extra||{},s.index.length>1&&a.geoTrigger(c.feature.mouseover_order,{feature:a,mouse:i,previous:T,over:s,sourceEvent:e}),d.eventID+=1,t)return void s.index.forEach(function(l,u){a.geoTrigger(t,{data:o[l],index:l,extra:n[l],mouse:i,eventID:d.eventID,top:u===s.length-1,sourceEvent:e},!0)});T.length&&(f=T[T.length-1]),l=s.index.filter(function(e){return 0>T.indexOf(e)}),u=T.filter(function(e){return 0>s.index.indexOf(e)}),l.forEach(function(t,s){a.geoTrigger(c.feature.mouseover,{data:o[t],index:t,extra:n[t],mouse:i,eventID:d.eventID,top:s===l.length-1,sourceEvent:e},!0)}),d.eventID+=1,u.forEach(function(t,n){a.geoTrigger(c.feature.mouseout,{data:o[t],index:t,mouse:i,eventID:d.eventID,top:n===u.length-1,sourceEvent:e},!0)}),d.eventID+=1,s.index.forEach(function(t,l){a.geoTrigger(c.feature.mousemove,{data:o[t],index:t,extra:n[t],mouse:i,eventID:d.eventID,top:l===s.index.length-1,sourceEvent:e},!0)}),(T=s.index).length&&(p=T[T.length-1]),f!==p&&(-1!==f&&a.geoTrigger(c.feature.mouseoff,{data:o[f],index:f,mouse:i,sourceEvent:e},!0),-1!==p&&a.geoTrigger(c.feature.mouseon,{data:o[p],index:p,extra:n[p],mouse:i,sourceEvent:e},!0))}},this._clearSelectedFeatures=function(){return T=[],a},this._handleMouseclick=function(e){var t=a.layer().map().interactor().mouse(),n=a.data(),i=a.pointSearch(t.geo),o=i.extra||{};i.index.length>1&&a.geoTrigger(c.feature.mouseclick_order,{feature:a,mouse:t,over:i,sourceEvent:e}),t.buttonsDown=e.buttonsDown,d.eventID+=1,i.index.forEach(function(s,l){a.geoTrigger(c.feature.mouseclick,{data:n[s],index:s,extra:o[s],mouse:t,eventID:d.eventID,top:l===i.index.length-1,sourceEvent:e},!0)})},this._handleBrush=function(e){var t=[e.gcs.lowerLeft,e.gcs.lowerRight,e.gcs.upperRight,e.gcs.upperLeft];if(a.layer()){var n=a.layer().map();t=u.transformCoordinates(n.gcs(),n.ingcs(),t)}var i=a.polygonSearch(t);d.eventID+=1,i.index.forEach(function(t,n){a.geoTrigger(c.feature.brush,{data:i.found[n],index:t,mouse:e.mouse,brush:e,eventID:d.eventID,top:n===i.index.length-1},!0)})},this._handleBrushend=function(e){var t=[e.gcs.lowerLeft,e.gcs.lowerRight,e.gcs.upperRight,e.gcs.upperLeft];if(a.layer()){var n=a.layer().map();t=u.transformCoordinates(n.gcs(),n.ingcs(),t)}var i=a.polygonSearch(t);d.eventID+=1,i.index.forEach(function(t,n){a.geoTrigger(c.feature.brushend,{data:i.found[n],index:t,mouse:e.mouse,brush:e,eventID:d.eventID,top:n===i.index.length-1},!0)})},this.style=function(e,t){return void 0===e?g:"string"==typeof e&&void 0===t?g[e]:void 0===t?(g=Object.assign({},g,e),a.modified(),a):(g[e]=t,a.modified(),a)},this.style.get=function(e){if(void 0===e){var n,i={};for(n in g)g.hasOwnProperty(n)&&(i[n]=a.style.get(n));return i}return e.toLowerCase().match(/color$/)?t.isFunction(g[e])?function(){return t.convertColor(g[e].apply(a,arguments))}:t.ensureFunction(t.convertColor(g[e])):t.ensureFunction(g[e])},this.updateStyleFromArray=function(e,t,n){if("string"!=typeof e)o.each(e,function(e,t){a.updateStyleFromArray(e,t)});else{var i;if(e.toLowerCase().match(/color$/)&&(i={r:0,g:0,b:0}),!Array.isArray(t))return a;a._subfeatureStyles[e]?t.length&&Array.isArray(t[0])?a.style(e,function(e,n,o,a){var s=(t[a]||[])[n];return void 0!==s?s:i}):a.style(e,function(e,n,o,a){var s=t[a];return void 0!==s?s:i}):a.style(e,function(e,n){var o=t[n];return void 0!==o?o:i})}return n&&a.visible()&&a.draw(),a},this.layer=function(){return v},this.renderer=function(){return w||v&&v.renderer()},this.gcs=function(e){return void 0!==e?(y=e,a.modified(),a):null==y&&v?v.map().ingcs():y},this.featureGcsToDisplay=function(e){var t=v.map();return e=t.gcsToWorld(e,a.gcs()),e=t.worldToDisplay(e),a.renderer().baseToLocal&&(e=a.renderer().baseToLocal(e)),e},this.visible=function(e,t){if(void 0===e)return(!!t||!v||!v.visible||!!v.visible())&&b;if(b!==e||t){b=e,v&&v.visible&&!v.visible()&&(e=!1),e?a._bindMouseHandlers():a._unbindMouseHandlers();for(var n=0;n<_.length;n+=1)_[n].visible(b,t)}return a},this.dependentFeatures=function(e){return void 0===e?_.slice():(_=e.slice(),a)},this.bin=function(e,n){if(void 0!==e)return x=t.isNonNullFinite(e)?parseInt(e,10):null,a.modified(),a;if(null===x&&!n){var i=a.parent(),o=i?i.children().indexOf(a):-1;return o>=0?o:0}return x},this.dataTime=function(e){return void 0===e?A:(A=e,a.modified(),a)},this.buildTime=function(e){return void 0===e?C:(C=e,a.modified(),a)},this.updateTime=function(e){return void 0===e?S:(S=e,a.modified(),a)},this.data=function(e){return void 0===e?a.style("data")||[]:(a.style("data",e),a.dataTime().modified(),a.modified(),a)},this.selectionAPI=function(e,t){return void 0===e?(!!t||!v||!v.selectionAPI||!!v.selectionAPI())&&(t||"auto"!==m?m:!!a.geoIsOn(Object.values(c.feature))):("auto"!==e&&(e=!!e),(e!==m||t)&&(m=e,a._unbindMouseHandlers(),a._bindMouseHandlers()),a)},this.mouseOverOrderHighestIndex=function(e){e.over.index.sort();var t=e.feature.data();e.over.index.forEach(function(n,i){e.over.found[i]=t[n]})},this._init=function(e){if(!v)throw Error("Feature requires a valid layer");g=Object.assign({},{opacity:1},void 0===e.style?{}:e.style),a._bindMouseHandlers(),i=!0},this._build=function(){},this._update=function(){},this.geoOn=function(e,t){var n="auto"===a.selectionAPI(void 0,!0),i=n&&a.selectionAPI(),o=p.apply(a,arguments);return n&&!i&&a.selectionAPI()&&a._bindMouseHandlers(),o},this.geoOff=function(e,t){var n="auto"===a.selectionAPI(void 0,!0),i=n&&a.selectionAPI(),o=h.apply(a,arguments);return n&&i&&!a.selectionAPI()&&a._unbindMouseHandlers(),o},this._exit=function(){a._unbindMouseHandlers(),T=[],g={},f(),i=!1},this._init(e),this};d.eventID=0,d.create=function(e,t){"use strict";if(!(e instanceof n(4837)))return console.warn("Invalid layer"),null;if("object"!==i(t))return console.warn("Invalid spec"),null;var o=t.type,a=e.createFeature(o,t);return a?(t.data=t.data||[],a.style(t)):(console.warn('Could not create feature type "'+o+'"'),null)},a(d,s),e.exports=d},9200(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},9204(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>m,forward:()=>f,init:()=>d,inverse:()=>p,names:()=>h,ssfn_:()=>c});var i=n(384),o=n(3385),a=n(9576),s=n(7099),l=n(6245),u=n(4181);function c(e,t,n){return t*=n,Math.tan(.5*(i.sK+e))*Math.pow((1-t)/(1+t),.5*n)}function d(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.H0&&(this.k0=.5*(1+(0,o.A)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i.H0&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.H0&&Math.abs(Math.cos(this.lat_ts))>i.H0&&(this.k0=.5*this.cons*(0,a.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,s.A)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,a.A)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(c(this.lat0,this.sinlat0,this.e))-i.sK,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function f(e){var t,n,o,a,l,d,f=e.x,p=e.y,h=Math.sin(p),m=Math.cos(p),g=(0,u.A)(f-this.long0,this.over);if(Math.abs(Math.abs(f-this.long0)-Math.PI)<=i.H0&&Math.abs(p+this.lat0)<=i.H0)return e.x=NaN,e.y=NaN,e;if(this.sphere)t=2*this.k0/(1+this.sinlat0*h+this.coslat0*m*Math.cos(g)),e.x=this.a*t*m*Math.sin(g)+this.x0,e.y=this.a*t*(this.coslat0*h-this.sinlat0*m*Math.cos(g))+this.y0;else{if(a=Math.cos(n=2*Math.atan(c(p,h,this.e))-i.sK),o=Math.sin(n),Math.abs(this.coslat0)<=i.H0)return l=(0,s.A)(this.e,p*this.con,this.con*h),d=2*this.a*this.k0*l/this.cons,e.x=this.x0+d*Math.sin(f-this.long0),e.y=this.y0-this.con*d*Math.cos(f-this.long0),e;Math.abs(this.sinlat0)<i.H0?e.y=(t=2*this.a*this.k0/(1+a*Math.cos(g)))*o:e.y=(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*a*Math.cos(g))))*(this.cosX0*o-this.sinX0*a*Math.cos(g))+this.y0,e.x=t*a*Math.sin(g)+this.x0}return e}function p(e){e.x-=this.x0,e.y-=this.y0;var t,n,o,a,s,c=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var d=2*Math.atan(c/(2*this.a*this.k0));return t=this.long0,n=this.lat0,c<=i.H0||(n=Math.asin(Math.cos(d)*this.sinlat0+e.y*Math.sin(d)*this.coslat0/c),t=Math.abs(this.coslat0)<i.H0?this.lat0>0?(0,u.A)(this.long0+Math.atan2(e.x,-1*e.y),this.over):(0,u.A)(this.long0+Math.atan2(e.x,e.y),this.over):(0,u.A)(this.long0+Math.atan2(e.x*Math.sin(d),c*this.coslat0*Math.cos(d)-e.y*this.sinlat0*Math.sin(d)),this.over)),e.x=t,e.y=n,e}if(Math.abs(this.coslat0)<=i.H0){if(c<=i.H0)return n=this.lat0,e.x=t=this.long0,e.y=n,e;e.x*=this.con,e.y*=this.con,o=c*this.cons/(2*this.a*this.k0),n=this.con*(0,l.A)(this.e,o),t=this.con*(0,u.A)(this.con*this.long0+Math.atan2(e.x,-1*e.y),this.over)}else a=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,c<=i.H0?s=this.X0:(s=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/c),t=(0,u.A)(this.long0+Math.atan2(e.x*Math.sin(a),c*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)),this.over)),n=-1*(0,l.A)(this.e,Math.tan(.5*(i.sK+s)));return e.x=t,e.y=n,e}var h=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];let m={init:d,forward:f,inverse:p,names:h,ssfn_:c}},9207(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},9284(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},9288(e){e.exports="/* lineFeature fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9305(e){e.exports=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return n*n+i*i+o*o+a*a}},9341(e,t,n){var i=n(8899),o=n(6966),a=function(e){if(!(this instanceof a))return new a(e);var t=n(4692);return e.size=e.size||{x:256,y:256},this._image=null,this._cors=e.crossDomain||null===e.crossDomain?e.crossDomain:"anonymous",o.call(this,e),Object.defineProperty(this,"image",{get:function(){return this._image}}),this.fetch=function(){var e;return this._image||(this._image=new Image(this.right-this.left,this.bottom-this.top),this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1&&(this._image.crossOrigin=this._cors),e=t.Deferred(),this._image.onload=e.resolve,this._image.onerror=e.reject,this._image.src=this._url,e.done((function(){this._fetched=!0}).bind(this)).promise(this)),this},this.fadeIn=function(e){var n=this.fetch(),i=t.Deferred();return t(this._image).css("display","none"),n.done((function(){t(this._image).fadeIn(e,function(){i.resolve()})}).bind(this)),i.promise(this)},this};i(a,o),e.exports=a},9343(e){e.exports="/* quadFeature Color vertex shader */\n\nattribute vec3 vertexPosition;\nuniform float zOffset;\nuniform vec3 vertexColor;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying mediump vec3 iVertexColor;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iVertexColor = vertexColor;\n}\n"},9365(e,t,n){"use strict";let i,o,a,s;function l(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function u(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c(e){let t,n,i;function o(e,i,a=0,s=e.length){if(a<s){if(0!==t(i,i))return s;do{let t=a+s>>>1;0>n(e[t],i)?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=l,n=(t,n)=>l(e(t),n),i=(t,n)=>e(t)-n):(t=e===l||e===u?e:d,n=e,i=e),{left:o,center:function(e,t,n=0,a=e.length){let s=o(e,t,n,a-1);return s>n&&i(e[s-1],t)>-i(e[s],t)?s-1:s},right:function(e,i,o=0,a=e.length){if(o<a){if(0!==t(i,i))return a;do{let t=o+a>>>1;0>=n(e[t],i)?o=t+1:a=t}while(o<a)}return o}}}function d(){return 0}function f(e){return null===e?NaN:+e}n.r(t),n.d(t,{Adder:()=>N,Delaunay:()=>oL,FormatSpecifier:()=>sT,InternMap:()=>L,InternSet:()=>F,Node:()=>dX,Path:()=>iP,Voronoi:()=>oI,ZoomTransform:()=>bz,active:()=>rz,arc:()=>vJ,area:()=>v5,areaRadial:()=>yi,ascending:()=>l,autoType:()=>ar,axisBottom:()=>td,axisLeft:()=>tf,axisRight:()=>tc,axisTop:()=>tu,bin:()=>eA,bisect:()=>v,bisectCenter:()=>g,bisectLeft:()=>m,bisectRight:()=>h,bisector:()=>c,blob:()=>aH,blur:()=>y,blur2:()=>b,blurImage:()=>x,brush:()=>iu,brushSelection:()=>ia,brushX:()=>is,brushY:()=>il,buffer:()=>aK,chord:()=>ix,chordDirected:()=>iA,chordTranspose:()=>iw,cluster:()=>dG,color:()=>nx,contourDensity:()=>oh,contours:()=>oa,count:()=>_,create:()=>vT,creator:()=>tY,cross:()=>M,csv:()=>aQ,csvFormat:()=>o0,csvFormatBody:()=>o1,csvFormatRow:()=>o3,csvFormatRows:()=>o2,csvFormatValue:()=>o4,csvParse:()=>oQ,csvParseRows:()=>o$,cubehelix:()=>i7,cumsum:()=>E,curveBasis:()=>yK,curveBasisClosed:()=>yY,curveBasisOpen:()=>yJ,curveBumpX:()=>yl,curveBumpY:()=>yu,curveBundle:()=>y$,curveCardinal:()=>y2,curveCardinalClosed:()=>y4,curveCardinalOpen:()=>y6,curveCatmullRom:()=>y7,curveCatmullRomClosed:()=>bt,curveCatmullRomOpen:()=>br,curveLinear:()=>v1,curveLinearClosed:()=>bo,curveMonotoneX:()=>bf,curveMonotoneY:()=>bp,curveNatural:()=>bg,curveStep:()=>by,curveStepAfter:()=>bx,curveStepBefore:()=>bb,descending:()=>u,deviation:()=>I,difference:()=>e6,disjoint:()=>e8,dispatch:()=>tv,drag:()=>oW,dragDisable:()=>nn,dragEnable:()=>nr,dsv:()=>aJ,dsvFormat:()=>oZ,easeBack:()=>aV,easeBackIn:()=>aL,easeBackInOut:()=>aV,easeBackOut:()=>aF,easeBounce:()=>aR,easeBounceIn:()=>aN,easeBounceInOut:()=>aB,easeBounceOut:()=>aR,easeCircle:()=>aC,easeCircleIn:()=>aw,easeCircleInOut:()=>aC,easeCircleOut:()=>aA,easeCubic:()=>rj,easeCubicIn:()=>rF,easeCubicInOut:()=>rj,easeCubicOut:()=>rV,easeElastic:()=>aU,easeElasticIn:()=>aG,easeElasticInOut:()=>az,easeElasticOut:()=>aU,easeExp:()=>ax,easeExpIn:()=>ay,easeExpInOut:()=>ax,easeExpOut:()=>ab,easeLinear:()=>ao,easePoly:()=>ad,easePolyIn:()=>au,easePolyInOut:()=>ad,easePolyOut:()=>ac,easeQuad:()=>al,easeQuadIn:()=>aa,easeQuadInOut:()=>al,easeQuadOut:()=>as,easeSin:()=>ag,easeSinIn:()=>ah,easeSinInOut:()=>ag,easeSinOut:()=>am,every:()=>e0,extent:()=>k,fcumsum:()=>B,filter:()=>e2,flatGroup:()=>K,flatRollup:()=>X,forceCenter:()=>a8,forceCollide:()=>sc,forceLink:()=>sp,forceManyBody:()=>sy,forceRadial:()=>sb,forceSimulation:()=>sv,forceX:()=>sx,forceY:()=>sw,format:()=>li,formatDefaultLocale:()=>sk,formatLocale:()=>sI,formatPrefix:()=>lo,formatSpecifier:()=>s_,fsum:()=>R,geoAlbers:()=>da,geoAlbersUsa:()=>ds,geoArea:()=>ly,geoAzimuthalEqualArea:()=>dd,geoAzimuthalEqualAreaRaw:()=>dc,geoAzimuthalEquidistant:()=>dp,geoAzimuthalEquidistantRaw:()=>df,geoBounds:()=>lL,geoCentroid:()=>lY,geoCircle:()=>l6,geoClipAntimeridian:()=>us,geoClipCircle:()=>ul,geoClipExtent:()=>uc,geoClipRectangle:()=>uu,geoConicConformal:()=>db,geoConicConformalRaw:()=>dy,geoConicEqualArea:()=>di,geoConicEqualAreaRaw:()=>dr,geoConicEquidistant:()=>dC,geoConicEquidistantRaw:()=>dA,geoContains:()=>uT,geoDistance:()=>uy,geoEqualEarth:()=>dT,geoEqualEarthRaw:()=>d_,geoEquirectangular:()=>dw,geoEquirectangularRaw:()=>dx,geoGnomonic:()=>dP,geoGnomonicRaw:()=>dO,geoGraticule:()=>uM,geoGraticule10:()=>uE,geoIdentity:()=>dM,geoInterpolate:()=>uD,geoLength:()=>um,geoMercator:()=>dm,geoMercatorRaw:()=>dh,geoNaturalEarth1:()=>dD,geoNaturalEarth1Raw:()=>dE,geoOrthographic:()=>dk,geoOrthographicRaw:()=>dI,geoPath:()=>cJ,geoProjection:()=>de,geoProjectionMutator:()=>dt,geoRotation:()=>l3,geoStereographic:()=>dR,geoStereographicRaw:()=>dN,geoStream:()=>le,geoTransform:()=>cQ,geoTransverseMercator:()=>dL,geoTransverseMercatorRaw:()=>dB,gray:()=>iZ,greatest:()=>eM,greatestIndex:()=>eq,group:()=>W,groupSort:()=>eo,groups:()=>H,hcl:()=>i5,hierarchy:()=>dz,histogram:()=>eA,hsl:()=>nk,html:()=>a5,image:()=>a0,index:()=>J,indexes:()=>Q,interpolate:()=>n5,interpolateArray:()=>nJ,interpolateBasis:()=>nV,interpolateBasisClosed:()=>nj,interpolateBlues:()=>g7,interpolateBrBG:()=>gw,interpolateBuGn:()=>gV,interpolateBuPu:()=>gG,interpolateCividis:()=>vc,interpolateCool:()=>vp,interpolateCubehelix:()=>fH,interpolateCubehelixDefault:()=>vd,interpolateCubehelixLong:()=>fq,interpolateDate:()=>n$,interpolateDiscrete:()=>fI,interpolateGnBu:()=>gz,interpolateGreens:()=>vt,interpolateGreys:()=>vr,interpolateHcl:()=>fU,interpolateHclLong:()=>fz,interpolateHsl:()=>fF,interpolateHslLong:()=>fV,interpolateHue:()=>fk,interpolateInferno:()=>vS,interpolateLab:()=>fj,interpolateMagma:()=>vC,interpolateNumber:()=>n0,interpolateNumberArray:()=>nY,interpolateObject:()=>n1,interpolateOrRd:()=>gH,interpolateOranges:()=>vu,interpolatePRGn:()=>gC,interpolatePiYG:()=>g_,interpolatePlasma:()=>v_,interpolatePuBu:()=>gY,interpolatePuBuGn:()=>gK,interpolatePuOr:()=>gO,interpolatePuRd:()=>gJ,interpolatePurples:()=>vo,interpolateRainbow:()=>vm,interpolateRdBu:()=>gM,interpolateRdGy:()=>gD,interpolateRdPu:()=>g$,interpolateRdYlBu:()=>gk,interpolateRdYlGn:()=>gR,interpolateReds:()=>vs,interpolateRgb:()=>nH,interpolateRgbBasis:()=>nK,interpolateRgbBasisClosed:()=>nX,interpolateRound:()=>fN,interpolateSinebow:()=>vb,interpolateSpectral:()=>gL,interpolateString:()=>n4,interpolateTransformCss:()=>rP,interpolateTransformSvg:()=>rM,interpolateTurbo:()=>vx,interpolateViridis:()=>vA,interpolateWarm:()=>vf,interpolateYlGn:()=>g3,interpolateYlGnBu:()=>g1,interpolateYlOrBr:()=>g5,interpolateYlOrRd:()=>g8,interpolateZoom:()=>fB,interrupt:()=>rC,intersection:()=>e9,interval:()=>bj,isoFormat:()=>bF,isoParse:()=>bV,json:()=>a2,lab:()=>iJ,lch:()=>i4,least:()=>eW,leastIndex:()=>eH,line:()=>v4,lineRadial:()=>yr,link:()=>yp,linkHorizontal:()=>yh,linkRadial:()=>yg,linkVertical:()=>ym,local:()=>vP,map:()=>e3,matcher:()=>tC,max:()=>eC,maxIndex:()=>eS,mean:()=>eR,median:()=>eB,medianIndex:()=>eL,merge:()=>eF,min:()=>e_,minIndex:()=>eT,mode:()=>eV,namespace:()=>tL,namespaces:()=>tB,nice:()=>ex,now:()=>rl,pack:()=>fi,packEnclose:()=>d0,packSiblings:()=>fn,pairs:()=>ej,partition:()=>fc,path:()=>iM,pathRound:()=>iE,permute:()=>et,pie:()=>v9,piecewise:()=>fK,pointRadial:()=>yo,pointer:()=>n8,pointers:()=>vE,polygonArea:()=>fY,polygonCentroid:()=>fZ,polygonContains:()=>f0,polygonHull:()=>f$,polygonLength:()=>f1,precisionFixed:()=>sN,precisionPrefix:()=>sR,precisionRound:()=>sB,quadtree:()=>sn,quantile:()=>eE,quantileIndex:()=>eI,quantileSorted:()=>eD,quantize:()=>fX,quickselect:()=>eO,radialArea:()=>yi,radialLine:()=>yr,randomBates:()=>f9,randomBernoulli:()=>pt,randomBeta:()=>pi,randomBinomial:()=>po,randomCauchy:()=>ps,randomExponential:()=>f7,randomGamma:()=>pr,randomGeometric:()=>pn,randomInt:()=>f4,randomIrwinHall:()=>f8,randomLcg:()=>pd,randomLogNormal:()=>f6,randomLogistic:()=>pl,randomNormal:()=>f5,randomPareto:()=>pe,randomPoisson:()=>pu,randomUniform:()=>f3,randomWeibull:()=>pa,range:()=>eU,rank:()=>ez,reduce:()=>e4,reverse:()=>e5,rgb:()=>nS,ribbon:()=>iG,ribbonArrow:()=>iU,rollup:()=>Y,rollups:()=>Z,scaleBand:()=>pg,scaleDiverging:()=>function e(){var t=pP(gi()(px));return t.copy=function(){return gt(t,e())},pp.apply(t,arguments)},scaleDivergingLog:()=>function e(){var t=pB(gi()).domain([.1,1,10]);return t.copy=function(){return gt(t,e()).base(t.base())},pp.apply(t,arguments)},scaleDivergingPow:()=>go,scaleDivergingSqrt:()=>ga,scaleDivergingSymlog:()=>function e(){var t=pV(gi());return t.copy=function(){return gt(t,e()).constant(t.constant())},pp.apply(t,arguments)},scaleIdentity:()=>function e(t){var n;function i(e){return null==e||isNaN(e*=1)?n:e}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(t=Array.from(e,py),i):t.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,py):[0,1],pP(i)},scaleImplicit:()=>ph,scaleLinear:()=>function e(){var t=pT();return t.copy=function(){return pS(t,e())},pf.apply(t,arguments),pP(t)},scaleLog:()=>function e(){let t=pB(p_()).domain([1,10]);return t.copy=()=>pS(t,e()).base(t.base()),pf.apply(t,arguments),t},scaleOrdinal:()=>pm,scalePoint:()=>pv,scalePow:()=>pW,scaleQuantile:()=>function e(){var t,n=[],i=[],o=[];function a(){var e=0,t=Math.max(1,i.length);for(o=Array(t-1);++e<t;)o[e-1]=eD(n,e/t);return s}function s(e){return null==e||isNaN(e*=1)?t:i[v(o,e)]}return s.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?o[t-1]:n[0],t<o.length?o[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();for(let t of(n=[],e))null==t||isNaN(t*=1)||n.push(t);return n.sort(l),a()},s.range=function(e){return arguments.length?(i=Array.from(e),a()):i.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return o.slice()},s.copy=function(){return e().domain(n).range(i).unknown(t)},pf.apply(s,arguments)},scaleQuantize:()=>function e(){var t,n=0,i=1,o=1,a=[.5],s=[0,1];function l(e){return null!=e&&e<=e?s[v(a,e,0,o)]:t}function u(){var e=-1;for(a=Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*n)/(o+1);return l}return l.domain=function(e){return arguments.length?([n,i]=e,n*=1,i*=1,u()):[n,i]},l.range=function(e){return arguments.length?(o=(s=Array.from(e)).length-1,u()):s.slice()},l.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=o?[a[o-1],i]:[a[t-1],a[t]]},l.unknown=function(e){return arguments.length&&(t=e),l},l.thresholds=function(){return a.slice()},l.copy=function(){return e().domain([n,i]).range(s).unknown(t)},pf.apply(pP(l),arguments)},scaleRadial:()=>function e(){var t,n=pT(),i=[0,1],o=!1;function a(e){var i,a=Math.sign(i=n(e))*Math.sqrt(Math.abs(i));return isNaN(a)?t:o?Math.round(a):a}return a.invert=function(e){return n.invert(pq(e))},a.domain=function(e){return arguments.length?(n.domain(e),a):n.domain()},a.range=function(e){return arguments.length?(n.range((i=Array.from(e,py)).map(pq)),a):i.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(o=!!e,a):o},a.clamp=function(e){return arguments.length?(n.clamp(e),a):n.clamp()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e(n.domain(),i).round(o).clamp(n.clamp()).unknown(t)},pf.apply(a,arguments),pP(a)},scaleSequential:()=>function e(){var t=pP(ge()(px));return t.copy=function(){return gt(t,e())},pp.apply(t,arguments)},scaleSequentialLog:()=>function e(){var t=pB(ge()).domain([1,10]);return t.copy=function(){return gt(t,e()).base(t.base())},pp.apply(t,arguments)},scaleSequentialPow:()=>gn,scaleSequentialQuantile:()=>function e(){var t=[],n=px;function i(e){if(null!=e&&!isNaN(e*=1))return n((v(t,e,1)-1)/(t.length-1))}return i.domain=function(e){if(!arguments.length)return t.slice();for(let n of(t=[],e))null==n||isNaN(n*=1)||t.push(n);return t.sort(l),i},i.interpolator=function(e){return arguments.length?(n=e,i):n},i.range=function(){return t.map((e,i)=>n(i/(t.length-1)))},i.quantiles=function(e){return Array.from({length:e+1},(n,i)=>eE(t,i/e))},i.copy=function(){return e(n).domain(t)},pp.apply(i,arguments)},scaleSequentialSqrt:()=>gr,scaleSequentialSymlog:()=>function e(){var t=pV(ge());return t.copy=function(){return gt(t,e()).constant(t.constant())},pp.apply(t,arguments)},scaleSqrt:()=>pH,scaleSymlog:()=>function e(){var t=pV(p_());return t.copy=function(){return pS(t,e()).constant(t.constant())},pf.apply(t,arguments)},scaleThreshold:()=>function e(){var t,n=[.5],i=[0,1],o=1;function a(e){return null!=e&&e<=e?i[v(n,e,0,o)]:t}return a.domain=function(e){return arguments.length?(o=Math.min((n=Array.from(e)).length,i.length-1),a):n.slice()},a.range=function(e){return arguments.length?(i=Array.from(e),o=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(e){var t=i.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(i).unknown(t)},pf.apply(a,arguments)},scaleTime:()=>m9,scaleUtc:()=>m7,scan:()=>eK,schemeAccent:()=>gu,schemeBlues:()=>g9,schemeBrBG:()=>gx,schemeBuGn:()=>gF,schemeBuPu:()=>gj,schemeCategory10:()=>gl,schemeDark2:()=>gc,schemeGnBu:()=>gU,schemeGreens:()=>ve,schemeGreys:()=>vn,schemeObservable10:()=>gd,schemeOrRd:()=>gW,schemeOranges:()=>vl,schemePRGn:()=>gA,schemePaired:()=>gf,schemePastel1:()=>gp,schemePastel2:()=>gh,schemePiYG:()=>gS,schemePuBu:()=>gX,schemePuBuGn:()=>gq,schemePuOr:()=>gT,schemePuRd:()=>gZ,schemePurples:()=>vi,schemeRdBu:()=>gP,schemeRdGy:()=>gE,schemeRdPu:()=>gQ,schemeRdYlBu:()=>gI,schemeRdYlGn:()=>gN,schemeReds:()=>va,schemeSet1:()=>gm,schemeSet2:()=>gg,schemeSet3:()=>gv,schemeSpectral:()=>gB,schemeTableau10:()=>gy,schemeYlGn:()=>g2,schemeYlGnBu:()=>g0,schemeYlOrBr:()=>g4,schemeYlOrRd:()=>g6,select:()=>t8,selectAll:()=>vD,selection:()=>t6,selector:()=>tb,selectorAll:()=>tA,shuffle:()=>eX,shuffler:()=>eY,some:()=>e1,sort:()=>en,stack:()=>b_,stackOffsetDiverging:()=>bO,stackOffsetExpand:()=>bT,stackOffsetNone:()=>bw,stackOffsetSilhouette:()=>bP,stackOffsetWiggle:()=>bM,stackOrderAppearance:()=>bE,stackOrderAscending:()=>bI,stackOrderDescending:()=>bN,stackOrderInsideOut:()=>bR,stackOrderNone:()=>bA,stackOrderReverse:()=>bB,stratify:()=>fg,style:()=>tV,subset:()=>tn,sum:()=>eZ,superset:()=>te,svg:()=>a6,symbol:()=>yz,symbolAsterisk:()=>yy,symbolCircle:()=>yb,symbolCross:()=>yx,symbolDiamond:()=>yC,symbolDiamond2:()=>yS,symbolPlus:()=>y_,symbolSquare:()=>yT,symbolSquare2:()=>yO,symbolStar:()=>yD,symbolTimes:()=>yj,symbolTriangle:()=>yk,symbolTriangle2:()=>yR,symbolWye:()=>yV,symbolX:()=>yj,symbols:()=>yG,symbolsFill:()=>yG,symbolsStroke:()=>yU,text:()=>aY,thresholdFreedmanDiaconis:()=>ek,thresholdScott:()=>eN,thresholdSturges:()=>ew,tickFormat:()=>pO,tickIncrement:()=>ey,tickStep:()=>eb,ticks:()=>ev,timeDay:()=>p9,timeDays:()=>p7,timeFormat:()=>es,timeFormatDefaultLocale:()=>m4,timeFormatLocale:()=>hZ,timeFriday:()=>hc,timeFridays:()=>hv,timeHour:()=>p4,timeHours:()=>p5,timeInterval:()=>pY,timeMillisecond:()=>pZ,timeMilliseconds:()=>pJ,timeMinute:()=>p0,timeMinutes:()=>p1,timeMonday:()=>ha,timeMondays:()=>hp,timeMonth:()=>hN,timeMonths:()=>hR,timeParse:()=>el,timeSaturday:()=>hd,timeSaturdays:()=>hy,timeSecond:()=>pQ,timeSeconds:()=>p$,timeSunday:()=>ho,timeSundays:()=>hf,timeThursday:()=>hu,timeThursdays:()=>hg,timeTickInterval:()=>hq,timeTicks:()=>hH,timeTuesday:()=>hs,timeTuesdays:()=>hh,timeWednesday:()=>hl,timeWednesdays:()=>hm,timeWeek:()=>ho,timeWeeks:()=>hf,timeYear:()=>hF,timeYears:()=>hV,timeout:()=>rg,timer:()=>rd,timerFlush:()=>rf,transition:()=>rB,transpose:()=>eJ,tree:()=>fC,treemap:()=>fP,treemapBinary:()=>fM,treemapDice:()=>fu,treemapResquarify:()=>fD,treemapSlice:()=>fS,treemapSliceDice:()=>fE,treemapSquarify:()=>fO,tsv:()=>a$,tsvFormat:()=>o9,tsvFormatBody:()=>o7,tsvFormatRow:()=>at,tsvFormatRows:()=>ae,tsvFormatValue:()=>an,tsvParse:()=>o6,tsvParseRows:()=>o8,union:()=>tr,unixDay:()=>hn,unixDays:()=>hr,utcDay:()=>he,utcDays:()=>ht,utcFormat:()=>eu,utcFriday:()=>h_,utcFridays:()=>hI,utcHour:()=>p6,utcHours:()=>p8,utcMillisecond:()=>pZ,utcMilliseconds:()=>pJ,utcMinute:()=>p2,utcMinutes:()=>p3,utcMonday:()=>hw,utcMondays:()=>hP,utcMonth:()=>hB,utcMonths:()=>hL,utcParse:()=>ec,utcSaturday:()=>hT,utcSaturdays:()=>hk,utcSecond:()=>pQ,utcSeconds:()=>p$,utcSunday:()=>hx,utcSundays:()=>hO,utcThursday:()=>hS,utcThursdays:()=>hD,utcTickInterval:()=>hW,utcTicks:()=>hz,utcTuesday:()=>hA,utcTuesdays:()=>hM,utcWednesday:()=>hC,utcWednesdays:()=>hE,utcWeek:()=>hx,utcWeeks:()=>hO,utcYear:()=>hj,utcYears:()=>hG,variance:()=>D,window:()=>tF,xml:()=>a4,zip:()=>e$,zoom:()=>b0,zoomIdentity:()=>bW,zoomTransform:()=>bH});let p=c(l),h=p.right,m=p.left,g=c(f).center,v=h;function y(e,t){if(!((t*=1)>=0))throw RangeError("invalid r");let n=e.length;if(!((n=Math.floor(n))>=0))throw RangeError("invalid length");if(!n||!t)return e;let i=S(t),o=e.slice();return i(e,o,0,n,1),i(o,e,0,n,1),i(e,o,0,n,1),e}let b=w(S),x=w(function(e){let t=S(e);return(e,n,i,o,a)=>{t(e,n,(i<<=2)+0,(o<<=2)+0,a<<=2),t(e,n,i+1,o+1,a),t(e,n,i+2,o+2,a),t(e,n,i+3,o+3,a)}});function w(e){return function(t,n,i=n){if(!((n*=1)>=0))throw RangeError("invalid rx");if(!((i*=1)>=0))throw RangeError("invalid ry");let{data:o,width:a,height:s}=t;if(!((a=Math.floor(a))>=0))throw RangeError("invalid width");if(!((s=Math.floor(void 0!==s?s:o.length/a))>=0))throw RangeError("invalid height");if(!a||!s||!n&&!i)return t;let l=n&&e(n),u=i&&e(i),c=o.slice();return l&&u?(A(l,c,o,a,s),A(l,o,c,a,s),A(l,c,o,a,s),C(u,o,c,a,s),C(u,c,o,a,s),C(u,o,c,a,s)):l?(A(l,o,c,a,s),A(l,c,o,a,s),A(l,o,c,a,s)):u&&(C(u,o,c,a,s),C(u,c,o,a,s),C(u,o,c,a,s)),t}}function A(e,t,n,i,o){for(let a=0,s=i*o;a<s;)e(t,n,a,a+=i,1)}function C(e,t,n,i,o){for(let a=0,s=i*o;a<i;++a)e(t,n,a,a+s,i)}function S(e){let t=Math.floor(e);if(t===e){var n;let t;return t=2*(n=e)+1,(e,i,o,a,s)=>{if(!((a-=s)>=o))return;let l=n*i[o],u=s*n;for(let e=o,t=o+u;e<t;e+=s)l+=i[Math.min(a,e)];for(let n=o,c=a;n<=c;n+=s)l+=i[Math.min(a,n+u)],e[n]=l/t,l-=i[Math.max(o,n-u)]}}let i=e-t,o=2*e+1;return(e,n,a,s,l)=>{if(!((s-=l)>=a))return;let u=t*n[a],c=l*t,d=c+l;for(let e=a,t=a+c;e<t;e+=l)u+=n[Math.min(s,e)];for(let t=a,f=s;t<=f;t+=l)u+=n[Math.min(s,t+c)],e[t]=(u+i*(n[Math.max(a,t-d)]+n[Math.min(s,t+d)]))/o,u-=n[Math.max(a,t-c)]}}function _(e,t){let n=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&++n;else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o*=1)>=o&&++n}return n}function T(e){return 0|e.length}function O(e){return!(e>0)}function P(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function M(...e){var t;let n="function"==typeof e[e.length-1]&&(t=e.pop(),e=>t(...e)),i=(e=e.map(P)).map(T),o=e.length-1,a=Array(o+1).fill(0),s=[];if(o<0||i.some(O))return s;for(;;){s.push(a.map((t,n)=>e[n][t]));let t=o;for(;++a[t]===i[t];){if(0===t)return n?s.map(n):s;a[t--]=0}}}function E(e,t){var n=0,i=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:o=>n+=+t(o,i++,e)||0)}function D(e,t){let n,i=0,o=0,a=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(n=t-o,o+=n/++i,a+=n*(t-o));else{let s=-1;for(let l of e)null!=(l=t(l,++s,e))&&(l*=1)>=l&&(n=l-o,o+=n/++i,a+=n*(l-o))}if(i>1)return a/(i-1)}function I(e,t){let n=D(e,t);return n?Math.sqrt(n):n}function k(e,t){let n,i;if(void 0===t)for(let t of e)null!=t&&(void 0===n?t>=t&&(n=i=t):(n>t&&(n=t),i<t&&(i=t)));else{let o=-1;for(let a of e)null!=(a=t(a,++o,e))&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}class N{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let o=t[i],a=e+o,s=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);s&&(t[n++]=s),e=a}return t[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,t=this._n,n,i,o,a=0;if(t>0){for(a=e[--t];t>0&&(a=(n=a)+(i=e[--t]),!(o=i-(a-n))););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(n=a+(i=2*o),i==n-a&&(a=n))}return a}}function R(e,t){let n=new N;if(void 0===t)for(let t of e)(t*=1)&&n.add(t);else{let i=-1;for(let o of e)(o=+t(o,++i,e))&&n.add(o)}return+n}function B(e,t){let n=new N,i=-1;return Float64Array.from(e,void 0===t?e=>n.add(+e||0):o=>n.add(+t(o,++i,e)||0))}class L extends Map{constructor(e,t=U){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(V(this,e))}has(e){return super.has(V(this,e))}set(e,t){return super.set(j(this,e),t)}delete(e){return super.delete(G(this,e))}}class F extends Set{constructor(e,t=U){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const t of e)this.add(t)}has(e){return super.has(V(this,e))}add(e){return super.add(j(this,e))}delete(e){return super.delete(G(this,e))}}function V({_intern:e,_key:t},n){let i=t(n);return e.has(i)?e.get(i):n}function j({_intern:e,_key:t},n){let i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function G({_intern:e,_key:t},n){let i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function U(e){return null!==e&&"object"==typeof e?e.valueOf():e}function z(e){return e}function W(e,...t){return ee(e,z,z,t)}function H(e,...t){return ee(e,Array.from,z,t)}function q(e,t){for(let n=1,i=t.length;n<i;++n)e=e.flatMap(e=>e.pop().map(([t,n])=>[...e,t,n]));return e}function K(e,...t){return q(H(e,...t),t)}function X(e,t,...n){return q(Z(e,t,...n),n)}function Y(e,t,...n){return ee(e,z,t,n)}function Z(e,t,...n){return ee(e,Array.from,t,n)}function J(e,...t){return ee(e,z,$,t)}function Q(e,...t){return ee(e,Array.from,$,t)}function $(e){if(1!==e.length)throw Error("duplicate key");return e[0]}function ee(e,t,n,i){return function e(o,a){if(a>=i.length)return n(o);let s=new L,l=i[a++],u=-1;for(let e of o){let t=l(e,++u,o),n=s.get(t);n?n.push(e):s.set(t,[e])}for(let[t,n]of s)s.set(t,e(n,a));return t(s)}(e,0)}function et(e,t){return Array.from(t,t=>e[t])}function en(e,...t){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&2!==n.length||t.length>1){let i=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),i.sort((e,n)=>{for(let i of t){let t=ei(i[e],i[n]);if(t)return t}})):(n=e.map(n),i.sort((e,t)=>ei(n[e],n[t]))),et(e,i)}return e.sort(er(n))}function er(e=l){if(e===l)return ei;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,n)=>{let i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}function ei(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function eo(e,t,n){return(2!==t.length?en(Y(e,t,n),([e,t],[n,i])=>l(t,i)||l(e,n)):en(W(e,n),([e,n],[i,o])=>t(n,o)||l(e,i))).map(([e])=>e)}var ea,es,el,eu,ec,ed=Array.prototype,ef=ed.slice;ed.map;let ep=Math.sqrt(50),eh=Math.sqrt(10),em=Math.sqrt(2);function eg(e,t,n){let i,o,a,s=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(s)),u=s/Math.pow(10,l),c=u>=ep?10:u>=eh?5:u>=em?2:1;return(l<0?(i=Math.round(e*(a=Math.pow(10,-l)/c)),o=Math.round(t*a),i/a<e&&++i,o/a>t&&--o,a=-a):(i=Math.round(e/(a=Math.pow(10,l)*c)),o=Math.round(t/a),i*a<e&&++i,o*a>t&&--o),o<i&&.5<=n&&n<2)?eg(e,t,2*n):[i,o,a]}function ev(e,t,n){if(t*=1,e*=1,!((n*=1)>0))return[];if(e===t)return[e];let i=t<e,[o,a,s]=i?eg(t,e,n):eg(e,t,n);if(!(a>=o))return[];let l=a-o+1,u=Array(l);if(i)if(s<0)for(let e=0;e<l;++e)u[e]=-((a-e)/s);else for(let e=0;e<l;++e)u[e]=(a-e)*s;else if(s<0)for(let e=0;e<l;++e)u[e]=-((o+e)/s);else for(let e=0;e<l;++e)u[e]=(o+e)*s;return u}function ey(e,t,n){return eg(e*=1,t*=1,n*=1)[2]}function eb(e,t,n){t*=1,e*=1,n*=1;let i=t<e,o=i?ey(t,e,n):ey(e,t,n);return(i?-1:1)*(o<0?-(1/o):o)}function ex(e,t,n){let i;for(;;){let o=ey(e,t,n);if(o===i||0===o||!isFinite(o))return[e,t];o>0?(e=Math.floor(e/o)*o,t=Math.ceil(t/o)*o):o<0&&(e=Math.ceil(e*o)/o,t=Math.floor(t*o)/o),i=o}}function ew(e){return Math.max(1,Math.ceil(Math.log(_(e))/Math.LN2)+1)}function eA(){var e=z,t=k,n=ew;function i(i){Array.isArray(i)||(i=Array.from(i));var o,a,s,l=i.length,u=Array(l);for(o=0;o<l;++o)u[o]=e(i[o],o,i);var c=t(u),d=c[0],f=c[1],p=n(u,d,f);if(!Array.isArray(p)){let e=f,n=+p;if(t===k&&([d,f]=ex(d,f,n)),(p=ev(d,f,n))[0]<=d&&(s=ey(d,f,n)),p[p.length-1]>=f)if(e>=f&&t===k){let e=ey(d,f,n);isFinite(e)&&(e>0?f=(Math.floor(f/e)+1)*e:e<0&&(f=-((Math.ceil(-(f*e))+1)/e)))}else p.pop()}for(var h=p.length,m=0,g=h;p[m]<=d;)++m;for(;p[g-1]>f;)--g;(m||g<h)&&(p=p.slice(m,g),h=g-m);var y,b=Array(h+1);for(o=0;o<=h;++o)(y=b[o]=[]).x0=o>0?p[o-1]:d,y.x1=o<h?p[o]:f;if(isFinite(s)){if(s>0)for(o=0;o<l;++o)null!=(a=u[o])&&d<=a&&a<=f&&b[Math.min(h,Math.floor((a-d)/s))].push(i[o]);else if(s<0){for(o=0;o<l;++o)if(null!=(a=u[o])&&d<=a&&a<=f){let e=Math.floor((d-a)*s);b[Math.min(h,e+(p[e]<=a))].push(i[o])}}}else for(o=0;o<l;++o)null!=(a=u[o])&&d<=a&&a<=f&&b[v(p,a,0,h)].push(i[o]);return b}return i.value=function(t){return arguments.length?(e="function"==typeof t?t:()=>t,i):e},i.domain=function(e){var n;return arguments.length?(t="function"==typeof e?e:(n=[e[0],e[1]],()=>n),i):t},i.thresholds=function(e){var t;return arguments.length?(n="function"==typeof e?e:(t=Array.isArray(e)?ef.call(e):e,()=>t),i):n},i}function eC(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function eS(e,t){let n,i=-1,o=-1;if(void 0===t)for(let t of e)++o,null!=t&&(n<t||void 0===n&&t>=t)&&(n=t,i=o);else for(let a of e)null!=(a=t(a,++o,e))&&(n<a||void 0===n&&a>=a)&&(n=a,i=o);return i}function e_(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function eT(e,t){let n,i=-1,o=-1;if(void 0===t)for(let t of e)++o,null!=t&&(n>t||void 0===n&&t>=t)&&(n=t,i=o);else for(let a of e)null!=(a=t(a,++o,e))&&(n>a||void 0===n&&a>=a)&&(n=a,i=o);return i}function eO(e,t,n=0,i=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(o=void 0===o?ei:er(o);i>n;){if(i-n>600){let a=i-n+1,s=t-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1),d=Math.max(n,Math.floor(t-s*u/a+c)),f=Math.min(i,Math.floor(t+(a-s)*u/a+c));eO(e,t,d,f,o)}let a=e[t],s=n,l=i;for(eP(e,n,t),o(e[i],a)>0&&eP(e,n,i);s<l;){for(eP(e,s,l),++s,--l;0>o(e[s],a);)++s;for(;o(e[l],a)>0;)--l}0===o(e[n],a)?eP(e,n,l):eP(e,++l,i),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function eP(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}function eM(e,t=l){let n,i=!1;if(1===t.length){let o;for(let a of e){let e=t(a);(i?l(e,o)>0:0===l(e,e))&&(n=a,o=e,i=!0)}}else for(let o of e)(i?t(o,n)>0:0===t(o,o))&&(n=o,i=!0);return n}function eE(e,t,n){if(!(!(i=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(yield t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i*=1)>=i&&(yield i)}}(e,n))).length)||isNaN(t*=1))){if(t<=0||i<2)return e_(e);if(t>=1)return eC(e);var i,o=(i-1)*t,a=Math.floor(o),s=eC(eO(e,a).subarray(0,a+1));return s+(e_(e.subarray(a+1))-s)*(o-a)}}function eD(e,t,n=f){if(!(!(i=e.length)||isNaN(t*=1))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,o=(i-1)*t,a=Math.floor(o),s=+n(e[a],a,e);return s+(n(e[a+1],a+1,e)-s)*(o-a)}}function eI(e,t,n=f){if(!isNaN(t*=1)){if(i=Float64Array.from(e,(t,i)=>f(n(e[i],i,e))),t<=0)return eT(i);if(t>=1)return eS(i);var i,o=Uint32Array.from(e,(e,t)=>t),a=i.length-1,s=Math.floor(a*t);return eO(o,s,0,a,(e,t)=>ei(i[e],i[t])),(s=eM(o.subarray(0,s+1),e=>i[e]))>=0?s:-1}}function ek(e,t,n){let i=_(e),o=eE(e,.75)-eE(e,.25);return i&&o?Math.ceil((n-t)/(2*o*Math.pow(i,-1/3))):1}function eN(e,t,n){let i=_(e),o=I(e);return i&&o?Math.ceil((n-t)*Math.cbrt(i)/(3.49*o)):1}function eR(e,t){let n=0,i=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(++n,i+=t);else{let o=-1;for(let a of e)null!=(a=t(a,++o,e))&&(a*=1)>=a&&(++n,i+=a)}if(n)return i/n}function eB(e,t){return eE(e,.5,t)}function eL(e,t){return eI(e,.5,t)}function eF(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function eV(e,t){let n,i=new L;if(void 0===t)for(let t of e)null!=t&&t>=t&&i.set(t,(i.get(t)||0)+1);else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&o>=o&&i.set(o,(i.get(o)||0)+1)}let o=0;for(let[e,t]of i)t>o&&(o=t,n=e);return n}function ej(e,t=eG){let n,i=[],o=!1;for(let a of e)o&&i.push(t(n,a)),n=a,o=!0;return i}function eG(e,t){return[e,t]}function eU(e,t,n){e*=1,t*=1,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var i=-1,o=0|Math.max(0,Math.ceil((t-e)/n)),a=Array(o);++i<o;)a[i]=e+i*n;return a}function ez(e,t=l){let n,i;if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");let o=Array.from(e),a=new Float64Array(o.length);2!==t.length&&(o=o.map(t),t=l);let s=(e,n)=>t(o[e],o[n]);return(e=Uint32Array.from(o,(e,t)=>t)).sort(t===l?(e,t)=>ei(o[e],o[t]):er(s)),e.forEach((e,t)=>{let o=s(e,void 0===n?e:n);o>=0?((void 0===n||o>0)&&(n=e,i=t),a[e]=i):a[e]=NaN}),a}function eW(e,t=l){let n,i=!1;if(1===t.length){let o;for(let a of e){let e=t(a);(i?0>l(e,o):0===l(e,e))&&(n=a,o=e,i=!0)}}else for(let o of e)(i?0>t(o,n):0===t(o,o))&&(n=o,i=!0);return n}function eH(e,t=l){let n;if(1===t.length)return eT(e,t);let i=-1,o=-1;for(let a of e)++o,(i<0?0===t(a,a):0>t(a,n))&&(n=a,i=o);return i}function eq(e,t=l){let n;if(1===t.length)return eS(e,t);let i=-1,o=-1;for(let a of e)++o,(i<0?0===t(a,a):t(a,n)>0)&&(n=a,i=o);return i}function eK(e,t){let n=eH(e,t);return n<0?void 0:n}let eX=eY(Math.random);function eY(e){return function(t,n=0,i=t.length){let o=i-(n*=1);for(;o;){let i=e()*o--|0,a=t[o+n];t[o+n]=t[i+n],t[i+n]=a}return t}}function eZ(e,t){let n=0;if(void 0===t)for(let t of e)(t*=1)&&(n+=t);else{let i=-1;for(let o of e)(o=+t(o,++i,e))&&(n+=o)}return n}function eJ(e){if(!(o=e.length))return[];for(var t=-1,n=e_(e,eQ),i=Array(n);++t<n;)for(var o,a=-1,s=i[t]=Array(o);++a<o;)s[a]=e[a][t];return i}function eQ(e){return e.length}function e$(){return eJ(arguments)}function e0(e,t){if("function"!=typeof t)throw TypeError("test is not a function");let n=-1;for(let i of e)if(!t(i,++n,e))return!1;return!0}function e1(e,t){if("function"!=typeof t)throw TypeError("test is not a function");let n=-1;for(let i of e)if(t(i,++n,e))return!0;return!1}function e2(e,t){if("function"!=typeof t)throw TypeError("test is not a function");let n=[],i=-1;for(let o of e)t(o,++i,e)&&n.push(o);return n}function e3(e,t){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");if("function"!=typeof t)throw TypeError("mapper is not a function");return Array.from(e,(n,i)=>t(n,i,e))}function e4(e,t,n){if("function"!=typeof t)throw TypeError("reducer is not a function");let i=e[Symbol.iterator](),o,a,s=-1;if(arguments.length<3){if({done:o,value:n}=i.next(),o)return;++s}for(;{done:o,value:a}=i.next(),!o;)n=t(n,a,++s,e);return n}function e5(e){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");return Array.from(e).reverse()}function e6(e,...t){for(let n of(e=new F(e),t))for(let t of n)e.delete(t);return e}function e8(e,t){let n=t[Symbol.iterator](),i=new F;for(let t of e){let e,o;if(i.has(t))return!1;for(;({value:e,done:o}=n.next())&&!o;){if(Object.is(t,e))return!1;i.add(e)}}return!0}function e9(e,...t){e=new F(e),t=t.map(e7);r:for(let n of e)for(let i of t)if(!i.has(n)){e.delete(n);continue r}return e}function e7(e){return e instanceof F?e:new F(e)}function te(e,t){let n=e[Symbol.iterator](),i=new Set;for(let e of t){let t,o,a=tt(e);if(!i.has(a))for(;{value:t,done:o}=n.next();){if(o)return!1;let e=tt(t);if(i.add(e),Object.is(a,e))break}}return!0}function tt(e){return null!==e&&"object"==typeof e?e.valueOf():e}function tn(e,t){return te(t,e)}function tr(...e){let t=new F;for(let n of e)for(let e of n)t.add(e);return t}function ti(e){return e}function to(e){return"translate("+e+",0)"}function ta(e){return"translate(0,"+e+")"}function ts(){return!this.__axis}function tl(e,t){var n=[],i=null,o=null,a=6,s=6,l=3,u="u">typeof window&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,d=4===e||2===e?"x":"y",f=1===e||3===e?to:ta;function p(p){var h=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,m=null==o?t.tickFormat?t.tickFormat.apply(t,n):ti:o,g=Math.max(a,0)+l,v=t.range(),y=+v[0]+u,b=+v[v.length-1]+u,x=(t.bandwidth?function(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}:function(e){return t=>+e(t)})(t.copy(),u),w=p.selection?p.selection():p,A=w.selectAll(".domain").data([null]),C=w.selectAll(".tick").data(h,t).order(),S=C.exit(),_=C.enter().append("g").attr("class","tick"),T=C.select("line"),O=C.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(_),T=T.merge(_.append("line").attr("stroke","currentColor").attr(d+"2",c*a)),O=O.merge(_.append("text").attr("fill","currentColor").attr(d,c*g).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),p!==w&&(A=A.transition(p),C=C.transition(p),T=T.transition(p),O=O.transition(p),S=S.transition(p).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=x(e))?f(e+u):this.getAttribute("transform")}),_.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return f((t&&isFinite(t=t(e))?t:x(e))+u)})),S.remove(),A.attr("d",4===e||2===e?s?"M"+c*s+","+y+"H"+u+"V"+b+"H"+c*s:"M"+u+","+y+"V"+b:s?"M"+y+","+c*s+"V"+u+"H"+b+"V"+c*s:"M"+y+","+u+"H"+b),C.attr("opacity",1).attr("transform",function(e){return f(x(e)+u)}),T.attr(d+"2",c*a),O.attr(d,c*g).text(m),w.filter(ts).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),w.each(function(){this.__axis=x})}return p.scale=function(e){return arguments.length?(t=e,p):t},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),p):n.slice()},p.tickValues=function(e){return arguments.length?(i=null==e?null:Array.from(e),p):i&&i.slice()},p.tickFormat=function(e){return arguments.length?(o=e,p):o},p.tickSize=function(e){return arguments.length?(a=s=+e,p):a},p.tickSizeInner=function(e){return arguments.length?(a=+e,p):a},p.tickSizeOuter=function(e){return arguments.length?(s=+e,p):s},p.tickPadding=function(e){return arguments.length?(l=+e,p):l},p.offset=function(e){return arguments.length?(u=+e,p):u},p}function tu(e){return tl(1,e)}function tc(e){return tl(2,e)}function td(e){return tl(3,e)}function tf(e){return tl(4,e)}var tp={value:()=>{}};function th(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new tm(i)}function tm(e){this._=e}function tg(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=tp,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}tm.prototype=th.prototype={constructor:tm,on:function(e,t){var n,i=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((n=(e=o[a]).type)&&(n=function(e,t){for(var n,i=0,o=e.length;i<o;++i)if((n=e[i]).name===t)return n.value}(i[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=tg(i[n],e.name,t);else if(null==t)for(n in i)i[n]=tg(i[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tm(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,o=Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(t,n)}};let tv=th;function ty(){}function tb(e){return null==e?ty:function(){return this.querySelector(e)}}function tx(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function tw(){return[]}function tA(e){return null==e?tw:function(){return this.querySelectorAll(e)}}function tC(e){return function(){return this.matches(e)}}function tS(e){return function(t){return t.matches(e)}}var t_=Array.prototype.find;function tT(){return this.firstElementChild}var tO=Array.prototype.filter;function tP(){return Array.from(this.children)}function tM(e){return Array(e.length)}function tE(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function tD(e,t,n,i,o,a){for(var s,l=0,u=t.length,c=a.length;l<c;++l)(s=t[l])?(s.__data__=a[l],i[l]=s):n[l]=new tE(e,a[l]);for(;l<u;++l)(s=t[l])&&(o[l]=s)}function tI(e,t,n,i,o,a,s){var l,u,c,d=new Map,f=t.length,p=a.length,h=Array(f);for(l=0;l<f;++l)(u=t[l])&&(h[l]=c=s.call(u,u.__data__,l,t)+"",d.has(c)?o[l]=u:d.set(c,u));for(l=0;l<p;++l)c=s.call(e,a[l],l,a)+"",(u=d.get(c))?(i[l]=u,u.__data__=a[l],d.delete(c)):n[l]=new tE(e,a[l]);for(l=0;l<f;++l)(u=t[l])&&d.get(h[l])===u&&(o[l]=u)}function tk(e){return e.__data__}function tN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}tE.prototype={constructor:tE,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var tR="http://www.w3.org/1999/xhtml";let tB={svg:"http://www.w3.org/2000/svg",xhtml:tR,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tL(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),tB.hasOwnProperty(t)?{space:tB[t],local:e}:e}function tF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tV(e,t){return e.style.getPropertyValue(t)||tF(e).getComputedStyle(e,null).getPropertyValue(t)}function tj(e){return e.trim().split(/^|\s+/)}function tG(e){return e.classList||new tU(e)}function tU(e){this._node=e,this._names=tj(e.getAttribute("class")||"")}function tz(e,t){for(var n=tG(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function tW(e,t){for(var n=tG(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function tH(){this.textContent=""}function tq(){this.innerHTML=""}function tK(){this.nextSibling&&this.parentNode.appendChild(this)}function tX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tY(e){var t=tL(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tR&&t.documentElement.namespaceURI===tR?t.createElement(e):t.createElementNS(n,e)}})(t)}function tZ(){return null}function tJ(){var e=this.parentNode;e&&e.removeChild(this)}function tQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t$(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t0(e){return function(){var t=this.__on;if(t){for(var n,i=0,o=-1,a=t.length;i<a;++i)(n=t[i],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function t1(e,t,n){return function(){var i,o=this.__on,a=function(e){t.call(this,e,this.__data__)};if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function t2(e,t,n){var i=tF(e),o=i.CustomEvent;"function"==typeof o?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}tU.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var t3=[null];function t4(e,t){this._groups=e,this._parents=t}function t5(){return new t4([[document.documentElement]],t3)}t4.prototype=t5.prototype={constructor:t4,select:function(e){"function"!=typeof e&&(e=tb(e));for(var t=this._groups,n=t.length,i=Array(n),o=0;o<n;++o)for(var a,s,l=t[o],u=l.length,c=i[o]=Array(u),d=0;d<u;++d)(a=l[d])&&(s=e.call(a,a.__data__,d,l))&&("__data__"in a&&(s.__data__=a.__data__),c[d]=s);return new t4(i,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){return tx(t.apply(this,arguments))}}else e=tA(e);for(var n=this._groups,i=n.length,o=[],a=[],s=0;s<i;++s)for(var l,u=n[s],c=u.length,d=0;d<c;++d)(l=u[d])&&(o.push(e.call(l,l.__data__,d,u)),a.push(l));return new t4(o,a)},selectChild:function(e){var t;return this.select(null==e?tT:(t="function"==typeof e?e:tS(e),function(){return t_.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?tP:(t="function"==typeof e?e:tS(e),function(){return tO.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=tC(e));for(var t=this._groups,n=t.length,i=Array(n),o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=i[o]=[],c=0;c<l;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&u.push(a);return new t4(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,tk);var n=t?tI:tD,i=this._parents,o=this._groups;"function"!=typeof e&&(b=e,e=function(){return b});for(var a=o.length,s=Array(a),l=Array(a),u=Array(a),c=0;c<a;++c){var d=i[c],f=o[c],p=f.length,h="object"==typeof(y=e.call(d,d&&d.__data__,c,i))&&"length"in y?y:Array.from(y),m=h.length,g=l[c]=Array(m),v=s[c]=Array(m);n(d,f,g,v,u[c]=Array(p),h,t);for(var y,b,x,w,A=0,C=0;A<m;++A)if(x=g[A]){for(A>=C&&(C=A+1);!(w=v[C])&&++C<m;);x._next=w||null}}return(s=new t4(s,i))._enter=l,s._exit=u,s},enter:function(){return new t4(this._enter||this._groups.map(tM),this._parents)},exit:function(){return new t4(this._exit||this._groups.map(tM),this._parents)},join:function(e,t,n){var i=this.enter(),o=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),i&&o?i.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,a=i.length,s=Math.min(o,a),l=Array(o),u=0;u<s;++u)for(var c,d=n[u],f=i[u],p=d.length,h=l[u]=Array(p),m=0;m<p;++m)(c=d[m]||f[m])&&(h[m]=c);for(;u<o;++u)l[u]=n[u];return new t4(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,o=e[t],a=o.length-1,s=o[a];--a>=0;)(i=o[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=tN);for(var n=this._groups,i=n.length,o=Array(i),a=0;a<i;++a){for(var s,l=n[a],u=l.length,c=o[a]=Array(u),d=0;d<u;++d)(s=l[d])&&(c[d]=s);c.sort(t)}return new t4(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o,a=t[n],s=0,l=a.length;s<l;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this},attr:function(e,t){var n=tL(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):tV(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=tj(e+"");if(arguments.length<2){for(var i=tG(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?tz:tW)(this,e)}}:t?function(e){return function(){tz(this,e)}}:function(e){return function(){tW(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?tH:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?tq:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(tK)},lower:function(){return this.each(tX)},append:function(e){var t="function"==typeof e?e:tY(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:tY(e),i=null==t?tZ:"function"==typeof t?t:tb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(tJ)},clone:function(e){return this.select(e?t$:tQ)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,o,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),s=a.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var u,c=0,d=l.length;c<d;++c)for(i=0,u=l[c];i<s;++i)if((o=a[i]).type===u.type&&o.name===u.name)return u.value}return}for(i=0,l=t?t1:t0;i<s;++i)this.each(l(a[i],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return t2(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return t2(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,o=e[t],a=0,s=o.length;a<s;++a)(i=o[a])&&(yield i)}};let t6=t5;function t8(e){return"string"==typeof e?new t4([[document.querySelector(e)]],[document.documentElement]):new t4([[e]],t3)}let t9={passive:!1},t7={capture:!0,passive:!1};function ne(e){e.stopImmediatePropagation()}function nt(e){e.preventDefault(),e.stopImmediatePropagation()}function nn(e){var t=e.document.documentElement,n=t8(e).on("dragstart.drag",nt,t7);"onselectstart"in t?n.on("selectstart.drag",nt,t7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nr(e,t){var n=e.document.documentElement,i=t8(e).on("dragstart.drag",null);t&&(i.on("click.drag",nt,t7),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ni(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function no(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function na(){}var ns="\\s*([+-]?\\d+)\\s*",nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nc=/^#([0-9a-f]{3,8})$/,nd=RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),nf=RegExp(`^rgb\\(${nu},${nu},${nu}\\)$`),np=RegExp(`^rgba\\(${ns},${ns},${ns},${nl}\\)$`),nh=RegExp(`^rgba\\(${nu},${nu},${nu},${nl}\\)$`),nm=RegExp(`^hsl\\(${nl},${nu},${nu}\\)$`),ng=RegExp(`^hsla\\(${nl},${nu},${nu},${nl}\\)$`),nv={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function ny(){return this.rgb().formatHex()}function nb(){return this.rgb().formatRgb()}function nx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nw(t):3===n?new n_(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?nA(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?nA(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=nd.exec(e))?new n_(t[1],t[2],t[3],1):(t=nf.exec(e))?new n_(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=np.exec(e))?nA(t[1],t[2],t[3],t[4]):(t=nh.exec(e))?nA(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=nm.exec(e))?nD(t[1],t[2]/100,t[3]/100,1):(t=ng.exec(e))?nD(t[1],t[2]/100,t[3]/100,t[4]):nv.hasOwnProperty(e)?nw(nv[e]):"transparent"===e?new n_(NaN,NaN,NaN,0):null}function nw(e){return new n_(e>>16&255,e>>8&255,255&e,1)}function nA(e,t,n,i){return i<=0&&(e=t=n=NaN),new n_(e,t,n,i)}function nC(e){return(e instanceof na||(e=nx(e)),e)?new n_((e=e.rgb()).r,e.g,e.b,e.opacity):new n_}function nS(e,t,n,i){return 1==arguments.length?nC(e):new n_(e,t,n,null==i?1:i)}function n_(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function nT(){return`#${nE(this.r)}${nE(this.g)}${nE(this.b)}`}function nO(){let e=nP(this.opacity);return`${1===e?"rgb(":"rgba("}${nM(this.r)}, ${nM(this.g)}, ${nM(this.b)}${1===e?")":`, ${e})`}`}function nP(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nM(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nE(e){return((e=nM(e))<16?"0":"")+e.toString(16)}function nD(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nN(e,t,n,i)}function nI(e){if(e instanceof nN)return new nN(e.h,e.s,e.l,e.opacity);if(e instanceof na||(e=nx(e)),!e)return new nN;if(e instanceof nN)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,l=a-o,u=(a+o)/2;return l?(s=t===a?(n-i)/l+(n<i)*6:n===a?(i-t)/l+2:(t-n)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new nN(s,l,u,e.opacity)}function nk(e,t,n,i){return 1==arguments.length?nI(e):new nN(e,t,n,null==i?1:i)}function nN(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function nR(e){return(e=(e||0)%360)<0?e+360:e}function nB(e){return Math.max(0,Math.min(1,e||0))}function nL(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function nF(e,t,n,i,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*o)/6}function nV(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,l=i<t-1?e[i+2]:2*a-o;return nF((n-i/t)*t,s,o,a,l)}}function nj(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),o=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return nF((n-i/t)*t,o,a,s,l)}}ni(na,nx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ny,formatHex:ny,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nI(this).formatHsl()},formatRgb:nb,toString:nb}),ni(n_,nS,no(na,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new n_(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new n_(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new n_(nM(this.r),nM(this.g),nM(this.b),nP(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nT,formatHex:nT,formatHex8:function(){return`#${nE(this.r)}${nE(this.g)}${nE(this.b)}${nE((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:nO,toString:nO})),ni(nN,nk,no(na,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new nN(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new nN(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new n_(nL(e>=240?e-240:e+120,o,i),nL(e,o,i),nL(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new nN(nR(this.h),nB(this.s),nB(this.l),nP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=nP(this.opacity);return`${1===e?"hsl(":"hsla("}${nR(this.h)}, ${100*nB(this.s)}%, ${100*nB(this.l)}%${1===e?")":`, ${e})`}`}}));let nG=e=>()=>e;function nU(e,t){return function(n){return e+n*t}}function nz(e,t){var n=t-e;return n?nU(e,n>180||n<-180?n-360*Math.round(n/360):n):nG(isNaN(e)?t:e)}function nW(e,t){var n=t-e;return n?nU(e,n):nG(isNaN(e)?t:e)}let nH=function e(t){var n,i=1==(n=+t)?nW:function(e,t){var i,o,a;return t-e?(i=e,o=t,i=Math.pow(i,a=n),o=Math.pow(o,a)-i,a=1/a,function(e){return Math.pow(i+e*o,a)}):nG(isNaN(e)?t:e)};function o(e,t){var n=i((e=nS(e)).r,(t=nS(t)).r),o=i(e.g,t.g),a=i(e.b,t.b),s=nW(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return o.gamma=e,o}(1);function nq(e){return function(t){var n,i,o=t.length,a=Array(o),s=Array(o),l=Array(o);for(n=0;n<o;++n)i=nS(t[n]),a[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}var nK=nq(nV),nX=nq(nj);function nY(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<i;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}}function nZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nJ(e,t){return(nZ(t)?nY:nQ)(e,t)}function nQ(e,t){var n,i=t?t.length:0,o=e?Math.min(i,e.length):0,a=Array(o),s=Array(i);for(n=0;n<o;++n)a[n]=n5(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<o;++n)s[n]=a[n](e);return s}}function n$(e,t){var n=new Date;return e*=1,t*=1,function(i){return n.setTime(e*(1-i)+t*i),n}}function n0(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}function n1(e,t){var n,i={},o={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?i[n]=n5(e[n],t[n]):o[n]=t[n];return function(e){for(n in i)o[n]=i[n](e);return o}}var n2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,n3=RegExp(n2.source,"g");function n4(e,t){var n,i,o,a,s,l=n2.lastIndex=n3.lastIndex=0,u=-1,c=[],d=[];for(e+="",t+="";(o=n2.exec(e))&&(a=n3.exec(t));)(s=a.index)>l&&(s=t.slice(l,s),c[u]?c[u]+=s:c[++u]=s),(o=o[0])===(a=a[0])?c[u]?c[u]+=a:c[++u]=a:(c[++u]=null,d.push({i:u,x:n0(o,a)})),l=n3.lastIndex;return l<t.length&&(s=t.slice(l),c[u]?c[u]+=s:c[++u]=s),c.length<2?d[0]?(n=d[0].x,function(e){return n(e)+""}):(i=t,function(){return i}):(t=d.length,function(e){for(var n,i=0;i<t;++i)c[(n=d[i]).i]=n.x(e);return c.join("")})}function n5(e,t){var n,i=typeof t;return null==t||"boolean"===i?nG(t):("number"===i?n0:"string"===i?(n=nx(t))?(t=n,nH):n4:t instanceof nx?nH:t instanceof Date?n$:nZ(t)?nY:Array.isArray(t)?nQ:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?n1:n0)(e,t)}function n6(e){let t;for(;t=e.sourceEvent;)e=t;return e}function n8(e,t){if(e=n6(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var n9,n7,re=0,rt=0,rn=0,rr=0,ri=0,ro=0,ra="object"==typeof performance&&performance.now?performance:Date,rs="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rl(){return ri||(rs(ru),ri=ra.now()+ro)}function ru(){ri=0}function rc(){this._call=this._time=this._next=null}function rd(e,t,n){var i=new rc;return i.restart(e,t,n),i}function rf(){rl(),++re;for(var e,t=n9;t;)(e=ri-t._time)>=0&&t._call.call(void 0,e),t=t._next;--re}function rp(){ri=(rr=ra.now())+ro,re=rt=0;try{rf()}finally{re=0,function(){for(var e,t,n=n9,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:n9=t);n7=e,rm(i)}(),ri=0}}function rh(){var e=ra.now(),t=e-rr;t>1e3&&(ro-=t,rr=e)}function rm(e){!re&&(rt&&(rt=clearTimeout(rt)),e-ri>24?(e<1/0&&(rt=setTimeout(rp,e-ra.now()-ro)),rn&&(rn=clearInterval(rn))):(rn||(rr=ra.now(),rn=setInterval(rh,1e3)),re=1,rs(rp)))}function rg(e,t,n){var i=new rc;return t=null==t?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,n),i}rc.prototype=rd.prototype={constructor:rc,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?rl():+n)+(null==t?0:+t),this._next||n7===this||(n7?n7._next=this:n9=this,n7=this),this._call=e,this._time=n,rm()},stop:function(){this._call&&(this._call=null,this._time=1/0,rm())}};var rv=tv("start","end","cancel","interrupt"),ry=[];function rb(e,t,n,i,o,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,o=e.__transition;function a(u){var c,d,f,p;if(1!==n.state)return l();for(c in o)if((p=o[c]).name===n.name){if(3===p.state)return rg(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(rg(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(c=0,n.state=3,i=Array(f=n.tween.length),d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,s=i.length;++a<s;)i[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=rd(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:o,on:rv,tween:ry,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function rx(e,t){var n=rA(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function rw(e,t){var n=rA(e,t);if(n.state>3)throw Error("too late; already running");return n}function rA(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function rC(e,t){var n,i,o,a=e.__transition,s=!0;if(a){for(o in t=null==t?null:t+"",a){if((n=a[o]).name!==t){s=!1;continue}i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]}s&&delete e.__transition}}var rS=180/Math.PI,r_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rT(e,t,n,i,o,a){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*rS,skewX:Math.atan(u)*rS,scaleX:s,scaleY:l}}function rO(e,t,n,i){function o(e){return e.length?e.pop()+" ":""}return function(a,s){var l,u,c,d,f=[],p=[];return a=e(a),s=e(s),!function(e,i,o,a,s,l){if(e!==o||i!==a){var u=s.push("translate(",null,t,null,n);l.push({i:u-4,x:n0(e,o)},{i:u-2,x:n0(i,a)})}else(o||a)&&s.push("translate("+o+t+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,f,p),l=a.rotate,u=s.rotate,l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(o(f)+"rotate(",null,i)-2,x:n0(l,u)})):u&&f.push(o(f)+"rotate("+u+i),c=a.skewX,d=s.skewX,c!==d?p.push({i:f.push(o(f)+"skewX(",null,i)-2,x:n0(c,d)}):d&&f.push(o(f)+"skewX("+d+i),!function(e,t,n,i,a,s){if(e!==n||t!==i){var l=a.push(o(a)+"scale(",null,",",null,")");s.push({i:l-4,x:n0(e,n)},{i:l-2,x:n0(t,i)})}else(1!==n||1!==i)&&a.push(o(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,f,p),a=s=null,function(e){for(var t,n=-1,i=p.length;++n<i;)f[(t=p[n]).i]=t.x(e);return f.join("")}}}var rP=rO(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?r_:rT(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),rM=rO(function(e){return null==e?r_:(lt||(lt=document.createElementNS("http://www.w3.org/2000/svg","g")),lt.setAttribute("transform",e),e=lt.transform.baseVal.consolidate())?rT((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):r_},", ",")",")");function rE(e,t,n){var i=e._id;return e.each(function(){var e=rw(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return rA(e,i).value[t]}}function rD(e,t){var n;return("number"==typeof t?n0:t instanceof nx?nH:(n=nx(t))?(t=n,nH):n4)(e,t)}var rI=t6.prototype.constructor;function rk(e){return function(){this.style.removeProperty(e)}}var rN=0;function rR(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function rB(e){return t6().transition(e)}var rL=t6.prototype;function rF(e){return e*e*e}function rV(e){return--e*e*e+1}function rj(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}rR.prototype=rB.prototype={constructor:rR,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tb(e));for(var i=this._groups,o=i.length,a=Array(o),s=0;s<o;++s)for(var l,u,c=i[s],d=c.length,f=a[s]=Array(d),p=0;p<d;++p)(l=c[p])&&(u=e.call(l,l.__data__,p,c))&&("__data__"in l&&(u.__data__=l.__data__),f[p]=u,rb(f[p],t,n,p,f,rA(l,n)));return new rR(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tA(e));for(var i=this._groups,o=i.length,a=[],s=[],l=0;l<o;++l)for(var u,c=i[l],d=c.length,f=0;f<d;++f)if(u=c[f]){for(var p,h=e.call(u,u.__data__,f,c),m=rA(u,n),g=0,v=h.length;g<v;++g)(p=h[g])&&rb(p,t,n,g,h,m);a.push(h),s.push(u)}return new rR(a,s,t,n)},selectChild:rL.selectChild,selectChildren:rL.selectChildren,filter:function(e){"function"!=typeof e&&(e=tC(e));for(var t=this._groups,n=t.length,i=Array(n),o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=i[o]=[],c=0;c<l;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&u.push(a);return new rR(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,i=t.length,o=n.length,a=Math.min(i,o),s=Array(i),l=0;l<a;++l)for(var u,c=t[l],d=n[l],f=c.length,p=s[l]=Array(f),h=0;h<f;++h)(u=c[h]||d[h])&&(p[h]=u);for(;l<i;++l)s[l]=t[l];return new rR(s,this._parents,this._name,this._id)},selection:function(){return new rI(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++rN,i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],u=l.length,c=0;c<u;++c)if(s=l[c]){var d=rA(s,t);rb(s,e,n,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new rR(i,this._parents,e,n)},call:rL.call,nodes:rL.nodes,node:rL.node,size:rL.size,empty:rL.empty,each:rL.each,on:function(e,t){var n,i,o,a,s,l,u=this._id;return arguments.length<2?rA(this.node(),u).on.on(e):this.each((n=u,i=e,o=t,l=(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?rx:rw,function(){var e=l(this,n),t=e.on;t!==a&&(s=(a=t).copy()).on(i,o),e.on=s}))},attr:function(e,t){var n=tL(e),i="transform"===n?rM:rD;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var i,o,a;return function(){var s,l,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:s===i&&l===o?a:(o=l,a=t(i=s,u))}}:function(e,t,n){var i,o,a;return function(){var s,l,u=n(this);return null==u?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=u+"")?null:s===i&&l===o?a:(o=l,a=t(i=s,u))}})(n,i,rE(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var i,o,a=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===i?o:o=t(i=s,n)}}:function(e,t,n){var i,o,a=n+"";return function(){var s=this.getAttribute(e);return s===a?null:s===i?o:o=t(i=s,n)}})(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var i=tL(e);return this.tween(n,(i.local?function(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(i,t))},style:function(e,t,n){var i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_="transform"==(e+="")?rP:rD;return null==t?this.styleTween(e,(i=e,function(){var e=tV(this,i),t=(this.style.removeProperty(i),tV(this,i));return e===t?null:e===o&&t===a?s:s=_(o=e,a=t)})).on("end.style."+e,rk(e)):"function"==typeof t?this.styleTween(e,(l=e,u=rE(this,"style."+e,t),function(){var e=tV(this,l),t=u(this),n=t+"";return null==t&&(this.style.removeProperty(l),n=t=tV(this,l)),e===n?null:e===c&&n===d?f:(d=n,f=_(c=e,t))})).each((p=this._id,x="end."+(b="style."+(h=e)),function(){var e=rw(this,p),t=e.on,n=null==e.value[b]?y||(y=rk(h)):void 0;(t!==m||v!==n)&&(g=(m=t).copy()).on(x,v=n),e.on=g})):this.styleTween(e,(w=e,S=t+"",function(){var e=tV(this,w);return e===S?null:e===A?C:C=_(A=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw Error();return this.tween(i,function(e,t,n){var i,o;function a(){var a=t.apply(this,arguments);return a!==o&&(i=(o=a)&&function(t){this.style.setProperty(e,a.call(this,t),n)}),i}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=rE(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){this.textContent=i.call(this,e)}),t}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,o=rA(this.node(),n).tween,a=0,s=o.length;a<s;++a)if((i=o[a]).name===e)return i.value;return null}return this.each((null==t?function(e,t){var n,i;return function(){var o=rw(this,e),a=o.tween;if(a!==n){i=n=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}}o.tween=i}}:function(e,t,n){var i,o;if("function"!=typeof n)throw Error();return function(){var a=rw(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var l={name:t,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===t){o[u]=l;break}u===c&&o.push(l)}a.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){rx(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){rx(this,e).delay=t}})(t,e)):rA(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){rw(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){rw(this,e).duration=t}})(t,e)):rA(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){rw(this,e).ease=t}}(t,e)):rA(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();rw(this,t).ease=n}))},end:function(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(a,s){var l={value:s},u={value:function(){0==--o&&a()}};n.each(function(){var n=rw(this,i),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t}),0===o&&a()})},[Symbol.iterator]:rL[Symbol.iterator]};var rG={time:null,delay:0,duration:250,ease:rj};t6.prototype.interrupt=function(e){return this.each(function(){rC(this,e)})},t6.prototype.transition=function(e){var t,n;e instanceof rR?(t=e._id,e=e._name):(t=++rN,(n=rG).time=rl(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],u=l.length,c=0;c<u;++c)(s=l[c])&&rb(s,e,t,c,l,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(s,t));return new rR(i,this._parents,e,t)};var rU=[null];function rz(e,t){var n,i,o=e.__transition;if(o){for(i in t=null==t?null:t+"",o)if((n=o[i]).state>1&&n.name===t)return new rR([[e]],rU,t,+i)}return null}let rW=e=>()=>e;function rH(e,{sourceEvent:t,target:n,selection:i,mode:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function rq(e){e.preventDefault(),e.stopImmediatePropagation()}var rK={name:"drag"},rX={name:"space"},rY={name:"handle"},rZ={name:"center"};let{abs:rJ,max:rQ,min:r$}=Math;function r0(e){return[+e[0],+e[1]]}function r1(e){return[r0(e[0]),r0(e[1])]}var r2={name:"x",handles:["w","e"].map(ie),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},r3={name:"y",handles:["n","s"].map(ie),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},r4={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ie),input:function(e){return null==e?null:r1(e)},output:function(e){return e}},r5={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},r6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},r8={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},r9={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},r7={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ie(e){return{type:e}}function it(e){return!e.ctrlKey&&!e.button}function ir(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ii(){return navigator.maxTouchPoints||"ontouchstart"in this}function io(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ia(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function is(){return ic(r2)}function il(){return ic(r3)}function iu(){return ic(r4)}function ic(e){var t,n=ir,i=it,o=ii,a=!0,s=tv("start","brush","end"),l=6;function u(t){var n=t.property("__brush",g).selectAll(".overlay").data([ie("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",r5.overlay).merge(n).each(function(){var e=io(this).extent;t8(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([ie("selection")]).enter().append("rect").attr("class","selection").attr("cursor",r5.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return r5[e.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(o).on("touchstart.brush",p).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=t8(this),t=io(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-l/2:t[0][0]-l/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-l/2:t[0][1]-l/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+l:l}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+l:l})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(e,t,n){var i=e.__brush.emitter;return!i||n&&i.clean?new f(e,t,n):i}function f(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function p(n){if((!t||n.touches)&&i.apply(this,arguments)){var o,s,l,u,f,p,h,m,g,v,y,b=this,x=n.target.__data__.type,w=(a&&n.metaKey?x="overlay":x)==="selection"?rK:a&&n.altKey?rZ:rY,A=e===r3?null:r9[x],C=e===r2?null:r7[x],S=io(b),_=S.extent,T=S.selection,O=_[0][0],P=_[0][1],M=_[1][0],E=_[1][1],D=0,I=0,k=A&&C&&a&&n.shiftKey,N=Array.from(n.touches||[n],e=>{let t=e.identifier;return(e=n8(e,b)).point0=e.slice(),e.identifier=t,e});rC(b);var R=d(b,arguments,!0).beforestart();if("overlay"===x){T&&(g=!0);let t=[N[0],N[1]||N[0]];S.selection=T=[[o=e===r3?O:r$(t[0][0],t[1][0]),l=e===r2?P:r$(t[0][1],t[1][1])],[f=e===r3?M:rQ(t[0][0],t[1][0]),h=e===r2?E:rQ(t[0][1],t[1][1])]],N.length>1&&j(n)}else o=T[0][0],l=T[0][1],f=T[1][0],h=T[1][1];s=o,u=l,p=f,m=h;var B=t8(b).attr("pointer-events","none"),L=B.selectAll(".overlay").attr("cursor",r5[x]);if(n.touches)R.moved=V,R.ended=G;else{var F=t8(n.view).on("mousemove.brush",V,!0).on("mouseup.brush",G,!0);a&&F.on("keydown.brush",function(e){switch(e.keyCode){case 16:k=A&&C;break;case 18:w===rY&&(A&&(f=p-D*A,o=s+D*A),C&&(h=m-I*C,l=u+I*C),w=rZ,j(e));break;case 32:(w===rY||w===rZ)&&(A<0?f=p-D:A>0&&(o=s-D),C<0?h=m-I:C>0&&(l=u-I),w=rX,L.attr("cursor",r5.selection),j(e));break;default:return}rq(e)},!0).on("keyup.brush",function(e){switch(e.keyCode){case 16:k&&(v=y=k=!1,j(e));break;case 18:w===rZ&&(A<0?f=p:A>0&&(o=s),C<0?h=m:C>0&&(l=u),w=rY,j(e));break;case 32:w===rX&&(e.altKey?(A&&(f=p-D*A,o=s+D*A),C&&(h=m-I*C,l=u+I*C),w=rZ):(A<0?f=p:A>0&&(o=s),C<0?h=m:C>0&&(l=u),w=rY),L.attr("cursor",r5[x]),j(e));break;default:return}rq(e)},!0),nn(n.view)}c.call(b),R.start(n,w.name)}function V(e){for(let t of e.changedTouches||[e])for(let e of N)e.identifier===t.identifier&&(e.cur=n8(t,b));if(k&&!v&&!y&&1===N.length){let e=N[0];rJ(e.cur[0]-e[0])>rJ(e.cur[1]-e[1])?y=!0:v=!0}for(let e of N)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);g=!0,rq(e),j(e)}function j(e){var t;let n=N[0],i=n.point0;switch(D=n[0]-i[0],I=n[1]-i[1],w){case rX:case rK:A&&(D=rQ(O-o,r$(M-f,D)),s=o+D,p=f+D),C&&(I=rQ(P-l,r$(E-h,I)),u=l+I,m=h+I);break;case rY:N[1]?(A&&(s=rQ(O,r$(M,N[0][0])),p=rQ(O,r$(M,N[1][0])),A=1),C&&(u=rQ(P,r$(E,N[0][1])),m=rQ(P,r$(E,N[1][1])),C=1)):(A<0?(D=rQ(O-o,r$(M-o,D)),s=o+D,p=f):A>0&&(D=rQ(O-f,r$(M-f,D)),s=o,p=f+D),C<0?(I=rQ(P-l,r$(E-l,I)),u=l+I,m=h):C>0&&(I=rQ(P-h,r$(E-h,I)),u=l,m=h+I));break;case rZ:A&&(s=rQ(O,r$(M,o-D*A)),p=rQ(O,r$(M,f+D*A))),C&&(u=rQ(P,r$(E,l-I*C)),m=rQ(P,r$(E,h+I*C)))}p<s&&(A*=-1,t=o,o=f,f=t,t=s,s=p,p=t,x in r6&&L.attr("cursor",r5[x=r6[x]])),m<u&&(C*=-1,t=l,l=h,h=t,t=u,u=m,m=t,x in r8&&L.attr("cursor",r5[x=r8[x]])),S.selection&&(T=S.selection),v&&(s=T[0][0],p=T[1][0]),y&&(u=T[0][1],m=T[1][1]),(T[0][0]!==s||T[0][1]!==u||T[1][0]!==p||T[1][1]!==m)&&(S.selection=[[s,u],[p,m]],c.call(b),R.brush(e,w.name))}function G(e){var n;if(e.stopImmediatePropagation(),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500)}else nr(e.view,g),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),L.attr("cursor",r5.overlay),S.selection&&(T=S.selection),((n=T)[0][0]===n[1][0]||n[0][1]===n[1][1])&&(S.selection=null,c.call(b)),R.end(e,w.name)}}function h(e){d(this,arguments).moved(e)}function m(e){d(this,arguments).ended(e)}function g(){var t=this.__brush||{selection:null};return t.extent=r1(n.apply(this,arguments)),t.dim=e,t}return u.move=function(t,n,i){t.tween?t.on("start.brush",function(e){d(this,arguments).beforestart().start(e)}).on("interrupt.brush end.brush",function(e){d(this,arguments).end(e)}).tween("brush",function(){var t=this,i=t.__brush,o=d(t,arguments),a=i.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),l=n5(a,s);function u(e){i.selection=1===e&&null===s?null:l(e),c.call(t),o.brush()}return null!==a&&null!==s?u:u(1)}):t.each(function(){var t=arguments,o=this.__brush,a=e.input("function"==typeof n?n.apply(this,t):n,o.extent),s=d(this,t).beforestart();rC(this),o.selection=null===a?null:a,c.call(this),s.start(i).brush(i).end(i)})},u.clear=function(e,t){u.move(e,null,t)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0==--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,i){var o=t8(this.that).datum();s.call(t,this.that,new rH(t,{sourceEvent:n,target:u,selection:e.output(this.state.selection),mode:i,dispatch:s}),o)}},u.extent=function(e){return arguments.length?(n="function"==typeof e?e:rW(r1(e)),u):n},u.filter=function(e){return arguments.length?(i="function"==typeof e?e:rW(!!e),u):i},u.touchable=function(e){return arguments.length?(o="function"==typeof e?e:rW(!!e),u):o},u.handleSize=function(e){return arguments.length?(l=+e,u):l},u.keyModifiers=function(e){return arguments.length?(a=!!e,u):a},u.on=function(){var e=s.on.apply(s,arguments);return e===s?u:e},u}var id=Math.abs,ip=Math.cos,ih=Math.sin,im=Math.PI,ig=im/2,iv=2*im,iy=Math.max;function ib(e,t){return Array.from({length:t-e},(t,n)=>e+n)}function ix(){return iC(!1,!1)}function iw(){return iC(!1,!0)}function iA(){return iC(!0,!1)}function iC(e,t){var n=0,i=null,o=null,a=null;function s(s){var l,u=s.length,c=Array(u),d=ib(0,u),f=Array(u*u),p=Array(u),h=0;s=Float64Array.from({length:u*u},t?(e,t)=>s[t%u][t/u|0]:(e,t)=>s[t/u|0][t%u]);for(let t=0;t<u;++t){let n=0;for(let i=0;i<u;++i)n+=s[t*u+i]+e*s[i*u+t];h+=c[t]=n}l=(h=iy(0,iv-n*u)/h)?n:iv/u;{let t=0;for(let n of(i&&d.sort((e,t)=>i(c[e],c[t])),d)){let i=t;if(e){let e=ib(~u+1,u).filter(e=>e<0?s[~e*u+n]:s[n*u+e]);for(let i of(o&&e.sort((e,t)=>o(e<0?-s[~e*u+n]:s[n*u+e],t<0?-s[~t*u+n]:s[n*u+t])),e))i<0?(f[~i*u+n]||(f[~i*u+n]={source:null,target:null})).target={index:n,startAngle:t,endAngle:t+=s[~i*u+n]*h,value:s[~i*u+n]}:(f[n*u+i]||(f[n*u+i]={source:null,target:null})).source={index:n,startAngle:t,endAngle:t+=s[n*u+i]*h,value:s[n*u+i]};p[n]={index:n,startAngle:i,endAngle:t,value:c[n]}}else{let e=ib(0,u).filter(e=>s[n*u+e]||s[e*u+n]);for(let i of(o&&e.sort((e,t)=>o(s[n*u+e],s[n*u+t])),e)){let e;if(n<i?(e=f[n*u+i]||(f[n*u+i]={source:null,target:null})).source={index:n,startAngle:t,endAngle:t+=s[n*u+i]*h,value:s[n*u+i]}:((e=f[i*u+n]||(f[i*u+n]={source:null,target:null})).target={index:n,startAngle:t,endAngle:t+=s[n*u+i]*h,value:s[n*u+i]},n===i&&(e.source=e.target)),e.source&&e.target&&e.source.value<e.target.value){let t=e.source;e.source=e.target,e.target=t}}p[n]={index:n,startAngle:i,endAngle:t,value:c[n]}}t+=l}}return(f=Object.values(f)).groups=p,a?f.sort(a):f}return s.padAngle=function(e){return arguments.length?(n=iy(0,e),s):n},s.sortGroups=function(e){return arguments.length?(i=e,s):i},s.sortSubgroups=function(e){return arguments.length?(o=e,s):o},s.sortChords=function(e){return arguments.length?(null==e?a=null:(a=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=e,s):a&&a._},s}let iS=Math.PI,i_=2*iS,iT=i_-1e-6;function iO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class iP{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?iO:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return iO;let n=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,o,a){this._append`C${+e},${+t},${+n},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,t,n,i,o){if(e*=1,t*=1,n*=1,i*=1,(o*=1)<0)throw Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=n-e,u=i-t,c=a-e,d=s-t,f=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(f>1e-6)if(Math.abs(d*l-u*c)>1e-6&&o){let p=n-a,h=i-s,m=l*l+u*u,g=Math.sqrt(m),v=Math.sqrt(f),y=o*Math.tan((iS-Math.acos((m+f-(p*p+h*h))/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>1e-6&&this._append`L${e+b*c},${t+b*d}`,this._append`A${o},${o},0,0,${+(d*p>c*h)},${this._x1=e+x*l},${this._y1=t+x*u}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,n,i,o,a){if(e*=1,t*=1,n*=1,a=!!a,n<0)throw Error(`negative radius: ${n}`);let s=n*Math.cos(i),l=n*Math.sin(i),u=e+s,c=t+l,d=1^a,f=a?i-o:o-i;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%i_+i_),f>iT?this._append`A${n},${n},0,1,${d},${e-s},${t-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=c}`:f>1e-6&&this._append`A${n},${n},0,${+(f>=iS)},${d},${this._x1=e+n*Math.cos(o)},${this._y1=t+n*Math.sin(o)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n*=1}v${+i}h${-n}Z`}toString(){return this._}}function iM(){return new iP}function iE(e=3){return new iP(+e)}iM.prototype=iP.prototype;var iD=Array.prototype.slice;function iI(e){return function(){return e}}function ik(e){return e.source}function iN(e){return e.target}function iR(e){return e.radius}function iB(e){return e.startAngle}function iL(e){return e.endAngle}function iF(){return 0}function iV(){return 10}function ij(e){var t=ik,n=iN,i=iR,o=iR,a=iB,s=iL,l=iF,u=null;function c(){var c,d=t.apply(this,arguments),f=n.apply(this,arguments),p=l.apply(this,arguments)/2,h=iD.call(arguments),m=+i.apply(this,(h[0]=d,h)),g=a.apply(this,h)-ig,v=s.apply(this,h)-ig,y=+o.apply(this,(h[0]=f,h)),b=a.apply(this,h)-ig,x=s.apply(this,h)-ig;if(u||(u=c=iM()),p>1e-12&&(id(v-g)>2*p+1e-12?v>g?(g+=p,v-=p):(g-=p,v+=p):g=v=(g+v)/2,id(x-b)>2*p+1e-12?x>b?(b+=p,x-=p):(b-=p,x+=p):b=x=(b+x)/2),u.moveTo(m*ip(g),m*ih(g)),u.arc(0,0,m,g,v),g!==b||v!==x)if(e){var w=+e.apply(this,arguments),A=y-w,C=(b+x)/2;u.quadraticCurveTo(0,0,A*ip(b),A*ih(b)),u.lineTo(y*ip(C),y*ih(C)),u.lineTo(A*ip(x),A*ih(x))}else u.quadraticCurveTo(0,0,y*ip(b),y*ih(b)),u.arc(0,0,y,b,x);if(u.quadraticCurveTo(0,0,m*ip(g),m*ih(g)),u.closePath(),c)return u=null,c+""||null}return e&&(c.headRadius=function(t){return arguments.length?(e="function"==typeof t?t:iI(+t),c):e}),c.radius=function(e){return arguments.length?(i=o="function"==typeof e?e:iI(+e),c):i},c.sourceRadius=function(e){return arguments.length?(i="function"==typeof e?e:iI(+e),c):i},c.targetRadius=function(e){return arguments.length?(o="function"==typeof e?e:iI(+e),c):o},c.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:iI(+e),c):a},c.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:iI(+e),c):s},c.padAngle=function(e){return arguments.length?(l="function"==typeof e?e:iI(+e),c):l},c.source=function(e){return arguments.length?(t=e,c):t},c.target=function(e){return arguments.length?(n=e,c):n},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function iG(){return ij()}function iU(){return ij(iV)}let iz=Math.PI/180,iW=180/Math.PI,iH=4/29,iq=6/29,iK=6/29*3*(6/29),iX=6/29*(6/29)*(6/29);function iY(e){if(e instanceof iQ)return new iQ(e.l,e.a,e.b,e.opacity);if(e instanceof i6)return i8(e);e instanceof n_||(e=nC(e));var t,n,i=i2(e.r),o=i2(e.g),a=i2(e.b),s=i$((.2225045*i+.7168786*o+.0606169*a)/1);return i===o&&o===a?t=n=s:(t=i$((.4360747*i+.3850649*o+.1430804*a)/.96422),n=i$((.0139322*i+.0971045*o+.7141733*a)/.82521)),new iQ(116*s-16,500*(t-s),200*(s-n),e.opacity)}function iZ(e,t){return new iQ(e,0,0,null==t?1:t)}function iJ(e,t,n,i){return 1==arguments.length?iY(e):new iQ(e,t,n,null==i?1:i)}function iQ(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function i$(e){return e>iX?Math.pow(e,1/3):e/iK+iH}function i0(e){return e>iq?e*e*e:iK*(e-iH)}function i1(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function i2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function i3(e){if(e instanceof i6)return new i6(e.h,e.c,e.l,e.opacity);if(e instanceof iQ||(e=iY(e)),0===e.a&&0===e.b)return new i6(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*iW;return new i6(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function i4(e,t,n,i){return 1==arguments.length?i3(e):new i6(n,t,e,null==i?1:i)}function i5(e,t,n,i){return 1==arguments.length?i3(e):new i6(e,t,n,null==i?1:i)}function i6(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function i8(e){if(isNaN(e.h))return new iQ(e.l,0,0,e.opacity);var t=e.h*iz;return new iQ(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ni(iQ,iJ,no(na,{brighter(e){return new iQ(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new iQ(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=.96422*i0(t),new n_(i1(3.1338561*t-1.6168667*(e=+i0(e))-.4906146*(n=.82521*i0(n))),i1(-.9787684*t+1.9161415*e+.033454*n),i1(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),ni(i6,i5,no(na,{brighter(e){return new i6(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new i6(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return i8(this).rgb()}}));var i9=-1.78277*.29227-.1347134789;function i7(e,t,n,i){return 1==arguments.length?function(e){if(e instanceof oe)return new oe(e.h,e.s,e.l,e.opacity);e instanceof n_||(e=nC(e));var t=e.r/255,n=e.g/255,i=e.b/255,o=(i9*i+-1.7884503806*t-3.5172982438*n)/(i9+-1.7884503806-3.5172982438),a=i-o,s=-((1.97294*(n-o)- -.29227*a)/.90649),l=Math.sqrt(s*s+a*a)/(1.97294*o*(1-o)),u=l?Math.atan2(s,a)*iW-120:NaN;return new oe(u<0?u+360:u,l,o,e.opacity)}(e):new oe(e,t,n,null==i?1:i)}function oe(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ni(oe,i7,no(na,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new oe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new oe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*iz,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),o=Math.sin(e);return new n_(255*(t+n*(-.14861*i+1.78277*o)),255*(t+n*(-.29227*i+-.90649*o)),255*(t+1.97294*i*n),this.opacity)}}));var ot=Array.prototype.slice;function on(e,t){return e-t}let or=e=>()=>e;function oi(){}var oo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function oa(){var e=1,t=1,n=ew,i=l;function o(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(on);else{let n=k(e,os);for(t=ev(...ex(n[0],n[1],t),t);t[t.length-1]>=n[1];)t.pop();for(;t[1]<n[0];)t.shift()}return t.map(t=>a(e,t))}function a(n,o){let a=null==o?NaN:+o;if(isNaN(a))throw Error(`invalid value: ${o}`);var l=[],u=[];return function(n,i,o){var a,l,u,c,d,f,p=[],h=[];for(a=l=-1,oo[(c=ol(n[0],i))<<1].forEach(m);++a<e-1;)oo[(u=c)|(c=ol(n[a+1],i))<<1].forEach(m);for(oo[0|c].forEach(m);++l<t-1;){for(a=-1,oo[(c=ol(n[l*e+e],i))<<1|(d=ol(n[l*e],i))<<2].forEach(m);++a<e-1;)u=c,c=ol(n[l*e+e+a+1],i),f=d,oo[u|c<<1|(d=ol(n[l*e+a+1],i))<<2|f<<3].forEach(m);oo[c|d<<3].forEach(m)}for(a=-1,oo[(d=n[l*e]>=i)<<2].forEach(m);++a<e-1;)f=d,oo[(d=ol(n[l*e+a+1],i))<<2|f<<3].forEach(m);function m(e){var t,n,i=[e[0][0]+a,e[0][1]+l],u=[e[1][0]+a,e[1][1]+l],c=s(i),d=s(u);(t=h[c])?(n=p[d])?(delete h[t.end],delete p[n.start],t===n?(t.ring.push(u),o(t.ring)):p[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=d]=t):(t=p[d])?(n=h[c])?(delete p[t.start],delete h[n.end],t===n?(t.ring.push(u),o(t.ring)):p[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete p[t.start],t.ring.unshift(i),p[t.start=c]=t):p[c]=h[d]={start:c,end:d,ring:[i,u]}}oo[d<<3].forEach(m)}(n,a,function(e){i(e,n,a),function(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(e)>0?l.push([e]):u.push(e)}),u.forEach(function(e){for(var t,n=0,i=l.length;n<i;++n)if(-1!==function(e,t){for(var n,i=-1,o=t.length;++i<o;)if(n=function(e,t){for(var n=t[0],i=t[1],o=-1,a=0,s=e.length,l=s-1;a<s;l=a++){var u=e[a],c=u[0],d=u[1],f=e[l],p=f[0],h=f[1];if(function(e,t,n){var i,o,a,s,l,u,c;return o=e,a=t,s=n,(a[0]-o[0])*(s[1]-o[1])==(s[0]-o[0])*(a[1]-o[1])&&(l=e[i=+(e[0]===t[0])],u=n[i],c=t[i],l<=u&&u<=c||c<=u&&u<=l)}(u,f,t))return 0;d>i!=h>i&&n<(p-c)*(i-d)/(h-d)+c&&(o=-o)}return o}(e,t[i]))return n;return 0}((t=l[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:o,coordinates:l}}function s(t){return 2*t[0]+t[1]*(e+1)*4}function l(n,i,o){n.forEach(function(n){var a=n[0],s=n[1],l=0|a,u=0|s,c=ou(i[u*e+l]);a>0&&a<e&&l===a&&(n[0]=oc(a,ou(i[u*e+l-1]),c,o)),s>0&&s<t&&u===s&&(n[1]=oc(s,ou(i[(u-1)*e+l]),c,o))})}return o.contour=a,o.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),a=Math.floor(n[1]);if(!(i>=0&&a>=0))throw Error("invalid size");return e=i,t=a,o},o.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?or(ot.call(e)):or(e),o):n},o.smooth=function(e){return arguments.length?(i=e?l:oi,o):i===l},o}function os(e){return isFinite(e)?e:NaN}function ol(e,t){return null!=e&&+e>=t}function ou(e){return null==e||isNaN(e*=1)?-1/0:e}function oc(e,t,n,i){let o=i-t,a=n-t,s=isFinite(o)||isFinite(a)?o/a:Math.sign(o)/Math.sign(a);return isNaN(s)?e:e+s-.5}function od(e){return e[0]}function of(e){return e[1]}function op(){return 1}function oh(){var e=od,t=of,n=op,i=960,o=500,a=20,s=2,l=60,u=270,c=155,d=or(20);function f(i){var o=new Float32Array(u*c),d=Math.pow(2,-s),f=-1;for(let a of i){var p=(e(a,++f,i)+l)*d,h=(t(a,f,i)+l)*d,m=+n(a,f,i);if(m&&p>=0&&p<u&&h>=0&&h<c){var g=Math.floor(p),v=Math.floor(h),y=p-g-.5,x=h-v-.5;o[g+v*u]+=(1-y)*(1-x)*m,o[g+1+v*u]+=y*(1-x)*m,o[g+1+(v+1)*u]+=y*x*m,o[g+(v+1)*u]+=(1-y)*x*m}}return b({data:o,width:u,height:c},a*d),o}function p(e){var t=f(e),n=d(t),i=Math.pow(2,2*s);return Array.isArray(n)||(n=ev(5e-324,eC(t)/i,n)),oa().size([u,c]).thresholds(n.map(e=>e*i))(t).map((e,t)=>(e.value=+n[t],h(e)))}function h(e){return e.coordinates.forEach(m),e}function m(e){e.forEach(g)}function g(e){e.forEach(v)}function v(e){e[0]=e[0]*Math.pow(2,s)-l,e[1]=e[1]*Math.pow(2,s)-l}function y(){return u=i+2*(l=3*a)>>s,c=o+2*l>>s,p}return p.contours=function(e){var t=f(e),n=oa().size([u,c]),i=Math.pow(2,2*s),o=e=>{e*=1;var o=h(n.contour(t,e*i));return o.value=e,o};return Object.defineProperty(o,"max",{get:()=>eC(t)/i}),o},p.x=function(t){return arguments.length?(e="function"==typeof t?t:or(+t),p):e},p.y=function(e){return arguments.length?(t="function"==typeof e?e:or(+e),p):t},p.weight=function(e){return arguments.length?(n="function"==typeof e?e:or(+e),p):n},p.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];if(!(t>=0&&n>=0))throw Error("invalid size");return i=t,o=n,y()},p.cellSize=function(e){if(!arguments.length)return 1<<s;if(!((e*=1)>=1))throw Error("invalid cell size");return s=Math.floor(Math.log(e)/Math.LN2),y()},p.thresholds=function(e){return arguments.length?(d="function"==typeof e?e:Array.isArray(e)?or(ot.call(e)):or(e),p):d},p.bandwidth=function(e){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((e*=1)>=0))throw Error("invalid bandwidth");return a=(Math.sqrt(4*e*e+1)-1)/2,y()},p}function om(e,t,n,i,o){let a,s,l,u,c=t[0],d=i[0],f=0,p=0;d>c==d>-c?(a=c,c=t[++f]):(a=d,d=i[++p]);let h=0;if(f<e&&p<n)for(d>c==d>-c?(s=c+a,l=a-(s-c),c=t[++f]):(s=d+a,l=a-(s-d),d=i[++p]),a=s,0!==l&&(o[h++]=l);f<e&&p<n;)d>c==d>-c?(u=(s=a+c)-a,l=a-(s-u)+(c-u),c=t[++f]):(u=(s=a+d)-a,l=a-(s-u)+(d-u),d=i[++p]),a=s,0!==l&&(o[h++]=l);for(;f<e;)u=(s=a+c)-a,l=a-(s-u)+(c-u),c=t[++f],a=s,0!==l&&(o[h++]=l);for(;p<n;)u=(s=a+d)-a,l=a-(s-u)+(d-u),d=i[++p],a=s,0!==l&&(o[h++]=l);return(0!==a||0===h)&&(o[h++]=a),h}function og(e){return new Float64Array(e)}let ov=og(4),oy=og(8),ob=og(12),ox=og(16),ow=og(4);function oA(e,t,n,i,o,a){let s=(t-a)*(n-o),l=(e-o)*(i-a),u=s-l,c=Math.abs(s+l);return Math.abs(u)>=33306690738754716e-32*c?u:-function(e,t,n,i,o,a,s){let l,u,c,d,f,p,h,m,g,v,y,b,x,w,A,C,S,_,T=e-o,O=n-o,P=t-a,M=i-a;w=T*M,h=(p=0x8000001*T)-(p-T),m=T-h,g=(p=0x8000001*M)-(p-M),A=m*(v=M-g)-(w-h*g-m*g-h*v),C=P*O,h=(p=0x8000001*P)-(p-P),m=P-h,g=(p=0x8000001*O)-(p-O),y=A-(S=m*(v=O-g)-(C-h*g-m*g-h*v)),f=A-y,ov[0]=A-(y+f)+(f-S),f=(b=w+y)-w,y=(x=w-(b-f)+(y-f))-C,f=x-y,ov[1]=x-(y+f)+(f-C),f=(_=b+y)-b,ov[2]=b-(_-f)+(y-f),ov[3]=_;let E=function(e,t){let n=t[0];for(let e=1;e<4;e++)n+=t[e];return n}(0,ov),D=22204460492503146e-32*s;if(E>=D||-E>=D||(f=e-T,l=e-(T+f)+(f-o),f=n-O,c=n-(O+f)+(f-o),f=t-P,u=t-(P+f)+(f-a),f=i-M,d=i-(M+f)+(f-a),0===l&&0===u&&0===c&&0===d)||(D=11093356479670487e-47*s+33306690738754706e-32*Math.abs(E),(E+=T*d+M*l-(P*c+O*u))>=D||-E>=D))return E;w=l*M,h=(p=0x8000001*l)-(p-l),m=l-h,g=(p=0x8000001*M)-(p-M),A=m*(v=M-g)-(w-h*g-m*g-h*v),C=u*O,h=(p=0x8000001*u)-(p-u),m=u-h,g=(p=0x8000001*O)-(p-O),y=A-(S=m*(v=O-g)-(C-h*g-m*g-h*v)),f=A-y,ow[0]=A-(y+f)+(f-S),f=(b=w+y)-w,y=(x=w-(b-f)+(y-f))-C,f=x-y,ow[1]=x-(y+f)+(f-C),f=(_=b+y)-b,ow[2]=b-(_-f)+(y-f),ow[3]=_;let I=om(4,ov,4,ow,oy);w=T*d,h=(p=0x8000001*T)-(p-T),m=T-h,g=(p=0x8000001*d)-(p-d),A=m*(v=d-g)-(w-h*g-m*g-h*v),C=P*c,h=(p=0x8000001*P)-(p-P),m=P-h,g=(p=0x8000001*c)-(p-c),y=A-(S=m*(v=c-g)-(C-h*g-m*g-h*v)),f=A-y,ow[0]=A-(y+f)+(f-S),f=(b=w+y)-w,y=(x=w-(b-f)+(y-f))-C,f=x-y,ow[1]=x-(y+f)+(f-C),f=(_=b+y)-b,ow[2]=b-(_-f)+(y-f),ow[3]=_;let k=om(I,oy,4,ow,ob);w=l*d,h=(p=0x8000001*l)-(p-l),m=l-h,g=(p=0x8000001*d)-(p-d),A=m*(v=d-g)-(w-h*g-m*g-h*v),C=u*c,h=(p=0x8000001*u)-(p-u),m=u-h,g=(p=0x8000001*c)-(p-c),y=A-(S=m*(v=c-g)-(C-h*g-m*g-h*v)),f=A-y,ow[0]=A-(y+f)+(f-S),f=(b=w+y)-w,y=(x=w-(b-f)+(y-f))-C,f=x-y,ow[1]=x-(y+f)+(f-C),f=(_=b+y)-b,ow[2]=b-(_-f)+(y-f),ow[3]=_;let N=om(k,ob,4,ow,ox);return ox[N-1]}(e,t,n,i,o,a,c)}og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(8),og(8),og(8),og(4),og(8),og(8),og(8),og(12),og(192),og(192),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(8),og(8),og(8),og(8),og(8),og(8),og(8),og(8),og(8),og(4),og(4),og(4),og(8),og(16),og(16),og(16),og(32),og(32),og(48),og(64),og(1152),og(1152),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(4),og(24),og(24),og(24),og(24),og(24),og(24),og(24),og(24),og(24),og(24),og(1152),og(1152),og(1152),og(1152),og(1152),og(2304),og(2304),og(3456),og(5760),og(8),og(8),og(8),og(16),og(24),og(48),og(48),og(96),og(192),og(384),og(384),og(384),og(768),og(96),og(96),og(96),og(1152);let oC=new Uint32Array(512);class oS{static from(e,t=oP,n=oM){let i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;a++){let i=e[a];o[2*a]=t(i),o[2*a+1]=n(i)}return new oS(o)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){var e,t,n,i,o,a;let s,l,u,c,d,f,p,h,m,g,{coords:v,_hullPrev:y,_hullNext:b,_hullTri:x,_hullHash:w}=this,A=v.length>>1,C=1/0,S=1/0,_=-1/0,T=-1/0;for(let e=0;e<A;e++){let t=v[2*e],n=v[2*e+1];t<C&&(C=t),n<S&&(S=n),t>_&&(_=t),n>T&&(T=n),this._ids[e]=e}let O=(C+_)/2,P=(S+T)/2;for(let e=0,t=1/0;e<A;e++){let n=o_(O,P,v[2*e],v[2*e+1]);n<t&&(h=e,t=n)}let M=v[2*h],E=v[2*h+1];for(let e=0,t=1/0;e<A;e++){if(e===h)continue;let n=o_(M,E,v[2*e],v[2*e+1]);n<t&&n>0&&(m=e,t=n)}let D=v[2*m],I=v[2*m+1],k=1/0;for(let e=0;e<A;e++){if(e===h||e===m)continue;let t=function(e,t,n,i,o,a){let s=n-e,l=i-t,u=o-e,c=a-t,d=s*s+l*l,f=u*u+c*c,p=.5/(s*c-l*u),h=(c*d-l*f)*p,m=(s*f-u*d)*p;return h*h+m*m}(M,E,D,I,v[2*e],v[2*e+1]);t<k&&(g=e,k=t)}let N=v[2*g],R=v[2*g+1];if(k===1/0){for(let e=0;e<A;e++)this._dists[e]=v[2*e]-v[0]||v[2*e+1]-v[1];oT(this._ids,this._dists,0,A-1);let e=new Uint32Array(A),t=0;for(let n=0,i=-1/0;n<A;n++){let o=this._ids[n],a=this._dists[o];a>i&&(e[t++]=o,i=a)}this.hull=e.subarray(0,t),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(0>oA(M,E,D,I,N,R)){let e=m,t=D,n=I;m=g,D=N,I=R,g=e,N=t,R=n}let B=(e=M,t=E,n=D,i=I,o=N,a=R,s=n-e,l=i-t,u=o-e,c=a-t,d=s*s+l*l,f=u*u+c*c,p=.5/(s*c-l*u),{x:e+(c*d-l*f)*p,y:t+(s*f-u*d)*p});this._cx=B.x,this._cy=B.y;for(let e=0;e<A;e++)this._dists[e]=o_(v[2*e],v[2*e+1],B.x,B.y);oT(this._ids,this._dists,0,A-1),this._hullStart=h;let L=3;b[h]=y[g]=m,b[m]=y[h]=g,b[g]=y[m]=h,x[h]=0,x[m]=1,x[g]=2,w.fill(-1),w[this._hashKey(M,E)]=h,w[this._hashKey(D,I)]=m,w[this._hashKey(N,R)]=g,this.trianglesLen=0,this._addTriangle(h,m,g,-1,-1,-1);for(let e=0,t,n;e<this._ids.length;e++){let i=this._ids[e],o=v[2*i],a=v[2*i+1];if(e>0&&2220446049250313e-31>=Math.abs(o-t)&&2220446049250313e-31>=Math.abs(a-n)||(t=o,n=a,i===h||i===m||i===g))continue;let s=0;for(let e=0,t=this._hashKey(o,a);e<this._hashSize&&(-1===(s=w[(t+e)%this._hashSize])||s===b[s]);e++);let l=s=y[s],u;for(;u=b[l],oA(o,a,v[2*l],v[2*l+1],v[2*u],v[2*u+1])>=0;)if((l=u)===s){l=-1;break}if(-1===l)continue;let c=this._addTriangle(l,i,b[l],-1,-1,x[l]);x[i]=this._legalize(c+2),x[l]=c,L++;let d=b[l];for(;u=b[d],0>oA(o,a,v[2*d],v[2*d+1],v[2*u],v[2*u+1]);)c=this._addTriangle(d,i,u,x[i],-1,x[d]),x[i]=this._legalize(c+2),b[d]=d,L--,d=u;if(l===s)for(;0>oA(o,a,v[2*(u=y[l])],v[2*u+1],v[2*l],v[2*l+1]);)c=this._addTriangle(u,i,l,-1,x[l],x[u]),this._legalize(c+2),x[u]=c,b[l]=l,L--,l=u;this._hullStart=y[i]=l,b[l]=y[d]=i,b[i]=d,w[this._hashKey(o,a)]=i,w[this._hashKey(v[2*l],v[2*l+1])]=l}this.hull=new Uint32Array(L);for(let e=0,t=this._hullStart;e<L;e++)this.hull[e]=t,t=b[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){var n,i;let o;return Math.floor((n=e-this._cx,o=n/(Math.abs(n)+Math.abs(i=t-this._cy)),(i>0?3-o:1+o)/4*this._hashSize))%this._hashSize}_legalize(e){let{_triangles:t,_halfedges:n,coords:i}=this,o=0,a=0;for(;;){let s=n[e],l=e-e%3;if(a=l+(e+2)%3,-1===s){if(0===o)break;e=oC[--o];continue}let u=s-s%3,c=l+(e+1)%3,d=u+(s+2)%3,f=t[a],p=t[e],h=t[c],m=t[d];if(function(e,t,n,i,o,a,s,l){let u=e-s,c=t-l,d=n-s,f=i-l,p=o-s,h=a-l,m=d*d+f*f,g=p*p+h*h;return u*(f*g-m*h)-c*(d*g-m*p)+(u*u+c*c)*(d*h-f*p)<0}(i[2*f],i[2*f+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){t[e]=m,t[s]=f;let i=n[d];if(-1===i){let t=this._hullStart;do{if(this._hullTri[t]===d){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,i),this._link(s,n[a]),this._link(a,d);let l=u+(s+1)%3;o<oC.length&&(oC[o++]=l)}else{if(0===o)break;e=oC[--o]}}return a}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,i,o,a){let s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=n,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function o_(e,t,n,i){let o=e-n,a=t-i;return o*o+a*a}function oT(e,t,n,i){if(i-n<=20)for(let o=n+1;o<=i;o++){let i=e[o],a=t[i],s=o-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=i}else{let o=n+i>>1,a=n+1,s=i;oO(e,o,a),t[e[n]]>t[e[i]]&&oO(e,n,i),t[e[a]]>t[e[i]]&&oO(e,a,i),t[e[n]]>t[e[a]]&&oO(e,n,a);let l=e[a],u=t[l];for(;;){do a++;while(t[e[a]]<u);do s--;while(t[e[s]]>u);if(s<a)break;oO(e,a,s)}e[n+1]=e[s],e[s]=l,i-a+1>=s-n?(oT(e,t,a,i),oT(e,t,n,s-1)):(oT(e,t,n,s-1),oT(e,t,a,i))}}function oO(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}function oP(e){return e[0]}function oM(e){return e[1]}class oE{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e*=1,t*=1,n*=1;let i=e+n,o=t;if(n<0)throw Error("negative radius");null===this._x1?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=i},${this._y1=o}`)}rect(e,t,n,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class oD{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class oI{constructor(e,[t,n,i,o]=[0,0,960,500]){if(!((i*=1)>=(t*=1))||!((o*=1)>=(n*=1)))throw Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=t,this.ymax=o,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let e,t,{delaunay:{points:n,hull:i,triangles:o},vectors:a}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let a=0,l=0,u=o.length,c,d;a<u;a+=3,l+=2){let u=2*o[a],f=2*o[a+1],p=2*o[a+2],h=n[u],m=n[u+1],g=n[f],v=n[f+1],y=n[p],b=n[p+1],x=g-h,w=v-m,A=y-h,C=b-m,S=(x*C-w*A)*2;if(1e-9>Math.abs(S)){if(void 0===e){for(let o of(e=t=0,i))e+=n[2*o],t+=n[2*o+1];e/=i.length,t/=i.length}let o=1e9*Math.sign((e-h)*C-(t-m)*A);c=(h+y)/2-o*C,d=(m+b)/2+o*A}else{let e=1/S,t=x*x+w*w,n=A*A+C*C;c=h+(C*t-w*n)*e,d=m+(x*n-A*t)*e}s[l]=c,s[l+1]=d}let l=i[i.length-1],u,c=4*l,d,f=n[2*l],p,h=n[2*l+1];a.fill(0);for(let e=0;e<i.length;++e)l=i[e],u=c,d=f,p=h,c=4*l,f=n[2*l],h=n[2*l+1],a[u+2]=a[c]=p-h,a[u+3]=a[c+1]=f-d}render(e){let t=null==e?e=new oE:void 0,{delaunay:{halfedges:n,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let t=0,i=n.length;t<i;++t){let i=n[t];if(i<t)continue;let o=2*Math.floor(t/3),s=2*Math.floor(i/3),l=a[o],u=a[o+1],c=a[s],d=a[s+1];this._renderSegment(l,u,c,d,e)}let l,u=o[o.length-1];for(let t=0;t<o.length;++t){l=u;let n=2*Math.floor(i[u=o[t]]/3),c=a[n],d=a[n+1],f=4*l,p=this._project(c,d,s[f+2],s[f+3]);p&&this._renderSegment(c,d,p[0],p[1],e)}return t&&t.value()}renderBounds(e){let t=null==e?e=new oE:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){let n=null==t?t=new oE:void 0,i=this._clip(e);if(null===i||!i.length)return;t.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let e=2;e<o;e+=2)(i[e]!==i[e-2]||i[e+1]!==i[e-1])&&t.lineTo(i[e],i[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){let e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){let t=new oD;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,i,o){let a,s=this._regioncode(e,t),l=this._regioncode(n,i);0===s&&0===l?(o.moveTo(e,t),o.lineTo(n,i)):(a=this._clipSegment(e,t,n,i,s,l))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(e,t,n){return(t*=1)==t&&(n*=1)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){let t=this._clip(e);if(t)for(let n of this.delaunay.neighbors(e)){let e=this._clip(n);if(e){i:for(let i=0,o=t.length;i<o;i+=2)for(let a=0,s=e.length;a<s;a+=2)if(t[i]===e[a]&&t[i+1]===e[a+1]&&t[(i+2)%o]===e[(a+s-2)%s]&&t[(i+3)%o]===e[(a+s-1)%s]){yield n;break i}}}}_cell(e){let{circumcenters:t,delaunay:{inedges:n,halfedges:i,triangles:o}}=this,a=n[e];if(-1===a)return null;let s=[],l=a;do{let n=Math.floor(l/3);if(s.push(t[2*n],t[2*n+1]),o[l=l%3==2?l-2:l+1]!==e)break;l=i[l]}while(l!==a&&-1!==l);return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let t=this._cell(e);if(null===t)return null;let{vectors:n}=this,i=4*e;return this._simplify(n[i]||n[i+1]?this._clipInfinite(e,t,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){let n=t.length,i=null,o,a,s=t[n-2],l=t[n-1],u,c=this._regioncode(s,l),d,f=0;for(let p=0;p<n;p+=2)if(o=s,a=l,s=t[p],l=t[p+1],u=c,c=this._regioncode(s,l),0===u&&0===c)d=f,f=0,i?i.push(s,l):i=[s,l];else{let t,n,p,h,m;if(0===u){if(null===(t=this._clipSegment(o,a,s,l,u,c)))continue;[n,p,h,m]=t}else{if(null===(t=this._clipSegment(s,l,o,a,c,u)))continue;[h,m,n,p]=t,d=f,f=this._edgecode(n,p),d&&f&&this._edge(e,d,f,i,i.length),i?i.push(n,p):i=[n,p]}d=f,f=this._edgecode(h,m),d&&f&&this._edge(e,d,f,i,i.length),i?i.push(h,m):i=[h,m]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(e,d,f,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,n,i,o,a){let s=o<a;for(s&&([e,t,n,i,o,a]=[n,i,e,t,a,o]);;){if(0===o&&0===a)return s?[n,i,e,t]:[e,t,n,i];if(o&a)return null;let l,u,c=o||a;8&c?(l=e+(n-e)*(this.ymax-t)/(i-t),u=this.ymax):4&c?(l=e+(n-e)*(this.ymin-t)/(i-t),u=this.ymin):2&c?(u=t+(i-t)*(this.xmax-e)/(n-e),l=this.xmax):(u=t+(i-t)*(this.xmin-e)/(n-e),l=this.xmin),o?(e=l,t=u,o=this._regioncode(e,t)):(n=l,i=u,a=this._regioncode(n,i))}}_clipInfinite(e,t,n,i,o,a){let s=Array.from(t),l;if((l=this._project(s[0],s[1],n,i))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(l[0],l[1]),s=this._clipFinite(e,s))for(let t=0,n=s.length,i,o=this._edgecode(s[n-2],s[n-1]);t<n;t+=2)i=o,o=this._edgecode(s[t],s[t+1]),i&&o&&(t=this._edge(e,i,o,s,t),n=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,i,o){for(;t!==n;){let n,a;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,a=this.ymin}(i[o]!==n||i[o+1]!==a)&&this.contains(e,n,a)&&(i.splice(o,0,n,a),o+=2)}return o}_project(e,t,n,i){let o=1/0,a,s,l;if(i<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/i)<o&&(l=this.ymin,s=e+(o=a)*n)}else if(i>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/i)<o&&(l=this.ymax,s=e+(o=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<o&&(s=this.xmax,l=t+(o=a)*i)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<o&&(s=this.xmin,l=t+(o=a)*i)}return[s,l]}_edgecode(e,t){return(e===this.xmin?1:2*(e===this.xmax))|(t===this.ymin?4:8*(t===this.ymax))}_regioncode(e,t){return(e<this.xmin?1:2*(e>this.xmax))|(t<this.ymin?4:8*(t>this.ymax))}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){let n=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[i]||e[t+1]===e[n+1]&&e[n+1]===e[i+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}let ok=2*Math.PI,oN=Math.pow;function oR(e){return e[0]}function oB(e){return e[1]}class oL{static from(e,t=oR,n=oB,i){return new oL("length"in e?function(e,t,n,i){let o=e.length,a=new Float64Array(2*o);for(let s=0;s<o;++s){let o=e[s];a[2*s]=t.call(i,o,s,e),a[2*s+1]=n.call(i,o,s,e)}return a}(e,t,n,i):Float64Array.from(function*(e,t,n,i){let o=0;for(let a of e)yield t.call(i,a,o,e),yield n.call(i,a,o,e),++o}(e,t,n,i)))}constructor(e){this._delaunator=new oS(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){let{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){let i=2*t[e],o=2*t[e+1],a=2*t[e+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(e,t)=>t).sort((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]);let e=this.collinear[0],o=this.collinear[this.collinear.length-1],a=[t[2*e],t[2*e+1],t[2*o],t[2*o+1]],s=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let e=0,o=t.length/2;e<o;++e){var n,i;let o=(n=t[2*e],[n+Math.sin(n+(i=t[2*e+1]))*s,i+Math.cos(n-i)*s]);t[2*e]=o[0],t[2*e+1]=o[1]}this._delaunator=new oS(t)}else delete this.collinear;let o=this.halfedges=this._delaunator.halfedges,a=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let e=0,t=o.length;e<t;++e){let t=s[e%3==2?e-2:e+1];(-1===o[e]||-1===l[t])&&(l[t]=e)}for(let e=0,t=a.length;e<t;++e)u[a[e]]=e;a.length<=2&&a.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=a[0],l[a[0]]=1,2===a.length&&(l[a[1]]=0,this.triangles[1]=a[1],this.triangles[2]=a[1]))}voronoi(e){return new oI(this,e)}*neighbors(e){let{inedges:t,hull:n,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let t=s.indexOf(e);t>0&&(yield s[t-1]),t<s.length-1&&(yield s[t+1]);return}let l=t[e];if(-1===l)return;let u=l,c=-1;do{if(yield c=a[u],a[u=u%3==2?u-2:u+1]!==e)return;if(-1===(u=o[u])){let t=n[(i[e]+1)%n.length];t!==c&&(yield t);return}}while(u!==l)}find(e,t,n=0){let i;if((e*=1)!=e||(t*=1)!=t)return -1;let o=n;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==o;)n=i;return i}_step(e,t,n){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(-1===i[e]||!u.length)return(e+1)%(u.length>>1);let c=e,d=oN(t-u[2*e],2)+oN(n-u[2*e+1],2),f=i[e],p=f;do{let i=l[p],f=oN(t-u[2*i],2)+oN(n-u[2*i+1],2);if(f<d&&(d=f,c=i),l[p=p%3==2?p-2:p+1]!==e)break;if(-1===(p=s[p])){if((p=o[(a[e]+1)%o.length])!==i&&oN(t-u[2*p],2)+oN(n-u[2*p+1],2)<d)return p;break}}while(p!==f);return c}render(e){let t=null==e?e=new oE:void 0,{points:n,halfedges:i,triangles:o}=this;for(let t=0,a=i.length;t<a;++t){let a=i[t];if(a<t)continue;let s=2*o[t],l=2*o[a];e.moveTo(n[s],n[s+1]),e.lineTo(n[l],n[l+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=void 0==t?2:+t;let n=null==e?e=new oE:void 0,{points:i}=this;for(let n=0,o=i.length;n<o;n+=2){let o=i[n],a=i[n+1];e.moveTo(o+t,a),e.arc(o,a,t,0,ok)}return n&&n.value()}renderHull(e){let t=null==e?e=new oE:void 0,{hull:n,points:i}=this,o=2*n[0],a=n.length;e.moveTo(i[o],i[o+1]);for(let t=1;t<a;++t){let o=2*n[t];e.lineTo(i[o],i[o+1])}return e.closePath(),t&&t.value()}hullPolygon(){let e=new oD;return this.renderHull(e),e.value()}renderTriangle(e,t){let n=null==t?t=new oE:void 0,{points:i,triangles:o}=this,a=2*o[e*=3],s=2*o[e+1],l=2*o[e+2];return t.moveTo(i[a],i[a+1]),t.lineTo(i[s],i[s+1]),t.lineTo(i[l],i[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){let t=new oD;return this.renderTriangle(e,t),t.value()}}let oF=e=>()=>e;function oV(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:a,x:s,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function oj(e){return!e.ctrlKey&&!e.button}function oG(){return this.parentNode}function oU(e,t){return null==t?{x:e.x,y:e.y}:t}function oz(){return navigator.maxTouchPoints||"ontouchstart"in this}function oW(){var e,t,n,i,o=oj,a=oG,s=oU,l=oz,u={},c=tv("start","drag","end"),d=0,f=0;function p(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",v).on("touchmove.drag",y,t9).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(s,l){if(!i&&o.call(this,s,l)){var u=x(this,a.call(this,s,l),s,l,"mouse");u&&(t8(s.view).on("mousemove.drag",m,t7).on("mouseup.drag",g,t7),nn(s.view),ne(s),n=!1,e=s.clientX,t=s.clientY,u("start",s))}}function m(i){if(nt(i),!n){var o=i.clientX-e,a=i.clientY-t;n=o*o+a*a>f}u.mouse("drag",i)}function g(e){t8(e.view).on("mousemove.drag mouseup.drag",null),nr(e.view,n),nt(e),u.mouse("end",e)}function v(e,t){if(o.call(this,e,t)){var n,i,s=e.changedTouches,l=a.call(this,e,t),u=s.length;for(n=0;n<u;++n)(i=x(this,l,e,t,s[n].identifier,s[n]))&&(ne(e),i("start",e,s[n]))}}function y(e){var t,n,i=e.changedTouches,o=i.length;for(t=0;t<o;++t)(n=u[i[t].identifier])&&(nt(e),n("drag",e,i[t]))}function b(e){var t,n,o=e.changedTouches,a=o.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<a;++t)(n=u[o[t].identifier])&&(ne(e),n("end",e,o[t]))}function x(e,t,n,i,o,a){var l,f,h,m=c.copy(),g=n8(a||n,t);if(null!=(h=s.call(e,new oV("beforestart",{sourceEvent:n,target:p,identifier:o,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:m}),i)))return l=h.x-g[0]||0,f=h.y-g[1]||0,function n(a,s,c){var v,y=g;switch(a){case"start":u[o]=n,v=d++;break;case"end":delete u[o],--d;case"drag":g=n8(c||s,t),v=d}m.call(a,e,new oV(a,{sourceEvent:s,subject:h,target:p,identifier:o,active:v,x:g[0]+l,y:g[1]+f,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:m}),i)}}return p.filter=function(e){return arguments.length?(o="function"==typeof e?e:oF(!!e),p):o},p.container=function(e){return arguments.length?(a="function"==typeof e?e:oF(e),p):a},p.subject=function(e){return arguments.length?(s="function"==typeof e?e:oF(e),p):s},p.touchable=function(e){return arguments.length?(l="function"==typeof e?e:oF(!!e),p):l},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(f=(e*=1)*e,p):Math.sqrt(f)},p}oV.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var oH={},oq={};function oK(e){return Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function oX(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var i in e)i in t||n.push(t[i]=i)}),n}function oY(e,t){var n=e+"",i=n.length;return i<t?Array(t-i+1).join(0)+n:n}function oZ(e){var t=RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,o=[],a=e.length,s=0,l=0,u=a<=0,c=!1;function d(){if(u)return oq;if(c)return c=!1,oH;var t,i,o=s;if(34===e.charCodeAt(o)){for(;s++<a&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=a?u=!0:10===(i=e.charCodeAt(s++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(s)&&++s),e.slice(o+1,t-1).replace(/""/g,'"')}for(;s<a;){if(10===(i=e.charCodeAt(t=s++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(s)&&++s;else if(i!==n)continue;return e.slice(o,t)}return u=!0,e.slice(o,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(i=d())!==oq;){for(var f=[];i!==oH&&i!==oq;)f.push(i),i=d();t&&null==(f=t(f,l++))||o.push(f)}return o}function o(t,n){return t.map(function(t){return n.map(function(e){return s(t[e])}).join(e)})}function a(t){return t.map(s).join(e)}function s(e){var n,i,o,a,s,l;return null==e?"":e instanceof Date?(i=(n=e).getUTCHours(),o=n.getUTCMinutes(),a=n.getUTCSeconds(),s=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((l=n.getUTCFullYear())<0?"-"+oY(-l,6):l>9999?"+"+oY(l,6):oY(l,4))+"-"+oY(n.getUTCMonth()+1,2)+"-"+oY(n.getUTCDate(),2)+(s?"T"+oY(i,2)+":"+oY(o,2)+":"+oY(a,2)+"."+oY(s,3)+"Z":a?"T"+oY(i,2)+":"+oY(o,2)+":"+oY(a,2)+"Z":o||i?"T"+oY(i,2)+":"+oY(o,2)+"Z":"")):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,o,a=i(e,function(e,i){var a;if(n)return n(e,i-1);o=e,n=t?(a=oK(e),function(n,i){return t(a(n),i,e)}):oK(e)});return a.columns=o||[],a},parseRows:i,format:function(t,n){return null==n&&(n=oX(t)),[n.map(s).join(e)].concat(o(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=oX(e)),o(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:s}}var oJ=oZ(","),oQ=oJ.parse,o$=oJ.parseRows,o0=oJ.format,o1=oJ.formatBody,o2=oJ.formatRows,o3=oJ.formatRow,o4=oJ.formatValue,o5=oZ("	"),o6=o5.parse,o8=o5.parseRows,o9=o5.format,o7=o5.formatBody,ae=o5.formatRows,at=o5.formatRow,an=o5.formatValue;function ar(e){for(var t in e){var n,i,o=e[t].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(n=+o))if(!(i=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;else ai&&i[4]&&!i[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o);else o=n;else o=null;e[t]=o}return e}let ai=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),ao=e=>+e;function aa(e){return e*e}function as(e){return e*(2-e)}function al(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}var au=function e(t){function n(e){return Math.pow(e,t)}return t*=1,n.exponent=e,n}(3),ac=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t*=1,n.exponent=e,n}(3),ad=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t*=1,n.exponent=e,n}(3),af=Math.PI,ap=af/2;function ah(e){return 1==+e?1:1-Math.cos(e*ap)}function am(e){return Math.sin(e*ap)}function ag(e){return(1-Math.cos(af*e))/2}function av(e){return(Math.pow(2,-10*e)-9765625e-10)*1.0009775171065494}function ay(e){return av(1-e)}function ab(e){return 1-av(e)}function ax(e){return((e*=2)<=1?av(1-e):2-av(e-1))/2}function aw(e){return 1-Math.sqrt(1-e*e)}function aA(e){return Math.sqrt(1- --e*e)}function aC(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var aS=4/11,a_=6/11,aT=8/11,aO=3/4,aP=9/11,aM=10/11,aE=15/16,aD=21/22,aI=63/64,ak=1/(4/11)/(4/11);function aN(e){return 1-aR(1-e)}function aR(e){return(e*=1)<aS?ak*e*e:e<aT?ak*(e-=a_)*e+aO:e<aM?ak*(e-=aP)*e+aE:ak*(e-=aD)*e+aI}function aB(e){return((e*=2)<=1?1-aR(1-e):aR(e-1)+1)/2}var aL=function e(t){function n(e){return(e*=1)*e*(t*(e-1)+e)}return t*=1,n.overshoot=e,n}(1.70158),aF=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t*=1,n.overshoot=e,n}(1.70158),aV=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t*=1,n.overshoot=e,n}(1.70158),aj=2*Math.PI,aG=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=aj);function o(e){return t*av(- --e)*Math.sin((i-e)/n)}return o.amplitude=function(t){return e(t,n*aj)},o.period=function(n){return e(t,n)},o}(1,.3),aU=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=aj);function o(e){return 1-t*av(e*=1)*Math.sin((e+i)/n)}return o.amplitude=function(t){return e(t,n*aj)},o.period=function(n){return e(t,n)},o}(1,.3),az=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=aj);function o(e){return((e=2*e-1)<0?t*av(-e)*Math.sin((i-e)/n):2-t*av(e)*Math.sin((i+e)/n))/2}return o.amplitude=function(t){return e(t,n*aj)},o.period=function(n){return e(t,n)},o}(1,.3);function aW(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.blob()}function aH(e,t){return fetch(e,t).then(aW)}function aq(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.arrayBuffer()}function aK(e,t){return fetch(e,t).then(aq)}function aX(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.text()}function aY(e,t){return fetch(e,t).then(aX)}function aZ(e){return function(t,n,i){return 2==arguments.length&&"function"==typeof n&&(i=n,n=void 0),aY(t,n).then(function(t){return e(t,i)})}}function aJ(e,t,n,i){3==arguments.length&&"function"==typeof n&&(i=n,n=void 0);var o=oZ(e);return aY(t,n).then(function(e){return o.parse(e,i)})}var aQ=aZ(oQ),a$=aZ(o6);function a0(e,t){return new Promise(function(n,i){var o=new Image;for(var a in t)o[a]=t[a];o.onerror=i,o.onload=function(){n(o)},o.src=e})}function a1(e){if(!e.ok)throw Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function a2(e,t){return fetch(e,t).then(a1)}function a3(e){return(t,n)=>aY(t,n).then(t=>(new DOMParser).parseFromString(t,e))}let a4=a3("application/xml");var a5=a3("text/html"),a6=a3("image/svg+xml");function a8(e,t){var n,i=1;function o(){var o,a,s=n.length,l=0,u=0;for(o=0;o<s;++o)l+=(a=n[o]).x,u+=a.y;for(l=(l/s-e)*i,u=(u/s-t)*i,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return null==e&&(e=0),null==t&&(t=0),o.initialize=function(e){n=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.strength=function(e){return arguments.length?(i=+e,o):i},o}function a9(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var o,a,s,l,u,c,d,f,p,h=e._root,m={data:i},g=e._x0,v=e._y0,y=e._x1,b=e._y1;if(!h)return e._root=m,e;for(;h.length;)if((c=t>=(a=(g+y)/2))?g=a:y=a,(d=n>=(s=(v+b)/2))?v=s:b=s,o=h,!(h=h[f=d<<1|c]))return o[f]=m,e;if(l=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===l&&n===u)return m.next=h,o?o[f]=m:e._root=m,e;do o=o?o[f]=[,,,,]:e._root=[,,,,],(c=t>=(a=(g+y)/2))?g=a:y=a,(d=n>=(s=(v+b)/2))?v=s:b=s;while((f=d<<1|c)==(p=(u>=s)<<1|l>=a));return o[p]=h,o[f]=m,e}function a7(e,t,n,i,o){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=o}function se(e){return e[0]}function st(e){return e[1]}function sn(e,t,n){var i=new sr(null==t?se:t,null==n?st:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function sr(e,t,n,i,o,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function si(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var so=sn.prototype=sr.prototype;function sa(e){return function(){return e}}function ss(e){return(e()-.5)*1e-6}function sl(e){return e.x+e.vx}function su(e){return e.y+e.vy}function sc(e){var t,n,i,o=1,a=1;function s(){for(var e,s,u,c,d,f,p,h=t.length,m=0;m<a;++m)for(e=0,s=sn(t,sl,su).visitAfter(l);e<h;++e)p=(f=n[(u=t[e]).index])*f,c=u.x+u.vx,d=u.y+u.vy,s.visit(g);function g(e,t,n,a,s){var l=e.data,h=e.r,m=f+h;if(l){if(l.index>u.index){var g=c-l.x-l.vx,v=d-l.y-l.vy,y=g*g+v*v;y<m*m&&(0===g&&(y+=(g=ss(i))*g),0===v&&(y+=(v=ss(i))*v),y=(m-(y=Math.sqrt(y)))/y*o,u.vx+=(g*=y)*(m=(h*=h)/(p+h)),u.vy+=(v*=y)*m,l.vx-=g*(m=1-m),l.vy-=v*m)}return}return t>c+m||a<c-m||n>d+m||s<d-m}}function l(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var i,o,a=t.length;for(i=0,n=Array(a);i<a;++i)n[(o=t[i]).index]=+e(o,i,t)}}return"function"!=typeof e&&(e=sa(null==e?1:+e)),s.initialize=function(e,n){t=e,i=n,u()},s.iterations=function(e){return arguments.length?(a=+e,s):a},s.strength=function(e){return arguments.length?(o=+e,s):o},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:sa(+t),u(),s):e},s}function sd(e){return e.index}function sf(e,t){var n=e.get(t);if(!n)throw Error("node not found: "+t);return n}function sp(e){var t,n,i,o,a,s,l=sd,u=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},c=sa(30),d=1;function f(i){for(var o=0,l=e.length;o<d;++o)for(var u,c,f,p,h,m,g,v=0;v<l;++v)c=(u=e[v]).source,m=((m=Math.sqrt((p=(f=u.target).x+f.vx-c.x-c.vx||ss(s))*p+(h=f.y+f.vy-c.y-c.vy||ss(s))*h))-n[v])/m*i*t[v],p*=m,h*=m,f.vx-=p*(g=a[v]),f.vy-=h*g,c.vx+=p*(g=1-g),c.vy+=h*g}function p(){if(i){var s,u,c=i.length,d=e.length,f=new Map(i.map((e,t)=>[l(e,t,i),e]));for(s=0,o=Array(c);s<d;++s)(u=e[s]).index=s,"object"!=typeof u.source&&(u.source=sf(f,u.source)),"object"!=typeof u.target&&(u.target=sf(f,u.target)),o[u.source.index]=(o[u.source.index]||0)+1,o[u.target.index]=(o[u.target.index]||0)+1;for(s=0,a=Array(d);s<d;++s)u=e[s],a[s]=o[u.source.index]/(o[u.source.index]+o[u.target.index]);t=Array(d),h(),n=Array(d),m()}}function h(){if(i)for(var n=0,o=e.length;n<o;++n)t[n]=+u(e[n],n,e)}function m(){if(i)for(var t=0,o=e.length;t<o;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){i=e,s=t,p()},f.links=function(t){return arguments.length?(e=t,p(),f):e},f.id=function(e){return arguments.length?(l=e,f):l},f.iterations=function(e){return arguments.length?(d=+e,f):d},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:sa(+e),h(),f):u},f.distance=function(e){return arguments.length?(c="function"==typeof e?e:sa(+e),m(),f):c},f}function sh(e){return e.x}function sm(e){return e.y}so.copy=function(){var e,t,n=new sr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=si(i),n;for(e=[{source:i,target:n._root=[,,,,]}];i=e.pop();)for(var o=0;o<4;++o)(t=i.source[o])&&(t.length?e.push({source:t,target:i.target[o]=[,,,,]}):i.target[o]=si(t));return n},so.add=function(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return a9(this.cover(t,n),t,n,e)},so.addAll=function(e){var t,n,i,o,a=e.length,s=Array(a),l=Array(a),u=1/0,c=1/0,d=-1/0,f=-1/0;for(n=0;n<a;++n)!(isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t)))&&(s[n]=i,l[n]=o,i<u&&(u=i),i>d&&(d=i),o<c&&(c=o),o>f&&(f=o));if(u>d||c>f)return this;for(this.cover(u,c).cover(d,f),n=0;n<a;++n)a9(this,s[n],l[n],e[n]);return this},so.cover=function(e,t){if(isNaN(e*=1)||isNaN(t*=1))return this;var n=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s,l,u=o-n||1,c=this._root;n>e||e>=o||i>t||t>=a;)switch(l=(t<i)<<1|e<n,(s=[,,,,])[l]=c,c=s,u*=2,l){case 0:o=n+u,a=i+u;break;case 1:n=o-u,a=i+u;break;case 2:o=n+u,i=a-u;break;case 3:n=o-u,i=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=o,this._y1=a,this},so.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},so.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},so.find=function(e,t,n){var i,o,a,s,l,u,c,d=this._x0,f=this._y0,p=this._x1,h=this._y1,m=[],g=this._root;for(g&&m.push(new a7(g,d,f,p,h)),null==n?n=1/0:(d=e-n,f=t-n,p=e+n,h=t+n,n*=n);u=m.pop();)if((g=u.node)&&!((o=u.x0)>p)&&!((a=u.y0)>h)&&!((s=u.x1)<d)&&!((l=u.y1)<f))if(g.length){var v=(o+s)/2,y=(a+l)/2;m.push(new a7(g[3],v,y,s,l),new a7(g[2],o,y,v,l),new a7(g[1],v,a,s,y),new a7(g[0],o,a,v,y)),(c=(t>=y)<<1|e>=v)&&(u=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=u)}else{var b=e-this._x.call(null,g.data),x=t-this._y.call(null,g.data),w=b*b+x*x;if(w<n){var A=Math.sqrt(n=w);d=e-A,f=t-A,p=e+A,h=t+A,i=g.data}}return i},so.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,i,o,a,s,l,u,c,d,f,p,h=this._root,m=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((c=a>=(l=(m+v)/2))?m=l:v=l,(d=s>=(u=(g+y)/2))?g=u:y=u,t=h,!(h=h[f=d<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,p=f)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return((o=h.next)&&delete h.next,i)?o?i.next=o:delete i.next:t?(o?t[f]=o:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[p]=h:this._root=h)):this._root=o,this},so.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},so.root=function(){return this._root},so.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},so.visit=function(e){var t,n,i,o,a,s,l=[],u=this._root;for(u&&l.push(new a7(u,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(u=t.node,i=t.x0,o=t.y0,a=t.x1,s=t.y1)&&u.length){var c=(i+a)/2,d=(o+s)/2;(n=u[3])&&l.push(new a7(n,c,d,a,s)),(n=u[2])&&l.push(new a7(n,i,d,c,s)),(n=u[1])&&l.push(new a7(n,c,o,a,d)),(n=u[0])&&l.push(new a7(n,i,o,c,d))}return this},so.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new a7(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o=t.node;if(o.length){var a,s=t.x0,l=t.y0,u=t.x1,c=t.y1,d=(s+u)/2,f=(l+c)/2;(a=o[0])&&n.push(new a7(a,s,l,d,f)),(a=o[1])&&n.push(new a7(a,d,l,u,f)),(a=o[2])&&n.push(new a7(a,s,f,d,c)),(a=o[3])&&n.push(new a7(a,d,f,u,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},so.x=function(e){return arguments.length?(this._x=e,this):this._x},so.y=function(e){return arguments.length?(this._y=e,this):this._y};var sg=Math.PI*(3-Math.sqrt(5));function sv(e){let t;var n,i=1,o=.001,a=1-Math.pow(.001,1/300),s=0,l=.6,u=new Map,c=rd(p),d=tv("tick","end"),f=(t=1,()=>(t=(1664525*t+0x3c6ef35f)%0x100000000)/0x100000000);function p(){h(),d.call("tick",n),i<o&&(c.stop(),d.call("end",n))}function h(t){var o,c,d=e.length;void 0===t&&(t=1);for(var f=0;f<t;++f)for(i+=(s-i)*a,u.forEach(function(e){e(i)}),o=0;o<d;++o)null==(c=e[o]).fx?c.x+=c.vx*=l:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=l:(c.y=c.fy,c.vy=0);return n}function m(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=10*Math.sqrt(.5+n),a=n*sg;t.x=o*Math.cos(a),t.y=o*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function g(t){return t.initialize&&t.initialize(e,f),t}return null==e&&(e=[]),m(),n={tick:h,restart:function(){return c.restart(p),n},stop:function(){return c.stop(),n},nodes:function(t){return arguments.length?(e=t,m(),u.forEach(g),n):e},alpha:function(e){return arguments.length?(i=+e,n):i},alphaMin:function(e){return arguments.length?(o=+e,n):o},alphaDecay:function(e){return arguments.length?(a=+e,n):+a},alphaTarget:function(e){return arguments.length?(s=+e,n):s},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(f=e,u.forEach(g),n):f},force:function(e,t){return arguments.length>1?(null==t?u.delete(e):u.set(e,g(t)),n):u.get(e)},find:function(t,n,i){var o,a,s,l,u,c=0,d=e.length;for(null==i?i=1/0:i*=i,c=0;c<d;++c)(s=(o=t-(l=e[c]).x)*o+(a=n-l.y)*a)<i&&(u=l,i=s);return u},on:function(e,t){return arguments.length>1?(d.on(e,t),n):d.on(e)}}}function sy(){var e,t,n,i,o,a=sa(-30),s=1,l=1/0,u=.81;function c(n){var o,a=e.length,s=sn(e,sh,sm).visitAfter(f);for(i=n,o=0;o<a;++o)t=e[o],s.visit(p)}function d(){if(e){var t,n,i=e.length;for(t=0,o=Array(i);t<i;++t)o[(n=e[t]).index]=+a(n,t,e)}}function f(e){var t,n,i,a,s,l=0,u=0;if(e.length){for(i=a=s=0;s<4;++s)(t=e[s])&&(n=Math.abs(t.value))&&(l+=t.value,u+=n,i+=n*t.x,a+=n*t.y);e.x=i/u,e.y=a/u}else{(t=e).x=t.data.x,t.y=t.data.y;do l+=o[t.data.index];while(t=t.next)}e.value=l}function p(e,a,c,d){if(!e.value)return!0;var f=e.x-t.x,p=e.y-t.y,h=d-a,m=f*f+p*p;if(h*h/u<m)return m<l&&(0===f&&(m+=(f=ss(n))*f),0===p&&(m+=(p=ss(n))*p),m<s&&(m=Math.sqrt(s*m)),t.vx+=f*e.value*i/m,t.vy+=p*e.value*i/m),!0;if(!e.length&&!(m>=l)){(e.data!==t||e.next)&&(0===f&&(m+=(f=ss(n))*f),0===p&&(m+=(p=ss(n))*p),m<s&&(m=Math.sqrt(s*m)));do e.data!==t&&(h=o[e.data.index]*i/m,t.vx+=f*h,t.vy+=p*h);while(e=e.next)}}return c.initialize=function(t,i){e=t,n=i,d()},c.strength=function(e){return arguments.length?(a="function"==typeof e?e:sa(+e),d(),c):a},c.distanceMin=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c.distanceMax=function(e){return arguments.length?(l=e*e,c):Math.sqrt(l)},c.theta=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c}function sb(e,t,n){var i,o,a,s=sa(.1);function l(e){for(var s=0,l=i.length;s<l;++s){var u=i[s],c=u.x-t||1e-6,d=u.y-n||1e-6,f=Math.sqrt(c*c+d*d),p=(a[s]-f)*o[s]*e/f;u.vx+=c*p,u.vy+=d*p}}function u(){if(i){var t,n=i.length;for(t=0,o=Array(n),a=Array(n);t<n;++t)a[t]=+e(i[t],t,i),o[t]=isNaN(a[t])?0:+s(i[t],t,i)}}return"function"!=typeof e&&(e=sa(+e)),null==t&&(t=0),null==n&&(n=0),l.initialize=function(e){i=e,u()},l.strength=function(e){return arguments.length?(s="function"==typeof e?e:sa(+e),u(),l):s},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:sa(+t),u(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l}function sx(e){var t,n,i,o=sa(.1);function a(e){for(var o,a=0,s=t.length;a<s;++a)o=t[a],o.vx+=(i[a]-o.x)*n[a]*e}function s(){if(t){var a,s=t.length;for(a=0,n=Array(s),i=Array(s);a<s;++a)n[a]=isNaN(i[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!=typeof e&&(e=sa(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(o="function"==typeof e?e:sa(+e),s(),a):o},a.x=function(t){return arguments.length?(e="function"==typeof t?t:sa(+t),s(),a):e},a}function sw(e){var t,n,i,o=sa(.1);function a(e){for(var o,a=0,s=t.length;a<s;++a)o=t[a],o.vy+=(i[a]-o.y)*n[a]*e}function s(){if(t){var a,s=t.length;for(a=0,n=Array(s),i=Array(s);a<s;++a)n[a]=isNaN(i[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!=typeof e&&(e=sa(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(o="function"==typeof e?e:sa(+e),s(),a):o},a.y=function(t){return arguments.length?(e="function"==typeof t?t:sa(+t),s(),a):e},a}function sA(e,t){if(!isFinite(e)||0===e)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function sC(e){return(e=sA(Math.abs(e)))?e[1]:NaN}var sS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s_(e){var t;if(!(t=sS.exec(e)))throw Error("invalid format: "+e);return new sT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function sT(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function sO(e,t){var n=sA(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+Array(o-i.length+2).join("0")}s_.prototype=sT.prototype,sT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let sP={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sO(100*e,t),r:sO,s:function(e,t){var n=sA(e,t);if(!n)return ln=void 0,e.toPrecision(t);var i=n[0],o=n[1],a=o-(ln=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+Array(1-a).join("0")+sA(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sM(e){return e}var sE=Array.prototype.map,sD=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function sI(e){var t,n,i,o=void 0===e.grouping||void 0===e.thousands?sM:(t=sE.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var o=e.length,a=[],s=0,l=t[0],u=0;o>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),a.push(e.substring(o-=l,o+l)),!((u+=l+1)>i));)l=t[s=(s+1)%t.length];return a.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?sM:(i=sE.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return i[+e]})}),c=void 0===e.percent?"%":e.percent+"",d=void 0===e.minus?"":e.minus+"",f=void 0===e.nan?"NaN":e.nan+"";function p(e,t){var n=(e=s_(e)).fill,i=e.align,p=e.sign,h=e.symbol,m=e.zero,g=e.width,v=e.comma,y=e.precision,b=e.trim,x=e.type;"n"===x?(v=!0,x="g"):sP[x]||(void 0===y&&(y=12),b=!0,x="g"),(m||"0"===n&&"="===i)&&(m=!0,n="0",i="=");var w=(t&&void 0!==t.prefix?t.prefix:"")+("$"===h?a:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():""),A=("$"===h?s:/[%p]/.test(x)?c:"")+(t&&void 0!==t.suffix?t.suffix:""),C=sP[x],S=/[defgprs%]/.test(x);function _(e){var t,a,s,c=w,h=A;if("c"===x)h=C(e)+h,e="";else{var _=(e*=1)<0||1/e<0;if(e=isNaN(e)?f:C(Math.abs(e),y),b&&(e=function(e){r:for(var t,n=e.length,i=1,o=-1;i<n;++i)switch(e[i]){case".":o=t=i;break;case"0":0===o&&(o=i),t=i;break;default:if(!+e[i])break r;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==p&&(_=!1),c=(_?"("===p?p:d:"-"===p||"("===p?"":p)+c,h=("s"!==x||isNaN(e)||void 0===ln?"":sD[8+ln/3])+h+(_&&"("===p?")":""),S){for(t=-1,a=e.length;++t<a;)if(48>(s=e.charCodeAt(t))||s>57){h=(46===s?l+e.slice(t+1):e.slice(t))+h,e=e.slice(0,t);break}}}v&&!m&&(e=o(e,1/0));var T=c.length+e.length+h.length,O=T<g?Array(g-T+1).join(n):"";switch(v&&m&&(e=o(O+e,O.length?g-h.length:1/0),O=""),i){case"<":e=c+e+h+O;break;case"=":e=c+O+e+h;break;case"^":e=O.slice(0,T=O.length>>1)+c+e+h+O.slice(T);break;default:e=O+c+e+h}return u(e)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),_.toString=function(){return e+""},_}return{format:p,formatPrefix:function(e,t){var n=3*Math.max(-8,Math.min(8,Math.floor(sC(t)/3))),i=Math.pow(10,-n),o=p(((e=s_(e)).type="f",e),{suffix:sD[8+n/3]});return function(e){return o(i*e)}}}}function sk(e){return li=(lr=sI(e)).format,lo=lr.formatPrefix,lr}function sN(e){return Math.max(0,-sC(Math.abs(e)))}function sR(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(sC(t)/3)))-sC(Math.abs(e)))}function sB(e,t){return Math.max(0,sC(t=Math.abs(t)-(e=Math.abs(e)))-sC(e))+1}sk({thousands:",",grouping:[3],currency:["$",""]});var sL=Math.PI,sF=sL/2,sV=sL/4,sj=2*sL,sG=180/sL,sU=sL/180,sz=Math.abs,sW=Math.atan,sH=Math.atan2,sq=Math.cos,sK=Math.ceil,sX=Math.exp,sY=Math.hypot,sZ=Math.log,sJ=Math.pow,sQ=Math.sin,s$=Math.sign||function(e){return e>0?1:e<0?-1:0},s0=Math.sqrt,s1=Math.tan;function s2(e){return e>1?0:e<-1?sL:Math.acos(e)}function s3(e){return e>1?sF:e<-1?-sF:Math.asin(e)}function s4(){}function s5(e,t){e&&s8.hasOwnProperty(e.type)&&s8[e.type](e,t)}var s6={Feature:function(e,t){s5(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,o=n.length;++i<o;)s5(n[i].geometry,t)}},s8={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){s9(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)s9(n[i],t,0)},Polygon:function(e,t){s7(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)s7(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,o=n.length;++i<o;)s5(n[i],t)}};function s9(e,t,n){var i,o=-1,a=e.length-n;for(t.lineStart();++o<a;)i=e[o],t.point(i[0],i[1],i[2]);t.lineEnd()}function s7(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)s9(e[n],t,1);t.polygonEnd()}function le(e,t){e&&s6.hasOwnProperty(e.type)?s6[e.type](e,t):s5(e,t)}var lt,ln,lr,li,lo,la,ls,ll,lu,lc,ld=new N,lf=new N,lp={point:s4,lineStart:s4,lineEnd:s4,polygonStart:function(){ld=new N,lp.lineStart=lh,lp.lineEnd=lm},polygonEnd:function(){var e=+ld;lf.add(e<0?sj+e:e),this.lineStart=this.lineEnd=this.point=s4},sphere:function(){lf.add(sj)}};function lh(){lp.point=lg}function lm(){lv(la,ls)}function lg(e,t){lp.point=lv,la=e,ls=t,e*=sU,t*=sU,ll=e,lu=sq(t=t/2+sV),lc=sQ(t)}function lv(e,t){e*=sU,t*=sU;var n=e-ll,i=n>=0?1:-1,o=i*n,a=sq(t=t/2+sV),s=sQ(t),l=lc*s,u=lu*a+l*sq(o),c=l*i*sQ(o);ld.add(sH(c,u)),ll=e,lu=a,lc=s}function ly(e){return lf=new N,le(e,lp),2*lf}function lb(e){return[sH(e[1],e[0]),s3(e[2])]}function lx(e){var t=e[0],n=e[1],i=sq(n);return[i*sq(t),i*sQ(t),sQ(n)]}function lw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function lS(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function l_(e){var t=s0(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lT={point:lO,lineStart:lM,lineEnd:lE,polygonStart:function(){lT.point=lD,lT.lineStart=lI,lT.lineEnd=lk,uG=new N,lp.polygonStart()},polygonEnd:function(){lp.polygonEnd(),lT.point=lO,lT.lineStart=lM,lT.lineEnd=lE,ld<0?(uk=-(uR=180),uN=-(uB=90)):uG>1e-6?uB=90:uG<-1e-6&&(uN=-90),uz[0]=uk,uz[1]=uR},sphere:function(){uk=-(uR=180),uN=-(uB=90)}};function lO(e,t){uU.push(uz=[uk=e,uR=e]),t<uN&&(uN=t),t>uB&&(uB=t)}function lP(e,t){var n=lx([e*sU,t*sU]);if(uj){var i=lA(uj,n),o=lA([i[1],-i[0],0],i);l_(o),o=lb(o);var a,s=e-uL,l=s>0?1:-1,u=o[0]*sG*l,c=sz(s)>180;c^(l*uL<u&&u<l*e)?(a=o[1]*sG)>uB&&(uB=a):c^(l*uL<(u=(u+360)%360-180)&&u<l*e)?(a=-o[1]*sG)<uN&&(uN=a):(t<uN&&(uN=t),t>uB&&(uB=t)),c?e<uL?lN(uk,e)>lN(uk,uR)&&(uR=e):lN(e,uR)>lN(uk,uR)&&(uk=e):uR>=uk?(e<uk&&(uk=e),e>uR&&(uR=e)):e>uL?lN(uk,e)>lN(uk,uR)&&(uR=e):lN(e,uR)>lN(uk,uR)&&(uk=e)}else uU.push(uz=[uk=e,uR=e]);t<uN&&(uN=t),t>uB&&(uB=t),uj=n,uL=e}function lM(){lT.point=lP}function lE(){uz[0]=uk,uz[1]=uR,lT.point=lO,uj=null}function lD(e,t){if(uj){var n=e-uL;uG.add(sz(n)>180?n+(n>0?360:-360):n)}else uF=e,uV=t;lp.point(e,t),lP(e,t)}function lI(){lp.lineStart()}function lk(){lD(uF,uV),lp.lineEnd(),sz(uG)>1e-6&&(uk=-(uR=180)),uz[0]=uk,uz[1]=uR,uj=null}function lN(e,t){return(t-=e)<0?t+360:t}function lR(e,t){return e[0]-t[0]}function lB(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function lL(e){var t,n,i,o,a,s,l;if(uB=uR=-(uk=uN=1/0),uU=[],le(e,lT),n=uU.length){for(uU.sort(lR),t=1,a=[i=uU[0]];t<n;++t)lB(i,(o=uU[t])[0])||lB(i,o[1])?(lN(i[0],o[1])>lN(i[0],i[1])&&(i[1]=o[1]),lN(o[0],i[1])>lN(i[0],i[1])&&(i[0]=o[0])):a.push(i=o);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=o,++t)o=a[t],(l=lN(i[1],o[0]))>s&&(s=l,uk=o[0],uR=i[1])}return uU=uz=null,uk===1/0||uN===1/0?[[NaN,NaN],[NaN,NaN]]:[[uk,uN],[uR,uB]]}var lF={sphere:s4,point:lV,lineStart:lG,lineEnd:lW,polygonStart:function(){lF.lineStart=lH,lF.lineEnd=lq},polygonEnd:function(){lF.lineStart=lG,lF.lineEnd=lW}};function lV(e,t){e*=sU;var n=sq(t*=sU);lj(n*sq(e),n*sQ(e),sQ(t))}function lj(e,t,n){++uW,uq+=(e-uq)/uW,uK+=(t-uK)/uW,uX+=(n-uX)/uW}function lG(){lF.point=lU}function lU(e,t){e*=sU;var n=sq(t*=sU);u3=n*sq(e),u4=n*sQ(e),u5=sQ(t),lF.point=lz,lj(u3,u4,u5)}function lz(e,t){e*=sU;var n=sq(t*=sU),i=n*sq(e),o=n*sQ(e),a=sQ(t),s=sH(s0((s=u4*a-u5*o)*s+(s=u5*i-u3*a)*s+(s=u3*o-u4*i)*s),u3*i+u4*o+u5*a);uH+=s,uY+=s*(u3+(u3=i)),uZ+=s*(u4+(u4=o)),uJ+=s*(u5+(u5=a)),lj(u3,u4,u5)}function lW(){lF.point=lV}function lH(){lF.point=lK}function lq(){lX(u1,u2),lF.point=lV}function lK(e,t){u1=e,u2=t,e*=sU,t*=sU,lF.point=lX;var n=sq(t);u3=n*sq(e),u4=n*sQ(e),u5=sQ(t),lj(u3,u4,u5)}function lX(e,t){e*=sU;var n=sq(t*=sU),i=n*sq(e),o=n*sQ(e),a=sQ(t),s=u4*a-u5*o,l=u5*i-u3*a,u=u3*o-u4*i,c=sY(s,l,u),d=s3(c),f=c&&-d/c;uQ.add(f*s),u$.add(f*l),u0.add(f*u),uH+=d,uY+=d*(u3+(u3=i)),uZ+=d*(u4+(u4=o)),uJ+=d*(u5+(u5=a)),lj(u3,u4,u5)}function lY(e){uW=uH=uq=uK=uX=uY=uZ=uJ=0,uQ=new N,u$=new N,u0=new N,le(e,lF);var t=+uQ,n=+u$,i=+u0,o=sY(t,n,i);return o<1e-12&&(t=uY,n=uZ,i=uJ,uH<1e-6&&(t=uq,n=uK,i=uX),(o=sY(t,n,i))<1e-12)?[NaN,NaN]:[sH(n,t)*sG,s3(i/o)*sG]}function lZ(e){return function(){return e}}function lJ(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function lQ(e,t){return sz(e)>sL&&(e-=Math.round(e/sj)*sj),[e,t]}function l$(e,t,n){return(e%=sj)?t||n?lJ(l1(e),l2(t,n)):l1(e):t||n?l2(t,n):lQ}function l0(e){return function(t,n){return sz(t+=e)>sL&&(t-=Math.round(t/sj)*sj),[t,n]}}function l1(e){var t=l0(e);return t.invert=l0(-e),t}function l2(e,t){var n=sq(e),i=sQ(e),o=sq(t),a=sQ(t);function s(e,t){var s=sq(t),l=sq(e)*s,u=sQ(e)*s,c=sQ(t),d=c*n+l*i;return[sH(u*o-d*a,l*n-c*i),s3(d*o+u*a)]}return s.invert=function(e,t){var s=sq(t),l=sq(e)*s,u=sQ(e)*s,c=sQ(t),d=c*o-u*a;return[sH(u*o+c*a,l*n+d*i),s3(d*n-l*i)]},s}function l3(e){function t(t){return t=e(t[0]*sU,t[1]*sU),t[0]*=sG,t[1]*=sG,t}return e=l$(e[0]*sU,e[1]*sU,e.length>2?e[2]*sU:0),t.invert=function(t){return t=e.invert(t[0]*sU,t[1]*sU),t[0]*=sG,t[1]*=sG,t},t}function l4(e,t,n,i,o,a){if(n){var s=sq(t),l=sQ(t),u=i*n;null==o?(o=t+i*sj,a=t-u/2):(o=l5(s,o),a=l5(s,a),(i>0?o<a:o>a)&&(o+=i*sj));for(var c,d=o;i>0?d>a:d<a;d-=u)c=lb([s,-l*sq(d),-l*sQ(d)]),e.point(c[0],c[1])}}function l5(e,t){t=lx(t),t[0]-=e,l_(t);var n=s2(-t[1]);return((0>-t[2]?-n:n)+sj-1e-6)%sj}function l6(){var e,t,n=lZ([0,0]),i=lZ(90),o=lZ(2),a={point:function(n,i){e.push(n=t(n,i)),n[0]*=sG,n[1]*=sG}};function s(){var s=n.apply(this,arguments),l=i.apply(this,arguments)*sU,u=o.apply(this,arguments)*sU;return e=[],t=l$(-s[0]*sU,-s[1]*sU,0).invert,l4(a,l,u,1),s={type:"Polygon",coordinates:[e]},e=t=null,s}return s.center=function(e){return arguments.length?(n="function"==typeof e?e:lZ([+e[0],+e[1]]),s):n},s.radius=function(e){return arguments.length?(i="function"==typeof e?e:lZ(+e),s):i},s.precision=function(e){return arguments.length?(o="function"==typeof e?e:lZ(+e),s):o},s}function l8(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:s4,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function l9(e,t){return 1e-6>sz(e[0]-t[0])&&1e-6>sz(e[1]-t[1])}function l7(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ue(e,t,n,i,o){var a,s,l=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],s=e[t];if(l9(i,s)){if(!i[2]&&!s[2]){for(o.lineStart(),a=0;a<t;++a)o.point((i=e[a])[0],i[1]);o.lineEnd();return}s[0]+=2e-6}l.push(n=new l7(i,e,null,!0)),u.push(n.o=new l7(i,null,n,!1)),l.push(n=new l7(s,e,null,!1)),u.push(n.o=new l7(s,null,n,!0))}}),l.length){for(u.sort(t),ut(l),ut(u),a=0,s=u.length;a<s;++a)u[a].e=n=!n;for(var c,d,f=l[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;c=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(a=0,s=c.length;a<s;++a)o.point((d=c[a])[0],d[1]);else i(p.x,p.n.x,1,o);p=p.n}else{if(h)for(a=(c=p.p.z).length-1;a>=0;--a)o.point((d=c[a])[0],d[1]);else i(p.x,p.p.x,-1,o);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);o.lineEnd()}}}function ut(e){if(t=e.length){for(var t,n,i=0,o=e[0];++i<t;)o.n=n=e[i],n.p=o,o=n;o.n=n=e[0],n.p=o}}function un(e){return sz(e[0])<=sL?e[0]:s$(e[0])*((sz(e[0])+sL)%sj-sL)}function ur(e,t){var n=un(t),i=t[1],o=sQ(i),a=[sQ(n),-sq(n),0],s=0,l=0,u=new N;1===o?i=sF+1e-6:-1===o&&(i=-sF-1e-6);for(var c=0,d=e.length;c<d;++c)if(p=(f=e[c]).length)for(var f,p,h=f[p-1],m=un(h),g=h[1]/2+sV,v=sQ(g),y=sq(g),b=0;b<p;++b,m=w,v=C,y=S,h=x){var x=f[b],w=un(x),A=x[1]/2+sV,C=sQ(A),S=sq(A),_=w-m,T=_>=0?1:-1,O=T*_,P=O>sL,M=v*C;if(u.add(sH(M*T*sQ(O),y*S+M*sq(O))),s+=P?_+T*sj:_,P^m>=n^w>=n){var E=lA(lx(h),lx(x));l_(E);var D=lA(a,E);l_(D);var I=(P^_>=0?-1:1)*s3(D[2]);(i>I||i===I&&(E[0]||E[1]))&&(l+=P^_>=0?1:-1)}}return(s<-1e-6||s<1e-6&&u<-1e-12)^1&l}function ui(e,t,n,i){return function(o){var a,s,l,u=t(o),c=l8(),d=t(c),f=!1,p={point:h,lineStart:g,lineEnd:v,polygonStart:function(){p.point=y,p.lineStart=b,p.lineEnd=x,s=[],a=[]},polygonEnd:function(){p.point=h,p.lineStart=g,p.lineEnd=v,s=eF(s);var e=ur(a,i);s.length?(f||(o.polygonStart(),f=!0),ue(s,ua,e,n,o)):e&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function h(t,n){e(t,n)&&o.point(t,n)}function m(e,t){u.point(e,t)}function g(){p.point=m,u.lineStart()}function v(){p.point=h,u.lineEnd()}function y(e,t){l.push([e,t]),d.point(e,t)}function b(){d.lineStart(),l=[]}function x(){y(l[0][0],l[0][1]),d.lineEnd();var e,t,n,i,u=d.clean(),p=c.result(),h=p.length;if(l.pop(),a.push(l),l=null,h){if(1&u){if((t=(n=p[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),e=0;e<t;++e)o.point((i=n[e])[0],i[1]);o.lineEnd()}return}h>1&&2&u&&p.push(p.pop().concat(p.shift())),s.push(p.filter(uo))}}return p}}function uo(e){return e.length>1}function ua(e,t){return((e=e.x)[0]<0?e[1]-sF-1e-6:sF-e[1])-((t=t.x)[0]<0?t[1]-sF-1e-6:sF-t[1])}lQ.invert=lQ;let us=ui(function(){return!0},function(e){var t,n=NaN,i=NaN,o=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var l,u,c,d,f,p,h,m=a>0?sL:-sL,g=sz(a-n);1e-6>sz(g-sL)?(e.point(n,i=(i+s)/2>0?sF:-sF),e.point(o,i),e.lineEnd(),e.lineStart(),e.point(m,i),e.point(a,i),t=0):o!==m&&g>=sL&&(1e-6>sz(n-o)&&(n-=1e-6*o),1e-6>sz(a-m)&&(a-=1e-6*m),l=n,u=i,c=a,d=s,i=sz(h=sQ(l-c))>1e-6?sW((sQ(u)*(p=sq(d))*sQ(c)-sQ(d)*(f=sq(u))*sQ(l))/(f*p*h)):(u+d)/2,e.point(o,i),e.lineEnd(),e.lineStart(),e.point(m,i),t=0),e.point(n=a,i=s),o=m},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var o;if(null==e)o=n*sF,i.point(-sL,o),i.point(0,o),i.point(sL,o),i.point(sL,0),i.point(sL,-o),i.point(0,-o),i.point(-sL,-o),i.point(-sL,0),i.point(-sL,o);else if(sz(e[0]-t[0])>1e-6){var a=e[0]<t[0]?sL:-sL;o=n*a/2,i.point(-a,o),i.point(0,o),i.point(a,o)}else i.point(t[0],t[1])},[-sL,-sF]);function ul(e){var t=sq(e),n=2*sU,i=t>0,o=sz(t)>1e-6;function a(e,n){return sq(e)*sq(n)>t}function s(e,n,i){var o=lx(e),a=lx(n),s=[1,0,0],l=lA(o,a),u=lw(l,l),c=l[0],d=u-c*c;if(!d)return!i&&e;var f=lA(s,l),p=lS(s,t*u/d);lC(p,lS(l,-t*c/d));var h=lw(p,f),m=lw(f,f),g=h*h-m*(lw(p,p)-1);if(!(g<0)){var v=s0(g),y=lS(f,(-h-v)/m);if(lC(y,p),y=lb(y),!i)return y;var b,x=e[0],w=n[0],A=e[1],C=n[1];w<x&&(b=x,x=w,w=b);var S=w-x,_=1e-6>sz(S-sL);if(!_&&C<A&&(b=A,A=C,C=b),_||S<1e-6?_?A+C>0^y[1]<(1e-6>sz(y[0]-x)?A:C):A<=y[1]&&y[1]<=C:S>sL^(x<=y[0]&&y[0]<=w)){var T=lS(f,(-h+v)/m);return lC(T,p),[y,lb(T)]}}}function l(t,n){var o=i?e:sL-e,a=0;return t<-o?a|=1:t>o&&(a|=2),n<-o?a|=4:n>o&&(a|=8),a}return ui(a,function(e){var t,n,u,c,d;return{lineStart:function(){c=u=!1,d=1},point:function(f,p){var h,m,g=[f,p],v=a(f,p),y=i?v?0:l(f,p):v?l(f+(f<0?sL:-sL),p):0;!t&&(c=u=v)&&e.lineStart(),v!==u&&(!(m=s(t,g))||l9(t,m)||l9(g,m))&&(g[2]=1),v!==u?(d=0,v?(e.lineStart(),m=s(g,t),e.point(m[0],m[1])):(m=s(t,g),e.point(m[0],m[1],2),e.lineEnd()),t=m):o&&t&&i^v&&!(y&n)&&(h=s(g,t,!0))&&(d=0,i?(e.lineStart(),e.point(h[0][0],h[0][1]),e.point(h[1][0],h[1][1]),e.lineEnd()):(e.point(h[1][0],h[1][1]),e.lineEnd(),e.lineStart(),e.point(h[0][0],h[0][1],3))),!v||t&&l9(t,g)||e.point(g[0],g[1]),t=g,u=v,n=y},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return d|(c&&u)<<1}}},function(t,i,o,a){l4(a,e,n,o,t,i)},i?[0,-e]:[-sL,e-sL])}function uu(e,t,n,i){function o(o,a){return e<=o&&o<=n&&t<=a&&a<=i}function a(o,a,l,c){var d=0,f=0;if(null==o||(d=s(o,l))!==(f=s(a,l))||0>u(o,a)^l>0)do c.point(0===d||3===d?e:n,d>1?i:t);while((d=(d+l+4)%4)!==f);else c.point(a[0],a[1])}function s(i,o){return 1e-6>sz(i[0]-e)?o>0?0:3:1e-6>sz(i[0]-n)?o>0?2:1:1e-6>sz(i[1]-t)?+(o>0):o>0?3:2}function l(e,t){return u(e.x,t.x)}function u(e,t){var n=s(e,1),i=s(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){var u,c,d,f,p,h,m,g,v,y,b,x=s,w=l8(),A={point:C,lineStart:function(){A.point=S,c&&c.push(d=[]),y=!0,v=!1,m=g=NaN},lineEnd:function(){u&&(S(f,p),h&&v&&w.rejoin(),u.push(w.result())),A.point=C,v&&x.lineEnd()},polygonStart:function(){x=w,u=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,o=c.length;n<o;++n)for(var a,s,l=c[n],u=1,d=l.length,f=l[0],p=f[0],h=f[1];u<d;++u)a=p,s=h,p=(f=l[u])[0],h=f[1],s<=i?h>i&&(p-a)*(i-s)>(h-s)*(e-a)&&++t:h<=i&&(p-a)*(i-s)<(h-s)*(e-a)&&--t;return t}(),n=b&&t,o=(u=eF(u)).length;(n||o)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),o&&ue(u,l,t,a,s),s.polygonEnd()),x=s,u=c=d=null}};function C(e,t){o(e,t)&&x.point(e,t)}function S(a,s){var l=o(a,s);if(c&&d.push([a,s]),y)f=a,p=s,h=l,y=!1,l&&(x.lineStart(),x.point(a,s));else if(l&&v)x.point(a,s);else{var u=[m=Math.max(-1e9,Math.min(1e9,m)),g=Math.max(-1e9,Math.min(1e9,g))],w=[a=Math.max(-1e9,Math.min(1e9,a)),s=Math.max(-1e9,Math.min(1e9,s))];!function(e,t,n,i,o,a){var s,l=e[0],u=e[1],c=t[0],d=t[1],f=0,p=1,h=c-l,m=d-u;if(s=n-l,!h&&s>0)return;if(s/=h,h<0){if(s<f)return;s<p&&(p=s)}else if(h>0){if(s>p)return;s>f&&(f=s)}if(s=o-l,h||!(s<0)){if(s/=h,h<0){if(s>p)return;s>f&&(f=s)}else if(h>0){if(s<f)return;s<p&&(p=s)}if(s=i-u,m||!(s>0)){if(s/=m,m<0){if(s<f)return;s<p&&(p=s)}else if(m>0){if(s>p)return;s>f&&(f=s)}if(s=a-u,m||!(s<0)){if(s/=m,m<0){if(s>p)return;s>f&&(f=s)}else if(m>0){if(s<f)return;s<p&&(p=s)}return f>0&&(e[0]=l+f*h,e[1]=u+f*m),p<1&&(t[0]=l+p*h,t[1]=u+p*m),!0}}}}(u,w,e,t,n,i)?l&&(x.lineStart(),x.point(a,s),b=!1):(v||(x.lineStart(),x.point(u[0],u[1])),x.point(w[0],w[1]),l||x.lineEnd(),b=!1)}m=a,g=s,v=l}return A}}function uc(){var e,t,n,i=0,o=0,a=960,s=500;return n={stream:function(n){return e&&t===n?e:e=uu(i,o,a,s)(t=n)},extent:function(l){return arguments.length?(i=+l[0][0],o=+l[0][1],a=+l[1][0],s=+l[1][1],e=t=null,n):[[i,o],[a,s]]}}}var ud={sphere:s4,point:s4,lineStart:function(){ud.point=up,ud.lineEnd=uf},lineEnd:s4,polygonStart:s4,polygonEnd:s4};function uf(){ud.point=ud.lineEnd=s4}function up(e,t){e*=sU,t*=sU,u8=e,u9=sQ(t),u7=sq(t),ud.point=uh}function uh(e,t){e*=sU;var n=sQ(t*=sU),i=sq(t),o=sz(e-u8),a=sq(o),s=i*sQ(o),l=u7*n-u9*i*a,u=u9*n+u7*i*a;u6.add(sH(s0(s*s+l*l),u)),u8=e,u9=n,u7=i}function um(e){return u6=new N,le(e,ud),+u6}var ug=[null,null],uv={type:"LineString",coordinates:ug};function uy(e,t){return ug[0]=e,ug[1]=t,um(uv)}var ub={Feature:function(e,t){return uw(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,o=n.length;++i<o;)if(uw(n[i].geometry,t))return!0;return!1}},ux={Sphere:function(){return!0},Point:function(e,t){var n;return n=e.coordinates,0===uy(n,t)},MultiPoint:function(e,t){for(var n,i=e.coordinates,o=-1,a=i.length;++o<a;){if(n=i[o],0===uy(n,t))return!0}return!1},LineString:function(e,t){return uA(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)if(uA(n[i],t))return!0;return!1},Polygon:function(e,t){return uC(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)if(uC(n[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,o=n.length;++i<o;)if(uw(n[i],t))return!0;return!1}};function uw(e,t){return!!(e&&ux.hasOwnProperty(e.type))&&ux[e.type](e,t)}function uA(e,t){for(var n,i,o,a=0,s=e.length;a<s;a++){if(0===(i=uy(e[a],t))||a>0&&(o=uy(e[a],e[a-1]))>0&&n<=o&&i<=o&&(n+i-o)*(1-Math.pow((n-i)/o,2))<1e-12*o)return!0;n=i}return!1}function uC(e,t){return!!ur(e.map(uS),u_(t))}function uS(e){return(e=e.map(u_)).pop(),e}function u_(e){return[e[0]*sU,e[1]*sU]}function uT(e,t){return(e&&ub.hasOwnProperty(e.type)?ub[e.type]:uw)(e,t)}function uO(e,t,n){var i=eU(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function uP(e,t,n){var i=eU(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function uM(){var e,t,n,i,o,a,s,l,u,c,d,f,p=10,h=10,m=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return eU(sK(i/m)*m,n,m).map(d).concat(eU(sK(l/g)*g,s,g).map(f)).concat(eU(sK(t/p)*p,e,p).filter(function(e){return sz(e%m)>1e-6}).map(u)).concat(eU(sK(a/h)*h,o,h).filter(function(e){return sz(e%g)>1e-6}).map(c))}return y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(f(s).slice(1),d(n).reverse().slice(1),f(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],l=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),l>s&&(e=l,l=s,s=e),y.precision(v)):[[i,l],[n,s]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],o=+n[1][1],t>e&&(n=t,t=e,e=n),a>o&&(n=a,a=o,o=n),y.precision(v)):[[t,a],[e,o]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(m=+e[0],g=+e[1],y):[m,g]},y.stepMinor=function(e){return arguments.length?(p=+e[0],h=+e[1],y):[p,h]},y.precision=function(p){return arguments.length?(v=+p,u=uO(a,o,90),c=uP(t,e,v),d=uO(l,s,90),f=uP(i,n,v),y):v},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function uE(){return uM()()}function uD(e,t){var n,i,o=e[0]*sU,a=e[1]*sU,s=t[0]*sU,l=t[1]*sU,u=sq(a),c=sQ(a),d=sq(l),f=sQ(l),p=u*sq(o),h=u*sQ(o),m=d*sq(s),g=d*sQ(s),v=2*s3(s0((n=sQ((n=l-a)/2))*n+u*d*((i=sQ((i=s-o)/2))*i))),y=sQ(v),b=v?function(e){var t=sQ(e*=v)/y,n=sQ(v-e)/y,i=n*p+t*m,o=n*h+t*g;return[sH(o,i)*sG,sH(n*c+t*f,s0(i*i+o*o))*sG]}:function(){return[o*sG,a*sG]};return b.distance=v,b}let uI=e=>e;var uk,uN,uR,uB,uL,uF,uV,uj,uG,uU,uz,uW,uH,uq,uK,uX,uY,uZ,uJ,uQ,u$,u0,u1,u2,u3,u4,u5,u6,u8,u9,u7,ce,ct,cn,cr,ci=new N,co=new N,ca={point:s4,lineStart:s4,lineEnd:s4,polygonStart:function(){ca.lineStart=cs,ca.lineEnd=cc},polygonEnd:function(){ca.lineStart=ca.lineEnd=ca.point=s4,ci.add(sz(co)),co=new N},result:function(){var e=ci/2;return ci=new N,e}};function cs(){ca.point=cl}function cl(e,t){ca.point=cu,ce=cn=e,ct=cr=t}function cu(e,t){co.add(cr*e-cn*t),cn=e,cr=t}function cc(){cu(ce,ct)}var cd=1/0,cf=1/0,cp=-1/0,ch=cp;let cm={point:function(e,t){e<cd&&(cd=e),e>cp&&(cp=e),t<cf&&(cf=t),t>ch&&(ch=t)},lineStart:s4,lineEnd:s4,polygonStart:s4,polygonEnd:s4,result:function(){var e=[[cd,cf],[cp,ch]];return cp=ch=-(cf=cd=1/0),e}};var cg,cv,cy,cb,cx=0,cw=0,cA=0,cC=0,cS=0,c_=0,cT=0,cO=0,cP=0,cM={point:cE,lineStart:cD,lineEnd:cN,polygonStart:function(){cM.lineStart=cR,cM.lineEnd=cB},polygonEnd:function(){cM.point=cE,cM.lineStart=cD,cM.lineEnd=cN},result:function(){var e=cP?[cT/cP,cO/cP]:c_?[cC/c_,cS/c_]:cA?[cx/cA,cw/cA]:[NaN,NaN];return cx=cw=cA=cC=cS=c_=cT=cO=cP=0,e}};function cE(e,t){cx+=e,cw+=t,++cA}function cD(){cM.point=cI}function cI(e,t){cM.point=ck,cE(cy=e,cb=t)}function ck(e,t){var n=e-cy,i=t-cb,o=s0(n*n+i*i);cC+=o*(cy+e)/2,cS+=o*(cb+t)/2,c_+=o,cE(cy=e,cb=t)}function cN(){cM.point=cE}function cR(){cM.point=cL}function cB(){cF(cg,cv)}function cL(e,t){cM.point=cF,cE(cg=cy=e,cv=cb=t)}function cF(e,t){var n=e-cy,i=t-cb,o=s0(n*n+i*i);cC+=o*(cy+e)/2,cS+=o*(cb+t)/2,c_+=o,cT+=(o=cb*e-cy*t)*(cy+e),cO+=o*(cb+t),cP+=3*o,cE(cy=e,cb=t)}function cV(e){this._context=e}cV.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,sj)}},result:s4};var cj,cG,cU,cz,cW,cH=new N,cq={point:s4,lineStart:function(){cq.point=cK},lineEnd:function(){cj&&cX(cG,cU),cq.point=s4},polygonStart:function(){cj=!0},polygonEnd:function(){cj=null},result:function(){var e=+cH;return cH=new N,e}};function cK(e,t){cq.point=cX,cG=cz=e,cU=cW=t}function cX(e,t){cz-=e,cW-=t,cH.add(s0(cz*cz+cW*cW)),cz=e,cW=t}class cY{constructor(e){this._append=null==e?cZ:function(e){let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);if(t>15)return cZ;if(t!==i){let e=10**t;i=t,o=function(t){let n=1;this._+=t[0];for(let i=t.length;n<i;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return o}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==a||this._append!==o){let e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,a=e,o=this._append,s=this._,this._=t}this._+=s}}result(){let e=this._;return this._="",e.length?e:null}}function cZ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cJ(e,t){let n=3,i=4.5,o,a;function s(e){return e&&("function"==typeof i&&a.pointRadius(+i.apply(this,arguments)),le(e,o(a))),a.result()}return s.area=function(e){return le(e,o(ca)),ca.result()},s.measure=function(e){return le(e,o(cq)),cq.result()},s.bounds=function(e){return le(e,o(cm)),cm.result()},s.centroid=function(e){return le(e,o(cM)),cM.result()},s.projection=function(t){return arguments.length?(o=null==t?(e=null,uI):(e=t).stream,s):e},s.context=function(e){return arguments.length?(a=null==e?(t=null,new cY(n)):new cV(t=e),"function"!=typeof i&&a.pointRadius(i),s):t},s.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(a.pointRadius(+e),+e),s):i},s.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);n=t}return null===t&&(a=new cY(n)),s},s.projection(e).digits(n).context(t)}function cQ(e){return{stream:c$(e)}}function c$(e){return function(t){var n=new c0;for(var i in e)n[i]=e[i];return n.stream=t,n}}function c0(){}function c1(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),le(n,e.stream(cm)),t(cm.result()),null!=i&&e.clipExtent(i),e}function c2(e,t,n){return c1(e,function(n){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),s=+t[0][0]+(i-a*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(o-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function c3(e,t,n){return c2(e,[[0,0],t],n)}function c4(e,t,n){return c1(e,function(n){var i=+t,o=i/(n[1][0]-n[0][0]),a=(i-o*(n[1][0]+n[0][0]))/2,s=-o*n[0][1];e.scale(150*o).translate([a,s])},n)}function c5(e,t,n){return c1(e,function(n){var i=+t,o=i/(n[1][1]-n[0][1]),a=-o*n[0][0],s=(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])},n)}c0.prototype={constructor:c0,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var c6=sq(30*sU);function c8(e,t){var n;return+t?function(e,t){function n(i,o,a,s,l,u,c,d,f,p,h,m,g,v){var y=c-i,b=d-o,x=y*y+b*b;if(x>4*t&&g--){var w=s+p,A=l+h,C=u+m,S=s0(w*w+A*A+C*C),_=s3(C/=S),T=1e-6>sz(sz(C)-1)||1e-6>sz(a-f)?(a+f)/2:sH(A,w),O=e(T,_),P=O[0],M=O[1],E=P-i,D=M-o,I=b*E-y*D;(I*I/x>t||sz((y*E+b*D)/x-.5)>.3||s*p+l*h+u*m<c6)&&(n(i,o,a,s,l,u,P,M,T,w/=S,A/=S,C,g,v),v.point(P,M),n(P,M,T,w,A,C,c,d,f,p,h,m,g,v))}}return function(t){var i,o,a,s,l,u,c,d,f,p,h,m,g={point:v,lineStart:y,lineEnd:x,polygonStart:function(){t.polygonStart(),g.lineStart=w},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function v(n,i){n=e(n,i),t.point(n[0],n[1])}function y(){d=NaN,g.point=b,t.lineStart()}function b(i,o){var a=lx([i,o]),s=e(i,o);n(d,f,c,p,h,m,d=s[0],f=s[1],c=i,p=a[0],h=a[1],m=a[2],16,t),t.point(d,f)}function x(){g.point=v,t.lineEnd()}function w(){y(),g.point=A,g.lineEnd=C}function A(e,t){b(i=e,t),o=d,a=f,s=p,l=h,u=m,g.point=b}function C(){n(d,f,c,p,h,m,o,a,i,s,l,u,16,t),g.lineEnd=x,x()}return g}}(e,t):(n=e,c$({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var c9=c$({point:function(e,t){this.stream.point(e*sU,t*sU)}});function c7(e,t,n,i,o,a){if(!a){function s(a,s){return[t+e*(a*=i),n-e*(s*=o)]}return s.invert=function(a,s){return[(a-t)/e*i,(n-s)/e*o]},s}var l=sq(a),u=sQ(a),c=l*e,d=u*e,f=l/e,p=u/e,h=(u*n-l*t)/e,m=(u*t+l*n)/e;function g(e,a){return[c*(e*=i)-d*(a*=o)+t,n-d*e-c*a]}return g.invert=function(e,t){return[i*(f*e-p*t+h),o*(m-p*e-f*t)]},g}function de(e){return dt(function(){return e})()}function dt(e){var t,n,i,o,a,s,l,u,c,d,f=150,p=480,h=250,m=0,g=0,v=0,y=0,b=0,x=0,w=1,A=1,C=null,S=us,_=null,T=uI,O=.5;function P(e){return u(e[0]*sU,e[1]*sU)}function M(e){return(e=u.invert(e[0],e[1]))&&[e[0]*sG,e[1]*sG]}function E(){var e=c7(f,0,0,w,A,x).apply(null,t(m,g)),i=c7(f,p-e[0],h-e[1],w,A,x);return n=l$(v,y,b),l=lJ(t,i),u=lJ(n,l),s=c8(l,O),D()}function D(){return c=d=null,P}return P.stream=function(e){var t;return c&&d===e?c:c=c9((t=n,c$({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(S(s(T(d=e)))))},P.preclip=function(e){return arguments.length?(S=e,C=void 0,D()):S},P.postclip=function(e){return arguments.length?(T=e,_=i=o=a=null,D()):T},P.clipAngle=function(e){return arguments.length?(S=+e?ul(C=e*sU):(C=null,us),D()):C*sG},P.clipExtent=function(e){return arguments.length?(T=null==e?(_=i=o=a=null,uI):uu(_=+e[0][0],i=+e[0][1],o=+e[1][0],a=+e[1][1]),D()):null==_?null:[[_,i],[o,a]]},P.scale=function(e){return arguments.length?(f=+e,E()):f},P.translate=function(e){return arguments.length?(p=+e[0],h=+e[1],E()):[p,h]},P.center=function(e){return arguments.length?(m=e[0]%360*sU,g=e[1]%360*sU,E()):[m*sG,g*sG]},P.rotate=function(e){return arguments.length?(v=e[0]%360*sU,y=e[1]%360*sU,b=e.length>2?e[2]%360*sU:0,E()):[v*sG,y*sG,b*sG]},P.angle=function(e){return arguments.length?(x=e%360*sU,E()):x*sG},P.reflectX=function(e){return arguments.length?(w=e?-1:1,E()):w<0},P.reflectY=function(e){return arguments.length?(A=e?-1:1,E()):A<0},P.precision=function(e){return arguments.length?(s=c8(l,O=e*e),D()):s0(O)},P.fitExtent=function(e,t){return c2(P,e,t)},P.fitSize=function(e,t){return c3(P,e,t)},P.fitWidth=function(e,t){return c4(P,e,t)},P.fitHeight=function(e,t){return c5(P,e,t)},function(){return t=e.apply(this,arguments),P.invert=t.invert&&M,E()}}function dn(e){var t=0,n=sL/3,i=dt(e),o=i(t,n);return o.parallels=function(e){return arguments.length?i(t=e[0]*sU,n=e[1]*sU):[t*sG,n*sG]},o}function dr(e,t){var n=sQ(e),i=(n+sQ(t))/2;if(1e-6>sz(i)){var o=sq(e);function a(e,t){return[e*o,sQ(t)/o]}return a.invert=function(e,t){return[e/o,s3(t*o)]},a}var s=1+n*(2*i-n),l=s0(s)/i;function u(e,t){var n=s0(s-2*i*sQ(t))/i;return[n*sQ(e*=i),l-n*sq(e)]}return u.invert=function(e,t){var n=l-t,o=sH(e,sz(n))*s$(n);return n*i<0&&(o-=sL*s$(e)*s$(n)),[o/i,s3((s-(e*e+n*n)*i*i)/(2*i))]},u}function di(){return dn(dr).scale(155.424).center([0,33.6442])}function da(){return di().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ds(){var e,t,n,i,o,a,s=da(),l=di().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=di().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};function d(e){var t=e[0],s=e[1];return a=null,n.point(t,s),a||(i.point(t,s),a)||(o.point(t,s),a)}function f(){return e=t=null,d}return d.invert=function(e){var t=s.scale(),n=s.translate(),i=(e[0]-n[0])/t,o=(e[1]-n[1])/t;return(o>=.12&&o<.234&&i>=-.425&&i<-.214?l:o>=.166&&o<.234&&i>=-.214&&i<-.115?u:s).invert(e)},d.stream=function(n){var i,o;return e&&t===n?e:(o=(i=[s.stream(t=n),l.stream(n),u.stream(n)]).length,e={point:function(e,t){for(var n=-1;++n<o;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<o;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<o;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<o;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<o;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<o;)i[e].polygonEnd()}})},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),f()):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),a=+e[0],d=+e[1];return n=s.translate(e).clipExtent([[a-.455*t,d-.238*t],[a+.455*t,d+.238*t]]).stream(c),i=l.translate([a-.307*t,d+.201*t]).clipExtent([[a-.425*t+1e-6,d+.12*t+1e-6],[a-.214*t-1e-6,d+.234*t-1e-6]]).stream(c),o=u.translate([a-.205*t,d+.212*t]).clipExtent([[a-.214*t+1e-6,d+.166*t+1e-6],[a-.115*t-1e-6,d+.234*t-1e-6]]).stream(c),f()},d.fitExtent=function(e,t){return c2(d,e,t)},d.fitSize=function(e,t){return c3(d,e,t)},d.fitWidth=function(e,t){return c4(d,e,t)},d.fitHeight=function(e,t){return c5(d,e,t)},d.scale(1070)}function dl(e){return function(t,n){var i=sq(t),o=sq(n),a=e(i*o);return a===1/0?[2,0]:[a*o*sQ(t),a*sQ(n)]}}function du(e){return function(t,n){var i=s0(t*t+n*n),o=e(i),a=sQ(o);return[sH(t*a,i*sq(o)),s3(i&&n*a/i)]}}var dc=dl(function(e){return s0(2/(1+e))});function dd(){return de(dc).scale(124.75).clipAngle(179.999)}dc.invert=du(function(e){return 2*s3(e/2)});var df=dl(function(e){return(e=s2(e))&&e/sQ(e)});function dp(){return de(df).scale(79.4188).clipAngle(179.999)}function dh(e,t){return[e,sZ(s1((sF+t)/2))]}function dm(){return dg(dh).scale(961/sj)}function dg(e){var t,n,i,o=de(e),a=o.center,s=o.scale,l=o.translate,u=o.clipExtent,c=null;function d(){var a=sL*s(),l=o(l3(o.rotate()).invert([0,0]));return u(null==c?[[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]]:e===dh?[[Math.max(l[0]-a,c),t],[Math.min(l[0]+a,n),i]]:[[c,Math.max(l[1]-a,t)],[n,Math.min(l[1]+a,i)]])}return o.scale=function(e){return arguments.length?(s(e),d()):s()},o.translate=function(e){return arguments.length?(l(e),d()):l()},o.center=function(e){return arguments.length?(a(e),d()):a()},o.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),d()):null==c?null:[[c,t],[n,i]]},d()}function dv(e){return s1((sF+e)/2)}function dy(e,t){var n=sq(e),i=e===t?sQ(e):sZ(n/sq(t))/sZ(dv(t)/dv(e)),o=n*sJ(dv(e),i)/i;if(!i)return dh;function a(e,t){o>0?t<-sF+1e-6&&(t=-sF+1e-6):t>sF-1e-6&&(t=sF-1e-6);var n=o/sJ(dv(t),i);return[n*sQ(i*e),o-n*sq(i*e)]}return a.invert=function(e,t){var n=o-t,a=s$(i)*s0(e*e+n*n),s=sH(e,sz(n))*s$(n);return n*i<0&&(s-=sL*s$(e)*s$(n)),[s/i,2*sW(sJ(o/a,1/i))-sF]},a}function db(){return dn(dy).scale(109.5).parallels([30,30])}function dx(e,t){return[e,t]}function dw(){return de(dx).scale(152.63)}function dA(e,t){var n=sq(e),i=e===t?sQ(e):(n-sq(t))/(t-e),o=n/i+e;if(1e-6>sz(i))return dx;function a(e,t){var n=o-t,a=i*e;return[n*sQ(a),o-n*sq(a)]}return a.invert=function(e,t){var n=o-t,a=sH(e,sz(n))*s$(n);return n*i<0&&(a-=sL*s$(e)*s$(n)),[a/i,o-s$(i)*s0(e*e+n*n)]},a}function dC(){return dn(dA).scale(131.154).center([0,13.9389])}df.invert=du(function(e){return e}),dh.invert=function(e,t){return[e,2*sW(sX(t))-sF]},dx.invert=dx;var dS=s0(3)/2;function d_(e,t){var n=s3(dS*sQ(t)),i=n*n,o=i*i*i;return[e*sq(n)/(dS*(1.340264+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))),n*(1.340264+-.081106*i+o*(893e-6+.003796*i))]}function dT(){return de(d_).scale(177.158)}function dO(e,t){var n=sq(t),i=sq(e)*n;return[n*sQ(e)/i,sQ(t)/i]}function dP(){return de(dO).scale(144.049).clipAngle(60)}function dM(){var e,t,n,i,o,a,s,l=1,u=0,c=0,d=1,f=1,p=0,h=null,m=1,g=1,v=c$({point:function(e,t){var n=x([e,t]);this.stream.point(n[0],n[1])}}),y=uI;function b(){return m=l*d,g=l*f,a=s=null,x}function x(n){var i=n[0]*m,o=n[1]*g;if(p){var a=o*e-i*t;i=i*e+o*t,o=a}return[i+u,o+c]}return x.invert=function(n){var i=n[0]-u,o=n[1]-c;if(p){var a=o*e+i*t;i=i*e-o*t,o=a}return[i/m,o/g]},x.stream=function(e){return a&&s===e?a:a=v(y(s=e))},x.postclip=function(e){return arguments.length?(y=e,h=n=i=o=null,b()):y},x.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=i=o=null,uI):uu(h=+e[0][0],n=+e[0][1],i=+e[1][0],o=+e[1][1]),b()):null==h?null:[[h,n],[i,o]]},x.scale=function(e){return arguments.length?(l=+e,b()):l},x.translate=function(e){return arguments.length?(u=+e[0],c=+e[1],b()):[u,c]},x.angle=function(n){return arguments.length?(t=sQ(p=n%360*sU),e=sq(p),b()):p*sG},x.reflectX=function(e){return arguments.length?(d=e?-1:1,b()):d<0},x.reflectY=function(e){return arguments.length?(f=e?-1:1,b()):f<0},x.fitExtent=function(e,t){return c2(x,e,t)},x.fitSize=function(e,t){return c3(x,e,t)},x.fitWidth=function(e,t){return c4(x,e,t)},x.fitHeight=function(e,t){return c5(x,e,t)},x}function dE(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}function dD(){return de(dE).scale(175.295)}function dI(e,t){return[sq(t)*sQ(e),sQ(t)]}function dk(){return de(dI).scale(249.5).clipAngle(90.000001)}function dN(e,t){var n=sq(t),i=1+sq(e)*n;return[n*sQ(e)/i,sQ(t)/i]}function dR(){return de(dN).scale(250).clipAngle(142)}function dB(e,t){return[sZ(s1((sF+t)/2)),-e]}function dL(){var e=dg(dB),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}function dF(e,t){return e.parent===t.parent?1:2}function dV(e,t){return e+t.x}function dj(e,t){return Math.max(e,t.y)}function dG(){var e=dF,t=1,n=1,i=!1;function o(o){var a,s=0;o.eachAfter(function(t){var n=t.children;n?(t.x=n.reduce(dV,0)/n.length,t.y=1+n.reduce(dj,0)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var l=function(e){for(var t;t=e.children;)e=t[0];return e}(o),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(e){e.x=(e.x-o.x)*t,e.y=(o.y-e.y)*n}:function(e){e.x=(e.x-c)/(d-c)*t,e.y=(1-(o.y?e.y/o.y:1))*n})}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],o):i?null:[t,n]},o.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],o):i?[t,n]:null},o}function dU(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function dz(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=dH)):void 0===t&&(t=dW);for(var n,i,o,a,s,l=new dX(e),u=[l];n=u.pop();)if((o=t(n.data))&&(s=(o=Array.from(o)).length))for(n.children=o,a=s-1;a>=0;--a)u.push(i=o[a]=new dX(o[a])),i.parent=n,i.depth=n.depth+1;return l.eachBefore(dK)}function dW(e){return e.children}function dH(e){return Array.isArray(e)?e[1]:null}function dq(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function dK(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function dX(e){this.data=e,this.depth=this.height=0,this.parent=null}function dY(e){return null==e?null:dZ(e)}function dZ(e){if("function"!=typeof e)throw Error();return e}function dJ(){return 0}function dQ(e){return function(){return e}}function d$(){let e=1;return()=>(e=(1664525*e+0x3c6ef35f)%0x100000000)/0x100000000}function d0(e){return d1(e,d$())}function d1(e,t){for(var n,i,o=0,a=(e=function(e,t){let n=e.length,i,o;for(;n;)o=t()*n--|0,i=e[n],e[n]=e[o],e[o]=i;return e}(Array.from(e),t)).length,s=[];o<a;)n=e[o],i&&d3(i,n)?++o:(i=function(e){switch(e.length){case 1:var t;return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return d5(e[0],e[1]);case 3:return d6(e[0],e[1],e[2])}}(s=function(e,t){var n,i;if(d4(t,e))return[t];for(n=0;n<e.length;++n)if(d2(t,e[n])&&d4(d5(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(d2(d5(e[n],e[i]),t)&&d2(d5(e[n],t),e[i])&&d2(d5(e[i],t),e[n])&&d4(d6(e[n],e[i],t),e))return[e[n],e[i],t];throw Error()}(s,n)),o=0);return i}function d2(e,t){var n=e.r-t.r,i=t.x-e.x,o=t.y-e.y;return n<0||n*n<i*i+o*o}function d3(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),i=t.x-e.x,o=t.y-e.y;return n>0&&n*n>i*i+o*o}function d4(e,t){for(var n=0;n<t.length;++n)if(!d3(e,t[n]))return!1;return!0}function d5(e,t){var n=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=a-n,c=s-i,d=l-o,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*d)/2,y:(i+s+c/f*d)/2,r:(f+o+l)/2}}function d6(e,t,n){var i=e.x,o=e.y,a=e.r,s=t.x,l=t.y,u=t.r,c=n.x,d=n.y,f=n.r,p=i-s,h=i-c,m=o-l,g=o-d,v=u-a,y=f-a,b=i*i+o*o-a*a,x=b-s*s-l*l+u*u,w=b-c*c-d*d+f*f,A=h*m-p*g,C=(m*w-g*x)/(2*A)-i,S=(g*v-m*y)/A,_=(h*x-p*w)/(2*A)-o,T=(p*y-h*v)/A,O=S*S+T*T-1,P=2*(a+C*S+_*T),M=C*C+_*_-a*a,E=-(Math.abs(O)>1e-6?(P+Math.sqrt(P*P-4*O*M))/(2*O):M/P);return{x:i+C+S*E,y:o+_+T*E,r:E}}function d8(e,t,n){var i,o,a,s,l=e.x-t.x,u=e.y-t.y,c=l*l+u*u;c?(o=t.r+n.r,o*=o,s=e.r+n.r,o>(s*=s)?(i=(c+s-o)/(2*c),a=Math.sqrt(Math.max(0,s/c-i*i)),n.x=e.x-i*l-a*u,n.y=e.y-i*u+a*l):(i=(c+o-s)/(2*c),a=Math.sqrt(Math.max(0,o/c-i*i)),n.x=t.x+i*l-a*u,n.y=t.y+i*u+a*l)):(n.x=t.x+n.r,n.y=t.y)}function d9(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,o=t.y-e.y;return n>0&&n*n>i*i+o*o}function d7(e){var t=e._,n=e.next._,i=t.r+n.r,o=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return o*o+a*a}function fe(e){this._=e,this.next=null,this.previous=null}function ft(e,t){var n,i,o,a,s,l,u,c,d,f,p,h;if(!(a=(e="object"==typeof(h=e)&&"length"in h?h:Array.from(h)).length))return 0;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;d8(i,n,o=e[2]),n=new fe(n),i=new fe(i),o=new fe(o),n.next=o.previous=i,i.next=n.previous=o,o.next=i.previous=n;o:for(u=3;u<a;++u){d8(n._,i._,o=e[u]),o=new fe(o),c=i.next,d=n.previous,f=i._.r,p=n._.r;do if(f<=p){if(d9(c._,o._)){i=c,n.next=i,i.previous=n,--u;continue o}f+=c._.r,c=c.next}else{if(d9(d._,o._)){(n=d).next=i,i.previous=n,--u;continue o}p+=d._.r,d=d.previous}while(c!==d.next);for(o.previous=n,o.next=i,n.next=i.previous=i=o,s=d7(n);(o=o.next)!==i;)(l=d7(o))<s&&(n=o,s=l);i=n.next}for(n=[i._],o=i;(o=o.next)!==i;)n.push(o._);for(u=0,o=d1(n,t);u<a;++u)n=e[u],n.x-=o.x,n.y-=o.y;return o.r}function fn(e){return ft(e,d$()),e}function fr(e){return Math.sqrt(e.value)}function fi(){var e=null,t=1,n=1,i=dJ;function o(o){let a=d$();return o.x=t/2,o.y=n/2,e?o.eachBefore(fo(e)).eachAfter(fa(i,.5,a)).eachBefore(fs(1)):o.eachBefore(fo(fr)).eachAfter(fa(dJ,1,a)).eachAfter(fa(i,o.r/Math.min(t,n),a)).eachBefore(fs(Math.min(t,n)/(2*o.r))),o}return o.radius=function(t){return arguments.length?(e=dY(t),o):e},o.size=function(e){return arguments.length?(t=+e[0],n=+e[1],o):[t,n]},o.padding=function(e){return arguments.length?(i="function"==typeof e?e:dQ(+e),o):i},o}function fo(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function fa(e,t,n){return function(i){if(o=i.children){var o,a,s,l=o.length,u=e(i)*t||0;if(u)for(a=0;a<l;++a)o[a].r+=u;if(s=ft(o,n),u)for(a=0;a<l;++a)o[a].r-=u;i.r=s+u}}}function fs(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function fl(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function fu(e,t,n,i,o){for(var a,s=e.children,l=-1,u=s.length,c=e.value&&(i-t)/e.value;++l<u;)(a=s[l]).y0=n,a.y1=o,a.x0=t,a.x1=t+=a.value*c}function fc(){var e=1,t=1,n=0,i=!1;function o(o){var a,s,l=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/l,o.eachBefore((a=t,s=l,function(e){e.children&&fu(e,e.x0,a*(e.depth+1)/s,e.x1,a*(e.depth+2)/s);var t=e.x0,i=e.y0,o=e.x1-n,l=e.y1-n;o<t&&(t=o=(t+o)/2),l<i&&(i=l=(i+l)/2),e.x0=t,e.y0=i,e.x1=o,e.y1=l})),i&&o.eachBefore(fl),o}return o.round=function(e){return arguments.length?(i=!!e,o):i},o.size=function(n){return arguments.length?(e=+n[0],t=+n[1],o):[e,t]},o.padding=function(e){return arguments.length?(n=+e,o):n},o}d_.invert=function(e,t){for(var n,i,o=t,a=o*o,s=a*a*a,l=0;l<12&&(i=o*(1.340264+-.081106*a+s*(893e-6+.003796*a))-t,o-=n=i/(1.340264+-.24331799999999998*a+s*(.0062510000000000005+.034164*a)),s=(a=o*o)*a*a,!(1e-12>sz(n)));++l);return[dS*e*(1.340264+-.24331799999999998*a+s*(.0062510000000000005+.034164*a))/sq(o),s3(sQ(o)/dS)]},dO.invert=du(sW),dE.invert=function(e,t){var n,i=t,o=25;do{var a=i*i,s=a*a;i-=n=(i*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.045255+s*(-.311325+.259866*a-.005916*11*s)))}while(sz(n)>1e-6&&--o>0);return[e/(.8707+(a=i*i)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),i]},dI.invert=du(s3),dN.invert=du(function(e){return 2*sW(e)}),dB.invert=function(e,t){return[-t,2*sW(sX(e))-sF]},dX.prototype=dz.prototype={constructor:dX,count:function(){return this.eachAfter(dU)},each:function(e,t){let n=-1;for(let i of this)e.call(t,i,++n,this);return this},eachAfter:function(e,t){for(var n,i,o,a=this,s=[a],l=[],u=-1;a=s.pop();)if(l.push(a),n=a.children)for(i=0,o=n.length;i<o;++i)s.push(n[i]);for(;a=l.pop();)e.call(t,a,++u,this);return this},eachBefore:function(e,t){for(var n,i,o=this,a=[o],s=-1;o=a.pop();)if(e.call(t,o,++s,this),n=o.children)for(i=n.length-1;i>=0;--i)a.push(n[i]);return this},find:function(e,t){let n=-1;for(let i of this)if(e.call(t,i,++n,this))return i},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,o=i&&i.length;--o>=0;)n+=i[o].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),o=null;for(e=n.pop(),t=i.pop();e===t;)o=e,e=n.pop(),t=i.pop();return o}(t,e),i=[t];t!==n;)i.push(t=t.parent);for(var o=i.length;e!==n;)i.splice(o,0,e),e=e.parent;return i},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return dz(this).eachBefore(dq)},[Symbol.iterator]:function*(){var e,t,n,i,o=this,a=[o];do for(e=a.reverse(),a=[];o=e.pop();)if(yield o,t=o.children)for(n=0,i=t.length;n<i;++n)a.push(t[n]);while(a.length)}};var fd={depth:-1},ff={},fp={};function fh(e){return e.id}function fm(e){return e.parentId}function fg(){var e,t=fh,n=fm;function i(i){var o,a,s,l,u,c,d,f,p=Array.from(i),h=t,m=n,g=new Map;if(null!=e){let t=p.map((t,n)=>{var o;let a;return o=e(t,n,i),a=(o=`${o}`).length,fy(o,a-1)&&!fy(o,a-2)&&(o=o.slice(0,-1)),"/"===o[0]?o:`/${o}`}),n=t.map(fv),o=new Set(t).add("");for(let e of n)o.has(e)||(o.add(e),t.push(e),n.push(fv(e)),p.push(fp));h=(e,n)=>t[n],m=(e,t)=>n[t]}for(s=0,o=p.length;s<o;++s)a=p[s],c=p[s]=new dX(a),null!=(d=h(a,s,i))&&(d+="")&&(f=c.id=d,g.set(f,g.has(f)?ff:c)),null!=(d=m(a,s,i))&&(d+="")&&(c.parent=d);for(s=0;s<o;++s)if(d=(c=p[s]).parent){if(!(u=g.get(d)))throw Error("missing: "+d);if(u===ff)throw Error("ambiguous: "+d);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw Error("multiple roots");l=c}if(!l)throw Error("no root");if(null!=e){for(;l.data===fp&&1===l.children.length;)l=l.children[0],--o;for(let e=p.length-1;e>=0&&(c=p[e]).data===fp;--e)c.data=null}if(l.parent=fd,l.eachBefore(function(e){e.depth=e.parent.depth+1,--o}).eachBefore(dK),l.parent=null,o>0)throw Error("cycle");return l}return i.id=function(e){return arguments.length?(t=dY(e),i):t},i.parentId=function(e){return arguments.length?(n=dY(e),i):n},i.path=function(t){return arguments.length?(e=dY(t),i):e},i}function fv(e){let t=e.length;if(t<2)return"";for(;--t>1&&!fy(e,t););return e.slice(0,t)}function fy(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if((1&n)==0)return!0}return!1}function fb(e,t){return e.parent===t.parent?1:2}function fx(e){var t=e.children;return t?t[0]:e.t}function fw(e){var t=e.children;return t?t[t.length-1]:e.t}function fA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function fC(){var e=fb,t=1,n=1,i=null;function o(o){var u=function(e){for(var t,n,i,o,a,s=new fA(e,0),l=[s];t=l.pop();)if(i=t._.children)for(t.children=Array(a=i.length),o=a-1;o>=0;--o)l.push(n=t.children[o]=new fA(i[o],o)),n.parent=t;return(s.parent=new fA(null,0)).children=[s],s}(o);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(s),i)o.eachBefore(l);else{var c=o,d=o,f=o;o.eachBefore(function(e){e.x<c.x&&(c=e),e.x>d.x&&(d=e),e.depth>f.depth&&(f=e)});var p=c===d?1:e(c,d)/2,h=p-c.x,m=t/(d.x+p+h),g=n/(f.depth||1);o.eachBefore(function(e){e.x=(e.x+h)*m,e.y=e.depth*g})}return o}function a(t){var n=t.children,i=t.parent.children,o=t.i?i[t.i-1]:null;if(n){!function(e){for(var t,n=0,i=0,o=e.children,a=o.length;--a>=0;)t=o[a],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;o?(t.z=o.z+e(t._,o._),t.m=t.z-a):t.z=a}else o&&(t.z=o.z+e(t._,o._));t.parent.A=function(t,n,i){if(n){for(var o,a,s,l=t,u=t,c=n,d=l.parent.children[0],f=l.m,p=u.m,h=c.m,m=d.m;c=fw(c),l=fx(l),c&&l;)d=fx(d),(u=fw(u)).a=t,(s=c.z+h-l.z-f+e(c._,l._))>0&&(!function(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}((o=c,a=i,o.a.parent===t.parent?o.a:a),t,s),f+=s,p+=s),h+=c.m,f+=l.m,m+=d.m,p+=u.m;c&&!fw(u)&&(u.t=c,u.m+=h-p),l&&!fx(d)&&(d.t=l,d.m+=f-m,i=t)}return i}(t,o,t.parent.A||i[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],o):i?null:[t,n]},o.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],o):i?[t,n]:null},o}function fS(e,t,n,i,o){for(var a,s=e.children,l=-1,u=s.length,c=e.value&&(o-n)/e.value;++l<u;)(a=s[l]).x0=t,a.x1=i,a.y0=n,a.y1=n+=a.value*c}fA.prototype=Object.create(dX.prototype);var f_=(1+Math.sqrt(5))/2;function fT(e,t,n,i,o,a){for(var s,l,u,c,d,f,p,h,m,g,v,y=[],b=t.children,x=0,w=0,A=b.length,C=t.value;x<A;){u=o-n,c=a-i;do d=b[w++].value;while(!d&&w<A);for(f=p=d,m=Math.max(p/(v=d*d*(g=Math.max(c/u,u/c)/(C*e))),v/f);w<A;++w){if(d+=l=b[w].value,l<f&&(f=l),l>p&&(p=l),(h=Math.max(p/(v=d*d*g),v/f))>m){d-=l;break}m=h}y.push(s={value:d,dice:u<c,children:b.slice(x,w)}),s.dice?fu(s,n,i,o,C?i+=c*d/C:a):fS(s,n,i,C?n+=u*d/C:o,a),C-=d,x=w}return y}let fO=function e(t){function n(e,n,i,o,a){fT(t,e,n,i,o,a)}return n.ratio=function(t){return e((t*=1)>1?t:1)},n}(f_);function fP(){var e=fO,t=!1,n=1,i=1,o=[0],a=dJ,s=dJ,l=dJ,u=dJ,c=dJ;function d(e){return e.x0=e.y0=0,e.x1=n,e.y1=i,e.eachBefore(f),o=[0],t&&e.eachBefore(fl),e}function f(t){var n=o[t.depth],i=t.x0+n,d=t.y0+n,f=t.x1-n,p=t.y1-n;f<i&&(i=f=(i+f)/2),p<d&&(d=p=(d+p)/2),t.x0=i,t.y0=d,t.x1=f,t.y1=p,t.children&&(n=o[t.depth+1]=a(t)/2,i+=c(t)-n,d+=s(t)-n,f-=l(t)-n,p-=u(t)-n,f<i&&(i=f=(i+f)/2),p<d&&(d=p=(d+p)/2),e(t,i,d,f,p))}return d.round=function(e){return arguments.length?(t=!!e,d):t},d.size=function(e){return arguments.length?(n=+e[0],i=+e[1],d):[n,i]},d.tile=function(t){return arguments.length?(e=dZ(t),d):e},d.padding=function(e){return arguments.length?d.paddingInner(e).paddingOuter(e):d.paddingInner()},d.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:dQ(+e),d):a},d.paddingOuter=function(e){return arguments.length?d.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):d.paddingTop()},d.paddingTop=function(e){return arguments.length?(s="function"==typeof e?e:dQ(+e),d):s},d.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:dQ(+e),d):l},d.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:dQ(+e),d):u},d.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:dQ(+e),d):c},d}function fM(e,t,n,i,o){var a,s,l=e.children,u=l.length,c=Array(u+1);for(c[0]=s=a=0;a<u;++a)c[a+1]=s+=l[a].value;!function e(t,n,i,o,a,s,u){if(t>=n-1){var d=l[t];d.x0=o,d.y0=a,d.x1=s,d.y1=u;return}for(var f=c[t],p=i/2+f,h=t+1,m=n-1;h<m;){var g=h+m>>>1;c[g]<p?h=g+1:m=g}p-c[h-1]<c[h]-p&&t+1<h&&--h;var v=c[h]-f,y=i-v;if(s-o>u-a){var b=i?(o*y+s*v)/i:s;e(t,h,v,o,a,b,u),e(h,n,y,b,a,s,u)}else{var x=i?(a*y+u*v)/i:u;e(t,h,v,o,a,s,x),e(h,n,y,o,x,s,u)}}(0,u,e.value,t,n,i,o)}function fE(e,t,n,i,o){(1&e.depth?fS:fu)(e,t,n,i,o)}let fD=function e(t){function n(e,n,i,o,a){if((s=e._squarify)&&s.ratio===t)for(var s,l,u,c,d,f=-1,p=s.length,h=e.value;++f<p;){for(u=(l=s[f]).children,c=l.value=0,d=u.length;c<d;++c)l.value+=u[c].value;l.dice?fu(l,n,i,o,h?i+=(a-i)*l.value/h:a):fS(l,n,i,h?n+=(o-n)*l.value/h:o,a),h-=l.value}else e._squarify=s=fT(t,e,n,i,o,a),s.ratio=t}return n.ratio=function(t){return e((t*=1)>1?t:1)},n}(f_);function fI(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function fk(e,t){var n=nz(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function fN(e,t){return e*=1,t*=1,function(n){return Math.round(e*(1-n)+t*n)}}function fR(e){return((e=Math.exp(e))+1/e)/2}let fB=function e(t,n,i){function o(e,o){var a,s,l=e[0],u=e[1],c=e[2],d=o[0],f=o[1],p=o[2],h=d-l,m=f-u,g=h*h+m*m;if(g<1e-12)s=Math.log(p/c)/t,a=function(e){return[l+e*h,u+e*m,c*Math.exp(t*e*s)]};else{var v=Math.sqrt(g),y=(p*p-c*c+i*g)/(2*c*n*v),b=(p*p-c*c-i*g)/(2*p*n*v),x=Math.log(Math.sqrt(y*y+1)-y);s=(Math.log(Math.sqrt(b*b+1)-b)-x)/t,a=function(e){var i,o,a=e*s,d=fR(x),f=c/(n*v)*(d*(((i=Math.exp(2*(i=t*a+x)))-1)/(i+1))-((o=Math.exp(o=x))-1/o)/2);return[l+f*h,u+f*m,c*d/fR(t*a+x)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},o}(Math.SQRT2,2,4);function fL(e){return function(t,n){var i=e((t=nk(t)).h,(n=nk(n)).h),o=nW(t.s,n.s),a=nW(t.l,n.l),s=nW(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(e),t.opacity=s(e),t+""}}}let fF=fL(nz);var fV=fL(nW);function fj(e,t){var n=nW((e=iJ(e)).l,(t=iJ(t)).l),i=nW(e.a,t.a),o=nW(e.b,t.b),a=nW(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=o(t),e.opacity=a(t),e+""}}function fG(e){return function(t,n){var i=e((t=i5(t)).h,(n=i5(n)).h),o=nW(t.c,n.c),a=nW(t.l,n.l),s=nW(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=o(e),t.l=a(e),t.opacity=s(e),t+""}}}let fU=fG(nz);var fz=fG(nW);function fW(e){return function t(n){function i(t,i){var o=e((t=i7(t)).h,(i=i7(i)).h),a=nW(t.s,i.s),s=nW(t.l,i.l),l=nW(t.opacity,i.opacity);return function(e){return t.h=o(e),t.s=a(e),t.l=s(Math.pow(e,n)),t.opacity=l(e),t+""}}return n*=1,i.gamma=t,i}(1)}let fH=fW(nz);var fq=fW(nW);function fK(e,t){void 0===t&&(t=e,e=n5);for(var n=0,i=t.length-1,o=t[0],a=Array(i<0?0:i);n<i;)a[n]=e(o,o=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return a[t](e-t)}}function fX(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function fY(e){for(var t,n=-1,i=e.length,o=e[i-1],a=0;++n<i;)t=o,o=e[n],a+=t[1]*o[0]-t[0]*o[1];return a/2}function fZ(e){for(var t,n,i=-1,o=e.length,a=0,s=0,l=e[o-1],u=0;++i<o;)t=l,l=e[i],u+=n=t[0]*l[1]-l[0]*t[1],a+=(t[0]+l[0])*n,s+=(t[1]+l[1])*n;return[a/(u*=3),s/u]}function fJ(e,t){return e[0]-t[0]||e[1]-t[1]}function fQ(e){let t=e.length,n=[0,1],i=2,o;for(o=2;o<t;++o){for(var a,s,l;i>1&&0>=(a=e[n[i-2]],s=e[n[i-1]],l=e[o],(s[0]-a[0])*(l[1]-a[1])-(s[1]-a[1])*(l[0]-a[0]));)--i;n[i++]=o}return n.slice(0,i)}function f$(e){if((n=e.length)<3)return null;var t,n,i=Array(n),o=Array(n);for(t=0;t<n;++t)i[t]=[+e[t][0],+e[t][1],t];for(i.sort(fJ),t=0;t<n;++t)o[t]=[i[t][0],-i[t][1]];var a=fQ(i),s=fQ(o),l=s[0]===a[0],u=s[s.length-1]===a[a.length-1],c=[];for(t=a.length-1;t>=0;--t)c.push(e[i[a[t]][2]]);for(t=+l;t<s.length-u;++t)c.push(e[i[s[t]][2]]);return c}function f0(e,t){for(var n,i,o=e.length,a=e[o-1],s=t[0],l=t[1],u=a[0],c=a[1],d=!1,f=0;f<o;++f)n=(a=e[f])[0],(i=a[1])>l!=c>l&&s<(u-n)*(l-i)/(c-i)+n&&(d=!d),u=n,c=i;return d}function f1(e){for(var t,n,i=-1,o=e.length,a=e[o-1],s=a[0],l=a[1],u=0;++i<o;)t=s,n=l,s=(a=e[i])[0],l=a[1],t-=s,n-=l,u+=Math.hypot(t,n);return u}let f2=Math.random,f3=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1==arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(f2),f4=function e(t){function n(e,n){return arguments.length<2&&(n=e,e=0),n=Math.floor(n)-(e=Math.floor(e)),function(){return Math.floor(t()*n+e)}}return n.source=e,n}(f2),f5=function e(t){function n(e,n){var i,o;return e=null==e?0:+e,n=null==n?1:+n,function(){var a;if(null!=i)a=i,i=null;else do i=2*t()-1,a=2*t()-1,o=i*i+a*a;while(!o||o>1);return e+n*a*Math.sqrt(-2*Math.log(o)/o)}}return n.source=e,n}(f2),f6=function e(t){var n=f5.source(t);function i(){var e=n.apply(this,arguments);return function(){return Math.exp(e())}}return i.source=e,i}(f2),f8=function e(t){function n(e){return(e*=1)<=0?()=>0:function(){for(var n=0,i=e;i>1;--i)n+=t();return n+i*t()}}return n.source=e,n}(f2),f9=function e(t){var n=f8.source(t);function i(e){if(0==(e*=1))return t;var i=n(e);return function(){return i()/e}}return i.source=e,i}(f2),f7=function e(t){function n(e){return function(){return-Math.log1p(-t())/e}}return n.source=e,n}(f2),pe=function e(t){function n(e){if((e*=1)<0)throw RangeError("invalid alpha");return e=-(1/e),function(){return Math.pow(1-t(),e)}}return n.source=e,n}(f2),pt=function e(t){function n(e){if((e*=1)<0||e>1)throw RangeError("invalid p");return function(){return Math.floor(t()+e)}}return n.source=e,n}(f2),pn=function e(t){function n(e){if((e*=1)<0||e>1)throw RangeError("invalid p");return 0===e?()=>1/0:1===e?()=>1:(e=Math.log1p(-e),function(){return 1+Math.floor(Math.log1p(-t())/e)})}return n.source=e,n}(f2),pr=function e(t){var n=f5.source(t)();function i(e,i){if((e*=1)<0)throw RangeError("invalid k");if(0===e)return()=>0;if(i=null==i?1:+i,1===e)return()=>-Math.log1p(-t())*i;var o=(e<1?e+1:e)-1/3,a=1/(3*Math.sqrt(o)),s=e<1?()=>Math.pow(t(),1/e):()=>1;return function(){do{do var e=n(),l=1+a*e;while(l<=0);l*=l*l;var u=1-t()}while(u>=1-.0331*e*e*e*e&&Math.log(u)>=.5*e*e+o*(1-l+Math.log(l)));return o*l*s()*i}}return i.source=e,i}(f2),pi=function e(t){var n=pr.source(t);function i(e,t){var i=n(e),o=n(t);return function(){var e=i();return 0===e?0:e/(e+o())}}return i.source=e,i}(f2),po=function e(t){var n=pn.source(t),i=pi.source(t);function o(e,t){return(e*=1,(t*=1)>=1)?()=>e:t<=0?()=>0:function(){for(var o=0,a=e,s=t;a*s>16&&a*(1-s)>16;){var l=Math.floor((a+1)*s),u=i(l,a-l+1)();u<=s?(o+=l,a-=l,s=(s-u)/(1-u)):(a=l-1,s/=u)}for(var c=s<.5,d=n(c?s:1-s),f=d(),p=0;f<=a;++p)f+=d();return o+(c?p:a-p)}}return o.source=e,o}(f2),pa=function e(t){function n(e,n,i){var o;return 0==(e*=1)?o=e=>-Math.log(e):(e=1/e,o=t=>Math.pow(t,e)),n=null==n?0:+n,i=null==i?1:+i,function(){return n+i*o(-Math.log1p(-t()))}}return n.source=e,n}(f2),ps=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){return e+n*Math.tan(Math.PI*t())}}return n.source=e,n}(f2),pl=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var i=t();return e+n*Math.log(i/(1-i))}}return n.source=e,n}(f2),pu=function e(t){var n=pr.source(t),i=po.source(t);function o(e){return function(){for(var o=0,a=e;a>16;){var s=Math.floor(.875*a),l=n(s)();if(l>a)return o+i(s-1,a/l)();o+=s,a-=l}for(var u=-Math.log1p(-t()),c=0;u<=a;++c)u-=Math.log1p(-t());return o+c}}return o.source=e,o}(f2),pc=1/0x100000000;function pd(e=Math.random()){let t=(0<=e&&e<1?e/pc:Math.abs(e))|0;return()=>pc*((t=1664525*t+0x3c6ef35f|0)>>>0)}function pf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function pp(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}let ph=Symbol("implicit");function pm(){var e=new L,t=[],n=[],i=ph;function o(o){let a=e.get(o);if(void 0===a){if(i!==ph)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return o.domain=function(n){if(!arguments.length)return t.slice();for(let i of(t=[],e=new L,n))e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(e){return arguments.length?(n=Array.from(e),o):n.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return pm(t,n).unknown(i)},pf.apply(o,arguments),o}function pg(){var e,t,n=pm().unknown(void 0),i=n.domain,o=n.range,a=0,s=1,l=!1,u=0,c=0,d=.5;function f(){var n=i().length,f=s<a,p=f?s:a,h=f?a:s;e=(h-p)/Math.max(1,n-u+2*c),l&&(e=Math.floor(e)),p+=(h-p-e*(n-u))*d,t=e*(1-u),l&&(p=Math.round(p),t=Math.round(t));var m=eU(n).map(function(t){return p+e*t});return o(f?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),f()):i()},n.range=function(e){return arguments.length?([a,s]=e,a*=1,s*=1,f()):[a,s]},n.rangeRound=function(e){return[a,s]=e,a*=1,s*=1,l=!0,f()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,f()):l},n.padding=function(e){return arguments.length?(u=Math.min(1,c=+e),f()):u},n.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),f()):u},n.paddingOuter=function(e){return arguments.length?(c=+e,f()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),f()):d},n.copy=function(){return pg(i(),[a,s]).round(l).paddingInner(u).paddingOuter(c).align(d)},pf.apply(f(),arguments)}function pv(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(pg.apply(null,arguments).paddingInner(1))}function py(e){return+e}var pb=[0,1];function px(e){return e}function pw(e,t){var n;return(t-=e*=1)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n})}function pA(e,t,n){var i=e[0],o=e[1],a=t[0],s=t[1];return o<i?(i=pw(o,i),a=n(s,a)):(i=pw(i,o),a=n(a,s)),function(e){return a(i(e))}}function pC(e,t,n){var i=Math.min(e.length,t.length)-1,o=Array(i),a=Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=pw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=v(e,t,1,i)-1;return a[n](o[n](t))}}function pS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function p_(){var e,t,n,i,o,a,s=pb,l=pb,u=n5,c=px;function d(){var e,t,n,u=Math.min(s.length,l.length);return c!==px&&(e=s[0],t=s[u-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=u>2?pC:pA,o=a=null,f}function f(t){return null==t||isNaN(t*=1)?n:(o||(o=i(s.map(e),l,u)))(e(c(t)))}return f.invert=function(n){return c(t((a||(a=i(l,s.map(e),n0)))(n)))},f.domain=function(e){return arguments.length?(s=Array.from(e,py),d()):s.slice()},f.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},f.rangeRound=function(e){return l=Array.from(e),u=fN,d()},f.clamp=function(e){return arguments.length?(c=!!e||px,d()):c!==px},f.interpolate=function(e){return arguments.length?(u=e,d()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,i){return e=n,t=i,d()}}function pT(){return p_()(px,px)}function pO(e,t,n,i){var o,a=eb(e,t,n);switch((i=s_(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(o=sR(a,s))||(i.precision=o),lo(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=sB(a,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=sN(a))||(i.precision=o-("%"===i.type)*2)}return li(i)}function pP(e){var t=e.domain;return e.ticks=function(e){var n=t();return ev(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return pO(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,o,a=t(),s=0,l=a.length-1,u=a[s],c=a[l],d=10;for(c<u&&(o=u,u=c,c=o,o=s,s=l,l=o);d-- >0;){if((o=ey(u,c,n))===i)return a[s]=u,a[l]=c,t(a);if(o>0)u=Math.floor(u/o)*o,c=Math.ceil(c/o)*o;else if(o<0)u=Math.ceil(u*o)/o,c=Math.floor(c*o)/o;else break;i=o}return e},e}function pM(e,t){e=e.slice();var n,i=0,o=e.length-1,a=e[i],s=e[o];return s<a&&(n=i,i=o,o=n,n=a,a=s,s=n),e[i]=t.floor(a),e[o]=t.ceil(s),e}function pE(e){return Math.log(e)}function pD(e){return Math.exp(e)}function pI(e){return-Math.log(-e)}function pk(e){return-Math.exp(-e)}function pN(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pR(e){return(t,n)=>-e(-t,n)}function pB(e){let t,n,i=e(pE,pD),o=i.domain,a=10;function s(){var s,l;return t=(s=a)===Math.E?Math.log:10===s&&Math.log10||2===s&&Math.log2||(s=Math.log(s),e=>Math.log(e)/s),n=10===(l=a)?pN:l===Math.E?Math.exp:e=>Math.pow(l,e),o()[0]<0?(t=pR(t),n=pR(n),e(pI,pk)):e(pE,pD),i}return i.base=function(e){return arguments.length?(a=+e,s()):a},i.domain=function(e){return arguments.length?(o(e),s()):o()},i.ticks=e=>{let i,s,l=o(),u=l[0],c=l[l.length-1],d=c<u;d&&([u,c]=[c,u]);let f=t(u),p=t(c),h=null==e?10:+e,m=[];if(!(a%1)&&p-f<h){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(i=1;i<a;++i)if(!((s=f<0?i/n(-f):i*n(f))<u)){if(s>c)break;m.push(s)}}else for(;f<=p;++f)for(i=a-1;i>=1;--i)if(!((s=f>0?i/n(-f):i*n(f))<u)){if(s>c)break;m.push(s)}2*m.length<h&&(m=ev(u,c,h))}else m=ev(f,p,Math.min(p-f,h)).map(n);return d?m.reverse():m},i.tickFormat=(e,o)=>{if(null==e&&(e=10),null==o&&(o=10===a?"s":","),"function"!=typeof o&&(a%1||null!=(o=s_(o)).precision||(o.trim=!0),o=li(o)),e===1/0)return o;let s=Math.max(1,a*e/i.ticks().length);return e=>{let i=e/n(Math.round(t(e)));return i*a<a-.5&&(i*=a),i<=s?o(e):""}},i.nice=()=>o(pM(o(),{floor:e=>n(Math.floor(t(e))),ceil:e=>n(Math.ceil(t(e)))})),i}function pL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pV(e){var t=1,n=e(pL(1),pF(t));return n.constant=function(n){return arguments.length?e(pL(t=+n),pF(t)):t},pP(n)}function pj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pU(e){return e<0?-e*e:e*e}function pz(e){var t=e(px,px),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(px,px):.5===n?e(pG,pU):e(pj(n),pj(1/n)):n},pP(t)}function pW(){var e=pz(p_());return e.copy=function(){return pS(e,pW()).exponent(e.exponent())},pf.apply(e,arguments),e}function pH(){return pW.apply(null,arguments).exponent(.5)}function pq(e){return Math.sign(e)*e*e}let pK=new Date,pX=new Date;function pY(e,t,n,i){function o(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return o.floor=t=>(e(t=new Date(+t)),t),o.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),o.round=e=>{let t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),o.range=(n,i,a)=>{let s,l=[];if(n=o.ceil(n),a=null==a?1:Math.floor(a),!(n<i)||!(a>0))return l;do l.push(s=new Date(+n)),t(n,a),e(n);while(s<n&&n<i);return l},o.filter=n=>pY(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}),n&&(o.count=(t,i)=>(pK.setTime(+t),pX.setTime(+i),e(pK),e(pX),Math.floor(n(pK,pX))),o.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?o.filter(i?t=>i(t)%e==0:t=>o.count(0,t)%e==0):o:null),o}let pZ=pY(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pZ.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?pY(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pZ:null;let pJ=pZ.range,pQ=pY(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),p$=pQ.range,p0=pY(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),p1=p0.range,p2=pY(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),p3=p2.range,p4=pY(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours()),p5=p4.range,p6=pY(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),p8=p6.range,p9=pY(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),p7=p9.range,he=pY(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),ht=he.range,hn=pY(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),hr=hn.range;function hi(e){return pY(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}let ho=hi(0),ha=hi(1),hs=hi(2),hl=hi(3),hu=hi(4),hc=hi(5),hd=hi(6),hf=ho.range,hp=ha.range,hh=hs.range,hm=hl.range,hg=hu.range,hv=hc.range,hy=hd.range;function hb(e){return pY(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}let hx=hb(0),hw=hb(1),hA=hb(2),hC=hb(3),hS=hb(4),h_=hb(5),hT=hb(6),hO=hx.range,hP=hw.range,hM=hA.range,hE=hC.range,hD=hS.range,hI=h_.range,hk=hT.range,hN=pY(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),hR=hN.range,hB=pY(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),hL=hB.range,hF=pY(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());hF.every=e=>isFinite(e=Math.floor(e))&&e>0?pY(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;let hV=hF.range,hj=pY(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hj.every=e=>isFinite(e=Math.floor(e))&&e>0?pY(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;let hG=hj.range;function hU(e,t,n,i,o,a){let s=[[pQ,1,1e3],[pQ,5,5e3],[pQ,15,15e3],[pQ,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,36e5],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,864e5],[i,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function l(t,n,i){let o=Math.abs(n-t)/i,a=c(([,,e])=>e).right(s,o);if(a===s.length)return e.every(eb(t/31536e6,n/31536e6,i));if(0===a)return pZ.every(Math.max(eb(t,n,i),1));let[l,u]=s[o/s[a-1][2]<s[a][2]/o?a-1:a];return l.every(u)}return[function(e,t,n){let i=t<e;i&&([e,t]=[t,e]);let o=n&&"function"==typeof n.range?n:l(e,t,n),a=o?o.range(e,+t+1):[];return i?a.reverse():a},l]}let[hz,hW]=hU(hj,hB,hx,hn,p6,p2),[hH,hq]=hU(hF,hN,ho,p9,p4,p0);function hK(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hX(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hY(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function hZ(e){var t=e.dateTime,n=e.date,i=e.time,o=e.periods,a=e.days,s=e.shortDays,l=e.months,u=e.shortMonths,c=h3(o),d=h4(o),f=h3(a),p=h4(a),h=h3(s),m=h4(s),g=h3(l),v=h4(l),y=h3(u),b=h4(u),x={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:mm,e:mm,f:mx,g:mD,G:mk,H:mg,I:mv,j:my,L:mb,m:mw,M:mA,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:m2,s:m3,S:mC,u:mS,U:m_,V:mO,w:mP,W:mM,x:null,X:null,y:mE,Y:mI,Z:mN,"%":m1},w={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:mR,e:mR,f:mj,g:mJ,G:m$,H:mB,I:mL,j:mF,L:mV,m:mG,M:mU,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:m2,s:m3,S:mz,u:mW,U:mH,V:mK,w:mX,W:mY,x:null,X:null,y:mZ,Y:mQ,Z:m0,"%":m1},A={a:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=y.exec(t.slice(n));return i?(e.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return _(e,t,n,i)},d:mo,e:mo,f:md,g:mt,G:me,H:ms,I:ms,j:ma,L:mc,m:mi,M:ml,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=d.get(i[0].toLowerCase()),n+i[0].length):-1},q:mr,Q:mp,s:mh,S:mu,u:h6,U:h8,V:h9,w:h5,W:h7,x:function(e,t,i){return _(e,n,t,i)},X:function(e,t,n){return _(e,i,t,n)},y:mt,Y:me,Z:mn,"%":mf};function C(e,t){return function(n){var i,o,a,s=[],l=-1,u=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(s.push(e.slice(u,l)),null!=(o=hJ[i=e.charAt(++l)])?i=e.charAt(++l):o="e"===i?" ":"0",(a=t[i])&&(i=a(n,o)),s.push(i),u=l+1);return s.push(e.slice(u,l)),s.join("")}}function S(e,t){return function(n){var i,o,a=hY(1900,void 0,1);if(_(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!t||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(o=(i=hX(hY(a.y,0,1))).getUTCDay())>4||0===o?hw.ceil(i):hw(i),i=he.offset(i,(a.V-1)*7),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(i=(o=(i=hK(hY(a.y,0,1))).getDay())>4||0===o?ha.ceil(i):ha(i),i=p9.offset(i,(a.V-1)*7),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:+("W"in a)),o="Z"in a?hX(hY(a.y,0,1)).getUTCDay():hK(hY(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,hX(a)):hK(a)}}function _(e,t,n,i){for(var o,a,s=0,l=t.length,u=n.length;s<l;){if(i>=u)return -1;if(37===(o=t.charCodeAt(s++))){if(!(a=A[(o=t.charAt(s++))in hJ?t.charAt(s++):o])||(i=a(e,n,i))<0)return -1}else if(o!=n.charCodeAt(i++))return -1}return i}return x.x=C(n,x),x.X=C(i,x),x.c=C(t,x),w.x=C(n,w),w.X=C(i,w),w.c=C(t,w),{format:function(e){var t=C(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=C(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}var hJ={"-":"",_:" ",0:"0"},hQ=/^\s*\d+/,h$=/^%/,h0=/[\\^$*+?|[\]().{}]/g;function h1(e,t,n){var i=e<0?"-":"",o=(i?-e:e)+"",a=o.length;return i+(a<n?Array(n-a+1).join(t)+o:o)}function h2(e){return e.replace(h0,"\\$&")}function h3(e){return RegExp("^(?:"+e.map(h2).join("|")+")","i")}function h4(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function h5(e,t,n){var i=hQ.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function h6(e,t,n){var i=hQ.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function h8(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function h9(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function h7(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function me(e,t,n){var i=hQ.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function mt(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function mn(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function mr(e,t,n){var i=hQ.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function mi(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function mo(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function ma(e,t,n){var i=hQ.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function ms(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function ml(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function mu(e,t,n){var i=hQ.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function mc(e,t,n){var i=hQ.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function md(e,t,n){var i=hQ.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function mf(e,t,n){var i=h$.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function mp(e,t,n){var i=hQ.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function mh(e,t,n){var i=hQ.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function mm(e,t){return h1(e.getDate(),t,2)}function mg(e,t){return h1(e.getHours(),t,2)}function mv(e,t){return h1(e.getHours()%12||12,t,2)}function my(e,t){return h1(1+p9.count(hF(e),e),t,3)}function mb(e,t){return h1(e.getMilliseconds(),t,3)}function mx(e,t){return mb(e,t)+"000"}function mw(e,t){return h1(e.getMonth()+1,t,2)}function mA(e,t){return h1(e.getMinutes(),t,2)}function mC(e,t){return h1(e.getSeconds(),t,2)}function mS(e){var t=e.getDay();return 0===t?7:t}function m_(e,t){return h1(ho.count(hF(e)-1,e),t,2)}function mT(e){var t=e.getDay();return t>=4||0===t?hu(e):hu.ceil(e)}function mO(e,t){return e=mT(e),h1(hu.count(hF(e),e)+(4===hF(e).getDay()),t,2)}function mP(e){return e.getDay()}function mM(e,t){return h1(ha.count(hF(e)-1,e),t,2)}function mE(e,t){return h1(e.getFullYear()%100,t,2)}function mD(e,t){return h1((e=mT(e)).getFullYear()%100,t,2)}function mI(e,t){return h1(e.getFullYear()%1e4,t,4)}function mk(e,t){var n=e.getDay();return h1((e=n>=4||0===n?hu(e):hu.ceil(e)).getFullYear()%1e4,t,4)}function mN(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+h1(t/60|0,"0",2)+h1(t%60,"0",2)}function mR(e,t){return h1(e.getUTCDate(),t,2)}function mB(e,t){return h1(e.getUTCHours(),t,2)}function mL(e,t){return h1(e.getUTCHours()%12||12,t,2)}function mF(e,t){return h1(1+he.count(hj(e),e),t,3)}function mV(e,t){return h1(e.getUTCMilliseconds(),t,3)}function mj(e,t){return mV(e,t)+"000"}function mG(e,t){return h1(e.getUTCMonth()+1,t,2)}function mU(e,t){return h1(e.getUTCMinutes(),t,2)}function mz(e,t){return h1(e.getUTCSeconds(),t,2)}function mW(e){var t=e.getUTCDay();return 0===t?7:t}function mH(e,t){return h1(hx.count(hj(e)-1,e),t,2)}function mq(e){var t=e.getUTCDay();return t>=4||0===t?hS(e):hS.ceil(e)}function mK(e,t){return e=mq(e),h1(hS.count(hj(e),e)+(4===hj(e).getUTCDay()),t,2)}function mX(e){return e.getUTCDay()}function mY(e,t){return h1(hw.count(hj(e)-1,e),t,2)}function mZ(e,t){return h1(e.getUTCFullYear()%100,t,2)}function mJ(e,t){return h1((e=mq(e)).getUTCFullYear()%100,t,2)}function mQ(e,t){return h1(e.getUTCFullYear()%1e4,t,4)}function m$(e,t){var n=e.getUTCDay();return h1((e=n>=4||0===n?hS(e):hS.ceil(e)).getUTCFullYear()%1e4,t,4)}function m0(){return"+0000"}function m1(){return"%"}function m2(e){return+e}function m3(e){return Math.floor(e/1e3)}function m4(e){return es=(ea=hZ(e)).format,el=ea.parse,eu=ea.utcFormat,ec=ea.utcParse,ea}function m5(e){return new Date(e)}function m6(e){return e instanceof Date?+e:+new Date(+e)}function m8(e,t,n,i,o,a,s,l,u,c){var d=pT(),f=d.invert,p=d.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),b=c("%b %d"),x=c("%B"),w=c("%Y");function A(e){return(u(e)<e?h:l(e)<e?m:s(e)<e?g:a(e)<e?v:i(e)<e?o(e)<e?y:b:n(e)<e?x:w)(e)}return d.invert=function(e){return new Date(f(e))},d.domain=function(e){return arguments.length?p(Array.from(e,m6)):p().map(m5)},d.ticks=function(t){var n=p();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?A:c(t)},d.nice=function(e){var n=p();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?p(pM(n,e)):d},d.copy=function(){return pS(d,m8(e,t,n,i,o,a,s,l,u,c))},d}function m9(){return pf.apply(m8(hH,hq,hF,hN,ho,p9,p4,p0,pQ,es).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function m7(){return pf.apply(m8(hz,hW,hj,hB,hx,he,p6,p2,pQ,eu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ge(){var e,t,n,i,o,a=0,s=1,l=px,u=!1;function c(t){return null==t||isNaN(t*=1)?o:l(0===n?.5:(t=(i(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,i;return arguments.length?([n,i]=t,l=e(n,i),c):[l(0),l(1)]}}return c.domain=function(o){return arguments.length?([a,s]=o,e=i(a*=1),t=i(s*=1),n=e===t?0:1/(t-e),c):[a,s]},c.clamp=function(e){return arguments.length?(u=!!e,c):u},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=d(n5),c.rangeRound=d(fN),c.unknown=function(e){return arguments.length?(o=e,c):o},function(o){return i=o,e=o(a),t=o(s),n=e===t?0:1/(t-e),c}}function gt(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function gn(){var e=pz(ge());return e.copy=function(){return gt(e,gn()).exponent(e.exponent())},pp.apply(e,arguments)}function gr(){return gn.apply(null,arguments).exponent(.5)}function gi(){var e,t,n,i,o,a,s,l=0,u=.5,c=1,d=1,f=px,p=!1;function h(e){return isNaN(e*=1)?s:(e=.5+((e=+a(e))-t)*(d*e<d*t?i:o),f(p?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,i,o;return arguments.length?([n,i,o]=t,f=fK(e,[n,i,o]),h):[f(0),f(.5),f(1)]}}return h.domain=function(s){return arguments.length?([l,u,c]=s,e=a(l*=1),t=a(u*=1),n=a(c*=1),i=e===t?0:.5/(t-e),o=t===n?0:.5/(n-t),d=t<e?-1:1,h):[l,u,c]},h.clamp=function(e){return arguments.length?(p=!!e,h):p},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=m(n5),h.rangeRound=m(fN),h.unknown=function(e){return arguments.length?(s=e,h):s},function(s){return a=s,e=s(l),t=s(u),n=s(c),i=e===t?0:.5/(t-e),o=t===n?0:.5/(n-t),d=t<e?-1:1,h}}function go(){var e=pz(gi());return e.copy=function(){return gt(e,go()).exponent(e.exponent())},pp.apply(e,arguments)}function ga(){return go.apply(null,arguments).exponent(.5)}function gs(e){for(var t=e.length/6|0,n=Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}m4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});let gl=gs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gu=gs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gc=gs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),gd=gs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),gf=gs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),gp=gs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),gh=gs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),gm=gs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),gg=gs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),gv=gs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),gy=gs("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),gb=e=>nK(e[e.length-1]);var gx=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(gs);let gw=gb(gx);var gA=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(gs);let gC=gb(gA);var gS=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(gs);let g_=gb(gS);var gT=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(gs);let gO=gb(gT);var gP=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(gs);let gM=gb(gP);var gE=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(gs);let gD=gb(gE);var gI=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(gs);let gk=gb(gI);var gN=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(gs);let gR=gb(gN);var gB=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gs);let gL=gb(gB);var gF=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(gs);let gV=gb(gF);var gj=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(gs);let gG=gb(gj);var gU=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(gs);let gz=gb(gU);var gW=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(gs);let gH=gb(gW);var gq=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(gs);let gK=gb(gq);var gX=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(gs);let gY=gb(gX);var gZ=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(gs);let gJ=gb(gZ);var gQ=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(gs);let g$=gb(gQ);var g0=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(gs);let g1=gb(g0);var g2=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(gs);let g3=gb(g2);var g4=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(gs);let g5=gb(g4);var g6=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(gs);let g8=gb(g6);var g9=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(gs);let g7=gb(g9);var ve=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(gs);let vt=gb(ve);var vn=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(gs);let vr=gb(vn);var vi=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(gs);let vo=gb(vi);var va=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(gs);let vs=gb(va);var vl=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(gs);let vu=gb(vl);function vc(e){return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-(e=Math.max(0,Math.min(1,e)))*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}let vd=fq(i7(300,.5,0),i7(-240,.5,1));var vf=fq(i7(-100,.75,.35),i7(80,1.5,.8)),vp=fq(i7(260,.75,.35),i7(80,1.5,.8)),vh=i7();function vm(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return vh.h=360*e-100,vh.s=1.5-1.5*t,vh.l=.8-.9*t,vh+""}var vg=nS(),vv=Math.PI/3,vy=2*Math.PI/3;function vb(e){var t;return vg.r=255*(t=Math.sin(e=(.5-e)*Math.PI))*t,vg.g=255*(t=Math.sin(e+vv))*t,vg.b=255*(t=Math.sin(e+vy))*t,vg+""}function vx(e){return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+(e=Math.max(0,Math.min(1,e)))*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function vw(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}let vA=vw(gs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var vC=vw(gs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vS=vw(gs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),v_=vw(gs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function vT(e){return t8(tY(e).call(document.documentElement))}var vO=0;function vP(){return new vM}function vM(){this._="@"+(++vO).toString(36)}function vE(e,t){return e.target&&(e=n6(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,e=>n8(e,t))}function vD(e){return"string"==typeof e?new t4([document.querySelectorAll(e)],[document.documentElement]):new t4([tx(e)],t3)}function vI(e){return function(){return e}}vM.prototype=vP.prototype={constructor:vM,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};let vk=Math.abs,vN=Math.atan2,vR=Math.cos,vB=Math.max,vL=Math.min,vF=Math.sin,vV=Math.sqrt,vj=Math.PI,vG=vj/2,vU=2*vj;function vz(e){return e>=1?vG:e<=-1?-vG:Math.asin(e)}function vW(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{let e=Math.floor(n);if(!(e>=0))throw RangeError(`invalid digits: ${n}`);t=e}return e},()=>new iP(t)}function vH(e){return e.innerRadius}function vq(e){return e.outerRadius}function vK(e){return e.startAngle}function vX(e){return e.endAngle}function vY(e){return e&&e.padAngle}function vZ(e,t,n,i,o,a,s){var l=e-n,u=t-i,c=(s?a:-a)/vV(l*l+u*u),d=c*u,f=-c*l,p=e+d,h=t+f,m=n+d,g=i+f,v=(p+m)/2,y=(h+g)/2,b=m-p,x=g-h,w=b*b+x*x,A=o-a,C=p*g-m*h,S=(x<0?-1:1)*vV(vB(0,A*A*w-C*C)),_=(C*x-b*S)/w,T=(-C*b-x*S)/w,O=(C*x+b*S)/w,P=(-C*b+x*S)/w,M=_-v,E=T-y,D=O-v,I=P-y;return M*M+E*E>D*D+I*I&&(_=O,T=P),{cx:_,cy:T,x01:-d,y01:-f,x11:_*(o/A-1),y11:T*(o/A-1)}}function vJ(){var e=vH,t=vq,n=vI(0),i=null,o=vK,a=vX,s=vY,l=null,u=vW(c);function c(){var c,d,f=+e.apply(this,arguments),p=+t.apply(this,arguments),h=o.apply(this,arguments)-vG,m=a.apply(this,arguments)-vG,g=vk(m-h),v=m>h;if(l||(l=c=u()),p<f&&(d=p,p=f,f=d),p>1e-12)if(g>vU-1e-12)l.moveTo(p*vR(h),p*vF(h)),l.arc(0,0,p,h,m,!v),f>1e-12&&(l.moveTo(f*vR(m),f*vF(m)),l.arc(0,0,f,m,h,v));else{var y,b,x=h,w=m,A=h,C=m,S=g,_=g,T=s.apply(this,arguments)/2,O=T>1e-12&&(i?+i.apply(this,arguments):vV(f*f+p*p)),P=vL(vk(p-f)/2,+n.apply(this,arguments)),M=P,E=P;if(O>1e-12){var D=vz(O/f*vF(T)),I=vz(O/p*vF(T));(S-=2*D)>1e-12?(D*=v?1:-1,A+=D,C-=D):(S=0,A=C=(h+m)/2),(_-=2*I)>1e-12?(I*=v?1:-1,x+=I,w-=I):(_=0,x=w=(h+m)/2)}var k=p*vR(x),N=p*vF(x),R=f*vR(C),B=f*vF(C);if(P>1e-12){var L,F=p*vR(w),V=p*vF(w),j=f*vR(A),G=f*vF(A);if(g<vj)if(L=function(e,t,n,i,o,a,s,l){var u=n-e,c=i-t,d=s-o,f=l-a,p=f*u-d*c;if(!(p*p<1e-12))return p=(d*(t-a)-f*(e-o))/p,[e+p*u,t+p*c]}(k,N,j,G,F,V,R,B)){var U,z=k-L[0],W=N-L[1],H=F-L[0],q=V-L[1],K=1/vF(((U=(z*H+W*q)/(vV(z*z+W*W)*vV(H*H+q*q)))>1?0:U<-1?vj:Math.acos(U))/2),X=vV(L[0]*L[0]+L[1]*L[1]);M=vL(P,(f-X)/(K-1)),E=vL(P,(p-X)/(K+1))}else M=E=0}_>1e-12?E>1e-12?(y=vZ(j,G,k,N,p,E,v),b=vZ(F,V,R,B,p,E,v),l.moveTo(y.cx+y.x01,y.cy+y.y01),E<P?l.arc(y.cx,y.cy,E,vN(y.y01,y.x01),vN(b.y01,b.x01),!v):(l.arc(y.cx,y.cy,E,vN(y.y01,y.x01),vN(y.y11,y.x11),!v),l.arc(0,0,p,vN(y.cy+y.y11,y.cx+y.x11),vN(b.cy+b.y11,b.cx+b.x11),!v),l.arc(b.cx,b.cy,E,vN(b.y11,b.x11),vN(b.y01,b.x01),!v))):(l.moveTo(k,N),l.arc(0,0,p,x,w,!v)):l.moveTo(k,N),f>1e-12&&S>1e-12?M>1e-12?(y=vZ(R,B,F,V,f,-M,v),b=vZ(k,N,j,G,f,-M,v),l.lineTo(y.cx+y.x01,y.cy+y.y01),M<P?l.arc(y.cx,y.cy,M,vN(y.y01,y.x01),vN(b.y01,b.x01),!v):(l.arc(y.cx,y.cy,M,vN(y.y01,y.x01),vN(y.y11,y.x11),!v),l.arc(0,0,f,vN(y.cy+y.y11,y.cx+y.x11),vN(b.cy+b.y11,b.cx+b.x11),v),l.arc(b.cx,b.cy,M,vN(b.y11,b.x11),vN(b.y01,b.x01),!v))):l.arc(0,0,f,C,A,v):l.lineTo(R,B)}else l.moveTo(0,0);if(l.closePath(),c)return l=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-vj/2;return[vR(i)*n,vF(i)*n]},c.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:vI(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:vI(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:vI(+e),c):n},c.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:vI(+e),c):i},c.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:vI(+e),c):o},c.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:vI(+e),c):a},c.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:vI(+e),c):s},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c}var vQ=Array.prototype.slice;function v$(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function v0(e){this._context=e}function v1(e){return new v0(e)}function v2(e){return e[0]}function v3(e){return e[1]}function v4(e,t){var n=vI(!0),i=null,o=v1,a=null,s=vW(l);function l(l){var u,c,d,f=(l=v$(l)).length,p=!1;for(null==i&&(a=o(d=s())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(c,u,l),+t(c,u,l));if(d)return a=null,d+""||null}return e="function"==typeof e?e:void 0===e?v2:vI(e),t="function"==typeof t?t:void 0===t?v3:vI(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:vI(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:vI(+e),l):t},l.defined=function(e){return arguments.length?(n="function"==typeof e?e:vI(!!e),l):n},l.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),l):o},l.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),l):i},l}function v5(e,t,n){var i=null,o=vI(!0),a=null,s=v1,l=null,u=vW(c);function c(c){var d,f,p,h,m,g=(c=v$(c)).length,v=!1,y=Array(g),b=Array(g);for(null==a&&(l=s(m=u())),d=0;d<=g;++d){if(!(d<g&&o(h=c[d],d,c))===v)if(v=!v)f=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=d-1;p>=f;--p)l.point(y[p],b[p]);l.lineEnd(),l.areaEnd()}v&&(y[d]=+e(h,d,c),b[d]=+t(h,d,c),l.point(i?+i(h,d,c):y[d],n?+n(h,d,c):b[d]))}if(m)return l=null,m+""||null}function d(){return v4().defined(o).curve(s).context(a)}return e="function"==typeof e?e:void 0===e?v2:vI(+e),t="function"==typeof t?t:void 0===t?vI(0):vI(+t),n="function"==typeof n?n:void 0===n?v3:vI(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:vI(+t),i=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:vI(+t),c):e},c.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:vI(+e),c):i},c.y=function(e){return arguments.length?(t="function"==typeof e?e:vI(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:vI(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:vI(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(i).y(t)},c.defined=function(e){return arguments.length?(o="function"==typeof e?e:vI(!!e),c):o},c.curve=function(e){return arguments.length?(s=e,null!=a&&(l=s(a)),c):s},c.context=function(e){return arguments.length?(null==e?a=l=null:l=s(a=e),c):a},c}function v6(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function v8(e){return e}function v9(){var e=v8,t=v6,n=null,i=vI(0),o=vI(vU),a=vI(0);function s(s){var l,u,c,d,f,p=(s=v$(s)).length,h=0,m=Array(p),g=Array(p),v=+i.apply(this,arguments),y=Math.min(vU,Math.max(-vU,o.apply(this,arguments)-v)),b=Math.min(Math.abs(y)/p,a.apply(this,arguments)),x=b*(y<0?-1:1);for(l=0;l<p;++l)(f=g[m[l]=l]=+e(s[l],l,s))>0&&(h+=f);for(null!=t?m.sort(function(e,n){return t(g[e],g[n])}):null!=n&&m.sort(function(e,t){return n(s[e],s[t])}),l=0,c=h?(y-p*x)/h:0;l<p;++l,v=d)d=v+((f=g[u=m[l]])>0?f*c:0)+x,g[u]={data:s[u],index:l,value:f,startAngle:v,endAngle:d,padAngle:b};return g}return s.value=function(t){return arguments.length?(e="function"==typeof t?t:vI(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,n=null,s):t},s.sort=function(e){return arguments.length?(n=e,t=null,s):n},s.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:vI(+e),s):i},s.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:vI(+e),s):o},s.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:vI(+e),s):a},s}v0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var v7=yt(v1);function ye(e){this._curve=e}function yt(e){function t(t){return new ye(e(t))}return t._curve=e,t}function yn(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(yt(e)):t()._curve},e}function yr(){return yn(v4().curve(v7))}function yi(){var e=v5().curve(v7),t=e.curve,n=e.lineX0,i=e.lineX1,o=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return yn(n())},delete e.lineX0,e.lineEndAngle=function(){return yn(i())},delete e.lineX1,e.lineInnerRadius=function(){return yn(o())},delete e.lineY0,e.lineOuterRadius=function(){return yn(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(yt(e)):t()._curve},e}function yo(e,t){return[(t*=1)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}ye.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),-(t*Math.cos(e)))}};class ya{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}class ys{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,t){if(e*=1,t*=1,0===this._point)this._point=1;else{let n=yo(this._x0,this._y0),i=yo(this._x0,this._y0=(this._y0+t)/2),o=yo(e,this._y0),a=yo(e,t);this._context.moveTo(...n),this._context.bezierCurveTo(...i,...o,...a)}this._x0=e,this._y0=t}}function yl(e){return new ya(e,!0)}function yu(e){return new ya(e,!1)}function yc(e){return new ys(e)}function yd(e){return e.source}function yf(e){return e.target}function yp(e){let t=yd,n=yf,i=v2,o=v3,a=null,s=null,l=vW(u);function u(){let u,c=vQ.call(arguments),d=t.apply(this,c),f=n.apply(this,c);if(null==a&&(s=e(u=l())),s.lineStart(),c[0]=d,s.point(+i.apply(this,c),+o.apply(this,c)),c[0]=f,s.point(+i.apply(this,c),+o.apply(this,c)),s.lineEnd(),u)return s=null,u+""||null}return u.source=function(e){return arguments.length?(t=e,u):t},u.target=function(e){return arguments.length?(n=e,u):n},u.x=function(e){return arguments.length?(i="function"==typeof e?e:vI(+e),u):i},u.y=function(e){return arguments.length?(o="function"==typeof e?e:vI(+e),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=e(a=t),u):a},u}function yh(){return yp(yl)}function ym(){return yp(yu)}function yg(){let e=yp(yc);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}let yv=vV(3),yy={draw(e,t){let n=.59436*vV(t+vL(t/28,.75)),i=n/2,o=i*yv;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-o,-i),e.lineTo(o,i),e.moveTo(-o,i),e.lineTo(o,-i)}},yb={draw(e,t){let n=vV(t/vj);e.moveTo(n,0),e.arc(0,0,n,0,vU)}},yx={draw(e,t){let n=vV(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},yw=vV(1/3),yA=2*yw,yC={draw(e,t){let n=vV(t/yA),i=n*yw;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},yS={draw(e,t){let n=.62625*vV(t);e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},y_={draw(e,t){let n=.87559*vV(t-vL(t/7,2));e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},yT={draw(e,t){let n=vV(t),i=-n/2;e.rect(i,i,n,n)}},yO={draw(e,t){let n=.4431*vV(t);e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},yP=vF(vj/10)/vF(7*vj/10),yM=vF(vU/10)*yP,yE=-vR(vU/10)*yP,yD={draw(e,t){let n=vV(.8908130915292852*t),i=yM*n,o=yE*n;e.moveTo(0,-n),e.lineTo(i,o);for(let t=1;t<5;++t){let a=vU*t/5,s=vR(a),l=vF(a);e.lineTo(l*n,-s*n),e.lineTo(s*i-l*o,l*i+s*o)}e.closePath()}},yI=vV(3),yk={draw(e,t){let n=-vV(t/(3*yI));e.moveTo(0,2*n),e.lineTo(-yI*n,-n),e.lineTo(yI*n,-n),e.closePath()}},yN=vV(3),yR={draw(e,t){let n=.6824*vV(t),i=n/2,o=n*yN/2;e.moveTo(0,-n),e.lineTo(o,i),e.lineTo(-o,i),e.closePath()}},yB=vV(3)/2,yL=1/vV(12),yF=(yL/2+1)*3,yV={draw(e,t){let n=vV(t/yF),i=n/2,o=n*yL,a=n*yL+n,s=-i;e.moveTo(i,o),e.lineTo(i,a),e.lineTo(s,a),e.lineTo(-.5*i-yB*o,yB*i+-.5*o),e.lineTo(-.5*i-yB*a,yB*i+-.5*a),e.lineTo(-.5*s-yB*a,yB*s+-.5*a),e.lineTo(-.5*i+yB*o,-.5*o-yB*i),e.lineTo(-.5*i+yB*a,-.5*a-yB*i),e.lineTo(-.5*s+yB*a,-.5*a-yB*s),e.closePath()}},yj={draw(e,t){let n=.6189*vV(t-vL(t/6,1.7));e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},yG=[yb,yx,yC,yT,yD,yk,yV],yU=[yb,y_,yj,yR,yy,yO,yS];function yz(e,t){let n=null,i=vW(o);function o(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return e="function"==typeof e?e:vI(e||yb),t="function"==typeof t?t:vI(void 0===t?64:+t),o.type=function(t){return arguments.length?(e="function"==typeof t?t:vI(t),o):e},o.size=function(e){return arguments.length?(t="function"==typeof e?e:vI(+e),o):t},o.context=function(e){return arguments.length?(n=null==e?null:e,o):n},o}function yW(){}function yH(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function yq(e){this._context=e}function yK(e){return new yq(e)}function yX(e){this._context=e}function yY(e){return new yX(e)}function yZ(e){this._context=e}function yJ(e){return new yZ(e)}function yQ(e,t){this._basis=new yq(e),this._beta=t}yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yH(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yH(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yX.prototype={areaStart:yW,areaEnd:yW,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yH(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:yH(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yQ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i,o=e[0],a=t[0],s=e[n]-o,l=t[n]-a,u=-1;++u<=n;)i=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(o+i*s),this._beta*t[u]+(1-this._beta)*(a+i*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};let y$=function e(t){function n(e){return 1===t?new yq(e):new yQ(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function y0(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function y1(e,t){this._context=e,this._k=(1-t)/6}y1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:y0(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:y0(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let y2=function e(t){function n(e){return new y1(e,t)}return n.tension=function(t){return e(+t)},n}(0);function y3(e,t){this._context=e,this._k=(1-t)/6}y3.prototype={areaStart:yW,areaEnd:yW,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y0(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let y4=function e(t){function n(e){return new y3(e,t)}return n.tension=function(t){return e(+t)},n}(0);function y5(e,t){this._context=e,this._k=(1-t)/6}y5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y0(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let y6=function e(t){function n(e){return new y5(e,t)}return n.tension=function(t){return e(+t)},n}(0);function y8(e,t,n){var i=e._x1,o=e._y1,a=e._x2,s=e._y2;if(e._l01_a>1e-12){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,o=(o*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,o,a,s,e._x2,e._y2)}function y9(e,t){this._context=e,this._alpha=t}y9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:y8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let y7=function e(t){function n(e){return t?new y9(e,t):new y1(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function be(e,t){this._context=e,this._alpha=t}be.prototype={areaStart:yW,areaEnd:yW,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let bt=function e(t){function n(e){return t?new be(e,t):new y3(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function bn(e,t){this._context=e,this._alpha=t}bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let br=function e(t){function n(e){return t?new bn(e,t):new y5(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function bi(e){this._context=e}function bo(e){return new bi(e)}function ba(e,t,n){var i=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(i||o<0&&-0),s=(n-e._y1)/(o||i<0&&-0);return((a<0?-1:1)+(s<0?-1:1))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs((a*o+s*i)/(i+o)))||0}function bs(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bl(e,t,n){var i=e._x0,o=e._y0,a=e._x1,s=e._y1,l=(a-i)/3;e._context.bezierCurveTo(i+l,o+l*t,a-l,s-l*n,a,s)}function bu(e){this._context=e}function bc(e){this._context=new bd(e)}function bd(e){this._context=e}function bf(e){return new bu(e)}function bp(e){return new bc(e)}function bh(e){this._context=e}function bm(e){var t,n,i=e.length-1,o=Array(i),a=Array(i),s=Array(i);for(o[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<i-1;++t)o[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(o[i-1]=2,a[i-1]=7,s[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=o[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(o[i-1]=s[i-1]/a[i-1],t=i-2;t>=0;--t)o[t]=(s[t]-o[t+1])/a[t];for(t=0,a[i-1]=(e[i]+o[i-1])/2;t<i-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function bg(e){return new bh(e)}function bv(e,t){this._context=e,this._t=t}function by(e){return new bv(e,.5)}function bb(e){return new bv(e,0)}function bx(e){return new bv(e,1)}function bw(e,t){if((o=e.length)>1)for(var n,i,o,a=1,s=e[t[0]],l=s.length;a<o;++a)for(i=s,s=e[t[a]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function bA(e){for(var t=e.length,n=Array(t);--t>=0;)n[t]=t;return n}function bC(e,t){return e[t]}function bS(e){let t=[];return t.key=e,t}function b_(){var e=vI([]),t=bA,n=bw,i=bC;function o(o){var a,s,l=Array.from(e.apply(this,arguments),bS),u=l.length,c=-1;for(let e of o)for(a=0,++c;a<u;++a)(l[a][c]=[0,+i(e,l[a].key,c,o)]).data=e;for(a=0,s=v$(t(l));a<u;++a)l[s[a]].index=a;return n(l,s),l}return o.keys=function(t){return arguments.length?(e="function"==typeof t?t:vI(Array.from(t)),o):e},o.value=function(e){return arguments.length?(i="function"==typeof e?e:vI(+e),o):i},o.order=function(e){return arguments.length?(t=null==e?bA:"function"==typeof e?e:vI(Array.from(e)),o):t},o.offset=function(e){return arguments.length?(n=null==e?bw:e,o):n},o}function bT(e,t){if((i=e.length)>0){for(var n,i,o,a=0,s=e[0].length;a<s;++a){for(o=n=0;n<i;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<i;++n)e[n][a][1]/=o}bw(e,t)}}function bO(e,t){if((l=e.length)>0)for(var n,i,o,a,s,l,u=0,c=e[t[0]].length;u<c;++u)for(a=s=0,n=0;n<l;++n)(o=(i=e[t[n]][u])[1]-i[0])>0?(i[0]=a,i[1]=a+=o):o<0?(i[1]=s,i[0]=s+=o):(i[0]=0,i[1]=o)}function bP(e,t){if((n=e.length)>0){for(var n,i=0,o=e[t[0]],a=o.length;i<a;++i){for(var s=0,l=0;s<n;++s)l+=e[s][i][1]||0;o[i][1]+=o[i][0]=-l/2}bw(e,t)}}function bM(e,t){if((o=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,o,a=0,s=1;s<i;++s){for(var l=0,u=0,c=0;l<o;++l){for(var d=e[t[l]],f=d[s][1]||0,p=(f-(d[s-1][1]||0))/2,h=0;h<l;++h){var m=e[t[h]];p+=(m[s][1]||0)-(m[s-1][1]||0)}u+=f,c+=p*f}n[s-1][1]+=n[s-1][0]=a,u&&(a-=c/u)}n[s-1][1]+=n[s-1][0]=a,bw(e,t)}}function bE(e){var t=e.map(bD);return bA(e).sort(function(e,n){return t[e]-t[n]})}function bD(e){for(var t,n=-1,i=0,o=e.length,a=-1/0;++n<o;)(t=+e[n][1])>a&&(a=t,i=n);return i}function bI(e){var t=e.map(bk);return bA(e).sort(function(e,n){return t[e]-t[n]})}function bk(e){for(var t,n=0,i=-1,o=e.length;++i<o;)(t=+e[i][1])&&(n+=t);return n}function bN(e){return bI(e).reverse()}function bR(e){var t,n,i=e.length,o=e.map(bk),a=bE(e),s=0,l=0,u=[],c=[];for(t=0;t<i;++t)n=a[t],s<l?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)}function bB(e){return bA(e).reverse()}bi.prototype={areaStart:yW,areaEnd:yW,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bl(this,this._t0,bs(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bl(this,bs(this,n=ba(this,e,t)),n);break;default:bl(this,this._t0,n=ba(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(bc.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)},bd.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,o,a){this._context.bezierCurveTo(t,e,i,n,a,o)}},bh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=bm(e),o=bm(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],o[0][a],i[1][a],o[1][a],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},bv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var bL="%Y-%m-%dT%H:%M:%S.%LZ";let bF=Date.prototype.toISOString?function(e){return e.toISOString()}:eu(bL),bV=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:ec(bL);function bj(e,t,n){var i=new rc,o=t;return null==t||(i._restart=i.restart,i.restart=function(e,t,n){t*=1,n=null==n?rl():+n,i._restart(function a(s){s+=o,i._restart(a,o+=t,n),e(s)},t,n)}),i.restart(e,t,n),i}let bG=e=>()=>e;function bU(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function bz(e,t,n){this.k=e,this.x=t,this.y=n}bz.prototype={constructor:bz,scale:function(e){return 1===e?this:new bz(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new bz(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bW=new bz(1,0,0);function bH(e){for(;!e.__zoom;)if(!(e=e.parentNode))return bW;return e.__zoom}function bq(e){e.stopImmediatePropagation()}function bK(e){e.preventDefault(),e.stopImmediatePropagation()}function bX(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function bY(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function bZ(){return this.__zoom||bW}function bJ(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function bQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function b$(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function b0(){var e,t,n,i=bX,o=bY,a=b$,s=bJ,l=bQ,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=fB,p=tv("start","zoom","end"),h=0,m=10;function g(e){e.property("__zoom",bZ).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",_).filter(l).on("touchstart.zoom",T).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new bz(t,e.x,e.y)}function y(e,t,n){var i=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return i===e.x&&o===e.y?e:new bz(e.k,i,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,i){e.on("start.zoom",function(){w(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(i).end()}).tween("zoom",function(){var e=arguments,a=w(this,e).event(i),s=o.apply(this,e),l=null==n?b(s):"function"==typeof n?n.apply(this,e):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=this.__zoom,d="function"==typeof t?t.apply(this,e):t,p=f(c.invert(l).concat(u/c.k),d.invert(l).concat(u/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=u/t[2];e=new bz(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function w(e,t,n){return!n&&e.__zooming||new A(e,t)}function A(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function C(e,...t){if(i.apply(this,arguments)){var n=w(this,t).event(e),o=this.__zoom,l=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,s.apply(this,arguments)))),d=n8(e);if(n.wheel)(n.mouse[0][0]!==d[0]||n.mouse[0][1]!==d[1])&&(n.mouse[1]=o.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(o.k===l)return;n.mouse=[d,o.invert(d)],rC(this),n.start()}bK(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(y(v(o,l),n.mouse[0],n.mouse[1]),n.extent,c))}}function S(e,...t){if(!n&&i.apply(this,arguments)){var o=e.currentTarget,s=w(this,t,!0).event(e),l=t8(e.view).on("mousemove.zoom",function(e){if(bK(e),!s.moved){var t=e.clientX-d,n=e.clientY-f;s.moved=t*t+n*n>h}s.event(e).zoom("mouse",a(y(s.that.__zoom,s.mouse[0]=n8(e,o),s.mouse[1]),s.extent,c))},!0).on("mouseup.zoom",function(e){l.on("mousemove.zoom mouseup.zoom",null),nr(e.view,s.moved),bK(e),s.event(e).end()},!0),u=n8(e,o),d=e.clientX,f=e.clientY;nn(e.view),bq(e),s.mouse=[u,this.__zoom.invert(u)],rC(this),s.start()}}function _(e,...t){if(i.apply(this,arguments)){var n=this.__zoom,s=n8(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(s),u=n.k*(e.shiftKey?.5:2),f=a(y(v(n,u),s,l),o.apply(this,t),c);bK(e),d>0?t8(this).transition().duration(d).call(x,f,s,e):t8(this).call(g.transform,f,s,e)}}function T(n,...o){if(i.apply(this,arguments)){var a,s,l,u,c=n.touches,d=c.length,f=w(this,o,n.changedTouches.length===d).event(n);for(bq(n),s=0;s<d;++s)u=[u=n8(l=c[s],this),this.__zoom.invert(u),l.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),rC(this),f.start())}}function O(e,...t){if(this.__zooming){var n,i,o,s,l=w(this,t).event(e),u=e.changedTouches,d=u.length;for(bK(e),n=0;n<d;++n)o=n8(i=u[n],this),l.touch0&&l.touch0[2]===i.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===i.identifier&&(l.touch1[0]=o);if(i=l.that.__zoom,l.touch1){var f=l.touch0[0],p=l.touch0[1],h=l.touch1[0],m=l.touch1[1],g=(g=h[0]-f[0])*g+(g=h[1]-f[1])*g,b=(b=m[0]-p[0])*b+(b=m[1]-p[1])*b;i=v(i,Math.sqrt(g/b)),o=[(f[0]+h[0])/2,(f[1]+h[1])/2],s=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],s=l.touch0[1]}l.zoom("touch",a(y(i,o,s),l.extent,c))}}function P(e,...i){if(this.__zooming){var o,a,s=w(this,i).event(e),l=e.changedTouches,u=l.length;for(bq(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<u;++o)a=l[o],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=n8(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<m)){var c=t8(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,i){var o=e.selection?e.selection():e;o.property("__zoom",bZ),e!==o?x(e,t,n,i):o.interrupt().each(function(){w(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,i){g.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,i)},g.scaleTo=function(e,t,n,i){g.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,l=i.invert(s),u="function"==typeof t?t.apply(this,arguments):t;return a(y(v(i,u),s,l),e,c)},n,i)},g.translateBy=function(e,t,n,i){g.transform(e,function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,i)},g.translateTo=function(e,t,n,i,s){g.transform(e,function(){var e=o.apply(this,arguments),s=this.__zoom,l=null==i?b(e):"function"==typeof i?i.apply(this,arguments):i;return a(bW.translate(l[0],l[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},i,s)},A.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=t8(this.that).datum();p.call(e,this.that,new bU(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:p}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:bG(+e),g):s},g.filter=function(e){return arguments.length?(i="function"==typeof e?e:bG(!!e),g):i},g.touchable=function(e){return arguments.length?(l="function"==typeof e?e:bG(!!e),g):l},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:bG([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(d=+e,g):d},g.interpolate=function(e){return arguments.length?(f=e,g):f},g.on=function(){var e=p.on.apply(p,arguments);return e===p?g:e},g.clickDistance=function(e){return arguments.length?(h=(e*=1)*e,g):Math.sqrt(h)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}bH.prototype=bz.prototype},9375(e,t,n){var i=n(8899),o=n(5933).registerAnnotation,a=n(7252),s=n(4341),l=n(5463),u=function(e,t){"use strict";if(!(this instanceof u))return new u(e,t);e=s.deepMerge({},this.constructor.defaults,e,{constraint:1}),l.call(this,e,t||"circle")};i(u,l),u.defaults=Object.assign({},l.defaults,{});var c={};c[a.capabilities.feature]=!0,o("circle",u,c),e.exports=u},9385(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h,forward:()=>d,init:()=>c,inverse:()=>f,names:()=>p});var i=n(9576),o=n(7099),a=n(3385),s=n(4181),l=n(6245),u=n(384);function c(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<u.H0)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),a=(0,i.A)(this.e,t,n),s=(0,o.A)(this.e,this.lat1,t),l=Math.sin(this.lat2),c=Math.cos(this.lat2),d=(0,i.A)(this.e,l,c),f=(0,o.A)(this.e,this.lat2,l),p=Math.abs(Math.abs(this.lat0)-u.sK)<u.H0?0:(0,o.A)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>u.H0?this.ns=Math.log(a/d)/Math.log(s/f):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(p,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function d(e){var t,n,i=e.x,l=e.y;Math.abs(2*Math.abs(l)-Math.PI)<=u.H0&&(l=(0,a.A)(l)*(u.sK-2*u.H0));var c=Math.abs(Math.abs(l)-u.sK);if(c>u.H0)t=(0,o.A)(this.e,l,Math.sin(l)),n=this.a*this.f0*Math.pow(t,this.ns);else{if((c=l*this.ns)<=0)return null;n=0}var d=this.ns*(0,s.A)(i-this.long0,this.over);return e.x=this.k0*(n*Math.sin(d))+this.x0,e.y=this.k0*(this.rh-n*Math.cos(d))+this.y0,e}function f(e){var t,n,i,o,a=(e.x-this.x0)/this.k0,c=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+c*c),n=1):(t=-Math.sqrt(a*a+c*c),n=-1);var d=0;if(0!==t&&(d=Math.atan2(n*a,n*c)),0!==t||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),-9999===(o=(0,l.A)(this.e,i)))return null}else o=-u.sK;return e.x=(0,s.A)(d/this.ns+this.long0,this.over),e.y=o,e}var p=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];let h={init:c,forward:d,inverse:f,names:p}},9408(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=d*s-l*c,p=-d*a+l*u,h=c*a-s*u,m=n*f+i*p+o*h;return m?(m=1/m,e[0]=f*m,e[1]=(-d*i+o*c)*m,e[2]=(l*i-o*s)*m,e[3]=p*m,e[4]=(d*n-o*u)*m,e[5]=(-l*n+o*a)*m,e[6]=h*m,e[7]=(-c*n+i*u)*m,e[8]=(s*n-i*a)*m,e):null}},9439(e,t,n){var i=n(8899),o=n(9186),a=n(4341),s=function(e){"use strict";if(!(this instanceof s))return new s(e);e=e||{},o.call(this,e);var t=this,n=this._init;this.featureType="vector",this.origin=function(e){return void 0===e?t.style("origin"):(t.style("origin",e),t.dataTime().modified(),t)},this.delta=function(e){return void 0===e?t.style("delta"):(t.style("delta",e),t.dataTime().modified(),t)},this._init=function(e){n.call(t,e);var i=Object.assign({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:a.identityFunction,scale:null},void 0===e.style?{}:e.style);return void 0!==e.origin&&(i.origin=e.origin),t.style(i),t.dataTime().modified(),t}};i(s,o),e.exports=s},9463(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxwYXRoIGQ9Ik0wLDExbDExLDBsMCwtMTFsMiwwbDAsMTFsMTEsMGwwLDJsLTExLDBsMCwxMWwtMiwwbDAsLTExbC0xMSwweiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIsIDE5Ljc3Nykgc2NhbGUoMC40KSByb3RhdGUoOTApIj4KICAgICAgICA8cGF0aCBkPSJNMjYuMzExLDIzLjIyNGMtMC44MTItMS40MTYtMi4wNzItMi4zNzUtMy40MDItMi43MzZjLTEuMDUxLTAuMjg3LTIuMTQxLTAuMTk5LTMuMDg0LDAuMzM0bC0yLjgwNS00LjkwNAogICAgICAgIGMxLjczNi0zLjQ2Myw1LjYzMy0xMS4yMjcsNi4zMzItMTIuNDUxQzI0LjI1OCwxLjg4NCwyMi42MzcsMCwyMi42MzcsMGwtNy4zNiwxMi44NzJMNy45MTksMGMwLDAtMS42MiwxLjg4NC0wLjcxNSwzLjQ2NgogICAgICAgIGMwLjcsMS4yMjUsNC41OTgsOC45ODgsNi4zMzIsMTIuNDUxbC0yLjgwNCw0LjkwNGMtMC45NDMtMC41MzMtMi4wMzUtMC42MjEtMy4wODQtMC4zMzRjLTEuMzMyLDAuMzYxLTIuNTkxLDEuMzItMy40MDMsMi43MzYKICAgICAgICBjLTEuNDU4LDIuNTQ3LTAuOTAxLDUuNjAyLDEuMjM5LDYuODI3YzAuOTQ5LDAuNTQ1LDIuMDQ4LDAuNjMyLDMuMTA3LDAuMzQ1YzEuMzI5LTAuMzYzLDIuNTkxLTEuMzIyLDMuNDAyLTIuNzM1CiAgICAgICAgYzAuMzU1LTAuNjI0LDAuNTktMS4yNzcsMC43MS0xLjkyNnYwLjAwMWMwLjAwMS0wLjAwNSwwLjAwMS0wLjAxLDAuMDA2LTAuMDE1YzAuMDA3LTAuMDU0LDAuMDE3LTAuMTA4LDAuMDIyLTAuMTY3CiAgICAgICAgYzAuNjAyLTQuMDM5LDEuNzQtNi4xMDIsMi41NDUtNy4xMDRjMC44MDcsMS4wMDIsMS45NDYsMy4wNjQsMi41NDcsNy4xMDRjMC4wMDYsMC4wNTksMC4wMTYsMC4xMTMsMC4wMjEsMC4xNjcKICAgICAgICBjMC4wMDQsMC4wMDUsMC4wMDQsMC4wMSwwLjAwNiwwLjAxNXYtMC4wMDFjMC4xMjEsMC42NDgsMC4zNTUsMS4zMDIsMC43MDksMS45MjZjMC44MTIsMS40MTMsMi4wNzQsMi4zNzIsMy40MDQsMi43MzUKICAgICAgICBjMS4wNTksMC4yODcsMi4xNTgsMC4yLDMuMTA5LTAuMzQ1QzI3LjIxMywyOC44MjUsMjcuNzY4LDI1Ljc3MSwyNi4zMTEsMjMuMjI0eiBNOS45MTEsMjYuNDY4CiAgICAgICAgYy0wLjQ2LDAuODAzLTEuMTg5LDEuNDA4LTEuOTQ4LDEuNjE1Yy0wLjMzOCwwLjA5Mi0wLjgzNCwwLjE0OC0xLjI4OS0wLjExM2MtMC45Ny0wLjU1NS0xLjEyOS0yLjE4Ni0wLjM0Ni0zLjU1NgogICAgICAgIGMwLjQ2OC0wLjgxMiwxLjE3Ny0xLjQwMywxLjk1LTEuNjE0YzAuMzM1LTAuMDkxLDAuODMxLTAuMTQ2LDEuMjg4LDAuMTEzQzEwLjUzNywyMy40NywxMC42OTUsMjUuMDk3LDkuOTExLDI2LjQ2OHogTTIzLjg4MSwyNy45NwogICAgICAgIGMtMC40NTUsMC4yNjItMC45NDksMC4yMDUtMS4yODcsMC4xMTNjLTAuNzYtMC4yMDctMS40ODgtMC44MTItMS45NDktMS42MTVjLTAuNzgzLTEuMzcxLTAuNjI1LTIuOTk4LDAuMzQ2LTMuNTU1CiAgICAgICAgYzAuNDU3LTAuMjYsMC45NTMtMC4yMDQsMS4yODktMC4xMTNjMC43NzEsMC4yMTEsMS40ODIsMC44MDIsMS45NDcsMS42MTRDMjUuMDEsMjUuNzg0LDI0Ljg1MiwyNy40MTUsMjMuODgxLDI3Ljk3eiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPC9nPgo8L3N2Zz4K"},9481(e,t,n){var i=n(8899),o=n(5665),a=n(5933),s=n(4341),l={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]},u=function(e){"use strict";if(!(this instanceof u))return new u(e);var t=n(5204),i=n(4128),c=n(2227);e=e||{},o.call(this,e);var d,f,p,h,m,g=this,v=this.draw,y=this._exit,b=this._init,x=this.modified,w=this._update;return this.featureType="isoline",this.contour=g.mesh,this.isoline=g.mesh,this._createIsolines=function(){var e,t=g.style.get("value"),n=void 0!==g.style("used")?g.style.get("used"):function(e,n){return s.isNonNullFinite(t(e,n))},i=!1,o=[],a=g._createMesh({used:n,value:t});return(e=g._getValueList(a)).length?(e.forEach(function(e){var t=g._isolinesForValue(a,e);t.length&&(o=o.concat(t),i=i||!!e.label)}),{lines:o,mesh:a,values:e,hasLabels:i}):{}},this._getValueList=function(e){var t,n,i,o,a,l,u,c=g.isoline,d=c.get("values")(e),f=c.get("spacing")(e),p=c.get("count")(e),h=c.get("autofit")(e),m=c.get("levels")(e);if(!e.numVertices||!e.numElements||(t=s.getMinMaxValues(e.value,c.get("min")(e),c.get("max")(e),!0),e.minValue=t.min,e.maxValue=t.max,(n=e.maxValue-e.minValue)<=0))return[];if(Array.isArray(d))d=(d=d.map(function(e,t){return{value:void 0!==e.value?e.value:e,position:t,level:e.level}})).filter(function(t){return t.value>=e.minValue&&t.value<=e.maxValue});else if(f||h)for(f||(l=Math.max(0,-(a=Math.floor(Math.log10(i=n/(2*p/3))))),i/=o=Math.pow(10,a),f=(i=i>=5?5:i>=2?2:1)*o),d=[],u=Math.ceil(e.minValue/f);u<=Math.floor(e.maxValue/f);u+=1)d.push({value:u*f,position:u,fixedDigits:l});else for(u=0,d=Array(p);u<p;u+=1)d[u]={value:e.minValue+n*(u+1)/(p+1),position:u+1};return m.length&&d.forEach(function(e,t){if(void 0===e.level){e.level=0;for(var n=0,i=m[0];n<m.length&&!(e.position%i);n+=1,i*=m[n])e.level=n+1}if(c.get("label")(e,e.position)){var o=c.get("labelText")(e,e.position);void 0===o&&(o=void 0!==e.fixedDigits?""+parseFloat(e.value.toFixed(e.fixedDigits)):""+e.value),o&&(e.label=o)}}),d},this._addSegment=function(e,t,n){var i,o,a,s,l,u,c=[t,n],d=e.length;for(e.push(c),o=0;o<2;o+=1){for(i=d-1;i>=0;i-=1){if(s=(a=e[i])[0],l=a[a.length-1],n[0]===s[0]&&n[1]===s[1])u=c.concat(a.slice(1));else{if(t[0]!==l[0]||t[1]!==l[1])continue;u=a.concat(c.slice(1))}e.splice(d,1),e[i]=c=u,d=i,t=c[0],n=c[c.length-1];break}if(i<0)break}return e},this._chainVertex=function(e,t,n){var i=n[0],o=n[1],a=3*i,s=3*o,l=(t.value-e.value[i])/(e.value[o]-e.value[i]),u=1-l;return{x:e.pos[a]*u+e.pos[s]*l,y:e.pos[a+1]*u+e.pos[s+1]*l,z:e.pos[a+2]*u+e.pos[s+2]*l}},this._isolinesForValue=function(e,t){var n,i,o,a=t.value,s=Array(e.value.length),u=[];for(n=s.length-1;n>=0;n-=1)s[n]=e.value[n]<=a?0:1;var c=e.verticesPerElement,d="square"===e.shape,f=e.elements,p=f.length;for(i=0;i<p;i+=c){if(d){if(0===(o=8*s[f[i]]+4*s[f[i+1]]+2*s[f[i+2]]+s[f[i+3]])||15===o)continue}else if(16===(o=16+4*s[f[i]]+2*s[f[i+1]]+s[f[i+2]])||23===o)continue;l[o].forEach(function(e){u=g._addSegment(u,[f[i+e.l0],f[i+e.h0]],[f[i+e.l1],f[i+e.h1]])})}return u.map(function(n){var i=[];return n.forEach(function(n){var o=g._chainVertex(e,t,n);i.length&&o.x===i[i.length-1].x&&o.y===i[i.length-1].y||i.push(o)}),i.closed=i[0].x===i[i.length-1].x&&i[0].y===i[i.length-1].y,i.value=t.value,i.level=t.level,i.position=t.position,i.label=t.label,i}).filter(function(e){return e.length>1})},this.modified=function(){var e=x();return p&&p.modified(),m&&m.modified(),e},this.labelPositions=function(){if(g.dataTime().timestamp()>=g.buildTime().timestamp()&&g._build(),f=null,!m)return g;if(!d||!d.hasLabels||!d.lines||!d.lines.length)return m.data([]),g;var e=g.isoline,n=e.get("labelSpacing"),i=e.get("labelOffset"),o=e.get("labelViewport")(d.mesh),a=g.gcs(),l=g.layer().map(),u=l.gcs(),c=l.rotation(),p=l.size(),h=[],v=0;return d.lines.forEach(function(e,d){if(e.label){var f,m,g,y,b,x,w,A,C,S,_,T=n(e.value,e.value.position),O=i(e.value,e.value.position)||0,P=l.gcsToDisplay(e,a),M=0;if(!(T<=0||isNaN(T))&&(v=Math.max(T,v),O=O+.5-Math.floor(O+.5),f=P.map(function(t,n){if(!e.closed&&n+1===P.length)return 0;var i=Math.sqrt(s.distance2dSquared(t,P[n+1<P.length?n+1:0]));return M+=i,i}),m=Math.floor(M/T)))for(x=0,_=t.transformCoordinates(a,u,e),y=(g=M/m)*O,b=0;x<P.length;x+=1){for(;b+f[x]>=y;)w=x+1===P.length?0:x+1,C=1-(A=(y-b)/f[x]),y+=g,o>0&&((S={x:P[x].x*C+P[w].x*A,y:P[x].y*C+P[w].y*A}).x<-o||S.x>p.width+o||S.y<-o||S.y>p.height+o)||h.push({x:_[x].x*C+_[w].x*A,y:_[x].y*C+_[w].y*A,z:_[x].z*C+_[w].z*A,line:e,rotation:Math.atan2(P[x].y-P[w].y,P[x].x-P[w].x)-c});b+=f[x]}}}),m.gcs(u),m.data(h),m.style("renderThreshold",2*v),f={zoom:l.zoom(),center:l.center(),rotation:c,size:p,labelViewport:o,maxSpacing:v,labelAutoUpdate:e.get("labelAutoUpdate")(d.mesh)},g},this.lastLabelPositions=function(){return Object.assign({},f)},this._updateLabelPositions=function(){var e=f;if(!e||!e.labelAutoUpdate)return g;var t=g.layer().map(),n=t.zoom(),i=t.size(),o=Math.abs(n-e.zoom)>=2;if(!o&&e.labelViewport>0){var a=Math.sqrt(s.distance2dSquared(t.gcsToDisplay(t.center()),t.gcsToDisplay(e.center)))*Math.pow(2,e.zoom-n),l=e.labelViewport/2-2*e.maxSpacing-Math.max(i.width-e.size.width,i.height-e.size.height,0);o=o||a>=l}return o&&g.labelPositions().draw(),g},this._build=function(){if((d=g._createIsolines())&&d.lines&&d.lines.length){p||(p=g.layer().createFeature("line",{selectionAPI:!1,gcs:g.gcs(),visible:g.visible(void 0,!0),style:{closed:function(e){return e.closed}}}),g.dependentFeatures([p]));var e=g.style();if(p.data(d.lines).style(["antialiasing","lineCap","lineJoin","miterLimit","strokeWidth","strokeStyle","strokeColor","strokeOffset","strokeOpacity"].reduce(function(t,n){return n in e&&(t[n]=e[n]),t},{})),d.hasLabels){if(!m){if(!(a.registries.features[g.layer().rendererName()]||{}).text){var t=a.rendererForFeatures(["text"]);h=a.createLayer("feature",g.layer().map(),{renderer:t}),g.layer().addChild(h),g.layer().node().append(h.node())}m=(h||g.layer()).createFeature("text",{selectionAPI:!1,gcs:g.gcs(),visible:g.visible(void 0,!0),style:{text:function(e){return e.line.label}}}).geoOn(i.pan,g._updateLabelPositions)}c.usedStyles.forEach(function(t){"visible"!==t&&m.style(t,e[t])}),g.dependentFeatures([p,m])}}else p&&p.data([]);return g.buildTime().modified(),g.labelPositions(),g},this._update=function(){return w.call(g),(g.dataTime().timestamp()>=g.buildTime().timestamp()||g.updateTime().timestamp()<=g.timestamp())&&g._build(),g.updateTime().modified(),g},this.draw=function(){var e=v();return p&&p.draw(),m&&m.draw(),e},this._exit=function(){m&&((h||g.layer())&&(h||g.layer()).deleteFeature(m),h&&g.layer()&&g.layer().removeChild(h)),p&&g.layer()&&g.layer().deleteFeature(p),m=null,h=null,p=null,g.dependentFeatures([]),y()},this._init=function(e){e=e||{},b.call(g,e);var t=Object.assign({},{opacity:1,value:function(e,t){return g.position()(e,t).z},rotateWithMap:!0,rotation:u.rotationFunction(),strokeWidth:function(e,t,n,i){return n.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},void 0===e.style?{}:e.style);g.style(t),g.isoline(Object.assign({},{count:15,autofit:!0,levels:[5,5],label:function(e){return e.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:!0},e.mesh||{},e.contour||{},e.isoline||{})),(e.mesh||e.contour||e.isoline)&&g.dataTime().modified()},this};u.rotationFunction=function(e,t){var n={higher:function(e){return e.rotation},lower:function(e){return e.rotation+Math.PI},map:function(e){var t=e.rotation,n=s.wrapAngle(t,!0);return(n>Math.PI/2||n<-Math.PI/2)&&(t+=Math.PI),t},screen:function(e){var n=e.rotation,i=s.wrapAngle(n+t.rotation(),!0);return(i>Math.PI/2||i<-Math.PI/2)&&(n+=Math.PI),n}};return n[e]||n.higher},i(u,o),e.exports=u},9508(e){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15];return e[0]=l*(p*y-h*v)-f*(u*y-c*v)+g*(u*h-c*p),e[1]=-(i*(p*y-h*v)-f*(o*y-a*v)+g*(o*h-a*p)),e[2]=i*(u*y-c*v)-l*(o*y-a*v)+g*(o*c-a*u),e[3]=-(i*(u*h-c*p)-l*(o*h-a*p)+f*(o*c-a*u)),e[4]=-(s*(p*y-h*v)-d*(u*y-c*v)+m*(u*h-c*p)),e[5]=n*(p*y-h*v)-d*(o*y-a*v)+m*(o*h-a*p),e[6]=-(n*(u*y-c*v)-s*(o*y-a*v)+m*(o*c-a*u)),e[7]=n*(u*h-c*p)-s*(o*h-a*p)+d*(o*c-a*u),e[8]=s*(f*y-h*g)-d*(l*y-c*g)+m*(l*h-c*f),e[9]=-(n*(f*y-h*g)-d*(i*y-a*g)+m*(i*h-a*f)),e[10]=n*(l*y-c*g)-s*(i*y-a*g)+m*(i*c-a*l),e[11]=-(n*(l*h-c*f)-s*(i*h-a*f)+d*(i*c-a*l)),e[12]=-(s*(f*v-p*g)-d*(l*v-u*g)+m*(l*p-u*f)),e[13]=n*(f*v-p*g)-d*(i*v-o*g)+m*(i*p-o*f),e[14]=-(n*(l*v-u*g)-s*(i*v-o*g)+m*(i*u-o*l)),e[15]=n*(l*p-u*f)-s*(i*p-o*f)+d*(i*u-o*l),e}},9558(e,t,n){function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var a=n(8899),s=n(9186),l=function(e){"use strict";if(!(this instanceof l))return new l(e);e=e||{},s.call(this,e);var t=n(6732),o=n(2703),a=n(4128),u=n(4341),c=n(5843);c=c.__esModule?c.default:c;var d=this,f=this._init,p=null,h=t(),m=this.data,g=0,v=e.clustering,y=null,b=[],x=null,w=!1;return this.featureType="point",this.clustering=function(e){return void 0===e?v:(v&&!e?(y=null,v=!1,m(b)):e&&v!==e&&(v=e,d._clusterData()),d)},this._clusterData=function(){if(v){var e=!0===v?{radius:10}:v;!e.maxZoom&&this.layer()&&this.layer().map()&&((e=Object.assign({},e)).maxZoom=this.layer().map().zoomRange().max);var t=d.position(),n=d.layer().map(),i=n.gcsToDisplay(n.center(void 0,null),null),a=n.displayToGcs(i,d.gcs()),s=n.displayToGcs({x:i.x+e.radius,y:i.y},d.gcs());y=new o(e=Object.assign({},e,{radius:Math.pow(Math.pow(s.y-a.y,2)+Math.pow(s.x-a.x,2),.5)*Math.pow(2,n.zoom())})),b.forEach(function(e,n){var i=u.normalizeCoordinates(t(e,n));i.index=n,y.addPoint(i)}),x=null,d._handleZoom(n.zoom())}},this._handleZoom=function(e){var t=Math.floor(e);if(v&&t!==x){x=t;for(var n=y.points(t),i=y.clusters(t),o=Array(n.length+i.length),a=0;a<n.length;a+=1)o[a]=b[n[a].index];for(var s=0,l=n.length;s<i.length;s+=1,l+=1){var u=i[s];u.__cluster=!0,o[l]=u}w=!0,d.data(o)}},this.position=function(e){if(void 0===e)return d.style("position");var t=u.isFunction(e);return d.style("position",function(n,i){return null!=n&&n.__cluster?n:t?e(n,i):e}),d.dataTime().modified(),d.modified(),d},this._updateRangeTree=function(){if(!(h.timestamp()>=d.dataTime().timestamp()&&h.timestamp()>=d.timestamp())){var e,t,n=d.style.get("radius"),o=d.style.get("stroke"),a=d.style.get("strokeWidth");t=d.position(),g=0,e=d.data().map(function(e,i){var s=t(e,i);return g=Math.max(g,n(e,i)+(o(e,i)?a(e,i):0)),[s.x,s.y]}),p=new c(e.length);var s,l=function(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,s=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw s}}}}(e);try{for(l.s();!(s=l.n()).done;){var u,f=(u=s.value,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,s,l=[],u=!0,c=!1;try{a=(n=n.call(e)).next,!1;for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),2!==l.length);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(u,2)||i(u,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],v=f[1];p.add(m,v)}}catch(e){l.e(e)}finally{l.f()}p.finish(),h.modified()}},this.pointSearch=function(e,t){var n,i,o,a,s,l,u=[],c=[],f=[],h=d.gcs(),m=d.style.get("fill"),v=d.style.get("stroke"),y=d.style.get("strokeWidth"),b=d.style.get("radius");return(o=d.data())&&o.length?(d._updateRangeTree(),s=(a=d.layer().map()).gcsToDisplay(e,t),n={x:Math.min((l=[a.displayToGcs({x:s.x-g,y:s.y-g},h),a.displayToGcs({x:s.x+g,y:s.y-g},h),a.displayToGcs({x:s.x-g,y:s.y+g},h),a.displayToGcs({x:s.x+g,y:s.y+g},h)])[0].x,l[1].x,l[2].x,l[3].x),y:Math.min(l[0].y,l[1].y,l[2].y,l[3].y)},i={x:Math.max(l[0].x,l[1].x,l[2].x,l[3].x),y:Math.max(l[0].y,l[1].y,l[2].y,l[3].y)},u=p.range(n.x,n.y,i.x,i.y),(u=Uint32Array.from(u).sort()).forEach(function(e){var t=o[e],n=v(o[e],e);if(n||m(o[e],e)){var i,l,u,p=d.position()(t,e);(u=b(o[e],e)+(n?y(o[e],e):0))&&(i=(p=a.gcsToDisplay(p,h)).x-s.x)*i+(l=p.y-s.y)*l<=u*u&&(c.push(t),f.push(e))}}),{found:c,index:f}):{found:[],index:[]}},this.polygonSearch=function(e,t,n){var i,o,a,s,l=d.gcs(),c=[],f=[],h={},m=d.layer().map(),v=d.data(),y=d.style.get("fill"),b=d.style.get("stroke"),x=d.style.get("strokeWidth"),w=d.style.get("radius");return(e.outer||(e={outer:e,inner:[]}),!(e.outer.length<3)&&v&&v.length)?((t=t||{}).partial=t.partial||!1,(e={outer:m.gcsToDisplay(e.outer,n),inner:(e.inner||[]).map(function(e){return m.gcsToDisplay(e,n)})}).outer.forEach(function(e){o||(o={x:e.x,y:e.y},a={x:e.x,y:e.y}),e.x<o.x&&(o.x=e.x),e.x>a.x&&(a.x=e.x),e.y<o.y&&(o.y=e.y),e.y>a.y&&(a.y=e.y)}),d._updateRangeTree(),o={x:Math.min((s=[m.displayToGcs({x:o.x-g,y:o.y-g},l),m.displayToGcs({x:a.x+g,y:o.y-g},l),m.displayToGcs({x:a.x+g,y:a.y+g},l),m.displayToGcs({x:o.x-g,y:a.y+g},l)])[0].x,s[1].x,s[2].x,s[3].x),y:Math.min(s[0].y,s[1].y,s[2].y,s[3].y)},a={x:Math.max(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.max(s[0].y,s[1].y,s[2].y,s[3].y)},i=p.range(o.x,o.y,a.x,a.y),(i=Uint32Array.from(i).sort()).forEach(function(n){var i=v[n],o=b(v[n],n);if(o||y(v[n],n)){var a=d.position()(i,n),s=w(v[n],n);if(s+=o?x(v[n],n):0){a=m.gcsToDisplay(a,l);var p=u.distanceToPolygon2d(a,e);(p>=s||p>=0&&"center"===t.partial||p>=-s&&t.partial&&"center"!==t.partial)&&(c.push(i),f.push(n),h[n]={partial:p<s,distance:p})}}}),{found:c,index:f,extra:h}):{found:[],index:[],extra:{}}},this.data=function(e){return void 0===e?m():(w||(b=e),v&&!w?d._clusterData():m(e),w=!1,d)},this._init=function(e){e=e||{},f.call(d,e);var t=u.deepMerge({},{radius:5,stroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:!0,fillOpacity:.8,position:function(e){return Array.isArray(e)?{x:e[0],y:e[1],z:e[2]||0}:e},origin:function(e){return e.length>=3?e.slice(0,3):[0,0,0]}},void 0===e.style?{}:e.style);return void 0!==e.position&&(t.position=e.position),d.style(t),t.position&&d.position(t.position),d.dataTime().modified(),d.geoOn(a.zoom,function(e){d._handleZoom(e.zoomLevel)}),d},d};l.create=function(e,t){return(t=t||{}).type="point",s.create(e,t)},l.capabilities={feature:"point",stroke:"point.stroke"},l.primitiveShapes={auto:"auto",sprite:"sprite",triangle:"triangle",square:"square"},a(l,s),e.exports=l},9576(e,t,n){"use strict";function i(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}n.d(t,{A:()=>i})},9594(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(8452),s={butt:0,square:1,round:2},l={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7},u={normal:0,debug:1},c=function(e){"use strict";if(!(this instanceof c))return new c(e);e=e||{},a.call(this,e);var t=n(6194),i=n(5204),o=n(4341),d=n(4727),f=n(9288),p=n(7899),h=n(7445);d.call(this);var m,g,v,y,b,x,w,A,C,S,_,T=this,O=this._exit,P=void 0!==e.dynamicDraw&&e.dynamicDraw,M=this._init,E=this._update;return this.featureVertices=function(){return[[0,"corner",-1,0],[0,"near",1,1],[1,"far",-1,3],[1,"corner",1,0],[1,"near",-1,1],[0,"far",1,3]]},this.verticesPerFeature=function(){return T.featureVertices().length},this._init=function(e){var n,i,o,a=t.shaderProgram(),s=((n=new t.shader(t.GL.VERTEX_SHADER)).setShaderSource(h),n),l=(i=void 0!==((e||{}).style||{}).debug,(o=new t.shader(t.GL.FRAGMENT_SHADER)).setShaderSource(i?p:f),o),u=t.vertexAttribute("pos"),c=t.vertexAttribute("prev"),d=t.vertexAttribute("next"),C=t.vertexAttribute("far"),S=t.vertexAttribute("flags"),O=t.vertexAttribute("strokeWidth"),E=t.vertexAttribute("strokeColor"),D=t.vertexAttribute("strokeOpacity"),I=new t.projectionUniform("projectionMatrix"),k=t.geometryData(),N=t.sourceDataP3fv({name:"pos"}),R=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Four,{name:"prev"}),B=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Five,{name:"next"}),L=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Six,{name:"far"}),F=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Seven,{name:"flags"}),V=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),j=t.sourceDataAnyfv(3,t.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),G=t.sourceDataAnyfv(1,t.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),U=t.triangles();return _=new t.modelViewOriginUniform("modelViewMatrix"),y=new t.floatUniform("pixelWidth",1/T.renderer().width()),b=new t.floatUniform("aspect",T.renderer().width()/T.renderer().height()),x=new t.floatUniform("miterLimit",10),w=new t.floatUniform("antialiasing",0),A=new t.floatUniform("fixedFlags",0),M.call(T,e),v=t.material(),g=t.mapper({dynamicDraw:P}),a.addVertexAttribute(u,t.vertexAttributeKeys.Position),a.addVertexAttribute(O,t.vertexAttributeKeysIndexed.One),a.addVertexAttribute(E,t.vertexAttributeKeysIndexed.Two),a.addVertexAttribute(D,t.vertexAttributeKeysIndexed.Three),a.addVertexAttribute(c,t.vertexAttributeKeysIndexed.Four),a.addVertexAttribute(d,t.vertexAttributeKeysIndexed.Five),a.addVertexAttribute(C,t.vertexAttributeKeysIndexed.Six),a.addVertexAttribute(S,t.vertexAttributeKeysIndexed.Seven),a.addUniform(_),a.addUniform(I),a.addUniform(y),a.addUniform(b),a.addUniform(x),a.addUniform(w),a.addUniform(A),a.addShader(l),a.addShader(s),v.addAttribute(a),v.addAttribute(t.blend()),(m=t.actor()).setMaterial(v),m.setMapper(g),k.addSource(N),k.addSource(R),k.addSource(B),k.addSource(L),k.addSource(V),k.addSource(j),k.addSource(G),k.addSource(F),U.setIndices(new Uint16Array(1)),k.addPrimitive(U),k.computeBounds=function(){k.setBounds(0,0,0,0,0,0)},g.setGeometryData(k),T},this.actors=function(){return m?[m]:[]},this._build=function(){return!function(e){var t,n,a,c,d,f,p,h,m,v,y,b,O,P,M,E,D,I,k,N,R,B,L,F,V,j,G,U,z,W,H,q,K,X,Y,Z,J,Q,$,ee=T.data(),et=0,en=[{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0},{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0}],er=en[1],ei=T.gcs(),eo=T.layer().map().gcs(),ea=T.line(),es=T.style.get("strokeWidth"),el=T.style.get("strokeColor"),eu=T.style.get("strokeOpacity"),ec=T.style.get("lineCap"),ed=T.style.get("lineJoin"),ef=T.style.get("strokeOffset"),ep=T.style.get("miterLimit")(ee),eh=T.style.get("antialiasing")(ee)||0,em=T.style.get("uniformLine"),eg=T.featureVertices(),ev=eg.length,ey=u[T.style.get("debug")(ee)?"debug":"normal"]||0,eb=g.geometryData(),ex=T.style.get("closed"),ew=!0;if(Q=o.isFunction(T.style("closed"))?void 0:ex()||!1,N=o.isFunction(T.style("lineCap"))?void 0:s[ec()||"butt"],R=o.isFunction(T.style("lineJoin"))?void 0:l[ed()||"miter"],I=o.isFunction(T.style("strokeColor"))?void 0:el(),B=o.isFunction(T.style("strokeOffset"))?void 0:ef()||0,k=o.isFunction(T.style("strokeOpacity"))?void 0:eu(),D=o.isFunction(T.style("strokeWidth"))?void 0:es(),L=o.isFunction(T.style("uniformLine"))?void 0:em(),void 0!==ep&&x.set(Math.max(1,Math.min(100,ep))),A.set(ey),w.set(eh),e)et=C.numSegments,$=C.closed,v=C.lineItemList,m=et*ev,ew=N!==C.lineCapVal||void 0===N||R!==C.lineJoinVal||void 0===R||B!==C.strokeOffsetVal||void 0===B;else{var eA=[],eC=T.position();for(n=0,eC=eC===o.identityFunction?null:eC,v=Array(ee.length),$=Array(ee.length);n<ee.length;n+=1)if(y=ea(t=ee[n],n),v[n]=y,!(y.length<2)){for(et+=y.length-1,a=0;a<y.length;a+=1)O=eC?eC(y[a],a,t,n):y[a],eA.push(O.x),eA.push(O.y),eA.push(O.z||0),a||(M=O);y.length>2&&(void 0===Q?ex(t,n):Q)?O.x!==M.x||O.y!==M.y||O.z!==M.z?(et+=1,$[n]=2):$[n]=1:$[n]=0}if(eA=i.transformCoordinates(ei,eo,eA,3),(S=new Float32Array(T.style.get("origin")(eA)))[0]||S[1]||S[2]){var eS=S[0],e_=S[1],eT=S[2];for(n=0;n<eA.length;n+=3)eA[n]-=eS,eA[n+1]-=e_,eA[n+2]-=eT}_.setOrigin(S),m=et*ev,U=o.getGeomBuffer(eb,"pos",3*m),z=o.getGeomBuffer(eb,"prev",3*m),W=o.getGeomBuffer(eb,"next",3*m),H=o.getGeomBuffer(eb,"far",3*m),eb.primitive(0).numberOfIndices()!==m&&(eb.primitive(0).numberOfIndices=function(){return m}),C={numSegments:et,closed:$,lineItemList:v,lineCapVal:N,lineJoinVal:R,strokeOffsetVal:B}}for(q=o.getGeomBuffer(eb,"flags",m),K=o.getGeomBuffer(eb,"strokeWidth",m),X=o.getGeomBuffer(eb,"strokeColor",3*m),Y=o.getGeomBuffer(eb,"strokeOpacity",m),n=P=Z=J=0;n<ee.length;n+=1)if(!((y=v[n]).length<2)){for(a=0,V="drop"===(F=void 0===L?em(y,n):L),t=ee[n],Q=$[n],E=P,h=y.length+ +(2===Q),j=0;a<h;a+=1,P+=3)if(p=a,a===y.length&&(p=0,P-=3),b=y[p],a&&(er=en[0],en[0]=en[1],en[1]=er),e||(er.pos=a===p?P:E,er.prev=p?P-3:Q?E+(y.length-3+Q)*3:P,er.next=a+1<y.length?P+3:Q?a!==p?E+3:E+6-3*Q:P),F&&a>0?1===a&&(er.strokeWidth=en[0].strokeWidth,er.strokeColor=en[0].strokeColor,er.strokeOpacity=en[0].strokeOpacity):(er.strokeWidth=void 0===D?es(b,p,t,n):D,er.strokeColor=void 0===I?el(b,p,t,n):I,er.strokeOpacity=void 0===k?eu(b,p,t,n):k),ew&&(0!==B&&(F&&a>0?1===a&&(er.strokeOffset=en[0].strokeOffset):er.strokeOffset=(void 0===B?ef(b,p,t,n):B)||0,er.strokeOffset?(er.posStrokeOffset=2047&Math.round(2048+1023*Math.min(1,Math.max(-1,er.strokeOffset))),er.negStrokeOffset=2047&Math.round(2048-1023*Math.min(1,Math.max(-1,er.strokeOffset)))):er.posStrokeOffset=er.negStrokeOffset=0),Q||a&&a!==y.length-1?er.flags=void 0===R?l[ed(b,p,t,n)]||l.miter:R:er.flags=void 0===N?s[ec(b,p,t,n)]||s.butt:N),a){if(V&&a>1&&eA[en[0].pos]===eA[en[1].pos]&&eA[en[0].pos+1]===eA[en[1].pos+1]){j+=1;continue}for(c=0;c<ev;c+=1,Z+=1,J+=3){if(V&&en[0].strokeOpacity<=0&&en[1].strokeOpacity<=0){Y[Z]=-1;continue}d=en[G=eg[c][0]],f=en[1-G],e||(U[J]=eA[d.pos],U[J+1]=eA[d.pos+1],U[J+2]=0,z[J]=eA[G?d.next:d.prev],z[J+1]=eA[(G?d.next:d.prev)+1],z[J+2]=0,W[J]=eA[G?d.prev:d.next],W[J+1]=eA[(G?d.prev:d.next)+1],W[J+2]=0,H[J]=eA[G?f.prev:f.next],H[J+1]=eA[(G?f.prev:f.next)+1],H[J+2]=0),ew&&(q[Z]=eg[c][3]+4*d.flags+32*f.flags+(G?d.posStrokeOffset:d.negStrokeOffset)*256),K[Z]=d.strokeWidth,X[J]=d.strokeColor.r,X[J+1]=d.strokeColor.g,X[J+2]=d.strokeColor.b,d.strokeOpacity<=0&&f.strokeOpacity<=0||d.strokeWidth<=0&&f.strokeWidth<=0?Y[Z]=-1:Y[Z]=d.strokeOpacity}}if(j)for(c=0;c<j*ev;c+=1,Z+=1,J+=3)Y[Z]=-1}e?(ew&&g.updateSourceBuffer("flags"),g.updateSourceBuffer("strokeWidth"),g.updateSourceBuffer("strokeOpacity"),g.updateSourceBuffer("strokeColor")):(g.modified(),eb.boundsDirty(!0),g.boundsDirtyTimestamp().modified())}(!!(T.dataTime().timestamp()<T.buildTime().timestamp()&&C)),T.renderer().contextRenderer().hasActor(m)||T.renderer().contextRenderer().addActor(m),T.buildTime().modified(),T},this._update=function(){return E.call(T),(T.dataTime().timestamp()>=T.buildTime().timestamp()||T.updateTime().timestamp()<=T.timestamp())&&T._build(),y.set(1/T.renderer().width()),b.set(T.renderer().width()/T.renderer().height()),m.setVisible(T.visible()),m.material().setBinNumber(T.bin()),T.updateTime().modified(),T},this._exit=function(){T.renderer().contextRenderer().removeActor(m),m=null,O()},this._init(e),this};i(c,a);var d={};d[a.capabilities.basic]=!0,d[a.capabilities.multicolor]=!0,o("webgl","line",c,d),e.exports=c},9646(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(7019),s=function(e){"use strict";if(!(this instanceof s))return new s(e);var t=n(9966),i=n(6732);e=e||{},a.call(this,e),t.call(this);var o=this,l=i(),u=this._update,c={};return c.style={},this._build=function(){var e,t=o.data()||[],n=o.style.get(),i=o.style.get("position");return u.call(o),e=[],t.forEach(function(n,a){var s,l;a<t.length-1&&(s=i(n,a),l=i(t[a+1],a+1),e.push({source:o.featureGcsToDisplay(s),target:o.featureGcsToDisplay(l)}))}),c.data=e,c.attributes={d:function(e){return"M"+e.source.x+","+e.source.y+"C"+e.source.x+","+(e.source.y+e.target.y)/2+" "+e.target.x+","+(e.source.y+e.target.y)/2+" "+e.target.x+","+e.target.y}},c.id=o._svgid(),c.append="path",c.classes=["svgPathFeature"],c.style=Object.assign({fill:function(){return!1},fillColor:{r:0,g:0,b:0}},n),c.visible=o.visible,o.renderer()._drawFeatures(c),l.modified(),o.updateTime().modified(),o},this._update=function(){return u.call(o),o.dataTime().timestamp()>=l.timestamp()&&o._build(),o},this._init(e),this};i(s,a),o("svg","path",s),e.exports=s},9699(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c,forward:()=>s,init:()=>a,inverse:()=>l,iterations:()=>o,names:()=>u});var i=n(384),o=1;function a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function s(e){var t,n,o,a=e.x,s=e.y-this.lat0,l=a-this.long0,u=s/i._3*1e-5,c=1,d=0;for(t=1;t<=10;t++)c*=u,d+=this.A[t]*c;var f=d,p=1,h=0,m=0,g=0;for(t=1;t<=6;t++)n=p*f-h*l,o=h*f+p*l,p=n,h=o,m=m+this.B_re[t]*p-this.B_im[t]*h,g=g+this.B_im[t]*p+this.B_re[t]*h;return e.x=g*this.a+this.x0,e.y=m*this.a+this.y0,e}function l(e){var t=e.x,n=e.y,o=t-this.x0,a=(n-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,d=0;for(p=1;p<=6;p++)h=l*a-u*s,m=u*a+l*s,l=h,u=m,c=c+this.C_re[p]*l-this.C_im[p]*u,d=d+this.C_im[p]*l+this.C_re[p]*u;for(var f=0;f<this.iterations;f++){var p,h,m,g,v,y=c,b=d,x=a,w=s;for(p=2;p<=6;p++)g=y*c-b*d,v=b*c+y*d,y=g,b=v,x+=(p-1)*(this.B_re[p]*y-this.B_im[p]*b),w+=(p-1)*(this.B_im[p]*y+this.B_re[p]*b);y=1,b=0;var A=this.B_re[1],C=this.B_im[1];for(p=2;p<=6;p++)g=y*c-b*d,v=b*c+y*d,y=g,b=v,A+=p*(this.B_re[p]*y-this.B_im[p]*b),C+=p*(this.B_im[p]*y+this.B_re[p]*b);var S=A*A+C*C;c=(x*A+w*C)/S,d=(w*A-x*C)/S}var _=c,T=d,O=1,P=0;for(p=1;p<=9;p++)O*=_,P+=this.D[p]*O;var M=this.lat0+P*i._3*1e5;return e.x=this.long0+T,e.y=M,e}var u=["New_Zealand_Map_Grid","nzmg"];let c={init:a,forward:s,inverse:l,names:u}},9742(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},9754(e,t,n){var i,o=n(8899),a=n(5933).registerRenderer,s=n(3757),l=function(e){"use strict";var t=n(4692);if(!(this instanceof l))return new l(e);e=e||{},s.call(this,e);var i=this,o=!0,a=this._init,u=this._exit;return this.clearCanvas=function(e){o=e},this.api=function(){return l.apiname},this._init=function(){if(i.initialized())return i;a.call(i);var n=e.canvas||t(document.createElement("canvas"));i.context2d=n[0].getContext("2d"),n.addClass("canvas-canvas"),t(i.layer().node().get(0)).append(n),i.canvas(n);var o=i.layer().map().size();return i._resize(0,0,o.width,o.height),i},this._resize=function(e,t,n,o){var a=i.canvas();return(parseInt(a.attr("width"),10)!==n||parseInt(a.attr("height"),10)!==o)&&(i._setWidthHeight(n,o),a.attr("width",n),a.attr("height",o),i._render()),i},this._render=function(){return i.layer().map().scheduleAnimationFrame(i._renderFrame),i},this._renderFrame=function(){var e,t=i.layer(),n=t.map(),a=n.size(),s=t.features?t.features():[];for(e=0;e<s.length;e+=1)if(s[e]._delayRender())return void i._render();for(o&&(i.context2d.setTransform(1,0,0,1,0,0),i.context2d.clearRect(0,0,a.width,a.height)),e=0;e<s.length;e+=1)s[e].visible()&&s[e]._renderOnCanvas(i.context2d,n)},this._exit=function(){i.canvas().remove(),u()},this};l.apiname="canvas",o(l,s),a("canvas",l),l.supported=function(){if(void 0===i){var e;try{i=!!((e=document.createElement("canvas")).getContext&&e.getContext("2d"))}catch(e){i=!1}e=void 0}return i},l.fallback=function(){return null},e.exports=l},9765(e,t,n){e.exports=n(4136)},9803(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0zMiwzMC41OWwtMS40MSwxLjQxbC0yLjEyLC0yLjEybC0yLjEyLDIuMTJsLTEuNDEsLTEuNDFsMi4xMiwtMi4xMmwtMi4xMiwtMi4xMmwxLjQxLC0xLjQxbDIuMTIsMi4xMmwyLjEyLC0yLjEybDEuNDEsMS40MWwtMi4xMiwyLjEyeiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgo8L3N2Zz4K"},9812(e,t,n){var i=n(4692),o=n(8899),a=n(9186),s=n(4341),l=function(e){"use strict";if(!(this instanceof l))return new l(e);e=e||{},a.call(this,e);var t,n=this,o=this._update,u=this._init;return this.featureType="pixelmap",this.position=function(e){return void 0===e?n.style("position"):(e!==n.style("position")&&(n.style("position",e),n.dataTime().modified(),n.modified()),n)},this.url=function(e){return void 0===e?n.style("url"):(e!==n.style("url")&&(n.m_srcImage=n.m_info=void 0,n.style("url",e),n.dataTime().modified(),n.modified()),n)},this.color=function(e){return void 0===e?n.style("color"):(e!==n.style("color")&&(n.style("color",e),n.dataTime().modified(),n.modified()),n)},this.indexModified=function(e,i){if(void 0===e){var o=t;return"clear"===i&&(t=void 0),o}return n.modified(),void 0===t&&(t=[e,e]),e<t[0]&&(t[0]=e),(i||e)>t[1]&&(t[1]=i||e),n},this._update=function(){return o.call(n),(n.buildTime().timestamp()<=n.dataTime().timestamp()||n.updateTime().timestamp()<n.timestamp())&&n._build(),n.updateTime().modified(),n},this.maxIndex=function(){if(n.m_info){if(void 0===n.m_info.maxIndex)for(var e in n.m_info.maxIndex=0,n.m_info.mappedColors)n.m_info.mappedColors.hasOwnProperty(e)&&(n.m_info.maxIndex=Math.max(n.m_info.maxIndex,e));return n.m_info.maxIndex}},this._computePixelmap=function(){},this._build=function(){if(n.m_srcImage)n.m_info,n._computePixelmap();else{var e=n.style.get("url")();if(s.isReadyImage(e))n.m_srcImage=e,n._computePixelmap();else if(e){var t,o,a=i.Deferred();e instanceof Image?(n.m_srcImage=e,t=e.onload,o=e.onerror):(n.m_srcImage=new Image,e.indexOf(":")>=0&&e.indexOf("/")===e.indexOf(":")+1&&(n.m_srcImage.crossOrigin=n.style.get("crossDomain")()||"anonymous")),n.m_srcImage.onload=function(){t&&t.apply(n,arguments),n.style.get("url")()===e&&(n.m_info=void 0,n._computePixelmap()),a.resolve()},n.m_srcImage.onerror=function(){o&&o.apply(n,arguments),a.reject()},a.promise(n),n.layer().addPromise(n),e instanceof Image||(n.m_srcImage.src=e)}}return n.buildTime().modified(),n},this._pointSearchProcess=function(e){for(var t=e.index.length-1;t>=0;t-=1)if(e.extra[e.index[t]]._quad&&e.extra[e.index[t]]._quad.image){var i=e.extra[e.index[t]]._quad.image;e.extra[e.index[t]]._quad.m_srcImage&&(i=e.extra[e.index[t]]._quad.m_srcImage);var o=e.extra[e.index[t]].basis,a=Math.floor(o.x*i.width),s=Math.floor(o.y*i.height),l=document.createElement("canvas");l.width=l.height=1;var u=l.getContext("2d");u.drawImage(i,a,s,1,1,0,0,1,1);var c=u.getImageData(0,0,1,1).data,d=c[0]+256*c[1]+256*c[2]*256;if(0xffffff===d)continue;return{index:[d],found:[n.data()[d]]}}return{index:[],found:[]}},this._init=function(e){e=e||{},u.call(n,e);var t=Object.assign({},{color:function(e,t){return{r:(255&t)/255,g:(t>>8&255)/255,b:(t>>16&255)/255,a:1}},position:s.identityFunction},void 0===e.style?{}:e.style);return void 0!==e.position&&(t.position=e.position),void 0!==e.url&&(t.url=e.url),void 0!==e.color&&(t.color=e.color),n.style(t),n.dataTime().modified(),e.quadFeature&&(n.m_srcImage=!0,n._computePixelmap()),n},this};l.create=function(e,t){return(t=t||{}).type="pixelmap",a.create(e,t)},l.capabilities={feature:"pixelmap",lookup:"pixelmap.lookup"},o(l,a),e.exports=l},9835(e){e.exports="/* markerFeature square/triangle vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec2 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = unit * radiusVar;\n  unitVar.y *= -1.0;\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += radiusVar * vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},9846(e,t,n){var i=n(8899),o=n(5933).registerFeature,a=n(2227),s=n(4341),l=n(6682),u=n(4226),c=function(e){"use strict";if(!(this instanceof c))return new c(e);var t=n(6062);e=e||{},a.call(this,e),t.call(this);var i=this,o="bold 16px sans-serif",d=RegExp('^\\s*(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+([-,\\"\\sa-z]+?)\\s*$',"i");return this.getFontFromStyles=function(e,t,n){var a=i.style.get("font")(t,n)||o;if(e){var s=d.exec(a);null===s&&(s=d.exec(o)),s[1]=i.style.get("fontStyle")(t,n)||s[1],s[2]=i.style.get("fontVariant")(t,n)||s[2],s[3]=i.style.get("fontWeight")(t,n)||s[3],s[4]=i.style.get("fontStretch")(t,n)||s[4],s[5]=i.style.get("fontSize")(t,n)||s[5]||"16px",s[6]=i.style.get("lineHeight")(t,n)||s[6],s[7]=i.style.get("fontFamily")(t,n)||s[7]||"sans-serif",a=(a=(s[1]||"")+" "+(s[2]||"")+" "+(s[3]||"")+" "+(s[4]||"")+" "+(s[5]||"")+(s[6]?"/"+s[6]:"")+" "+s[7]).trim().replace(/\s\s+/g," ")}return a},this._renderOnCanvas=function(e,t){var n,o,a,c,d,f,p,h,m,g,v,y,b,x,w=i.data(),A=i.style.get("position"),C=i.style.get("renderThreshold")(w),S=i.style.get("text"),_=t.rotation(),T=t.zoom(),O=t.size(),P=s.mat3AsArray();n=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some(function(e){return null!==i.style(e)&&void 0!==i.style(e)}),i._canvasProperty(),a=i.featureGcsToDisplay(w.map(A)),w.forEach(function(t,w){c=a[w],C>0&&(c.x<-C||c.x>O.width+C||c.y<-C||c.y>O.height+C)||!(d=i.style.get("visible")(t,w))&&void 0!==d||(f=s.convertColorAndOpacity(i.style.get("color")(t,w),i.style.get("textOpacity")(t,w)),h=s.convertColorAndOpacity(i.style.get("textStrokeColor")(t,w),i.style.get("textOpacity")(t,w),{r:0,g:0,b:0,a:0}),0===f.a&&0===h.a||(i._canvasProperty(e,"fillStyle",s.convertColorToRGBA(f)),null!=(o=S(t,w))&&""!==o&&(i._canvasProperty(e,"font",i.getFontFromStyles(n,t,w)),i._canvasProperty(e,"textAlign",i.style.get("textAlign")(t,w)||"center"),i._canvasProperty(e,"textBaseline",i.style.get("textBaseline")(t,w)||"middle"),g=i.style.get("rotation")(t,w)||0,v=i.style.get("rotateWithMap")(t,w)&&_,y=i.style.get("textScaled")(t,w),y=s.isNonNullFinite(y)?Math.pow(2,T-y):null,b=i.style.get("offset")(t,w),x=s.mat3AsArray(),(g||v||y&&1!==y||b&&(b.x||b.y))&&(l.translate(x,x,[c.x,c.y]),v&&_&&l.rotate(x,x,_),l.translate(x,x,[b&&b.x?+b.x:0,b&&b.y?+b.y:0]),g&&l.rotate(x,x,g),y&&1!==y&&l.scale(x,x,[y,y]),l.translate(x,x,[-c.x,-c.y])),(P[0]!==x[0]||P[1]!==x[1]||P[3]!==x[3]||P[4]!==x[4]||P[6]!==x[6]||P[7]!==x[7])&&(e.setTransform(x[0],x[1],x[3],x[4],x[6],x[7]),l.copy(P,x)),(f=s.convertColorAndOpacity(i.style.get("shadowColor")(t,w),void 0,{r:0,g:0,b:0,a:0})).a&&(b=i.style.get("shadowOffset")(t,w),p=i.style.get("shadowBlur")(t,w)),f.a&&(b&&(b.x||b.y)||p)?(i._canvasProperty(e,"shadowColor",s.convertColorToRGBA(f)),b&&(g||v)&&i.style.get("shadowRotate")(t,w)&&(x=[+b.x,+b.y,0],u.rotateZ(x,x,[0,0,0],g+(v?_:0)),b={x:x[0],y:x[1]}),i._canvasProperty(e,"shadowOffsetX",b&&b.x?+b.x:0),i._canvasProperty(e,"shadowOffsetY",b&&b.y?+b.y:0),i._canvasProperty(e,"shadowBlur",p||0)):i._canvasProperty(e,"shadowColor","rgba(0,0,0,0)"),h.a&&isFinite(m=i.style.get("textStrokeWidth")(t,w))&&m>0&&(i._canvasProperty(e,"strokeStyle",s.convertColorToRGBA(h)),i._canvasProperty(e,"lineWidth",m),e.strokeText(o,c.x,c.y),i._canvasProperty(e,"shadowColor","rgba(0,0,0,0)")),e.fillText(o,c.x,c.y))))}),i._canvasProperty(e,"globalAlpha",1),e.setTransform(1,0,0,1,0,0)},this};i(c,a),o("canvas","text",c,{}),e.exports=c},9956(e,t,n){e.exports={createColoredMesh:function(e,t){var i,o,a,s,l,u=n(4341),c=e.mesh,d=e.style.get("value"),f={used:void 0!==e.style("used")?e.style.get("used"):function(e,t){return u.isNonNullFinite(d(e,t))},opacity:e.style.get("opacity"),value:d},p=e._createMesh(t?{}:f,t?f:{});if(p.elementValues=!!t,!p.numVertices||!p.numElements)return p;var h=c.get("stepped")(p),m=c.get("opacityRange")(p),g=c.get("rangeValues")(p);if(p.stepped=void 0===h||!!h,p.colorMap=[],p.minColor=Object.assign({a:c.get("minOpacity")(p)||0},u.convertColor(c.get("minColor")(p))),p.maxColor=Object.assign({a:c.get("maxOpacity")(p)||0},u.convertColor(c.get("maxColor")(p))),c.get("colorRange")(p).forEach(function(e,t){p.colorMap.push(Object.assign({a:m&&void 0!==m[t]?m[t]:1},u.convertColor(e)))}),i=u.getMinMaxValues(p.value,c.get("min")(p),c.get("max")(p)),p.minValue=i.min,p.maxValue=i.max,g&&p.colorMap&&(g.length===p.colorMap.length+1||!h&&g.length===p.colorMap.length)||(g=null),g){for(l=1;l<g.length;l+=1)if(g[l-1]>g[l]){g=null;break}}for(g&&(p.minValue=g[0],p.maxValue=g[g.length-1]),(a=p.maxValue-p.minValue)||(p.colorMap=p.colorMap.slice(0,1),a=1,g=null),p.rangeValues=g,p.factor=(p.colorMap.length-!h)/a,s=0;s<p.value.length;s+=1)if(o=p.value[s],g&&o>=p.minValue&&o<=p.maxValue){for(l=1;l<g.length;l+=1)if(o<=g[l]){p.value[s]=l-1+(o-g[l-1])/(g[l]-g[l-1]);break}}else p.value[s]=(o-p.minValue)*p.factor;return p}}},9966(e,t,n){var i=function(e){"use strict";var t=n(4897),o=n(3619);if(!(this instanceof t))return new i(e);var a="svg-"+o(),s=this._exit,l=this,u=this.visible,c=this.draw;return this._svgid=function(){return a},this.select=function(){return l.renderer().select(l._svgid())},this.draw=function(){return l.ready&&(l._update(),c()),l},this._exit=function(){l.renderer()._removeFeature(l._svgid()),s()},this.visible=function(e,t){return void 0!==e&&e!==u(void 0,!0)&&l.renderer()&&l.renderer()._scheduleUpdate(),u(e,t)},this};e.exports=i},9971(e,t,n){var i=n(4692),o=n(8899),a=n(9186),s=function(e){"use strict";var t=n(5204),o=n(4341);if(!(this instanceof s))return new s(e);e=e||{},a.call(this,e);var l,u,c=this,d=this._init,f=e.nearestPixel,p=0,h=[],m=[];return this.featureType="quad",this._objectListStart=function(e){i.each(e,function(e,t){t.used=!1})},this._objectListGet=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].entry===t)return e[n].used=!0,e[n].value},this._objectListAdd=function(e,t,n){e.push({entry:t,value:n,used:!0})},this._objectListEnd=function(e){for(var t=e.length-1;t>=0;t-=1)e[t].used||e.splice(t,1)},this.pointSearch=function(e,n){var a,s,l=[],d=[],f={},p=[{},{},{},{}],h=[{},{},{},{}],m=[0,1,2,0],g=[1,2,3,1],v=c.data(),y=c.layer().map();return n=null===n?y.gcs():void 0===n?y.ingcs():n,e=t.transformCoordinates(n,y.gcs(),e),u||c._generateQuads(),i.each([u.clrQuads,u.imgQuads,u.vidQuads],function(t,n){n.forEach(function(t,n){for(a=0;a<m.length;a+=1)p[a].x=t.pos[3*m[a]],p[a].y=t.pos[3*m[a]+1],p[a].z=t.pos[3*m[a]+2],h[a].x=t.pos[3*g[a]],h[a].y=t.pos[3*g[a]+1],h[a].z=t.pos[3*g[a]+2];if((o.pointInPolygon(e,p)||o.pointInPolygon(e,h))&&(d.push(t.idx),l.push(v[t.idx]),(s=o.pointToTriangleBasis2d(e,p[0],p[1],p[2]))&&!(s.x+s.y>1)?s.y=1-s.y:(s=o.pointToTriangleBasis2d(e,h[2],h[1],h[0]))&&(s.x=1-s.x),s)){if(t.crop&&void 0!==t.crop.x&&void 0!==t.crop.y&&(s.x>=t.crop.x||s.y>=t.crop.y)){d.pop(),l.pop();return}f[t.idx]={basis:s,_quad:t}}})}),{index:d,found:l,extra:f}},this.position=function(e){return void 0===e?c.style("position"):(c.style("position",o.ensureFunction(e)),c.dataTime().modified(),c.modified(),c)},this._positionToQuad=function(e,n,o,a){var s=e.call(c,o,a);if(s.ll&&s.ur||s.ul&&s.lr){var l=c.gcs(),u=c.layer().map().gcs(),d={};return i.each(["ll","lr","ul","ur"],function(e,i){void 0!==s[i]&&(d[i]={},void 0===s[i].x?d[i]=[s[i][0],s[i][1],s[i][2]]:d[i]=[s[i].x,s[i].y,s[i].z],void 0===d[i][2]&&(d[i][2]=n.call(c,o,a)),l!==u&&!1!==l&&(d[i]=t.transformCoordinates(l,u,d[i])))}),d.ll=d.ll||[d.ul[0],d.lr[1],(d.ul[2]+d.lr[2])/2],d.lr=d.lr||[d.ur[0],d.ll[1],(d.ur[2]+d.ll[2])/2],d.ur=d.ur||[d.lr[0],d.ul[1],(d.lr[2]+d.ul[2])/2],d.ul=d.ul||[d.ll[0],d.ur[1],(d.ll[2]+d.ur[2])/2],d}},this._checkQuadUpdate=function(e,t){},this._generateQuads=function(){var e,t,n=c.position(),a=c.style.get("image"),s=c.style.get("video"),d=c.style.get("delayRenderWhenSeeking"),f=c.style.get("color"),g=c.style.get("depth"),v=c.style.get("opacity"),y=c.style.get("drawOnAsyncResourceLoaded"),b=c.style.get("previewColor"),x=c.style.get("previewImage"),w=c.data(),A=[],C=[],S=[],_=[0,0,0];return c._objectListStart(h),c._objectListStart(m),i.each(w,function(u,w){if(w._cachedQuad){t=w._cachedQuad.diag2,(void 0===e||w._cachedQuad.diag2&&w._cachedQuad.diag2<e)&&(_=w._cachedQuad.ll,e=w._cachedQuad.diag2),w._cachedQuad.clrquad&&A.push(w._cachedQuad.clrquad),w._cachedQuad.imgquad&&(w._cachedQuad.imageEntry&&c._objectListGet(h,w._cachedQuad.imageEntry),C.push(w._cachedQuad.imgquad)),w._cachedQuad.vidquad&&(w._cachedQuad.videoEntry&&c._objectListGet(m,w._cachedQuad.videoEntry),S.push(w._cachedQuad.vidquad));return}var T,O,P,M,E,D,I,k,N,R,B,L,F={};if(I=c._positionToQuad(n,g,w,u),R=v.call(c,w,u),void 0!==I&&R&&!(R<0)){if(F.diag2=t=Math.pow(I.ll[0]-I.ur[0],2)+Math.pow(I.ll[1]-I.ur[1],2)+Math.pow(I.ll[2]-I.ur[0],2)+Math.pow(I.lr[0]-I.ur[0],2)+Math.pow(I.lr[1]-I.ur[1],2)+Math.pow(I.lr[2]-I.ur[0],2),F.ll=I.ll,(void 0===e||t&&t<e)&&(_=I.ll,e=t),T={idx:u,pos:I=[I.ll[0],I.ll[1],I.ll[2],I.lr[0],I.lr[1],I.lr[2],I.ul[0],I.ul[1],I.ul[2],I.ur[0],I.ur[1],I.ur[2]],opacity:R,zOffset:w.zOffset},w.reference&&(T.reference=w.reference),w.crop&&(T.crop=w.crop),N=(k=a.call(c,w,u))?null:s.call(c,w,u),w.texture&&w.texture.data&&w.texture.width&&w.texture.height)T.imageTexture={width:w.texture.width,height:w.texture.height,type:w.texture.type||"RGBA",data:w.texture.data},C.push(T),F.imgquad=T;else if(k){if(F.imageEntry=k,void 0===(O=c._objectListGet(h,k))&&(k instanceof Image||k instanceof HTMLCanvasElement?O=k:(O=new Image).src=k,c._objectListAdd(h,k,O)),o.isReadyImage(O)||O instanceof HTMLCanvasElement)T.image=O;else if(B=void 0,(L=x.call(c,w,u))&&o.isReadyImage(L)?T.image=L:(B=b.call(c,w,u),T.color=o.convertColor(B),T.color&&void 0!==T.color.r&&void 0!==T.color.g&&void 0!==T.color.b?(A.push(T),F.clrquad=T):B=void 0),y.call(c,w,u))D=o.isReadyImage(O,!0)?null:i.Deferred(),M=O.onload,O.onload=function(){if(void 0!==B&&(A.includes(T)&&A.splice(A.indexOf(T),1),delete F.clrquad),T.image=O,c.dataTime().modified(),c.modified(),c._update(),c.layer().draw(),D&&D.resolve(),M)return M.apply(c,arguments)},E=O.onerror,O.onerror=function(){if(D&&D.reject(),E)return E.apply(c,arguments)},D&&c.layer().addPromise(D.promise());else if(void 0===B&&!T.image)return;C.push(T),F.imgquad=T}else if(N){if(F.videoEntry=N,void 0===(P=c._objectListGet(m,N))&&(N instanceof HTMLVideoElement?P=N:(P=document.createElement("video")).src=N,c._objectListAdd(m,N,P),i(P).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",function(e){c._checkQuadUpdate(T,e)})),T.delayRenderWhenSeeking=d.call(c,w,u),void 0===T.delayRenderWhenSeeking&&(T.delayRenderWhenSeeking=!0),o.isReadyVideo(P))T.video=P;else if(B=b.call(c,w,u),T.color=o.convertColor(B),T.color&&void 0!==T.color.r&&void 0!==T.color.g&&void 0!==T.color.b?(A.push(T),F.clrquad=T):B=void 0,y.call(c,w,u))D=o.isReadyVideo(P,!0)?null:i.Deferred(),M=P.onloadeddata,P.onloadeddata=function(){if(void 0!==B&&(A.includes(T)&&A.splice(A.indexOf(T),1),delete F.clrquad),T.video=P,c.dataTime().modified(),c.modified(),c._update(),c.layer().draw(),D&&D.resolve(),M)return M.apply(c,arguments)},E=P.onerror,P.onerror=function(){if(D&&D.reject(),E)return E.apply(c,arguments)},D&&c.layer().addPromise(D.promise());else if(void 0===B&&!T.video)return;S.push(T),F.vidquad=T}else{if(T.color=o.convertColor(f.call(c,w,u)),!T.color||void 0===T.color.r||void 0===T.color.g||void 0===T.color.b)return;A.push(T),F.clrquad=T}F.clrquad&&(p+=1,F.clrquad.quadId=p),F.imgquad&&(p+=1,F.imgquad.quadId=p),F.vidquad&&(p+=1,F.vidquad.quadId=p),!1!==l&&(w._cachedQuad=F)}}),c._objectListEnd(h),c._objectListEnd(m),u={clrQuads:A,imgQuads:C,vidQuads:S,origin:new Float32Array(_)}},this.cacheUpdate=function(e){return null==e?i.each(c.data(),function(e,t){t._cachedQuad&&delete t._cachedQuad}):(isFinite(e)&&(e=c.data()[e]),e._cachedQuad&&delete e._cachedQuad),c.modified(),c},this.video=function(e){var t,n;return(isFinite(e)&&(e=c.data()[e]),e._cachedQuad?t=(e._cachedQuad.vidquad||{}).video:(u||c._generateQuads(),(n=c.data().indexOf(e))>=0&&(t=c._objectListGet(m,c.style.get("video")(e,n)))),t instanceof HTMLVideoElement)?t:null},this.nearestPixel=function(e){return void 0===e?f:(f=e,c.modified(),c)},this._init=function(e){e=e||{},d.call(c,e),l=!1!==e.cacheQuads;var t=Object.assign({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:!0,previewColor:null,previewImage:null,image:function(e){return e.image},video:function(e){return e.video},position:o.identityFunction},void 0===e.style?{}:e.style);void 0!==e.position&&(t.position=o.ensureFunction(e.position)),c.style(t),c.dataTime().modified()},c};s.create=function(e,t){return(t=t||{}).type="quad",a.create(e,t)},s.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video",texture:"quad.texture"},o(s,a),e.exports=s},9973(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(1354),o=n.n(i),a=n(6314),s=n.n(a)()(o());s.push([e.id,`.CodeMirror-foldmarker {
  color: blue;
  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px, #b9f -1px 1px 2px;
  font-family: arial;
  line-height: .3;
  cursor: pointer;
}
.CodeMirror-foldgutter {
  width: .7em;
}
.CodeMirror-foldgutter-open,
.CodeMirror-foldgutter-folded {
  cursor: pointer;
}
.CodeMirror-foldgutter-open:after {
  content: "\\25BE";
}
.CodeMirror-foldgutter-folded:after {
  content: "\\25B8";
}
`,"",{version:3,sources:["webpack://./node_modules/codemirror/addon/fold/foldgutter.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,uFAAuF;EACvF,kBAAkB;EAClB,eAAe;EACf,eAAe;AACjB;AACA;EACE,WAAW;AACb;AACA;;EAEE,eAAe;AACjB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB",sourcesContent:['.CodeMirror-foldmarker {\n  color: blue;\n  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px, #b9f -1px 1px 2px;\n  font-family: arial;\n  line-height: .3;\n  cursor: pointer;\n}\n.CodeMirror-foldgutter {\n  width: .7em;\n}\n.CodeMirror-foldgutter-open,\n.CodeMirror-foldgutter-folded {\n  cursor: pointer;\n}\n.CodeMirror-foldgutter-open:after {\n  content: "\\25BE";\n}\n.CodeMirror-foldgutter-folded:after {\n  content: "\\25B8";\n}\n'],sourceRoot:""}]);let l=s},9985(e,t,n){"use strict";function i(e,t){return Math.pow((1-e)/(1+e),t)}n.r(t),n.d(t,{default:()=>c,forward:()=>s,init:()=>a,inverse:()=>l,names:()=>u});var o=n(384);function a(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+o.Vj)/(Math.pow(Math.tan(.5*this.lat0+o.Vj),this.C)*i(this.e*e,this.ratexp))}function s(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+o.Vj),this.C)*i(this.e*Math.sin(n),this.ratexp))-o.sK,e.x=this.C*t,e}function l(e){for(var t=e.x/this.C,n=e.y,a=Math.pow(Math.tan(.5*n+o.Vj)/this.K,1/this.C),s=20;s>0&&!(1e-14>Math.abs((n=2*Math.atan(a*i(this.e*Math.sin(e.y),-.5*this.e))-o.sK)-e.y));--s)e.y=n;return s?(e.x=t,e.y=n,e):null}var u=["gauss"];let c={init:a,forward:s,inverse:l,names:u}},9987(e,t,n){var i=n(8899),o=n(2923),a=function(e){"use strict";if(!(this instanceof a))return new a(e);e=e||{},o.call(this,e);var t=n(4128),i=this,s=this._exit,l=e.layer,u=null,c=void 0===e.position?{left:0,top:0}:e.position;if(void 0===e.parent||e.parent instanceof a)e.parent&&i.parent(e.parent);else throw Error("Parent must be of type geo.gui.widget");this._init=function(){return i.modified(),i},this._exit=function(){if(i.children().forEach(function(e){i.removeChild(e),e._exit()}),i.layer().geoOff(t.pan,i.repositionEvent),i.parentCanvas().removeChild&&i.canvas())try{i.parentCanvas().removeChild(i.canvas())}catch(e){}s()},this.layer=function(){return l||i.parent()&&i.parent().layer()},this._createCanvas=function(){throw Error("Must be defined in derived classes")},this.canvas=function(e){return void 0===e?u:(u=e,i)},this._appendCanvasToParent=function(){i.parentCanvas().appendChild(i.canvas())},this.parentCanvas=function(){return i.parent()?i.parent().canvas():i.layer().canvas()},this.position=function(e,n){if(void 0!==e){i.layer().geoOff(t.pan,i.repositionEvent);var o={};for(var a in c)c.hasOwnProperty(a)&&(o[a]=null);return(c=e).hasOwnProperty("x")&&c.hasOwnProperty("y")&&i.layer().geoOn(t.pan,i.repositionEvent),i.reposition(Object.assign(o,i.position())),i}if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&!n){var s=i.layer().map().gcsToDisplay(c);return{left:s.x,top:s.y,right:null,bottom:null}}return c},this.reposition=function(e){if(e=e||i.position(),i.canvas()&&i.canvas().style)for(var t in i.canvas().style.position="absolute",e)e.hasOwnProperty(t)&&(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(e[t])?i.canvas().style[t]=parseFloat(parseFloat(e[t]).toFixed(3))+"px":i.canvas().style[t]=e[t]);return i},this.repositionEvent=function(){return i.reposition()},this.isInViewport=function(){var e=i.position(),t=i.layer();return e.left>=0&&e.top>=0&&e.left<=t.width()&&e.top<=t.height()},c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&this.layer().geoOn(t.pan,i.repositionEvent)};i(a,o),e.exports=a}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.b="u">typeof document&&document.baseURI||self.location.href,n.nc=void 0,n(3532),window.geo=n(2980),n(875),n(3419),n(7518),window.jsonlint=n(2271),n(5885),n(6792),n(1561),n(2154),n(795),n(8948),n(1274),n(7923),window.colorbrewer=n(4802).A,window.d3=n(9365)})();
//# sourceMappingURL=bundle.js.map